{
  "version": 3,
  "sources": ["../../node_modules/lodash/isObject.js", "../../node_modules/lodash/_freeGlobal.js", "../../node_modules/lodash/_root.js", "../../node_modules/lodash/now.js", "../../node_modules/lodash/_trimmedEndIndex.js", "../../node_modules/lodash/_baseTrim.js", "../../node_modules/lodash/_Symbol.js", "../../node_modules/lodash/_getRawTag.js", "../../node_modules/lodash/_objectToString.js", "../../node_modules/lodash/_baseGetTag.js", "../../node_modules/lodash/isObjectLike.js", "../../node_modules/lodash/isSymbol.js", "../../node_modules/lodash/toNumber.js", "../../node_modules/lodash/debounce.js", "../../node_modules/lodash/throttle.js", "../../node_modules/namespace-emitter/index.js", "../../node_modules/@transloadit/prettier-bytes/src/prettierBytes.ts", "../../node_modules/wildcard/index.js", "../../node_modules/mime-match/index.js", "../../node_modules/classnames/index.js", "../../node_modules/eventemitter3/index.js", "../../node_modules/cropperjs/dist/cropper.js", "../../node_modules/@hotwired/turbo/dist/turbo.es2017-esm.js", "../../node_modules/@hotwired/stimulus/dist/stimulus.js", "../../src/js/controllers/resource_header_controller.js", "../../src/js/controllers/nested_resource_form_fields_controller.js", "../../src/js/controllers/form_controller.js", "../../node_modules/@popperjs/core/lib/enums.js", "../../node_modules/@popperjs/core/lib/dom-utils/getNodeName.js", "../../node_modules/@popperjs/core/lib/dom-utils/getWindow.js", "../../node_modules/@popperjs/core/lib/dom-utils/instanceOf.js", "../../node_modules/@popperjs/core/lib/modifiers/applyStyles.js", "../../node_modules/@popperjs/core/lib/utils/getBasePlacement.js", "../../node_modules/@popperjs/core/lib/utils/math.js", "../../node_modules/@popperjs/core/lib/utils/userAgent.js", "../../node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js", "../../node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js", "../../node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js", "../../node_modules/@popperjs/core/lib/dom-utils/contains.js", "../../node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js", "../../node_modules/@popperjs/core/lib/dom-utils/isTableElement.js", "../../node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js", "../../node_modules/@popperjs/core/lib/dom-utils/getParentNode.js", "../../node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js", "../../node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js", "../../node_modules/@popperjs/core/lib/utils/within.js", "../../node_modules/@popperjs/core/lib/utils/getFreshSideObject.js", "../../node_modules/@popperjs/core/lib/utils/mergePaddingObject.js", "../../node_modules/@popperjs/core/lib/utils/expandToHashMap.js", "../../node_modules/@popperjs/core/lib/modifiers/arrow.js", "../../node_modules/@popperjs/core/lib/utils/getVariation.js", "../../node_modules/@popperjs/core/lib/modifiers/computeStyles.js", "../../node_modules/@popperjs/core/lib/modifiers/eventListeners.js", "../../node_modules/@popperjs/core/lib/utils/getOppositePlacement.js", "../../node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js", "../../node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js", "../../node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js", "../../node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js", "../../node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js", "../../node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js", "../../node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js", "../../node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js", "../../node_modules/@popperjs/core/lib/utils/rectToClientRect.js", "../../node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js", "../../node_modules/@popperjs/core/lib/utils/computeOffsets.js", "../../node_modules/@popperjs/core/lib/utils/detectOverflow.js", "../../node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js", "../../node_modules/@popperjs/core/lib/modifiers/flip.js", "../../node_modules/@popperjs/core/lib/modifiers/hide.js", "../../node_modules/@popperjs/core/lib/modifiers/offset.js", "../../node_modules/@popperjs/core/lib/modifiers/popperOffsets.js", "../../node_modules/@popperjs/core/lib/utils/getAltAxis.js", "../../node_modules/@popperjs/core/lib/modifiers/preventOverflow.js", "../../node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js", "../../node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js", "../../node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js", "../../node_modules/@popperjs/core/lib/utils/orderModifiers.js", "../../node_modules/@popperjs/core/lib/utils/debounce.js", "../../node_modules/@popperjs/core/lib/utils/mergeByName.js", "../../node_modules/@popperjs/core/lib/createPopper.js", "../../node_modules/@popperjs/core/lib/popper.js", "../../src/js/controllers/resource_drop_down_controller.js", "../../src/js/controllers/resource_collapse_controller.js", "../../src/js/controllers/resource_dismiss_controller.js", "../../src/js/controllers/frame_navigator_controller.js", "../../src/js/controllers/color_mode_controller.js", "../../node_modules/dompurify/src/utils.ts", "../../node_modules/dompurify/src/tags.ts", "../../node_modules/dompurify/src/attrs.ts", "../../node_modules/dompurify/src/regexp.ts", "../../node_modules/dompurify/src/purify.ts", "../../node_modules/marked/src/defaults.ts", "../../node_modules/marked/src/rules.ts", "../../node_modules/marked/src/helpers.ts", "../../node_modules/marked/src/Tokenizer.ts", "../../node_modules/marked/src/Lexer.ts", "../../node_modules/marked/src/Renderer.ts", "../../node_modules/marked/src/TextRenderer.ts", "../../node_modules/marked/src/Parser.ts", "../../node_modules/marked/src/Hooks.ts", "../../node_modules/marked/src/Instance.ts", "../../node_modules/marked/src/marked.ts", "../../src/js/controllers/easymde_controller.js", "../../src/js/controllers/slim_select_controller.js", "../../src/js/controllers/flatpickr_controller.js", "../../src/js/controllers/intl_tel_input_controller.js", "../../src/js/controllers/select_navigator.js", "../../src/js/controllers/resource_tab_list_controller.js", "../../node_modules/@uppy/utils/lib/Translator.js", "../../node_modules/@uppy/core/lib/BasePlugin.js", "../../node_modules/@uppy/utils/lib/getTimeStamp.js", "../../node_modules/@uppy/core/lib/loggers.js", "../../node_modules/@uppy/utils/lib/isDOMElement.js", "../../node_modules/@uppy/utils/lib/findDOMElement.js", "../../node_modules/@uppy/utils/lib/getTextDirection.js", "../../node_modules/preact/src/constants.js", "../../node_modules/preact/src/util.js", "../../node_modules/preact/src/options.js", "../../node_modules/preact/src/create-element.js", "../../node_modules/preact/src/component.js", "../../node_modules/preact/src/diff/props.js", "../../node_modules/preact/src/create-context.js", "../../node_modules/preact/src/diff/children.js", "../../node_modules/preact/src/diff/index.js", "../../node_modules/preact/src/render.js", "../../node_modules/preact/src/clone-element.js", "../../node_modules/preact/src/diff/catch-error.js", "../../node_modules/preact/hooks/src/index.js", "../../node_modules/preact/compat/src/util.js", "../../node_modules/preact/compat/src/hooks.js", "../../node_modules/preact/compat/src/PureComponent.js", "../../node_modules/preact/compat/src/memo.js", "../../node_modules/preact/compat/src/forwardRef.js", "../../node_modules/preact/compat/src/Children.js", "../../node_modules/preact/compat/src/suspense.js", "../../node_modules/preact/compat/src/suspense-list.js", "../../node_modules/preact/src/constants.js", "../../node_modules/preact/compat/src/portals.js", "../../node_modules/preact/compat/src/render.js", "../../node_modules/preact/compat/src/index.js", "../../node_modules/@uppy/core/lib/UIPlugin.js", "../../node_modules/@uppy/store-default/package.json", "../../node_modules/@uppy/store-default/lib/index.js", "../../node_modules/@uppy/utils/lib/getFileNameAndExtension.js", "../../node_modules/@uppy/utils/lib/mimeTypes.js", "../../node_modules/@uppy/utils/lib/getFileType.js", "../../node_modules/@uppy/utils/lib/generateFileID.js", "../../node_modules/@uppy/core/lib/Uppy.js", "../../node_modules/nanoid/non-secure/index.js", "../../node_modules/@uppy/core/package.json", "../../node_modules/@uppy/core/lib/getFileName.js", "../../node_modules/@uppy/core/lib/locale.js", "../../node_modules/@uppy/core/lib/Restricter.js", "../../node_modules/@uppy/core/lib/supportsUploadProgress.js", "../../node_modules/preact/jsx-runtime/src/utils.js", "../../node_modules/preact/src/constants.js", "../../node_modules/preact/jsx-runtime/src/index.js", "../../node_modules/@uppy/informer/package.json", "../../node_modules/@uppy/informer/lib/FadeIn.js", "../../node_modules/@uppy/informer/lib/TransitionGroup.js", "../../node_modules/@uppy/informer/lib/Informer.js", "../../node_modules/@uppy/provider-views/lib/ProviderView/AuthView.js", "../../node_modules/@uppy/utils/lib/remoteFileObjToLocal.js", "../../node_modules/@uppy/provider-views/lib/ProviderView/ProviderView.js", "../../node_modules/@uppy/provider-views/package.json", "../../node_modules/@uppy/utils/lib/VirtualList.js", "../../node_modules/@uppy/provider-views/lib/Item/index.js", "../../node_modules/@uppy/provider-views/lib/Item/components/ItemIcon.js", "../../node_modules/@uppy/provider-views/lib/Item/components/GridItem.js", "../../node_modules/@uppy/provider-views/lib/Item/components/ListItem.js", "../../node_modules/@uppy/provider-views/lib/Browser.js", "../../node_modules/@uppy/provider-views/lib/FooterActions.js", "../../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/getNumberOfSelectedFiles.js", "../../node_modules/@uppy/provider-views/lib/SearchInput.js", "../../node_modules/@uppy/provider-views/lib/utils/getTagFile.js", "../../node_modules/@uppy/provider-views/lib/utils/addFiles.js", "../../node_modules/@uppy/provider-views/lib/utils/getClickedRange.js", "../../node_modules/@uppy/provider-views/lib/utils/handleError.js", "../../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/getBreadcrumbs.js", "../../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/getCheckedFilesWithPaths.js", "../../node_modules/eventemitter3/index.mjs", "../../node_modules/p-timeout/index.js", "../../node_modules/p-queue/dist/lower-bound.js", "../../node_modules/p-queue/dist/priority-queue.js", "../../node_modules/p-queue/dist/index.js", "../../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/shallowClone.js", "../../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/afterFill.js", "../../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/afterOpenFolder.js", "../../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/afterScrollFolder.js", "../../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/afterToggleCheckbox.js", "../../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/index.js", "../../node_modules/@uppy/provider-views/lib/utils/shouldHandleScroll.js", "../../node_modules/@uppy/provider-views/lib/ProviderView/Header.js", "../../node_modules/@uppy/provider-views/lib/Breadcrumbs.js", "../../node_modules/@uppy/provider-views/lib/ProviderView/User.js", "../../node_modules/@uppy/provider-views/lib/SearchProviderView/SearchProviderView.js", "../../node_modules/@uppy/utils/lib/emaFilter.js", "../../node_modules/@uppy/status-bar/package.json", "../../node_modules/@uppy/status-bar/lib/locale.js", "../../node_modules/@uppy/status-bar/lib/StatusBarStates.js", "../../node_modules/@uppy/status-bar/lib/StatusBarUI.js", "../../node_modules/@uppy/status-bar/lib/Components.js", "../../node_modules/@uppy/utils/lib/secondsToTime.js", "../../node_modules/@uppy/utils/lib/prettyETA.js", "../../node_modules/@uppy/status-bar/lib/calculateProcessingProgress.js", "../../node_modules/@uppy/status-bar/lib/StatusBar.js", "../../node_modules/@uppy/utils/lib/dataURItoBlob.js", "../../node_modules/@uppy/utils/lib/isObjectURL.js", "../../node_modules/@uppy/utils/lib/isPreviewSupported.js", "../../node_modules/exifr/dist/mini.esm.mjs", "../../node_modules/@uppy/thumbnail-generator/package.json", "../../node_modules/@uppy/thumbnail-generator/lib/locale.js", "../../node_modules/@uppy/thumbnail-generator/lib/index.js", "../../node_modules/@uppy/utils/lib/findAllDOMElements.js", "../../node_modules/@uppy/utils/lib/toArray.js", "../../node_modules/@uppy/utils/lib/getDroppedFiles/utils/fallbackApi.js", "../../node_modules/@uppy/utils/lib/getDroppedFiles/utils/webkitGetAsEntryApi/getFilesAndDirectoriesFromDirectory.js", "../../node_modules/@uppy/utils/lib/getDroppedFiles/utils/webkitGetAsEntryApi/index.js", "../../node_modules/@uppy/utils/lib/getDroppedFiles/index.js", "../../node_modules/@uppy/dashboard/package.json", "../../node_modules/@uppy/utils/lib/isDragDropSupported.js", "../../node_modules/@uppy/dashboard/lib/components/Dashboard.js", "../../node_modules/@uppy/dashboard/lib/components/AddFiles.js", "../../node_modules/@uppy/dashboard/lib/components/AddFilesPanel.js", "../../node_modules/@uppy/dashboard/lib/components/EditorPanel.js", "../../node_modules/@uppy/dashboard/lib/components/FileCard/index.js", "../../node_modules/@uppy/dashboard/lib/utils/getFileTypeIcon.js", "../../node_modules/@uppy/dashboard/lib/utils/ignoreEvent.js", "../../node_modules/@uppy/dashboard/lib/components/FilePreview.js", "../../node_modules/@uppy/dashboard/lib/components/FileCard/RenderMetaFields.js", "../../node_modules/@uppy/dashboard/lib/components/FileItem/index.js", "../../node_modules/shallow-equal/src/arrays.ts", "../../node_modules/shallow-equal/src/objects.ts", "../../node_modules/shallow-equal/src/index.ts", "../../node_modules/@uppy/dashboard/lib/utils/copyToClipboard.js", "../../node_modules/@uppy/dashboard/lib/components/FileItem/Buttons/index.js", "../../node_modules/@uppy/dashboard/lib/components/FileItem/FileInfo/index.js", "../../node_modules/@uppy/utils/lib/truncateString.js", "../../node_modules/@uppy/dashboard/lib/components/FileItem/MetaErrorMessage.js", "../../node_modules/@uppy/dashboard/lib/components/FileItem/FilePreviewAndLink/index.js", "../../node_modules/@uppy/dashboard/lib/components/FileItem/FileProgress/index.js", "../../node_modules/@uppy/dashboard/lib/components/FileList.js", "../../node_modules/@uppy/dashboard/lib/components/PickerPanelContent.js", "../../node_modules/@uppy/dashboard/lib/components/PickerPanelTopBar.js", "../../node_modules/@uppy/dashboard/lib/components/Slide.js", "../../node_modules/@uppy/dashboard/lib/locale.js", "../../node_modules/@uppy/utils/lib/FOCUSABLE_ELEMENTS.js", "../../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js", "../../node_modules/@uppy/dashboard/lib/utils/getActiveOverlayEl.js", "../../node_modules/@uppy/dashboard/lib/utils/trapFocus.js", "../../node_modules/@uppy/dashboard/lib/Dashboard.js", "../../node_modules/@uppy/image-editor/package.json", "../../node_modules/@uppy/image-editor/lib/Editor.js", "../../node_modules/@uppy/image-editor/lib/utils/getCanvasDataThatFitsPerfectlyIntoContainer.js", "../../node_modules/@uppy/image-editor/lib/utils/getScaleFactorThatRemovesDarkCorners.js", "../../node_modules/@uppy/image-editor/lib/utils/limitCropboxMovementOnMove.js", "../../node_modules/@uppy/image-editor/lib/utils/limitCropboxMovementOnResize.js", "../../node_modules/@uppy/image-editor/lib/locale.js", "../../node_modules/@uppy/image-editor/lib/ImageEditor.js", "../../node_modules/@uppy/core/lib/EventManager.js", "../../node_modules/@uppy/utils/lib/RateLimitedQueue.js", "../../node_modules/@uppy/utils/lib/NetworkError.js", "../../node_modules/@uppy/utils/lib/isNetworkError.js", "../../node_modules/@uppy/utils/lib/ProgressTimeout.js", "../../node_modules/@uppy/utils/lib/fetcher.js", "../../node_modules/@uppy/utils/lib/fileFilters.js", "../../node_modules/@uppy/utils/lib/getAllowedMetaFields.js", "../../node_modules/@uppy/xhr-upload/lib/locale.js", "../../node_modules/@uppy/xhr-upload/lib/index.js", "../../src/js/support/dom_element.js", "../../src/js/controllers/attachment_input_controller.js", "../../src/js/support/mime_icon.js", "../../src/js/controllers/attachment_preview_controller.js", "../../src/js/controllers/attachment_preview_container_controller.js", "../../src/js/controllers/sidebar_controller.js", "../../src/js/controllers/password_visibility_controller.js", "../../src/js/controllers/remote_modal_controller.js", "../../src/js/controllers/key_value_store_controller.js", "../../src/js/controllers/bulk_actions_controller.js", "../../src/js/controllers/filter_panel_controller.js", "../../src/js/controllers/textarea_autogrow_controller.js", "../../src/js/controllers/clipboard_controller.js", "../../src/js/controllers/register_controllers.js", "../../src/js/turbo/turbo_actions.js", "../../src/js/plutonium.js"],
  "sourcesContent": ["/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n", "/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n", "var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n", "var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n", "/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n", "var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n", "var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n", "var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n", "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n", "var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n", "/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n", "var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n", "var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n", "var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n", "var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n", "/**\n* Create an event emitter with namespaces\n* @name createNamespaceEmitter\n* @example\n* var emitter = require('./index')()\n*\n* emitter.on('*', function () {\n*   console.log('all events emitted', this.event)\n* })\n*\n* emitter.on('example', function () {\n*   console.log('example event emitted')\n* })\n*/\nmodule.exports = function createNamespaceEmitter () {\n  var emitter = {}\n  var _fns = emitter._fns = {}\n\n  /**\n  * Emit an event. Optionally namespace the event. Handlers are fired in the order in which they were added with exact matches taking precedence. Separate the namespace and event with a `:`\n  * @name emit\n  * @param {String} event \u2013 the name of the event, with optional namespace\n  * @param {...*} data \u2013 up to 6 arguments that are passed to the event listener\n  * @example\n  * emitter.emit('example')\n  * emitter.emit('demo:test')\n  * emitter.emit('data', { example: true}, 'a string', 1)\n  */\n  emitter.emit = function emit (event, arg1, arg2, arg3, arg4, arg5, arg6) {\n    var toEmit = getListeners(event)\n\n    if (toEmit.length) {\n      emitAll(event, toEmit, [arg1, arg2, arg3, arg4, arg5, arg6])\n    }\n  }\n\n  /**\n  * Create en event listener.\n  * @name on\n  * @param {String} event\n  * @param {Function} fn\n  * @example\n  * emitter.on('example', function () {})\n  * emitter.on('demo', function () {})\n  */\n  emitter.on = function on (event, fn) {\n    if (!_fns[event]) {\n      _fns[event] = []\n    }\n\n    _fns[event].push(fn)\n  }\n\n  /**\n  * Create en event listener that fires once.\n  * @name once\n  * @param {String} event\n  * @param {Function} fn\n  * @example\n  * emitter.once('example', function () {})\n  * emitter.once('demo', function () {})\n  */\n  emitter.once = function once (event, fn) {\n    function one () {\n      fn.apply(this, arguments)\n      emitter.off(event, one)\n    }\n    this.on(event, one)\n  }\n\n  /**\n  * Stop listening to an event. Stop all listeners on an event by only passing the event name. Stop a single listener by passing that event handler as a callback.\n  * You must be explicit about what will be unsubscribed: `emitter.off('demo')` will unsubscribe an `emitter.on('demo')` listener,\n  * `emitter.off('demo:example')` will unsubscribe an `emitter.on('demo:example')` listener\n  * @name off\n  * @param {String} event\n  * @param {Function} [fn] \u2013 the specific handler\n  * @example\n  * emitter.off('example')\n  * emitter.off('demo', function () {})\n  */\n  emitter.off = function off (event, fn) {\n    var keep = []\n\n    if (event && fn) {\n      var fns = this._fns[event]\n      var i = 0\n      var l = fns ? fns.length : 0\n\n      for (i; i < l; i++) {\n        if (fns[i] !== fn) {\n          keep.push(fns[i])\n        }\n      }\n    }\n\n    keep.length ? this._fns[event] = keep : delete this._fns[event]\n  }\n\n  function getListeners (e) {\n    var out = _fns[e] ? _fns[e] : []\n    var idx = e.indexOf(':')\n    var args = (idx === -1) ? [e] : [e.substring(0, idx), e.substring(idx + 1)]\n\n    var keys = Object.keys(_fns)\n    var i = 0\n    var l = keys.length\n\n    for (i; i < l; i++) {\n      var key = keys[i]\n      if (key === '*') {\n        out = out.concat(_fns[key])\n      }\n\n      if (args.length === 2 && args[0] === key) {\n        out = out.concat(_fns[key])\n        break\n      }\n    }\n\n    return out\n  }\n\n  function emitAll (e, fns, args) {\n    var i = 0\n    var l = fns.length\n\n    for (i; i < l; i++) {\n      if (!fns[i]) break\n      fns[i].event = e\n      fns[i].apply(fns[i], args)\n    }\n  }\n\n  return emitter\n}\n", "// Adapted from https://github.com/Flet/prettier-bytes/\n// Changing 1000 bytes to 1024, so we can keep uppercase KB vs kB\n// ISC License (c) Dan Flettre https://github.com/Flet/prettier-bytes/blob/master/LICENSE\nexport = function prettierBytes(input: number): string {\n  if (typeof input !== 'number' || Number.isNaN(input)) {\n    throw new TypeError(`Expected a number, got ${typeof input}`)\n  }\n\n  const neg = input < 0\n  let num = Math.abs(input)\n\n  if (neg) {\n    num = -num\n  }\n\n  if (num === 0) {\n    return '0 B'\n  }\n\n  const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n  const exponent = Math.min(Math.floor(Math.log(num) / Math.log(1024)), units.length - 1)\n  const value = Number(num / 1024 ** exponent)\n  const unit = units[exponent]\n\n  return `${value >= 10 || value % 1 === 0 ? Math.round(value) : value.toFixed(1)} ${unit}`\n}\n", "/* jshint node: true */\n'use strict';\n\n/**\n  # wildcard\n\n  Very simple wildcard matching, which is designed to provide the same\n  functionality that is found in the\n  [eve](https://github.com/adobe-webplatform/eve) eventing library.\n\n  ## Usage\n\n  It works with strings:\n\n  <<< examples/strings.js\n\n  Arrays:\n\n  <<< examples/arrays.js\n\n  Objects (matching against keys):\n\n  <<< examples/objects.js\n\n  While the library works in Node, if you are are looking for file-based\n  wildcard matching then you should have a look at:\n\n  <https://github.com/isaacs/node-glob>\n**/\n\nfunction WildcardMatcher(text, separator) {\n  this.text = text = text || '';\n  this.hasWild = ~text.indexOf('*');\n  this.separator = separator;\n  this.parts = text.split(separator);\n}\n\nWildcardMatcher.prototype.match = function(input) {\n  var matches = true;\n  var parts = this.parts;\n  var ii;\n  var partsCount = parts.length;\n  var testParts;\n\n  if (typeof input == 'string' || input instanceof String) {\n    if (!this.hasWild && this.text != input) {\n      matches = false;\n    } else {\n      testParts = (input || '').split(this.separator);\n      for (ii = 0; matches && ii < partsCount; ii++) {\n        if (parts[ii] === '*')  {\n          continue;\n        } else if (ii < testParts.length) {\n          matches = parts[ii] === testParts[ii];\n        } else {\n          matches = false;\n        }\n      }\n\n      // If matches, then return the component parts\n      matches = matches && testParts;\n    }\n  }\n  else if (typeof input.splice == 'function') {\n    matches = [];\n\n    for (ii = input.length; ii--; ) {\n      if (this.match(input[ii])) {\n        matches[matches.length] = input[ii];\n      }\n    }\n  }\n  else if (typeof input == 'object') {\n    matches = {};\n\n    for (var key in input) {\n      if (this.match(key)) {\n        matches[key] = input[key];\n      }\n    }\n  }\n\n  return matches;\n};\n\nmodule.exports = function(text, test, separator) {\n  var matcher = new WildcardMatcher(text, separator || /[\\/\\.]/);\n  if (typeof test != 'undefined') {\n    return matcher.match(test);\n  }\n\n  return matcher;\n};\n", "var wildcard = require('wildcard');\nvar reMimePartSplit = /[\\/\\+\\.]/;\n\n/**\n  # mime-match\n\n  A simple function to checker whether a target mime type matches a mime-type\n  pattern (e.g. image/jpeg matches image/jpeg OR image/*).\n\n  ## Example Usage\n\n  <<< example.js\n\n**/\nmodule.exports = function(target, pattern) {\n  function test(pattern) {\n    var result = wildcard(pattern, target, reMimePartSplit);\n\n    // ensure that we have a valid mime type (should have two parts)\n    return result && result.length >= 2;\n  }\n\n  return pattern ? test(pattern.split(';')[0]) : test;\n};\n", "/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n", "'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n", "/*!\n * Cropper.js v1.6.2\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2024-04-21T07:43:05.335Z\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Cropper = factory());\n})(this, (function () { 'use strict';\n\n  function ownKeys(e, r) {\n    var t = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var o = Object.getOwnPropertySymbols(e);\n      r && (o = o.filter(function (r) {\n        return Object.getOwnPropertyDescriptor(e, r).enumerable;\n      })), t.push.apply(t, o);\n    }\n    return t;\n  }\n  function _objectSpread2(e) {\n    for (var r = 1; r < arguments.length; r++) {\n      var t = null != arguments[r] ? arguments[r] : {};\n      r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n        _defineProperty(e, r, t[r]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n        Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n      });\n    }\n    return e;\n  }\n  function _toPrimitive(t, r) {\n    if (\"object\" != typeof t || !t) return t;\n    var e = t[Symbol.toPrimitive];\n    if (void 0 !== e) {\n      var i = e.call(t, r || \"default\");\n      if (\"object\" != typeof i) return i;\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n    }\n    return (\"string\" === r ? String : Number)(t);\n  }\n  function _toPropertyKey(t) {\n    var i = _toPrimitive(t, \"string\");\n    return \"symbol\" == typeof i ? i : i + \"\";\n  }\n  function _typeof(o) {\n    \"@babel/helpers - typeof\";\n\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n      return typeof o;\n    } : function (o) {\n      return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n    }, _typeof(o);\n  }\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n    }\n  }\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    Object.defineProperty(Constructor, \"prototype\", {\n      writable: false\n    });\n    return Constructor;\n  }\n  function _defineProperty(obj, key, value) {\n    key = _toPropertyKey(key);\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n  }\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n    return arr2;\n  }\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var WINDOW = IS_BROWSER ? window : {};\n  var IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;\n  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\n  var NAMESPACE = 'cropper';\n\n  // Actions\n  var ACTION_ALL = 'all';\n  var ACTION_CROP = 'crop';\n  var ACTION_MOVE = 'move';\n  var ACTION_ZOOM = 'zoom';\n  var ACTION_EAST = 'e';\n  var ACTION_WEST = 'w';\n  var ACTION_SOUTH = 's';\n  var ACTION_NORTH = 'n';\n  var ACTION_NORTH_EAST = 'ne';\n  var ACTION_NORTH_WEST = 'nw';\n  var ACTION_SOUTH_EAST = 'se';\n  var ACTION_SOUTH_WEST = 'sw';\n\n  // Classes\n  var CLASS_CROP = \"\".concat(NAMESPACE, \"-crop\");\n  var CLASS_DISABLED = \"\".concat(NAMESPACE, \"-disabled\");\n  var CLASS_HIDDEN = \"\".concat(NAMESPACE, \"-hidden\");\n  var CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\n  var CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\n  var CLASS_MODAL = \"\".concat(NAMESPACE, \"-modal\");\n  var CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\");\n\n  // Data keys\n  var DATA_ACTION = \"\".concat(NAMESPACE, \"Action\");\n  var DATA_PREVIEW = \"\".concat(NAMESPACE, \"Preview\");\n\n  // Drag modes\n  var DRAG_MODE_CROP = 'crop';\n  var DRAG_MODE_MOVE = 'move';\n  var DRAG_MODE_NONE = 'none';\n\n  // Events\n  var EVENT_CROP = 'crop';\n  var EVENT_CROP_END = 'cropend';\n  var EVENT_CROP_MOVE = 'cropmove';\n  var EVENT_CROP_START = 'cropstart';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\n  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\n  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\n  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\n  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\n  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\n  var EVENT_READY = 'ready';\n  var EVENT_RESIZE = 'resize';\n  var EVENT_WHEEL = 'wheel';\n  var EVENT_ZOOM = 'zoom';\n\n  // Mime types\n  var MIME_TYPE_JPEG = 'image/jpeg';\n\n  // RegExps\n  var REGEXP_ACTIONS = /^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/;\n  var REGEXP_DATA_URL = /^data:/;\n  var REGEXP_DATA_URL_JPEG = /^data:image\\/jpeg;base64,/;\n  var REGEXP_TAG_NAME = /^img|canvas$/i;\n\n  // Misc\n  // Inspired by the default width and height of a canvas element.\n  var MIN_CONTAINER_WIDTH = 200;\n  var MIN_CONTAINER_HEIGHT = 100;\n\n  var DEFAULTS = {\n    // Define the view mode of the cropper\n    viewMode: 0,\n    // 0, 1, 2, 3\n\n    // Define the dragging mode of the cropper\n    dragMode: DRAG_MODE_CROP,\n    // 'crop', 'move' or 'none'\n\n    // Define the initial aspect ratio of the crop box\n    initialAspectRatio: NaN,\n    // Define the aspect ratio of the crop box\n    aspectRatio: NaN,\n    // An object with the previous cropping result data\n    data: null,\n    // A selector for adding extra containers to preview\n    preview: '',\n    // Re-render the cropper when resize the window\n    responsive: true,\n    // Restore the cropped area after resize the window\n    restore: true,\n    // Check if the current image is a cross-origin image\n    checkCrossOrigin: true,\n    // Check the current image's Exif Orientation information\n    checkOrientation: true,\n    // Show the black modal\n    modal: true,\n    // Show the dashed lines for guiding\n    guides: true,\n    // Show the center indicator for guiding\n    center: true,\n    // Show the white modal to highlight the crop box\n    highlight: true,\n    // Show the grid background\n    background: true,\n    // Enable to crop the image automatically when initialize\n    autoCrop: true,\n    // Define the percentage of automatic cropping area when initializes\n    autoCropArea: 0.8,\n    // Enable to move the image\n    movable: true,\n    // Enable to rotate the image\n    rotatable: true,\n    // Enable to scale the image\n    scalable: true,\n    // Enable to zoom the image\n    zoomable: true,\n    // Enable to zoom the image by dragging touch\n    zoomOnTouch: true,\n    // Enable to zoom the image by wheeling mouse\n    zoomOnWheel: true,\n    // Define zoom ratio when zoom the image by wheeling mouse\n    wheelZoomRatio: 0.1,\n    // Enable to move the crop box\n    cropBoxMovable: true,\n    // Enable to resize the crop box\n    cropBoxResizable: true,\n    // Toggle drag mode between \"crop\" and \"move\" when click twice on the cropper\n    toggleDragModeOnDblclick: true,\n    // Size limitation\n    minCanvasWidth: 0,\n    minCanvasHeight: 0,\n    minCropBoxWidth: 0,\n    minCropBoxHeight: 0,\n    minContainerWidth: MIN_CONTAINER_WIDTH,\n    minContainerHeight: MIN_CONTAINER_HEIGHT,\n    // Shortcuts of events\n    ready: null,\n    cropstart: null,\n    cropmove: null,\n    cropend: null,\n    crop: null,\n    zoom: null\n  };\n\n  var TEMPLATE = '<div class=\"cropper-container\" touch-action=\"none\">' + '<div class=\"cropper-wrap-box\">' + '<div class=\"cropper-canvas\"></div>' + '</div>' + '<div class=\"cropper-drag-box\"></div>' + '<div class=\"cropper-crop-box\">' + '<span class=\"cropper-view-box\"></span>' + '<span class=\"cropper-dashed dashed-h\"></span>' + '<span class=\"cropper-dashed dashed-v\"></span>' + '<span class=\"cropper-center\"></span>' + '<span class=\"cropper-face\"></span>' + '<span class=\"cropper-line line-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-line line-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-line line-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-line line-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-point point-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-point point-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-point point-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-ne\" data-cropper-action=\"ne\"></span>' + '<span class=\"cropper-point point-nw\" data-cropper-action=\"nw\"></span>' + '<span class=\"cropper-point point-sw\" data-cropper-action=\"sw\"></span>' + '<span class=\"cropper-point point-se\" data-cropper-action=\"se\"></span>' + '</div>' + '</div>';\n\n  /**\n   * Check if the given value is not a number.\n   */\n  var isNaN = Number.isNaN || WINDOW.isNaN;\n\n  /**\n   * Check if the given value is a number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n   */\n  function isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n  }\n\n  /**\n   * Check if the given value is a positive number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a positive number, else `false`.\n   */\n  var isPositiveNumber = function isPositiveNumber(value) {\n    return value > 0 && value < Infinity;\n  };\n\n  /**\n   * Check if the given value is undefined.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n   */\n  function isUndefined(value) {\n    return typeof value === 'undefined';\n  }\n\n  /**\n   * Check if the given value is an object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n   */\n  function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  }\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n  /**\n   * Check if the given value is a plain object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n   */\n  function isPlainObject(value) {\n    if (!isObject(value)) {\n      return false;\n    }\n    try {\n      var _constructor = value.constructor;\n      var prototype = _constructor.prototype;\n      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * Check if the given value is a function.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n   */\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n  var slice = Array.prototype.slice;\n\n  /**\n   * Convert array-like or iterable object to an array.\n   * @param {*} value - The value to convert.\n   * @returns {Array} Returns a new array.\n   */\n  function toArray(value) {\n    return Array.from ? Array.from(value) : slice.call(value);\n  }\n\n  /**\n   * Iterate the given data.\n   * @param {*} data - The data to iterate.\n   * @param {Function} callback - The process function for each element.\n   * @returns {*} The original data.\n   */\n  function forEach(data, callback) {\n    if (data && isFunction(callback)) {\n      if (Array.isArray(data) || isNumber(data.length) /* array-like */) {\n        toArray(data).forEach(function (value, key) {\n          callback.call(data, value, key, data);\n        });\n      } else if (isObject(data)) {\n        Object.keys(data).forEach(function (key) {\n          callback.call(data, data[key], key, data);\n        });\n      }\n    }\n    return data;\n  }\n\n  /**\n   * Extend the given object.\n   * @param {*} target - The target object to extend.\n   * @param {*} args - The rest objects for merging to the target object.\n   * @returns {Object} The extended object.\n   */\n  var assign = Object.assign || function assign(target) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    if (isObject(target) && args.length > 0) {\n      args.forEach(function (arg) {\n        if (isObject(arg)) {\n          Object.keys(arg).forEach(function (key) {\n            target[key] = arg[key];\n          });\n        }\n      });\n    }\n    return target;\n  };\n  var REGEXP_DECIMALS = /\\.\\d*(?:0|9){12}\\d*$/;\n\n  /**\n   * Normalize decimal number.\n   * Check out {@link https://0.30000000000000004.com/}\n   * @param {number} value - The value to normalize.\n   * @param {number} [times=100000000000] - The times for normalizing.\n   * @returns {number} Returns the normalized number.\n   */\n  function normalizeDecimalNumber(value) {\n    var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;\n    return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;\n  }\n  var REGEXP_SUFFIX = /^width|height|left|top|marginLeft|marginTop$/;\n\n  /**\n   * Apply styles to the given element.\n   * @param {Element} element - The target element.\n   * @param {Object} styles - The styles for applying.\n   */\n  function setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value = \"\".concat(value, \"px\");\n      }\n      style[property] = value;\n    });\n  }\n\n  /**\n   * Check if the given element has a special class.\n   * @param {Element} element - The element to check.\n   * @param {string} value - The class to search.\n   * @returns {boolean} Returns `true` if the special class was found.\n   */\n  function hasClass(element, value) {\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n  }\n\n  /**\n   * Add classes to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be added.\n   */\n  function addClass(element, value) {\n    if (!value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        addClass(elem, value);\n      });\n      return;\n    }\n    if (element.classList) {\n      element.classList.add(value);\n      return;\n    }\n    var className = element.className.trim();\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = \"\".concat(className, \" \").concat(value);\n    }\n  }\n\n  /**\n   * Remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be removed.\n   */\n  function removeClass(element, value) {\n    if (!value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        removeClass(elem, value);\n      });\n      return;\n    }\n    if (element.classList) {\n      element.classList.remove(value);\n      return;\n    }\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n\n  /**\n   * Add or remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be toggled.\n   * @param {boolean} added - Add only.\n   */\n  function toggleClass(element, value, added) {\n    if (!value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n      return;\n    }\n\n    // IE10-11 doesn't support the second parameter of `classList.toggle`\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n  var REGEXP_CAMEL_CASE = /([a-z\\d])([A-Z])/g;\n\n  /**\n   * Transform the given string from camelCase to kebab-case\n   * @param {string} value - The value to transform.\n   * @returns {string} The transformed value.\n   */\n  function toParamCase(value) {\n    return value.replace(REGEXP_CAMEL_CASE, '$1-$2').toLowerCase();\n  }\n\n  /**\n   * Get data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to get.\n   * @returns {string} The data value.\n   */\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    }\n    if (element.dataset) {\n      return element.dataset[name];\n    }\n    return element.getAttribute(\"data-\".concat(toParamCase(name)));\n  }\n\n  /**\n   * Set data to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to set.\n   * @param {string} data - The data value.\n   */\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute(\"data-\".concat(toParamCase(name)), data);\n    }\n  }\n\n  /**\n   * Remove data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to remove.\n   */\n  function removeData(element, name) {\n    if (isObject(element[name])) {\n      try {\n        delete element[name];\n      } catch (error) {\n        element[name] = undefined;\n      }\n    } else if (element.dataset) {\n      // #128 Safari not allows to delete dataset property\n      try {\n        delete element.dataset[name];\n      } catch (error) {\n        element.dataset[name] = undefined;\n      }\n    } else {\n      element.removeAttribute(\"data-\".concat(toParamCase(name)));\n    }\n  }\n  var REGEXP_SPACES = /\\s\\s*/;\n  var onceSupported = function () {\n    var supported = false;\n    if (IS_BROWSER) {\n      var once = false;\n      var listener = function listener() {};\n      var options = Object.defineProperty({}, 'once', {\n        get: function get() {\n          supported = true;\n          return once;\n        },\n        /**\n         * This setter can fix a `TypeError` in strict mode\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n         * @param {boolean} value - The value to set\n         */\n        set: function set(value) {\n          once = value;\n        }\n      });\n      WINDOW.addEventListener('test', listener, options);\n      WINDOW.removeEventListener('test', listener, options);\n    }\n    return supported;\n  }();\n\n  /**\n   * Remove event listener from the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n  function removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (!onceSupported) {\n        var listeners = element.listeners;\n        if (listeners && listeners[event] && listeners[event][listener]) {\n          handler = listeners[event][listener];\n          delete listeners[event][listener];\n          if (Object.keys(listeners[event]).length === 0) {\n            delete listeners[event];\n          }\n          if (Object.keys(listeners).length === 0) {\n            delete element.listeners;\n          }\n        }\n      }\n      element.removeEventListener(event, handler, options);\n    });\n  }\n\n  /**\n   * Add event listener to the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n  function addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (options.once && !onceSupported) {\n        var _element$listeners = element.listeners,\n          listeners = _element$listeners === void 0 ? {} : _element$listeners;\n        _handler = function handler() {\n          delete listeners[event][listener];\n          element.removeEventListener(event, _handler, options);\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n          listener.apply(element, args);\n        };\n        if (!listeners[event]) {\n          listeners[event] = {};\n        }\n        if (listeners[event][listener]) {\n          element.removeEventListener(event, listeners[event][listener], options);\n        }\n        listeners[event][listener] = _handler;\n        element.listeners = listeners;\n      }\n      element.addEventListener(event, _handler, options);\n    });\n  }\n\n  /**\n   * Dispatch event on the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Object} data - The additional event data.\n   * @returns {boolean} Indicate if the event is default prevented or not.\n   */\n  function dispatchEvent(element, type, data) {\n    var event;\n\n    // Event and CustomEvent on IE9-11 are global objects, not constructors\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      event = new CustomEvent(type, {\n        detail: data,\n        bubbles: true,\n        cancelable: true\n      });\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n    return element.dispatchEvent(event);\n  }\n\n  /**\n   * Get the offset base on the document.\n   * @param {Element} element - The target element.\n   * @returns {Object} The offset data.\n   */\n  function getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n      top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n  }\n  var location = WINDOW.location;\n  var REGEXP_ORIGINS = /^(\\w+:)\\/\\/([^:/?#]*):?(\\d*)/i;\n\n  /**\n   * Check if the given URL is a cross origin URL.\n   * @param {string} url - The target URL.\n   * @returns {boolean} Returns `true` if the given URL is a cross origin URL, else `false`.\n   */\n  function isCrossOriginURL(url) {\n    var parts = url.match(REGEXP_ORIGINS);\n    return parts !== null && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);\n  }\n\n  /**\n   * Add timestamp to the given URL.\n   * @param {string} url - The target URL.\n   * @returns {string} The result URL.\n   */\n  function addTimestamp(url) {\n    var timestamp = \"timestamp=\".concat(new Date().getTime());\n    return url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;\n  }\n\n  /**\n   * Get transforms base on the given object.\n   * @param {Object} obj - The target object.\n   * @returns {string} A string contains transform values.\n   */\n  function getTransforms(_ref) {\n    var rotate = _ref.rotate,\n      scaleX = _ref.scaleX,\n      scaleY = _ref.scaleY,\n      translateX = _ref.translateX,\n      translateY = _ref.translateY;\n    var values = [];\n    if (isNumber(translateX) && translateX !== 0) {\n      values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n    if (isNumber(translateY) && translateY !== 0) {\n      values.push(\"translateY(\".concat(translateY, \"px)\"));\n    }\n\n    // Rotate should come first before scale to match orientation transform\n    if (isNumber(rotate) && rotate !== 0) {\n      values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n    if (isNumber(scaleX) && scaleX !== 1) {\n      values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n    if (isNumber(scaleY) && scaleY !== 1) {\n      values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n      WebkitTransform: transform,\n      msTransform: transform,\n      transform: transform\n    };\n  }\n\n  /**\n   * Get the max ratio of a group of pointers.\n   * @param {string} pointers - The target pointers.\n   * @returns {number} The result ratio.\n   */\n  function getMaxZoomRatio(pointers) {\n    var pointers2 = _objectSpread2({}, pointers);\n    var maxRatio = 0;\n    forEach(pointers, function (pointer, pointerId) {\n      delete pointers2[pointerId];\n      forEach(pointers2, function (pointer2) {\n        var x1 = Math.abs(pointer.startX - pointer2.startX);\n        var y1 = Math.abs(pointer.startY - pointer2.startY);\n        var x2 = Math.abs(pointer.endX - pointer2.endX);\n        var y2 = Math.abs(pointer.endY - pointer2.endY);\n        var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n        var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n        var ratio = (z2 - z1) / z1;\n        if (Math.abs(ratio) > Math.abs(maxRatio)) {\n          maxRatio = ratio;\n        }\n      });\n    });\n    return maxRatio;\n  }\n\n  /**\n   * Get a pointer from an event object.\n   * @param {Object} event - The target event object.\n   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n   * @returns {Object} The result pointer contains start and/or end point coordinates.\n   */\n  function getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX,\n      pageY = _ref2.pageY;\n    var end = {\n      endX: pageX,\n      endY: pageY\n    };\n    return endOnly ? end : _objectSpread2({\n      startX: pageX,\n      startY: pageY\n    }, end);\n  }\n\n  /**\n   * Get the center point coordinate of a group of pointers.\n   * @param {Object} pointers - The target pointers.\n   * @returns {Object} The center point coordinate.\n   */\n  function getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n      var startX = _ref3.startX,\n        startY = _ref3.startY;\n      pageX += startX;\n      pageY += startY;\n      count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n\n  /**\n   * Get the max sizes in a rectangle under the given aspect ratio.\n   * @param {Object} data - The original sizes.\n   * @param {string} [type='contain'] - The adjust type.\n   * @returns {Object} The result sizes.\n   */\n  function getAdjustedSizes(_ref4) {\n    var aspectRatio = _ref4.aspectRatio,\n      height = _ref4.height,\n      width = _ref4.width;\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'contain';\n    var isValidWidth = isPositiveNumber(width);\n    var isValidHeight = isPositiveNumber(height);\n    if (isValidWidth && isValidHeight) {\n      var adjustedWidth = height * aspectRatio;\n      if (type === 'contain' && adjustedWidth > width || type === 'cover' && adjustedWidth < width) {\n        height = width / aspectRatio;\n      } else {\n        width = height * aspectRatio;\n      }\n    } else if (isValidWidth) {\n      height = width / aspectRatio;\n    } else if (isValidHeight) {\n      width = height * aspectRatio;\n    }\n    return {\n      width: width,\n      height: height\n    };\n  }\n\n  /**\n   * Get the new sizes of a rectangle after rotated.\n   * @param {Object} data - The original sizes.\n   * @returns {Object} The result sizes.\n   */\n  function getRotatedSizes(_ref5) {\n    var width = _ref5.width,\n      height = _ref5.height,\n      degree = _ref5.degree;\n    degree = Math.abs(degree) % 180;\n    if (degree === 90) {\n      return {\n        width: height,\n        height: width\n      };\n    }\n    var arc = degree % 90 * Math.PI / 180;\n    var sinArc = Math.sin(arc);\n    var cosArc = Math.cos(arc);\n    var newWidth = width * cosArc + height * sinArc;\n    var newHeight = width * sinArc + height * cosArc;\n    return degree > 90 ? {\n      width: newHeight,\n      height: newWidth\n    } : {\n      width: newWidth,\n      height: newHeight\n    };\n  }\n\n  /**\n   * Get a canvas which drew the given image.\n   * @param {HTMLImageElement} image - The image for drawing.\n   * @param {Object} imageData - The image data.\n   * @param {Object} canvasData - The canvas data.\n   * @param {Object} options - The options.\n   * @returns {HTMLCanvasElement} The result canvas.\n   */\n  function getSourceCanvas(image, _ref6, _ref7, _ref8) {\n    var imageAspectRatio = _ref6.aspectRatio,\n      imageNaturalWidth = _ref6.naturalWidth,\n      imageNaturalHeight = _ref6.naturalHeight,\n      _ref6$rotate = _ref6.rotate,\n      rotate = _ref6$rotate === void 0 ? 0 : _ref6$rotate,\n      _ref6$scaleX = _ref6.scaleX,\n      scaleX = _ref6$scaleX === void 0 ? 1 : _ref6$scaleX,\n      _ref6$scaleY = _ref6.scaleY,\n      scaleY = _ref6$scaleY === void 0 ? 1 : _ref6$scaleY;\n    var aspectRatio = _ref7.aspectRatio,\n      naturalWidth = _ref7.naturalWidth,\n      naturalHeight = _ref7.naturalHeight;\n    var _ref8$fillColor = _ref8.fillColor,\n      fillColor = _ref8$fillColor === void 0 ? 'transparent' : _ref8$fillColor,\n      _ref8$imageSmoothingE = _ref8.imageSmoothingEnabled,\n      imageSmoothingEnabled = _ref8$imageSmoothingE === void 0 ? true : _ref8$imageSmoothingE,\n      _ref8$imageSmoothingQ = _ref8.imageSmoothingQuality,\n      imageSmoothingQuality = _ref8$imageSmoothingQ === void 0 ? 'low' : _ref8$imageSmoothingQ,\n      _ref8$maxWidth = _ref8.maxWidth,\n      maxWidth = _ref8$maxWidth === void 0 ? Infinity : _ref8$maxWidth,\n      _ref8$maxHeight = _ref8.maxHeight,\n      maxHeight = _ref8$maxHeight === void 0 ? Infinity : _ref8$maxHeight,\n      _ref8$minWidth = _ref8.minWidth,\n      minWidth = _ref8$minWidth === void 0 ? 0 : _ref8$minWidth,\n      _ref8$minHeight = _ref8.minHeight,\n      minHeight = _ref8$minHeight === void 0 ? 0 : _ref8$minHeight;\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    var maxSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var minSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var width = Math.min(maxSizes.width, Math.max(minSizes.width, naturalWidth));\n    var height = Math.min(maxSizes.height, Math.max(minSizes.height, naturalHeight));\n\n    // Note: should always use image's natural sizes for drawing as\n    // imageData.naturalWidth === canvasData.naturalHeight when rotate % 180 === 90\n    var destMaxSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var destMinSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var destWidth = Math.min(destMaxSizes.width, Math.max(destMinSizes.width, imageNaturalWidth));\n    var destHeight = Math.min(destMaxSizes.height, Math.max(destMinSizes.height, imageNaturalHeight));\n    var params = [-destWidth / 2, -destHeight / 2, destWidth, destHeight];\n    canvas.width = normalizeDecimalNumber(width);\n    canvas.height = normalizeDecimalNumber(height);\n    context.fillStyle = fillColor;\n    context.fillRect(0, 0, width, height);\n    context.save();\n    context.translate(width / 2, height / 2);\n    context.rotate(rotate * Math.PI / 180);\n    context.scale(scaleX, scaleY);\n    context.imageSmoothingEnabled = imageSmoothingEnabled;\n    context.imageSmoothingQuality = imageSmoothingQuality;\n    context.drawImage.apply(context, [image].concat(_toConsumableArray(params.map(function (param) {\n      return Math.floor(normalizeDecimalNumber(param));\n    }))));\n    context.restore();\n    return canvas;\n  }\n  var fromCharCode = String.fromCharCode;\n\n  /**\n   * Get string from char code in data view.\n   * @param {DataView} dataView - The data view for read.\n   * @param {number} start - The start index.\n   * @param {number} length - The read length.\n   * @returns {string} The read result.\n   */\n  function getStringFromCharCode(dataView, start, length) {\n    var str = '';\n    length += start;\n    for (var i = start; i < length; i += 1) {\n      str += fromCharCode(dataView.getUint8(i));\n    }\n    return str;\n  }\n  var REGEXP_DATA_URL_HEAD = /^data:.*,/;\n\n  /**\n   * Transform Data URL to array buffer.\n   * @param {string} dataURL - The Data URL to transform.\n   * @returns {ArrayBuffer} The result array buffer.\n   */\n  function dataURLToArrayBuffer(dataURL) {\n    var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');\n    var binary = atob(base64);\n    var arrayBuffer = new ArrayBuffer(binary.length);\n    var uint8 = new Uint8Array(arrayBuffer);\n    forEach(uint8, function (value, i) {\n      uint8[i] = binary.charCodeAt(i);\n    });\n    return arrayBuffer;\n  }\n\n  /**\n   * Transform array buffer to Data URL.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.\n   * @param {string} mimeType - The mime type of the Data URL.\n   * @returns {string} The result Data URL.\n   */\n  function arrayBufferToDataURL(arrayBuffer, mimeType) {\n    var chunks = [];\n\n    // Chunk Typed Array for better performance (#435)\n    var chunkSize = 8192;\n    var uint8 = new Uint8Array(arrayBuffer);\n    while (uint8.length > 0) {\n      // XXX: Babel's `toConsumableArray` helper will throw error in IE or Safari 9\n      // eslint-disable-next-line prefer-spread\n      chunks.push(fromCharCode.apply(null, toArray(uint8.subarray(0, chunkSize))));\n      uint8 = uint8.subarray(chunkSize);\n    }\n    return \"data:\".concat(mimeType, \";base64,\").concat(btoa(chunks.join('')));\n  }\n\n  /**\n   * Get orientation value from given array buffer.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to read.\n   * @returns {number} The read orientation value.\n   */\n  function resetAndGetOrientation(arrayBuffer) {\n    var dataView = new DataView(arrayBuffer);\n    var orientation;\n\n    // Ignores range error when the image does not have correct Exif information\n    try {\n      var littleEndian;\n      var app1Start;\n      var ifdStart;\n\n      // Only handle JPEG image (start by 0xFFD8)\n      if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n        var length = dataView.byteLength;\n        var offset = 2;\n        while (offset + 1 < length) {\n          if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n            app1Start = offset;\n            break;\n          }\n          offset += 1;\n        }\n      }\n      if (app1Start) {\n        var exifIDCode = app1Start + 4;\n        var tiffOffset = app1Start + 10;\n        if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n          var endianness = dataView.getUint16(tiffOffset);\n          littleEndian = endianness === 0x4949;\n          if (littleEndian || endianness === 0x4D4D /* bigEndian */) {\n            if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n              var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n              if (firstIFDOffset >= 0x00000008) {\n                ifdStart = tiffOffset + firstIFDOffset;\n              }\n            }\n          }\n        }\n      }\n      if (ifdStart) {\n        var _length = dataView.getUint16(ifdStart, littleEndian);\n        var _offset;\n        var i;\n        for (i = 0; i < _length; i += 1) {\n          _offset = ifdStart + i * 12 + 2;\n          if (dataView.getUint16(_offset, littleEndian) === 0x0112 /* Orientation */) {\n            // 8 is the offset of the current tag's value\n            _offset += 8;\n\n            // Get the original orientation value\n            orientation = dataView.getUint16(_offset, littleEndian);\n\n            // Override the orientation with its default value\n            dataView.setUint16(_offset, 1, littleEndian);\n            break;\n          }\n        }\n      }\n    } catch (error) {\n      orientation = 1;\n    }\n    return orientation;\n  }\n\n  /**\n   * Parse Exif Orientation value.\n   * @param {number} orientation - The orientation to parse.\n   * @returns {Object} The parsed result.\n   */\n  function parseOrientation(orientation) {\n    var rotate = 0;\n    var scaleX = 1;\n    var scaleY = 1;\n    switch (orientation) {\n      // Flip horizontal\n      case 2:\n        scaleX = -1;\n        break;\n\n      // Rotate left 180\u00B0\n      case 3:\n        rotate = -180;\n        break;\n\n      // Flip vertical\n      case 4:\n        scaleY = -1;\n        break;\n\n      // Flip vertical and rotate right 90\u00B0\n      case 5:\n        rotate = 90;\n        scaleY = -1;\n        break;\n\n      // Rotate right 90\u00B0\n      case 6:\n        rotate = 90;\n        break;\n\n      // Flip horizontal and rotate right 90\u00B0\n      case 7:\n        rotate = 90;\n        scaleX = -1;\n        break;\n\n      // Rotate left 90\u00B0\n      case 8:\n        rotate = -90;\n        break;\n    }\n    return {\n      rotate: rotate,\n      scaleX: scaleX,\n      scaleY: scaleY\n    };\n  }\n\n  var render = {\n    render: function render() {\n      this.initContainer();\n      this.initCanvas();\n      this.initCropBox();\n      this.renderCanvas();\n      if (this.cropped) {\n        this.renderCropBox();\n      }\n    },\n    initContainer: function initContainer() {\n      var element = this.element,\n        options = this.options,\n        container = this.container,\n        cropper = this.cropper;\n      var minWidth = Number(options.minContainerWidth);\n      var minHeight = Number(options.minContainerHeight);\n      addClass(cropper, CLASS_HIDDEN);\n      removeClass(element, CLASS_HIDDEN);\n      var containerData = {\n        width: Math.max(container.offsetWidth, minWidth >= 0 ? minWidth : MIN_CONTAINER_WIDTH),\n        height: Math.max(container.offsetHeight, minHeight >= 0 ? minHeight : MIN_CONTAINER_HEIGHT)\n      };\n      this.containerData = containerData;\n      setStyle(cropper, {\n        width: containerData.width,\n        height: containerData.height\n      });\n      addClass(element, CLASS_HIDDEN);\n      removeClass(cropper, CLASS_HIDDEN);\n    },\n    // Canvas (image wrapper)\n    initCanvas: function initCanvas() {\n      var containerData = this.containerData,\n        imageData = this.imageData;\n      var viewMode = this.options.viewMode;\n      var rotated = Math.abs(imageData.rotate) % 180 === 90;\n      var naturalWidth = rotated ? imageData.naturalHeight : imageData.naturalWidth;\n      var naturalHeight = rotated ? imageData.naturalWidth : imageData.naturalHeight;\n      var aspectRatio = naturalWidth / naturalHeight;\n      var canvasWidth = containerData.width;\n      var canvasHeight = containerData.height;\n      if (containerData.height * aspectRatio > containerData.width) {\n        if (viewMode === 3) {\n          canvasWidth = containerData.height * aspectRatio;\n        } else {\n          canvasHeight = containerData.width / aspectRatio;\n        }\n      } else if (viewMode === 3) {\n        canvasHeight = containerData.width / aspectRatio;\n      } else {\n        canvasWidth = containerData.height * aspectRatio;\n      }\n      var canvasData = {\n        aspectRatio: aspectRatio,\n        naturalWidth: naturalWidth,\n        naturalHeight: naturalHeight,\n        width: canvasWidth,\n        height: canvasHeight\n      };\n      this.canvasData = canvasData;\n      this.limited = viewMode === 1 || viewMode === 2;\n      this.limitCanvas(true, true);\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      canvasData.left = (containerData.width - canvasData.width) / 2;\n      canvasData.top = (containerData.height - canvasData.height) / 2;\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      this.initialCanvasData = assign({}, canvasData);\n    },\n    limitCanvas: function limitCanvas(sizeLimited, positionLimited) {\n      var options = this.options,\n        containerData = this.containerData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n      var viewMode = options.viewMode;\n      var aspectRatio = canvasData.aspectRatio;\n      var cropped = this.cropped && cropBoxData;\n      if (sizeLimited) {\n        var minCanvasWidth = Number(options.minCanvasWidth) || 0;\n        var minCanvasHeight = Number(options.minCanvasHeight) || 0;\n        if (viewMode > 1) {\n          minCanvasWidth = Math.max(minCanvasWidth, containerData.width);\n          minCanvasHeight = Math.max(minCanvasHeight, containerData.height);\n          if (viewMode === 3) {\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        } else if (viewMode > 0) {\n          if (minCanvasWidth) {\n            minCanvasWidth = Math.max(minCanvasWidth, cropped ? cropBoxData.width : 0);\n          } else if (minCanvasHeight) {\n            minCanvasHeight = Math.max(minCanvasHeight, cropped ? cropBoxData.height : 0);\n          } else if (cropped) {\n            minCanvasWidth = cropBoxData.width;\n            minCanvasHeight = cropBoxData.height;\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        }\n        var _getAdjustedSizes = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: minCanvasWidth,\n          height: minCanvasHeight\n        });\n        minCanvasWidth = _getAdjustedSizes.width;\n        minCanvasHeight = _getAdjustedSizes.height;\n        canvasData.minWidth = minCanvasWidth;\n        canvasData.minHeight = minCanvasHeight;\n        canvasData.maxWidth = Infinity;\n        canvasData.maxHeight = Infinity;\n      }\n      if (positionLimited) {\n        if (viewMode > (cropped ? 0 : 1)) {\n          var newCanvasLeft = containerData.width - canvasData.width;\n          var newCanvasTop = containerData.height - canvasData.height;\n          canvasData.minLeft = Math.min(0, newCanvasLeft);\n          canvasData.minTop = Math.min(0, newCanvasTop);\n          canvasData.maxLeft = Math.max(0, newCanvasLeft);\n          canvasData.maxTop = Math.max(0, newCanvasTop);\n          if (cropped && this.limited) {\n            canvasData.minLeft = Math.min(cropBoxData.left, cropBoxData.left + (cropBoxData.width - canvasData.width));\n            canvasData.minTop = Math.min(cropBoxData.top, cropBoxData.top + (cropBoxData.height - canvasData.height));\n            canvasData.maxLeft = cropBoxData.left;\n            canvasData.maxTop = cropBoxData.top;\n            if (viewMode === 2) {\n              if (canvasData.width >= containerData.width) {\n                canvasData.minLeft = Math.min(0, newCanvasLeft);\n                canvasData.maxLeft = Math.max(0, newCanvasLeft);\n              }\n              if (canvasData.height >= containerData.height) {\n                canvasData.minTop = Math.min(0, newCanvasTop);\n                canvasData.maxTop = Math.max(0, newCanvasTop);\n              }\n            }\n          }\n        } else {\n          canvasData.minLeft = -canvasData.width;\n          canvasData.minTop = -canvasData.height;\n          canvasData.maxLeft = containerData.width;\n          canvasData.maxTop = containerData.height;\n        }\n      }\n    },\n    renderCanvas: function renderCanvas(changed, transformed) {\n      var canvasData = this.canvasData,\n        imageData = this.imageData;\n      if (transformed) {\n        var _getRotatedSizes = getRotatedSizes({\n            width: imageData.naturalWidth * Math.abs(imageData.scaleX || 1),\n            height: imageData.naturalHeight * Math.abs(imageData.scaleY || 1),\n            degree: imageData.rotate || 0\n          }),\n          naturalWidth = _getRotatedSizes.width,\n          naturalHeight = _getRotatedSizes.height;\n        var width = canvasData.width * (naturalWidth / canvasData.naturalWidth);\n        var height = canvasData.height * (naturalHeight / canvasData.naturalHeight);\n        canvasData.left -= (width - canvasData.width) / 2;\n        canvasData.top -= (height - canvasData.height) / 2;\n        canvasData.width = width;\n        canvasData.height = height;\n        canvasData.aspectRatio = naturalWidth / naturalHeight;\n        canvasData.naturalWidth = naturalWidth;\n        canvasData.naturalHeight = naturalHeight;\n        this.limitCanvas(true, false);\n      }\n      if (canvasData.width > canvasData.maxWidth || canvasData.width < canvasData.minWidth) {\n        canvasData.left = canvasData.oldLeft;\n      }\n      if (canvasData.height > canvasData.maxHeight || canvasData.height < canvasData.minHeight) {\n        canvasData.top = canvasData.oldTop;\n      }\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      this.limitCanvas(false, true);\n      canvasData.left = Math.min(Math.max(canvasData.left, canvasData.minLeft), canvasData.maxLeft);\n      canvasData.top = Math.min(Math.max(canvasData.top, canvasData.minTop), canvasData.maxTop);\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      setStyle(this.canvas, assign({\n        width: canvasData.width,\n        height: canvasData.height\n      }, getTransforms({\n        translateX: canvasData.left,\n        translateY: canvasData.top\n      })));\n      this.renderImage(changed);\n      if (this.cropped && this.limited) {\n        this.limitCropBox(true, true);\n      }\n    },\n    renderImage: function renderImage(changed) {\n      var canvasData = this.canvasData,\n        imageData = this.imageData;\n      var width = imageData.naturalWidth * (canvasData.width / canvasData.naturalWidth);\n      var height = imageData.naturalHeight * (canvasData.height / canvasData.naturalHeight);\n      assign(imageData, {\n        width: width,\n        height: height,\n        left: (canvasData.width - width) / 2,\n        top: (canvasData.height - height) / 2\n      });\n      setStyle(this.image, assign({\n        width: imageData.width,\n        height: imageData.height\n      }, getTransforms(assign({\n        translateX: imageData.left,\n        translateY: imageData.top\n      }, imageData))));\n      if (changed) {\n        this.output();\n      }\n    },\n    initCropBox: function initCropBox() {\n      var options = this.options,\n        canvasData = this.canvasData;\n      var aspectRatio = options.aspectRatio || options.initialAspectRatio;\n      var autoCropArea = Number(options.autoCropArea) || 0.8;\n      var cropBoxData = {\n        width: canvasData.width,\n        height: canvasData.height\n      };\n      if (aspectRatio) {\n        if (canvasData.height * aspectRatio > canvasData.width) {\n          cropBoxData.height = cropBoxData.width / aspectRatio;\n        } else {\n          cropBoxData.width = cropBoxData.height * aspectRatio;\n        }\n      }\n      this.cropBoxData = cropBoxData;\n      this.limitCropBox(true, true);\n\n      // Initialize auto crop area\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);\n\n      // The width/height of auto crop area must large than \"minWidth/Height\"\n      cropBoxData.width = Math.max(cropBoxData.minWidth, cropBoxData.width * autoCropArea);\n      cropBoxData.height = Math.max(cropBoxData.minHeight, cropBoxData.height * autoCropArea);\n      cropBoxData.left = canvasData.left + (canvasData.width - cropBoxData.width) / 2;\n      cropBoxData.top = canvasData.top + (canvasData.height - cropBoxData.height) / 2;\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n      this.initialCropBoxData = assign({}, cropBoxData);\n    },\n    limitCropBox: function limitCropBox(sizeLimited, positionLimited) {\n      var options = this.options,\n        containerData = this.containerData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData,\n        limited = this.limited;\n      var aspectRatio = options.aspectRatio;\n      if (sizeLimited) {\n        var minCropBoxWidth = Number(options.minCropBoxWidth) || 0;\n        var minCropBoxHeight = Number(options.minCropBoxHeight) || 0;\n        var maxCropBoxWidth = limited ? Math.min(containerData.width, canvasData.width, canvasData.width + canvasData.left, containerData.width - canvasData.left) : containerData.width;\n        var maxCropBoxHeight = limited ? Math.min(containerData.height, canvasData.height, canvasData.height + canvasData.top, containerData.height - canvasData.top) : containerData.height;\n\n        // The min/maxCropBoxWidth/Height must be less than container's width/height\n        minCropBoxWidth = Math.min(minCropBoxWidth, containerData.width);\n        minCropBoxHeight = Math.min(minCropBoxHeight, containerData.height);\n        if (aspectRatio) {\n          if (minCropBoxWidth && minCropBoxHeight) {\n            if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {\n              minCropBoxHeight = minCropBoxWidth / aspectRatio;\n            } else {\n              minCropBoxWidth = minCropBoxHeight * aspectRatio;\n            }\n          } else if (minCropBoxWidth) {\n            minCropBoxHeight = minCropBoxWidth / aspectRatio;\n          } else if (minCropBoxHeight) {\n            minCropBoxWidth = minCropBoxHeight * aspectRatio;\n          }\n          if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {\n            maxCropBoxHeight = maxCropBoxWidth / aspectRatio;\n          } else {\n            maxCropBoxWidth = maxCropBoxHeight * aspectRatio;\n          }\n        }\n\n        // The minWidth/Height must be less than maxWidth/Height\n        cropBoxData.minWidth = Math.min(minCropBoxWidth, maxCropBoxWidth);\n        cropBoxData.minHeight = Math.min(minCropBoxHeight, maxCropBoxHeight);\n        cropBoxData.maxWidth = maxCropBoxWidth;\n        cropBoxData.maxHeight = maxCropBoxHeight;\n      }\n      if (positionLimited) {\n        if (limited) {\n          cropBoxData.minLeft = Math.max(0, canvasData.left);\n          cropBoxData.minTop = Math.max(0, canvasData.top);\n          cropBoxData.maxLeft = Math.min(containerData.width, canvasData.left + canvasData.width) - cropBoxData.width;\n          cropBoxData.maxTop = Math.min(containerData.height, canvasData.top + canvasData.height) - cropBoxData.height;\n        } else {\n          cropBoxData.minLeft = 0;\n          cropBoxData.minTop = 0;\n          cropBoxData.maxLeft = containerData.width - cropBoxData.width;\n          cropBoxData.maxTop = containerData.height - cropBoxData.height;\n        }\n      }\n    },\n    renderCropBox: function renderCropBox() {\n      var options = this.options,\n        containerData = this.containerData,\n        cropBoxData = this.cropBoxData;\n      if (cropBoxData.width > cropBoxData.maxWidth || cropBoxData.width < cropBoxData.minWidth) {\n        cropBoxData.left = cropBoxData.oldLeft;\n      }\n      if (cropBoxData.height > cropBoxData.maxHeight || cropBoxData.height < cropBoxData.minHeight) {\n        cropBoxData.top = cropBoxData.oldTop;\n      }\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);\n      this.limitCropBox(false, true);\n      cropBoxData.left = Math.min(Math.max(cropBoxData.left, cropBoxData.minLeft), cropBoxData.maxLeft);\n      cropBoxData.top = Math.min(Math.max(cropBoxData.top, cropBoxData.minTop), cropBoxData.maxTop);\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n      if (options.movable && options.cropBoxMovable) {\n        // Turn to move the canvas when the crop box is equal to the container\n        setData(this.face, DATA_ACTION, cropBoxData.width >= containerData.width && cropBoxData.height >= containerData.height ? ACTION_MOVE : ACTION_ALL);\n      }\n      setStyle(this.cropBox, assign({\n        width: cropBoxData.width,\n        height: cropBoxData.height\n      }, getTransforms({\n        translateX: cropBoxData.left,\n        translateY: cropBoxData.top\n      })));\n      if (this.cropped && this.limited) {\n        this.limitCanvas(true, true);\n      }\n      if (!this.disabled) {\n        this.output();\n      }\n    },\n    output: function output() {\n      this.preview();\n      dispatchEvent(this.element, EVENT_CROP, this.getData());\n    }\n  };\n\n  var preview = {\n    initPreview: function initPreview() {\n      var element = this.element,\n        crossOrigin = this.crossOrigin;\n      var preview = this.options.preview;\n      var url = crossOrigin ? this.crossOriginUrl : this.url;\n      var alt = element.alt || 'The image to preview';\n      var image = document.createElement('img');\n      if (crossOrigin) {\n        image.crossOrigin = crossOrigin;\n      }\n      image.src = url;\n      image.alt = alt;\n      this.viewBox.appendChild(image);\n      this.viewBoxImage = image;\n      if (!preview) {\n        return;\n      }\n      var previews = preview;\n      if (typeof preview === 'string') {\n        previews = element.ownerDocument.querySelectorAll(preview);\n      } else if (preview.querySelector) {\n        previews = [preview];\n      }\n      this.previews = previews;\n      forEach(previews, function (el) {\n        var img = document.createElement('img');\n\n        // Save the original size for recover\n        setData(el, DATA_PREVIEW, {\n          width: el.offsetWidth,\n          height: el.offsetHeight,\n          html: el.innerHTML\n        });\n        if (crossOrigin) {\n          img.crossOrigin = crossOrigin;\n        }\n        img.src = url;\n        img.alt = alt;\n\n        /**\n         * Override img element styles\n         * Add `display:block` to avoid margin top issue\n         * Add `height:auto` to override `height` attribute on IE8\n         * (Occur only when margin-top <= -height)\n         */\n        img.style.cssText = 'display:block;' + 'width:100%;' + 'height:auto;' + 'min-width:0!important;' + 'min-height:0!important;' + 'max-width:none!important;' + 'max-height:none!important;' + 'image-orientation:0deg!important;\"';\n        el.innerHTML = '';\n        el.appendChild(img);\n      });\n    },\n    resetPreview: function resetPreview() {\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        setStyle(element, {\n          width: data.width,\n          height: data.height\n        });\n        element.innerHTML = data.html;\n        removeData(element, DATA_PREVIEW);\n      });\n    },\n    preview: function preview() {\n      var imageData = this.imageData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n      var cropBoxWidth = cropBoxData.width,\n        cropBoxHeight = cropBoxData.height;\n      var width = imageData.width,\n        height = imageData.height;\n      var left = cropBoxData.left - canvasData.left - imageData.left;\n      var top = cropBoxData.top - canvasData.top - imageData.top;\n      if (!this.cropped || this.disabled) {\n        return;\n      }\n      setStyle(this.viewBoxImage, assign({\n        width: width,\n        height: height\n      }, getTransforms(assign({\n        translateX: -left,\n        translateY: -top\n      }, imageData))));\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        var originalWidth = data.width;\n        var originalHeight = data.height;\n        var newWidth = originalWidth;\n        var newHeight = originalHeight;\n        var ratio = 1;\n        if (cropBoxWidth) {\n          ratio = originalWidth / cropBoxWidth;\n          newHeight = cropBoxHeight * ratio;\n        }\n        if (cropBoxHeight && newHeight > originalHeight) {\n          ratio = originalHeight / cropBoxHeight;\n          newWidth = cropBoxWidth * ratio;\n          newHeight = originalHeight;\n        }\n        setStyle(element, {\n          width: newWidth,\n          height: newHeight\n        });\n        setStyle(element.getElementsByTagName('img')[0], assign({\n          width: width * ratio,\n          height: height * ratio\n        }, getTransforms(assign({\n          translateX: -left * ratio,\n          translateY: -top * ratio\n        }, imageData))));\n      });\n    }\n  };\n\n  var events = {\n    bind: function bind() {\n      var element = this.element,\n        options = this.options,\n        cropper = this.cropper;\n      if (isFunction(options.cropstart)) {\n        addListener(element, EVENT_CROP_START, options.cropstart);\n      }\n      if (isFunction(options.cropmove)) {\n        addListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n      if (isFunction(options.cropend)) {\n        addListener(element, EVENT_CROP_END, options.cropend);\n      }\n      if (isFunction(options.crop)) {\n        addListener(element, EVENT_CROP, options.crop);\n      }\n      if (isFunction(options.zoom)) {\n        addListener(element, EVENT_ZOOM, options.zoom);\n      }\n      addListener(cropper, EVENT_POINTER_DOWN, this.onCropStart = this.cropStart.bind(this));\n      if (options.zoomable && options.zoomOnWheel) {\n        addListener(cropper, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n          passive: false,\n          capture: true\n        });\n      }\n      if (options.toggleDragModeOnDblclick) {\n        addListener(cropper, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n      }\n      addListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove = this.cropMove.bind(this));\n      addListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd = this.cropEnd.bind(this));\n      if (options.responsive) {\n        addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n      }\n    },\n    unbind: function unbind() {\n      var element = this.element,\n        options = this.options,\n        cropper = this.cropper;\n      if (isFunction(options.cropstart)) {\n        removeListener(element, EVENT_CROP_START, options.cropstart);\n      }\n      if (isFunction(options.cropmove)) {\n        removeListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n      if (isFunction(options.cropend)) {\n        removeListener(element, EVENT_CROP_END, options.cropend);\n      }\n      if (isFunction(options.crop)) {\n        removeListener(element, EVENT_CROP, options.crop);\n      }\n      if (isFunction(options.zoom)) {\n        removeListener(element, EVENT_ZOOM, options.zoom);\n      }\n      removeListener(cropper, EVENT_POINTER_DOWN, this.onCropStart);\n      if (options.zoomable && options.zoomOnWheel) {\n        removeListener(cropper, EVENT_WHEEL, this.onWheel, {\n          passive: false,\n          capture: true\n        });\n      }\n      if (options.toggleDragModeOnDblclick) {\n        removeListener(cropper, EVENT_DBLCLICK, this.onDblclick);\n      }\n      removeListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove);\n      removeListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd);\n      if (options.responsive) {\n        removeListener(window, EVENT_RESIZE, this.onResize);\n      }\n    }\n  };\n\n  var handlers = {\n    resize: function resize() {\n      if (this.disabled) {\n        return;\n      }\n      var options = this.options,\n        container = this.container,\n        containerData = this.containerData;\n      var ratioX = container.offsetWidth / containerData.width;\n      var ratioY = container.offsetHeight / containerData.height;\n      var ratio = Math.abs(ratioX - 1) > Math.abs(ratioY - 1) ? ratioX : ratioY;\n\n      // Resize when width changed or height changed\n      if (ratio !== 1) {\n        var canvasData;\n        var cropBoxData;\n        if (options.restore) {\n          canvasData = this.getCanvasData();\n          cropBoxData = this.getCropBoxData();\n        }\n        this.render();\n        if (options.restore) {\n          this.setCanvasData(forEach(canvasData, function (n, i) {\n            canvasData[i] = n * ratio;\n          }));\n          this.setCropBoxData(forEach(cropBoxData, function (n, i) {\n            cropBoxData[i] = n * ratio;\n          }));\n        }\n      }\n    },\n    dblclick: function dblclick() {\n      if (this.disabled || this.options.dragMode === DRAG_MODE_NONE) {\n        return;\n      }\n      this.setDragMode(hasClass(this.dragBox, CLASS_CROP) ? DRAG_MODE_MOVE : DRAG_MODE_CROP);\n    },\n    wheel: function wheel(event) {\n      var _this = this;\n      var ratio = Number(this.options.wheelZoomRatio) || 0.1;\n      var delta = 1;\n      if (this.disabled) {\n        return;\n      }\n      event.preventDefault();\n\n      // Limit wheel speed to prevent zoom too fast (#21)\n      if (this.wheeling) {\n        return;\n      }\n      this.wheeling = true;\n      setTimeout(function () {\n        _this.wheeling = false;\n      }, 50);\n      if (event.deltaY) {\n        delta = event.deltaY > 0 ? 1 : -1;\n      } else if (event.wheelDelta) {\n        delta = -event.wheelDelta / 120;\n      } else if (event.detail) {\n        delta = event.detail > 0 ? 1 : -1;\n      }\n      this.zoom(-delta * ratio, event);\n    },\n    cropStart: function cropStart(event) {\n      var buttons = event.buttons,\n        button = event.button;\n      if (this.disabled\n\n      // Handle mouse event and pointer event and ignore touch event\n      || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && (\n      // No primary button (Usually the left button)\n      isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0\n\n      // Open context menu\n      || event.ctrlKey)) {\n        return;\n      }\n      var options = this.options,\n        pointers = this.pointers;\n      var action;\n      if (event.changedTouches) {\n        // Handle touch event\n        forEach(event.changedTouches, function (touch) {\n          pointers[touch.identifier] = getPointer(touch);\n        });\n      } else {\n        // Handle mouse event and pointer event\n        pointers[event.pointerId || 0] = getPointer(event);\n      }\n      if (Object.keys(pointers).length > 1 && options.zoomable && options.zoomOnTouch) {\n        action = ACTION_ZOOM;\n      } else {\n        action = getData(event.target, DATA_ACTION);\n      }\n      if (!REGEXP_ACTIONS.test(action)) {\n        return;\n      }\n      if (dispatchEvent(this.element, EVENT_CROP_START, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      }\n\n      // This line is required for preventing page zooming in iOS browsers\n      event.preventDefault();\n      this.action = action;\n      this.cropping = false;\n      if (action === ACTION_CROP) {\n        this.cropping = true;\n        addClass(this.dragBox, CLASS_MODAL);\n      }\n    },\n    cropMove: function cropMove(event) {\n      var action = this.action;\n      if (this.disabled || !action) {\n        return;\n      }\n      var pointers = this.pointers;\n      event.preventDefault();\n      if (dispatchEvent(this.element, EVENT_CROP_MOVE, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      }\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          // The first parameter should not be undefined (#432)\n          assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n        });\n      } else {\n        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n      }\n      this.change(event);\n    },\n    cropEnd: function cropEnd(event) {\n      if (this.disabled) {\n        return;\n      }\n      var action = this.action,\n        pointers = this.pointers;\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          delete pointers[touch.identifier];\n        });\n      } else {\n        delete pointers[event.pointerId || 0];\n      }\n      if (!action) {\n        return;\n      }\n      event.preventDefault();\n      if (!Object.keys(pointers).length) {\n        this.action = '';\n      }\n      if (this.cropping) {\n        this.cropping = false;\n        toggleClass(this.dragBox, CLASS_MODAL, this.cropped && this.options.modal);\n      }\n      dispatchEvent(this.element, EVENT_CROP_END, {\n        originalEvent: event,\n        action: action\n      });\n    }\n  };\n\n  var change = {\n    change: function change(event) {\n      var options = this.options,\n        canvasData = this.canvasData,\n        containerData = this.containerData,\n        cropBoxData = this.cropBoxData,\n        pointers = this.pointers;\n      var action = this.action;\n      var aspectRatio = options.aspectRatio;\n      var left = cropBoxData.left,\n        top = cropBoxData.top,\n        width = cropBoxData.width,\n        height = cropBoxData.height;\n      var right = left + width;\n      var bottom = top + height;\n      var minLeft = 0;\n      var minTop = 0;\n      var maxWidth = containerData.width;\n      var maxHeight = containerData.height;\n      var renderable = true;\n      var offset;\n\n      // Locking aspect ratio in \"free mode\" by holding shift key\n      if (!aspectRatio && event.shiftKey) {\n        aspectRatio = width && height ? width / height : 1;\n      }\n      if (this.limited) {\n        minLeft = cropBoxData.minLeft;\n        minTop = cropBoxData.minTop;\n        maxWidth = minLeft + Math.min(containerData.width, canvasData.width, canvasData.left + canvasData.width);\n        maxHeight = minTop + Math.min(containerData.height, canvasData.height, canvasData.top + canvasData.height);\n      }\n      var pointer = pointers[Object.keys(pointers)[0]];\n      var range = {\n        x: pointer.endX - pointer.startX,\n        y: pointer.endY - pointer.startY\n      };\n      var check = function check(side) {\n        switch (side) {\n          case ACTION_EAST:\n            if (right + range.x > maxWidth) {\n              range.x = maxWidth - right;\n            }\n            break;\n          case ACTION_WEST:\n            if (left + range.x < minLeft) {\n              range.x = minLeft - left;\n            }\n            break;\n          case ACTION_NORTH:\n            if (top + range.y < minTop) {\n              range.y = minTop - top;\n            }\n            break;\n          case ACTION_SOUTH:\n            if (bottom + range.y > maxHeight) {\n              range.y = maxHeight - bottom;\n            }\n            break;\n        }\n      };\n      switch (action) {\n        // Move crop box\n        case ACTION_ALL:\n          left += range.x;\n          top += range.y;\n          break;\n\n        // Resize crop box\n        case ACTION_EAST:\n          if (range.x >= 0 && (right >= maxWidth || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n          check(ACTION_EAST);\n          width += range.x;\n          if (width < 0) {\n            action = ACTION_WEST;\n            width = -width;\n            left -= width;\n          }\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n          break;\n        case ACTION_NORTH:\n          if (range.y <= 0 && (top <= minTop || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n          check(ACTION_NORTH);\n          height -= range.y;\n          top += range.y;\n          if (height < 0) {\n            action = ACTION_SOUTH;\n            height = -height;\n            top -= height;\n          }\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n          break;\n        case ACTION_WEST:\n          if (range.x <= 0 && (left <= minLeft || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n          check(ACTION_WEST);\n          width -= range.x;\n          left += range.x;\n          if (width < 0) {\n            action = ACTION_EAST;\n            width = -width;\n            left -= width;\n          }\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n          break;\n        case ACTION_SOUTH:\n          if (range.y >= 0 && (bottom >= maxHeight || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n          check(ACTION_SOUTH);\n          height += range.y;\n          if (height < 0) {\n            action = ACTION_NORTH;\n            height = -height;\n            top -= height;\n          }\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n          break;\n        case ACTION_NORTH_EAST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {\n              renderable = false;\n              break;\n            }\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_EAST);\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            top -= height;\n          }\n          break;\n        case ACTION_NORTH_WEST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || left <= minLeft)) {\n              renderable = false;\n              break;\n            }\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n            left += cropBoxData.width - width;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_WEST);\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            top -= height;\n          }\n          break;\n        case ACTION_SOUTH_WEST:\n          if (aspectRatio) {\n            if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n            check(ACTION_WEST);\n            width -= range.x;\n            left += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_WEST);\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            top -= height;\n          }\n          break;\n        case ACTION_SOUTH_EAST:\n          if (aspectRatio) {\n            if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n            check(ACTION_EAST);\n            width += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_EAST);\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            top -= height;\n          }\n          break;\n\n        // Move canvas\n        case ACTION_MOVE:\n          this.move(range.x, range.y);\n          renderable = false;\n          break;\n\n        // Zoom canvas\n        case ACTION_ZOOM:\n          this.zoom(getMaxZoomRatio(pointers), event);\n          renderable = false;\n          break;\n\n        // Create crop box\n        case ACTION_CROP:\n          if (!range.x || !range.y) {\n            renderable = false;\n            break;\n          }\n          offset = getOffset(this.cropper);\n          left = pointer.startX - offset.left;\n          top = pointer.startY - offset.top;\n          width = cropBoxData.minWidth;\n          height = cropBoxData.minHeight;\n          if (range.x > 0) {\n            action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;\n          } else if (range.x < 0) {\n            left -= width;\n            action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;\n          }\n          if (range.y < 0) {\n            top -= height;\n          }\n\n          // Show the crop box if is hidden\n          if (!this.cropped) {\n            removeClass(this.cropBox, CLASS_HIDDEN);\n            this.cropped = true;\n            if (this.limited) {\n              this.limitCropBox(true, true);\n            }\n          }\n          break;\n      }\n      if (renderable) {\n        cropBoxData.width = width;\n        cropBoxData.height = height;\n        cropBoxData.left = left;\n        cropBoxData.top = top;\n        this.action = action;\n        this.renderCropBox();\n      }\n\n      // Override\n      forEach(pointers, function (p) {\n        p.startX = p.endX;\n        p.startY = p.endY;\n      });\n    }\n  };\n\n  var methods = {\n    // Show the crop box manually\n    crop: function crop() {\n      if (this.ready && !this.cropped && !this.disabled) {\n        this.cropped = true;\n        this.limitCropBox(true, true);\n        if (this.options.modal) {\n          addClass(this.dragBox, CLASS_MODAL);\n        }\n        removeClass(this.cropBox, CLASS_HIDDEN);\n        this.setCropBoxData(this.initialCropBoxData);\n      }\n      return this;\n    },\n    // Reset the image and crop box to their initial states\n    reset: function reset() {\n      if (this.ready && !this.disabled) {\n        this.imageData = assign({}, this.initialImageData);\n        this.canvasData = assign({}, this.initialCanvasData);\n        this.cropBoxData = assign({}, this.initialCropBoxData);\n        this.renderCanvas();\n        if (this.cropped) {\n          this.renderCropBox();\n        }\n      }\n      return this;\n    },\n    // Clear the crop box\n    clear: function clear() {\n      if (this.cropped && !this.disabled) {\n        assign(this.cropBoxData, {\n          left: 0,\n          top: 0,\n          width: 0,\n          height: 0\n        });\n        this.cropped = false;\n        this.renderCropBox();\n        this.limitCanvas(true, true);\n\n        // Render canvas after crop box rendered\n        this.renderCanvas();\n        removeClass(this.dragBox, CLASS_MODAL);\n        addClass(this.cropBox, CLASS_HIDDEN);\n      }\n      return this;\n    },\n    /**\n     * Replace the image's src and rebuild the cropper\n     * @param {string} url - The new URL.\n     * @param {boolean} [hasSameSize] - Indicate if the new image has the same size as the old one.\n     * @returns {Cropper} this\n     */\n    replace: function replace(url) {\n      var hasSameSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!this.disabled && url) {\n        if (this.isImg) {\n          this.element.src = url;\n        }\n        if (hasSameSize) {\n          this.url = url;\n          this.image.src = url;\n          if (this.ready) {\n            this.viewBoxImage.src = url;\n            forEach(this.previews, function (element) {\n              element.getElementsByTagName('img')[0].src = url;\n            });\n          }\n        } else {\n          if (this.isImg) {\n            this.replaced = true;\n          }\n          this.options.data = null;\n          this.uncreate();\n          this.load(url);\n        }\n      }\n      return this;\n    },\n    // Enable (unfreeze) the cropper\n    enable: function enable() {\n      if (this.ready && this.disabled) {\n        this.disabled = false;\n        removeClass(this.cropper, CLASS_DISABLED);\n      }\n      return this;\n    },\n    // Disable (freeze) the cropper\n    disable: function disable() {\n      if (this.ready && !this.disabled) {\n        this.disabled = true;\n        addClass(this.cropper, CLASS_DISABLED);\n      }\n      return this;\n    },\n    /**\n     * Destroy the cropper and remove the instance from the image\n     * @returns {Cropper} this\n     */\n    destroy: function destroy() {\n      var element = this.element;\n      if (!element[NAMESPACE]) {\n        return this;\n      }\n      element[NAMESPACE] = undefined;\n      if (this.isImg && this.replaced) {\n        element.src = this.originalUrl;\n      }\n      this.uncreate();\n      return this;\n    },\n    /**\n     * Move the canvas with relative offsets\n     * @param {number} offsetX - The relative offset distance on the x-axis.\n     * @param {number} [offsetY=offsetX] - The relative offset distance on the y-axis.\n     * @returns {Cropper} this\n     */\n    move: function move(offsetX) {\n      var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : offsetX;\n      var _this$canvasData = this.canvasData,\n        left = _this$canvasData.left,\n        top = _this$canvasData.top;\n      return this.moveTo(isUndefined(offsetX) ? offsetX : left + Number(offsetX), isUndefined(offsetY) ? offsetY : top + Number(offsetY));\n    },\n    /**\n     * Move the canvas to an absolute point\n     * @param {number} x - The x-axis coordinate.\n     * @param {number} [y=x] - The y-axis coordinate.\n     * @returns {Cropper} this\n     */\n    moveTo: function moveTo(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var canvasData = this.canvasData;\n      var changed = false;\n      x = Number(x);\n      y = Number(y);\n      if (this.ready && !this.disabled && this.options.movable) {\n        if (isNumber(x)) {\n          canvasData.left = x;\n          changed = true;\n        }\n        if (isNumber(y)) {\n          canvasData.top = y;\n          changed = true;\n        }\n        if (changed) {\n          this.renderCanvas(true);\n        }\n      }\n      return this;\n    },\n    /**\n     * Zoom the canvas with a relative ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoom: function zoom(ratio, _originalEvent) {\n      var canvasData = this.canvasData;\n      ratio = Number(ratio);\n      if (ratio < 0) {\n        ratio = 1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n      return this.zoomTo(canvasData.width * ratio / canvasData.naturalWidth, null, _originalEvent);\n    },\n    /**\n     * Zoom the canvas to an absolute ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Object} pivot - The zoom pivot point coordinate.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoomTo: function zoomTo(ratio, pivot, _originalEvent) {\n      var options = this.options,\n        canvasData = this.canvasData;\n      var width = canvasData.width,\n        height = canvasData.height,\n        naturalWidth = canvasData.naturalWidth,\n        naturalHeight = canvasData.naturalHeight;\n      ratio = Number(ratio);\n      if (ratio >= 0 && this.ready && !this.disabled && options.zoomable) {\n        var newWidth = naturalWidth * ratio;\n        var newHeight = naturalHeight * ratio;\n        if (dispatchEvent(this.element, EVENT_ZOOM, {\n          ratio: ratio,\n          oldRatio: width / naturalWidth,\n          originalEvent: _originalEvent\n        }) === false) {\n          return this;\n        }\n        if (_originalEvent) {\n          var pointers = this.pointers;\n          var offset = getOffset(this.cropper);\n          var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          };\n\n          // Zoom from the triggering point of the event\n          canvasData.left -= (newWidth - width) * ((center.pageX - offset.left - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((center.pageY - offset.top - canvasData.top) / height);\n        } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {\n          canvasData.left -= (newWidth - width) * ((pivot.x - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((pivot.y - canvasData.top) / height);\n        } else {\n          // Zoom from the center of the canvas\n          canvasData.left -= (newWidth - width) / 2;\n          canvasData.top -= (newHeight - height) / 2;\n        }\n        canvasData.width = newWidth;\n        canvasData.height = newHeight;\n        this.renderCanvas(true);\n      }\n      return this;\n    },\n    /**\n     * Rotate the canvas with a relative degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotate: function rotate(degree) {\n      return this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n    },\n    /**\n     * Rotate the canvas to an absolute degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotateTo: function rotateTo(degree) {\n      degree = Number(degree);\n      if (isNumber(degree) && this.ready && !this.disabled && this.options.rotatable) {\n        this.imageData.rotate = degree % 360;\n        this.renderCanvas(true, true);\n      }\n      return this;\n    },\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Cropper} this\n     */\n    scaleX: function scaleX(_scaleX) {\n      var scaleY = this.imageData.scaleY;\n      return this.scale(_scaleX, isNumber(scaleY) ? scaleY : 1);\n    },\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scaleY: function scaleY(_scaleY) {\n      var scaleX = this.imageData.scaleX;\n      return this.scale(isNumber(scaleX) ? scaleX : 1, _scaleY);\n    },\n    /**\n     * Scale the image\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scale: function scale(scaleX) {\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n      var imageData = this.imageData;\n      var transformed = false;\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n      if (this.ready && !this.disabled && this.options.scalable) {\n        if (isNumber(scaleX)) {\n          imageData.scaleX = scaleX;\n          transformed = true;\n        }\n        if (isNumber(scaleY)) {\n          imageData.scaleY = scaleY;\n          transformed = true;\n        }\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n      }\n      return this;\n    },\n    /**\n     * Get the cropped area position and size data (base on the original image)\n     * @param {boolean} [rounded=false] - Indicate if round the data values or not.\n     * @returns {Object} The result cropped data.\n     */\n    getData: function getData() {\n      var rounded = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var options = this.options,\n        imageData = this.imageData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n      var data;\n      if (this.ready && this.cropped) {\n        data = {\n          x: cropBoxData.left - canvasData.left,\n          y: cropBoxData.top - canvasData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n        var ratio = imageData.width / imageData.naturalWidth;\n        forEach(data, function (n, i) {\n          data[i] = n / ratio;\n        });\n        if (rounded) {\n          // In case rounding off leads to extra 1px in right or bottom border\n          // we should round the top-left corner and the dimension (#343).\n          var bottom = Math.round(data.y + data.height);\n          var right = Math.round(data.x + data.width);\n          data.x = Math.round(data.x);\n          data.y = Math.round(data.y);\n          data.width = right - data.x;\n          data.height = bottom - data.y;\n        }\n      } else {\n        data = {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      if (options.rotatable) {\n        data.rotate = imageData.rotate || 0;\n      }\n      if (options.scalable) {\n        data.scaleX = imageData.scaleX || 1;\n        data.scaleY = imageData.scaleY || 1;\n      }\n      return data;\n    },\n    /**\n     * Set the cropped area position and size with new data\n     * @param {Object} data - The new data.\n     * @returns {Cropper} this\n     */\n    setData: function setData(data) {\n      var options = this.options,\n        imageData = this.imageData,\n        canvasData = this.canvasData;\n      var cropBoxData = {};\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        var transformed = false;\n        if (options.rotatable) {\n          if (isNumber(data.rotate) && data.rotate !== imageData.rotate) {\n            imageData.rotate = data.rotate;\n            transformed = true;\n          }\n        }\n        if (options.scalable) {\n          if (isNumber(data.scaleX) && data.scaleX !== imageData.scaleX) {\n            imageData.scaleX = data.scaleX;\n            transformed = true;\n          }\n          if (isNumber(data.scaleY) && data.scaleY !== imageData.scaleY) {\n            imageData.scaleY = data.scaleY;\n            transformed = true;\n          }\n        }\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n        var ratio = imageData.width / imageData.naturalWidth;\n        if (isNumber(data.x)) {\n          cropBoxData.left = data.x * ratio + canvasData.left;\n        }\n        if (isNumber(data.y)) {\n          cropBoxData.top = data.y * ratio + canvasData.top;\n        }\n        if (isNumber(data.width)) {\n          cropBoxData.width = data.width * ratio;\n        }\n        if (isNumber(data.height)) {\n          cropBoxData.height = data.height * ratio;\n        }\n        this.setCropBoxData(cropBoxData);\n      }\n      return this;\n    },\n    /**\n     * Get the container size data.\n     * @returns {Object} The result container data.\n     */\n    getContainerData: function getContainerData() {\n      return this.ready ? assign({}, this.containerData) : {};\n    },\n    /**\n     * Get the image position and size data.\n     * @returns {Object} The result image data.\n     */\n    getImageData: function getImageData() {\n      return this.sized ? assign({}, this.imageData) : {};\n    },\n    /**\n     * Get the canvas position and size data.\n     * @returns {Object} The result canvas data.\n     */\n    getCanvasData: function getCanvasData() {\n      var canvasData = this.canvasData;\n      var data = {};\n      if (this.ready) {\n        forEach(['left', 'top', 'width', 'height', 'naturalWidth', 'naturalHeight'], function (n) {\n          data[n] = canvasData[n];\n        });\n      }\n      return data;\n    },\n    /**\n     * Set the canvas position and size with new data.\n     * @param {Object} data - The new canvas data.\n     * @returns {Cropper} this\n     */\n    setCanvasData: function setCanvasData(data) {\n      var canvasData = this.canvasData;\n      var aspectRatio = canvasData.aspectRatio;\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          canvasData.left = data.left;\n        }\n        if (isNumber(data.top)) {\n          canvasData.top = data.top;\n        }\n        if (isNumber(data.width)) {\n          canvasData.width = data.width;\n          canvasData.height = data.width / aspectRatio;\n        } else if (isNumber(data.height)) {\n          canvasData.height = data.height;\n          canvasData.width = data.height * aspectRatio;\n        }\n        this.renderCanvas(true);\n      }\n      return this;\n    },\n    /**\n     * Get the crop box position and size data.\n     * @returns {Object} The result crop box data.\n     */\n    getCropBoxData: function getCropBoxData() {\n      var cropBoxData = this.cropBoxData;\n      var data;\n      if (this.ready && this.cropped) {\n        data = {\n          left: cropBoxData.left,\n          top: cropBoxData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n      }\n      return data || {};\n    },\n    /**\n     * Set the crop box position and size with new data.\n     * @param {Object} data - The new crop box data.\n     * @returns {Cropper} this\n     */\n    setCropBoxData: function setCropBoxData(data) {\n      var cropBoxData = this.cropBoxData;\n      var aspectRatio = this.options.aspectRatio;\n      var widthChanged;\n      var heightChanged;\n      if (this.ready && this.cropped && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          cropBoxData.left = data.left;\n        }\n        if (isNumber(data.top)) {\n          cropBoxData.top = data.top;\n        }\n        if (isNumber(data.width) && data.width !== cropBoxData.width) {\n          widthChanged = true;\n          cropBoxData.width = data.width;\n        }\n        if (isNumber(data.height) && data.height !== cropBoxData.height) {\n          heightChanged = true;\n          cropBoxData.height = data.height;\n        }\n        if (aspectRatio) {\n          if (widthChanged) {\n            cropBoxData.height = cropBoxData.width / aspectRatio;\n          } else if (heightChanged) {\n            cropBoxData.width = cropBoxData.height * aspectRatio;\n          }\n        }\n        this.renderCropBox();\n      }\n      return this;\n    },\n    /**\n     * Get a canvas drawn the cropped image.\n     * @param {Object} [options={}] - The config options.\n     * @returns {HTMLCanvasElement} - The result canvas.\n     */\n    getCroppedCanvas: function getCroppedCanvas() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!this.ready || !window.HTMLCanvasElement) {\n        return null;\n      }\n      var canvasData = this.canvasData;\n      var source = getSourceCanvas(this.image, this.imageData, canvasData, options);\n\n      // Returns the source canvas if it is not cropped.\n      if (!this.cropped) {\n        return source;\n      }\n      var _this$getData = this.getData(options.rounded),\n        initialX = _this$getData.x,\n        initialY = _this$getData.y,\n        initialWidth = _this$getData.width,\n        initialHeight = _this$getData.height;\n      var ratio = source.width / Math.floor(canvasData.naturalWidth);\n      if (ratio !== 1) {\n        initialX *= ratio;\n        initialY *= ratio;\n        initialWidth *= ratio;\n        initialHeight *= ratio;\n      }\n      var aspectRatio = initialWidth / initialHeight;\n      var maxSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.maxWidth || Infinity,\n        height: options.maxHeight || Infinity\n      });\n      var minSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.minWidth || 0,\n        height: options.minHeight || 0\n      }, 'cover');\n      var _getAdjustedSizes = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: options.width || (ratio !== 1 ? source.width : initialWidth),\n          height: options.height || (ratio !== 1 ? source.height : initialHeight)\n        }),\n        width = _getAdjustedSizes.width,\n        height = _getAdjustedSizes.height;\n      width = Math.min(maxSizes.width, Math.max(minSizes.width, width));\n      height = Math.min(maxSizes.height, Math.max(minSizes.height, height));\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      canvas.width = normalizeDecimalNumber(width);\n      canvas.height = normalizeDecimalNumber(height);\n      context.fillStyle = options.fillColor || 'transparent';\n      context.fillRect(0, 0, width, height);\n      var _options$imageSmoothi = options.imageSmoothingEnabled,\n        imageSmoothingEnabled = _options$imageSmoothi === void 0 ? true : _options$imageSmoothi,\n        imageSmoothingQuality = options.imageSmoothingQuality;\n      context.imageSmoothingEnabled = imageSmoothingEnabled;\n      if (imageSmoothingQuality) {\n        context.imageSmoothingQuality = imageSmoothingQuality;\n      }\n\n      // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D.drawImage\n      var sourceWidth = source.width;\n      var sourceHeight = source.height;\n\n      // Source canvas parameters\n      var srcX = initialX;\n      var srcY = initialY;\n      var srcWidth;\n      var srcHeight;\n\n      // Destination canvas parameters\n      var dstX;\n      var dstY;\n      var dstWidth;\n      var dstHeight;\n      if (srcX <= -initialWidth || srcX > sourceWidth) {\n        srcX = 0;\n        srcWidth = 0;\n        dstX = 0;\n        dstWidth = 0;\n      } else if (srcX <= 0) {\n        dstX = -srcX;\n        srcX = 0;\n        srcWidth = Math.min(sourceWidth, initialWidth + srcX);\n        dstWidth = srcWidth;\n      } else if (srcX <= sourceWidth) {\n        dstX = 0;\n        srcWidth = Math.min(initialWidth, sourceWidth - srcX);\n        dstWidth = srcWidth;\n      }\n      if (srcWidth <= 0 || srcY <= -initialHeight || srcY > sourceHeight) {\n        srcY = 0;\n        srcHeight = 0;\n        dstY = 0;\n        dstHeight = 0;\n      } else if (srcY <= 0) {\n        dstY = -srcY;\n        srcY = 0;\n        srcHeight = Math.min(sourceHeight, initialHeight + srcY);\n        dstHeight = srcHeight;\n      } else if (srcY <= sourceHeight) {\n        dstY = 0;\n        srcHeight = Math.min(initialHeight, sourceHeight - srcY);\n        dstHeight = srcHeight;\n      }\n      var params = [srcX, srcY, srcWidth, srcHeight];\n\n      // Avoid \"IndexSizeError\"\n      if (dstWidth > 0 && dstHeight > 0) {\n        var scale = width / initialWidth;\n        params.push(dstX * scale, dstY * scale, dstWidth * scale, dstHeight * scale);\n      }\n\n      // All the numerical parameters should be integer for `drawImage`\n      // https://github.com/fengyuanchen/cropper/issues/476\n      context.drawImage.apply(context, [source].concat(_toConsumableArray(params.map(function (param) {\n        return Math.floor(normalizeDecimalNumber(param));\n      }))));\n      return canvas;\n    },\n    /**\n     * Change the aspect ratio of the crop box.\n     * @param {number} aspectRatio - The new aspect ratio.\n     * @returns {Cropper} this\n     */\n    setAspectRatio: function setAspectRatio(aspectRatio) {\n      var options = this.options;\n      if (!this.disabled && !isUndefined(aspectRatio)) {\n        // 0 -> NaN\n        options.aspectRatio = Math.max(0, aspectRatio) || NaN;\n        if (this.ready) {\n          this.initCropBox();\n          if (this.cropped) {\n            this.renderCropBox();\n          }\n        }\n      }\n      return this;\n    },\n    /**\n     * Change the drag mode.\n     * @param {string} mode - The new drag mode.\n     * @returns {Cropper} this\n     */\n    setDragMode: function setDragMode(mode) {\n      var options = this.options,\n        dragBox = this.dragBox,\n        face = this.face;\n      if (this.ready && !this.disabled) {\n        var croppable = mode === DRAG_MODE_CROP;\n        var movable = options.movable && mode === DRAG_MODE_MOVE;\n        mode = croppable || movable ? mode : DRAG_MODE_NONE;\n        options.dragMode = mode;\n        setData(dragBox, DATA_ACTION, mode);\n        toggleClass(dragBox, CLASS_CROP, croppable);\n        toggleClass(dragBox, CLASS_MOVE, movable);\n        if (!options.cropBoxMovable) {\n          // Sync drag mode to crop box when it is not movable\n          setData(face, DATA_ACTION, mode);\n          toggleClass(face, CLASS_CROP, croppable);\n          toggleClass(face, CLASS_MOVE, movable);\n        }\n      }\n      return this;\n    }\n  };\n\n  var AnotherCropper = WINDOW.Cropper;\n  var Cropper = /*#__PURE__*/function () {\n    /**\n     * Create a new Cropper.\n     * @param {Element} element - The target element for cropping.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Cropper(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      _classCallCheck(this, Cropper);\n      if (!element || !REGEXP_TAG_NAME.test(element.tagName)) {\n        throw new Error('The first argument is required and must be an <img> or <canvas> element.');\n      }\n      this.element = element;\n      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n      this.cropped = false;\n      this.disabled = false;\n      this.pointers = {};\n      this.ready = false;\n      this.reloading = false;\n      this.replaced = false;\n      this.sized = false;\n      this.sizing = false;\n      this.init();\n    }\n    return _createClass(Cropper, [{\n      key: \"init\",\n      value: function init() {\n        var element = this.element;\n        var tagName = element.tagName.toLowerCase();\n        var url;\n        if (element[NAMESPACE]) {\n          return;\n        }\n        element[NAMESPACE] = this;\n        if (tagName === 'img') {\n          this.isImg = true;\n\n          // e.g.: \"img/picture.jpg\"\n          url = element.getAttribute('src') || '';\n          this.originalUrl = url;\n\n          // Stop when it's a blank image\n          if (!url) {\n            return;\n          }\n\n          // e.g.: \"https://example.com/img/picture.jpg\"\n          url = element.src;\n        } else if (tagName === 'canvas' && window.HTMLCanvasElement) {\n          url = element.toDataURL();\n        }\n        this.load(url);\n      }\n    }, {\n      key: \"load\",\n      value: function load(url) {\n        var _this = this;\n        if (!url) {\n          return;\n        }\n        this.url = url;\n        this.imageData = {};\n        var element = this.element,\n          options = this.options;\n        if (!options.rotatable && !options.scalable) {\n          options.checkOrientation = false;\n        }\n\n        // Only IE10+ supports Typed Arrays\n        if (!options.checkOrientation || !window.ArrayBuffer) {\n          this.clone();\n          return;\n        }\n\n        // Detect the mime type of the image directly if it is a Data URL\n        if (REGEXP_DATA_URL.test(url)) {\n          // Read ArrayBuffer from Data URL of JPEG images directly for better performance\n          if (REGEXP_DATA_URL_JPEG.test(url)) {\n            this.read(dataURLToArrayBuffer(url));\n          } else {\n            // Only a JPEG image may contains Exif Orientation information,\n            // the rest types of Data URLs are not necessary to check orientation at all.\n            this.clone();\n          }\n          return;\n        }\n\n        // 1. Detect the mime type of the image by a XMLHttpRequest.\n        // 2. Load the image as ArrayBuffer for reading orientation if its a JPEG image.\n        var xhr = new XMLHttpRequest();\n        var clone = this.clone.bind(this);\n        this.reloading = true;\n        this.xhr = xhr;\n\n        // 1. Cross origin requests are only supported for protocol schemes:\n        // http, https, data, chrome, chrome-extension.\n        // 2. Access to XMLHttpRequest from a Data URL will be blocked by CORS policy\n        // in some browsers as IE11 and Safari.\n        xhr.onabort = clone;\n        xhr.onerror = clone;\n        xhr.ontimeout = clone;\n        xhr.onprogress = function () {\n          // Abort the request directly if it not a JPEG image for better performance\n          if (xhr.getResponseHeader('content-type') !== MIME_TYPE_JPEG) {\n            xhr.abort();\n          }\n        };\n        xhr.onload = function () {\n          _this.read(xhr.response);\n        };\n        xhr.onloadend = function () {\n          _this.reloading = false;\n          _this.xhr = null;\n        };\n\n        // Bust cache when there is a \"crossOrigin\" property to avoid browser cache error\n        if (options.checkCrossOrigin && isCrossOriginURL(url) && element.crossOrigin) {\n          url = addTimestamp(url);\n        }\n\n        // The third parameter is required for avoiding side-effect (#682)\n        xhr.open('GET', url, true);\n        xhr.responseType = 'arraybuffer';\n        xhr.withCredentials = element.crossOrigin === 'use-credentials';\n        xhr.send();\n      }\n    }, {\n      key: \"read\",\n      value: function read(arrayBuffer) {\n        var options = this.options,\n          imageData = this.imageData;\n\n        // Reset the orientation value to its default value 1\n        // as some iOS browsers will render image with its orientation\n        var orientation = resetAndGetOrientation(arrayBuffer);\n        var rotate = 0;\n        var scaleX = 1;\n        var scaleY = 1;\n        if (orientation > 1) {\n          // Generate a new URL which has the default orientation value\n          this.url = arrayBufferToDataURL(arrayBuffer, MIME_TYPE_JPEG);\n          var _parseOrientation = parseOrientation(orientation);\n          rotate = _parseOrientation.rotate;\n          scaleX = _parseOrientation.scaleX;\n          scaleY = _parseOrientation.scaleY;\n        }\n        if (options.rotatable) {\n          imageData.rotate = rotate;\n        }\n        if (options.scalable) {\n          imageData.scaleX = scaleX;\n          imageData.scaleY = scaleY;\n        }\n        this.clone();\n      }\n    }, {\n      key: \"clone\",\n      value: function clone() {\n        var element = this.element,\n          url = this.url;\n        var crossOrigin = element.crossOrigin;\n        var crossOriginUrl = url;\n        if (this.options.checkCrossOrigin && isCrossOriginURL(url)) {\n          if (!crossOrigin) {\n            crossOrigin = 'anonymous';\n          }\n\n          // Bust cache when there is not a \"crossOrigin\" property (#519)\n          crossOriginUrl = addTimestamp(url);\n        }\n        this.crossOrigin = crossOrigin;\n        this.crossOriginUrl = crossOriginUrl;\n        var image = document.createElement('img');\n        if (crossOrigin) {\n          image.crossOrigin = crossOrigin;\n        }\n        image.src = crossOriginUrl || url;\n        image.alt = element.alt || 'The image to crop';\n        this.image = image;\n        image.onload = this.start.bind(this);\n        image.onerror = this.stop.bind(this);\n        addClass(image, CLASS_HIDE);\n        element.parentNode.insertBefore(image, element.nextSibling);\n      }\n    }, {\n      key: \"start\",\n      value: function start() {\n        var _this2 = this;\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        this.sizing = true;\n\n        // Match all browsers that use WebKit as the layout engine in iOS devices,\n        // such as Safari for iOS, Chrome for iOS, and in-app browsers.\n        var isIOSWebKit = WINDOW.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent);\n        var done = function done(naturalWidth, naturalHeight) {\n          assign(_this2.imageData, {\n            naturalWidth: naturalWidth,\n            naturalHeight: naturalHeight,\n            aspectRatio: naturalWidth / naturalHeight\n          });\n          _this2.initialImageData = assign({}, _this2.imageData);\n          _this2.sizing = false;\n          _this2.sized = true;\n          _this2.build();\n        };\n\n        // Most modern browsers (excepts iOS WebKit)\n        if (image.naturalWidth && !isIOSWebKit) {\n          done(image.naturalWidth, image.naturalHeight);\n          return;\n        }\n        var sizingImage = document.createElement('img');\n        var body = document.body || document.documentElement;\n        this.sizingImage = sizingImage;\n        sizingImage.onload = function () {\n          done(sizingImage.width, sizingImage.height);\n          if (!isIOSWebKit) {\n            body.removeChild(sizingImage);\n          }\n        };\n        sizingImage.src = image.src;\n\n        // iOS WebKit will convert the image automatically\n        // with its orientation once append it into DOM (#279)\n        if (!isIOSWebKit) {\n          sizingImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n          body.appendChild(sizingImage);\n        }\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        image.parentNode.removeChild(image);\n        this.image = null;\n      }\n    }, {\n      key: \"build\",\n      value: function build() {\n        if (!this.sized || this.ready) {\n          return;\n        }\n        var element = this.element,\n          options = this.options,\n          image = this.image;\n\n        // Create cropper elements\n        var container = element.parentNode;\n        var template = document.createElement('div');\n        template.innerHTML = TEMPLATE;\n        var cropper = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n        var canvas = cropper.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n        var dragBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-drag-box\"));\n        var cropBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-crop-box\"));\n        var face = cropBox.querySelector(\".\".concat(NAMESPACE, \"-face\"));\n        this.container = container;\n        this.cropper = cropper;\n        this.canvas = canvas;\n        this.dragBox = dragBox;\n        this.cropBox = cropBox;\n        this.viewBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-view-box\"));\n        this.face = face;\n        canvas.appendChild(image);\n\n        // Hide the original image\n        addClass(element, CLASS_HIDDEN);\n\n        // Inserts the cropper after to the current image\n        container.insertBefore(cropper, element.nextSibling);\n\n        // Show the hidden image\n        removeClass(image, CLASS_HIDE);\n        this.initPreview();\n        this.bind();\n        options.initialAspectRatio = Math.max(0, options.initialAspectRatio) || NaN;\n        options.aspectRatio = Math.max(0, options.aspectRatio) || NaN;\n        options.viewMode = Math.max(0, Math.min(3, Math.round(options.viewMode))) || 0;\n        addClass(cropBox, CLASS_HIDDEN);\n        if (!options.guides) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-dashed\")), CLASS_HIDDEN);\n        }\n        if (!options.center) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-center\")), CLASS_HIDDEN);\n        }\n        if (options.background) {\n          addClass(cropper, \"\".concat(NAMESPACE, \"-bg\"));\n        }\n        if (!options.highlight) {\n          addClass(face, CLASS_INVISIBLE);\n        }\n        if (options.cropBoxMovable) {\n          addClass(face, CLASS_MOVE);\n          setData(face, DATA_ACTION, ACTION_ALL);\n        }\n        if (!options.cropBoxResizable) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-line\")), CLASS_HIDDEN);\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-point\")), CLASS_HIDDEN);\n        }\n        this.render();\n        this.ready = true;\n        this.setDragMode(options.dragMode);\n        if (options.autoCrop) {\n          this.crop();\n        }\n        this.setData(options.data);\n        if (isFunction(options.ready)) {\n          addListener(element, EVENT_READY, options.ready, {\n            once: true\n          });\n        }\n        dispatchEvent(element, EVENT_READY);\n      }\n    }, {\n      key: \"unbuild\",\n      value: function unbuild() {\n        if (!this.ready) {\n          return;\n        }\n        this.ready = false;\n        this.unbind();\n        this.resetPreview();\n        var parentNode = this.cropper.parentNode;\n        if (parentNode) {\n          parentNode.removeChild(this.cropper);\n        }\n        removeClass(this.element, CLASS_HIDDEN);\n      }\n    }, {\n      key: \"uncreate\",\n      value: function uncreate() {\n        if (this.ready) {\n          this.unbuild();\n          this.ready = false;\n          this.cropped = false;\n        } else if (this.sizing) {\n          this.sizingImage.onload = null;\n          this.sizing = false;\n          this.sized = false;\n        } else if (this.reloading) {\n          this.xhr.onabort = null;\n          this.xhr.abort();\n        } else if (this.image) {\n          this.stop();\n        }\n      }\n\n      /**\n       * Get the no conflict cropper class.\n       * @returns {Cropper} The cropper class.\n       */\n    }], [{\n      key: \"noConflict\",\n      value: function noConflict() {\n        window.Cropper = AnotherCropper;\n        return Cropper;\n      }\n\n      /**\n       * Change the default options.\n       * @param {Object} options - The new default options.\n       */\n    }, {\n      key: \"setDefaults\",\n      value: function setDefaults(options) {\n        assign(DEFAULTS, isPlainObject(options) && options);\n      }\n    }]);\n  }();\n  assign(Cropper.prototype, render, preview, events, handlers, change, methods);\n\n  return Cropper;\n\n}));\n", "/*!\nTurbo 8.0.21\nCopyright \u00A9 2026 37signals LLC\n */\nconst FrameLoadingStyle = {\n  eager: \"eager\",\n  lazy: \"lazy\"\n};\n\n/**\n * Contains a fragment of HTML which is updated based on navigation within\n * it (e.g. via links or form submissions).\n *\n * @customElement turbo-frame\n * @example\n *   <turbo-frame id=\"messages\">\n *     <a href=\"/messages/expanded\">\n *       Show all expanded messages in this frame.\n *     </a>\n *\n *     <form action=\"/messages\">\n *       Show response from this form within this frame.\n *     </form>\n *   </turbo-frame>\n */\nclass FrameElement extends HTMLElement {\n  static delegateConstructor = undefined\n\n  loaded = Promise.resolve()\n\n  static get observedAttributes() {\n    return [\"disabled\", \"loading\", \"src\"]\n  }\n\n  constructor() {\n    super();\n    this.delegate = new FrameElement.delegateConstructor(this);\n  }\n\n  connectedCallback() {\n    this.delegate.connect();\n  }\n\n  disconnectedCallback() {\n    this.delegate.disconnect();\n  }\n\n  reload() {\n    return this.delegate.sourceURLReloaded()\n  }\n\n  attributeChangedCallback(name) {\n    if (name == \"loading\") {\n      this.delegate.loadingStyleChanged();\n    } else if (name == \"src\") {\n      this.delegate.sourceURLChanged();\n    } else if (name == \"disabled\") {\n      this.delegate.disabledChanged();\n    }\n  }\n\n  /**\n   * Gets the URL to lazily load source HTML from\n   */\n  get src() {\n    return this.getAttribute(\"src\")\n  }\n\n  /**\n   * Sets the URL to lazily load source HTML from\n   */\n  set src(value) {\n    if (value) {\n      this.setAttribute(\"src\", value);\n    } else {\n      this.removeAttribute(\"src\");\n    }\n  }\n\n  /**\n   * Gets the refresh mode for the frame.\n   */\n  get refresh() {\n    return this.getAttribute(\"refresh\")\n  }\n\n  /**\n   * Sets the refresh mode for the frame.\n   */\n  set refresh(value) {\n    if (value) {\n      this.setAttribute(\"refresh\", value);\n    } else {\n      this.removeAttribute(\"refresh\");\n    }\n  }\n\n  get shouldReloadWithMorph() {\n    return this.src && this.refresh === \"morph\"\n  }\n\n  /**\n   * Determines if the element is loading\n   */\n  get loading() {\n    return frameLoadingStyleFromString(this.getAttribute(\"loading\") || \"\")\n  }\n\n  /**\n   * Sets the value of if the element is loading\n   */\n  set loading(value) {\n    if (value) {\n      this.setAttribute(\"loading\", value);\n    } else {\n      this.removeAttribute(\"loading\");\n    }\n  }\n\n  /**\n   * Gets the disabled state of the frame.\n   *\n   * If disabled, no requests will be intercepted by the frame.\n   */\n  get disabled() {\n    return this.hasAttribute(\"disabled\")\n  }\n\n  /**\n   * Sets the disabled state of the frame.\n   *\n   * If disabled, no requests will be intercepted by the frame.\n   */\n  set disabled(value) {\n    if (value) {\n      this.setAttribute(\"disabled\", \"\");\n    } else {\n      this.removeAttribute(\"disabled\");\n    }\n  }\n\n  /**\n   * Gets the autoscroll state of the frame.\n   *\n   * If true, the frame will be scrolled into view automatically on update.\n   */\n  get autoscroll() {\n    return this.hasAttribute(\"autoscroll\")\n  }\n\n  /**\n   * Sets the autoscroll state of the frame.\n   *\n   * If true, the frame will be scrolled into view automatically on update.\n   */\n  set autoscroll(value) {\n    if (value) {\n      this.setAttribute(\"autoscroll\", \"\");\n    } else {\n      this.removeAttribute(\"autoscroll\");\n    }\n  }\n\n  /**\n   * Determines if the element has finished loading\n   */\n  get complete() {\n    return !this.delegate.isLoading\n  }\n\n  /**\n   * Gets the active state of the frame.\n   *\n   * If inactive, source changes will not be observed.\n   */\n  get isActive() {\n    return this.ownerDocument === document && !this.isPreview\n  }\n\n  /**\n   * Sets the active state of the frame.\n   *\n   * If inactive, source changes will not be observed.\n   */\n  get isPreview() {\n    return this.ownerDocument?.documentElement?.hasAttribute(\"data-turbo-preview\")\n  }\n}\n\nfunction frameLoadingStyleFromString(style) {\n  switch (style.toLowerCase()) {\n    case \"lazy\":\n      return FrameLoadingStyle.lazy\n    default:\n      return FrameLoadingStyle.eager\n  }\n}\n\nconst drive = {\n  enabled: true,\n  progressBarDelay: 500,\n  unvisitableExtensions: new Set(\n    [\n      \".7z\", \".aac\", \".apk\", \".avi\", \".bmp\", \".bz2\", \".css\", \".csv\", \".deb\", \".dmg\", \".doc\",\n      \".docx\", \".exe\", \".gif\", \".gz\", \".heic\", \".heif\", \".ico\", \".iso\", \".jpeg\", \".jpg\",\n      \".js\", \".json\", \".m4a\", \".mkv\", \".mov\", \".mp3\", \".mp4\", \".mpeg\", \".mpg\", \".msi\",\n      \".ogg\", \".ogv\", \".pdf\", \".pkg\", \".png\", \".ppt\", \".pptx\", \".rar\", \".rtf\",\n      \".svg\", \".tar\", \".tif\", \".tiff\", \".txt\", \".wav\", \".webm\", \".webp\", \".wma\", \".wmv\",\n      \".xls\", \".xlsx\", \".xml\", \".zip\"\n    ]\n  )\n};\n\nfunction activateScriptElement(element) {\n  if (element.getAttribute(\"data-turbo-eval\") == \"false\") {\n    return element\n  } else {\n    const createdScriptElement = document.createElement(\"script\");\n    const cspNonce = getCspNonce();\n    if (cspNonce) {\n      createdScriptElement.nonce = cspNonce;\n    }\n    createdScriptElement.textContent = element.textContent;\n    createdScriptElement.async = false;\n    copyElementAttributes(createdScriptElement, element);\n    return createdScriptElement\n  }\n}\n\nfunction copyElementAttributes(destinationElement, sourceElement) {\n  for (const { name, value } of sourceElement.attributes) {\n    destinationElement.setAttribute(name, value);\n  }\n}\n\nfunction createDocumentFragment(html) {\n  const template = document.createElement(\"template\");\n  template.innerHTML = html;\n  return template.content\n}\n\nfunction dispatch(eventName, { target, cancelable, detail } = {}) {\n  const event = new CustomEvent(eventName, {\n    cancelable,\n    bubbles: true,\n    composed: true,\n    detail\n  });\n\n  if (target && target.isConnected) {\n    target.dispatchEvent(event);\n  } else {\n    document.documentElement.dispatchEvent(event);\n  }\n\n  return event\n}\n\nfunction cancelEvent(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n\nfunction nextRepaint() {\n  if (document.visibilityState === \"hidden\") {\n    return nextEventLoopTick()\n  } else {\n    return nextAnimationFrame()\n  }\n}\n\nfunction nextAnimationFrame() {\n  return new Promise((resolve) => requestAnimationFrame(() => resolve()))\n}\n\nfunction nextEventLoopTick() {\n  return new Promise((resolve) => setTimeout(() => resolve(), 0))\n}\n\nfunction parseHTMLDocument(html = \"\") {\n  return new DOMParser().parseFromString(html, \"text/html\")\n}\n\nfunction unindent(strings, ...values) {\n  const lines = interpolate(strings, values).replace(/^\\n/, \"\").split(\"\\n\");\n  const match = lines[0].match(/^\\s+/);\n  const indent = match ? match[0].length : 0;\n  return lines.map((line) => line.slice(indent)).join(\"\\n\")\n}\n\nfunction interpolate(strings, values) {\n  return strings.reduce((result, string, i) => {\n    const value = values[i] == undefined ? \"\" : values[i];\n    return result + string + value\n  }, \"\")\n}\n\nfunction uuid() {\n  return Array.from({ length: 36 })\n    .map((_, i) => {\n      if (i == 8 || i == 13 || i == 18 || i == 23) {\n        return \"-\"\n      } else if (i == 14) {\n        return \"4\"\n      } else if (i == 19) {\n        return (Math.floor(Math.random() * 4) + 8).toString(16)\n      } else {\n        return Math.floor(Math.random() * 16).toString(16)\n      }\n    })\n    .join(\"\")\n}\n\nfunction getAttribute(attributeName, ...elements) {\n  for (const value of elements.map((element) => element?.getAttribute(attributeName))) {\n    if (typeof value == \"string\") return value\n  }\n\n  return null\n}\n\nfunction hasAttribute(attributeName, ...elements) {\n  return elements.some((element) => element && element.hasAttribute(attributeName))\n}\n\nfunction markAsBusy(...elements) {\n  for (const element of elements) {\n    if (element.localName == \"turbo-frame\") {\n      element.setAttribute(\"busy\", \"\");\n    }\n    element.setAttribute(\"aria-busy\", \"true\");\n  }\n}\n\nfunction clearBusyState(...elements) {\n  for (const element of elements) {\n    if (element.localName == \"turbo-frame\") {\n      element.removeAttribute(\"busy\");\n    }\n\n    element.removeAttribute(\"aria-busy\");\n  }\n}\n\nfunction waitForLoad(element, timeoutInMilliseconds = 2000) {\n  return new Promise((resolve) => {\n    const onComplete = () => {\n      element.removeEventListener(\"error\", onComplete);\n      element.removeEventListener(\"load\", onComplete);\n      resolve();\n    };\n\n    element.addEventListener(\"load\", onComplete, { once: true });\n    element.addEventListener(\"error\", onComplete, { once: true });\n    setTimeout(resolve, timeoutInMilliseconds);\n  })\n}\n\nfunction getHistoryMethodForAction(action) {\n  switch (action) {\n    case \"replace\":\n      return history.replaceState\n    case \"advance\":\n    case \"restore\":\n      return history.pushState\n  }\n}\n\nfunction isAction(action) {\n  return action == \"advance\" || action == \"replace\" || action == \"restore\"\n}\n\nfunction getVisitAction(...elements) {\n  const action = getAttribute(\"data-turbo-action\", ...elements);\n\n  return isAction(action) ? action : null\n}\n\nfunction getMetaElement(name) {\n  return document.querySelector(`meta[name=\"${name}\"]`)\n}\n\nfunction getMetaContent(name) {\n  const element = getMetaElement(name);\n  return element && element.content\n}\n\nfunction getCspNonce() {\n  const element = getMetaElement(\"csp-nonce\");\n\n  if (element) {\n    const { nonce, content } = element;\n    return nonce == \"\" ? content : nonce\n  }\n}\n\nfunction setMetaContent(name, content) {\n  let element = getMetaElement(name);\n\n  if (!element) {\n    element = document.createElement(\"meta\");\n    element.setAttribute(\"name\", name);\n\n    document.head.appendChild(element);\n  }\n\n  element.setAttribute(\"content\", content);\n\n  return element\n}\n\nfunction findClosestRecursively(element, selector) {\n  if (element instanceof Element) {\n    return (\n      element.closest(selector) || findClosestRecursively(element.assignedSlot || element.getRootNode()?.host, selector)\n    )\n  }\n}\n\nfunction elementIsFocusable(element) {\n  const inertDisabledOrHidden = \"[inert], :disabled, [hidden], details:not([open]), dialog:not([open])\";\n\n  return !!element && element.closest(inertDisabledOrHidden) == null && typeof element.focus == \"function\"\n}\n\nfunction queryAutofocusableElement(elementOrDocumentFragment) {\n  return Array.from(elementOrDocumentFragment.querySelectorAll(\"[autofocus]\")).find(elementIsFocusable)\n}\n\nasync function around(callback, reader) {\n  const before = reader();\n\n  callback();\n\n  await nextAnimationFrame();\n\n  const after = reader();\n\n  return [before, after]\n}\n\nfunction doesNotTargetIFrame(name) {\n  if (name === \"_blank\") {\n    return false\n  } else if (name) {\n    for (const element of document.getElementsByName(name)) {\n      if (element instanceof HTMLIFrameElement) return false\n    }\n\n    return true\n  } else {\n    return true\n  }\n}\n\nfunction findLinkFromClickTarget(target) {\n  const link = findClosestRecursively(target, \"a[href], a[xlink\\\\:href]\");\n\n  if (!link) return null\n  if (link.href.startsWith(\"#\")) return null\n  if (link.hasAttribute(\"download\")) return null\n\n  const linkTarget = link.getAttribute(\"target\");\n  if (linkTarget && linkTarget !== \"_self\") return null\n\n  return link\n}\n\nfunction debounce(fn, delay) {\n  let timeoutId = null;\n\n  return (...args) => {\n    const callback = () => fn.apply(this, args);\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(callback, delay);\n  }\n}\n\nconst submitter = {\n  \"aria-disabled\": {\n    beforeSubmit: submitter => {\n      submitter.setAttribute(\"aria-disabled\", \"true\");\n      submitter.addEventListener(\"click\", cancelEvent);\n    },\n\n    afterSubmit: submitter => {\n      submitter.removeAttribute(\"aria-disabled\");\n      submitter.removeEventListener(\"click\", cancelEvent);\n    }\n  },\n\n  \"disabled\": {\n    beforeSubmit: submitter => submitter.disabled = true,\n    afterSubmit: submitter => submitter.disabled = false\n  }\n};\n\nclass Config {\n  #submitter = null\n\n  constructor(config) {\n    Object.assign(this, config);\n  }\n\n  get submitter() {\n    return this.#submitter\n  }\n\n  set submitter(value) {\n    this.#submitter = submitter[value] || value;\n  }\n}\n\nconst forms = new Config({\n  mode: \"on\",\n  submitter: \"disabled\"\n});\n\nconst config = {\n  drive,\n  forms\n};\n\nfunction expandURL(locatable) {\n  return new URL(locatable.toString(), document.baseURI)\n}\n\nfunction getAnchor(url) {\n  let anchorMatch;\n  if (url.hash) {\n    return url.hash.slice(1)\n    // eslint-disable-next-line no-cond-assign\n  } else if ((anchorMatch = url.href.match(/#(.*)$/))) {\n    return anchorMatch[1]\n  }\n}\n\nfunction getAction$1(form, submitter) {\n  const action = submitter?.getAttribute(\"formaction\") || form.getAttribute(\"action\") || form.action;\n\n  return expandURL(action)\n}\n\nfunction getExtension(url) {\n  return (getLastPathComponent(url).match(/\\.[^.]*$/) || [])[0] || \"\"\n}\n\nfunction isPrefixedBy(baseURL, url) {\n  const prefix = addTrailingSlash(url.origin + url.pathname);\n  return addTrailingSlash(baseURL.href) === prefix || baseURL.href.startsWith(prefix)\n}\n\nfunction locationIsVisitable(location, rootLocation) {\n  return isPrefixedBy(location, rootLocation) && !config.drive.unvisitableExtensions.has(getExtension(location))\n}\n\nfunction getLocationForLink(link) {\n  return expandURL(link.getAttribute(\"href\") || \"\")\n}\n\nfunction getRequestURL(url) {\n  const anchor = getAnchor(url);\n  return anchor != null ? url.href.slice(0, -(anchor.length + 1)) : url.href\n}\n\nfunction toCacheKey(url) {\n  return getRequestURL(url)\n}\n\nfunction urlsAreEqual(left, right) {\n  return expandURL(left).href == expandURL(right).href\n}\n\nfunction getPathComponents(url) {\n  return url.pathname.split(\"/\").slice(1)\n}\n\nfunction getLastPathComponent(url) {\n  return getPathComponents(url).slice(-1)[0]\n}\n\nfunction addTrailingSlash(value) {\n  return value.endsWith(\"/\") ? value : value + \"/\"\n}\n\nclass FetchResponse {\n  constructor(response) {\n    this.response = response;\n  }\n\n  get succeeded() {\n    return this.response.ok\n  }\n\n  get failed() {\n    return !this.succeeded\n  }\n\n  get clientError() {\n    return this.statusCode >= 400 && this.statusCode <= 499\n  }\n\n  get serverError() {\n    return this.statusCode >= 500 && this.statusCode <= 599\n  }\n\n  get redirected() {\n    return this.response.redirected\n  }\n\n  get location() {\n    return expandURL(this.response.url)\n  }\n\n  get isHTML() {\n    return this.contentType && this.contentType.match(/^(?:text\\/([^\\s;,]+\\b)?html|application\\/xhtml\\+xml)\\b/)\n  }\n\n  get statusCode() {\n    return this.response.status\n  }\n\n  get contentType() {\n    return this.header(\"Content-Type\")\n  }\n\n  get responseText() {\n    return this.response.clone().text()\n  }\n\n  get responseHTML() {\n    if (this.isHTML) {\n      return this.response.clone().text()\n    } else {\n      return Promise.resolve(undefined)\n    }\n  }\n\n  header(name) {\n    return this.response.headers.get(name)\n  }\n}\n\nclass LimitedSet extends Set {\n  constructor(maxSize) {\n    super();\n    this.maxSize = maxSize;\n  }\n\n  add(value) {\n    if (this.size >= this.maxSize) {\n      const iterator = this.values();\n      const oldestValue = iterator.next().value;\n      this.delete(oldestValue);\n    }\n    super.add(value);\n  }\n}\n\nconst recentRequests = new LimitedSet(20);\n\nfunction fetchWithTurboHeaders(url, options = {}) {\n  const modifiedHeaders = new Headers(options.headers || {});\n  const requestUID = uuid();\n  recentRequests.add(requestUID);\n  modifiedHeaders.append(\"X-Turbo-Request-Id\", requestUID);\n\n  return window.fetch(url, {\n    ...options,\n    headers: modifiedHeaders\n  })\n}\n\nfunction fetchMethodFromString(method) {\n  switch (method.toLowerCase()) {\n    case \"get\":\n      return FetchMethod.get\n    case \"post\":\n      return FetchMethod.post\n    case \"put\":\n      return FetchMethod.put\n    case \"patch\":\n      return FetchMethod.patch\n    case \"delete\":\n      return FetchMethod.delete\n  }\n}\n\nconst FetchMethod = {\n  get: \"get\",\n  post: \"post\",\n  put: \"put\",\n  patch: \"patch\",\n  delete: \"delete\"\n};\n\nfunction fetchEnctypeFromString(encoding) {\n  switch (encoding.toLowerCase()) {\n    case FetchEnctype.multipart:\n      return FetchEnctype.multipart\n    case FetchEnctype.plain:\n      return FetchEnctype.plain\n    default:\n      return FetchEnctype.urlEncoded\n  }\n}\n\nconst FetchEnctype = {\n  urlEncoded: \"application/x-www-form-urlencoded\",\n  multipart: \"multipart/form-data\",\n  plain: \"text/plain\"\n};\n\nclass FetchRequest {\n  abortController = new AbortController()\n  #resolveRequestPromise = (_value) => {}\n\n  constructor(delegate, method, location, requestBody = new URLSearchParams(), target = null, enctype = FetchEnctype.urlEncoded) {\n    const [url, body] = buildResourceAndBody(expandURL(location), method, requestBody, enctype);\n\n    this.delegate = delegate;\n    this.url = url;\n    this.target = target;\n    this.fetchOptions = {\n      credentials: \"same-origin\",\n      redirect: \"follow\",\n      method: method.toUpperCase(),\n      headers: { ...this.defaultHeaders },\n      body: body,\n      signal: this.abortSignal,\n      referrer: this.delegate.referrer?.href\n    };\n    this.enctype = enctype;\n  }\n\n  get method() {\n    return this.fetchOptions.method\n  }\n\n  set method(value) {\n    const fetchBody = this.isSafe ? this.url.searchParams : this.fetchOptions.body || new FormData();\n    const fetchMethod = fetchMethodFromString(value) || FetchMethod.get;\n\n    this.url.search = \"\";\n\n    const [url, body] = buildResourceAndBody(this.url, fetchMethod, fetchBody, this.enctype);\n\n    this.url = url;\n    this.fetchOptions.body = body;\n    this.fetchOptions.method = fetchMethod.toUpperCase();\n  }\n\n  get headers() {\n    return this.fetchOptions.headers\n  }\n\n  set headers(value) {\n    this.fetchOptions.headers = value;\n  }\n\n  get body() {\n    if (this.isSafe) {\n      return this.url.searchParams\n    } else {\n      return this.fetchOptions.body\n    }\n  }\n\n  set body(value) {\n    this.fetchOptions.body = value;\n  }\n\n  get location() {\n    return this.url\n  }\n\n  get params() {\n    return this.url.searchParams\n  }\n\n  get entries() {\n    return this.body ? Array.from(this.body.entries()) : []\n  }\n\n  cancel() {\n    this.abortController.abort();\n  }\n\n  async perform() {\n    const { fetchOptions } = this;\n    this.delegate.prepareRequest(this);\n    const event = await this.#allowRequestToBeIntercepted(fetchOptions);\n    try {\n      this.delegate.requestStarted(this);\n\n      if (event.detail.fetchRequest) {\n        this.response = event.detail.fetchRequest.response;\n      } else {\n        this.response = fetchWithTurboHeaders(this.url.href, fetchOptions);\n      }\n\n      const response = await this.response;\n      return await this.receive(response)\n    } catch (error) {\n      if (error.name !== \"AbortError\") {\n        if (this.#willDelegateErrorHandling(error)) {\n          this.delegate.requestErrored(this, error);\n        }\n        throw error\n      }\n    } finally {\n      this.delegate.requestFinished(this);\n    }\n  }\n\n  async receive(response) {\n    const fetchResponse = new FetchResponse(response);\n    const event = dispatch(\"turbo:before-fetch-response\", {\n      cancelable: true,\n      detail: { fetchResponse },\n      target: this.target\n    });\n    if (event.defaultPrevented) {\n      this.delegate.requestPreventedHandlingResponse(this, fetchResponse);\n    } else if (fetchResponse.succeeded) {\n      this.delegate.requestSucceededWithResponse(this, fetchResponse);\n    } else {\n      this.delegate.requestFailedWithResponse(this, fetchResponse);\n    }\n    return fetchResponse\n  }\n\n  get defaultHeaders() {\n    return {\n      Accept: \"text/html, application/xhtml+xml\"\n    }\n  }\n\n  get isSafe() {\n    return isSafe(this.method)\n  }\n\n  get abortSignal() {\n    return this.abortController.signal\n  }\n\n  acceptResponseType(mimeType) {\n    this.headers[\"Accept\"] = [mimeType, this.headers[\"Accept\"]].join(\", \");\n  }\n\n  async #allowRequestToBeIntercepted(fetchOptions) {\n    const requestInterception = new Promise((resolve) => (this.#resolveRequestPromise = resolve));\n    const event = dispatch(\"turbo:before-fetch-request\", {\n      cancelable: true,\n      detail: {\n        fetchOptions,\n        url: this.url,\n        resume: this.#resolveRequestPromise\n      },\n      target: this.target\n    });\n    this.url = event.detail.url;\n    if (event.defaultPrevented) await requestInterception;\n\n    return event\n  }\n\n  #willDelegateErrorHandling(error) {\n    const event = dispatch(\"turbo:fetch-request-error\", {\n      target: this.target,\n      cancelable: true,\n      detail: { request: this, error: error }\n    });\n\n    return !event.defaultPrevented\n  }\n}\n\nfunction isSafe(fetchMethod) {\n  return fetchMethodFromString(fetchMethod) == FetchMethod.get\n}\n\nfunction buildResourceAndBody(resource, method, requestBody, enctype) {\n  const searchParams =\n    Array.from(requestBody).length > 0 ? new URLSearchParams(entriesExcludingFiles(requestBody)) : resource.searchParams;\n\n  if (isSafe(method)) {\n    return [mergeIntoURLSearchParams(resource, searchParams), null]\n  } else if (enctype == FetchEnctype.urlEncoded) {\n    return [resource, searchParams]\n  } else {\n    return [resource, requestBody]\n  }\n}\n\nfunction entriesExcludingFiles(requestBody) {\n  const entries = [];\n\n  for (const [name, value] of requestBody) {\n    if (value instanceof File) continue\n    else entries.push([name, value]);\n  }\n\n  return entries\n}\n\nfunction mergeIntoURLSearchParams(url, requestBody) {\n  const searchParams = new URLSearchParams(entriesExcludingFiles(requestBody));\n\n  url.search = searchParams.toString();\n\n  return url\n}\n\nclass AppearanceObserver {\n  started = false\n\n  constructor(delegate, element) {\n    this.delegate = delegate;\n    this.element = element;\n    this.intersectionObserver = new IntersectionObserver(this.intersect);\n  }\n\n  start() {\n    if (!this.started) {\n      this.started = true;\n      this.intersectionObserver.observe(this.element);\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false;\n      this.intersectionObserver.unobserve(this.element);\n    }\n  }\n\n  intersect = (entries) => {\n    const lastEntry = entries.slice(-1)[0];\n    if (lastEntry?.isIntersecting) {\n      this.delegate.elementAppearedInViewport(this.element);\n    }\n  }\n}\n\nclass StreamMessage {\n  static contentType = \"text/vnd.turbo-stream.html\"\n\n  static wrap(message) {\n    if (typeof message == \"string\") {\n      return new this(createDocumentFragment(message))\n    } else {\n      return message\n    }\n  }\n\n  constructor(fragment) {\n    this.fragment = importStreamElements(fragment);\n  }\n}\n\nfunction importStreamElements(fragment) {\n  for (const element of fragment.querySelectorAll(\"turbo-stream\")) {\n    const streamElement = document.importNode(element, true);\n\n    for (const inertScriptElement of streamElement.templateElement.content.querySelectorAll(\"script\")) {\n      inertScriptElement.replaceWith(activateScriptElement(inertScriptElement));\n    }\n\n    element.replaceWith(streamElement);\n  }\n\n  return fragment\n}\n\nconst identity = key => key;\n\nclass LRUCache {\n  keys = []\n  entries = {}\n  #toCacheKey\n\n  constructor(size, toCacheKey = identity) {\n    this.size = size;\n    this.#toCacheKey = toCacheKey;\n  }\n\n  has(key) {\n    return this.#toCacheKey(key) in this.entries\n  }\n\n  get(key) {\n    if (this.has(key)) {\n      const entry = this.read(key);\n      this.touch(key);\n      return entry\n    }\n  }\n\n  put(key, entry) {\n    this.write(key, entry);\n    this.touch(key);\n    return entry\n  }\n\n  clear() {\n    for (const key of Object.keys(this.entries)) {\n      this.evict(key);\n    }\n  }\n\n  // Private\n\n  read(key) {\n    return this.entries[this.#toCacheKey(key)]\n  }\n\n  write(key, entry) {\n    this.entries[this.#toCacheKey(key)] = entry;\n  }\n\n  touch(key) {\n    key = this.#toCacheKey(key);\n    const index = this.keys.indexOf(key);\n    if (index > -1) this.keys.splice(index, 1);\n    this.keys.unshift(key);\n    this.trim();\n  }\n\n  trim() {\n    for (const key of this.keys.splice(this.size)) {\n      this.evict(key);\n    }\n  }\n\n  evict(key) {\n    delete this.entries[key];\n  }\n}\n\nconst PREFETCH_DELAY = 100;\n\nclass PrefetchCache extends LRUCache {\n  #prefetchTimeout = null\n  #maxAges = {}\n\n  constructor(size = 1, prefetchDelay = PREFETCH_DELAY) {\n    super(size, toCacheKey);\n    this.prefetchDelay = prefetchDelay;\n  }\n\n  putLater(url, request, ttl) {\n    this.#prefetchTimeout = setTimeout(() => {\n      request.perform();\n      this.put(url, request, ttl);\n      this.#prefetchTimeout = null;\n    }, this.prefetchDelay);\n  }\n\n  put(url, request, ttl = cacheTtl) {\n    super.put(url, request);\n    this.#maxAges[toCacheKey(url)] = new Date(new Date().getTime() + ttl);\n  }\n\n  clear() {\n    super.clear();\n    if (this.#prefetchTimeout) clearTimeout(this.#prefetchTimeout);\n  }\n\n  evict(key) {\n    super.evict(key);\n    delete this.#maxAges[key];\n  }\n\n  has(key) {\n    if (super.has(key)) {\n      const maxAge = this.#maxAges[toCacheKey(key)];\n\n      return maxAge && maxAge > Date.now()\n    } else {\n      return false\n    }\n  }\n}\n\nconst cacheTtl = 10 * 1000;\nconst prefetchCache = new PrefetchCache();\n\nconst FormSubmissionState = {\n  initialized: \"initialized\",\n  requesting: \"requesting\",\n  waiting: \"waiting\",\n  receiving: \"receiving\",\n  stopping: \"stopping\",\n  stopped: \"stopped\"\n};\n\nclass FormSubmission {\n  state = FormSubmissionState.initialized\n\n  static confirmMethod(message) {\n    return Promise.resolve(confirm(message))\n  }\n\n  constructor(delegate, formElement, submitter, mustRedirect = false) {\n    const method = getMethod(formElement, submitter);\n    const action = getAction(getFormAction(formElement, submitter), method);\n    const body = buildFormData(formElement, submitter);\n    const enctype = getEnctype(formElement, submitter);\n\n    this.delegate = delegate;\n    this.formElement = formElement;\n    this.submitter = submitter;\n    this.fetchRequest = new FetchRequest(this, method, action, body, formElement, enctype);\n    this.mustRedirect = mustRedirect;\n  }\n\n  get method() {\n    return this.fetchRequest.method\n  }\n\n  set method(value) {\n    this.fetchRequest.method = value;\n  }\n\n  get action() {\n    return this.fetchRequest.url.toString()\n  }\n\n  set action(value) {\n    this.fetchRequest.url = expandURL(value);\n  }\n\n  get body() {\n    return this.fetchRequest.body\n  }\n\n  get enctype() {\n    return this.fetchRequest.enctype\n  }\n\n  get isSafe() {\n    return this.fetchRequest.isSafe\n  }\n\n  get location() {\n    return this.fetchRequest.url\n  }\n\n  // The submission process\n\n  async start() {\n    const { initialized, requesting } = FormSubmissionState;\n    const confirmationMessage = getAttribute(\"data-turbo-confirm\", this.submitter, this.formElement);\n\n    if (typeof confirmationMessage === \"string\") {\n      const confirmMethod = typeof config.forms.confirm === \"function\" ?\n        config.forms.confirm :\n        FormSubmission.confirmMethod;\n\n      const answer = await confirmMethod(confirmationMessage, this.formElement, this.submitter);\n      if (!answer) {\n        return\n      }\n    }\n\n    if (this.state == initialized) {\n      this.state = requesting;\n      return this.fetchRequest.perform()\n    }\n  }\n\n  stop() {\n    const { stopping, stopped } = FormSubmissionState;\n    if (this.state != stopping && this.state != stopped) {\n      this.state = stopping;\n      this.fetchRequest.cancel();\n      return true\n    }\n  }\n\n  // Fetch request delegate\n\n  prepareRequest(request) {\n    if (!request.isSafe) {\n      const token = getCookieValue(getMetaContent(\"csrf-param\")) || getMetaContent(\"csrf-token\");\n      if (token) {\n        request.headers[\"X-CSRF-Token\"] = token;\n      }\n    }\n\n    if (this.requestAcceptsTurboStreamResponse(request)) {\n      request.acceptResponseType(StreamMessage.contentType);\n    }\n  }\n\n  requestStarted(_request) {\n    this.state = FormSubmissionState.waiting;\n    if (this.submitter) config.forms.submitter.beforeSubmit(this.submitter);\n    this.setSubmitsWith();\n    markAsBusy(this.formElement);\n    dispatch(\"turbo:submit-start\", {\n      target: this.formElement,\n      detail: { formSubmission: this }\n    });\n    this.delegate.formSubmissionStarted(this);\n  }\n\n  requestPreventedHandlingResponse(request, response) {\n    prefetchCache.clear();\n\n    this.result = { success: response.succeeded, fetchResponse: response };\n  }\n\n  requestSucceededWithResponse(request, response) {\n    if (response.clientError || response.serverError) {\n      this.delegate.formSubmissionFailedWithResponse(this, response);\n      return\n    }\n\n    prefetchCache.clear();\n\n    if (this.requestMustRedirect(request) && responseSucceededWithoutRedirect(response)) {\n      const error = new Error(\"Form responses must redirect to another location\");\n      this.delegate.formSubmissionErrored(this, error);\n    } else {\n      this.state = FormSubmissionState.receiving;\n      this.result = { success: true, fetchResponse: response };\n      this.delegate.formSubmissionSucceededWithResponse(this, response);\n    }\n  }\n\n  requestFailedWithResponse(request, response) {\n    this.result = { success: false, fetchResponse: response };\n    this.delegate.formSubmissionFailedWithResponse(this, response);\n  }\n\n  requestErrored(request, error) {\n    this.result = { success: false, error };\n    this.delegate.formSubmissionErrored(this, error);\n  }\n\n  requestFinished(_request) {\n    this.state = FormSubmissionState.stopped;\n    if (this.submitter) config.forms.submitter.afterSubmit(this.submitter);\n    this.resetSubmitterText();\n    clearBusyState(this.formElement);\n    dispatch(\"turbo:submit-end\", {\n      target: this.formElement,\n      detail: { formSubmission: this, ...this.result }\n    });\n    this.delegate.formSubmissionFinished(this);\n  }\n\n  // Private\n\n  setSubmitsWith() {\n    if (!this.submitter || !this.submitsWith) return\n\n    if (this.submitter.matches(\"button\")) {\n      this.originalSubmitText = this.submitter.innerHTML;\n      this.submitter.innerHTML = this.submitsWith;\n    } else if (this.submitter.matches(\"input\")) {\n      const input = this.submitter;\n      this.originalSubmitText = input.value;\n      input.value = this.submitsWith;\n    }\n  }\n\n  resetSubmitterText() {\n    if (!this.submitter || !this.originalSubmitText) return\n\n    if (this.submitter.matches(\"button\")) {\n      this.submitter.innerHTML = this.originalSubmitText;\n    } else if (this.submitter.matches(\"input\")) {\n      const input = this.submitter;\n      input.value = this.originalSubmitText;\n    }\n  }\n\n  requestMustRedirect(request) {\n    return !request.isSafe && this.mustRedirect\n  }\n\n  requestAcceptsTurboStreamResponse(request) {\n    return !request.isSafe || hasAttribute(\"data-turbo-stream\", this.submitter, this.formElement)\n  }\n\n  get submitsWith() {\n    return this.submitter?.getAttribute(\"data-turbo-submits-with\")\n  }\n}\n\nfunction buildFormData(formElement, submitter) {\n  const formData = new FormData(formElement);\n  const name = submitter?.getAttribute(\"name\");\n  const value = submitter?.getAttribute(\"value\");\n\n  if (name) {\n    formData.append(name, value || \"\");\n  }\n\n  return formData\n}\n\nfunction getCookieValue(cookieName) {\n  if (cookieName != null) {\n    const cookies = document.cookie ? document.cookie.split(\"; \") : [];\n    const cookie = cookies.find((cookie) => cookie.startsWith(cookieName));\n    if (cookie) {\n      const value = cookie.split(\"=\").slice(1).join(\"=\");\n      return value ? decodeURIComponent(value) : undefined\n    }\n  }\n}\n\nfunction responseSucceededWithoutRedirect(response) {\n  return response.statusCode == 200 && !response.redirected\n}\n\nfunction getFormAction(formElement, submitter) {\n  const formElementAction = typeof formElement.action === \"string\" ? formElement.action : null;\n\n  if (submitter?.hasAttribute(\"formaction\")) {\n    return submitter.getAttribute(\"formaction\") || \"\"\n  } else {\n    return formElement.getAttribute(\"action\") || formElementAction || \"\"\n  }\n}\n\nfunction getAction(formAction, fetchMethod) {\n  const action = expandURL(formAction);\n\n  if (isSafe(fetchMethod)) {\n    action.search = \"\";\n  }\n\n  return action\n}\n\nfunction getMethod(formElement, submitter) {\n  const method = submitter?.getAttribute(\"formmethod\") || formElement.getAttribute(\"method\") || \"\";\n  return fetchMethodFromString(method.toLowerCase()) || FetchMethod.get\n}\n\nfunction getEnctype(formElement, submitter) {\n  return fetchEnctypeFromString(submitter?.getAttribute(\"formenctype\") || formElement.enctype)\n}\n\nclass Snapshot {\n  constructor(element) {\n    this.element = element;\n  }\n\n  get activeElement() {\n    return this.element.ownerDocument.activeElement\n  }\n\n  get children() {\n    return [...this.element.children]\n  }\n\n  hasAnchor(anchor) {\n    return this.getElementForAnchor(anchor) != null\n  }\n\n  getElementForAnchor(anchor) {\n    return anchor ? this.element.querySelector(`[id='${anchor}'], a[name='${anchor}']`) : null\n  }\n\n  get isConnected() {\n    return this.element.isConnected\n  }\n\n  get firstAutofocusableElement() {\n    return queryAutofocusableElement(this.element)\n  }\n\n  get permanentElements() {\n    return queryPermanentElementsAll(this.element)\n  }\n\n  getPermanentElementById(id) {\n    return getPermanentElementById(this.element, id)\n  }\n\n  getPermanentElementMapForSnapshot(snapshot) {\n    const permanentElementMap = {};\n\n    for (const currentPermanentElement of this.permanentElements) {\n      const { id } = currentPermanentElement;\n      const newPermanentElement = snapshot.getPermanentElementById(id);\n      if (newPermanentElement) {\n        permanentElementMap[id] = [currentPermanentElement, newPermanentElement];\n      }\n    }\n\n    return permanentElementMap\n  }\n}\n\nfunction getPermanentElementById(node, id) {\n  return node.querySelector(`#${id}[data-turbo-permanent]`)\n}\n\nfunction queryPermanentElementsAll(node) {\n  return node.querySelectorAll(\"[id][data-turbo-permanent]\")\n}\n\nclass FormSubmitObserver {\n  started = false\n\n  constructor(delegate, eventTarget) {\n    this.delegate = delegate;\n    this.eventTarget = eventTarget;\n  }\n\n  start() {\n    if (!this.started) {\n      this.eventTarget.addEventListener(\"submit\", this.submitCaptured, true);\n      this.started = true;\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.eventTarget.removeEventListener(\"submit\", this.submitCaptured, true);\n      this.started = false;\n    }\n  }\n\n  submitCaptured = () => {\n    this.eventTarget.removeEventListener(\"submit\", this.submitBubbled, false);\n    this.eventTarget.addEventListener(\"submit\", this.submitBubbled, false);\n  }\n\n  submitBubbled = (event) => {\n    if (!event.defaultPrevented) {\n      const form = event.target instanceof HTMLFormElement ? event.target : undefined;\n      const submitter = event.submitter || undefined;\n\n      if (\n        form &&\n        submissionDoesNotDismissDialog(form, submitter) &&\n        submissionDoesNotTargetIFrame(form, submitter) &&\n        this.delegate.willSubmitForm(form, submitter)\n      ) {\n        event.preventDefault();\n        event.stopImmediatePropagation();\n        this.delegate.formSubmitted(form, submitter);\n      }\n    }\n  }\n}\n\nfunction submissionDoesNotDismissDialog(form, submitter) {\n  const method = submitter?.getAttribute(\"formmethod\") || form.getAttribute(\"method\");\n\n  return method != \"dialog\"\n}\n\nfunction submissionDoesNotTargetIFrame(form, submitter) {\n  const target = submitter?.getAttribute(\"formtarget\") || form.getAttribute(\"target\");\n\n  return doesNotTargetIFrame(target)\n}\n\nclass View {\n  #resolveRenderPromise = (_value) => {}\n  #resolveInterceptionPromise = (_value) => {}\n\n  constructor(delegate, element) {\n    this.delegate = delegate;\n    this.element = element;\n  }\n\n  // Scrolling\n\n  scrollToAnchor(anchor) {\n    const element = this.snapshot.getElementForAnchor(anchor);\n    if (element) {\n      this.focusElement(element);\n      this.scrollToElement(element);\n    } else {\n      this.scrollToPosition({ x: 0, y: 0 });\n    }\n  }\n\n  scrollToAnchorFromLocation(location) {\n    this.scrollToAnchor(getAnchor(location));\n  }\n\n  scrollToElement(element) {\n    element.scrollIntoView();\n  }\n\n  focusElement(element) {\n    if (element instanceof HTMLElement) {\n      if (element.hasAttribute(\"tabindex\")) {\n        element.focus();\n      } else {\n        element.setAttribute(\"tabindex\", \"-1\");\n        element.focus();\n        element.removeAttribute(\"tabindex\");\n      }\n    }\n  }\n\n  scrollToPosition({ x, y }) {\n    this.scrollRoot.scrollTo(x, y);\n  }\n\n  scrollToTop() {\n    this.scrollToPosition({ x: 0, y: 0 });\n  }\n\n  get scrollRoot() {\n    return window\n  }\n\n  // Rendering\n\n  async render(renderer) {\n    const { isPreview, shouldRender, willRender, newSnapshot: snapshot } = renderer;\n\n    // A workaround to ignore tracked element mismatch reloads when performing\n    // a promoted Visit from a frame navigation\n    const shouldInvalidate = willRender;\n\n    if (shouldRender) {\n      try {\n        this.renderPromise = new Promise((resolve) => (this.#resolveRenderPromise = resolve));\n        this.renderer = renderer;\n        await this.prepareToRenderSnapshot(renderer);\n\n        const renderInterception = new Promise((resolve) => (this.#resolveInterceptionPromise = resolve));\n        const options = { resume: this.#resolveInterceptionPromise, render: this.renderer.renderElement, renderMethod: this.renderer.renderMethod };\n        const immediateRender = this.delegate.allowsImmediateRender(snapshot, options);\n        if (!immediateRender) await renderInterception;\n\n        await this.renderSnapshot(renderer);\n        this.delegate.viewRenderedSnapshot(snapshot, isPreview, this.renderer.renderMethod);\n        this.delegate.preloadOnLoadLinksForView(this.element);\n        this.finishRenderingSnapshot(renderer);\n      } finally {\n        delete this.renderer;\n        this.#resolveRenderPromise(undefined);\n        delete this.renderPromise;\n      }\n    } else if (shouldInvalidate) {\n      this.invalidate(renderer.reloadReason);\n    }\n  }\n\n  invalidate(reason) {\n    this.delegate.viewInvalidated(reason);\n  }\n\n  async prepareToRenderSnapshot(renderer) {\n    this.markAsPreview(renderer.isPreview);\n    await renderer.prepareToRender();\n  }\n\n  markAsPreview(isPreview) {\n    if (isPreview) {\n      this.element.setAttribute(\"data-turbo-preview\", \"\");\n    } else {\n      this.element.removeAttribute(\"data-turbo-preview\");\n    }\n  }\n\n  markVisitDirection(direction) {\n    this.element.setAttribute(\"data-turbo-visit-direction\", direction);\n  }\n\n  unmarkVisitDirection() {\n    this.element.removeAttribute(\"data-turbo-visit-direction\");\n  }\n\n  async renderSnapshot(renderer) {\n    await renderer.render();\n  }\n\n  finishRenderingSnapshot(renderer) {\n    renderer.finishRendering();\n  }\n}\n\nclass FrameView extends View {\n  missing() {\n    this.element.innerHTML = `<strong class=\"turbo-frame-error\">Content missing</strong>`;\n  }\n\n  get snapshot() {\n    return new Snapshot(this.element)\n  }\n}\n\nclass LinkInterceptor {\n  constructor(delegate, element) {\n    this.delegate = delegate;\n    this.element = element;\n  }\n\n  start() {\n    this.element.addEventListener(\"click\", this.clickBubbled);\n    document.addEventListener(\"turbo:click\", this.linkClicked);\n    document.addEventListener(\"turbo:before-visit\", this.willVisit);\n  }\n\n  stop() {\n    this.element.removeEventListener(\"click\", this.clickBubbled);\n    document.removeEventListener(\"turbo:click\", this.linkClicked);\n    document.removeEventListener(\"turbo:before-visit\", this.willVisit);\n  }\n\n  clickBubbled = (event) => {\n    if (this.clickEventIsSignificant(event)) {\n      this.clickEvent = event;\n    } else {\n      delete this.clickEvent;\n    }\n  }\n\n  linkClicked = (event) => {\n    if (this.clickEvent && this.clickEventIsSignificant(event)) {\n      if (this.delegate.shouldInterceptLinkClick(event.target, event.detail.url, event.detail.originalEvent)) {\n        this.clickEvent.preventDefault();\n        event.preventDefault();\n        this.delegate.linkClickIntercepted(event.target, event.detail.url, event.detail.originalEvent);\n      }\n    }\n    delete this.clickEvent;\n  }\n\n  willVisit = (_event) => {\n    delete this.clickEvent;\n  }\n\n  clickEventIsSignificant(event) {\n    const target = event.composed ? event.target?.parentElement : event.target;\n    const element = findLinkFromClickTarget(target) || target;\n\n    return element instanceof Element && element.closest(\"turbo-frame, html\") == this.element\n  }\n}\n\nclass LinkClickObserver {\n  started = false\n\n  constructor(delegate, eventTarget) {\n    this.delegate = delegate;\n    this.eventTarget = eventTarget;\n  }\n\n  start() {\n    if (!this.started) {\n      this.eventTarget.addEventListener(\"click\", this.clickCaptured, true);\n      this.started = true;\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.eventTarget.removeEventListener(\"click\", this.clickCaptured, true);\n      this.started = false;\n    }\n  }\n\n  clickCaptured = () => {\n    this.eventTarget.removeEventListener(\"click\", this.clickBubbled, false);\n    this.eventTarget.addEventListener(\"click\", this.clickBubbled, false);\n  }\n\n  clickBubbled = (event) => {\n    if (event instanceof MouseEvent && this.clickEventIsSignificant(event)) {\n      const target = (event.composedPath && event.composedPath()[0]) || event.target;\n      const link = findLinkFromClickTarget(target);\n      if (link && doesNotTargetIFrame(link.target)) {\n        const location = getLocationForLink(link);\n        if (this.delegate.willFollowLinkToLocation(link, location, event)) {\n          event.preventDefault();\n          this.delegate.followedLinkToLocation(link, location);\n        }\n      }\n    }\n  }\n\n  clickEventIsSignificant(event) {\n    return !(\n      (event.target && event.target.isContentEditable) ||\n      event.defaultPrevented ||\n      event.which > 1 ||\n      event.altKey ||\n      event.ctrlKey ||\n      event.metaKey ||\n      event.shiftKey\n    )\n  }\n}\n\nclass FormLinkClickObserver {\n  constructor(delegate, element) {\n    this.delegate = delegate;\n    this.linkInterceptor = new LinkClickObserver(this, element);\n  }\n\n  start() {\n    this.linkInterceptor.start();\n  }\n\n  stop() {\n    this.linkInterceptor.stop();\n  }\n\n  // Link hover observer delegate\n\n  canPrefetchRequestToLocation(link, location) {\n    return false\n  }\n\n  prefetchAndCacheRequestToLocation(link, location) {\n    return\n  }\n\n  // Link click observer delegate\n\n  willFollowLinkToLocation(link, location, originalEvent) {\n    return (\n      this.delegate.willSubmitFormLinkToLocation(link, location, originalEvent) &&\n      (link.hasAttribute(\"data-turbo-method\") || link.hasAttribute(\"data-turbo-stream\"))\n    )\n  }\n\n  followedLinkToLocation(link, location) {\n    const form = document.createElement(\"form\");\n\n    const type = \"hidden\";\n    for (const [name, value] of location.searchParams) {\n      form.append(Object.assign(document.createElement(\"input\"), { type, name, value }));\n    }\n\n    const action = Object.assign(location, { search: \"\" });\n    form.setAttribute(\"data-turbo\", \"true\");\n    form.setAttribute(\"action\", action.href);\n    form.setAttribute(\"hidden\", \"\");\n\n    const method = link.getAttribute(\"data-turbo-method\");\n    if (method) form.setAttribute(\"method\", method);\n\n    const turboFrame = link.getAttribute(\"data-turbo-frame\");\n    if (turboFrame) form.setAttribute(\"data-turbo-frame\", turboFrame);\n\n    const turboAction = getVisitAction(link);\n    if (turboAction) form.setAttribute(\"data-turbo-action\", turboAction);\n\n    const turboConfirm = link.getAttribute(\"data-turbo-confirm\");\n    if (turboConfirm) form.setAttribute(\"data-turbo-confirm\", turboConfirm);\n\n    const turboStream = link.hasAttribute(\"data-turbo-stream\");\n    if (turboStream) form.setAttribute(\"data-turbo-stream\", \"\");\n\n    this.delegate.submittedFormLinkToLocation(link, location, form);\n\n    document.body.appendChild(form);\n    form.addEventListener(\"turbo:submit-end\", () => form.remove(), { once: true });\n    requestAnimationFrame(() => form.requestSubmit());\n  }\n}\n\nclass Bardo {\n  static async preservingPermanentElements(delegate, permanentElementMap, callback) {\n    const bardo = new this(delegate, permanentElementMap);\n    bardo.enter();\n    await callback();\n    bardo.leave();\n  }\n\n  constructor(delegate, permanentElementMap) {\n    this.delegate = delegate;\n    this.permanentElementMap = permanentElementMap;\n  }\n\n  enter() {\n    for (const id in this.permanentElementMap) {\n      const [currentPermanentElement, newPermanentElement] = this.permanentElementMap[id];\n      this.delegate.enteringBardo(currentPermanentElement, newPermanentElement);\n      this.replaceNewPermanentElementWithPlaceholder(newPermanentElement);\n    }\n  }\n\n  leave() {\n    for (const id in this.permanentElementMap) {\n      const [currentPermanentElement] = this.permanentElementMap[id];\n      this.replaceCurrentPermanentElementWithClone(currentPermanentElement);\n      this.replacePlaceholderWithPermanentElement(currentPermanentElement);\n      this.delegate.leavingBardo(currentPermanentElement);\n    }\n  }\n\n  replaceNewPermanentElementWithPlaceholder(permanentElement) {\n    const placeholder = createPlaceholderForPermanentElement(permanentElement);\n    permanentElement.replaceWith(placeholder);\n  }\n\n  replaceCurrentPermanentElementWithClone(permanentElement) {\n    const clone = permanentElement.cloneNode(true);\n    permanentElement.replaceWith(clone);\n  }\n\n  replacePlaceholderWithPermanentElement(permanentElement) {\n    const placeholder = this.getPlaceholderById(permanentElement.id);\n    placeholder?.replaceWith(permanentElement);\n  }\n\n  getPlaceholderById(id) {\n    return this.placeholders.find((element) => element.content == id)\n  }\n\n  get placeholders() {\n    return [...document.querySelectorAll(\"meta[name=turbo-permanent-placeholder][content]\")]\n  }\n}\n\nfunction createPlaceholderForPermanentElement(permanentElement) {\n  const element = document.createElement(\"meta\");\n  element.setAttribute(\"name\", \"turbo-permanent-placeholder\");\n  element.setAttribute(\"content\", permanentElement.id);\n  return element\n}\n\nclass Renderer {\n  #activeElement = null\n\n  static renderElement(currentElement, newElement) {\n    // Abstract method\n  }\n\n  constructor(currentSnapshot, newSnapshot, isPreview, willRender = true) {\n    this.currentSnapshot = currentSnapshot;\n    this.newSnapshot = newSnapshot;\n    this.isPreview = isPreview;\n    this.willRender = willRender;\n    this.renderElement = this.constructor.renderElement;\n    this.promise = new Promise((resolve, reject) => (this.resolvingFunctions = { resolve, reject }));\n  }\n\n  get shouldRender() {\n    return true\n  }\n\n  get shouldAutofocus() {\n    return true\n  }\n\n  get reloadReason() {\n    return\n  }\n\n  prepareToRender() {\n    return\n  }\n\n  render() {\n    // Abstract method\n  }\n\n  finishRendering() {\n    if (this.resolvingFunctions) {\n      this.resolvingFunctions.resolve();\n      delete this.resolvingFunctions;\n    }\n  }\n\n  async preservingPermanentElements(callback) {\n    await Bardo.preservingPermanentElements(this, this.permanentElementMap, callback);\n  }\n\n  focusFirstAutofocusableElement() {\n    if (this.shouldAutofocus) {\n      const element = this.connectedSnapshot.firstAutofocusableElement;\n      if (element) {\n        element.focus();\n      }\n    }\n  }\n\n  // Bardo delegate\n\n  enteringBardo(currentPermanentElement) {\n    if (this.#activeElement) return\n\n    if (currentPermanentElement.contains(this.currentSnapshot.activeElement)) {\n      this.#activeElement = this.currentSnapshot.activeElement;\n    }\n  }\n\n  leavingBardo(currentPermanentElement) {\n    if (currentPermanentElement.contains(this.#activeElement) && this.#activeElement instanceof HTMLElement) {\n      this.#activeElement.focus();\n\n      this.#activeElement = null;\n    }\n  }\n\n  get connectedSnapshot() {\n    return this.newSnapshot.isConnected ? this.newSnapshot : this.currentSnapshot\n  }\n\n  get currentElement() {\n    return this.currentSnapshot.element\n  }\n\n  get newElement() {\n    return this.newSnapshot.element\n  }\n\n  get permanentElementMap() {\n    return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)\n  }\n\n  get renderMethod() {\n    return \"replace\"\n  }\n}\n\nclass FrameRenderer extends Renderer {\n  static renderElement(currentElement, newElement) {\n    const destinationRange = document.createRange();\n    destinationRange.selectNodeContents(currentElement);\n    destinationRange.deleteContents();\n\n    const frameElement = newElement;\n    const sourceRange = frameElement.ownerDocument?.createRange();\n    if (sourceRange) {\n      sourceRange.selectNodeContents(frameElement);\n      currentElement.appendChild(sourceRange.extractContents());\n    }\n  }\n\n  constructor(delegate, currentSnapshot, newSnapshot, renderElement, isPreview, willRender = true) {\n    super(currentSnapshot, newSnapshot, renderElement, isPreview, willRender);\n    this.delegate = delegate;\n  }\n\n  get shouldRender() {\n    return true\n  }\n\n  async render() {\n    await nextRepaint();\n    this.preservingPermanentElements(() => {\n      this.loadFrameElement();\n    });\n    this.scrollFrameIntoView();\n    await nextRepaint();\n    this.focusFirstAutofocusableElement();\n    await nextRepaint();\n    this.activateScriptElements();\n  }\n\n  loadFrameElement() {\n    this.delegate.willRenderFrame(this.currentElement, this.newElement);\n    this.renderElement(this.currentElement, this.newElement);\n  }\n\n  scrollFrameIntoView() {\n    if (this.currentElement.autoscroll || this.newElement.autoscroll) {\n      const element = this.currentElement.firstElementChild;\n      const block = readScrollLogicalPosition(this.currentElement.getAttribute(\"data-autoscroll-block\"), \"end\");\n      const behavior = readScrollBehavior(this.currentElement.getAttribute(\"data-autoscroll-behavior\"), \"auto\");\n\n      if (element) {\n        element.scrollIntoView({ block, behavior });\n        return true\n      }\n    }\n    return false\n  }\n\n  activateScriptElements() {\n    for (const inertScriptElement of this.newScriptElements) {\n      const activatedScriptElement = activateScriptElement(inertScriptElement);\n      inertScriptElement.replaceWith(activatedScriptElement);\n    }\n  }\n\n  get newScriptElements() {\n    return this.currentElement.querySelectorAll(\"script\")\n  }\n}\n\nfunction readScrollLogicalPosition(value, defaultValue) {\n  if (value == \"end\" || value == \"start\" || value == \"center\" || value == \"nearest\") {\n    return value\n  } else {\n    return defaultValue\n  }\n}\n\nfunction readScrollBehavior(value, defaultValue) {\n  if (value == \"auto\" || value == \"smooth\") {\n    return value\n  } else {\n    return defaultValue\n  }\n}\n\n/**\n * @typedef {object} ConfigHead\n *\n * @property {'merge' | 'append' | 'morph' | 'none'} [style]\n * @property {boolean} [block]\n * @property {boolean} [ignore]\n * @property {function(Element): boolean} [shouldPreserve]\n * @property {function(Element): boolean} [shouldReAppend]\n * @property {function(Element): boolean} [shouldRemove]\n * @property {function(Element, {added: Node[], kept: Element[], removed: Element[]}): void} [afterHeadMorphed]\n */\n\n/**\n * @typedef {object} ConfigCallbacks\n *\n * @property {function(Node): boolean} [beforeNodeAdded]\n * @property {function(Node): void} [afterNodeAdded]\n * @property {function(Element, Node): boolean} [beforeNodeMorphed]\n * @property {function(Element, Node): void} [afterNodeMorphed]\n * @property {function(Element): boolean} [beforeNodeRemoved]\n * @property {function(Element): void} [afterNodeRemoved]\n * @property {function(string, Element, \"update\" | \"remove\"): boolean} [beforeAttributeUpdated]\n */\n\n/**\n * @typedef {object} Config\n *\n * @property {'outerHTML' | 'innerHTML'} [morphStyle]\n * @property {boolean} [ignoreActive]\n * @property {boolean} [ignoreActiveValue]\n * @property {boolean} [restoreFocus]\n * @property {ConfigCallbacks} [callbacks]\n * @property {ConfigHead} [head]\n */\n\n/**\n * @typedef {function} NoOp\n *\n * @returns {void}\n */\n\n/**\n * @typedef {object} ConfigHeadInternal\n *\n * @property {'merge' | 'append' | 'morph' | 'none'} style\n * @property {boolean} [block]\n * @property {boolean} [ignore]\n * @property {(function(Element): boolean) | NoOp} shouldPreserve\n * @property {(function(Element): boolean) | NoOp} shouldReAppend\n * @property {(function(Element): boolean) | NoOp} shouldRemove\n * @property {(function(Element, {added: Node[], kept: Element[], removed: Element[]}): void) | NoOp} afterHeadMorphed\n */\n\n/**\n * @typedef {object} ConfigCallbacksInternal\n *\n * @property {(function(Node): boolean) | NoOp} beforeNodeAdded\n * @property {(function(Node): void) | NoOp} afterNodeAdded\n * @property {(function(Node, Node): boolean) | NoOp} beforeNodeMorphed\n * @property {(function(Node, Node): void) | NoOp} afterNodeMorphed\n * @property {(function(Node): boolean) | NoOp} beforeNodeRemoved\n * @property {(function(Node): void) | NoOp} afterNodeRemoved\n * @property {(function(string, Element, \"update\" | \"remove\"): boolean) | NoOp} beforeAttributeUpdated\n */\n\n/**\n * @typedef {object} ConfigInternal\n *\n * @property {'outerHTML' | 'innerHTML'} morphStyle\n * @property {boolean} [ignoreActive]\n * @property {boolean} [ignoreActiveValue]\n * @property {boolean} [restoreFocus]\n * @property {ConfigCallbacksInternal} callbacks\n * @property {ConfigHeadInternal} head\n */\n\n/**\n * @typedef {Object} IdSets\n * @property {Set<string>} persistentIds\n * @property {Map<Node, Set<string>>} idMap\n */\n\n/**\n * @typedef {Function} Morph\n *\n * @param {Element | Document} oldNode\n * @param {Element | Node | HTMLCollection | Node[] | string | null} newContent\n * @param {Config} [config]\n * @returns {undefined | Node[]}\n */\n\n// base IIFE to define idiomorph\n/**\n *\n * @type {{defaults: ConfigInternal, morph: Morph}}\n */\nvar Idiomorph = (function () {\n\n  /**\n   * @typedef {object} MorphContext\n   *\n   * @property {Element} target\n   * @property {Element} newContent\n   * @property {ConfigInternal} config\n   * @property {ConfigInternal['morphStyle']} morphStyle\n   * @property {ConfigInternal['ignoreActive']} ignoreActive\n   * @property {ConfigInternal['ignoreActiveValue']} ignoreActiveValue\n   * @property {ConfigInternal['restoreFocus']} restoreFocus\n   * @property {Map<Node, Set<string>>} idMap\n   * @property {Set<string>} persistentIds\n   * @property {ConfigInternal['callbacks']} callbacks\n   * @property {ConfigInternal['head']} head\n   * @property {HTMLDivElement} pantry\n   * @property {Element[]} activeElementAndParents\n   */\n\n  //=============================================================================\n  // AND NOW IT BEGINS...\n  //=============================================================================\n\n  const noOp = () => {};\n  /**\n   * Default configuration values, updatable by users now\n   * @type {ConfigInternal}\n   */\n  const defaults = {\n    morphStyle: \"outerHTML\",\n    callbacks: {\n      beforeNodeAdded: noOp,\n      afterNodeAdded: noOp,\n      beforeNodeMorphed: noOp,\n      afterNodeMorphed: noOp,\n      beforeNodeRemoved: noOp,\n      afterNodeRemoved: noOp,\n      beforeAttributeUpdated: noOp,\n    },\n    head: {\n      style: \"merge\",\n      shouldPreserve: (elt) => elt.getAttribute(\"im-preserve\") === \"true\",\n      shouldReAppend: (elt) => elt.getAttribute(\"im-re-append\") === \"true\",\n      shouldRemove: noOp,\n      afterHeadMorphed: noOp,\n    },\n    restoreFocus: true,\n  };\n\n  /**\n   * Core idiomorph function for morphing one DOM tree to another\n   *\n   * @param {Element | Document} oldNode\n   * @param {Element | Node | HTMLCollection | Node[] | string | null} newContent\n   * @param {Config} [config]\n   * @returns {Promise<Node[]> | Node[]}\n   */\n  function morph(oldNode, newContent, config = {}) {\n    oldNode = normalizeElement(oldNode);\n    const newNode = normalizeParent(newContent);\n    const ctx = createMorphContext(oldNode, newNode, config);\n\n    const morphedNodes = saveAndRestoreFocus(ctx, () => {\n      return withHeadBlocking(\n        ctx,\n        oldNode,\n        newNode,\n        /** @param {MorphContext} ctx */ (ctx) => {\n          if (ctx.morphStyle === \"innerHTML\") {\n            morphChildren(ctx, oldNode, newNode);\n            return Array.from(oldNode.childNodes);\n          } else {\n            return morphOuterHTML(ctx, oldNode, newNode);\n          }\n        },\n      );\n    });\n\n    ctx.pantry.remove();\n    return morphedNodes;\n  }\n\n  /**\n   * Morph just the outerHTML of the oldNode to the newContent\n   * We have to be careful because the oldNode could have siblings which need to be untouched\n   * @param {MorphContext} ctx\n   * @param {Element} oldNode\n   * @param {Element} newNode\n   * @returns {Node[]}\n   */\n  function morphOuterHTML(ctx, oldNode, newNode) {\n    const oldParent = normalizeParent(oldNode);\n    morphChildren(\n      ctx,\n      oldParent,\n      newNode,\n      // these two optional params are the secret sauce\n      oldNode, // start point for iteration\n      oldNode.nextSibling, // end point for iteration\n    );\n    // this is safe even with siblings, because normalizeParent returns a SlicedParentNode if needed.\n    return Array.from(oldParent.childNodes);\n  }\n\n  /**\n   * @param {MorphContext} ctx\n   * @param {Function} fn\n   * @returns {Promise<Node[]> | Node[]}\n   */\n  function saveAndRestoreFocus(ctx, fn) {\n    if (!ctx.config.restoreFocus) return fn();\n    let activeElement =\n      /** @type {HTMLInputElement|HTMLTextAreaElement|null} */ (\n        document.activeElement\n      );\n\n    // don't bother if the active element is not an input or textarea\n    if (\n      !(\n        activeElement instanceof HTMLInputElement ||\n        activeElement instanceof HTMLTextAreaElement\n      )\n    ) {\n      return fn();\n    }\n\n    const { id: activeElementId, selectionStart, selectionEnd } = activeElement;\n\n    const results = fn();\n\n    if (\n      activeElementId &&\n      activeElementId !== document.activeElement?.getAttribute(\"id\")\n    ) {\n      activeElement = ctx.target.querySelector(`[id=\"${activeElementId}\"]`);\n      activeElement?.focus();\n    }\n    if (activeElement && !activeElement.selectionEnd && selectionEnd) {\n      activeElement.setSelectionRange(selectionStart, selectionEnd);\n    }\n\n    return results;\n  }\n\n  const morphChildren = (function () {\n    /**\n     * This is the core algorithm for matching up children.  The idea is to use id sets to try to match up\n     * nodes as faithfully as possible.  We greedily match, which allows us to keep the algorithm fast, but\n     * by using id sets, we are able to better match up with content deeper in the DOM.\n     *\n     * Basic algorithm:\n     * - for each node in the new content:\n     *   - search self and siblings for an id set match, falling back to a soft match\n     *   - if match found\n     *     - remove any nodes up to the match:\n     *       - pantry persistent nodes\n     *       - delete the rest\n     *     - morph the match\n     *   - elsif no match found, and node is persistent\n     *     - find its match by querying the old root (future) and pantry (past)\n     *     - move it and its children here\n     *     - morph it\n     *   - else\n     *     - create a new node from scratch as a last result\n     *\n     * @param {MorphContext} ctx the merge context\n     * @param {Element} oldParent the old content that we are merging the new content into\n     * @param {Element} newParent the parent element of the new content\n     * @param {Node|null} [insertionPoint] the point in the DOM we start morphing at (defaults to first child)\n     * @param {Node|null} [endPoint] the point in the DOM we stop morphing at (defaults to after last child)\n     */\n    function morphChildren(\n      ctx,\n      oldParent,\n      newParent,\n      insertionPoint = null,\n      endPoint = null,\n    ) {\n      // normalize\n      if (\n        oldParent instanceof HTMLTemplateElement &&\n        newParent instanceof HTMLTemplateElement\n      ) {\n        // @ts-ignore we can pretend the DocumentFragment is an Element\n        oldParent = oldParent.content;\n        // @ts-ignore ditto\n        newParent = newParent.content;\n      }\n      insertionPoint ||= oldParent.firstChild;\n\n      // run through all the new content\n      for (const newChild of newParent.childNodes) {\n        // once we reach the end of the old parent content skip to the end and insert the rest\n        if (insertionPoint && insertionPoint != endPoint) {\n          const bestMatch = findBestMatch(\n            ctx,\n            newChild,\n            insertionPoint,\n            endPoint,\n          );\n          if (bestMatch) {\n            // if the node to morph is not at the insertion point then remove/move up to it\n            if (bestMatch !== insertionPoint) {\n              removeNodesBetween(ctx, insertionPoint, bestMatch);\n            }\n            morphNode(bestMatch, newChild, ctx);\n            insertionPoint = bestMatch.nextSibling;\n            continue;\n          }\n        }\n\n        // if the matching node is elsewhere in the original content\n        if (newChild instanceof Element) {\n          // we can pretend the id is non-null because the next `.has` line will reject it if not\n          const newChildId = /** @type {String} */ (\n            newChild.getAttribute(\"id\")\n          );\n          if (ctx.persistentIds.has(newChildId)) {\n            // move it and all its children here and morph\n            const movedChild = moveBeforeById(\n              oldParent,\n              newChildId,\n              insertionPoint,\n              ctx,\n            );\n            morphNode(movedChild, newChild, ctx);\n            insertionPoint = movedChild.nextSibling;\n            continue;\n          }\n        }\n\n        // last resort: insert the new node from scratch\n        const insertedNode = createNode(\n          oldParent,\n          newChild,\n          insertionPoint,\n          ctx,\n        );\n        // could be null if beforeNodeAdded prevented insertion\n        if (insertedNode) {\n          insertionPoint = insertedNode.nextSibling;\n        }\n      }\n\n      // remove any remaining old nodes that didn't match up with new content\n      while (insertionPoint && insertionPoint != endPoint) {\n        const tempNode = insertionPoint;\n        insertionPoint = insertionPoint.nextSibling;\n        removeNode(ctx, tempNode);\n      }\n    }\n\n    /**\n     * This performs the action of inserting a new node while handling situations where the node contains\n     * elements with persistent ids and possible state info we can still preserve by moving in and then morphing\n     *\n     * @param {Element} oldParent\n     * @param {Node} newChild\n     * @param {Node|null} insertionPoint\n     * @param {MorphContext} ctx\n     * @returns {Node|null}\n     */\n    function createNode(oldParent, newChild, insertionPoint, ctx) {\n      if (ctx.callbacks.beforeNodeAdded(newChild) === false) return null;\n      if (ctx.idMap.has(newChild)) {\n        // node has children with ids with possible state so create a dummy elt of same type and apply full morph algorithm\n        const newEmptyChild = document.createElement(\n          /** @type {Element} */ (newChild).tagName,\n        );\n        oldParent.insertBefore(newEmptyChild, insertionPoint);\n        morphNode(newEmptyChild, newChild, ctx);\n        ctx.callbacks.afterNodeAdded(newEmptyChild);\n        return newEmptyChild;\n      } else {\n        // optimisation: no id state to preserve so we can just insert a clone of the newChild and its descendants\n        const newClonedChild = document.importNode(newChild, true); // importNode to not mutate newParent\n        oldParent.insertBefore(newClonedChild, insertionPoint);\n        ctx.callbacks.afterNodeAdded(newClonedChild);\n        return newClonedChild;\n      }\n    }\n\n    //=============================================================================\n    // Matching Functions\n    //=============================================================================\n    const findBestMatch = (function () {\n      /**\n       * Scans forward from the startPoint to the endPoint looking for a match\n       * for the node. It looks for an id set match first, then a soft match.\n       * We abort softmatching if we find two future soft matches, to reduce churn.\n       * @param {Node} node\n       * @param {MorphContext} ctx\n       * @param {Node | null} startPoint\n       * @param {Node | null} endPoint\n       * @returns {Node | null}\n       */\n      function findBestMatch(ctx, node, startPoint, endPoint) {\n        let softMatch = null;\n        let nextSibling = node.nextSibling;\n        let siblingSoftMatchCount = 0;\n\n        let cursor = startPoint;\n        while (cursor && cursor != endPoint) {\n          // soft matching is a prerequisite for id set matching\n          if (isSoftMatch(cursor, node)) {\n            if (isIdSetMatch(ctx, cursor, node)) {\n              return cursor; // found an id set match, we're done!\n            }\n\n            // we haven't yet saved a soft match fallback\n            if (softMatch === null) {\n              // the current soft match will hard match something else in the future, leave it\n              if (!ctx.idMap.has(cursor)) {\n                // save this as the fallback if we get through the loop without finding a hard match\n                softMatch = cursor;\n              }\n            }\n          }\n          if (\n            softMatch === null &&\n            nextSibling &&\n            isSoftMatch(cursor, nextSibling)\n          ) {\n            // The next new node has a soft match with this node, so\n            // increment the count of future soft matches\n            siblingSoftMatchCount++;\n            nextSibling = nextSibling.nextSibling;\n\n            // If there are two future soft matches, block soft matching for this node to allow\n            // future siblings to soft match. This is to reduce churn in the DOM when an element\n            // is prepended.\n            if (siblingSoftMatchCount >= 2) {\n              softMatch = undefined;\n            }\n          }\n\n          // if the current node contains active element, stop looking for better future matches,\n          // because if one is found, this node will be moved to the pantry, reparenting it and thus losing focus\n          // @ts-ignore pretend cursor is Element rather than Node, we're just testing for array inclusion\n          if (ctx.activeElementAndParents.includes(cursor)) break;\n\n          cursor = cursor.nextSibling;\n        }\n\n        return softMatch || null;\n      }\n\n      /**\n       *\n       * @param {MorphContext} ctx\n       * @param {Node} oldNode\n       * @param {Node} newNode\n       * @returns {boolean}\n       */\n      function isIdSetMatch(ctx, oldNode, newNode) {\n        let oldSet = ctx.idMap.get(oldNode);\n        let newSet = ctx.idMap.get(newNode);\n\n        if (!newSet || !oldSet) return false;\n\n        for (const id of oldSet) {\n          // a potential match is an id in the new and old nodes that\n          // has not already been merged into the DOM\n          // But the newNode content we call this on has not been\n          // merged yet and we don't allow duplicate IDs so it is simple\n          if (newSet.has(id)) {\n            return true;\n          }\n        }\n        return false;\n      }\n\n      /**\n       *\n       * @param {Node} oldNode\n       * @param {Node} newNode\n       * @returns {boolean}\n       */\n      function isSoftMatch(oldNode, newNode) {\n        // ok to cast: if one is not element, `id` and `tagName` will be undefined and we'll just compare that.\n        const oldElt = /** @type {Element} */ (oldNode);\n        const newElt = /** @type {Element} */ (newNode);\n\n        return (\n          oldElt.nodeType === newElt.nodeType &&\n          oldElt.tagName === newElt.tagName &&\n          // If oldElt has an `id` with possible state and it doesn't match newElt.id then avoid morphing.\n          // We'll still match an anonymous node with an IDed newElt, though, because if it got this far,\n          // its not persistent, and new nodes can't have any hidden state.\n          // We can't use .id because of form input shadowing, and we can't count on .getAttribute's presence because it could be a document-fragment\n          (!oldElt.getAttribute?.(\"id\") ||\n            oldElt.getAttribute?.(\"id\") === newElt.getAttribute?.(\"id\"))\n        );\n      }\n\n      return findBestMatch;\n    })();\n\n    //=============================================================================\n    // DOM Manipulation Functions\n    //=============================================================================\n\n    /**\n     * Gets rid of an unwanted DOM node; strategy depends on nature of its reuse:\n     * - Persistent nodes will be moved to the pantry for later reuse\n     * - Other nodes will have their hooks called, and then are removed\n     * @param {MorphContext} ctx\n     * @param {Node} node\n     */\n    function removeNode(ctx, node) {\n      // are we going to id set match this later?\n      if (ctx.idMap.has(node)) {\n        // skip callbacks and move to pantry\n        moveBefore(ctx.pantry, node, null);\n      } else {\n        // remove for realsies\n        if (ctx.callbacks.beforeNodeRemoved(node) === false) return;\n        node.parentNode?.removeChild(node);\n        ctx.callbacks.afterNodeRemoved(node);\n      }\n    }\n\n    /**\n     * Remove nodes between the start and end nodes\n     * @param {MorphContext} ctx\n     * @param {Node} startInclusive\n     * @param {Node} endExclusive\n     * @returns {Node|null}\n     */\n    function removeNodesBetween(ctx, startInclusive, endExclusive) {\n      /** @type {Node | null} */\n      let cursor = startInclusive;\n      // remove nodes until the endExclusive node\n      while (cursor && cursor !== endExclusive) {\n        let tempNode = /** @type {Node} */ (cursor);\n        cursor = cursor.nextSibling;\n        removeNode(ctx, tempNode);\n      }\n      return cursor;\n    }\n\n    /**\n     * Search for an element by id within the document and pantry, and move it using moveBefore.\n     *\n     * @param {Element} parentNode - The parent node to which the element will be moved.\n     * @param {string} id - The ID of the element to be moved.\n     * @param {Node | null} after - The reference node to insert the element before.\n     *                              If `null`, the element is appended as the last child.\n     * @param {MorphContext} ctx\n     * @returns {Element} The found element\n     */\n    function moveBeforeById(parentNode, id, after, ctx) {\n      const target =\n        /** @type {Element} - will always be found */\n        (\n          // ctx.target.id unsafe because of form input shadowing\n          // ctx.target could be a document fragment which doesn't have `getAttribute`\n          (ctx.target.getAttribute?.(\"id\") === id && ctx.target) ||\n            ctx.target.querySelector(`[id=\"${id}\"]`) ||\n            ctx.pantry.querySelector(`[id=\"${id}\"]`)\n        );\n      removeElementFromAncestorsIdMaps(target, ctx);\n      moveBefore(parentNode, target, after);\n      return target;\n    }\n\n    /**\n     * Removes an element from its ancestors' id maps. This is needed when an element is moved from the\n     * \"future\" via `moveBeforeId`. Otherwise, its erstwhile ancestors could be mistakenly moved to the\n     * pantry rather than being deleted, preventing their removal hooks from being called.\n     *\n     * @param {Element} element - element to remove from its ancestors' id maps\n     * @param {MorphContext} ctx\n     */\n    function removeElementFromAncestorsIdMaps(element, ctx) {\n      // we know id is non-null String, because this function is only called on elements with ids\n      const id = /** @type {String} */ (element.getAttribute(\"id\"));\n      /** @ts-ignore - safe to loop in this way **/\n      while ((element = element.parentNode)) {\n        let idSet = ctx.idMap.get(element);\n        if (idSet) {\n          idSet.delete(id);\n          if (!idSet.size) {\n            ctx.idMap.delete(element);\n          }\n        }\n      }\n    }\n\n    /**\n     * Moves an element before another element within the same parent.\n     * Uses the proposed `moveBefore` API if available (and working), otherwise falls back to `insertBefore`.\n     * This is essentialy a forward-compat wrapper.\n     *\n     * @param {Element} parentNode - The parent node containing the after element.\n     * @param {Node} element - The element to be moved.\n     * @param {Node | null} after - The reference node to insert `element` before.\n     *                              If `null`, `element` is appended as the last child.\n     */\n    function moveBefore(parentNode, element, after) {\n      // @ts-ignore - use proposed moveBefore feature\n      if (parentNode.moveBefore) {\n        try {\n          // @ts-ignore - use proposed moveBefore feature\n          parentNode.moveBefore(element, after);\n        } catch (e) {\n          // fall back to insertBefore as some browsers may fail on moveBefore when trying to move Dom disconnected nodes to pantry\n          parentNode.insertBefore(element, after);\n        }\n      } else {\n        parentNode.insertBefore(element, after);\n      }\n    }\n\n    return morphChildren;\n  })();\n\n  //=============================================================================\n  // Single Node Morphing Code\n  //=============================================================================\n  const morphNode = (function () {\n    /**\n     * @param {Node} oldNode root node to merge content into\n     * @param {Node} newContent new content to merge\n     * @param {MorphContext} ctx the merge context\n     * @returns {Node | null} the element that ended up in the DOM\n     */\n    function morphNode(oldNode, newContent, ctx) {\n      if (ctx.ignoreActive && oldNode === document.activeElement) {\n        // don't morph focused element\n        return null;\n      }\n\n      if (ctx.callbacks.beforeNodeMorphed(oldNode, newContent) === false) {\n        return oldNode;\n      }\n\n      if (oldNode instanceof HTMLHeadElement && ctx.head.ignore) ; else if (\n        oldNode instanceof HTMLHeadElement &&\n        ctx.head.style !== \"morph\"\n      ) {\n        // ok to cast: if newContent wasn't also a <head>, it would've got caught in the `!isSoftMatch` branch above\n        handleHeadElement(\n          oldNode,\n          /** @type {HTMLHeadElement} */ (newContent),\n          ctx,\n        );\n      } else {\n        morphAttributes(oldNode, newContent, ctx);\n        if (!ignoreValueOfActiveElement(oldNode, ctx)) {\n          // @ts-ignore newContent can be a node here because .firstChild will be null\n          morphChildren(ctx, oldNode, newContent);\n        }\n      }\n      ctx.callbacks.afterNodeMorphed(oldNode, newContent);\n      return oldNode;\n    }\n\n    /**\n     * syncs the oldNode to the newNode, copying over all attributes and\n     * inner element state from the newNode to the oldNode\n     *\n     * @param {Node} oldNode the node to copy attributes & state to\n     * @param {Node} newNode the node to copy attributes & state from\n     * @param {MorphContext} ctx the merge context\n     */\n    function morphAttributes(oldNode, newNode, ctx) {\n      let type = newNode.nodeType;\n\n      // if is an element type, sync the attributes from the\n      // new node into the new node\n      if (type === 1 /* element type */) {\n        const oldElt = /** @type {Element} */ (oldNode);\n        const newElt = /** @type {Element} */ (newNode);\n\n        const oldAttributes = oldElt.attributes;\n        const newAttributes = newElt.attributes;\n        for (const newAttribute of newAttributes) {\n          if (ignoreAttribute(newAttribute.name, oldElt, \"update\", ctx)) {\n            continue;\n          }\n          if (oldElt.getAttribute(newAttribute.name) !== newAttribute.value) {\n            oldElt.setAttribute(newAttribute.name, newAttribute.value);\n          }\n        }\n        // iterate backwards to avoid skipping over items when a delete occurs\n        for (let i = oldAttributes.length - 1; 0 <= i; i--) {\n          const oldAttribute = oldAttributes[i];\n\n          // toAttributes is a live NamedNodeMap, so iteration+mutation is unsafe\n          // e.g. custom element attribute callbacks can remove other attributes\n          if (!oldAttribute) continue;\n\n          if (!newElt.hasAttribute(oldAttribute.name)) {\n            if (ignoreAttribute(oldAttribute.name, oldElt, \"remove\", ctx)) {\n              continue;\n            }\n            oldElt.removeAttribute(oldAttribute.name);\n          }\n        }\n\n        if (!ignoreValueOfActiveElement(oldElt, ctx)) {\n          syncInputValue(oldElt, newElt, ctx);\n        }\n      }\n\n      // sync text nodes\n      if (type === 8 /* comment */ || type === 3 /* text */) {\n        if (oldNode.nodeValue !== newNode.nodeValue) {\n          oldNode.nodeValue = newNode.nodeValue;\n        }\n      }\n    }\n\n    /**\n     * NB: many bothans died to bring us information:\n     *\n     *  https://github.com/patrick-steele-idem/morphdom/blob/master/src/specialElHandlers.js\n     *  https://github.com/choojs/nanomorph/blob/master/lib/morph.jsL113\n     *\n     * @param {Element} oldElement the element to sync the input value to\n     * @param {Element} newElement the element to sync the input value from\n     * @param {MorphContext} ctx the merge context\n     */\n    function syncInputValue(oldElement, newElement, ctx) {\n      if (\n        oldElement instanceof HTMLInputElement &&\n        newElement instanceof HTMLInputElement &&\n        newElement.type !== \"file\"\n      ) {\n        let newValue = newElement.value;\n        let oldValue = oldElement.value;\n\n        // sync boolean attributes\n        syncBooleanAttribute(oldElement, newElement, \"checked\", ctx);\n        syncBooleanAttribute(oldElement, newElement, \"disabled\", ctx);\n\n        if (!newElement.hasAttribute(\"value\")) {\n          if (!ignoreAttribute(\"value\", oldElement, \"remove\", ctx)) {\n            oldElement.value = \"\";\n            oldElement.removeAttribute(\"value\");\n          }\n        } else if (oldValue !== newValue) {\n          if (!ignoreAttribute(\"value\", oldElement, \"update\", ctx)) {\n            oldElement.setAttribute(\"value\", newValue);\n            oldElement.value = newValue;\n          }\n        }\n        // TODO: QUESTION(1cg): this used to only check `newElement` unlike the other branches -- why?\n        // did I break something?\n      } else if (\n        oldElement instanceof HTMLOptionElement &&\n        newElement instanceof HTMLOptionElement\n      ) {\n        syncBooleanAttribute(oldElement, newElement, \"selected\", ctx);\n      } else if (\n        oldElement instanceof HTMLTextAreaElement &&\n        newElement instanceof HTMLTextAreaElement\n      ) {\n        let newValue = newElement.value;\n        let oldValue = oldElement.value;\n        if (ignoreAttribute(\"value\", oldElement, \"update\", ctx)) {\n          return;\n        }\n        if (newValue !== oldValue) {\n          oldElement.value = newValue;\n        }\n        if (\n          oldElement.firstChild &&\n          oldElement.firstChild.nodeValue !== newValue\n        ) {\n          oldElement.firstChild.nodeValue = newValue;\n        }\n      }\n    }\n\n    /**\n     * @param {Element} oldElement element to write the value to\n     * @param {Element} newElement element to read the value from\n     * @param {string} attributeName the attribute name\n     * @param {MorphContext} ctx the merge context\n     */\n    function syncBooleanAttribute(oldElement, newElement, attributeName, ctx) {\n      // @ts-ignore this function is only used on boolean attrs that are reflected as dom properties\n      const newLiveValue = newElement[attributeName],\n        // @ts-ignore ditto\n        oldLiveValue = oldElement[attributeName];\n      if (newLiveValue !== oldLiveValue) {\n        const ignoreUpdate = ignoreAttribute(\n          attributeName,\n          oldElement,\n          \"update\",\n          ctx,\n        );\n        if (!ignoreUpdate) {\n          // update attribute's associated DOM property\n          // @ts-ignore this function is only used on boolean attrs that are reflected as dom properties\n          oldElement[attributeName] = newElement[attributeName];\n        }\n        if (newLiveValue) {\n          if (!ignoreUpdate) {\n            // https://developer.mozilla.org/en-US/docs/Glossary/Boolean/HTML\n            // this is the correct way to set a boolean attribute to \"true\"\n            oldElement.setAttribute(attributeName, \"\");\n          }\n        } else {\n          if (!ignoreAttribute(attributeName, oldElement, \"remove\", ctx)) {\n            oldElement.removeAttribute(attributeName);\n          }\n        }\n      }\n    }\n\n    /**\n     * @param {string} attr the attribute to be mutated\n     * @param {Element} element the element that is going to be updated\n     * @param {\"update\" | \"remove\"} updateType\n     * @param {MorphContext} ctx the merge context\n     * @returns {boolean} true if the attribute should be ignored, false otherwise\n     */\n    function ignoreAttribute(attr, element, updateType, ctx) {\n      if (\n        attr === \"value\" &&\n        ctx.ignoreActiveValue &&\n        element === document.activeElement\n      ) {\n        return true;\n      }\n      return (\n        ctx.callbacks.beforeAttributeUpdated(attr, element, updateType) ===\n        false\n      );\n    }\n\n    /**\n     * @param {Node} possibleActiveElement\n     * @param {MorphContext} ctx\n     * @returns {boolean}\n     */\n    function ignoreValueOfActiveElement(possibleActiveElement, ctx) {\n      return (\n        !!ctx.ignoreActiveValue &&\n        possibleActiveElement === document.activeElement &&\n        possibleActiveElement !== document.body\n      );\n    }\n\n    return morphNode;\n  })();\n\n  //=============================================================================\n  // Head Management Functions\n  //=============================================================================\n  /**\n   * @param {MorphContext} ctx\n   * @param {Element} oldNode\n   * @param {Element} newNode\n   * @param {function} callback\n   * @returns {Node[] | Promise<Node[]>}\n   */\n  function withHeadBlocking(ctx, oldNode, newNode, callback) {\n    if (ctx.head.block) {\n      const oldHead = oldNode.querySelector(\"head\");\n      const newHead = newNode.querySelector(\"head\");\n      if (oldHead && newHead) {\n        const promises = handleHeadElement(oldHead, newHead, ctx);\n        // when head promises resolve, proceed ignoring the head tag\n        return Promise.all(promises).then(() => {\n          const newCtx = Object.assign(ctx, {\n            head: {\n              block: false,\n              ignore: true,\n            },\n          });\n          return callback(newCtx);\n        });\n      }\n    }\n    // just proceed if we not head blocking\n    return callback(ctx);\n  }\n\n  /**\n   *  The HEAD tag can be handled specially, either w/ a 'merge' or 'append' style\n   *\n   * @param {Element} oldHead\n   * @param {Element} newHead\n   * @param {MorphContext} ctx\n   * @returns {Promise<void>[]}\n   */\n  function handleHeadElement(oldHead, newHead, ctx) {\n    let added = [];\n    let removed = [];\n    let preserved = [];\n    let nodesToAppend = [];\n\n    // put all new head elements into a Map, by their outerHTML\n    let srcToNewHeadNodes = new Map();\n    for (const newHeadChild of newHead.children) {\n      srcToNewHeadNodes.set(newHeadChild.outerHTML, newHeadChild);\n    }\n\n    // for each elt in the current head\n    for (const currentHeadElt of oldHead.children) {\n      // If the current head element is in the map\n      let inNewContent = srcToNewHeadNodes.has(currentHeadElt.outerHTML);\n      let isReAppended = ctx.head.shouldReAppend(currentHeadElt);\n      let isPreserved = ctx.head.shouldPreserve(currentHeadElt);\n      if (inNewContent || isPreserved) {\n        if (isReAppended) {\n          // remove the current version and let the new version replace it and re-execute\n          removed.push(currentHeadElt);\n        } else {\n          // this element already exists and should not be re-appended, so remove it from\n          // the new content map, preserving it in the DOM\n          srcToNewHeadNodes.delete(currentHeadElt.outerHTML);\n          preserved.push(currentHeadElt);\n        }\n      } else {\n        if (ctx.head.style === \"append\") {\n          // we are appending and this existing element is not new content\n          // so if and only if it is marked for re-append do we do anything\n          if (isReAppended) {\n            removed.push(currentHeadElt);\n            nodesToAppend.push(currentHeadElt);\n          }\n        } else {\n          // if this is a merge, we remove this content since it is not in the new head\n          if (ctx.head.shouldRemove(currentHeadElt) !== false) {\n            removed.push(currentHeadElt);\n          }\n        }\n      }\n    }\n\n    // Push the remaining new head elements in the Map into the\n    // nodes to append to the head tag\n    nodesToAppend.push(...srcToNewHeadNodes.values());\n\n    let promises = [];\n    for (const newNode of nodesToAppend) {\n      // TODO: This could theoretically be null, based on type\n      let newElt = /** @type {ChildNode} */ (\n        document.createRange().createContextualFragment(newNode.outerHTML)\n          .firstChild\n      );\n      if (ctx.callbacks.beforeNodeAdded(newElt) !== false) {\n        if (\n          (\"href\" in newElt && newElt.href) ||\n          (\"src\" in newElt && newElt.src)\n        ) {\n          /** @type {(result?: any) => void} */ let resolve;\n          let promise = new Promise(function (_resolve) {\n            resolve = _resolve;\n          });\n          newElt.addEventListener(\"load\", function () {\n            resolve();\n          });\n          promises.push(promise);\n        }\n        oldHead.appendChild(newElt);\n        ctx.callbacks.afterNodeAdded(newElt);\n        added.push(newElt);\n      }\n    }\n\n    // remove all removed elements, after we have appended the new elements to avoid\n    // additional network requests for things like style sheets\n    for (const removedElement of removed) {\n      if (ctx.callbacks.beforeNodeRemoved(removedElement) !== false) {\n        oldHead.removeChild(removedElement);\n        ctx.callbacks.afterNodeRemoved(removedElement);\n      }\n    }\n\n    ctx.head.afterHeadMorphed(oldHead, {\n      added: added,\n      kept: preserved,\n      removed: removed,\n    });\n    return promises;\n  }\n\n  //=============================================================================\n  // Create Morph Context Functions\n  //=============================================================================\n  const createMorphContext = (function () {\n    /**\n     *\n     * @param {Element} oldNode\n     * @param {Element} newContent\n     * @param {Config} config\n     * @returns {MorphContext}\n     */\n    function createMorphContext(oldNode, newContent, config) {\n      const { persistentIds, idMap } = createIdMaps(oldNode, newContent);\n\n      const mergedConfig = mergeDefaults(config);\n      const morphStyle = mergedConfig.morphStyle || \"outerHTML\";\n      if (![\"innerHTML\", \"outerHTML\"].includes(morphStyle)) {\n        throw `Do not understand how to morph style ${morphStyle}`;\n      }\n\n      return {\n        target: oldNode,\n        newContent: newContent,\n        config: mergedConfig,\n        morphStyle: morphStyle,\n        ignoreActive: mergedConfig.ignoreActive,\n        ignoreActiveValue: mergedConfig.ignoreActiveValue,\n        restoreFocus: mergedConfig.restoreFocus,\n        idMap: idMap,\n        persistentIds: persistentIds,\n        pantry: createPantry(),\n        activeElementAndParents: createActiveElementAndParents(oldNode),\n        callbacks: mergedConfig.callbacks,\n        head: mergedConfig.head,\n      };\n    }\n\n    /**\n     * Deep merges the config object and the Idiomorph.defaults object to\n     * produce a final configuration object\n     * @param {Config} config\n     * @returns {ConfigInternal}\n     */\n    function mergeDefaults(config) {\n      let finalConfig = Object.assign({}, defaults);\n\n      // copy top level stuff into final config\n      Object.assign(finalConfig, config);\n\n      // copy callbacks into final config (do this to deep merge the callbacks)\n      finalConfig.callbacks = Object.assign(\n        {},\n        defaults.callbacks,\n        config.callbacks,\n      );\n\n      // copy head config into final config  (do this to deep merge the head)\n      finalConfig.head = Object.assign({}, defaults.head, config.head);\n\n      return finalConfig;\n    }\n\n    /**\n     * @returns {HTMLDivElement}\n     */\n    function createPantry() {\n      const pantry = document.createElement(\"div\");\n      pantry.hidden = true;\n      document.body.insertAdjacentElement(\"afterend\", pantry);\n      return pantry;\n    }\n\n    /**\n     * @param {Element} oldNode\n     * @returns {Element[]}\n     */\n    function createActiveElementAndParents(oldNode) {\n      /** @type {Element[]} */\n      let activeElementAndParents = [];\n      let elt = document.activeElement;\n      if (elt?.tagName !== \"BODY\" && oldNode.contains(elt)) {\n        while (elt) {\n          activeElementAndParents.push(elt);\n          if (elt === oldNode) break;\n          elt = elt.parentElement;\n        }\n      }\n      return activeElementAndParents;\n    }\n\n    /**\n     * Returns all elements with an ID contained within the root element and its descendants\n     *\n     * @param {Element} root\n     * @returns {Element[]}\n     */\n    function findIdElements(root) {\n      let elements = Array.from(root.querySelectorAll(\"[id]\"));\n      // root could be a document fragment which doesn't have `getAttribute`\n      if (root.getAttribute?.(\"id\")) {\n        elements.push(root);\n      }\n      return elements;\n    }\n\n    /**\n     * A bottom-up algorithm that populates a map of Element -> IdSet.\n     * The idSet for a given element is the set of all IDs contained within its subtree.\n     * As an optimzation, we filter these IDs through the given list of persistent IDs,\n     * because we don't need to bother considering IDed elements that won't be in the new content.\n     *\n     * @param {Map<Node, Set<string>>} idMap\n     * @param {Set<string>} persistentIds\n     * @param {Element} root\n     * @param {Element[]} elements\n     */\n    function populateIdMapWithTree(idMap, persistentIds, root, elements) {\n      for (const elt of elements) {\n        // we can pretend id is non-null String, because the .has line will reject it immediately if not\n        const id = /** @type {String} */ (elt.getAttribute(\"id\"));\n        if (persistentIds.has(id)) {\n          /** @type {Element|null} */\n          let current = elt;\n          // walk up the parent hierarchy of that element, adding the id\n          // of element to the parent's id set\n          while (current) {\n            let idSet = idMap.get(current);\n            // if the id set doesn't exist, create it and insert it in the map\n            if (idSet == null) {\n              idSet = new Set();\n              idMap.set(current, idSet);\n            }\n            idSet.add(id);\n\n            if (current === root) break;\n            current = current.parentElement;\n          }\n        }\n      }\n    }\n\n    /**\n     * This function computes a map of nodes to all ids contained within that node (inclusive of the\n     * node).  This map can be used to ask if two nodes have intersecting sets of ids, which allows\n     * for a looser definition of \"matching\" than tradition id matching, and allows child nodes\n     * to contribute to a parent nodes matching.\n     *\n     * @param {Element} oldContent  the old content that will be morphed\n     * @param {Element} newContent  the new content to morph to\n     * @returns {IdSets}\n     */\n    function createIdMaps(oldContent, newContent) {\n      const oldIdElements = findIdElements(oldContent);\n      const newIdElements = findIdElements(newContent);\n\n      const persistentIds = createPersistentIds(oldIdElements, newIdElements);\n\n      /** @type {Map<Node, Set<string>>} */\n      let idMap = new Map();\n      populateIdMapWithTree(idMap, persistentIds, oldContent, oldIdElements);\n\n      /** @ts-ignore - if newContent is a duck-typed parent, pass its single child node as the root to halt upwards iteration */\n      const newRoot = newContent.__idiomorphRoot || newContent;\n      populateIdMapWithTree(idMap, persistentIds, newRoot, newIdElements);\n\n      return { persistentIds, idMap };\n    }\n\n    /**\n     * This function computes the set of ids that persist between the two contents excluding duplicates\n     *\n     * @param {Element[]} oldIdElements\n     * @param {Element[]} newIdElements\n     * @returns {Set<string>}\n     */\n    function createPersistentIds(oldIdElements, newIdElements) {\n      let duplicateIds = new Set();\n\n      /** @type {Map<string, string>} */\n      let oldIdTagNameMap = new Map();\n      for (const { id, tagName } of oldIdElements) {\n        if (oldIdTagNameMap.has(id)) {\n          duplicateIds.add(id);\n        } else {\n          oldIdTagNameMap.set(id, tagName);\n        }\n      }\n\n      let persistentIds = new Set();\n      for (const { id, tagName } of newIdElements) {\n        if (persistentIds.has(id)) {\n          duplicateIds.add(id);\n        } else if (oldIdTagNameMap.get(id) === tagName) {\n          persistentIds.add(id);\n        }\n        // skip if tag types mismatch because its not possible to morph one tag into another\n      }\n\n      for (const id of duplicateIds) {\n        persistentIds.delete(id);\n      }\n      return persistentIds;\n    }\n\n    return createMorphContext;\n  })();\n\n  //=============================================================================\n  // HTML Normalization Functions\n  //=============================================================================\n  const { normalizeElement, normalizeParent } = (function () {\n    /** @type {WeakSet<Node>} */\n    const generatedByIdiomorph = new WeakSet();\n\n    /**\n     *\n     * @param {Element | Document} content\n     * @returns {Element}\n     */\n    function normalizeElement(content) {\n      if (content instanceof Document) {\n        return content.documentElement;\n      } else {\n        return content;\n      }\n    }\n\n    /**\n     *\n     * @param {null | string | Node | HTMLCollection | Node[] | Document & {generatedByIdiomorph:boolean}} newContent\n     * @returns {Element}\n     */\n    function normalizeParent(newContent) {\n      if (newContent == null) {\n        return document.createElement(\"div\"); // dummy parent element\n      } else if (typeof newContent === \"string\") {\n        return normalizeParent(parseContent(newContent));\n      } else if (\n        generatedByIdiomorph.has(/** @type {Element} */ (newContent))\n      ) {\n        // the template tag created by idiomorph parsing can serve as a dummy parent\n        return /** @type {Element} */ (newContent);\n      } else if (newContent instanceof Node) {\n        if (newContent.parentNode) {\n          // we can't use the parent directly because newContent may have siblings\n          // that we don't want in the morph, and reparenting might be expensive (TODO is it?),\n          // so instead we create a fake parent node that only sees a slice of its children.\n          /** @type {Element} */\n          return /** @type {any} */ (new SlicedParentNode(newContent));\n        } else {\n          // a single node is added as a child to a dummy parent\n          const dummyParent = document.createElement(\"div\");\n          dummyParent.append(newContent);\n          return dummyParent;\n        }\n      } else {\n        // all nodes in the array or HTMLElement collection are consolidated under\n        // a single dummy parent element\n        const dummyParent = document.createElement(\"div\");\n        for (const elt of [...newContent]) {\n          dummyParent.append(elt);\n        }\n        return dummyParent;\n      }\n    }\n\n    /**\n     * A fake duck-typed parent element to wrap a single node, without actually reparenting it.\n     * This is useful because the node may have siblings that we don't want in the morph, and it may also be moved\n     * or replaced with one or more elements during the morph. This class effectively allows us a window into\n     * a slice of a node's children.\n     * \"If it walks like a duck, and quacks like a duck, then it must be a duck!\" -- James Whitcomb Riley (1849\u20131916)\n     */\n    class SlicedParentNode {\n      /** @param {Node} node */\n      constructor(node) {\n        this.originalNode = node;\n        this.realParentNode = /** @type {Element} */ (node.parentNode);\n        this.previousSibling = node.previousSibling;\n        this.nextSibling = node.nextSibling;\n      }\n\n      /** @returns {Node[]} */\n      get childNodes() {\n        // return slice of realParent's current childNodes, based on previousSibling and nextSibling\n        const nodes = [];\n        let cursor = this.previousSibling\n          ? this.previousSibling.nextSibling\n          : this.realParentNode.firstChild;\n        while (cursor && cursor != this.nextSibling) {\n          nodes.push(cursor);\n          cursor = cursor.nextSibling;\n        }\n        return nodes;\n      }\n\n      /**\n       * @param {string} selector\n       * @returns {Element[]}\n       */\n      querySelectorAll(selector) {\n        return this.childNodes.reduce((results, node) => {\n          if (node instanceof Element) {\n            if (node.matches(selector)) results.push(node);\n            const nodeList = node.querySelectorAll(selector);\n            for (let i = 0; i < nodeList.length; i++) {\n              results.push(nodeList[i]);\n            }\n          }\n          return results;\n        }, /** @type {Element[]} */ ([]));\n      }\n\n      /**\n       * @param {Node} node\n       * @param {Node} referenceNode\n       * @returns {Node}\n       */\n      insertBefore(node, referenceNode) {\n        return this.realParentNode.insertBefore(node, referenceNode);\n      }\n\n      /**\n       * @param {Node} node\n       * @param {Node} referenceNode\n       * @returns {Node}\n       */\n      moveBefore(node, referenceNode) {\n        // @ts-ignore - use new moveBefore feature\n        return this.realParentNode.moveBefore(node, referenceNode);\n      }\n\n      /**\n       * for later use with populateIdMapWithTree to halt upwards iteration\n       * @returns {Node}\n       */\n      get __idiomorphRoot() {\n        return this.originalNode;\n      }\n    }\n\n    /**\n     *\n     * @param {string} newContent\n     * @returns {Node | null | DocumentFragment}\n     */\n    function parseContent(newContent) {\n      let parser = new DOMParser();\n\n      // remove svgs to avoid false-positive matches on head, etc.\n      let contentWithSvgsRemoved = newContent.replace(\n        /<svg(\\s[^>]*>|>)([\\s\\S]*?)<\\/svg>/gim,\n        \"\",\n      );\n\n      // if the newContent contains a html, head or body tag, we can simply parse it w/o wrapping\n      if (\n        contentWithSvgsRemoved.match(/<\\/html>/) ||\n        contentWithSvgsRemoved.match(/<\\/head>/) ||\n        contentWithSvgsRemoved.match(/<\\/body>/)\n      ) {\n        let content = parser.parseFromString(newContent, \"text/html\");\n        // if it is a full HTML document, return the document itself as the parent container\n        if (contentWithSvgsRemoved.match(/<\\/html>/)) {\n          generatedByIdiomorph.add(content);\n          return content;\n        } else {\n          // otherwise return the html element as the parent container\n          let htmlElement = content.firstChild;\n          if (htmlElement) {\n            generatedByIdiomorph.add(htmlElement);\n          }\n          return htmlElement;\n        }\n      } else {\n        // if it is partial HTML, wrap it in a template tag to provide a parent element and also to help\n        // deal with touchy tags like tr, tbody, etc.\n        let responseDoc = parser.parseFromString(\n          \"<body><template>\" + newContent + \"</template></body>\",\n          \"text/html\",\n        );\n        let content = /** @type {HTMLTemplateElement} */ (\n          responseDoc.body.querySelector(\"template\")\n        ).content;\n        generatedByIdiomorph.add(content);\n        return content;\n      }\n    }\n\n    return { normalizeElement, normalizeParent };\n  })();\n\n  //=============================================================================\n  // This is what ends up becoming the Idiomorph global object\n  //=============================================================================\n  return {\n    morph,\n    defaults,\n  };\n})();\n\n/**\n * Morph the state of the currentElement based on the attributes and contents of\n * the newElement. Morphing may dispatch turbo:before-morph-element,\n * turbo:before-morph-attribute, and turbo:morph-element events.\n *\n * @param currentElement Element destination of morphing changes\n * @param newElement Element source of morphing changes\n */\nfunction morphElements(currentElement, newElement, { callbacks, ...options } = {}) {\n  Idiomorph.morph(currentElement, newElement, {\n    ...options,\n    callbacks: new DefaultIdiomorphCallbacks(callbacks)\n  });\n}\n\n/**\n * Morph the child elements of the currentElement based on the child elements of\n * the newElement. Morphing children may dispatch turbo:before-morph-element,\n * turbo:before-morph-attribute, and turbo:morph-element events.\n *\n * @param currentElement Element destination of morphing children changes\n * @param newElement Element source of morphing children changes\n */\nfunction morphChildren(currentElement, newElement, options = {}) {\n  morphElements(currentElement, newElement.childNodes, {\n    ...options,\n    morphStyle: \"innerHTML\"\n  });\n}\n\nfunction shouldRefreshFrameWithMorphing(currentFrame, newFrame) {\n  return currentFrame instanceof FrameElement &&\n    currentFrame.shouldReloadWithMorph && (!newFrame || areFramesCompatibleForRefreshing(currentFrame, newFrame)) &&\n    !currentFrame.closest(\"[data-turbo-permanent]\")\n}\n\nfunction areFramesCompatibleForRefreshing(currentFrame, newFrame) {\n  // newFrame cannot yet be an instance of FrameElement because custom\n  // elements don't get initialized until they're attached to the DOM, so\n  // test its Element#nodeName instead\n  return newFrame instanceof Element && newFrame.nodeName === \"TURBO-FRAME\" && currentFrame.id === newFrame.id &&\n  (!newFrame.getAttribute(\"src\") || urlsAreEqual(currentFrame.src, newFrame.getAttribute(\"src\")))\n}\n\nfunction closestFrameReloadableWithMorphing(node) {\n  return node.parentElement.closest(\"turbo-frame[src][refresh=morph]\")\n}\n\nclass DefaultIdiomorphCallbacks {\n  #beforeNodeMorphed\n\n  constructor({ beforeNodeMorphed } = {}) {\n    this.#beforeNodeMorphed = beforeNodeMorphed || (() => true);\n  }\n\n  beforeNodeAdded = (node) => {\n    return !(node.id && node.hasAttribute(\"data-turbo-permanent\") && document.getElementById(node.id))\n  }\n\n  beforeNodeMorphed = (currentElement, newElement) => {\n    if (currentElement instanceof Element) {\n      if (!currentElement.hasAttribute(\"data-turbo-permanent\") && this.#beforeNodeMorphed(currentElement, newElement)) {\n        const event = dispatch(\"turbo:before-morph-element\", {\n          cancelable: true,\n          target: currentElement,\n          detail: { currentElement, newElement }\n        });\n\n        return !event.defaultPrevented\n      } else {\n        return false\n      }\n    }\n  }\n\n  beforeAttributeUpdated = (attributeName, target, mutationType) => {\n    const event = dispatch(\"turbo:before-morph-attribute\", {\n      cancelable: true,\n      target,\n      detail: { attributeName, mutationType }\n    });\n\n    return !event.defaultPrevented\n  }\n\n  beforeNodeRemoved = (node) => {\n    return this.beforeNodeMorphed(node)\n  }\n\n  afterNodeMorphed = (currentElement, newElement) => {\n    if (currentElement instanceof Element) {\n      dispatch(\"turbo:morph-element\", {\n        target: currentElement,\n        detail: { currentElement, newElement }\n      });\n    }\n  }\n}\n\nclass MorphingFrameRenderer extends FrameRenderer {\n  static renderElement(currentElement, newElement) {\n    dispatch(\"turbo:before-frame-morph\", {\n      target: currentElement,\n      detail: { currentElement, newElement }\n    });\n\n    morphChildren(currentElement, newElement, {\n      callbacks: {\n        beforeNodeMorphed: (node, newNode) => {\n          if (\n            shouldRefreshFrameWithMorphing(node, newNode) &&\n              closestFrameReloadableWithMorphing(node) === currentElement\n          ) {\n            node.reload();\n            return false\n          }\n          return true\n        }\n      }\n    });\n  }\n\n  async preservingPermanentElements(callback) {\n    return await callback()\n  }\n}\n\nclass ProgressBar {\n  static animationDuration = 300 /*ms*/\n\n  static get defaultCSS() {\n    return unindent`\n      .turbo-progress-bar {\n        position: fixed;\n        display: block;\n        top: 0;\n        left: 0;\n        height: 3px;\n        background: #0076ff;\n        z-index: 2147483647;\n        transition:\n          width ${ProgressBar.animationDuration}ms ease-out,\n          opacity ${ProgressBar.animationDuration / 2}ms ${ProgressBar.animationDuration / 2}ms ease-in;\n        transform: translate3d(0, 0, 0);\n      }\n    `\n  }\n\n  hiding = false\n  value = 0\n  visible = false\n\n  constructor() {\n    this.stylesheetElement = this.createStylesheetElement();\n    this.progressElement = this.createProgressElement();\n    this.installStylesheetElement();\n    this.setValue(0);\n  }\n\n  show() {\n    if (!this.visible) {\n      this.visible = true;\n      this.installProgressElement();\n      this.startTrickling();\n    }\n  }\n\n  hide() {\n    if (this.visible && !this.hiding) {\n      this.hiding = true;\n      this.fadeProgressElement(() => {\n        this.uninstallProgressElement();\n        this.stopTrickling();\n        this.visible = false;\n        this.hiding = false;\n      });\n    }\n  }\n\n  setValue(value) {\n    this.value = value;\n    this.refresh();\n  }\n\n  // Private\n\n  installStylesheetElement() {\n    document.head.insertBefore(this.stylesheetElement, document.head.firstChild);\n  }\n\n  installProgressElement() {\n    this.progressElement.style.width = \"0\";\n    this.progressElement.style.opacity = \"1\";\n    document.documentElement.insertBefore(this.progressElement, document.body);\n    this.refresh();\n  }\n\n  fadeProgressElement(callback) {\n    this.progressElement.style.opacity = \"0\";\n    setTimeout(callback, ProgressBar.animationDuration * 1.5);\n  }\n\n  uninstallProgressElement() {\n    if (this.progressElement.parentNode) {\n      document.documentElement.removeChild(this.progressElement);\n    }\n  }\n\n  startTrickling() {\n    if (!this.trickleInterval) {\n      this.trickleInterval = window.setInterval(this.trickle, ProgressBar.animationDuration);\n    }\n  }\n\n  stopTrickling() {\n    window.clearInterval(this.trickleInterval);\n    delete this.trickleInterval;\n  }\n\n  trickle = () => {\n    this.setValue(this.value + Math.random() / 100);\n  }\n\n  refresh() {\n    requestAnimationFrame(() => {\n      this.progressElement.style.width = `${10 + this.value * 90}%`;\n    });\n  }\n\n  createStylesheetElement() {\n    const element = document.createElement(\"style\");\n    element.type = \"text/css\";\n    element.textContent = ProgressBar.defaultCSS;\n    const cspNonce = getCspNonce();\n    if (cspNonce) {\n      element.nonce = cspNonce;\n    }\n    return element\n  }\n\n  createProgressElement() {\n    const element = document.createElement(\"div\");\n    element.className = \"turbo-progress-bar\";\n    return element\n  }\n}\n\nclass HeadSnapshot extends Snapshot {\n  detailsByOuterHTML = this.children\n    .filter((element) => !elementIsNoscript(element))\n    .map((element) => elementWithoutNonce(element))\n    .reduce((result, element) => {\n      const { outerHTML } = element;\n      const details =\n        outerHTML in result\n          ? result[outerHTML]\n          : {\n              type: elementType(element),\n              tracked: elementIsTracked(element),\n              elements: []\n            };\n      return {\n        ...result,\n        [outerHTML]: {\n          ...details,\n          elements: [...details.elements, element]\n        }\n      }\n    }, {})\n\n  get trackedElementSignature() {\n    return Object.keys(this.detailsByOuterHTML)\n      .filter((outerHTML) => this.detailsByOuterHTML[outerHTML].tracked)\n      .join(\"\")\n  }\n\n  getScriptElementsNotInSnapshot(snapshot) {\n    return this.getElementsMatchingTypeNotInSnapshot(\"script\", snapshot)\n  }\n\n  getStylesheetElementsNotInSnapshot(snapshot) {\n    return this.getElementsMatchingTypeNotInSnapshot(\"stylesheet\", snapshot)\n  }\n\n  getElementsMatchingTypeNotInSnapshot(matchedType, snapshot) {\n    return Object.keys(this.detailsByOuterHTML)\n      .filter((outerHTML) => !(outerHTML in snapshot.detailsByOuterHTML))\n      .map((outerHTML) => this.detailsByOuterHTML[outerHTML])\n      .filter(({ type }) => type == matchedType)\n      .map(({ elements: [element] }) => element)\n  }\n\n  get provisionalElements() {\n    return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {\n      const { type, tracked, elements } = this.detailsByOuterHTML[outerHTML];\n      if (type == null && !tracked) {\n        return [...result, ...elements]\n      } else if (elements.length > 1) {\n        return [...result, ...elements.slice(1)]\n      } else {\n        return result\n      }\n    }, [])\n  }\n\n  getMetaValue(name) {\n    const element = this.findMetaElementByName(name);\n    return element ? element.getAttribute(\"content\") : null\n  }\n\n  findMetaElementByName(name) {\n    return Object.keys(this.detailsByOuterHTML).reduce((result, outerHTML) => {\n      const {\n        elements: [element]\n      } = this.detailsByOuterHTML[outerHTML];\n      return elementIsMetaElementWithName(element, name) ? element : result\n    }, undefined | undefined)\n  }\n}\n\nfunction elementType(element) {\n  if (elementIsScript(element)) {\n    return \"script\"\n  } else if (elementIsStylesheet(element)) {\n    return \"stylesheet\"\n  }\n}\n\nfunction elementIsTracked(element) {\n  return element.getAttribute(\"data-turbo-track\") == \"reload\"\n}\n\nfunction elementIsScript(element) {\n  const tagName = element.localName;\n  return tagName == \"script\"\n}\n\nfunction elementIsNoscript(element) {\n  const tagName = element.localName;\n  return tagName == \"noscript\"\n}\n\nfunction elementIsStylesheet(element) {\n  const tagName = element.localName;\n  return tagName == \"style\" || (tagName == \"link\" && element.getAttribute(\"rel\") == \"stylesheet\")\n}\n\nfunction elementIsMetaElementWithName(element, name) {\n  const tagName = element.localName;\n  return tagName == \"meta\" && element.getAttribute(\"name\") == name\n}\n\nfunction elementWithoutNonce(element) {\n  if (element.hasAttribute(\"nonce\")) {\n    element.setAttribute(\"nonce\", \"\");\n  }\n\n  return element\n}\n\nclass PageSnapshot extends Snapshot {\n  static fromHTMLString(html = \"\") {\n    return this.fromDocument(parseHTMLDocument(html))\n  }\n\n  static fromElement(element) {\n    return this.fromDocument(element.ownerDocument)\n  }\n\n  static fromDocument({ documentElement, body, head }) {\n    return new this(documentElement, body, new HeadSnapshot(head))\n  }\n\n  constructor(documentElement, body, headSnapshot) {\n    super(body);\n    this.documentElement = documentElement;\n    this.headSnapshot = headSnapshot;\n  }\n\n  clone() {\n    const clonedElement = this.element.cloneNode(true);\n\n    const selectElements = this.element.querySelectorAll(\"select\");\n    const clonedSelectElements = clonedElement.querySelectorAll(\"select\");\n\n    for (const [index, source] of selectElements.entries()) {\n      const clone = clonedSelectElements[index];\n      for (const option of clone.selectedOptions) option.selected = false;\n      for (const option of source.selectedOptions) clone.options[option.index].selected = true;\n    }\n\n    for (const clonedPasswordInput of clonedElement.querySelectorAll('input[type=\"password\"]')) {\n      clonedPasswordInput.value = \"\";\n    }\n\n    for (const clonedNoscriptElement of clonedElement.querySelectorAll(\"noscript\")) {\n      clonedNoscriptElement.remove();\n    }\n\n    return new PageSnapshot(this.documentElement, clonedElement, this.headSnapshot)\n  }\n\n  get lang() {\n    return this.documentElement.getAttribute(\"lang\")\n  }\n\n  get dir() {\n    return this.documentElement.getAttribute(\"dir\")\n  }\n\n  get headElement() {\n    return this.headSnapshot.element\n  }\n\n  get rootLocation() {\n    const root = this.getSetting(\"root\") ?? \"/\";\n    return expandURL(root)\n  }\n\n  get cacheControlValue() {\n    return this.getSetting(\"cache-control\")\n  }\n\n  get isPreviewable() {\n    return this.cacheControlValue != \"no-preview\"\n  }\n\n  get isCacheable() {\n    return this.cacheControlValue != \"no-cache\"\n  }\n\n  get isVisitable() {\n    return this.getSetting(\"visit-control\") != \"reload\"\n  }\n\n  get prefersViewTransitions() {\n    const viewTransitionEnabled = this.getSetting(\"view-transition\") === \"true\" || this.headSnapshot.getMetaValue(\"view-transition\") === \"same-origin\";\n    return viewTransitionEnabled && !window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches\n  }\n\n  get refreshMethod() {\n    return this.getSetting(\"refresh-method\")\n  }\n\n  get refreshScroll() {\n    return this.getSetting(\"refresh-scroll\")\n  }\n\n  // Private\n\n  getSetting(name) {\n    return this.headSnapshot.getMetaValue(`turbo-${name}`)\n  }\n}\n\nclass ViewTransitioner {\n  #viewTransitionStarted = false\n  #lastOperation = Promise.resolve()\n\n  renderChange(useViewTransition, render) {\n    if (useViewTransition && this.viewTransitionsAvailable && !this.#viewTransitionStarted) {\n      this.#viewTransitionStarted = true;\n      this.#lastOperation = this.#lastOperation.then(async () => {\n        await document.startViewTransition(render).finished;\n      });\n    } else {\n      this.#lastOperation = this.#lastOperation.then(render);\n    }\n\n    return this.#lastOperation\n  }\n\n  get viewTransitionsAvailable() {\n    return document.startViewTransition\n  }\n}\n\nconst defaultOptions = {\n  action: \"advance\",\n  historyChanged: false,\n  visitCachedSnapshot: () => {},\n  willRender: true,\n  updateHistory: true,\n  shouldCacheSnapshot: true,\n  acceptsStreamResponse: false,\n  refresh: {}\n};\n\nconst TimingMetric = {\n  visitStart: \"visitStart\",\n  requestStart: \"requestStart\",\n  requestEnd: \"requestEnd\",\n  visitEnd: \"visitEnd\"\n};\n\nconst VisitState = {\n  initialized: \"initialized\",\n  started: \"started\",\n  canceled: \"canceled\",\n  failed: \"failed\",\n  completed: \"completed\"\n};\n\nconst SystemStatusCode = {\n  networkFailure: 0,\n  timeoutFailure: -1,\n  contentTypeMismatch: -2\n};\n\nconst Direction = {\n  advance: \"forward\",\n  restore: \"back\",\n  replace: \"none\"\n};\n\nclass Visit {\n  identifier = uuid() // Required by turbo-ios\n  timingMetrics = {}\n\n  followedRedirect = false\n  historyChanged = false\n  scrolled = false\n  shouldCacheSnapshot = true\n  acceptsStreamResponse = false\n  snapshotCached = false\n  state = VisitState.initialized\n  viewTransitioner = new ViewTransitioner()\n\n  constructor(delegate, location, restorationIdentifier, options = {}) {\n    this.delegate = delegate;\n    this.location = location;\n    this.restorationIdentifier = restorationIdentifier || uuid();\n\n    const {\n      action,\n      historyChanged,\n      referrer,\n      snapshot,\n      snapshotHTML,\n      response,\n      visitCachedSnapshot,\n      willRender,\n      updateHistory,\n      shouldCacheSnapshot,\n      acceptsStreamResponse,\n      direction,\n      refresh\n    } = {\n      ...defaultOptions,\n      ...options\n    };\n    this.action = action;\n    this.historyChanged = historyChanged;\n    this.referrer = referrer;\n    this.snapshot = snapshot;\n    this.snapshotHTML = snapshotHTML;\n    this.response = response;\n    this.isPageRefresh = this.view.isPageRefresh(this);\n    this.visitCachedSnapshot = visitCachedSnapshot;\n    this.willRender = willRender;\n    this.updateHistory = updateHistory;\n    this.scrolled = !willRender;\n    this.shouldCacheSnapshot = shouldCacheSnapshot;\n    this.acceptsStreamResponse = acceptsStreamResponse;\n    this.direction = direction || Direction[action];\n    this.refresh = refresh;\n  }\n\n  get adapter() {\n    return this.delegate.adapter\n  }\n\n  get view() {\n    return this.delegate.view\n  }\n\n  get history() {\n    return this.delegate.history\n  }\n\n  get restorationData() {\n    return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)\n  }\n\n  start() {\n    if (this.state == VisitState.initialized) {\n      this.recordTimingMetric(TimingMetric.visitStart);\n      this.state = VisitState.started;\n      this.adapter.visitStarted(this);\n      this.delegate.visitStarted(this);\n    }\n  }\n\n  cancel() {\n    if (this.state == VisitState.started) {\n      if (this.request) {\n        this.request.cancel();\n      }\n      this.cancelRender();\n      this.state = VisitState.canceled;\n    }\n  }\n\n  complete() {\n    if (this.state == VisitState.started) {\n      this.recordTimingMetric(TimingMetric.visitEnd);\n      this.adapter.visitCompleted(this);\n      this.state = VisitState.completed;\n      this.followRedirect();\n\n      if (!this.followedRedirect) {\n        this.delegate.visitCompleted(this);\n      }\n    }\n  }\n\n  fail() {\n    if (this.state == VisitState.started) {\n      this.state = VisitState.failed;\n      this.adapter.visitFailed(this);\n      this.delegate.visitCompleted(this);\n    }\n  }\n\n  changeHistory() {\n    if (!this.historyChanged && this.updateHistory) {\n      const actionForHistory = this.location.href === this.referrer?.href ? \"replace\" : this.action;\n      const method = getHistoryMethodForAction(actionForHistory);\n      this.history.update(method, this.location, this.restorationIdentifier);\n      this.historyChanged = true;\n    }\n  }\n\n  issueRequest() {\n    if (this.hasPreloadedResponse()) {\n      this.simulateRequest();\n    } else if (this.shouldIssueRequest() && !this.request) {\n      this.request = new FetchRequest(this, FetchMethod.get, this.location);\n      this.request.perform();\n    }\n  }\n\n  simulateRequest() {\n    if (this.response) {\n      this.startRequest();\n      this.recordResponse();\n      this.finishRequest();\n    }\n  }\n\n  startRequest() {\n    this.recordTimingMetric(TimingMetric.requestStart);\n    this.adapter.visitRequestStarted(this);\n  }\n\n  recordResponse(response = this.response) {\n    this.response = response;\n    if (response) {\n      const { statusCode } = response;\n      if (isSuccessful(statusCode)) {\n        this.adapter.visitRequestCompleted(this);\n      } else {\n        this.adapter.visitRequestFailedWithStatusCode(this, statusCode);\n      }\n    }\n  }\n\n  finishRequest() {\n    this.recordTimingMetric(TimingMetric.requestEnd);\n    this.adapter.visitRequestFinished(this);\n  }\n\n  loadResponse() {\n    if (this.response) {\n      const { statusCode, responseHTML } = this.response;\n      this.render(async () => {\n        if (this.shouldCacheSnapshot) this.cacheSnapshot();\n        if (this.view.renderPromise) await this.view.renderPromise;\n\n        if (isSuccessful(statusCode) && responseHTML != null) {\n          const snapshot = PageSnapshot.fromHTMLString(responseHTML);\n          await this.renderPageSnapshot(snapshot, false);\n\n          this.adapter.visitRendered(this);\n          this.complete();\n        } else {\n          await this.view.renderError(PageSnapshot.fromHTMLString(responseHTML), this);\n          this.adapter.visitRendered(this);\n          this.fail();\n        }\n      });\n    }\n  }\n\n  getCachedSnapshot() {\n    const snapshot = this.view.getCachedSnapshotForLocation(this.location) || this.getPreloadedSnapshot();\n\n    if (snapshot && (!getAnchor(this.location) || snapshot.hasAnchor(getAnchor(this.location)))) {\n      if (this.action == \"restore\" || snapshot.isPreviewable) {\n        return snapshot\n      }\n    }\n  }\n\n  getPreloadedSnapshot() {\n    if (this.snapshotHTML) {\n      return PageSnapshot.fromHTMLString(this.snapshotHTML)\n    }\n  }\n\n  hasCachedSnapshot() {\n    return this.getCachedSnapshot() != null\n  }\n\n  loadCachedSnapshot() {\n    const snapshot = this.getCachedSnapshot();\n    if (snapshot) {\n      const isPreview = this.shouldIssueRequest();\n      this.render(async () => {\n        this.cacheSnapshot();\n        if (this.isPageRefresh) {\n          this.adapter.visitRendered(this);\n        } else {\n          if (this.view.renderPromise) await this.view.renderPromise;\n\n          await this.renderPageSnapshot(snapshot, isPreview);\n\n          this.adapter.visitRendered(this);\n          if (!isPreview) {\n            this.complete();\n          }\n        }\n      });\n    }\n  }\n\n  followRedirect() {\n    if (this.redirectedToLocation && !this.followedRedirect && this.response?.redirected) {\n      this.adapter.visitProposedToLocation(this.redirectedToLocation, {\n        action: \"replace\",\n        response: this.response,\n        shouldCacheSnapshot: false,\n        willRender: false\n      });\n      this.followedRedirect = true;\n    }\n  }\n\n  // Fetch request delegate\n\n  prepareRequest(request) {\n    if (this.acceptsStreamResponse) {\n      request.acceptResponseType(StreamMessage.contentType);\n    }\n  }\n\n  requestStarted() {\n    this.startRequest();\n  }\n\n  requestPreventedHandlingResponse(_request, _response) {}\n\n  async requestSucceededWithResponse(request, response) {\n    const responseHTML = await response.responseHTML;\n    const { redirected, statusCode } = response;\n    if (responseHTML == undefined) {\n      this.recordResponse({\n        statusCode: SystemStatusCode.contentTypeMismatch,\n        redirected\n      });\n    } else {\n      this.redirectedToLocation = response.redirected ? response.location : undefined;\n      this.recordResponse({ statusCode: statusCode, responseHTML, redirected });\n    }\n  }\n\n  async requestFailedWithResponse(request, response) {\n    const responseHTML = await response.responseHTML;\n    const { redirected, statusCode } = response;\n    if (responseHTML == undefined) {\n      this.recordResponse({\n        statusCode: SystemStatusCode.contentTypeMismatch,\n        redirected\n      });\n    } else {\n      this.recordResponse({ statusCode: statusCode, responseHTML, redirected });\n    }\n  }\n\n  requestErrored(_request, _error) {\n    this.recordResponse({\n      statusCode: SystemStatusCode.networkFailure,\n      redirected: false\n    });\n  }\n\n  requestFinished() {\n    this.finishRequest();\n  }\n\n  // Scrolling\n\n  performScroll() {\n    if (!this.scrolled && !this.view.forceReloaded && !this.view.shouldPreserveScrollPosition(this)) {\n      if (this.action == \"restore\") {\n        this.scrollToRestoredPosition() || this.scrollToAnchor() || this.view.scrollToTop();\n      } else {\n        this.scrollToAnchor() || this.view.scrollToTop();\n      }\n\n      this.scrolled = true;\n    }\n  }\n\n  scrollToRestoredPosition() {\n    const { scrollPosition } = this.restorationData;\n    if (scrollPosition) {\n      this.view.scrollToPosition(scrollPosition);\n      return true\n    }\n  }\n\n  scrollToAnchor() {\n    const anchor = getAnchor(this.location);\n    if (anchor != null) {\n      this.view.scrollToAnchor(anchor);\n      return true\n    }\n  }\n\n  // Instrumentation\n\n  recordTimingMetric(metric) {\n    this.timingMetrics[metric] = new Date().getTime();\n  }\n\n  getTimingMetrics() {\n    return { ...this.timingMetrics }\n  }\n\n  // Private\n\n  hasPreloadedResponse() {\n    return typeof this.response == \"object\"\n  }\n\n  shouldIssueRequest() {\n    if (this.action == \"restore\") {\n      return !this.hasCachedSnapshot()\n    } else {\n      return this.willRender\n    }\n  }\n\n  cacheSnapshot() {\n    if (!this.snapshotCached) {\n      this.view.cacheSnapshot(this.snapshot).then((snapshot) => snapshot && this.visitCachedSnapshot(snapshot));\n      this.snapshotCached = true;\n    }\n  }\n\n  async render(callback) {\n    this.cancelRender();\n    await new Promise((resolve) => {\n      this.frame =\n        document.visibilityState === \"hidden\" ? setTimeout(() => resolve(), 0) : requestAnimationFrame(() => resolve());\n    });\n    await callback();\n    delete this.frame;\n  }\n\n  async renderPageSnapshot(snapshot, isPreview) {\n    await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(snapshot), async () => {\n      await this.view.renderPage(snapshot, isPreview, this.willRender, this);\n      this.performScroll();\n    });\n  }\n\n  cancelRender() {\n    if (this.frame) {\n      cancelAnimationFrame(this.frame);\n      delete this.frame;\n    }\n  }\n}\n\nfunction isSuccessful(statusCode) {\n  return statusCode >= 200 && statusCode < 300\n}\n\nclass BrowserAdapter {\n  progressBar = new ProgressBar()\n\n  constructor(session) {\n    this.session = session;\n  }\n\n  visitProposedToLocation(location, options) {\n    if (locationIsVisitable(location, this.navigator.rootLocation)) {\n      this.navigator.startVisit(location, options?.restorationIdentifier || uuid(), options);\n    } else {\n      window.location.href = location.toString();\n    }\n  }\n\n  visitStarted(visit) {\n    this.location = visit.location;\n    this.redirectedToLocation = null;\n\n    visit.loadCachedSnapshot();\n    visit.issueRequest();\n  }\n\n  visitRequestStarted(visit) {\n    this.progressBar.setValue(0);\n    if (visit.hasCachedSnapshot() || visit.action != \"restore\") {\n      this.showVisitProgressBarAfterDelay();\n    } else {\n      this.showProgressBar();\n    }\n  }\n\n  visitRequestCompleted(visit) {\n    visit.loadResponse();\n\n    if (visit.response.redirected) {\n      this.redirectedToLocation = visit.redirectedToLocation;\n    }\n  }\n\n  visitRequestFailedWithStatusCode(visit, statusCode) {\n    switch (statusCode) {\n      case SystemStatusCode.networkFailure:\n      case SystemStatusCode.timeoutFailure:\n      case SystemStatusCode.contentTypeMismatch:\n        return this.reload({\n          reason: \"request_failed\",\n          context: {\n            statusCode\n          }\n        })\n      default:\n        return visit.loadResponse()\n    }\n  }\n\n  visitRequestFinished(_visit) {}\n\n  visitCompleted(_visit) {\n    this.progressBar.setValue(1);\n    this.hideVisitProgressBar();\n  }\n\n  pageInvalidated(reason) {\n    this.reload(reason);\n  }\n\n  visitFailed(_visit) {\n    this.progressBar.setValue(1);\n    this.hideVisitProgressBar();\n  }\n\n  visitRendered(_visit) {}\n\n  // Link prefetching\n\n  linkPrefetchingIsEnabledForLocation(location) {\n    return true\n  }\n\n  // Form Submission Delegate\n\n  formSubmissionStarted(_formSubmission) {\n    this.progressBar.setValue(0);\n    this.showFormProgressBarAfterDelay();\n  }\n\n  formSubmissionFinished(_formSubmission) {\n    this.progressBar.setValue(1);\n    this.hideFormProgressBar();\n  }\n\n  // Private\n\n  showVisitProgressBarAfterDelay() {\n    this.visitProgressBarTimeout = window.setTimeout(this.showProgressBar, this.session.progressBarDelay);\n  }\n\n  hideVisitProgressBar() {\n    this.progressBar.hide();\n    if (this.visitProgressBarTimeout != null) {\n      window.clearTimeout(this.visitProgressBarTimeout);\n      delete this.visitProgressBarTimeout;\n    }\n  }\n\n  showFormProgressBarAfterDelay() {\n    if (this.formProgressBarTimeout == null) {\n      this.formProgressBarTimeout = window.setTimeout(this.showProgressBar, this.session.progressBarDelay);\n    }\n  }\n\n  hideFormProgressBar() {\n    this.progressBar.hide();\n    if (this.formProgressBarTimeout != null) {\n      window.clearTimeout(this.formProgressBarTimeout);\n      delete this.formProgressBarTimeout;\n    }\n  }\n\n  showProgressBar = () => {\n    this.progressBar.show();\n  }\n\n  reload(reason) {\n    dispatch(\"turbo:reload\", { detail: reason });\n\n    window.location.href = (this.redirectedToLocation || this.location)?.toString() || window.location.href;\n  }\n\n  get navigator() {\n    return this.session.navigator\n  }\n}\n\nclass CacheObserver {\n  selector = \"[data-turbo-temporary]\"\n\n  started = false\n\n  start() {\n    if (!this.started) {\n      this.started = true;\n      addEventListener(\"turbo:before-cache\", this.removeTemporaryElements, false);\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      this.started = false;\n      removeEventListener(\"turbo:before-cache\", this.removeTemporaryElements, false);\n    }\n  }\n\n  removeTemporaryElements = (_event) => {\n    for (const element of this.temporaryElements) {\n      element.remove();\n    }\n  }\n\n  get temporaryElements() {\n    return [...document.querySelectorAll(this.selector)]\n  }\n}\n\nclass FrameRedirector {\n  constructor(session, element) {\n    this.session = session;\n    this.element = element;\n    this.linkInterceptor = new LinkInterceptor(this, element);\n    this.formSubmitObserver = new FormSubmitObserver(this, element);\n  }\n\n  start() {\n    this.linkInterceptor.start();\n    this.formSubmitObserver.start();\n  }\n\n  stop() {\n    this.linkInterceptor.stop();\n    this.formSubmitObserver.stop();\n  }\n\n  // Link interceptor delegate\n\n  shouldInterceptLinkClick(element, _location, _event) {\n    return this.#shouldRedirect(element)\n  }\n\n  linkClickIntercepted(element, url, event) {\n    const frame = this.#findFrameElement(element);\n    if (frame) {\n      frame.delegate.linkClickIntercepted(element, url, event);\n    }\n  }\n\n  // Form submit observer delegate\n\n  willSubmitForm(element, submitter) {\n    return (\n      element.closest(\"turbo-frame\") == null &&\n      this.#shouldSubmit(element, submitter) &&\n      this.#shouldRedirect(element, submitter)\n    )\n  }\n\n  formSubmitted(element, submitter) {\n    const frame = this.#findFrameElement(element, submitter);\n    if (frame) {\n      frame.delegate.formSubmitted(element, submitter);\n    }\n  }\n\n  #shouldSubmit(form, submitter) {\n    const action = getAction$1(form, submitter);\n    const meta = this.element.ownerDocument.querySelector(`meta[name=\"turbo-root\"]`);\n    const rootLocation = expandURL(meta?.content ?? \"/\");\n\n    return this.#shouldRedirect(form, submitter) && locationIsVisitable(action, rootLocation)\n  }\n\n  #shouldRedirect(element, submitter) {\n    const isNavigatable =\n      element instanceof HTMLFormElement\n        ? this.session.submissionIsNavigatable(element, submitter)\n        : this.session.elementIsNavigatable(element);\n\n    if (isNavigatable) {\n      const frame = this.#findFrameElement(element, submitter);\n      return frame ? frame != element.closest(\"turbo-frame\") : false\n    } else {\n      return false\n    }\n  }\n\n  #findFrameElement(element, submitter) {\n    const id = submitter?.getAttribute(\"data-turbo-frame\") || element.getAttribute(\"data-turbo-frame\");\n    if (id && id != \"_top\") {\n      const frame = this.element.querySelector(`#${id}:not([disabled])`);\n      if (frame instanceof FrameElement) {\n        return frame\n      }\n    }\n  }\n}\n\nclass History {\n  location\n  restorationIdentifier = uuid()\n  restorationData = {}\n  started = false\n  currentIndex = 0\n\n  constructor(delegate) {\n    this.delegate = delegate;\n  }\n\n  start() {\n    if (!this.started) {\n      addEventListener(\"popstate\", this.onPopState, false);\n      this.currentIndex = history.state?.turbo?.restorationIndex || 0;\n      this.started = true;\n      this.replace(new URL(window.location.href));\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      removeEventListener(\"popstate\", this.onPopState, false);\n      this.started = false;\n    }\n  }\n\n  push(location, restorationIdentifier) {\n    this.update(history.pushState, location, restorationIdentifier);\n  }\n\n  replace(location, restorationIdentifier) {\n    this.update(history.replaceState, location, restorationIdentifier);\n  }\n\n  update(method, location, restorationIdentifier = uuid()) {\n    if (method === history.pushState) ++this.currentIndex;\n\n    const state = { turbo: { restorationIdentifier, restorationIndex: this.currentIndex } };\n    method.call(history, state, \"\", location.href);\n    this.location = location;\n    this.restorationIdentifier = restorationIdentifier;\n  }\n\n  // Restoration data\n\n  getRestorationDataForIdentifier(restorationIdentifier) {\n    return this.restorationData[restorationIdentifier] || {}\n  }\n\n  updateRestorationData(additionalData) {\n    const { restorationIdentifier } = this;\n    const restorationData = this.restorationData[restorationIdentifier];\n    this.restorationData[restorationIdentifier] = {\n      ...restorationData,\n      ...additionalData\n    };\n  }\n\n  // Scroll restoration\n\n  assumeControlOfScrollRestoration() {\n    if (!this.previousScrollRestoration) {\n      this.previousScrollRestoration = history.scrollRestoration ?? \"auto\";\n      history.scrollRestoration = \"manual\";\n    }\n  }\n\n  relinquishControlOfScrollRestoration() {\n    if (this.previousScrollRestoration) {\n      history.scrollRestoration = this.previousScrollRestoration;\n      delete this.previousScrollRestoration;\n    }\n  }\n\n  // Event handlers\n\n  onPopState = (event) => {\n    const { turbo } = event.state || {};\n    this.location = new URL(window.location.href);\n\n    if (turbo) {\n      const { restorationIdentifier, restorationIndex } = turbo;\n      this.restorationIdentifier = restorationIdentifier;\n      const direction = restorationIndex > this.currentIndex ? \"forward\" : \"back\";\n      this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location, restorationIdentifier, direction);\n      this.currentIndex = restorationIndex;\n    } else {\n      this.currentIndex++;\n      this.delegate.historyPoppedWithEmptyState(this.location);\n    }\n  }\n}\n\nclass LinkPrefetchObserver {\n  started = false\n  #prefetchedLink = null\n\n  constructor(delegate, eventTarget) {\n    this.delegate = delegate;\n    this.eventTarget = eventTarget;\n  }\n\n  start() {\n    if (this.started) return\n\n    if (this.eventTarget.readyState === \"loading\") {\n      this.eventTarget.addEventListener(\"DOMContentLoaded\", this.#enable, { once: true });\n    } else {\n      this.#enable();\n    }\n  }\n\n  stop() {\n    if (!this.started) return\n\n    this.eventTarget.removeEventListener(\"mouseenter\", this.#tryToPrefetchRequest, {\n      capture: true,\n      passive: true\n    });\n    this.eventTarget.removeEventListener(\"mouseleave\", this.#cancelRequestIfObsolete, {\n      capture: true,\n      passive: true\n    });\n\n    this.eventTarget.removeEventListener(\"turbo:before-fetch-request\", this.#tryToUsePrefetchedRequest, true);\n    this.started = false;\n  }\n\n  #enable = () => {\n    this.eventTarget.addEventListener(\"mouseenter\", this.#tryToPrefetchRequest, {\n      capture: true,\n      passive: true\n    });\n    this.eventTarget.addEventListener(\"mouseleave\", this.#cancelRequestIfObsolete, {\n      capture: true,\n      passive: true\n    });\n\n    this.eventTarget.addEventListener(\"turbo:before-fetch-request\", this.#tryToUsePrefetchedRequest, true);\n    this.started = true;\n  }\n\n  #tryToPrefetchRequest = (event) => {\n    if (getMetaContent(\"turbo-prefetch\") === \"false\") return\n\n    const target = event.target;\n    const isLink = target.matches && target.matches(\"a[href]:not([target^=_]):not([download])\");\n\n    if (isLink && this.#isPrefetchable(target)) {\n      const link = target;\n      const location = getLocationForLink(link);\n\n      if (this.delegate.canPrefetchRequestToLocation(link, location)) {\n        this.#prefetchedLink = link;\n\n        const fetchRequest = new FetchRequest(\n          this,\n          FetchMethod.get,\n          location,\n          new URLSearchParams(),\n          target\n        );\n\n        fetchRequest.fetchOptions.priority = \"low\";\n\n        prefetchCache.putLater(location, fetchRequest, this.#cacheTtl);\n      }\n    }\n  }\n\n  #cancelRequestIfObsolete = (event) => {\n    if (event.target === this.#prefetchedLink) this.#cancelPrefetchRequest();\n  }\n\n  #cancelPrefetchRequest = () => {\n    prefetchCache.clear();\n    this.#prefetchedLink = null;\n  }\n\n  #tryToUsePrefetchedRequest = (event) => {\n    if (event.target.tagName !== \"FORM\" && event.detail.fetchOptions.method === \"GET\") {\n      const cached = prefetchCache.get(event.detail.url);\n\n      if (cached) {\n        // User clicked link, use cache response\n        event.detail.fetchRequest = cached;\n      }\n\n      prefetchCache.clear();\n    }\n  }\n\n  prepareRequest(request) {\n    const link = request.target;\n\n    request.headers[\"X-Sec-Purpose\"] = \"prefetch\";\n\n    const turboFrame = link.closest(\"turbo-frame\");\n    const turboFrameTarget = link.getAttribute(\"data-turbo-frame\") || turboFrame?.getAttribute(\"target\") || turboFrame?.id;\n\n    if (turboFrameTarget && turboFrameTarget !== \"_top\") {\n      request.headers[\"Turbo-Frame\"] = turboFrameTarget;\n    }\n  }\n\n  // Fetch request interface\n\n  requestSucceededWithResponse() {}\n\n  requestStarted(fetchRequest) {}\n\n  requestErrored(fetchRequest) {}\n\n  requestFinished(fetchRequest) {}\n\n  requestPreventedHandlingResponse(fetchRequest, fetchResponse) {}\n\n  requestFailedWithResponse(fetchRequest, fetchResponse) {}\n\n  get #cacheTtl() {\n    return Number(getMetaContent(\"turbo-prefetch-cache-time\")) || cacheTtl\n  }\n\n  #isPrefetchable(link) {\n    const href = link.getAttribute(\"href\");\n\n    if (!href) return false\n\n    if (unfetchableLink(link)) return false\n    if (linkToTheSamePage(link)) return false\n    if (linkOptsOut(link)) return false\n    if (nonSafeLink(link)) return false\n    if (eventPrevented(link)) return false\n\n    return true\n  }\n}\n\nconst unfetchableLink = (link) => {\n  return link.origin !== document.location.origin || ![\"http:\", \"https:\"].includes(link.protocol) || link.hasAttribute(\"target\")\n};\n\nconst linkToTheSamePage = (link) => {\n  return (link.pathname + link.search === document.location.pathname + document.location.search) || link.href.startsWith(\"#\")\n};\n\nconst linkOptsOut = (link) => {\n  if (link.getAttribute(\"data-turbo-prefetch\") === \"false\") return true\n  if (link.getAttribute(\"data-turbo\") === \"false\") return true\n\n  const turboPrefetchParent = findClosestRecursively(link, \"[data-turbo-prefetch]\");\n  if (turboPrefetchParent && turboPrefetchParent.getAttribute(\"data-turbo-prefetch\") === \"false\") return true\n\n  return false\n};\n\nconst nonSafeLink = (link) => {\n  const turboMethod = link.getAttribute(\"data-turbo-method\");\n  if (turboMethod && turboMethod.toLowerCase() !== \"get\") return true\n\n  if (isUJS(link)) return true\n  if (link.hasAttribute(\"data-turbo-confirm\")) return true\n  if (link.hasAttribute(\"data-turbo-stream\")) return true\n\n  return false\n};\n\nconst isUJS = (link) => {\n  return link.hasAttribute(\"data-remote\") || link.hasAttribute(\"data-behavior\") || link.hasAttribute(\"data-confirm\") || link.hasAttribute(\"data-method\")\n};\n\nconst eventPrevented = (link) => {\n  const event = dispatch(\"turbo:before-prefetch\", { target: link, cancelable: true });\n  return event.defaultPrevented\n};\n\nclass Navigator {\n  constructor(delegate) {\n    this.delegate = delegate;\n  }\n\n  proposeVisit(location, options = {}) {\n    if (this.delegate.allowsVisitingLocationWithAction(location, options.action)) {\n      this.delegate.visitProposedToLocation(location, options);\n    }\n  }\n\n  startVisit(locatable, restorationIdentifier, options = {}) {\n    this.stop();\n    this.currentVisit = new Visit(this, expandURL(locatable), restorationIdentifier, {\n      referrer: this.location,\n      ...options\n    });\n    this.currentVisit.start();\n  }\n\n  submitForm(form, submitter) {\n    this.stop();\n    this.formSubmission = new FormSubmission(this, form, submitter, true);\n\n    this.formSubmission.start();\n  }\n\n  stop() {\n    if (this.formSubmission) {\n      this.formSubmission.stop();\n      delete this.formSubmission;\n    }\n\n    if (this.currentVisit) {\n      this.currentVisit.cancel();\n      delete this.currentVisit;\n    }\n  }\n\n  get adapter() {\n    return this.delegate.adapter\n  }\n\n  get view() {\n    return this.delegate.view\n  }\n\n  get rootLocation() {\n    return this.view.snapshot.rootLocation\n  }\n\n  get history() {\n    return this.delegate.history\n  }\n\n  // Form submission delegate\n\n  formSubmissionStarted(formSubmission) {\n    // Not all adapters implement formSubmissionStarted\n    if (typeof this.adapter.formSubmissionStarted === \"function\") {\n      this.adapter.formSubmissionStarted(formSubmission);\n    }\n  }\n\n  async formSubmissionSucceededWithResponse(formSubmission, fetchResponse) {\n    if (formSubmission == this.formSubmission) {\n      const responseHTML = await fetchResponse.responseHTML;\n      if (responseHTML) {\n        const shouldCacheSnapshot = formSubmission.isSafe;\n        if (!shouldCacheSnapshot) {\n          this.view.clearSnapshotCache();\n        }\n\n        const { statusCode, redirected } = fetchResponse;\n        const action = this.#getActionForFormSubmission(formSubmission, fetchResponse);\n        const visitOptions = {\n          action,\n          shouldCacheSnapshot,\n          response: { statusCode, responseHTML, redirected }\n        };\n        this.proposeVisit(fetchResponse.location, visitOptions);\n      }\n    }\n  }\n\n  async formSubmissionFailedWithResponse(formSubmission, fetchResponse) {\n    const responseHTML = await fetchResponse.responseHTML;\n\n    if (responseHTML) {\n      const snapshot = PageSnapshot.fromHTMLString(responseHTML);\n      if (fetchResponse.serverError) {\n        await this.view.renderError(snapshot, this.currentVisit);\n      } else {\n        await this.view.renderPage(snapshot, false, true, this.currentVisit);\n      }\n      if (snapshot.refreshScroll !== \"preserve\") {\n        this.view.scrollToTop();\n      }\n      this.view.clearSnapshotCache();\n    }\n  }\n\n  formSubmissionErrored(formSubmission, error) {\n    console.error(error);\n  }\n\n  formSubmissionFinished(formSubmission) {\n    // Not all adapters implement formSubmissionFinished\n    if (typeof this.adapter.formSubmissionFinished === \"function\") {\n      this.adapter.formSubmissionFinished(formSubmission);\n    }\n  }\n\n  // Link prefetching\n\n  linkPrefetchingIsEnabledForLocation(location) {\n    // Not all adapters implement linkPrefetchingIsEnabledForLocation\n    if (typeof this.adapter.linkPrefetchingIsEnabledForLocation === \"function\") {\n      return this.adapter.linkPrefetchingIsEnabledForLocation(location)\n    }\n\n    return true\n  }\n\n  // Visit delegate\n\n  visitStarted(visit) {\n    this.delegate.visitStarted(visit);\n  }\n\n  visitCompleted(visit) {\n    this.delegate.visitCompleted(visit);\n    delete this.currentVisit;\n  }\n\n  // Same-page links are no longer handled with a Visit.\n  // This method is still needed for Turbo Native adapters.\n  locationWithActionIsSamePage(location, action) {\n    return false\n  }\n\n  // Visits\n\n  get location() {\n    return this.history.location\n  }\n\n  get restorationIdentifier() {\n    return this.history.restorationIdentifier\n  }\n\n  #getActionForFormSubmission(formSubmission, fetchResponse) {\n    const { submitter, formElement } = formSubmission;\n    return getVisitAction(submitter, formElement) || this.#getDefaultAction(fetchResponse)\n  }\n\n  #getDefaultAction(fetchResponse) {\n    const sameLocationRedirect = fetchResponse.redirected && fetchResponse.location.href === this.location?.href;\n    return sameLocationRedirect ? \"replace\" : \"advance\"\n  }\n}\n\nconst PageStage = {\n  initial: 0,\n  loading: 1,\n  interactive: 2,\n  complete: 3\n};\n\nclass PageObserver {\n  stage = PageStage.initial\n  started = false\n\n  constructor(delegate) {\n    this.delegate = delegate;\n  }\n\n  start() {\n    if (!this.started) {\n      if (this.stage == PageStage.initial) {\n        this.stage = PageStage.loading;\n      }\n      document.addEventListener(\"readystatechange\", this.interpretReadyState, false);\n      addEventListener(\"pagehide\", this.pageWillUnload, false);\n      this.started = true;\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      document.removeEventListener(\"readystatechange\", this.interpretReadyState, false);\n      removeEventListener(\"pagehide\", this.pageWillUnload, false);\n      this.started = false;\n    }\n  }\n\n  interpretReadyState = () => {\n    const { readyState } = this;\n    if (readyState == \"interactive\") {\n      this.pageIsInteractive();\n    } else if (readyState == \"complete\") {\n      this.pageIsComplete();\n    }\n  }\n\n  pageIsInteractive() {\n    if (this.stage == PageStage.loading) {\n      this.stage = PageStage.interactive;\n      this.delegate.pageBecameInteractive();\n    }\n  }\n\n  pageIsComplete() {\n    this.pageIsInteractive();\n    if (this.stage == PageStage.interactive) {\n      this.stage = PageStage.complete;\n      this.delegate.pageLoaded();\n    }\n  }\n\n  pageWillUnload = () => {\n    this.delegate.pageWillUnload();\n  }\n\n  get readyState() {\n    return document.readyState\n  }\n}\n\nclass ScrollObserver {\n  started = false\n\n  constructor(delegate) {\n    this.delegate = delegate;\n  }\n\n  start() {\n    if (!this.started) {\n      addEventListener(\"scroll\", this.onScroll, false);\n      this.onScroll();\n      this.started = true;\n    }\n  }\n\n  stop() {\n    if (this.started) {\n      removeEventListener(\"scroll\", this.onScroll, false);\n      this.started = false;\n    }\n  }\n\n  onScroll = () => {\n    this.updatePosition({ x: window.pageXOffset, y: window.pageYOffset });\n  }\n\n  // Private\n\n  updatePosition(position) {\n    this.delegate.scrollPositionChanged(position);\n  }\n}\n\nclass StreamMessageRenderer {\n  render({ fragment }) {\n    Bardo.preservingPermanentElements(this, getPermanentElementMapForFragment(fragment), () => {\n      withAutofocusFromFragment(fragment, () => {\n        withPreservedFocus(() => {\n          document.documentElement.appendChild(fragment);\n        });\n      });\n    });\n  }\n\n  // Bardo delegate\n\n  enteringBardo(currentPermanentElement, newPermanentElement) {\n    newPermanentElement.replaceWith(currentPermanentElement.cloneNode(true));\n  }\n\n  leavingBardo() {}\n}\n\nfunction getPermanentElementMapForFragment(fragment) {\n  const permanentElementsInDocument = queryPermanentElementsAll(document.documentElement);\n  const permanentElementMap = {};\n  for (const permanentElementInDocument of permanentElementsInDocument) {\n    const { id } = permanentElementInDocument;\n\n    for (const streamElement of fragment.querySelectorAll(\"turbo-stream\")) {\n      const elementInStream = getPermanentElementById(streamElement.templateElement.content, id);\n\n      if (elementInStream) {\n        permanentElementMap[id] = [permanentElementInDocument, elementInStream];\n      }\n    }\n  }\n\n  return permanentElementMap\n}\n\nasync function withAutofocusFromFragment(fragment, callback) {\n  const generatedID = `turbo-stream-autofocus-${uuid()}`;\n  const turboStreams = fragment.querySelectorAll(\"turbo-stream\");\n  const elementWithAutofocus = firstAutofocusableElementInStreams(turboStreams);\n  let willAutofocusId = null;\n\n  if (elementWithAutofocus) {\n    if (elementWithAutofocus.id) {\n      willAutofocusId = elementWithAutofocus.id;\n    } else {\n      willAutofocusId = generatedID;\n    }\n\n    elementWithAutofocus.id = willAutofocusId;\n  }\n\n  callback();\n  await nextRepaint();\n\n  const hasNoActiveElement = document.activeElement == null || document.activeElement == document.body;\n\n  if (hasNoActiveElement && willAutofocusId) {\n    const elementToAutofocus = document.getElementById(willAutofocusId);\n\n    if (elementIsFocusable(elementToAutofocus)) {\n      elementToAutofocus.focus();\n    }\n    if (elementToAutofocus && elementToAutofocus.id == generatedID) {\n      elementToAutofocus.removeAttribute(\"id\");\n    }\n  }\n}\n\nasync function withPreservedFocus(callback) {\n  const [activeElementBeforeRender, activeElementAfterRender] = await around(callback, () => document.activeElement);\n\n  const restoreFocusTo = activeElementBeforeRender && activeElementBeforeRender.id;\n\n  if (restoreFocusTo) {\n    const elementToFocus = document.getElementById(restoreFocusTo);\n\n    if (elementIsFocusable(elementToFocus) && elementToFocus != activeElementAfterRender) {\n      elementToFocus.focus();\n    }\n  }\n}\n\nfunction firstAutofocusableElementInStreams(nodeListOfStreamElements) {\n  for (const streamElement of nodeListOfStreamElements) {\n    const elementWithAutofocus = queryAutofocusableElement(streamElement.templateElement.content);\n\n    if (elementWithAutofocus) return elementWithAutofocus\n  }\n\n  return null\n}\n\nclass StreamObserver {\n  sources = new Set()\n  #started = false\n\n  constructor(delegate) {\n    this.delegate = delegate;\n  }\n\n  start() {\n    if (!this.#started) {\n      this.#started = true;\n      addEventListener(\"turbo:before-fetch-response\", this.inspectFetchResponse, false);\n    }\n  }\n\n  stop() {\n    if (this.#started) {\n      this.#started = false;\n      removeEventListener(\"turbo:before-fetch-response\", this.inspectFetchResponse, false);\n    }\n  }\n\n  connectStreamSource(source) {\n    if (!this.streamSourceIsConnected(source)) {\n      this.sources.add(source);\n      source.addEventListener(\"message\", this.receiveMessageEvent, false);\n    }\n  }\n\n  disconnectStreamSource(source) {\n    if (this.streamSourceIsConnected(source)) {\n      this.sources.delete(source);\n      source.removeEventListener(\"message\", this.receiveMessageEvent, false);\n    }\n  }\n\n  streamSourceIsConnected(source) {\n    return this.sources.has(source)\n  }\n\n  inspectFetchResponse = (event) => {\n    const response = fetchResponseFromEvent(event);\n    if (response && fetchResponseIsStream(response)) {\n      event.preventDefault();\n      this.receiveMessageResponse(response);\n    }\n  }\n\n  receiveMessageEvent = (event) => {\n    if (this.#started && typeof event.data == \"string\") {\n      this.receiveMessageHTML(event.data);\n    }\n  }\n\n  async receiveMessageResponse(response) {\n    const html = await response.responseHTML;\n    if (html) {\n      this.receiveMessageHTML(html);\n    }\n  }\n\n  receiveMessageHTML(html) {\n    this.delegate.receivedMessageFromStream(StreamMessage.wrap(html));\n  }\n}\n\nfunction fetchResponseFromEvent(event) {\n  const fetchResponse = event.detail?.fetchResponse;\n  if (fetchResponse instanceof FetchResponse) {\n    return fetchResponse\n  }\n}\n\nfunction fetchResponseIsStream(response) {\n  const contentType = response.contentType ?? \"\";\n  return contentType.startsWith(StreamMessage.contentType)\n}\n\nclass ErrorRenderer extends Renderer {\n  static renderElement(currentElement, newElement) {\n    const { documentElement, body } = document;\n\n    documentElement.replaceChild(newElement, body);\n  }\n\n  async render() {\n    this.replaceHeadAndBody();\n    this.activateScriptElements();\n  }\n\n  replaceHeadAndBody() {\n    const { documentElement, head } = document;\n    documentElement.replaceChild(this.newHead, head);\n    this.renderElement(this.currentElement, this.newElement);\n  }\n\n  activateScriptElements() {\n    for (const replaceableElement of this.scriptElements) {\n      const parentNode = replaceableElement.parentNode;\n      if (parentNode) {\n        const element = activateScriptElement(replaceableElement);\n        parentNode.replaceChild(element, replaceableElement);\n      }\n    }\n  }\n\n  get newHead() {\n    return this.newSnapshot.headSnapshot.element\n  }\n\n  get scriptElements() {\n    return document.documentElement.querySelectorAll(\"script\")\n  }\n}\n\nclass PageRenderer extends Renderer {\n  static renderElement(currentElement, newElement) {\n    if (document.body && newElement instanceof HTMLBodyElement) {\n      document.body.replaceWith(newElement);\n    } else {\n      document.documentElement.appendChild(newElement);\n    }\n  }\n\n  get shouldRender() {\n    return this.newSnapshot.isVisitable && this.trackedElementsAreIdentical\n  }\n\n  get reloadReason() {\n    if (!this.newSnapshot.isVisitable) {\n      return {\n        reason: \"turbo_visit_control_is_reload\"\n      }\n    }\n\n    if (!this.trackedElementsAreIdentical) {\n      return {\n        reason: \"tracked_element_mismatch\"\n      }\n    }\n  }\n\n  async prepareToRender() {\n    this.#setLanguage();\n    await this.mergeHead();\n  }\n\n  async render() {\n    if (this.willRender) {\n      await this.replaceBody();\n    }\n  }\n\n  finishRendering() {\n    super.finishRendering();\n    if (!this.isPreview) {\n      this.focusFirstAutofocusableElement();\n    }\n  }\n\n  get currentHeadSnapshot() {\n    return this.currentSnapshot.headSnapshot\n  }\n\n  get newHeadSnapshot() {\n    return this.newSnapshot.headSnapshot\n  }\n\n  get newElement() {\n    return this.newSnapshot.element\n  }\n\n  #setLanguage() {\n    const { documentElement } = this.currentSnapshot;\n    const { dir, lang } = this.newSnapshot;\n\n    if (lang) {\n      documentElement.setAttribute(\"lang\", lang);\n    } else {\n      documentElement.removeAttribute(\"lang\");\n    }\n    if (dir) {\n      documentElement.setAttribute(\"dir\", dir);\n    } else {\n      documentElement.removeAttribute(\"dir\");\n    }\n  }\n\n  async mergeHead() {\n    const mergedHeadElements = this.mergeProvisionalElements();\n    const newStylesheetElements = this.copyNewHeadStylesheetElements();\n    this.copyNewHeadScriptElements();\n\n    await mergedHeadElements;\n    await newStylesheetElements;\n\n    if (this.willRender) {\n      this.removeUnusedDynamicStylesheetElements();\n    }\n  }\n\n  async replaceBody() {\n    await this.preservingPermanentElements(async () => {\n      this.activateNewBody();\n      await this.assignNewBody();\n    });\n  }\n\n  get trackedElementsAreIdentical() {\n    return this.currentHeadSnapshot.trackedElementSignature == this.newHeadSnapshot.trackedElementSignature\n  }\n\n  async copyNewHeadStylesheetElements() {\n    const loadingElements = [];\n\n    for (const element of this.newHeadStylesheetElements) {\n      loadingElements.push(waitForLoad(element));\n\n      document.head.appendChild(element);\n    }\n\n    await Promise.all(loadingElements);\n  }\n\n  copyNewHeadScriptElements() {\n    for (const element of this.newHeadScriptElements) {\n      document.head.appendChild(activateScriptElement(element));\n    }\n  }\n\n  removeUnusedDynamicStylesheetElements() {\n    for (const element of this.unusedDynamicStylesheetElements) {\n      document.head.removeChild(element);\n    }\n  }\n\n  async mergeProvisionalElements() {\n    const newHeadElements = [...this.newHeadProvisionalElements];\n\n    for (const element of this.currentHeadProvisionalElements) {\n      if (!this.isCurrentElementInElementList(element, newHeadElements)) {\n        document.head.removeChild(element);\n      }\n    }\n\n    for (const element of newHeadElements) {\n      document.head.appendChild(element);\n    }\n  }\n\n  isCurrentElementInElementList(element, elementList) {\n    for (const [index, newElement] of elementList.entries()) {\n      // if title element...\n      if (element.tagName == \"TITLE\") {\n        if (newElement.tagName != \"TITLE\") {\n          continue\n        }\n        if (element.innerHTML == newElement.innerHTML) {\n          elementList.splice(index, 1);\n          return true\n        }\n      }\n\n      // if any other element...\n      if (newElement.isEqualNode(element)) {\n        elementList.splice(index, 1);\n        return true\n      }\n    }\n\n    return false\n  }\n\n  removeCurrentHeadProvisionalElements() {\n    for (const element of this.currentHeadProvisionalElements) {\n      document.head.removeChild(element);\n    }\n  }\n\n  copyNewHeadProvisionalElements() {\n    for (const element of this.newHeadProvisionalElements) {\n      document.head.appendChild(element);\n    }\n  }\n\n  activateNewBody() {\n    document.adoptNode(this.newElement);\n    this.removeNoscriptElements();\n    this.activateNewBodyScriptElements();\n  }\n\n  removeNoscriptElements() {\n    for (const noscriptElement of this.newElement.querySelectorAll(\"noscript\")) {\n      noscriptElement.remove();\n    }\n  }\n\n  activateNewBodyScriptElements() {\n    for (const inertScriptElement of this.newBodyScriptElements) {\n      const activatedScriptElement = activateScriptElement(inertScriptElement);\n      inertScriptElement.replaceWith(activatedScriptElement);\n    }\n  }\n\n  async assignNewBody() {\n    await this.renderElement(this.currentElement, this.newElement);\n  }\n\n  get unusedDynamicStylesheetElements() {\n    return this.oldHeadStylesheetElements.filter((element) => {\n      return element.getAttribute(\"data-turbo-track\") === \"dynamic\"\n    })\n  }\n\n  get oldHeadStylesheetElements() {\n    return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)\n  }\n\n  get newHeadStylesheetElements() {\n    return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)\n  }\n\n  get newHeadScriptElements() {\n    return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)\n  }\n\n  get currentHeadProvisionalElements() {\n    return this.currentHeadSnapshot.provisionalElements\n  }\n\n  get newHeadProvisionalElements() {\n    return this.newHeadSnapshot.provisionalElements\n  }\n\n  get newBodyScriptElements() {\n    return this.newElement.querySelectorAll(\"script\")\n  }\n}\n\nclass MorphingPageRenderer extends PageRenderer {\n  static renderElement(currentElement, newElement) {\n    morphElements(currentElement, newElement, {\n      callbacks: {\n        beforeNodeMorphed: (node, newNode) => {\n          if (\n            shouldRefreshFrameWithMorphing(node, newNode) &&\n              !closestFrameReloadableWithMorphing(node)\n          ) {\n            node.reload();\n            return false\n          }\n          return true\n        }\n      }\n    });\n\n    dispatch(\"turbo:morph\", { detail: { currentElement, newElement } });\n  }\n\n  async preservingPermanentElements(callback) {\n    return await callback()\n  }\n\n  get renderMethod() {\n    return \"morph\"\n  }\n\n  get shouldAutofocus() {\n    return false\n  }\n}\n\nclass SnapshotCache extends LRUCache {\n  constructor(size) {\n    super(size, toCacheKey);\n  }\n\n  get snapshots() {\n    return this.entries\n  }\n}\n\nclass PageView extends View {\n  snapshotCache = new SnapshotCache(10)\n  lastRenderedLocation = new URL(location.href)\n  forceReloaded = false\n\n  shouldTransitionTo(newSnapshot) {\n    return this.snapshot.prefersViewTransitions && newSnapshot.prefersViewTransitions\n  }\n\n  renderPage(snapshot, isPreview = false, willRender = true, visit) {\n    const shouldMorphPage = this.isPageRefresh(visit) && (visit?.refresh?.method || this.snapshot.refreshMethod) === \"morph\";\n    const rendererClass = shouldMorphPage ? MorphingPageRenderer : PageRenderer;\n\n    const renderer = new rendererClass(this.snapshot, snapshot, isPreview, willRender);\n\n    if (!renderer.shouldRender) {\n      this.forceReloaded = true;\n    } else {\n      visit?.changeHistory();\n    }\n\n    return this.render(renderer)\n  }\n\n  renderError(snapshot, visit) {\n    visit?.changeHistory();\n    const renderer = new ErrorRenderer(this.snapshot, snapshot, false);\n    return this.render(renderer)\n  }\n\n  clearSnapshotCache() {\n    this.snapshotCache.clear();\n  }\n\n  async cacheSnapshot(snapshot = this.snapshot) {\n    if (snapshot.isCacheable) {\n      this.delegate.viewWillCacheSnapshot();\n      const { lastRenderedLocation: location } = this;\n      await nextEventLoopTick();\n      const cachedSnapshot = snapshot.clone();\n      this.snapshotCache.put(location, cachedSnapshot);\n      return cachedSnapshot\n    }\n  }\n\n  getCachedSnapshotForLocation(location) {\n    return this.snapshotCache.get(location)\n  }\n\n  isPageRefresh(visit) {\n    return !visit || (this.lastRenderedLocation.pathname === visit.location.pathname && visit.action === \"replace\")\n  }\n\n  shouldPreserveScrollPosition(visit) {\n    return this.isPageRefresh(visit) && (visit?.refresh?.scroll || this.snapshot.refreshScroll) === \"preserve\"\n  }\n\n  get snapshot() {\n    return PageSnapshot.fromElement(this.element)\n  }\n}\n\nclass Preloader {\n  selector = \"a[data-turbo-preload]\"\n\n  constructor(delegate, snapshotCache) {\n    this.delegate = delegate;\n    this.snapshotCache = snapshotCache;\n  }\n\n  start() {\n    if (document.readyState === \"loading\") {\n      document.addEventListener(\"DOMContentLoaded\", this.#preloadAll);\n    } else {\n      this.preloadOnLoadLinksForView(document.body);\n    }\n  }\n\n  stop() {\n    document.removeEventListener(\"DOMContentLoaded\", this.#preloadAll);\n  }\n\n  preloadOnLoadLinksForView(element) {\n    for (const link of element.querySelectorAll(this.selector)) {\n      if (this.delegate.shouldPreloadLink(link)) {\n        this.preloadURL(link);\n      }\n    }\n  }\n\n  async preloadURL(link) {\n    const location = new URL(link.href);\n\n    if (this.snapshotCache.has(location)) {\n      return\n    }\n\n    const fetchRequest = new FetchRequest(this, FetchMethod.get, location, new URLSearchParams(), link);\n    await fetchRequest.perform();\n  }\n\n  // Fetch request delegate\n\n  prepareRequest(fetchRequest) {\n    fetchRequest.headers[\"X-Sec-Purpose\"] = \"prefetch\";\n  }\n\n  async requestSucceededWithResponse(fetchRequest, fetchResponse) {\n    try {\n      const responseHTML = await fetchResponse.responseHTML;\n      const snapshot = PageSnapshot.fromHTMLString(responseHTML);\n\n      this.snapshotCache.put(fetchRequest.url, snapshot);\n    } catch (_) {\n      // If we cannot preload that is ok!\n    }\n  }\n\n  requestStarted(fetchRequest) {}\n\n  requestErrored(fetchRequest) {}\n\n  requestFinished(fetchRequest) {}\n\n  requestPreventedHandlingResponse(fetchRequest, fetchResponse) {}\n\n  requestFailedWithResponse(fetchRequest, fetchResponse) {}\n\n  #preloadAll = () => {\n    this.preloadOnLoadLinksForView(document.body);\n  }\n}\n\nclass Cache {\n  constructor(session) {\n    this.session = session;\n  }\n\n  clear() {\n    this.session.clearCache();\n  }\n\n  resetCacheControl() {\n    this.#setCacheControl(\"\");\n  }\n\n  exemptPageFromCache() {\n    this.#setCacheControl(\"no-cache\");\n  }\n\n  exemptPageFromPreview() {\n    this.#setCacheControl(\"no-preview\");\n  }\n\n  #setCacheControl(value) {\n    setMetaContent(\"turbo-cache-control\", value);\n  }\n}\n\nclass Session {\n  navigator = new Navigator(this)\n  history = new History(this)\n  view = new PageView(this, document.documentElement)\n  adapter = new BrowserAdapter(this)\n\n  pageObserver = new PageObserver(this)\n  cacheObserver = new CacheObserver()\n  linkPrefetchObserver = new LinkPrefetchObserver(this, document)\n  linkClickObserver = new LinkClickObserver(this, window)\n  formSubmitObserver = new FormSubmitObserver(this, document)\n  scrollObserver = new ScrollObserver(this)\n  streamObserver = new StreamObserver(this)\n  formLinkClickObserver = new FormLinkClickObserver(this, document.documentElement)\n  frameRedirector = new FrameRedirector(this, document.documentElement)\n  streamMessageRenderer = new StreamMessageRenderer()\n  cache = new Cache(this)\n\n  enabled = true\n  started = false\n  #pageRefreshDebouncePeriod = 150\n\n  constructor(recentRequests) {\n    this.recentRequests = recentRequests;\n    this.preloader = new Preloader(this, this.view.snapshotCache);\n    this.debouncedRefresh = this.refresh;\n    this.pageRefreshDebouncePeriod = this.pageRefreshDebouncePeriod;\n  }\n\n  start() {\n    if (!this.started) {\n      this.pageObserver.start();\n      this.cacheObserver.start();\n      this.linkPrefetchObserver.start();\n      this.formLinkClickObserver.start();\n      this.linkClickObserver.start();\n      this.formSubmitObserver.start();\n      this.scrollObserver.start();\n      this.streamObserver.start();\n      this.frameRedirector.start();\n      this.history.start();\n      this.preloader.start();\n      this.started = true;\n      this.enabled = true;\n    }\n  }\n\n  disable() {\n    this.enabled = false;\n  }\n\n  stop() {\n    if (this.started) {\n      this.pageObserver.stop();\n      this.cacheObserver.stop();\n      this.linkPrefetchObserver.stop();\n      this.formLinkClickObserver.stop();\n      this.linkClickObserver.stop();\n      this.formSubmitObserver.stop();\n      this.scrollObserver.stop();\n      this.streamObserver.stop();\n      this.frameRedirector.stop();\n      this.history.stop();\n      this.preloader.stop();\n      this.started = false;\n    }\n  }\n\n  registerAdapter(adapter) {\n    this.adapter = adapter;\n  }\n\n  visit(location, options = {}) {\n    const frameElement = options.frame ? document.getElementById(options.frame) : null;\n\n    if (frameElement instanceof FrameElement) {\n      const action = options.action || getVisitAction(frameElement);\n\n      frameElement.delegate.proposeVisitIfNavigatedWithAction(frameElement, action);\n      frameElement.src = location.toString();\n    } else {\n      this.navigator.proposeVisit(expandURL(location), options);\n    }\n  }\n\n  refresh(url, options = {}) {\n    options = typeof options === \"string\" ? { requestId: options } : options;\n\n    const { method, requestId, scroll } = options;\n    const isRecentRequest = requestId && this.recentRequests.has(requestId);\n    const isCurrentUrl = url === document.baseURI;\n    if (!isRecentRequest && !this.navigator.currentVisit && isCurrentUrl) {\n      this.visit(url, { action: \"replace\", shouldCacheSnapshot: false, refresh: { method, scroll } });\n    }\n  }\n\n  connectStreamSource(source) {\n    this.streamObserver.connectStreamSource(source);\n  }\n\n  disconnectStreamSource(source) {\n    this.streamObserver.disconnectStreamSource(source);\n  }\n\n  renderStreamMessage(message) {\n    this.streamMessageRenderer.render(StreamMessage.wrap(message));\n  }\n\n  clearCache() {\n    this.view.clearSnapshotCache();\n  }\n\n  setProgressBarDelay(delay) {\n    console.warn(\n      \"Please replace `session.setProgressBarDelay(delay)` with `session.progressBarDelay = delay`. The function is deprecated and will be removed in a future version of Turbo.`\"\n    );\n\n    this.progressBarDelay = delay;\n  }\n\n  set progressBarDelay(delay) {\n    config.drive.progressBarDelay = delay;\n  }\n\n  get progressBarDelay() {\n    return config.drive.progressBarDelay\n  }\n\n  set drive(value) {\n    config.drive.enabled = value;\n  }\n\n  get drive() {\n    return config.drive.enabled\n  }\n\n  set formMode(value) {\n    config.forms.mode = value;\n  }\n\n  get formMode() {\n    return config.forms.mode\n  }\n\n  get location() {\n    return this.history.location\n  }\n\n  get restorationIdentifier() {\n    return this.history.restorationIdentifier\n  }\n\n  get pageRefreshDebouncePeriod() {\n    return this.#pageRefreshDebouncePeriod\n  }\n\n  set pageRefreshDebouncePeriod(value) {\n    this.refresh = debounce(this.debouncedRefresh.bind(this), value);\n    this.#pageRefreshDebouncePeriod = value;\n  }\n\n  // Preloader delegate\n\n  shouldPreloadLink(element) {\n    const isUnsafe = element.hasAttribute(\"data-turbo-method\");\n    const isStream = element.hasAttribute(\"data-turbo-stream\");\n    const frameTarget = element.getAttribute(\"data-turbo-frame\");\n    const frame = frameTarget == \"_top\" ?\n      null :\n      document.getElementById(frameTarget) || findClosestRecursively(element, \"turbo-frame:not([disabled])\");\n\n    if (isUnsafe || isStream || frame instanceof FrameElement) {\n      return false\n    } else {\n      const location = new URL(element.href);\n\n      return this.elementIsNavigatable(element) && locationIsVisitable(location, this.snapshot.rootLocation)\n    }\n  }\n\n  // History delegate\n\n  historyPoppedToLocationWithRestorationIdentifierAndDirection(location, restorationIdentifier, direction) {\n    if (this.enabled) {\n      this.navigator.startVisit(location, restorationIdentifier, {\n        action: \"restore\",\n        historyChanged: true,\n        direction\n      });\n    } else {\n      this.adapter.pageInvalidated({\n        reason: \"turbo_disabled\"\n      });\n    }\n  }\n\n  historyPoppedWithEmptyState(location) {\n    this.history.replace(location);\n    this.view.lastRenderedLocation = location;\n    this.view.cacheSnapshot();\n  }\n\n  // Scroll observer delegate\n\n  scrollPositionChanged(position) {\n    this.history.updateRestorationData({ scrollPosition: position });\n  }\n\n  // Form click observer delegate\n\n  willSubmitFormLinkToLocation(link, location) {\n    return this.elementIsNavigatable(link) && locationIsVisitable(location, this.snapshot.rootLocation)\n  }\n\n  submittedFormLinkToLocation() {}\n\n  // Link hover observer delegate\n\n  canPrefetchRequestToLocation(link, location) {\n    return (\n      this.elementIsNavigatable(link) &&\n      locationIsVisitable(location, this.snapshot.rootLocation) &&\n      this.navigator.linkPrefetchingIsEnabledForLocation(location)\n    )\n  }\n\n  // Link click observer delegate\n\n  willFollowLinkToLocation(link, location, event) {\n    return (\n      this.elementIsNavigatable(link) &&\n      locationIsVisitable(location, this.snapshot.rootLocation) &&\n      this.applicationAllowsFollowingLinkToLocation(link, location, event)\n    )\n  }\n\n  followedLinkToLocation(link, location) {\n    const action = this.getActionForLink(link);\n    const acceptsStreamResponse = link.hasAttribute(\"data-turbo-stream\");\n\n    this.visit(location.href, { action, acceptsStreamResponse });\n  }\n\n  // Navigator delegate\n\n  allowsVisitingLocationWithAction(location, action) {\n    return this.applicationAllowsVisitingLocation(location)\n  }\n\n  visitProposedToLocation(location, options) {\n    extendURLWithDeprecatedProperties(location);\n    this.adapter.visitProposedToLocation(location, options);\n  }\n\n  // Visit delegate\n\n  visitStarted(visit) {\n    if (!visit.acceptsStreamResponse) {\n      markAsBusy(document.documentElement);\n      this.view.markVisitDirection(visit.direction);\n    }\n    extendURLWithDeprecatedProperties(visit.location);\n    this.notifyApplicationAfterVisitingLocation(visit.location, visit.action);\n  }\n\n  visitCompleted(visit) {\n    this.view.unmarkVisitDirection();\n    clearBusyState(document.documentElement);\n    this.notifyApplicationAfterPageLoad(visit.getTimingMetrics());\n  }\n\n  // Form submit observer delegate\n\n  willSubmitForm(form, submitter) {\n    const action = getAction$1(form, submitter);\n\n    return (\n      this.submissionIsNavigatable(form, submitter) &&\n      locationIsVisitable(expandURL(action), this.snapshot.rootLocation)\n    )\n  }\n\n  formSubmitted(form, submitter) {\n    this.navigator.submitForm(form, submitter);\n  }\n\n  // Page observer delegate\n\n  pageBecameInteractive() {\n    this.view.lastRenderedLocation = this.location;\n    this.notifyApplicationAfterPageLoad();\n  }\n\n  pageLoaded() {\n    this.history.assumeControlOfScrollRestoration();\n  }\n\n  pageWillUnload() {\n    this.history.relinquishControlOfScrollRestoration();\n  }\n\n  // Stream observer delegate\n\n  receivedMessageFromStream(message) {\n    this.renderStreamMessage(message);\n  }\n\n  // Page view delegate\n\n  viewWillCacheSnapshot() {\n    this.notifyApplicationBeforeCachingSnapshot();\n  }\n\n  allowsImmediateRender({ element }, options) {\n    const event = this.notifyApplicationBeforeRender(element, options);\n    const {\n      defaultPrevented,\n      detail: { render }\n    } = event;\n\n    if (this.view.renderer && render) {\n      this.view.renderer.renderElement = render;\n    }\n\n    return !defaultPrevented\n  }\n\n  viewRenderedSnapshot(_snapshot, _isPreview, renderMethod) {\n    this.view.lastRenderedLocation = this.history.location;\n    this.notifyApplicationAfterRender(renderMethod);\n  }\n\n  preloadOnLoadLinksForView(element) {\n    this.preloader.preloadOnLoadLinksForView(element);\n  }\n\n  viewInvalidated(reason) {\n    this.adapter.pageInvalidated(reason);\n  }\n\n  // Frame element\n\n  frameLoaded(frame) {\n    this.notifyApplicationAfterFrameLoad(frame);\n  }\n\n  frameRendered(fetchResponse, frame) {\n    this.notifyApplicationAfterFrameRender(fetchResponse, frame);\n  }\n\n  // Application events\n\n  applicationAllowsFollowingLinkToLocation(link, location, ev) {\n    const event = this.notifyApplicationAfterClickingLinkToLocation(link, location, ev);\n    return !event.defaultPrevented\n  }\n\n  applicationAllowsVisitingLocation(location) {\n    const event = this.notifyApplicationBeforeVisitingLocation(location);\n    return !event.defaultPrevented\n  }\n\n  notifyApplicationAfterClickingLinkToLocation(link, location, event) {\n    return dispatch(\"turbo:click\", {\n      target: link,\n      detail: { url: location.href, originalEvent: event },\n      cancelable: true\n    })\n  }\n\n  notifyApplicationBeforeVisitingLocation(location) {\n    return dispatch(\"turbo:before-visit\", {\n      detail: { url: location.href },\n      cancelable: true\n    })\n  }\n\n  notifyApplicationAfterVisitingLocation(location, action) {\n    return dispatch(\"turbo:visit\", { detail: { url: location.href, action } })\n  }\n\n  notifyApplicationBeforeCachingSnapshot() {\n    return dispatch(\"turbo:before-cache\")\n  }\n\n  notifyApplicationBeforeRender(newBody, options) {\n    return dispatch(\"turbo:before-render\", {\n      detail: { newBody, ...options },\n      cancelable: true\n    })\n  }\n\n  notifyApplicationAfterRender(renderMethod) {\n    return dispatch(\"turbo:render\", { detail: { renderMethod } })\n  }\n\n  notifyApplicationAfterPageLoad(timing = {}) {\n    return dispatch(\"turbo:load\", {\n      detail: { url: this.location.href, timing }\n    })\n  }\n\n  notifyApplicationAfterFrameLoad(frame) {\n    return dispatch(\"turbo:frame-load\", { target: frame })\n  }\n\n  notifyApplicationAfterFrameRender(fetchResponse, frame) {\n    return dispatch(\"turbo:frame-render\", {\n      detail: { fetchResponse },\n      target: frame,\n      cancelable: true\n    })\n  }\n\n  // Helpers\n\n  submissionIsNavigatable(form, submitter) {\n    if (config.forms.mode == \"off\") {\n      return false\n    } else {\n      const submitterIsNavigatable = submitter ? this.elementIsNavigatable(submitter) : true;\n\n      if (config.forms.mode == \"optin\") {\n        return submitterIsNavigatable && form.closest('[data-turbo=\"true\"]') != null\n      } else {\n        return submitterIsNavigatable && this.elementIsNavigatable(form)\n      }\n    }\n  }\n\n  elementIsNavigatable(element) {\n    const container = findClosestRecursively(element, \"[data-turbo]\");\n    const withinFrame = findClosestRecursively(element, \"turbo-frame\");\n\n    // Check if Drive is enabled on the session or we're within a Frame.\n    if (config.drive.enabled || withinFrame) {\n      // Element is navigatable by default, unless `data-turbo=\"false\"`.\n      if (container) {\n        return container.getAttribute(\"data-turbo\") != \"false\"\n      } else {\n        return true\n      }\n    } else {\n      // Element isn't navigatable by default, unless `data-turbo=\"true\"`.\n      if (container) {\n        return container.getAttribute(\"data-turbo\") == \"true\"\n      } else {\n        return false\n      }\n    }\n  }\n\n  // Private\n\n  getActionForLink(link) {\n    return getVisitAction(link) || \"advance\"\n  }\n\n  get snapshot() {\n    return this.view.snapshot\n  }\n}\n\n// Older versions of the Turbo Native adapters referenced the\n// `Location#absoluteURL` property in their implementations of\n// the `Adapter#visitProposedToLocation()` and `#visitStarted()`\n// methods. The Location class has since been removed in favor\n// of the DOM URL API, and accordingly all Adapter methods now\n// receive URL objects.\n//\n// We alias #absoluteURL to #toString() here to avoid crashing\n// older adapters which do not expect URL objects. We should\n// consider removing this support at some point in the future.\n\nfunction extendURLWithDeprecatedProperties(url) {\n  Object.defineProperties(url, deprecatedLocationPropertyDescriptors);\n}\n\nconst deprecatedLocationPropertyDescriptors = {\n  absoluteURL: {\n    get() {\n      return this.toString()\n    }\n  }\n};\n\nconst session = new Session(recentRequests);\nconst { cache, navigator } = session;\n\n/**\n * Starts the main session.\n * This initialises any necessary observers such as those to monitor\n * link interactions.\n */\nfunction start() {\n  session.start();\n}\n\n/**\n * Registers an adapter for the main session.\n *\n * @param adapter Adapter to register\n */\nfunction registerAdapter(adapter) {\n  session.registerAdapter(adapter);\n}\n\n/**\n * Performs an application visit to the given location.\n *\n * @param location Location to visit (a URL or path)\n * @param options Options to apply\n * @param options.action Type of history navigation to apply (\"restore\",\n * \"replace\" or \"advance\")\n * @param options.historyChanged Specifies whether the browser history has\n * already been changed for this visit or not\n * @param options.referrer Specifies the referrer of this visit such that\n * navigations to the same page will not result in a new history entry.\n * @param options.snapshotHTML Cached snapshot to render\n * @param options.response Response of the specified location\n */\nfunction visit(location, options) {\n  session.visit(location, options);\n}\n\n/**\n * Connects a stream source to the main session.\n *\n * @param source Stream source to connect\n */\nfunction connectStreamSource(source) {\n  session.connectStreamSource(source);\n}\n\n/**\n * Disconnects a stream source from the main session.\n *\n * @param source Stream source to disconnect\n */\nfunction disconnectStreamSource(source) {\n  session.disconnectStreamSource(source);\n}\n\n/**\n * Renders a stream message to the main session by appending it to the\n * current document.\n *\n * @param message Message to render\n */\nfunction renderStreamMessage(message) {\n  session.renderStreamMessage(message);\n}\n\n/**\n * Sets the delay after which the progress bar will appear during navigation.\n *\n * The progress bar appears after 500ms by default.\n *\n * Note that this method has no effect when used with the iOS or Android\n * adapters.\n *\n * @param delay Time to delay in milliseconds\n */\nfunction setProgressBarDelay(delay) {\n  console.warn(\n    \"Please replace `Turbo.setProgressBarDelay(delay)` with `Turbo.config.drive.progressBarDelay = delay`. The top-level function is deprecated and will be removed in a future version of Turbo.`\"\n  );\n  config.drive.progressBarDelay = delay;\n}\n\nfunction setConfirmMethod(confirmMethod) {\n  console.warn(\n    \"Please replace `Turbo.setConfirmMethod(confirmMethod)` with `Turbo.config.forms.confirm = confirmMethod`. The top-level function is deprecated and will be removed in a future version of Turbo.`\"\n  );\n  config.forms.confirm = confirmMethod;\n}\n\nfunction setFormMode(mode) {\n  console.warn(\n    \"Please replace `Turbo.setFormMode(mode)` with `Turbo.config.forms.mode = mode`. The top-level function is deprecated and will be removed in a future version of Turbo.`\"\n  );\n  config.forms.mode = mode;\n}\n\n/**\n * Morph the state of the currentBody based on the attributes and contents of\n * the newBody. Morphing body elements may dispatch turbo:morph,\n * turbo:before-morph-element, turbo:before-morph-attribute, and\n * turbo:morph-element events.\n *\n * @param currentBody HTMLBodyElement destination of morphing changes\n * @param newBody HTMLBodyElement source of morphing changes\n */\nfunction morphBodyElements(currentBody, newBody) {\n  MorphingPageRenderer.renderElement(currentBody, newBody);\n}\n\n/**\n * Morph the child elements of the currentFrame based on the child elements of\n * the newFrame. Morphing turbo-frame elements may dispatch turbo:before-frame-morph,\n * turbo:before-morph-element, turbo:before-morph-attribute, and\n * turbo:morph-element events.\n *\n * @param currentFrame FrameElement destination of morphing children changes\n * @param newFrame FrameElement source of morphing children changes\n */\nfunction morphTurboFrameElements(currentFrame, newFrame) {\n  MorphingFrameRenderer.renderElement(currentFrame, newFrame);\n}\n\nvar Turbo = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  navigator: navigator,\n  session: session,\n  cache: cache,\n  PageRenderer: PageRenderer,\n  PageSnapshot: PageSnapshot,\n  FrameRenderer: FrameRenderer,\n  fetch: fetchWithTurboHeaders,\n  config: config,\n  start: start,\n  registerAdapter: registerAdapter,\n  visit: visit,\n  connectStreamSource: connectStreamSource,\n  disconnectStreamSource: disconnectStreamSource,\n  renderStreamMessage: renderStreamMessage,\n  setProgressBarDelay: setProgressBarDelay,\n  setConfirmMethod: setConfirmMethod,\n  setFormMode: setFormMode,\n  morphBodyElements: morphBodyElements,\n  morphTurboFrameElements: morphTurboFrameElements,\n  morphChildren: morphChildren,\n  morphElements: morphElements\n});\n\nclass TurboFrameMissingError extends Error {}\n\nclass FrameController {\n  fetchResponseLoaded = (_fetchResponse) => Promise.resolve()\n  #currentFetchRequest = null\n  #resolveVisitPromise = () => {}\n  #connected = false\n  #hasBeenLoaded = false\n  #ignoredAttributes = new Set()\n  #shouldMorphFrame = false\n  action = null\n\n  constructor(element) {\n    this.element = element;\n    this.view = new FrameView(this, this.element);\n    this.appearanceObserver = new AppearanceObserver(this, this.element);\n    this.formLinkClickObserver = new FormLinkClickObserver(this, this.element);\n    this.linkInterceptor = new LinkInterceptor(this, this.element);\n    this.restorationIdentifier = uuid();\n    this.formSubmitObserver = new FormSubmitObserver(this, this.element);\n  }\n\n  // Frame delegate\n\n  connect() {\n    if (!this.#connected) {\n      this.#connected = true;\n      if (this.loadingStyle == FrameLoadingStyle.lazy) {\n        this.appearanceObserver.start();\n      } else {\n        this.#loadSourceURL();\n      }\n      this.formLinkClickObserver.start();\n      this.linkInterceptor.start();\n      this.formSubmitObserver.start();\n    }\n  }\n\n  disconnect() {\n    if (this.#connected) {\n      this.#connected = false;\n      this.appearanceObserver.stop();\n      this.formLinkClickObserver.stop();\n      this.linkInterceptor.stop();\n      this.formSubmitObserver.stop();\n\n      if (!this.element.hasAttribute(\"recurse\")) {\n        this.#currentFetchRequest?.cancel();\n      }\n    }\n  }\n\n  disabledChanged() {\n    if (this.disabled) {\n      this.#currentFetchRequest?.cancel();\n    } else if (this.loadingStyle == FrameLoadingStyle.eager) {\n      this.#loadSourceURL();\n    }\n  }\n\n  sourceURLChanged() {\n    if (this.#isIgnoringChangesTo(\"src\")) return\n\n    if (!this.sourceURL) {\n      this.#currentFetchRequest?.cancel();\n    }\n\n    if (this.element.isConnected) {\n      this.complete = false;\n    }\n\n    if (this.loadingStyle == FrameLoadingStyle.eager || this.#hasBeenLoaded) {\n      this.#loadSourceURL();\n    }\n  }\n\n  sourceURLReloaded() {\n    const { refresh, src } = this.element;\n\n    this.#shouldMorphFrame = src && refresh === \"morph\";\n\n    this.element.removeAttribute(\"complete\");\n    this.element.src = null;\n    this.element.src = src;\n    return this.element.loaded\n  }\n\n  loadingStyleChanged() {\n    if (this.loadingStyle == FrameLoadingStyle.lazy) {\n      this.appearanceObserver.start();\n    } else {\n      this.appearanceObserver.stop();\n      this.#loadSourceURL();\n    }\n  }\n\n  async #loadSourceURL() {\n    if (this.enabled && this.isActive && !this.complete && this.sourceURL) {\n      this.element.loaded = this.#visit(expandURL(this.sourceURL));\n      this.appearanceObserver.stop();\n      await this.element.loaded;\n      this.#hasBeenLoaded = true;\n    }\n  }\n\n  async loadResponse(fetchResponse) {\n    if (fetchResponse.redirected || (fetchResponse.succeeded && fetchResponse.isHTML)) {\n      this.sourceURL = fetchResponse.response.url;\n    }\n\n    try {\n      const html = await fetchResponse.responseHTML;\n      if (html) {\n        const document = parseHTMLDocument(html);\n        const pageSnapshot = PageSnapshot.fromDocument(document);\n\n        if (pageSnapshot.isVisitable) {\n          await this.#loadFrameResponse(fetchResponse, document);\n        } else {\n          await this.#handleUnvisitableFrameResponse(fetchResponse);\n        }\n      }\n    } finally {\n      this.#shouldMorphFrame = false;\n      this.fetchResponseLoaded = () => Promise.resolve();\n    }\n  }\n\n  // Appearance observer delegate\n\n  elementAppearedInViewport(element) {\n    this.proposeVisitIfNavigatedWithAction(element, getVisitAction(element));\n    this.#loadSourceURL();\n  }\n\n  // Form link click observer delegate\n\n  willSubmitFormLinkToLocation(link) {\n    return this.#shouldInterceptNavigation(link)\n  }\n\n  submittedFormLinkToLocation(link, _location, form) {\n    const frame = this.#findFrameElement(link);\n    if (frame) form.setAttribute(\"data-turbo-frame\", frame.id);\n  }\n\n  // Link interceptor delegate\n\n  shouldInterceptLinkClick(element, _location, _event) {\n    return this.#shouldInterceptNavigation(element)\n  }\n\n  linkClickIntercepted(element, location) {\n    this.#navigateFrame(element, location);\n  }\n\n  // Form submit observer delegate\n\n  willSubmitForm(element, submitter) {\n    return element.closest(\"turbo-frame\") == this.element && this.#shouldInterceptNavigation(element, submitter)\n  }\n\n  formSubmitted(element, submitter) {\n    if (this.formSubmission) {\n      this.formSubmission.stop();\n    }\n\n    this.formSubmission = new FormSubmission(this, element, submitter);\n\n    const { fetchRequest } = this.formSubmission;\n    const frame = this.#findFrameElement(element, submitter);\n\n    this.prepareRequest(fetchRequest, frame);\n    this.formSubmission.start();\n  }\n\n  // Fetch request delegate\n\n  prepareRequest(request, frame = this) {\n    request.headers[\"Turbo-Frame\"] = frame.id;\n\n    if (this.currentNavigationElement?.hasAttribute(\"data-turbo-stream\")) {\n      request.acceptResponseType(StreamMessage.contentType);\n    }\n  }\n\n  requestStarted(_request) {\n    markAsBusy(this.element);\n  }\n\n  requestPreventedHandlingResponse(_request, _response) {\n    this.#resolveVisitPromise();\n  }\n\n  async requestSucceededWithResponse(request, response) {\n    await this.loadResponse(response);\n    this.#resolveVisitPromise();\n  }\n\n  async requestFailedWithResponse(request, response) {\n    await this.loadResponse(response);\n    this.#resolveVisitPromise();\n  }\n\n  requestErrored(request, error) {\n    console.error(error);\n    this.#resolveVisitPromise();\n  }\n\n  requestFinished(_request) {\n    clearBusyState(this.element);\n  }\n\n  // Form submission delegate\n\n  formSubmissionStarted({ formElement }) {\n    markAsBusy(formElement, this.#findFrameElement(formElement));\n  }\n\n  formSubmissionSucceededWithResponse(formSubmission, response) {\n    const frame = this.#findFrameElement(formSubmission.formElement, formSubmission.submitter);\n\n    frame.delegate.proposeVisitIfNavigatedWithAction(frame, getVisitAction(formSubmission.submitter, formSubmission.formElement, frame));\n    frame.delegate.loadResponse(response);\n\n    if (!formSubmission.isSafe) {\n      session.clearCache();\n    }\n  }\n\n  formSubmissionFailedWithResponse(formSubmission, fetchResponse) {\n    this.element.delegate.loadResponse(fetchResponse);\n    session.clearCache();\n  }\n\n  formSubmissionErrored(formSubmission, error) {\n    console.error(error);\n  }\n\n  formSubmissionFinished({ formElement }) {\n    clearBusyState(formElement, this.#findFrameElement(formElement));\n  }\n\n  // View delegate\n\n  allowsImmediateRender({ element: newFrame }, options) {\n    const event = dispatch(\"turbo:before-frame-render\", {\n      target: this.element,\n      detail: { newFrame, ...options },\n      cancelable: true\n    });\n\n    const {\n      defaultPrevented,\n      detail: { render }\n    } = event;\n\n    if (this.view.renderer && render) {\n      this.view.renderer.renderElement = render;\n    }\n\n    return !defaultPrevented\n  }\n\n  viewRenderedSnapshot(_snapshot, _isPreview, _renderMethod) {}\n\n  preloadOnLoadLinksForView(element) {\n    session.preloadOnLoadLinksForView(element);\n  }\n\n  viewInvalidated() {}\n\n  // Frame renderer delegate\n\n  willRenderFrame(currentElement, _newElement) {\n    this.previousFrameElement = currentElement.cloneNode(true);\n  }\n\n  visitCachedSnapshot = ({ element }) => {\n    const frame = element.querySelector(\"#\" + this.element.id);\n\n    if (frame && this.previousFrameElement) {\n      frame.replaceChildren(...this.previousFrameElement.children);\n    }\n\n    delete this.previousFrameElement;\n  }\n\n  // Private\n\n  async #loadFrameResponse(fetchResponse, document) {\n    const newFrameElement = await this.extractForeignFrameElement(document.body);\n    const rendererClass = this.#shouldMorphFrame ? MorphingFrameRenderer : FrameRenderer;\n\n    if (newFrameElement) {\n      const snapshot = new Snapshot(newFrameElement);\n      const renderer = new rendererClass(this, this.view.snapshot, snapshot, false, false);\n      if (this.view.renderPromise) await this.view.renderPromise;\n      this.changeHistory();\n\n      await this.view.render(renderer);\n      this.complete = true;\n      session.frameRendered(fetchResponse, this.element);\n      session.frameLoaded(this.element);\n      await this.fetchResponseLoaded(fetchResponse);\n    } else if (this.#willHandleFrameMissingFromResponse(fetchResponse)) {\n      this.#handleFrameMissingFromResponse(fetchResponse);\n    }\n  }\n\n  async #visit(url) {\n    const request = new FetchRequest(this, FetchMethod.get, url, new URLSearchParams(), this.element);\n\n    this.#currentFetchRequest?.cancel();\n    this.#currentFetchRequest = request;\n\n    return new Promise((resolve) => {\n      this.#resolveVisitPromise = () => {\n        this.#resolveVisitPromise = () => {};\n        this.#currentFetchRequest = null;\n        resolve();\n      };\n      request.perform();\n    })\n  }\n\n  #navigateFrame(element, url, submitter) {\n    const frame = this.#findFrameElement(element, submitter);\n\n    frame.delegate.proposeVisitIfNavigatedWithAction(frame, getVisitAction(submitter, element, frame));\n\n    this.#withCurrentNavigationElement(element, () => {\n      frame.src = url;\n    });\n  }\n\n  proposeVisitIfNavigatedWithAction(frame, action = null) {\n    this.action = action;\n\n    if (this.action) {\n      const pageSnapshot = PageSnapshot.fromElement(frame).clone();\n      const { visitCachedSnapshot } = frame.delegate;\n\n      frame.delegate.fetchResponseLoaded = async (fetchResponse) => {\n        if (frame.src) {\n          const { statusCode, redirected } = fetchResponse;\n          const responseHTML = await fetchResponse.responseHTML;\n          const response = { statusCode, redirected, responseHTML };\n          const options = {\n            response,\n            visitCachedSnapshot,\n            willRender: false,\n            updateHistory: false,\n            restorationIdentifier: this.restorationIdentifier,\n            snapshot: pageSnapshot\n          };\n\n          if (this.action) options.action = this.action;\n\n          session.visit(frame.src, options);\n        }\n      };\n    }\n  }\n\n  changeHistory() {\n    if (this.action) {\n      const method = getHistoryMethodForAction(this.action);\n      session.history.update(method, expandURL(this.element.src || \"\"), this.restorationIdentifier);\n    }\n  }\n\n  async #handleUnvisitableFrameResponse(fetchResponse) {\n    console.warn(\n      `The response (${fetchResponse.statusCode}) from <turbo-frame id=\"${this.element.id}\"> is performing a full page visit due to turbo-visit-control.`\n    );\n\n    await this.#visitResponse(fetchResponse.response);\n  }\n\n  #willHandleFrameMissingFromResponse(fetchResponse) {\n    this.element.setAttribute(\"complete\", \"\");\n\n    const response = fetchResponse.response;\n    const visit = async (url, options) => {\n      if (url instanceof Response) {\n        this.#visitResponse(url);\n      } else {\n        session.visit(url, options);\n      }\n    };\n\n    const event = dispatch(\"turbo:frame-missing\", {\n      target: this.element,\n      detail: { response, visit },\n      cancelable: true\n    });\n\n    return !event.defaultPrevented\n  }\n\n  #handleFrameMissingFromResponse(fetchResponse) {\n    this.view.missing();\n    this.#throwFrameMissingError(fetchResponse);\n  }\n\n  #throwFrameMissingError(fetchResponse) {\n    const message = `The response (${fetchResponse.statusCode}) did not contain the expected <turbo-frame id=\"${this.element.id}\"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;\n    throw new TurboFrameMissingError(message)\n  }\n\n  async #visitResponse(response) {\n    const wrapped = new FetchResponse(response);\n    const responseHTML = await wrapped.responseHTML;\n    const { location, redirected, statusCode } = wrapped;\n\n    return session.visit(location, { response: { redirected, statusCode, responseHTML } })\n  }\n\n  #findFrameElement(element, submitter) {\n    const id = getAttribute(\"data-turbo-frame\", submitter, element) || this.element.getAttribute(\"target\");\n    const target = this.#getFrameElementById(id);\n\n    return target instanceof FrameElement ? target : this.element\n  }\n\n  async extractForeignFrameElement(container) {\n    let element;\n    const id = CSS.escape(this.id);\n\n    try {\n      element = activateElement(container.querySelector(`turbo-frame#${id}`), this.sourceURL);\n      if (element) {\n        return element\n      }\n\n      element = activateElement(container.querySelector(`turbo-frame[src][recurse~=${id}]`), this.sourceURL);\n      if (element) {\n        await element.loaded;\n        return await this.extractForeignFrameElement(element)\n      }\n    } catch (error) {\n      console.error(error);\n      return new FrameElement()\n    }\n\n    return null\n  }\n\n  #formActionIsVisitable(form, submitter) {\n    const action = getAction$1(form, submitter);\n\n    return locationIsVisitable(expandURL(action), this.rootLocation)\n  }\n\n  #shouldInterceptNavigation(element, submitter) {\n    const id = getAttribute(\"data-turbo-frame\", submitter, element) || this.element.getAttribute(\"target\");\n\n    if (element instanceof HTMLFormElement && !this.#formActionIsVisitable(element, submitter)) {\n      return false\n    }\n\n    if (!this.enabled || id == \"_top\") {\n      return false\n    }\n\n    if (id) {\n      const frameElement = this.#getFrameElementById(id);\n      if (frameElement) {\n        return !frameElement.disabled\n      } else if (id == \"_parent\") {\n        return false\n      }\n    }\n\n    if (!session.elementIsNavigatable(element)) {\n      return false\n    }\n\n    if (submitter && !session.elementIsNavigatable(submitter)) {\n      return false\n    }\n\n    return true\n  }\n\n  // Computed properties\n\n  get id() {\n    return this.element.id\n  }\n\n  get disabled() {\n    return this.element.disabled\n  }\n\n  get enabled() {\n    return !this.disabled\n  }\n\n  get sourceURL() {\n    if (this.element.src) {\n      return this.element.src\n    }\n  }\n\n  set sourceURL(sourceURL) {\n    this.#ignoringChangesToAttribute(\"src\", () => {\n      this.element.src = sourceURL ?? null;\n    });\n  }\n\n  get loadingStyle() {\n    return this.element.loading\n  }\n\n  get isLoading() {\n    return this.formSubmission !== undefined || this.#resolveVisitPromise() !== undefined\n  }\n\n  get complete() {\n    return this.element.hasAttribute(\"complete\")\n  }\n\n  set complete(value) {\n    if (value) {\n      this.element.setAttribute(\"complete\", \"\");\n    } else {\n      this.element.removeAttribute(\"complete\");\n    }\n  }\n\n  get isActive() {\n    return this.element.isActive && this.#connected\n  }\n\n  get rootLocation() {\n    const meta = this.element.ownerDocument.querySelector(`meta[name=\"turbo-root\"]`);\n    const root = meta?.content ?? \"/\";\n    return expandURL(root)\n  }\n\n  #isIgnoringChangesTo(attributeName) {\n    return this.#ignoredAttributes.has(attributeName)\n  }\n\n  #ignoringChangesToAttribute(attributeName, callback) {\n    this.#ignoredAttributes.add(attributeName);\n    callback();\n    this.#ignoredAttributes.delete(attributeName);\n  }\n\n  #withCurrentNavigationElement(element, callback) {\n    this.currentNavigationElement = element;\n    callback();\n    delete this.currentNavigationElement;\n  }\n\n  #getFrameElementById(id) {\n    if (id != null) {\n      const element = id === \"_parent\" ?\n        this.element.parentElement.closest(\"turbo-frame\") :\n        document.getElementById(id);\n      if (element instanceof FrameElement) {\n        return element\n      }\n    }\n  }\n}\n\nfunction activateElement(element, currentURL) {\n  if (element) {\n    const src = element.getAttribute(\"src\");\n    if (src != null && currentURL != null && urlsAreEqual(src, currentURL)) {\n      throw new Error(`Matching <turbo-frame id=\"${element.id}\"> element has a source URL which references itself`)\n    }\n    if (element.ownerDocument !== document) {\n      element = document.importNode(element, true);\n    }\n\n    if (element instanceof FrameElement) {\n      element.connectedCallback();\n      element.disconnectedCallback();\n      return element\n    }\n  }\n}\n\nconst StreamActions = {\n  after() {\n    this.removeDuplicateTargetSiblings();\n    this.targetElements.forEach((e) => e.parentElement?.insertBefore(this.templateContent, e.nextSibling));\n  },\n\n  append() {\n    this.removeDuplicateTargetChildren();\n    this.targetElements.forEach((e) => e.append(this.templateContent));\n  },\n\n  before() {\n    this.removeDuplicateTargetSiblings();\n    this.targetElements.forEach((e) => e.parentElement?.insertBefore(this.templateContent, e));\n  },\n\n  prepend() {\n    this.removeDuplicateTargetChildren();\n    this.targetElements.forEach((e) => e.prepend(this.templateContent));\n  },\n\n  remove() {\n    this.targetElements.forEach((e) => e.remove());\n  },\n\n  replace() {\n    const method = this.getAttribute(\"method\");\n\n    this.targetElements.forEach((targetElement) => {\n      if (method === \"morph\") {\n        morphElements(targetElement, this.templateContent);\n      } else {\n        targetElement.replaceWith(this.templateContent);\n      }\n    });\n  },\n\n  update() {\n    const method = this.getAttribute(\"method\");\n\n    this.targetElements.forEach((targetElement) => {\n      if (method === \"morph\") {\n        morphChildren(targetElement, this.templateContent);\n      } else {\n        targetElement.innerHTML = \"\";\n        targetElement.append(this.templateContent);\n      }\n    });\n  },\n\n  refresh() {\n    const method = this.getAttribute(\"method\");\n    const requestId = this.requestId;\n    const scroll = this.getAttribute(\"scroll\");\n\n    session.refresh(this.baseURI, { method, requestId, scroll });\n  }\n};\n\n// <turbo-stream action=replace target=id><template>...\n\n/**\n * Renders updates to the page from a stream of messages.\n *\n * Using the `action` attribute, this can be configured one of eight ways:\n *\n * - `after` - inserts the result after the target\n * - `append` - appends the result to the target\n * - `before` - inserts the result before the target\n * - `prepend` - prepends the result to the target\n * - `refresh` - initiates a page refresh\n * - `remove` - removes the target\n * - `replace` - replaces the outer HTML of the target\n * - `update` - replaces the inner HTML of the target\n *\n * @customElement turbo-stream\n * @example\n *   <turbo-stream action=\"append\" target=\"dom_id\">\n *     <template>\n *       Content to append to target designated with the dom_id.\n *     </template>\n *   </turbo-stream>\n */\nclass StreamElement extends HTMLElement {\n  static async renderElement(newElement) {\n    await newElement.performAction();\n  }\n\n  async connectedCallback() {\n    try {\n      await this.render();\n    } catch (error) {\n      console.error(error);\n    } finally {\n      this.disconnect();\n    }\n  }\n\n  async render() {\n    return (this.renderPromise ??= (async () => {\n      const event = this.beforeRenderEvent;\n\n      if (this.dispatchEvent(event)) {\n        await nextRepaint();\n        await event.detail.render(this);\n      }\n    })())\n  }\n\n  disconnect() {\n    try {\n      this.remove();\n      // eslint-disable-next-line no-empty\n    } catch {}\n  }\n\n  /**\n   * Removes duplicate children (by ID)\n   */\n  removeDuplicateTargetChildren() {\n    this.duplicateChildren.forEach((c) => c.remove());\n  }\n\n  /**\n   * Gets the list of duplicate children (i.e. those with the same ID)\n   */\n  get duplicateChildren() {\n    const existingChildren = this.targetElements.flatMap((e) => [...e.children]).filter((c) => !!c.getAttribute(\"id\"));\n    const newChildrenIds = [...(this.templateContent?.children || [])].filter((c) => !!c.getAttribute(\"id\")).map((c) => c.getAttribute(\"id\"));\n\n    return existingChildren.filter((c) => newChildrenIds.includes(c.getAttribute(\"id\")))\n  }\n\n  /**\n  * Removes duplicate siblings (by ID)\n  */\n  removeDuplicateTargetSiblings() {\n    this.duplicateSiblings.forEach((c) => c.remove());\n  }\n\n  /**\n  * Gets the list of duplicate siblings (i.e. those with the same ID)\n  */\n  get duplicateSiblings() {\n    const existingChildren = this.targetElements.flatMap((e) => [...e.parentElement.children]).filter((c) => !!c.id);\n    const newChildrenIds = [...(this.templateContent?.children || [])].filter((c) => !!c.id).map((c) => c.id);\n\n    return existingChildren.filter((c) => newChildrenIds.includes(c.id))\n  }\n\n  /**\n   * Gets the action function to be performed.\n   */\n  get performAction() {\n    if (this.action) {\n      const actionFunction = StreamActions[this.action];\n      if (actionFunction) {\n        return actionFunction\n      }\n      this.#raise(\"unknown action\");\n    }\n    this.#raise(\"action attribute is missing\");\n  }\n\n  /**\n   * Gets the target elements which the template will be rendered to.\n   */\n  get targetElements() {\n    if (this.target) {\n      return this.targetElementsById\n    } else if (this.targets) {\n      return this.targetElementsByQuery\n    } else {\n      this.#raise(\"target or targets attribute is missing\");\n    }\n  }\n\n  /**\n   * Gets the contents of the main `<template>`.\n   */\n  get templateContent() {\n    return this.templateElement.content.cloneNode(true)\n  }\n\n  /**\n   * Gets the main `<template>` used for rendering\n   */\n  get templateElement() {\n    if (this.firstElementChild === null) {\n      const template = this.ownerDocument.createElement(\"template\");\n      this.appendChild(template);\n      return template\n    } else if (this.firstElementChild instanceof HTMLTemplateElement) {\n      return this.firstElementChild\n    }\n    this.#raise(\"first child element must be a <template> element\");\n  }\n\n  /**\n   * Gets the current action.\n   */\n  get action() {\n    return this.getAttribute(\"action\")\n  }\n\n  /**\n   * Gets the current target (an element ID) to which the result will\n   * be rendered.\n   */\n  get target() {\n    return this.getAttribute(\"target\")\n  }\n\n  /**\n   * Gets the current \"targets\" selector (a CSS selector)\n   */\n  get targets() {\n    return this.getAttribute(\"targets\")\n  }\n\n  /**\n   * Reads the request-id attribute\n   */\n  get requestId() {\n    return this.getAttribute(\"request-id\")\n  }\n\n  #raise(message) {\n    throw new Error(`${this.description}: ${message}`)\n  }\n\n  get description() {\n    return (this.outerHTML.match(/<[^>]+>/) ?? [])[0] ?? \"<turbo-stream>\"\n  }\n\n  get beforeRenderEvent() {\n    return new CustomEvent(\"turbo:before-stream-render\", {\n      bubbles: true,\n      cancelable: true,\n      detail: { newStream: this, render: StreamElement.renderElement }\n    })\n  }\n\n  get targetElementsById() {\n    const element = this.ownerDocument?.getElementById(this.target);\n\n    if (element !== null) {\n      return [element]\n    } else {\n      return []\n    }\n  }\n\n  get targetElementsByQuery() {\n    const elements = this.ownerDocument?.querySelectorAll(this.targets);\n\n    if (elements.length !== 0) {\n      return Array.prototype.slice.call(elements)\n    } else {\n      return []\n    }\n  }\n}\n\nclass StreamSourceElement extends HTMLElement {\n  streamSource = null\n\n  connectedCallback() {\n    this.streamSource = this.src.match(/^ws{1,2}:/) ? new WebSocket(this.src) : new EventSource(this.src);\n\n    connectStreamSource(this.streamSource);\n  }\n\n  disconnectedCallback() {\n    if (this.streamSource) {\n      this.streamSource.close();\n\n      disconnectStreamSource(this.streamSource);\n    }\n  }\n\n  get src() {\n    return this.getAttribute(\"src\") || \"\"\n  }\n}\n\nFrameElement.delegateConstructor = FrameController;\n\nif (customElements.get(\"turbo-frame\") === undefined) {\n  customElements.define(\"turbo-frame\", FrameElement);\n}\n\nif (customElements.get(\"turbo-stream\") === undefined) {\n  customElements.define(\"turbo-stream\", StreamElement);\n}\n\nif (customElements.get(\"turbo-stream-source\") === undefined) {\n  customElements.define(\"turbo-stream-source\", StreamSourceElement);\n}\n\n(() => {\n  const scriptElement = document.currentScript;\n  if (!scriptElement) return\n  if (scriptElement.hasAttribute(\"data-turbo-suppress-warning\")) return\n\n  let element = scriptElement.parentElement;\n  while (element) {\n    if (element == document.body) {\n      return console.warn(\n        unindent`\n        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!\n\n        Load your application\u2019s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.\n\n        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements\n\n        \u2014\u2014\n        Suppress this warning by adding a \"data-turbo-suppress-warning\" attribute to: %s\n      `,\n        scriptElement.outerHTML\n      )\n    }\n\n    element = element.parentElement;\n  }\n})();\n\nwindow.Turbo = { ...Turbo, StreamActions };\nstart();\n\nexport { FetchEnctype, FetchMethod, FetchRequest, FetchResponse, FrameElement, FrameLoadingStyle, FrameRenderer, PageRenderer, PageSnapshot, StreamActions, StreamElement, StreamSourceElement, cache, config, connectStreamSource, disconnectStreamSource, fetchWithTurboHeaders as fetch, fetchEnctypeFromString, fetchMethodFromString, isSafe, morphBodyElements, morphChildren, morphElements, morphTurboFrameElements, navigator, registerAdapter, renderStreamMessage, session, setConfirmMethod, setFormMode, setProgressBarDelay, start, visit };\n", "/*\nStimulus 3.2.1\nCopyright \u00A9 2023 Basecamp, LLC\n */\nclass EventListener {\n    constructor(eventTarget, eventName, eventOptions) {\n        this.eventTarget = eventTarget;\n        this.eventName = eventName;\n        this.eventOptions = eventOptions;\n        this.unorderedBindings = new Set();\n    }\n    connect() {\n        this.eventTarget.addEventListener(this.eventName, this, this.eventOptions);\n    }\n    disconnect() {\n        this.eventTarget.removeEventListener(this.eventName, this, this.eventOptions);\n    }\n    bindingConnected(binding) {\n        this.unorderedBindings.add(binding);\n    }\n    bindingDisconnected(binding) {\n        this.unorderedBindings.delete(binding);\n    }\n    handleEvent(event) {\n        const extendedEvent = extendEvent(event);\n        for (const binding of this.bindings) {\n            if (extendedEvent.immediatePropagationStopped) {\n                break;\n            }\n            else {\n                binding.handleEvent(extendedEvent);\n            }\n        }\n    }\n    hasBindings() {\n        return this.unorderedBindings.size > 0;\n    }\n    get bindings() {\n        return Array.from(this.unorderedBindings).sort((left, right) => {\n            const leftIndex = left.index, rightIndex = right.index;\n            return leftIndex < rightIndex ? -1 : leftIndex > rightIndex ? 1 : 0;\n        });\n    }\n}\nfunction extendEvent(event) {\n    if (\"immediatePropagationStopped\" in event) {\n        return event;\n    }\n    else {\n        const { stopImmediatePropagation } = event;\n        return Object.assign(event, {\n            immediatePropagationStopped: false,\n            stopImmediatePropagation() {\n                this.immediatePropagationStopped = true;\n                stopImmediatePropagation.call(this);\n            },\n        });\n    }\n}\n\nclass Dispatcher {\n    constructor(application) {\n        this.application = application;\n        this.eventListenerMaps = new Map();\n        this.started = false;\n    }\n    start() {\n        if (!this.started) {\n            this.started = true;\n            this.eventListeners.forEach((eventListener) => eventListener.connect());\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.started = false;\n            this.eventListeners.forEach((eventListener) => eventListener.disconnect());\n        }\n    }\n    get eventListeners() {\n        return Array.from(this.eventListenerMaps.values()).reduce((listeners, map) => listeners.concat(Array.from(map.values())), []);\n    }\n    bindingConnected(binding) {\n        this.fetchEventListenerForBinding(binding).bindingConnected(binding);\n    }\n    bindingDisconnected(binding, clearEventListeners = false) {\n        this.fetchEventListenerForBinding(binding).bindingDisconnected(binding);\n        if (clearEventListeners)\n            this.clearEventListenersForBinding(binding);\n    }\n    handleError(error, message, detail = {}) {\n        this.application.handleError(error, `Error ${message}`, detail);\n    }\n    clearEventListenersForBinding(binding) {\n        const eventListener = this.fetchEventListenerForBinding(binding);\n        if (!eventListener.hasBindings()) {\n            eventListener.disconnect();\n            this.removeMappedEventListenerFor(binding);\n        }\n    }\n    removeMappedEventListenerFor(binding) {\n        const { eventTarget, eventName, eventOptions } = binding;\n        const eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget);\n        const cacheKey = this.cacheKey(eventName, eventOptions);\n        eventListenerMap.delete(cacheKey);\n        if (eventListenerMap.size == 0)\n            this.eventListenerMaps.delete(eventTarget);\n    }\n    fetchEventListenerForBinding(binding) {\n        const { eventTarget, eventName, eventOptions } = binding;\n        return this.fetchEventListener(eventTarget, eventName, eventOptions);\n    }\n    fetchEventListener(eventTarget, eventName, eventOptions) {\n        const eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget);\n        const cacheKey = this.cacheKey(eventName, eventOptions);\n        let eventListener = eventListenerMap.get(cacheKey);\n        if (!eventListener) {\n            eventListener = this.createEventListener(eventTarget, eventName, eventOptions);\n            eventListenerMap.set(cacheKey, eventListener);\n        }\n        return eventListener;\n    }\n    createEventListener(eventTarget, eventName, eventOptions) {\n        const eventListener = new EventListener(eventTarget, eventName, eventOptions);\n        if (this.started) {\n            eventListener.connect();\n        }\n        return eventListener;\n    }\n    fetchEventListenerMapForEventTarget(eventTarget) {\n        let eventListenerMap = this.eventListenerMaps.get(eventTarget);\n        if (!eventListenerMap) {\n            eventListenerMap = new Map();\n            this.eventListenerMaps.set(eventTarget, eventListenerMap);\n        }\n        return eventListenerMap;\n    }\n    cacheKey(eventName, eventOptions) {\n        const parts = [eventName];\n        Object.keys(eventOptions)\n            .sort()\n            .forEach((key) => {\n            parts.push(`${eventOptions[key] ? \"\" : \"!\"}${key}`);\n        });\n        return parts.join(\":\");\n    }\n}\n\nconst defaultActionDescriptorFilters = {\n    stop({ event, value }) {\n        if (value)\n            event.stopPropagation();\n        return true;\n    },\n    prevent({ event, value }) {\n        if (value)\n            event.preventDefault();\n        return true;\n    },\n    self({ event, value, element }) {\n        if (value) {\n            return element === event.target;\n        }\n        else {\n            return true;\n        }\n    },\n};\nconst descriptorPattern = /^(?:(?:([^.]+?)\\+)?(.+?)(?:\\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;\nfunction parseActionDescriptorString(descriptorString) {\n    const source = descriptorString.trim();\n    const matches = source.match(descriptorPattern) || [];\n    let eventName = matches[2];\n    let keyFilter = matches[3];\n    if (keyFilter && ![\"keydown\", \"keyup\", \"keypress\"].includes(eventName)) {\n        eventName += `.${keyFilter}`;\n        keyFilter = \"\";\n    }\n    return {\n        eventTarget: parseEventTarget(matches[4]),\n        eventName,\n        eventOptions: matches[7] ? parseEventOptions(matches[7]) : {},\n        identifier: matches[5],\n        methodName: matches[6],\n        keyFilter: matches[1] || keyFilter,\n    };\n}\nfunction parseEventTarget(eventTargetName) {\n    if (eventTargetName == \"window\") {\n        return window;\n    }\n    else if (eventTargetName == \"document\") {\n        return document;\n    }\n}\nfunction parseEventOptions(eventOptions) {\n    return eventOptions\n        .split(\":\")\n        .reduce((options, token) => Object.assign(options, { [token.replace(/^!/, \"\")]: !/^!/.test(token) }), {});\n}\nfunction stringifyEventTarget(eventTarget) {\n    if (eventTarget == window) {\n        return \"window\";\n    }\n    else if (eventTarget == document) {\n        return \"document\";\n    }\n}\n\nfunction camelize(value) {\n    return value.replace(/(?:[_-])([a-z0-9])/g, (_, char) => char.toUpperCase());\n}\nfunction namespaceCamelize(value) {\n    return camelize(value.replace(/--/g, \"-\").replace(/__/g, \"_\"));\n}\nfunction capitalize(value) {\n    return value.charAt(0).toUpperCase() + value.slice(1);\n}\nfunction dasherize(value) {\n    return value.replace(/([A-Z])/g, (_, char) => `-${char.toLowerCase()}`);\n}\nfunction tokenize(value) {\n    return value.match(/[^\\s]+/g) || [];\n}\n\nfunction isSomething(object) {\n    return object !== null && object !== undefined;\n}\nfunction hasProperty(object, property) {\n    return Object.prototype.hasOwnProperty.call(object, property);\n}\n\nconst allModifiers = [\"meta\", \"ctrl\", \"alt\", \"shift\"];\nclass Action {\n    constructor(element, index, descriptor, schema) {\n        this.element = element;\n        this.index = index;\n        this.eventTarget = descriptor.eventTarget || element;\n        this.eventName = descriptor.eventName || getDefaultEventNameForElement(element) || error(\"missing event name\");\n        this.eventOptions = descriptor.eventOptions || {};\n        this.identifier = descriptor.identifier || error(\"missing identifier\");\n        this.methodName = descriptor.methodName || error(\"missing method name\");\n        this.keyFilter = descriptor.keyFilter || \"\";\n        this.schema = schema;\n    }\n    static forToken(token, schema) {\n        return new this(token.element, token.index, parseActionDescriptorString(token.content), schema);\n    }\n    toString() {\n        const eventFilter = this.keyFilter ? `.${this.keyFilter}` : \"\";\n        const eventTarget = this.eventTargetName ? `@${this.eventTargetName}` : \"\";\n        return `${this.eventName}${eventFilter}${eventTarget}->${this.identifier}#${this.methodName}`;\n    }\n    shouldIgnoreKeyboardEvent(event) {\n        if (!this.keyFilter) {\n            return false;\n        }\n        const filters = this.keyFilter.split(\"+\");\n        if (this.keyFilterDissatisfied(event, filters)) {\n            return true;\n        }\n        const standardFilter = filters.filter((key) => !allModifiers.includes(key))[0];\n        if (!standardFilter) {\n            return false;\n        }\n        if (!hasProperty(this.keyMappings, standardFilter)) {\n            error(`contains unknown key filter: ${this.keyFilter}`);\n        }\n        return this.keyMappings[standardFilter].toLowerCase() !== event.key.toLowerCase();\n    }\n    shouldIgnoreMouseEvent(event) {\n        if (!this.keyFilter) {\n            return false;\n        }\n        const filters = [this.keyFilter];\n        if (this.keyFilterDissatisfied(event, filters)) {\n            return true;\n        }\n        return false;\n    }\n    get params() {\n        const params = {};\n        const pattern = new RegExp(`^data-${this.identifier}-(.+)-param$`, \"i\");\n        for (const { name, value } of Array.from(this.element.attributes)) {\n            const match = name.match(pattern);\n            const key = match && match[1];\n            if (key) {\n                params[camelize(key)] = typecast(value);\n            }\n        }\n        return params;\n    }\n    get eventTargetName() {\n        return stringifyEventTarget(this.eventTarget);\n    }\n    get keyMappings() {\n        return this.schema.keyMappings;\n    }\n    keyFilterDissatisfied(event, filters) {\n        const [meta, ctrl, alt, shift] = allModifiers.map((modifier) => filters.includes(modifier));\n        return event.metaKey !== meta || event.ctrlKey !== ctrl || event.altKey !== alt || event.shiftKey !== shift;\n    }\n}\nconst defaultEventNames = {\n    a: () => \"click\",\n    button: () => \"click\",\n    form: () => \"submit\",\n    details: () => \"toggle\",\n    input: (e) => (e.getAttribute(\"type\") == \"submit\" ? \"click\" : \"input\"),\n    select: () => \"change\",\n    textarea: () => \"input\",\n};\nfunction getDefaultEventNameForElement(element) {\n    const tagName = element.tagName.toLowerCase();\n    if (tagName in defaultEventNames) {\n        return defaultEventNames[tagName](element);\n    }\n}\nfunction error(message) {\n    throw new Error(message);\n}\nfunction typecast(value) {\n    try {\n        return JSON.parse(value);\n    }\n    catch (o_O) {\n        return value;\n    }\n}\n\nclass Binding {\n    constructor(context, action) {\n        this.context = context;\n        this.action = action;\n    }\n    get index() {\n        return this.action.index;\n    }\n    get eventTarget() {\n        return this.action.eventTarget;\n    }\n    get eventOptions() {\n        return this.action.eventOptions;\n    }\n    get identifier() {\n        return this.context.identifier;\n    }\n    handleEvent(event) {\n        const actionEvent = this.prepareActionEvent(event);\n        if (this.willBeInvokedByEvent(event) && this.applyEventModifiers(actionEvent)) {\n            this.invokeWithEvent(actionEvent);\n        }\n    }\n    get eventName() {\n        return this.action.eventName;\n    }\n    get method() {\n        const method = this.controller[this.methodName];\n        if (typeof method == \"function\") {\n            return method;\n        }\n        throw new Error(`Action \"${this.action}\" references undefined method \"${this.methodName}\"`);\n    }\n    applyEventModifiers(event) {\n        const { element } = this.action;\n        const { actionDescriptorFilters } = this.context.application;\n        const { controller } = this.context;\n        let passes = true;\n        for (const [name, value] of Object.entries(this.eventOptions)) {\n            if (name in actionDescriptorFilters) {\n                const filter = actionDescriptorFilters[name];\n                passes = passes && filter({ name, value, event, element, controller });\n            }\n            else {\n                continue;\n            }\n        }\n        return passes;\n    }\n    prepareActionEvent(event) {\n        return Object.assign(event, { params: this.action.params });\n    }\n    invokeWithEvent(event) {\n        const { target, currentTarget } = event;\n        try {\n            this.method.call(this.controller, event);\n            this.context.logDebugActivity(this.methodName, { event, target, currentTarget, action: this.methodName });\n        }\n        catch (error) {\n            const { identifier, controller, element, index } = this;\n            const detail = { identifier, controller, element, index, event };\n            this.context.handleError(error, `invoking action \"${this.action}\"`, detail);\n        }\n    }\n    willBeInvokedByEvent(event) {\n        const eventTarget = event.target;\n        if (event instanceof KeyboardEvent && this.action.shouldIgnoreKeyboardEvent(event)) {\n            return false;\n        }\n        if (event instanceof MouseEvent && this.action.shouldIgnoreMouseEvent(event)) {\n            return false;\n        }\n        if (this.element === eventTarget) {\n            return true;\n        }\n        else if (eventTarget instanceof Element && this.element.contains(eventTarget)) {\n            return this.scope.containsElement(eventTarget);\n        }\n        else {\n            return this.scope.containsElement(this.action.element);\n        }\n    }\n    get controller() {\n        return this.context.controller;\n    }\n    get methodName() {\n        return this.action.methodName;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get scope() {\n        return this.context.scope;\n    }\n}\n\nclass ElementObserver {\n    constructor(element, delegate) {\n        this.mutationObserverInit = { attributes: true, childList: true, subtree: true };\n        this.element = element;\n        this.started = false;\n        this.delegate = delegate;\n        this.elements = new Set();\n        this.mutationObserver = new MutationObserver((mutations) => this.processMutations(mutations));\n    }\n    start() {\n        if (!this.started) {\n            this.started = true;\n            this.mutationObserver.observe(this.element, this.mutationObserverInit);\n            this.refresh();\n        }\n    }\n    pause(callback) {\n        if (this.started) {\n            this.mutationObserver.disconnect();\n            this.started = false;\n        }\n        callback();\n        if (!this.started) {\n            this.mutationObserver.observe(this.element, this.mutationObserverInit);\n            this.started = true;\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.mutationObserver.takeRecords();\n            this.mutationObserver.disconnect();\n            this.started = false;\n        }\n    }\n    refresh() {\n        if (this.started) {\n            const matches = new Set(this.matchElementsInTree());\n            for (const element of Array.from(this.elements)) {\n                if (!matches.has(element)) {\n                    this.removeElement(element);\n                }\n            }\n            for (const element of Array.from(matches)) {\n                this.addElement(element);\n            }\n        }\n    }\n    processMutations(mutations) {\n        if (this.started) {\n            for (const mutation of mutations) {\n                this.processMutation(mutation);\n            }\n        }\n    }\n    processMutation(mutation) {\n        if (mutation.type == \"attributes\") {\n            this.processAttributeChange(mutation.target, mutation.attributeName);\n        }\n        else if (mutation.type == \"childList\") {\n            this.processRemovedNodes(mutation.removedNodes);\n            this.processAddedNodes(mutation.addedNodes);\n        }\n    }\n    processAttributeChange(element, attributeName) {\n        if (this.elements.has(element)) {\n            if (this.delegate.elementAttributeChanged && this.matchElement(element)) {\n                this.delegate.elementAttributeChanged(element, attributeName);\n            }\n            else {\n                this.removeElement(element);\n            }\n        }\n        else if (this.matchElement(element)) {\n            this.addElement(element);\n        }\n    }\n    processRemovedNodes(nodes) {\n        for (const node of Array.from(nodes)) {\n            const element = this.elementFromNode(node);\n            if (element) {\n                this.processTree(element, this.removeElement);\n            }\n        }\n    }\n    processAddedNodes(nodes) {\n        for (const node of Array.from(nodes)) {\n            const element = this.elementFromNode(node);\n            if (element && this.elementIsActive(element)) {\n                this.processTree(element, this.addElement);\n            }\n        }\n    }\n    matchElement(element) {\n        return this.delegate.matchElement(element);\n    }\n    matchElementsInTree(tree = this.element) {\n        return this.delegate.matchElementsInTree(tree);\n    }\n    processTree(tree, processor) {\n        for (const element of this.matchElementsInTree(tree)) {\n            processor.call(this, element);\n        }\n    }\n    elementFromNode(node) {\n        if (node.nodeType == Node.ELEMENT_NODE) {\n            return node;\n        }\n    }\n    elementIsActive(element) {\n        if (element.isConnected != this.element.isConnected) {\n            return false;\n        }\n        else {\n            return this.element.contains(element);\n        }\n    }\n    addElement(element) {\n        if (!this.elements.has(element)) {\n            if (this.elementIsActive(element)) {\n                this.elements.add(element);\n                if (this.delegate.elementMatched) {\n                    this.delegate.elementMatched(element);\n                }\n            }\n        }\n    }\n    removeElement(element) {\n        if (this.elements.has(element)) {\n            this.elements.delete(element);\n            if (this.delegate.elementUnmatched) {\n                this.delegate.elementUnmatched(element);\n            }\n        }\n    }\n}\n\nclass AttributeObserver {\n    constructor(element, attributeName, delegate) {\n        this.attributeName = attributeName;\n        this.delegate = delegate;\n        this.elementObserver = new ElementObserver(element, this);\n    }\n    get element() {\n        return this.elementObserver.element;\n    }\n    get selector() {\n        return `[${this.attributeName}]`;\n    }\n    start() {\n        this.elementObserver.start();\n    }\n    pause(callback) {\n        this.elementObserver.pause(callback);\n    }\n    stop() {\n        this.elementObserver.stop();\n    }\n    refresh() {\n        this.elementObserver.refresh();\n    }\n    get started() {\n        return this.elementObserver.started;\n    }\n    matchElement(element) {\n        return element.hasAttribute(this.attributeName);\n    }\n    matchElementsInTree(tree) {\n        const match = this.matchElement(tree) ? [tree] : [];\n        const matches = Array.from(tree.querySelectorAll(this.selector));\n        return match.concat(matches);\n    }\n    elementMatched(element) {\n        if (this.delegate.elementMatchedAttribute) {\n            this.delegate.elementMatchedAttribute(element, this.attributeName);\n        }\n    }\n    elementUnmatched(element) {\n        if (this.delegate.elementUnmatchedAttribute) {\n            this.delegate.elementUnmatchedAttribute(element, this.attributeName);\n        }\n    }\n    elementAttributeChanged(element, attributeName) {\n        if (this.delegate.elementAttributeValueChanged && this.attributeName == attributeName) {\n            this.delegate.elementAttributeValueChanged(element, attributeName);\n        }\n    }\n}\n\nfunction add(map, key, value) {\n    fetch(map, key).add(value);\n}\nfunction del(map, key, value) {\n    fetch(map, key).delete(value);\n    prune(map, key);\n}\nfunction fetch(map, key) {\n    let values = map.get(key);\n    if (!values) {\n        values = new Set();\n        map.set(key, values);\n    }\n    return values;\n}\nfunction prune(map, key) {\n    const values = map.get(key);\n    if (values != null && values.size == 0) {\n        map.delete(key);\n    }\n}\n\nclass Multimap {\n    constructor() {\n        this.valuesByKey = new Map();\n    }\n    get keys() {\n        return Array.from(this.valuesByKey.keys());\n    }\n    get values() {\n        const sets = Array.from(this.valuesByKey.values());\n        return sets.reduce((values, set) => values.concat(Array.from(set)), []);\n    }\n    get size() {\n        const sets = Array.from(this.valuesByKey.values());\n        return sets.reduce((size, set) => size + set.size, 0);\n    }\n    add(key, value) {\n        add(this.valuesByKey, key, value);\n    }\n    delete(key, value) {\n        del(this.valuesByKey, key, value);\n    }\n    has(key, value) {\n        const values = this.valuesByKey.get(key);\n        return values != null && values.has(value);\n    }\n    hasKey(key) {\n        return this.valuesByKey.has(key);\n    }\n    hasValue(value) {\n        const sets = Array.from(this.valuesByKey.values());\n        return sets.some((set) => set.has(value));\n    }\n    getValuesForKey(key) {\n        const values = this.valuesByKey.get(key);\n        return values ? Array.from(values) : [];\n    }\n    getKeysForValue(value) {\n        return Array.from(this.valuesByKey)\n            .filter(([_key, values]) => values.has(value))\n            .map(([key, _values]) => key);\n    }\n}\n\nclass IndexedMultimap extends Multimap {\n    constructor() {\n        super();\n        this.keysByValue = new Map();\n    }\n    get values() {\n        return Array.from(this.keysByValue.keys());\n    }\n    add(key, value) {\n        super.add(key, value);\n        add(this.keysByValue, value, key);\n    }\n    delete(key, value) {\n        super.delete(key, value);\n        del(this.keysByValue, value, key);\n    }\n    hasValue(value) {\n        return this.keysByValue.has(value);\n    }\n    getKeysForValue(value) {\n        const set = this.keysByValue.get(value);\n        return set ? Array.from(set) : [];\n    }\n}\n\nclass SelectorObserver {\n    constructor(element, selector, delegate, details) {\n        this._selector = selector;\n        this.details = details;\n        this.elementObserver = new ElementObserver(element, this);\n        this.delegate = delegate;\n        this.matchesByElement = new Multimap();\n    }\n    get started() {\n        return this.elementObserver.started;\n    }\n    get selector() {\n        return this._selector;\n    }\n    set selector(selector) {\n        this._selector = selector;\n        this.refresh();\n    }\n    start() {\n        this.elementObserver.start();\n    }\n    pause(callback) {\n        this.elementObserver.pause(callback);\n    }\n    stop() {\n        this.elementObserver.stop();\n    }\n    refresh() {\n        this.elementObserver.refresh();\n    }\n    get element() {\n        return this.elementObserver.element;\n    }\n    matchElement(element) {\n        const { selector } = this;\n        if (selector) {\n            const matches = element.matches(selector);\n            if (this.delegate.selectorMatchElement) {\n                return matches && this.delegate.selectorMatchElement(element, this.details);\n            }\n            return matches;\n        }\n        else {\n            return false;\n        }\n    }\n    matchElementsInTree(tree) {\n        const { selector } = this;\n        if (selector) {\n            const match = this.matchElement(tree) ? [tree] : [];\n            const matches = Array.from(tree.querySelectorAll(selector)).filter((match) => this.matchElement(match));\n            return match.concat(matches);\n        }\n        else {\n            return [];\n        }\n    }\n    elementMatched(element) {\n        const { selector } = this;\n        if (selector) {\n            this.selectorMatched(element, selector);\n        }\n    }\n    elementUnmatched(element) {\n        const selectors = this.matchesByElement.getKeysForValue(element);\n        for (const selector of selectors) {\n            this.selectorUnmatched(element, selector);\n        }\n    }\n    elementAttributeChanged(element, _attributeName) {\n        const { selector } = this;\n        if (selector) {\n            const matches = this.matchElement(element);\n            const matchedBefore = this.matchesByElement.has(selector, element);\n            if (matches && !matchedBefore) {\n                this.selectorMatched(element, selector);\n            }\n            else if (!matches && matchedBefore) {\n                this.selectorUnmatched(element, selector);\n            }\n        }\n    }\n    selectorMatched(element, selector) {\n        this.delegate.selectorMatched(element, selector, this.details);\n        this.matchesByElement.add(selector, element);\n    }\n    selectorUnmatched(element, selector) {\n        this.delegate.selectorUnmatched(element, selector, this.details);\n        this.matchesByElement.delete(selector, element);\n    }\n}\n\nclass StringMapObserver {\n    constructor(element, delegate) {\n        this.element = element;\n        this.delegate = delegate;\n        this.started = false;\n        this.stringMap = new Map();\n        this.mutationObserver = new MutationObserver((mutations) => this.processMutations(mutations));\n    }\n    start() {\n        if (!this.started) {\n            this.started = true;\n            this.mutationObserver.observe(this.element, { attributes: true, attributeOldValue: true });\n            this.refresh();\n        }\n    }\n    stop() {\n        if (this.started) {\n            this.mutationObserver.takeRecords();\n            this.mutationObserver.disconnect();\n            this.started = false;\n        }\n    }\n    refresh() {\n        if (this.started) {\n            for (const attributeName of this.knownAttributeNames) {\n                this.refreshAttribute(attributeName, null);\n            }\n        }\n    }\n    processMutations(mutations) {\n        if (this.started) {\n            for (const mutation of mutations) {\n                this.processMutation(mutation);\n            }\n        }\n    }\n    processMutation(mutation) {\n        const attributeName = mutation.attributeName;\n        if (attributeName) {\n            this.refreshAttribute(attributeName, mutation.oldValue);\n        }\n    }\n    refreshAttribute(attributeName, oldValue) {\n        const key = this.delegate.getStringMapKeyForAttribute(attributeName);\n        if (key != null) {\n            if (!this.stringMap.has(attributeName)) {\n                this.stringMapKeyAdded(key, attributeName);\n            }\n            const value = this.element.getAttribute(attributeName);\n            if (this.stringMap.get(attributeName) != value) {\n                this.stringMapValueChanged(value, key, oldValue);\n            }\n            if (value == null) {\n                const oldValue = this.stringMap.get(attributeName);\n                this.stringMap.delete(attributeName);\n                if (oldValue)\n                    this.stringMapKeyRemoved(key, attributeName, oldValue);\n            }\n            else {\n                this.stringMap.set(attributeName, value);\n            }\n        }\n    }\n    stringMapKeyAdded(key, attributeName) {\n        if (this.delegate.stringMapKeyAdded) {\n            this.delegate.stringMapKeyAdded(key, attributeName);\n        }\n    }\n    stringMapValueChanged(value, key, oldValue) {\n        if (this.delegate.stringMapValueChanged) {\n            this.delegate.stringMapValueChanged(value, key, oldValue);\n        }\n    }\n    stringMapKeyRemoved(key, attributeName, oldValue) {\n        if (this.delegate.stringMapKeyRemoved) {\n            this.delegate.stringMapKeyRemoved(key, attributeName, oldValue);\n        }\n    }\n    get knownAttributeNames() {\n        return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)));\n    }\n    get currentAttributeNames() {\n        return Array.from(this.element.attributes).map((attribute) => attribute.name);\n    }\n    get recordedAttributeNames() {\n        return Array.from(this.stringMap.keys());\n    }\n}\n\nclass TokenListObserver {\n    constructor(element, attributeName, delegate) {\n        this.attributeObserver = new AttributeObserver(element, attributeName, this);\n        this.delegate = delegate;\n        this.tokensByElement = new Multimap();\n    }\n    get started() {\n        return this.attributeObserver.started;\n    }\n    start() {\n        this.attributeObserver.start();\n    }\n    pause(callback) {\n        this.attributeObserver.pause(callback);\n    }\n    stop() {\n        this.attributeObserver.stop();\n    }\n    refresh() {\n        this.attributeObserver.refresh();\n    }\n    get element() {\n        return this.attributeObserver.element;\n    }\n    get attributeName() {\n        return this.attributeObserver.attributeName;\n    }\n    elementMatchedAttribute(element) {\n        this.tokensMatched(this.readTokensForElement(element));\n    }\n    elementAttributeValueChanged(element) {\n        const [unmatchedTokens, matchedTokens] = this.refreshTokensForElement(element);\n        this.tokensUnmatched(unmatchedTokens);\n        this.tokensMatched(matchedTokens);\n    }\n    elementUnmatchedAttribute(element) {\n        this.tokensUnmatched(this.tokensByElement.getValuesForKey(element));\n    }\n    tokensMatched(tokens) {\n        tokens.forEach((token) => this.tokenMatched(token));\n    }\n    tokensUnmatched(tokens) {\n        tokens.forEach((token) => this.tokenUnmatched(token));\n    }\n    tokenMatched(token) {\n        this.delegate.tokenMatched(token);\n        this.tokensByElement.add(token.element, token);\n    }\n    tokenUnmatched(token) {\n        this.delegate.tokenUnmatched(token);\n        this.tokensByElement.delete(token.element, token);\n    }\n    refreshTokensForElement(element) {\n        const previousTokens = this.tokensByElement.getValuesForKey(element);\n        const currentTokens = this.readTokensForElement(element);\n        const firstDifferingIndex = zip(previousTokens, currentTokens).findIndex(([previousToken, currentToken]) => !tokensAreEqual(previousToken, currentToken));\n        if (firstDifferingIndex == -1) {\n            return [[], []];\n        }\n        else {\n            return [previousTokens.slice(firstDifferingIndex), currentTokens.slice(firstDifferingIndex)];\n        }\n    }\n    readTokensForElement(element) {\n        const attributeName = this.attributeName;\n        const tokenString = element.getAttribute(attributeName) || \"\";\n        return parseTokenString(tokenString, element, attributeName);\n    }\n}\nfunction parseTokenString(tokenString, element, attributeName) {\n    return tokenString\n        .trim()\n        .split(/\\s+/)\n        .filter((content) => content.length)\n        .map((content, index) => ({ element, attributeName, content, index }));\n}\nfunction zip(left, right) {\n    const length = Math.max(left.length, right.length);\n    return Array.from({ length }, (_, index) => [left[index], right[index]]);\n}\nfunction tokensAreEqual(left, right) {\n    return left && right && left.index == right.index && left.content == right.content;\n}\n\nclass ValueListObserver {\n    constructor(element, attributeName, delegate) {\n        this.tokenListObserver = new TokenListObserver(element, attributeName, this);\n        this.delegate = delegate;\n        this.parseResultsByToken = new WeakMap();\n        this.valuesByTokenByElement = new WeakMap();\n    }\n    get started() {\n        return this.tokenListObserver.started;\n    }\n    start() {\n        this.tokenListObserver.start();\n    }\n    stop() {\n        this.tokenListObserver.stop();\n    }\n    refresh() {\n        this.tokenListObserver.refresh();\n    }\n    get element() {\n        return this.tokenListObserver.element;\n    }\n    get attributeName() {\n        return this.tokenListObserver.attributeName;\n    }\n    tokenMatched(token) {\n        const { element } = token;\n        const { value } = this.fetchParseResultForToken(token);\n        if (value) {\n            this.fetchValuesByTokenForElement(element).set(token, value);\n            this.delegate.elementMatchedValue(element, value);\n        }\n    }\n    tokenUnmatched(token) {\n        const { element } = token;\n        const { value } = this.fetchParseResultForToken(token);\n        if (value) {\n            this.fetchValuesByTokenForElement(element).delete(token);\n            this.delegate.elementUnmatchedValue(element, value);\n        }\n    }\n    fetchParseResultForToken(token) {\n        let parseResult = this.parseResultsByToken.get(token);\n        if (!parseResult) {\n            parseResult = this.parseToken(token);\n            this.parseResultsByToken.set(token, parseResult);\n        }\n        return parseResult;\n    }\n    fetchValuesByTokenForElement(element) {\n        let valuesByToken = this.valuesByTokenByElement.get(element);\n        if (!valuesByToken) {\n            valuesByToken = new Map();\n            this.valuesByTokenByElement.set(element, valuesByToken);\n        }\n        return valuesByToken;\n    }\n    parseToken(token) {\n        try {\n            const value = this.delegate.parseValueForToken(token);\n            return { value };\n        }\n        catch (error) {\n            return { error };\n        }\n    }\n}\n\nclass BindingObserver {\n    constructor(context, delegate) {\n        this.context = context;\n        this.delegate = delegate;\n        this.bindingsByAction = new Map();\n    }\n    start() {\n        if (!this.valueListObserver) {\n            this.valueListObserver = new ValueListObserver(this.element, this.actionAttribute, this);\n            this.valueListObserver.start();\n        }\n    }\n    stop() {\n        if (this.valueListObserver) {\n            this.valueListObserver.stop();\n            delete this.valueListObserver;\n            this.disconnectAllActions();\n        }\n    }\n    get element() {\n        return this.context.element;\n    }\n    get identifier() {\n        return this.context.identifier;\n    }\n    get actionAttribute() {\n        return this.schema.actionAttribute;\n    }\n    get schema() {\n        return this.context.schema;\n    }\n    get bindings() {\n        return Array.from(this.bindingsByAction.values());\n    }\n    connectAction(action) {\n        const binding = new Binding(this.context, action);\n        this.bindingsByAction.set(action, binding);\n        this.delegate.bindingConnected(binding);\n    }\n    disconnectAction(action) {\n        const binding = this.bindingsByAction.get(action);\n        if (binding) {\n            this.bindingsByAction.delete(action);\n            this.delegate.bindingDisconnected(binding);\n        }\n    }\n    disconnectAllActions() {\n        this.bindings.forEach((binding) => this.delegate.bindingDisconnected(binding, true));\n        this.bindingsByAction.clear();\n    }\n    parseValueForToken(token) {\n        const action = Action.forToken(token, this.schema);\n        if (action.identifier == this.identifier) {\n            return action;\n        }\n    }\n    elementMatchedValue(element, action) {\n        this.connectAction(action);\n    }\n    elementUnmatchedValue(element, action) {\n        this.disconnectAction(action);\n    }\n}\n\nclass ValueObserver {\n    constructor(context, receiver) {\n        this.context = context;\n        this.receiver = receiver;\n        this.stringMapObserver = new StringMapObserver(this.element, this);\n        this.valueDescriptorMap = this.controller.valueDescriptorMap;\n    }\n    start() {\n        this.stringMapObserver.start();\n        this.invokeChangedCallbacksForDefaultValues();\n    }\n    stop() {\n        this.stringMapObserver.stop();\n    }\n    get element() {\n        return this.context.element;\n    }\n    get controller() {\n        return this.context.controller;\n    }\n    getStringMapKeyForAttribute(attributeName) {\n        if (attributeName in this.valueDescriptorMap) {\n            return this.valueDescriptorMap[attributeName].name;\n        }\n    }\n    stringMapKeyAdded(key, attributeName) {\n        const descriptor = this.valueDescriptorMap[attributeName];\n        if (!this.hasValue(key)) {\n            this.invokeChangedCallback(key, descriptor.writer(this.receiver[key]), descriptor.writer(descriptor.defaultValue));\n        }\n    }\n    stringMapValueChanged(value, name, oldValue) {\n        const descriptor = this.valueDescriptorNameMap[name];\n        if (value === null)\n            return;\n        if (oldValue === null) {\n            oldValue = descriptor.writer(descriptor.defaultValue);\n        }\n        this.invokeChangedCallback(name, value, oldValue);\n    }\n    stringMapKeyRemoved(key, attributeName, oldValue) {\n        const descriptor = this.valueDescriptorNameMap[key];\n        if (this.hasValue(key)) {\n            this.invokeChangedCallback(key, descriptor.writer(this.receiver[key]), oldValue);\n        }\n        else {\n            this.invokeChangedCallback(key, descriptor.writer(descriptor.defaultValue), oldValue);\n        }\n    }\n    invokeChangedCallbacksForDefaultValues() {\n        for (const { key, name, defaultValue, writer } of this.valueDescriptors) {\n            if (defaultValue != undefined && !this.controller.data.has(key)) {\n                this.invokeChangedCallback(name, writer(defaultValue), undefined);\n            }\n        }\n    }\n    invokeChangedCallback(name, rawValue, rawOldValue) {\n        const changedMethodName = `${name}Changed`;\n        const changedMethod = this.receiver[changedMethodName];\n        if (typeof changedMethod == \"function\") {\n            const descriptor = this.valueDescriptorNameMap[name];\n            try {\n                const value = descriptor.reader(rawValue);\n                let oldValue = rawOldValue;\n                if (rawOldValue) {\n                    oldValue = descriptor.reader(rawOldValue);\n                }\n                changedMethod.call(this.receiver, value, oldValue);\n            }\n            catch (error) {\n                if (error instanceof TypeError) {\n                    error.message = `Stimulus Value \"${this.context.identifier}.${descriptor.name}\" - ${error.message}`;\n                }\n                throw error;\n            }\n        }\n    }\n    get valueDescriptors() {\n        const { valueDescriptorMap } = this;\n        return Object.keys(valueDescriptorMap).map((key) => valueDescriptorMap[key]);\n    }\n    get valueDescriptorNameMap() {\n        const descriptors = {};\n        Object.keys(this.valueDescriptorMap).forEach((key) => {\n            const descriptor = this.valueDescriptorMap[key];\n            descriptors[descriptor.name] = descriptor;\n        });\n        return descriptors;\n    }\n    hasValue(attributeName) {\n        const descriptor = this.valueDescriptorNameMap[attributeName];\n        const hasMethodName = `has${capitalize(descriptor.name)}`;\n        return this.receiver[hasMethodName];\n    }\n}\n\nclass TargetObserver {\n    constructor(context, delegate) {\n        this.context = context;\n        this.delegate = delegate;\n        this.targetsByName = new Multimap();\n    }\n    start() {\n        if (!this.tokenListObserver) {\n            this.tokenListObserver = new TokenListObserver(this.element, this.attributeName, this);\n            this.tokenListObserver.start();\n        }\n    }\n    stop() {\n        if (this.tokenListObserver) {\n            this.disconnectAllTargets();\n            this.tokenListObserver.stop();\n            delete this.tokenListObserver;\n        }\n    }\n    tokenMatched({ element, content: name }) {\n        if (this.scope.containsElement(element)) {\n            this.connectTarget(element, name);\n        }\n    }\n    tokenUnmatched({ element, content: name }) {\n        this.disconnectTarget(element, name);\n    }\n    connectTarget(element, name) {\n        var _a;\n        if (!this.targetsByName.has(name, element)) {\n            this.targetsByName.add(name, element);\n            (_a = this.tokenListObserver) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.targetConnected(element, name));\n        }\n    }\n    disconnectTarget(element, name) {\n        var _a;\n        if (this.targetsByName.has(name, element)) {\n            this.targetsByName.delete(name, element);\n            (_a = this.tokenListObserver) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.targetDisconnected(element, name));\n        }\n    }\n    disconnectAllTargets() {\n        for (const name of this.targetsByName.keys) {\n            for (const element of this.targetsByName.getValuesForKey(name)) {\n                this.disconnectTarget(element, name);\n            }\n        }\n    }\n    get attributeName() {\n        return `data-${this.context.identifier}-target`;\n    }\n    get element() {\n        return this.context.element;\n    }\n    get scope() {\n        return this.context.scope;\n    }\n}\n\nfunction readInheritableStaticArrayValues(constructor, propertyName) {\n    const ancestors = getAncestorsForConstructor(constructor);\n    return Array.from(ancestors.reduce((values, constructor) => {\n        getOwnStaticArrayValues(constructor, propertyName).forEach((name) => values.add(name));\n        return values;\n    }, new Set()));\n}\nfunction readInheritableStaticObjectPairs(constructor, propertyName) {\n    const ancestors = getAncestorsForConstructor(constructor);\n    return ancestors.reduce((pairs, constructor) => {\n        pairs.push(...getOwnStaticObjectPairs(constructor, propertyName));\n        return pairs;\n    }, []);\n}\nfunction getAncestorsForConstructor(constructor) {\n    const ancestors = [];\n    while (constructor) {\n        ancestors.push(constructor);\n        constructor = Object.getPrototypeOf(constructor);\n    }\n    return ancestors.reverse();\n}\nfunction getOwnStaticArrayValues(constructor, propertyName) {\n    const definition = constructor[propertyName];\n    return Array.isArray(definition) ? definition : [];\n}\nfunction getOwnStaticObjectPairs(constructor, propertyName) {\n    const definition = constructor[propertyName];\n    return definition ? Object.keys(definition).map((key) => [key, definition[key]]) : [];\n}\n\nclass OutletObserver {\n    constructor(context, delegate) {\n        this.started = false;\n        this.context = context;\n        this.delegate = delegate;\n        this.outletsByName = new Multimap();\n        this.outletElementsByName = new Multimap();\n        this.selectorObserverMap = new Map();\n        this.attributeObserverMap = new Map();\n    }\n    start() {\n        if (!this.started) {\n            this.outletDefinitions.forEach((outletName) => {\n                this.setupSelectorObserverForOutlet(outletName);\n                this.setupAttributeObserverForOutlet(outletName);\n            });\n            this.started = true;\n            this.dependentContexts.forEach((context) => context.refresh());\n        }\n    }\n    refresh() {\n        this.selectorObserverMap.forEach((observer) => observer.refresh());\n        this.attributeObserverMap.forEach((observer) => observer.refresh());\n    }\n    stop() {\n        if (this.started) {\n            this.started = false;\n            this.disconnectAllOutlets();\n            this.stopSelectorObservers();\n            this.stopAttributeObservers();\n        }\n    }\n    stopSelectorObservers() {\n        if (this.selectorObserverMap.size > 0) {\n            this.selectorObserverMap.forEach((observer) => observer.stop());\n            this.selectorObserverMap.clear();\n        }\n    }\n    stopAttributeObservers() {\n        if (this.attributeObserverMap.size > 0) {\n            this.attributeObserverMap.forEach((observer) => observer.stop());\n            this.attributeObserverMap.clear();\n        }\n    }\n    selectorMatched(element, _selector, { outletName }) {\n        const outlet = this.getOutlet(element, outletName);\n        if (outlet) {\n            this.connectOutlet(outlet, element, outletName);\n        }\n    }\n    selectorUnmatched(element, _selector, { outletName }) {\n        const outlet = this.getOutletFromMap(element, outletName);\n        if (outlet) {\n            this.disconnectOutlet(outlet, element, outletName);\n        }\n    }\n    selectorMatchElement(element, { outletName }) {\n        const selector = this.selector(outletName);\n        const hasOutlet = this.hasOutlet(element, outletName);\n        const hasOutletController = element.matches(`[${this.schema.controllerAttribute}~=${outletName}]`);\n        if (selector) {\n            return hasOutlet && hasOutletController && element.matches(selector);\n        }\n        else {\n            return false;\n        }\n    }\n    elementMatchedAttribute(_element, attributeName) {\n        const outletName = this.getOutletNameFromOutletAttributeName(attributeName);\n        if (outletName) {\n            this.updateSelectorObserverForOutlet(outletName);\n        }\n    }\n    elementAttributeValueChanged(_element, attributeName) {\n        const outletName = this.getOutletNameFromOutletAttributeName(attributeName);\n        if (outletName) {\n            this.updateSelectorObserverForOutlet(outletName);\n        }\n    }\n    elementUnmatchedAttribute(_element, attributeName) {\n        const outletName = this.getOutletNameFromOutletAttributeName(attributeName);\n        if (outletName) {\n            this.updateSelectorObserverForOutlet(outletName);\n        }\n    }\n    connectOutlet(outlet, element, outletName) {\n        var _a;\n        if (!this.outletElementsByName.has(outletName, element)) {\n            this.outletsByName.add(outletName, outlet);\n            this.outletElementsByName.add(outletName, element);\n            (_a = this.selectorObserverMap.get(outletName)) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.outletConnected(outlet, element, outletName));\n        }\n    }\n    disconnectOutlet(outlet, element, outletName) {\n        var _a;\n        if (this.outletElementsByName.has(outletName, element)) {\n            this.outletsByName.delete(outletName, outlet);\n            this.outletElementsByName.delete(outletName, element);\n            (_a = this.selectorObserverMap\n                .get(outletName)) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.outletDisconnected(outlet, element, outletName));\n        }\n    }\n    disconnectAllOutlets() {\n        for (const outletName of this.outletElementsByName.keys) {\n            for (const element of this.outletElementsByName.getValuesForKey(outletName)) {\n                for (const outlet of this.outletsByName.getValuesForKey(outletName)) {\n                    this.disconnectOutlet(outlet, element, outletName);\n                }\n            }\n        }\n    }\n    updateSelectorObserverForOutlet(outletName) {\n        const observer = this.selectorObserverMap.get(outletName);\n        if (observer) {\n            observer.selector = this.selector(outletName);\n        }\n    }\n    setupSelectorObserverForOutlet(outletName) {\n        const selector = this.selector(outletName);\n        const selectorObserver = new SelectorObserver(document.body, selector, this, { outletName });\n        this.selectorObserverMap.set(outletName, selectorObserver);\n        selectorObserver.start();\n    }\n    setupAttributeObserverForOutlet(outletName) {\n        const attributeName = this.attributeNameForOutletName(outletName);\n        const attributeObserver = new AttributeObserver(this.scope.element, attributeName, this);\n        this.attributeObserverMap.set(outletName, attributeObserver);\n        attributeObserver.start();\n    }\n    selector(outletName) {\n        return this.scope.outlets.getSelectorForOutletName(outletName);\n    }\n    attributeNameForOutletName(outletName) {\n        return this.scope.schema.outletAttributeForScope(this.identifier, outletName);\n    }\n    getOutletNameFromOutletAttributeName(attributeName) {\n        return this.outletDefinitions.find((outletName) => this.attributeNameForOutletName(outletName) === attributeName);\n    }\n    get outletDependencies() {\n        const dependencies = new Multimap();\n        this.router.modules.forEach((module) => {\n            const constructor = module.definition.controllerConstructor;\n            const outlets = readInheritableStaticArrayValues(constructor, \"outlets\");\n            outlets.forEach((outlet) => dependencies.add(outlet, module.identifier));\n        });\n        return dependencies;\n    }\n    get outletDefinitions() {\n        return this.outletDependencies.getKeysForValue(this.identifier);\n    }\n    get dependentControllerIdentifiers() {\n        return this.outletDependencies.getValuesForKey(this.identifier);\n    }\n    get dependentContexts() {\n        const identifiers = this.dependentControllerIdentifiers;\n        return this.router.contexts.filter((context) => identifiers.includes(context.identifier));\n    }\n    hasOutlet(element, outletName) {\n        return !!this.getOutlet(element, outletName) || !!this.getOutletFromMap(element, outletName);\n    }\n    getOutlet(element, outletName) {\n        return this.application.getControllerForElementAndIdentifier(element, outletName);\n    }\n    getOutletFromMap(element, outletName) {\n        return this.outletsByName.getValuesForKey(outletName).find((outlet) => outlet.element === element);\n    }\n    get scope() {\n        return this.context.scope;\n    }\n    get schema() {\n        return this.context.schema;\n    }\n    get identifier() {\n        return this.context.identifier;\n    }\n    get application() {\n        return this.context.application;\n    }\n    get router() {\n        return this.application.router;\n    }\n}\n\nclass Context {\n    constructor(module, scope) {\n        this.logDebugActivity = (functionName, detail = {}) => {\n            const { identifier, controller, element } = this;\n            detail = Object.assign({ identifier, controller, element }, detail);\n            this.application.logDebugActivity(this.identifier, functionName, detail);\n        };\n        this.module = module;\n        this.scope = scope;\n        this.controller = new module.controllerConstructor(this);\n        this.bindingObserver = new BindingObserver(this, this.dispatcher);\n        this.valueObserver = new ValueObserver(this, this.controller);\n        this.targetObserver = new TargetObserver(this, this);\n        this.outletObserver = new OutletObserver(this, this);\n        try {\n            this.controller.initialize();\n            this.logDebugActivity(\"initialize\");\n        }\n        catch (error) {\n            this.handleError(error, \"initializing controller\");\n        }\n    }\n    connect() {\n        this.bindingObserver.start();\n        this.valueObserver.start();\n        this.targetObserver.start();\n        this.outletObserver.start();\n        try {\n            this.controller.connect();\n            this.logDebugActivity(\"connect\");\n        }\n        catch (error) {\n            this.handleError(error, \"connecting controller\");\n        }\n    }\n    refresh() {\n        this.outletObserver.refresh();\n    }\n    disconnect() {\n        try {\n            this.controller.disconnect();\n            this.logDebugActivity(\"disconnect\");\n        }\n        catch (error) {\n            this.handleError(error, \"disconnecting controller\");\n        }\n        this.outletObserver.stop();\n        this.targetObserver.stop();\n        this.valueObserver.stop();\n        this.bindingObserver.stop();\n    }\n    get application() {\n        return this.module.application;\n    }\n    get identifier() {\n        return this.module.identifier;\n    }\n    get schema() {\n        return this.application.schema;\n    }\n    get dispatcher() {\n        return this.application.dispatcher;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get parentElement() {\n        return this.element.parentElement;\n    }\n    handleError(error, message, detail = {}) {\n        const { identifier, controller, element } = this;\n        detail = Object.assign({ identifier, controller, element }, detail);\n        this.application.handleError(error, `Error ${message}`, detail);\n    }\n    targetConnected(element, name) {\n        this.invokeControllerMethod(`${name}TargetConnected`, element);\n    }\n    targetDisconnected(element, name) {\n        this.invokeControllerMethod(`${name}TargetDisconnected`, element);\n    }\n    outletConnected(outlet, element, name) {\n        this.invokeControllerMethod(`${namespaceCamelize(name)}OutletConnected`, outlet, element);\n    }\n    outletDisconnected(outlet, element, name) {\n        this.invokeControllerMethod(`${namespaceCamelize(name)}OutletDisconnected`, outlet, element);\n    }\n    invokeControllerMethod(methodName, ...args) {\n        const controller = this.controller;\n        if (typeof controller[methodName] == \"function\") {\n            controller[methodName](...args);\n        }\n    }\n}\n\nfunction bless(constructor) {\n    return shadow(constructor, getBlessedProperties(constructor));\n}\nfunction shadow(constructor, properties) {\n    const shadowConstructor = extend(constructor);\n    const shadowProperties = getShadowProperties(constructor.prototype, properties);\n    Object.defineProperties(shadowConstructor.prototype, shadowProperties);\n    return shadowConstructor;\n}\nfunction getBlessedProperties(constructor) {\n    const blessings = readInheritableStaticArrayValues(constructor, \"blessings\");\n    return blessings.reduce((blessedProperties, blessing) => {\n        const properties = blessing(constructor);\n        for (const key in properties) {\n            const descriptor = blessedProperties[key] || {};\n            blessedProperties[key] = Object.assign(descriptor, properties[key]);\n        }\n        return blessedProperties;\n    }, {});\n}\nfunction getShadowProperties(prototype, properties) {\n    return getOwnKeys(properties).reduce((shadowProperties, key) => {\n        const descriptor = getShadowedDescriptor(prototype, properties, key);\n        if (descriptor) {\n            Object.assign(shadowProperties, { [key]: descriptor });\n        }\n        return shadowProperties;\n    }, {});\n}\nfunction getShadowedDescriptor(prototype, properties, key) {\n    const shadowingDescriptor = Object.getOwnPropertyDescriptor(prototype, key);\n    const shadowedByValue = shadowingDescriptor && \"value\" in shadowingDescriptor;\n    if (!shadowedByValue) {\n        const descriptor = Object.getOwnPropertyDescriptor(properties, key).value;\n        if (shadowingDescriptor) {\n            descriptor.get = shadowingDescriptor.get || descriptor.get;\n            descriptor.set = shadowingDescriptor.set || descriptor.set;\n        }\n        return descriptor;\n    }\n}\nconst getOwnKeys = (() => {\n    if (typeof Object.getOwnPropertySymbols == \"function\") {\n        return (object) => [...Object.getOwnPropertyNames(object), ...Object.getOwnPropertySymbols(object)];\n    }\n    else {\n        return Object.getOwnPropertyNames;\n    }\n})();\nconst extend = (() => {\n    function extendWithReflect(constructor) {\n        function extended() {\n            return Reflect.construct(constructor, arguments, new.target);\n        }\n        extended.prototype = Object.create(constructor.prototype, {\n            constructor: { value: extended },\n        });\n        Reflect.setPrototypeOf(extended, constructor);\n        return extended;\n    }\n    function testReflectExtension() {\n        const a = function () {\n            this.a.call(this);\n        };\n        const b = extendWithReflect(a);\n        b.prototype.a = function () { };\n        return new b();\n    }\n    try {\n        testReflectExtension();\n        return extendWithReflect;\n    }\n    catch (error) {\n        return (constructor) => class extended extends constructor {\n        };\n    }\n})();\n\nfunction blessDefinition(definition) {\n    return {\n        identifier: definition.identifier,\n        controllerConstructor: bless(definition.controllerConstructor),\n    };\n}\n\nclass Module {\n    constructor(application, definition) {\n        this.application = application;\n        this.definition = blessDefinition(definition);\n        this.contextsByScope = new WeakMap();\n        this.connectedContexts = new Set();\n    }\n    get identifier() {\n        return this.definition.identifier;\n    }\n    get controllerConstructor() {\n        return this.definition.controllerConstructor;\n    }\n    get contexts() {\n        return Array.from(this.connectedContexts);\n    }\n    connectContextForScope(scope) {\n        const context = this.fetchContextForScope(scope);\n        this.connectedContexts.add(context);\n        context.connect();\n    }\n    disconnectContextForScope(scope) {\n        const context = this.contextsByScope.get(scope);\n        if (context) {\n            this.connectedContexts.delete(context);\n            context.disconnect();\n        }\n    }\n    fetchContextForScope(scope) {\n        let context = this.contextsByScope.get(scope);\n        if (!context) {\n            context = new Context(this, scope);\n            this.contextsByScope.set(scope, context);\n        }\n        return context;\n    }\n}\n\nclass ClassMap {\n    constructor(scope) {\n        this.scope = scope;\n    }\n    has(name) {\n        return this.data.has(this.getDataKey(name));\n    }\n    get(name) {\n        return this.getAll(name)[0];\n    }\n    getAll(name) {\n        const tokenString = this.data.get(this.getDataKey(name)) || \"\";\n        return tokenize(tokenString);\n    }\n    getAttributeName(name) {\n        return this.data.getAttributeNameForKey(this.getDataKey(name));\n    }\n    getDataKey(name) {\n        return `${name}-class`;\n    }\n    get data() {\n        return this.scope.data;\n    }\n}\n\nclass DataMap {\n    constructor(scope) {\n        this.scope = scope;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get identifier() {\n        return this.scope.identifier;\n    }\n    get(key) {\n        const name = this.getAttributeNameForKey(key);\n        return this.element.getAttribute(name);\n    }\n    set(key, value) {\n        const name = this.getAttributeNameForKey(key);\n        this.element.setAttribute(name, value);\n        return this.get(key);\n    }\n    has(key) {\n        const name = this.getAttributeNameForKey(key);\n        return this.element.hasAttribute(name);\n    }\n    delete(key) {\n        if (this.has(key)) {\n            const name = this.getAttributeNameForKey(key);\n            this.element.removeAttribute(name);\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    getAttributeNameForKey(key) {\n        return `data-${this.identifier}-${dasherize(key)}`;\n    }\n}\n\nclass Guide {\n    constructor(logger) {\n        this.warnedKeysByObject = new WeakMap();\n        this.logger = logger;\n    }\n    warn(object, key, message) {\n        let warnedKeys = this.warnedKeysByObject.get(object);\n        if (!warnedKeys) {\n            warnedKeys = new Set();\n            this.warnedKeysByObject.set(object, warnedKeys);\n        }\n        if (!warnedKeys.has(key)) {\n            warnedKeys.add(key);\n            this.logger.warn(message, object);\n        }\n    }\n}\n\nfunction attributeValueContainsToken(attributeName, token) {\n    return `[${attributeName}~=\"${token}\"]`;\n}\n\nclass TargetSet {\n    constructor(scope) {\n        this.scope = scope;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get identifier() {\n        return this.scope.identifier;\n    }\n    get schema() {\n        return this.scope.schema;\n    }\n    has(targetName) {\n        return this.find(targetName) != null;\n    }\n    find(...targetNames) {\n        return targetNames.reduce((target, targetName) => target || this.findTarget(targetName) || this.findLegacyTarget(targetName), undefined);\n    }\n    findAll(...targetNames) {\n        return targetNames.reduce((targets, targetName) => [\n            ...targets,\n            ...this.findAllTargets(targetName),\n            ...this.findAllLegacyTargets(targetName),\n        ], []);\n    }\n    findTarget(targetName) {\n        const selector = this.getSelectorForTargetName(targetName);\n        return this.scope.findElement(selector);\n    }\n    findAllTargets(targetName) {\n        const selector = this.getSelectorForTargetName(targetName);\n        return this.scope.findAllElements(selector);\n    }\n    getSelectorForTargetName(targetName) {\n        const attributeName = this.schema.targetAttributeForScope(this.identifier);\n        return attributeValueContainsToken(attributeName, targetName);\n    }\n    findLegacyTarget(targetName) {\n        const selector = this.getLegacySelectorForTargetName(targetName);\n        return this.deprecate(this.scope.findElement(selector), targetName);\n    }\n    findAllLegacyTargets(targetName) {\n        const selector = this.getLegacySelectorForTargetName(targetName);\n        return this.scope.findAllElements(selector).map((element) => this.deprecate(element, targetName));\n    }\n    getLegacySelectorForTargetName(targetName) {\n        const targetDescriptor = `${this.identifier}.${targetName}`;\n        return attributeValueContainsToken(this.schema.targetAttribute, targetDescriptor);\n    }\n    deprecate(element, targetName) {\n        if (element) {\n            const { identifier } = this;\n            const attributeName = this.schema.targetAttribute;\n            const revisedAttributeName = this.schema.targetAttributeForScope(identifier);\n            this.guide.warn(element, `target:${targetName}`, `Please replace ${attributeName}=\"${identifier}.${targetName}\" with ${revisedAttributeName}=\"${targetName}\". ` +\n                `The ${attributeName} attribute is deprecated and will be removed in a future version of Stimulus.`);\n        }\n        return element;\n    }\n    get guide() {\n        return this.scope.guide;\n    }\n}\n\nclass OutletSet {\n    constructor(scope, controllerElement) {\n        this.scope = scope;\n        this.controllerElement = controllerElement;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get identifier() {\n        return this.scope.identifier;\n    }\n    get schema() {\n        return this.scope.schema;\n    }\n    has(outletName) {\n        return this.find(outletName) != null;\n    }\n    find(...outletNames) {\n        return outletNames.reduce((outlet, outletName) => outlet || this.findOutlet(outletName), undefined);\n    }\n    findAll(...outletNames) {\n        return outletNames.reduce((outlets, outletName) => [...outlets, ...this.findAllOutlets(outletName)], []);\n    }\n    getSelectorForOutletName(outletName) {\n        const attributeName = this.schema.outletAttributeForScope(this.identifier, outletName);\n        return this.controllerElement.getAttribute(attributeName);\n    }\n    findOutlet(outletName) {\n        const selector = this.getSelectorForOutletName(outletName);\n        if (selector)\n            return this.findElement(selector, outletName);\n    }\n    findAllOutlets(outletName) {\n        const selector = this.getSelectorForOutletName(outletName);\n        return selector ? this.findAllElements(selector, outletName) : [];\n    }\n    findElement(selector, outletName) {\n        const elements = this.scope.queryElements(selector);\n        return elements.filter((element) => this.matchesElement(element, selector, outletName))[0];\n    }\n    findAllElements(selector, outletName) {\n        const elements = this.scope.queryElements(selector);\n        return elements.filter((element) => this.matchesElement(element, selector, outletName));\n    }\n    matchesElement(element, selector, outletName) {\n        const controllerAttribute = element.getAttribute(this.scope.schema.controllerAttribute) || \"\";\n        return element.matches(selector) && controllerAttribute.split(\" \").includes(outletName);\n    }\n}\n\nclass Scope {\n    constructor(schema, element, identifier, logger) {\n        this.targets = new TargetSet(this);\n        this.classes = new ClassMap(this);\n        this.data = new DataMap(this);\n        this.containsElement = (element) => {\n            return element.closest(this.controllerSelector) === this.element;\n        };\n        this.schema = schema;\n        this.element = element;\n        this.identifier = identifier;\n        this.guide = new Guide(logger);\n        this.outlets = new OutletSet(this.documentScope, element);\n    }\n    findElement(selector) {\n        return this.element.matches(selector) ? this.element : this.queryElements(selector).find(this.containsElement);\n    }\n    findAllElements(selector) {\n        return [\n            ...(this.element.matches(selector) ? [this.element] : []),\n            ...this.queryElements(selector).filter(this.containsElement),\n        ];\n    }\n    queryElements(selector) {\n        return Array.from(this.element.querySelectorAll(selector));\n    }\n    get controllerSelector() {\n        return attributeValueContainsToken(this.schema.controllerAttribute, this.identifier);\n    }\n    get isDocumentScope() {\n        return this.element === document.documentElement;\n    }\n    get documentScope() {\n        return this.isDocumentScope\n            ? this\n            : new Scope(this.schema, document.documentElement, this.identifier, this.guide.logger);\n    }\n}\n\nclass ScopeObserver {\n    constructor(element, schema, delegate) {\n        this.element = element;\n        this.schema = schema;\n        this.delegate = delegate;\n        this.valueListObserver = new ValueListObserver(this.element, this.controllerAttribute, this);\n        this.scopesByIdentifierByElement = new WeakMap();\n        this.scopeReferenceCounts = new WeakMap();\n    }\n    start() {\n        this.valueListObserver.start();\n    }\n    stop() {\n        this.valueListObserver.stop();\n    }\n    get controllerAttribute() {\n        return this.schema.controllerAttribute;\n    }\n    parseValueForToken(token) {\n        const { element, content: identifier } = token;\n        return this.parseValueForElementAndIdentifier(element, identifier);\n    }\n    parseValueForElementAndIdentifier(element, identifier) {\n        const scopesByIdentifier = this.fetchScopesByIdentifierForElement(element);\n        let scope = scopesByIdentifier.get(identifier);\n        if (!scope) {\n            scope = this.delegate.createScopeForElementAndIdentifier(element, identifier);\n            scopesByIdentifier.set(identifier, scope);\n        }\n        return scope;\n    }\n    elementMatchedValue(element, value) {\n        const referenceCount = (this.scopeReferenceCounts.get(value) || 0) + 1;\n        this.scopeReferenceCounts.set(value, referenceCount);\n        if (referenceCount == 1) {\n            this.delegate.scopeConnected(value);\n        }\n    }\n    elementUnmatchedValue(element, value) {\n        const referenceCount = this.scopeReferenceCounts.get(value);\n        if (referenceCount) {\n            this.scopeReferenceCounts.set(value, referenceCount - 1);\n            if (referenceCount == 1) {\n                this.delegate.scopeDisconnected(value);\n            }\n        }\n    }\n    fetchScopesByIdentifierForElement(element) {\n        let scopesByIdentifier = this.scopesByIdentifierByElement.get(element);\n        if (!scopesByIdentifier) {\n            scopesByIdentifier = new Map();\n            this.scopesByIdentifierByElement.set(element, scopesByIdentifier);\n        }\n        return scopesByIdentifier;\n    }\n}\n\nclass Router {\n    constructor(application) {\n        this.application = application;\n        this.scopeObserver = new ScopeObserver(this.element, this.schema, this);\n        this.scopesByIdentifier = new Multimap();\n        this.modulesByIdentifier = new Map();\n    }\n    get element() {\n        return this.application.element;\n    }\n    get schema() {\n        return this.application.schema;\n    }\n    get logger() {\n        return this.application.logger;\n    }\n    get controllerAttribute() {\n        return this.schema.controllerAttribute;\n    }\n    get modules() {\n        return Array.from(this.modulesByIdentifier.values());\n    }\n    get contexts() {\n        return this.modules.reduce((contexts, module) => contexts.concat(module.contexts), []);\n    }\n    start() {\n        this.scopeObserver.start();\n    }\n    stop() {\n        this.scopeObserver.stop();\n    }\n    loadDefinition(definition) {\n        this.unloadIdentifier(definition.identifier);\n        const module = new Module(this.application, definition);\n        this.connectModule(module);\n        const afterLoad = definition.controllerConstructor.afterLoad;\n        if (afterLoad) {\n            afterLoad.call(definition.controllerConstructor, definition.identifier, this.application);\n        }\n    }\n    unloadIdentifier(identifier) {\n        const module = this.modulesByIdentifier.get(identifier);\n        if (module) {\n            this.disconnectModule(module);\n        }\n    }\n    getContextForElementAndIdentifier(element, identifier) {\n        const module = this.modulesByIdentifier.get(identifier);\n        if (module) {\n            return module.contexts.find((context) => context.element == element);\n        }\n    }\n    proposeToConnectScopeForElementAndIdentifier(element, identifier) {\n        const scope = this.scopeObserver.parseValueForElementAndIdentifier(element, identifier);\n        if (scope) {\n            this.scopeObserver.elementMatchedValue(scope.element, scope);\n        }\n        else {\n            console.error(`Couldn't find or create scope for identifier: \"${identifier}\" and element:`, element);\n        }\n    }\n    handleError(error, message, detail) {\n        this.application.handleError(error, message, detail);\n    }\n    createScopeForElementAndIdentifier(element, identifier) {\n        return new Scope(this.schema, element, identifier, this.logger);\n    }\n    scopeConnected(scope) {\n        this.scopesByIdentifier.add(scope.identifier, scope);\n        const module = this.modulesByIdentifier.get(scope.identifier);\n        if (module) {\n            module.connectContextForScope(scope);\n        }\n    }\n    scopeDisconnected(scope) {\n        this.scopesByIdentifier.delete(scope.identifier, scope);\n        const module = this.modulesByIdentifier.get(scope.identifier);\n        if (module) {\n            module.disconnectContextForScope(scope);\n        }\n    }\n    connectModule(module) {\n        this.modulesByIdentifier.set(module.identifier, module);\n        const scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);\n        scopes.forEach((scope) => module.connectContextForScope(scope));\n    }\n    disconnectModule(module) {\n        this.modulesByIdentifier.delete(module.identifier);\n        const scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);\n        scopes.forEach((scope) => module.disconnectContextForScope(scope));\n    }\n}\n\nconst defaultSchema = {\n    controllerAttribute: \"data-controller\",\n    actionAttribute: \"data-action\",\n    targetAttribute: \"data-target\",\n    targetAttributeForScope: (identifier) => `data-${identifier}-target`,\n    outletAttributeForScope: (identifier, outlet) => `data-${identifier}-${outlet}-outlet`,\n    keyMappings: Object.assign(Object.assign({ enter: \"Enter\", tab: \"Tab\", esc: \"Escape\", space: \" \", up: \"ArrowUp\", down: \"ArrowDown\", left: \"ArrowLeft\", right: \"ArrowRight\", home: \"Home\", end: \"End\", page_up: \"PageUp\", page_down: \"PageDown\" }, objectFromEntries(\"abcdefghijklmnopqrstuvwxyz\".split(\"\").map((c) => [c, c]))), objectFromEntries(\"0123456789\".split(\"\").map((n) => [n, n]))),\n};\nfunction objectFromEntries(array) {\n    return array.reduce((memo, [k, v]) => (Object.assign(Object.assign({}, memo), { [k]: v })), {});\n}\n\nclass Application {\n    constructor(element = document.documentElement, schema = defaultSchema) {\n        this.logger = console;\n        this.debug = false;\n        this.logDebugActivity = (identifier, functionName, detail = {}) => {\n            if (this.debug) {\n                this.logFormattedMessage(identifier, functionName, detail);\n            }\n        };\n        this.element = element;\n        this.schema = schema;\n        this.dispatcher = new Dispatcher(this);\n        this.router = new Router(this);\n        this.actionDescriptorFilters = Object.assign({}, defaultActionDescriptorFilters);\n    }\n    static start(element, schema) {\n        const application = new this(element, schema);\n        application.start();\n        return application;\n    }\n    async start() {\n        await domReady();\n        this.logDebugActivity(\"application\", \"starting\");\n        this.dispatcher.start();\n        this.router.start();\n        this.logDebugActivity(\"application\", \"start\");\n    }\n    stop() {\n        this.logDebugActivity(\"application\", \"stopping\");\n        this.dispatcher.stop();\n        this.router.stop();\n        this.logDebugActivity(\"application\", \"stop\");\n    }\n    register(identifier, controllerConstructor) {\n        this.load({ identifier, controllerConstructor });\n    }\n    registerActionOption(name, filter) {\n        this.actionDescriptorFilters[name] = filter;\n    }\n    load(head, ...rest) {\n        const definitions = Array.isArray(head) ? head : [head, ...rest];\n        definitions.forEach((definition) => {\n            if (definition.controllerConstructor.shouldLoad) {\n                this.router.loadDefinition(definition);\n            }\n        });\n    }\n    unload(head, ...rest) {\n        const identifiers = Array.isArray(head) ? head : [head, ...rest];\n        identifiers.forEach((identifier) => this.router.unloadIdentifier(identifier));\n    }\n    get controllers() {\n        return this.router.contexts.map((context) => context.controller);\n    }\n    getControllerForElementAndIdentifier(element, identifier) {\n        const context = this.router.getContextForElementAndIdentifier(element, identifier);\n        return context ? context.controller : null;\n    }\n    handleError(error, message, detail) {\n        var _a;\n        this.logger.error(`%s\\n\\n%o\\n\\n%o`, message, error, detail);\n        (_a = window.onerror) === null || _a === void 0 ? void 0 : _a.call(window, message, \"\", 0, 0, error);\n    }\n    logFormattedMessage(identifier, functionName, detail = {}) {\n        detail = Object.assign({ application: this }, detail);\n        this.logger.groupCollapsed(`${identifier} #${functionName}`);\n        this.logger.log(\"details:\", Object.assign({}, detail));\n        this.logger.groupEnd();\n    }\n}\nfunction domReady() {\n    return new Promise((resolve) => {\n        if (document.readyState == \"loading\") {\n            document.addEventListener(\"DOMContentLoaded\", () => resolve());\n        }\n        else {\n            resolve();\n        }\n    });\n}\n\nfunction ClassPropertiesBlessing(constructor) {\n    const classes = readInheritableStaticArrayValues(constructor, \"classes\");\n    return classes.reduce((properties, classDefinition) => {\n        return Object.assign(properties, propertiesForClassDefinition(classDefinition));\n    }, {});\n}\nfunction propertiesForClassDefinition(key) {\n    return {\n        [`${key}Class`]: {\n            get() {\n                const { classes } = this;\n                if (classes.has(key)) {\n                    return classes.get(key);\n                }\n                else {\n                    const attribute = classes.getAttributeName(key);\n                    throw new Error(`Missing attribute \"${attribute}\"`);\n                }\n            },\n        },\n        [`${key}Classes`]: {\n            get() {\n                return this.classes.getAll(key);\n            },\n        },\n        [`has${capitalize(key)}Class`]: {\n            get() {\n                return this.classes.has(key);\n            },\n        },\n    };\n}\n\nfunction OutletPropertiesBlessing(constructor) {\n    const outlets = readInheritableStaticArrayValues(constructor, \"outlets\");\n    return outlets.reduce((properties, outletDefinition) => {\n        return Object.assign(properties, propertiesForOutletDefinition(outletDefinition));\n    }, {});\n}\nfunction getOutletController(controller, element, identifier) {\n    return controller.application.getControllerForElementAndIdentifier(element, identifier);\n}\nfunction getControllerAndEnsureConnectedScope(controller, element, outletName) {\n    let outletController = getOutletController(controller, element, outletName);\n    if (outletController)\n        return outletController;\n    controller.application.router.proposeToConnectScopeForElementAndIdentifier(element, outletName);\n    outletController = getOutletController(controller, element, outletName);\n    if (outletController)\n        return outletController;\n}\nfunction propertiesForOutletDefinition(name) {\n    const camelizedName = namespaceCamelize(name);\n    return {\n        [`${camelizedName}Outlet`]: {\n            get() {\n                const outletElement = this.outlets.find(name);\n                const selector = this.outlets.getSelectorForOutletName(name);\n                if (outletElement) {\n                    const outletController = getControllerAndEnsureConnectedScope(this, outletElement, name);\n                    if (outletController)\n                        return outletController;\n                    throw new Error(`The provided outlet element is missing an outlet controller \"${name}\" instance for host controller \"${this.identifier}\"`);\n                }\n                throw new Error(`Missing outlet element \"${name}\" for host controller \"${this.identifier}\". Stimulus couldn't find a matching outlet element using selector \"${selector}\".`);\n            },\n        },\n        [`${camelizedName}Outlets`]: {\n            get() {\n                const outlets = this.outlets.findAll(name);\n                if (outlets.length > 0) {\n                    return outlets\n                        .map((outletElement) => {\n                        const outletController = getControllerAndEnsureConnectedScope(this, outletElement, name);\n                        if (outletController)\n                            return outletController;\n                        console.warn(`The provided outlet element is missing an outlet controller \"${name}\" instance for host controller \"${this.identifier}\"`, outletElement);\n                    })\n                        .filter((controller) => controller);\n                }\n                return [];\n            },\n        },\n        [`${camelizedName}OutletElement`]: {\n            get() {\n                const outletElement = this.outlets.find(name);\n                const selector = this.outlets.getSelectorForOutletName(name);\n                if (outletElement) {\n                    return outletElement;\n                }\n                else {\n                    throw new Error(`Missing outlet element \"${name}\" for host controller \"${this.identifier}\". Stimulus couldn't find a matching outlet element using selector \"${selector}\".`);\n                }\n            },\n        },\n        [`${camelizedName}OutletElements`]: {\n            get() {\n                return this.outlets.findAll(name);\n            },\n        },\n        [`has${capitalize(camelizedName)}Outlet`]: {\n            get() {\n                return this.outlets.has(name);\n            },\n        },\n    };\n}\n\nfunction TargetPropertiesBlessing(constructor) {\n    const targets = readInheritableStaticArrayValues(constructor, \"targets\");\n    return targets.reduce((properties, targetDefinition) => {\n        return Object.assign(properties, propertiesForTargetDefinition(targetDefinition));\n    }, {});\n}\nfunction propertiesForTargetDefinition(name) {\n    return {\n        [`${name}Target`]: {\n            get() {\n                const target = this.targets.find(name);\n                if (target) {\n                    return target;\n                }\n                else {\n                    throw new Error(`Missing target element \"${name}\" for \"${this.identifier}\" controller`);\n                }\n            },\n        },\n        [`${name}Targets`]: {\n            get() {\n                return this.targets.findAll(name);\n            },\n        },\n        [`has${capitalize(name)}Target`]: {\n            get() {\n                return this.targets.has(name);\n            },\n        },\n    };\n}\n\nfunction ValuePropertiesBlessing(constructor) {\n    const valueDefinitionPairs = readInheritableStaticObjectPairs(constructor, \"values\");\n    const propertyDescriptorMap = {\n        valueDescriptorMap: {\n            get() {\n                return valueDefinitionPairs.reduce((result, valueDefinitionPair) => {\n                    const valueDescriptor = parseValueDefinitionPair(valueDefinitionPair, this.identifier);\n                    const attributeName = this.data.getAttributeNameForKey(valueDescriptor.key);\n                    return Object.assign(result, { [attributeName]: valueDescriptor });\n                }, {});\n            },\n        },\n    };\n    return valueDefinitionPairs.reduce((properties, valueDefinitionPair) => {\n        return Object.assign(properties, propertiesForValueDefinitionPair(valueDefinitionPair));\n    }, propertyDescriptorMap);\n}\nfunction propertiesForValueDefinitionPair(valueDefinitionPair, controller) {\n    const definition = parseValueDefinitionPair(valueDefinitionPair, controller);\n    const { key, name, reader: read, writer: write } = definition;\n    return {\n        [name]: {\n            get() {\n                const value = this.data.get(key);\n                if (value !== null) {\n                    return read(value);\n                }\n                else {\n                    return definition.defaultValue;\n                }\n            },\n            set(value) {\n                if (value === undefined) {\n                    this.data.delete(key);\n                }\n                else {\n                    this.data.set(key, write(value));\n                }\n            },\n        },\n        [`has${capitalize(name)}`]: {\n            get() {\n                return this.data.has(key) || definition.hasCustomDefaultValue;\n            },\n        },\n    };\n}\nfunction parseValueDefinitionPair([token, typeDefinition], controller) {\n    return valueDescriptorForTokenAndTypeDefinition({\n        controller,\n        token,\n        typeDefinition,\n    });\n}\nfunction parseValueTypeConstant(constant) {\n    switch (constant) {\n        case Array:\n            return \"array\";\n        case Boolean:\n            return \"boolean\";\n        case Number:\n            return \"number\";\n        case Object:\n            return \"object\";\n        case String:\n            return \"string\";\n    }\n}\nfunction parseValueTypeDefault(defaultValue) {\n    switch (typeof defaultValue) {\n        case \"boolean\":\n            return \"boolean\";\n        case \"number\":\n            return \"number\";\n        case \"string\":\n            return \"string\";\n    }\n    if (Array.isArray(defaultValue))\n        return \"array\";\n    if (Object.prototype.toString.call(defaultValue) === \"[object Object]\")\n        return \"object\";\n}\nfunction parseValueTypeObject(payload) {\n    const { controller, token, typeObject } = payload;\n    const hasType = isSomething(typeObject.type);\n    const hasDefault = isSomething(typeObject.default);\n    const fullObject = hasType && hasDefault;\n    const onlyType = hasType && !hasDefault;\n    const onlyDefault = !hasType && hasDefault;\n    const typeFromObject = parseValueTypeConstant(typeObject.type);\n    const typeFromDefaultValue = parseValueTypeDefault(payload.typeObject.default);\n    if (onlyType)\n        return typeFromObject;\n    if (onlyDefault)\n        return typeFromDefaultValue;\n    if (typeFromObject !== typeFromDefaultValue) {\n        const propertyPath = controller ? `${controller}.${token}` : token;\n        throw new Error(`The specified default value for the Stimulus Value \"${propertyPath}\" must match the defined type \"${typeFromObject}\". The provided default value of \"${typeObject.default}\" is of type \"${typeFromDefaultValue}\".`);\n    }\n    if (fullObject)\n        return typeFromObject;\n}\nfunction parseValueTypeDefinition(payload) {\n    const { controller, token, typeDefinition } = payload;\n    const typeObject = { controller, token, typeObject: typeDefinition };\n    const typeFromObject = parseValueTypeObject(typeObject);\n    const typeFromDefaultValue = parseValueTypeDefault(typeDefinition);\n    const typeFromConstant = parseValueTypeConstant(typeDefinition);\n    const type = typeFromObject || typeFromDefaultValue || typeFromConstant;\n    if (type)\n        return type;\n    const propertyPath = controller ? `${controller}.${typeDefinition}` : token;\n    throw new Error(`Unknown value type \"${propertyPath}\" for \"${token}\" value`);\n}\nfunction defaultValueForDefinition(typeDefinition) {\n    const constant = parseValueTypeConstant(typeDefinition);\n    if (constant)\n        return defaultValuesByType[constant];\n    const hasDefault = hasProperty(typeDefinition, \"default\");\n    const hasType = hasProperty(typeDefinition, \"type\");\n    const typeObject = typeDefinition;\n    if (hasDefault)\n        return typeObject.default;\n    if (hasType) {\n        const { type } = typeObject;\n        const constantFromType = parseValueTypeConstant(type);\n        if (constantFromType)\n            return defaultValuesByType[constantFromType];\n    }\n    return typeDefinition;\n}\nfunction valueDescriptorForTokenAndTypeDefinition(payload) {\n    const { token, typeDefinition } = payload;\n    const key = `${dasherize(token)}-value`;\n    const type = parseValueTypeDefinition(payload);\n    return {\n        type,\n        key,\n        name: camelize(key),\n        get defaultValue() {\n            return defaultValueForDefinition(typeDefinition);\n        },\n        get hasCustomDefaultValue() {\n            return parseValueTypeDefault(typeDefinition) !== undefined;\n        },\n        reader: readers[type],\n        writer: writers[type] || writers.default,\n    };\n}\nconst defaultValuesByType = {\n    get array() {\n        return [];\n    },\n    boolean: false,\n    number: 0,\n    get object() {\n        return {};\n    },\n    string: \"\",\n};\nconst readers = {\n    array(value) {\n        const array = JSON.parse(value);\n        if (!Array.isArray(array)) {\n            throw new TypeError(`expected value of type \"array\" but instead got value \"${value}\" of type \"${parseValueTypeDefault(array)}\"`);\n        }\n        return array;\n    },\n    boolean(value) {\n        return !(value == \"0\" || String(value).toLowerCase() == \"false\");\n    },\n    number(value) {\n        return Number(value.replace(/_/g, \"\"));\n    },\n    object(value) {\n        const object = JSON.parse(value);\n        if (object === null || typeof object != \"object\" || Array.isArray(object)) {\n            throw new TypeError(`expected value of type \"object\" but instead got value \"${value}\" of type \"${parseValueTypeDefault(object)}\"`);\n        }\n        return object;\n    },\n    string(value) {\n        return value;\n    },\n};\nconst writers = {\n    default: writeString,\n    array: writeJSON,\n    object: writeJSON,\n};\nfunction writeJSON(value) {\n    return JSON.stringify(value);\n}\nfunction writeString(value) {\n    return `${value}`;\n}\n\nclass Controller {\n    constructor(context) {\n        this.context = context;\n    }\n    static get shouldLoad() {\n        return true;\n    }\n    static afterLoad(_identifier, _application) {\n        return;\n    }\n    get application() {\n        return this.context.application;\n    }\n    get scope() {\n        return this.context.scope;\n    }\n    get element() {\n        return this.scope.element;\n    }\n    get identifier() {\n        return this.scope.identifier;\n    }\n    get targets() {\n        return this.scope.targets;\n    }\n    get outlets() {\n        return this.scope.outlets;\n    }\n    get classes() {\n        return this.scope.classes;\n    }\n    get data() {\n        return this.scope.data;\n    }\n    initialize() {\n    }\n    connect() {\n    }\n    disconnect() {\n    }\n    dispatch(eventName, { target = this.element, detail = {}, prefix = this.identifier, bubbles = true, cancelable = true, } = {}) {\n        const type = prefix ? `${prefix}:${eventName}` : eventName;\n        const event = new CustomEvent(type, { detail, bubbles, cancelable });\n        target.dispatchEvent(event);\n        return event;\n    }\n}\nController.blessings = [\n    ClassPropertiesBlessing,\n    TargetPropertiesBlessing,\n    ValuePropertiesBlessing,\n    OutletPropertiesBlessing,\n];\nController.targets = [];\nController.outlets = [];\nController.values = {};\n\nexport { Application, AttributeObserver, Context, Controller, ElementObserver, IndexedMultimap, Multimap, SelectorObserver, StringMapObserver, TokenListObserver, ValueListObserver, add, defaultSchema, del, fetch, prune };\n", "import { Controller } from \"@hotwired/stimulus\"\n\n// Connects to data-controller=\"resource-header\"\nexport default class extends Controller {\n  static targets = [\"openIcon\", \"closeIcon\"]\n  static outlets = [\"sidebar\"]\n  static values = {\n    placement: { type: String, default: \"left\" },\n    bodyScrolling: { type: Boolean, default: false },\n    backdrop: { type: Boolean, default: true },\n    edge: { type: Boolean, default: false },\n    edgeOffset: { type: String, default: \"bottom-[60px]\" }\n  }\n  static classes = {\n    backdrop: \"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-30\"\n  }\n\n  initialize() {\n    this.visible = false\n    this.handleEscapeKey = this.handleEscapeKey.bind(this)\n  }\n\n  connect() {\n    document.addEventListener(\"keydown\", this.handleEscapeKey)\n  }\n\n  sidebarOutletConnected() {\n    this.#setupDrawer(this.sidebarOutlet.element)\n  }\n\n  disconnect() {\n    this.#removeBackdrop()\n    document.removeEventListener(\"keydown\", this.handleEscapeKey)\n    if (!this.bodyScrollingValue) {\n      document.body.classList.remove(\"overflow-hidden\")\n    }\n  }\n\n  #setupDrawer(drawerElement) {\n    drawerElement.setAttribute(\"aria-hidden\", \"true\")\n    drawerElement.classList.add(\"transition-transform\")\n\n    // Add base placement classes\n    this.#getPlacementClasses(this.placementValue).base.forEach(className => {\n      drawerElement.classList.add(className)\n    })\n  }\n\n  toggleDrawer() {\n    this.visible ? this.hideDrawer() : this.showDrawer()\n  }\n\n  showDrawer() {\n    if (this.edgeValue) {\n      this.#toggleEdgePlacementClasses(`${this.placementValue}-edge`, true)\n    } else {\n      this.#togglePlacementClasses(this.placementValue, true)\n    }\n\n    // Toggle visibility and ARIA attributes of icons\n    this.openIconTarget.classList.add(\"hidden\")\n    this.openIconTarget.setAttribute(\"aria-hidden\", \"true\")\n\n    this.closeIconTarget.classList.remove(\"hidden\")\n    this.closeIconTarget.setAttribute(\"aria-hidden\", \"false\")\n\n    // Rest of the method stays same...\n    this.sidebarOutlet.element.setAttribute(\"aria-modal\", \"true\")\n    this.sidebarOutlet.element.setAttribute(\"role\", \"dialog\")\n    this.sidebarOutlet.element.removeAttribute(\"aria-hidden\")\n\n    if (!this.bodyScrollingValue) {\n      document.body.classList.add(\"overflow-hidden\")\n    }\n\n    if (this.backdropValue) {\n      this.#createBackdrop()\n    }\n\n    this.visible = true\n    this.dispatch(\"show\")\n  }\n\n  hideDrawer() {\n    if (this.edgeValue) {\n      this.#toggleEdgePlacementClasses(`${this.placementValue}-edge`, false)\n    } else {\n      this.#togglePlacementClasses(this.placementValue, false)\n    }\n\n    // Toggle visibility and ARIA attributes of icons\n    this.openIconTarget.classList.remove(\"hidden\")\n    this.openIconTarget.setAttribute(\"aria-hidden\", \"false\")\n\n    this.closeIconTarget.classList.add(\"hidden\")\n    this.closeIconTarget.setAttribute(\"aria-hidden\", \"true\")\n\n    // Rest of the method stays same...\n    this.sidebarOutlet.element.setAttribute(\"aria-hidden\", \"true\")\n    this.sidebarOutlet.element.removeAttribute(\"aria-modal\")\n    this.sidebarOutlet.element.removeAttribute(\"role\")\n\n    if (!this.bodyScrollingValue) {\n      document.body.classList.remove(\"overflow-hidden\")\n    }\n\n    if (this.backdropValue) {\n      this.#removeBackdrop()\n    }\n\n    this.visible = false\n    this.dispatch(\"hide\")\n  }\n\n  handleEscapeKey(event) {\n    if (event.key === \"Escape\" && this.visible) {\n      this.hideDrawer()\n    }\n  }\n\n  #createBackdrop() {\n    if (!this.visible) {\n      const backdrop = document.createElement(\"div\")\n      backdrop.setAttribute(\"data-drawer-backdrop\", \"\")\n      backdrop.classList.add(...this.constructor.classes.backdrop.split(\" \"))\n      backdrop.addEventListener(\"click\", () => this.hideDrawer())\n      document.body.appendChild(backdrop)\n    }\n  }\n\n  #removeBackdrop() {\n    const backdrop = document.querySelector(\"[data-drawer-backdrop]\")\n    if (backdrop) {\n      backdrop.remove()\n    }\n  }\n\n  #getPlacementClasses(placement) {\n    const placements = {\n      top: {\n        base: [\"top-0\", \"left-0\", \"right-0\"],\n        active: [\"transform-none\"],\n        inactive: [\"-translate-y-full\"]\n      },\n      right: {\n        base: [\"right-0\", \"top-0\"],\n        active: [\"transform-none\"],\n        inactive: [\"translate-x-full\"]\n      },\n      bottom: {\n        base: [\"bottom-0\", \"left-0\", \"right-0\"],\n        active: [\"transform-none\"],\n        inactive: [\"translate-y-full\"]\n      },\n      left: {\n        base: [\"left-0\", \"top-0\"],\n        active: [\"transform-none\"],\n        inactive: [\"-translate-x-full\"]\n      },\n      \"bottom-edge\": {\n        base: [\"left-0\", \"top-0\"],\n        active: [\"transform-none\"],\n        inactive: [\"translate-y-full\", this.edgeOffsetValue]\n      }\n    }\n\n    return placements[placement] || placements.left\n  }\n\n  #togglePlacementClasses(placement, show) {\n    const classes = this.#getPlacementClasses(placement)\n\n    if (show) {\n      classes.active.forEach(c => this.sidebarOutlet.element.classList.add(c))\n      classes.inactive.forEach(c => this.sidebarOutlet.element.classList.remove(c))\n    } else {\n      classes.active.forEach(c => this.sidebarOutlet.element.classList.remove(c))\n      classes.inactive.forEach(c => this.sidebarOutlet.element.classList.add(c))\n    }\n  }\n\n  #toggleEdgePlacementClasses(placement, show) {\n    this.#togglePlacementClasses(placement, show)\n  }\n}\n", "import { Controller } from \"@hotwired/stimulus\"\n\n// Connects to data-controller=\"nested-resource-form-fields\"\n// Copied from https://github.com/stimulus-components/stimulus-rails-nested-form/blob/master/src/index.ts\nexport default class extends Controller {\n  static targets = [\"target\", \"template\", \"addButton\"]\n\n  static values = {\n    wrapperSelector: {\n      type: String,\n      default: \".nested-resource-form-fields\",\n    },\n    limit: Number,\n  }\n\n  connect() {\n    this.updateState()\n  }\n\n  add(e) {\n    e.preventDefault()\n\n    const content = this.templateTarget.innerHTML.replace(/NEW_RECORD/g, new Date().getTime().toString())\n    this.targetTarget.insertAdjacentHTML(\"beforebegin\", content)\n\n    const event = new CustomEvent(\"nested-resource-form-fields:add\", { bubbles: true })\n    this.element.dispatchEvent(event)\n\n    this.updateState()\n  }\n\n  remove(e) {\n    e.preventDefault()\n\n    const wrapper = e.target.closest(this.wrapperSelectorValue)\n    if (wrapper.dataset.newRecord !== undefined) {\n      wrapper.remove()\n    } else {\n      wrapper.style.display = \"none\"\n      wrapper.classList.remove(...wrapper.classList)\n\n      const input = wrapper.querySelector(\"input[name*='_destroy']\")\n      input.value = \"1\"\n    }\n\n    const event = new CustomEvent(\"nested-resource-form-fields:remove\", { bubbles: true })\n    this.element.dispatchEvent(event)\n\n    this.updateState()\n  }\n\n  updateState() {\n    if (!this.hasAddButtonTarget || this.limitValue == 0) return\n\n    if (this.childCount >= this.limitValue)\n      this.addButtonTarget.style.display = \"none\"\n    else\n      this.addButtonTarget.style.display = \"initial\"\n  }\n\n  get childCount() {\n    return this.element.querySelectorAll(this.wrapperSelectorValue).length\n  }\n}\n", "import { Controller } from \"@hotwired/stimulus\"\n\n// Connects to data-controller=\"form\"\nexport default class extends Controller {\n  connect() {\n  }\n \n  preSubmit() {\n    // Create a hidden input field\n    const hiddenField = document.createElement('input');\n    hiddenField.type = 'hidden';\n    hiddenField.name = 'pre_submit';\n    hiddenField.value = 'true';\n \n    // Append it to the form\n    this.element.appendChild(hiddenField);\n\n    // Skip validation by setting novalidate attribute\n    this.element.setAttribute('novalidate', '');\n\n    // Submit the form\n    this.submit();\n  }\n \n  submit() {\n    this.element.requestSubmit()\n  }\n}\n", "export var top = 'top';\nexport var bottom = 'bottom';\nexport var right = 'right';\nexport var left = 'left';\nexport var auto = 'auto';\nexport var basePlacements = [top, bottom, right, left];\nexport var start = 'start';\nexport var end = 'end';\nexport var clippingParents = 'clippingParents';\nexport var viewport = 'viewport';\nexport var popper = 'popper';\nexport var reference = 'reference';\nexport var variationPlacements = /*#__PURE__*/basePlacements.reduce(function (acc, placement) {\n  return acc.concat([placement + \"-\" + start, placement + \"-\" + end]);\n}, []);\nexport var placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {\n  return acc.concat([placement, placement + \"-\" + start, placement + \"-\" + end]);\n}, []); // modifiers that need to read the DOM\n\nexport var beforeRead = 'beforeRead';\nexport var read = 'read';\nexport var afterRead = 'afterRead'; // pure-logic modifiers\n\nexport var beforeMain = 'beforeMain';\nexport var main = 'main';\nexport var afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)\n\nexport var beforeWrite = 'beforeWrite';\nexport var write = 'write';\nexport var afterWrite = 'afterWrite';\nexport var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];", "export default function getNodeName(element) {\n  return element ? (element.nodeName || '').toLowerCase() : null;\n}", "export default function getWindow(node) {\n  if (node == null) {\n    return window;\n  }\n\n  if (node.toString() !== '[object Window]') {\n    var ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n  }\n\n  return node;\n}", "import getWindow from \"./getWindow.js\";\n\nfunction isElement(node) {\n  var OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement || node instanceof Element;\n}\n\nfunction isHTMLElement(node) {\n  var OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement || node instanceof HTMLElement;\n}\n\nfunction isShadowRoot(node) {\n  // IE 11 has no ShadowRoot\n  if (typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n\n  var OwnElement = getWindow(node).ShadowRoot;\n  return node instanceof OwnElement || node instanceof ShadowRoot;\n}\n\nexport { isElement, isHTMLElement, isShadowRoot };", "import getNodeName from \"../dom-utils/getNodeName.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // This modifier takes the styles prepared by the `computeStyles` modifier\n// and applies them to the HTMLElements such as popper and arrow\n\nfunction applyStyles(_ref) {\n  var state = _ref.state;\n  Object.keys(state.elements).forEach(function (name) {\n    var style = state.styles[name] || {};\n    var attributes = state.attributes[name] || {};\n    var element = state.elements[name]; // arrow is optional + virtual elements\n\n    if (!isHTMLElement(element) || !getNodeName(element)) {\n      return;\n    } // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElement\n    // $FlowFixMe[cannot-write]\n\n\n    Object.assign(element.style, style);\n    Object.keys(attributes).forEach(function (name) {\n      var value = attributes[name];\n\n      if (value === false) {\n        element.removeAttribute(name);\n      } else {\n        element.setAttribute(name, value === true ? '' : value);\n      }\n    });\n  });\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state;\n  var initialStyles = {\n    popper: {\n      position: state.options.strategy,\n      left: '0',\n      top: '0',\n      margin: '0'\n    },\n    arrow: {\n      position: 'absolute'\n    },\n    reference: {}\n  };\n  Object.assign(state.elements.popper.style, initialStyles.popper);\n  state.styles = initialStyles;\n\n  if (state.elements.arrow) {\n    Object.assign(state.elements.arrow.style, initialStyles.arrow);\n  }\n\n  return function () {\n    Object.keys(state.elements).forEach(function (name) {\n      var element = state.elements[name];\n      var attributes = state.attributes[name] || {};\n      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]); // Set all values to an empty string to unset them\n\n      var style = styleProperties.reduce(function (style, property) {\n        style[property] = '';\n        return style;\n      }, {}); // arrow is optional + virtual elements\n\n      if (!isHTMLElement(element) || !getNodeName(element)) {\n        return;\n      }\n\n      Object.assign(element.style, style);\n      Object.keys(attributes).forEach(function (attribute) {\n        element.removeAttribute(attribute);\n      });\n    });\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'applyStyles',\n  enabled: true,\n  phase: 'write',\n  fn: applyStyles,\n  effect: effect,\n  requires: ['computeStyles']\n};", "import { auto } from \"../enums.js\";\nexport default function getBasePlacement(placement) {\n  return placement.split('-')[0];\n}", "export var max = Math.max;\nexport var min = Math.min;\nexport var round = Math.round;", "export default function getUAString() {\n  var uaData = navigator.userAgentData;\n\n  if (uaData != null && uaData.brands && Array.isArray(uaData.brands)) {\n    return uaData.brands.map(function (item) {\n      return item.brand + \"/\" + item.version;\n    }).join(' ');\n  }\n\n  return navigator.userAgent;\n}", "import getUAString from \"../utils/userAgent.js\";\nexport default function isLayoutViewport() {\n  return !/^((?!chrome|android).)*safari/i.test(getUAString());\n}", "import { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport { round } from \"../utils/math.js\";\nimport getWindow from \"./getWindow.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getBoundingClientRect(element, includeScale, isFixedStrategy) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n\n  var clientRect = element.getBoundingClientRect();\n  var scaleX = 1;\n  var scaleY = 1;\n\n  if (includeScale && isHTMLElement(element)) {\n    scaleX = element.offsetWidth > 0 ? round(clientRect.width) / element.offsetWidth || 1 : 1;\n    scaleY = element.offsetHeight > 0 ? round(clientRect.height) / element.offsetHeight || 1 : 1;\n  }\n\n  var _ref = isElement(element) ? getWindow(element) : window,\n      visualViewport = _ref.visualViewport;\n\n  var addVisualOffsets = !isLayoutViewport() && isFixedStrategy;\n  var x = (clientRect.left + (addVisualOffsets && visualViewport ? visualViewport.offsetLeft : 0)) / scaleX;\n  var y = (clientRect.top + (addVisualOffsets && visualViewport ? visualViewport.offsetTop : 0)) / scaleY;\n  var width = clientRect.width / scaleX;\n  var height = clientRect.height / scaleY;\n  return {\n    width: width,\n    height: height,\n    top: y,\n    right: x + width,\n    bottom: y + height,\n    left: x,\n    x: x,\n    y: y\n  };\n}", "import getBoundingClientRect from \"./getBoundingClientRect.js\"; // Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\n\nexport default function getLayoutRect(element) {\n  var clientRect = getBoundingClientRect(element); // Use the clientRect sizes if it's not been transformed.\n  // Fixes https://github.com/popperjs/popper-core/issues/1223\n\n  var width = element.offsetWidth;\n  var height = element.offsetHeight;\n\n  if (Math.abs(clientRect.width - width) <= 1) {\n    width = clientRect.width;\n  }\n\n  if (Math.abs(clientRect.height - height) <= 1) {\n    height = clientRect.height;\n  }\n\n  return {\n    x: element.offsetLeft,\n    y: element.offsetTop,\n    width: width,\n    height: height\n  };\n}", "import { isShadowRoot } from \"./instanceOf.js\";\nexport default function contains(parent, child) {\n  var rootNode = child.getRootNode && child.getRootNode(); // First, attempt with faster native method\n\n  if (parent.contains(child)) {\n    return true;\n  } // then fallback to custom implementation with Shadow DOM support\n  else if (rootNode && isShadowRoot(rootNode)) {\n      var next = child;\n\n      do {\n        if (next && parent.isSameNode(next)) {\n          return true;\n        } // $FlowFixMe[prop-missing]: need a better way to handle this...\n\n\n        next = next.parentNode || next.host;\n      } while (next);\n    } // Give up, the result is false\n\n\n  return false;\n}", "import getWindow from \"./getWindow.js\";\nexport default function getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}", "import getNodeName from \"./getNodeName.js\";\nexport default function isTableElement(element) {\n  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n}", "import { isElement } from \"./instanceOf.js\";\nexport default function getDocumentElement(element) {\n  // $FlowFixMe[incompatible-return]: assume body is always available\n  return ((isElement(element) ? element.ownerDocument : // $FlowFixMe[prop-missing]\n  element.document) || window.document).documentElement;\n}", "import getNodeName from \"./getNodeName.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport { isShadowRoot } from \"./instanceOf.js\";\nexport default function getParentNode(element) {\n  if (getNodeName(element) === 'html') {\n    return element;\n  }\n\n  return (// this is a quicker (but less type safe) way to save quite some bytes from the bundle\n    // $FlowFixMe[incompatible-return]\n    // $FlowFixMe[prop-missing]\n    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n    element.parentNode || ( // DOM Element detected\n    isShadowRoot(element) ? element.host : null) || // ShadowRoot detected\n    // $FlowFixMe[incompatible-call]: HTMLElement is a Node\n    getDocumentElement(element) // fallback\n\n  );\n}", "import getWindow from \"./getWindow.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement, isShadowRoot } from \"./instanceOf.js\";\nimport isTableElement from \"./isTableElement.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getUAString from \"../utils/userAgent.js\";\n\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837\n  getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n\n  return element.offsetParent;\n} // `.offsetParent` reports `null` for fixed elements, while absolute elements\n// return the containing block\n\n\nfunction getContainingBlock(element) {\n  var isFirefox = /firefox/i.test(getUAString());\n  var isIE = /Trident/i.test(getUAString());\n\n  if (isIE && isHTMLElement(element)) {\n    // In IE 9, 10 and 11 fixed elements containing block is always established by the viewport\n    var elementCss = getComputedStyle(element);\n\n    if (elementCss.position === 'fixed') {\n      return null;\n    }\n  }\n\n  var currentNode = getParentNode(element);\n\n  if (isShadowRoot(currentNode)) {\n    currentNode = currentNode.host;\n  }\n\n  while (isHTMLElement(currentNode) && ['html', 'body'].indexOf(getNodeName(currentNode)) < 0) {\n    var css = getComputedStyle(currentNode); // This is non-exhaustive but covers the most common CSS properties that\n    // create a containing block.\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n\n    if (css.transform !== 'none' || css.perspective !== 'none' || css.contain === 'paint' || ['transform', 'perspective'].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === 'filter' || isFirefox && css.filter && css.filter !== 'none') {\n      return currentNode;\n    } else {\n      currentNode = currentNode.parentNode;\n    }\n  }\n\n  return null;\n} // Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\n\n\nexport default function getOffsetParent(element) {\n  var window = getWindow(element);\n  var offsetParent = getTrueOffsetParent(element);\n\n  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === 'static') {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (offsetParent && (getNodeName(offsetParent) === 'html' || getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static')) {\n    return window;\n  }\n\n  return offsetParent || getContainingBlock(element) || window;\n}", "export default function getMainAxisFromPlacement(placement) {\n  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n}", "import { max as mathMax, min as mathMin } from \"./math.js\";\nexport function within(min, value, max) {\n  return mathMax(min, mathMin(value, max));\n}\nexport function withinMaxClamp(min, value, max) {\n  var v = within(min, value, max);\n  return v > max ? max : v;\n}", "export default function getFreshSideObject() {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n}", "import getFreshSideObject from \"./getFreshSideObject.js\";\nexport default function mergePaddingObject(paddingObject) {\n  return Object.assign({}, getFreshSideObject(), paddingObject);\n}", "export default function expandToHashMap(value, keys) {\n  return keys.reduce(function (hashMap, key) {\n    hashMap[key] = value;\n    return hashMap;\n  }, {});\n}", "import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport contains from \"../dom-utils/contains.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport { within } from \"../utils/within.js\";\nimport mergePaddingObject from \"../utils/mergePaddingObject.js\";\nimport expandToHashMap from \"../utils/expandToHashMap.js\";\nimport { left, right, basePlacements, top, bottom } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar toPaddingObject = function toPaddingObject(padding, state) {\n  padding = typeof padding === 'function' ? padding(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : padding;\n  return mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n};\n\nfunction arrow(_ref) {\n  var _state$modifiersData$;\n\n  var state = _ref.state,\n      name = _ref.name,\n      options = _ref.options;\n  var arrowElement = state.elements.arrow;\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var basePlacement = getBasePlacement(state.placement);\n  var axis = getMainAxisFromPlacement(basePlacement);\n  var isVertical = [left, right].indexOf(basePlacement) >= 0;\n  var len = isVertical ? 'height' : 'width';\n\n  if (!arrowElement || !popperOffsets) {\n    return;\n  }\n\n  var paddingObject = toPaddingObject(options.padding, state);\n  var arrowRect = getLayoutRect(arrowElement);\n  var minProp = axis === 'y' ? top : left;\n  var maxProp = axis === 'y' ? bottom : right;\n  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets[axis] - state.rects.popper[len];\n  var startDiff = popperOffsets[axis] - state.rects.reference[axis];\n  var arrowOffsetParent = getOffsetParent(arrowElement);\n  var clientSize = arrowOffsetParent ? axis === 'y' ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n  var centerToReference = endDiff / 2 - startDiff / 2; // Make sure the arrow doesn't overflow the popper if the center point is\n  // outside of the popper bounds\n\n  var min = paddingObject[minProp];\n  var max = clientSize - arrowRect[len] - paddingObject[maxProp];\n  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;\n  var offset = within(min, center, max); // Prevents breaking syntax highlighting...\n\n  var axisProp = axis;\n  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset, _state$modifiersData$.centerOffset = offset - center, _state$modifiersData$);\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options;\n  var _options$element = options.element,\n      arrowElement = _options$element === void 0 ? '[data-popper-arrow]' : _options$element;\n\n  if (arrowElement == null) {\n    return;\n  } // CSS selector\n\n\n  if (typeof arrowElement === 'string') {\n    arrowElement = state.elements.popper.querySelector(arrowElement);\n\n    if (!arrowElement) {\n      return;\n    }\n  }\n\n  if (!contains(state.elements.popper, arrowElement)) {\n    return;\n  }\n\n  state.elements.arrow = arrowElement;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'arrow',\n  enabled: true,\n  phase: 'main',\n  fn: arrow,\n  effect: effect,\n  requires: ['popperOffsets'],\n  requiresIfExists: ['preventOverflow']\n};", "export default function getVariation(placement) {\n  return placement.split('-')[1];\n}", "import { top, left, right, bottom, end } from \"../enums.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getWindow from \"../dom-utils/getWindow.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getComputedStyle from \"../dom-utils/getComputedStyle.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport { round } from \"../utils/math.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar unsetSides = {\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto'\n}; // Round the offsets to the nearest suitable subpixel based on the DPR.\n// Zooming can change the DPR, but it seems to report a value that will\n// cleanly divide the values into the appropriate subpixels.\n\nfunction roundOffsetsByDPR(_ref, win) {\n  var x = _ref.x,\n      y = _ref.y;\n  var dpr = win.devicePixelRatio || 1;\n  return {\n    x: round(x * dpr) / dpr || 0,\n    y: round(y * dpr) / dpr || 0\n  };\n}\n\nexport function mapToStyles(_ref2) {\n  var _Object$assign2;\n\n  var popper = _ref2.popper,\n      popperRect = _ref2.popperRect,\n      placement = _ref2.placement,\n      variation = _ref2.variation,\n      offsets = _ref2.offsets,\n      position = _ref2.position,\n      gpuAcceleration = _ref2.gpuAcceleration,\n      adaptive = _ref2.adaptive,\n      roundOffsets = _ref2.roundOffsets,\n      isFixed = _ref2.isFixed;\n  var _offsets$x = offsets.x,\n      x = _offsets$x === void 0 ? 0 : _offsets$x,\n      _offsets$y = offsets.y,\n      y = _offsets$y === void 0 ? 0 : _offsets$y;\n\n  var _ref3 = typeof roundOffsets === 'function' ? roundOffsets({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref3.x;\n  y = _ref3.y;\n  var hasX = offsets.hasOwnProperty('x');\n  var hasY = offsets.hasOwnProperty('y');\n  var sideX = left;\n  var sideY = top;\n  var win = window;\n\n  if (adaptive) {\n    var offsetParent = getOffsetParent(popper);\n    var heightProp = 'clientHeight';\n    var widthProp = 'clientWidth';\n\n    if (offsetParent === getWindow(popper)) {\n      offsetParent = getDocumentElement(popper);\n\n      if (getComputedStyle(offsetParent).position !== 'static' && position === 'absolute') {\n        heightProp = 'scrollHeight';\n        widthProp = 'scrollWidth';\n      }\n    } // $FlowFixMe[incompatible-cast]: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n\n    offsetParent = offsetParent;\n\n    if (placement === top || (placement === left || placement === right) && variation === end) {\n      sideY = bottom;\n      var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : // $FlowFixMe[prop-missing]\n      offsetParent[heightProp];\n      y -= offsetY - popperRect.height;\n      y *= gpuAcceleration ? 1 : -1;\n    }\n\n    if (placement === left || (placement === top || placement === bottom) && variation === end) {\n      sideX = right;\n      var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : // $FlowFixMe[prop-missing]\n      offsetParent[widthProp];\n      x -= offsetX - popperRect.width;\n      x *= gpuAcceleration ? 1 : -1;\n    }\n  }\n\n  var commonStyles = Object.assign({\n    position: position\n  }, adaptive && unsetSides);\n\n  var _ref4 = roundOffsets === true ? roundOffsetsByDPR({\n    x: x,\n    y: y\n  }, getWindow(popper)) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref4.x;\n  y = _ref4.y;\n\n  if (gpuAcceleration) {\n    var _Object$assign;\n\n    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n  }\n\n  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n}\n\nfunction computeStyles(_ref5) {\n  var state = _ref5.state,\n      options = _ref5.options;\n  var _options$gpuAccelerat = options.gpuAcceleration,\n      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n      _options$adaptive = options.adaptive,\n      adaptive = _options$adaptive === void 0 ? true : _options$adaptive,\n      _options$roundOffsets = options.roundOffsets,\n      roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;\n  var commonStyles = {\n    placement: getBasePlacement(state.placement),\n    variation: getVariation(state.placement),\n    popper: state.elements.popper,\n    popperRect: state.rects.popper,\n    gpuAcceleration: gpuAcceleration,\n    isFixed: state.options.strategy === 'fixed'\n  };\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      adaptive: adaptive,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.arrow,\n      position: 'absolute',\n      adaptive: false,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-placement': state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'beforeWrite',\n  fn: computeStyles,\n  data: {}\n};", "import getWindow from \"../dom-utils/getWindow.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar passive = {\n  passive: true\n};\n\nfunction effect(_ref) {\n  var state = _ref.state,\n      instance = _ref.instance,\n      options = _ref.options;\n  var _options$scroll = options.scroll,\n      scroll = _options$scroll === void 0 ? true : _options$scroll,\n      _options$resize = options.resize,\n      resize = _options$resize === void 0 ? true : _options$resize;\n  var window = getWindow(state.elements.popper);\n  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);\n\n  if (scroll) {\n    scrollParents.forEach(function (scrollParent) {\n      scrollParent.addEventListener('scroll', instance.update, passive);\n    });\n  }\n\n  if (resize) {\n    window.addEventListener('resize', instance.update, passive);\n  }\n\n  return function () {\n    if (scroll) {\n      scrollParents.forEach(function (scrollParent) {\n        scrollParent.removeEventListener('scroll', instance.update, passive);\n      });\n    }\n\n    if (resize) {\n      window.removeEventListener('resize', instance.update, passive);\n    }\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'eventListeners',\n  enabled: true,\n  phase: 'write',\n  fn: function fn() {},\n  effect: effect,\n  data: {}\n};", "var hash = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nexport default function getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}", "var hash = {\n  start: 'end',\n  end: 'start'\n};\nexport default function getOppositeVariationPlacement(placement) {\n  return placement.replace(/start|end/g, function (matched) {\n    return hash[matched];\n  });\n}", "import getWindow from \"./getWindow.js\";\nexport default function getWindowScroll(node) {\n  var win = getWindow(node);\n  var scrollLeft = win.pageXOffset;\n  var scrollTop = win.pageYOffset;\n  return {\n    scrollLeft: scrollLeft,\n    scrollTop: scrollTop\n  };\n}", "import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  // Popper 1 is broken in this case and never had a bug report so let's assume\n  // it's not an issue. I don't think anyone ever specifies width on <html>\n  // anyway.\n  // Browsers where the left scrollbar doesn't cause an issue report `0` for\n  // this (e.g. Edge 2019, IE11, Safari)\n  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;\n}", "import getWindow from \"./getWindow.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getViewportRect(element, strategy) {\n  var win = getWindow(element);\n  var html = getDocumentElement(element);\n  var visualViewport = win.visualViewport;\n  var width = html.clientWidth;\n  var height = html.clientHeight;\n  var x = 0;\n  var y = 0;\n\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    var layoutViewport = isLayoutViewport();\n\n    if (layoutViewport || !layoutViewport && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x + getWindowScrollBarX(element),\n    y: y\n  };\n}", "import getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nimport { max } from \"../utils/math.js\"; // Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable\n\nexport default function getDocumentRect(element) {\n  var _element$ownerDocumen;\n\n  var html = getDocumentElement(element);\n  var winScroll = getWindowScroll(element);\n  var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;\n  var width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);\n  var height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);\n  var x = -winScroll.scrollLeft + getWindowScrollBarX(element);\n  var y = -winScroll.scrollTop;\n\n  if (getComputedStyle(body || html).direction === 'rtl') {\n    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x,\n    y: y\n  };\n}", "import getComputedStyle from \"./getComputedStyle.js\";\nexport default function isScrollParent(element) {\n  // Firefox wants us to check `-x` and `-y` variations as well\n  var _getComputedStyle = getComputedStyle(element),\n      overflow = _getComputedStyle.overflow,\n      overflowX = _getComputedStyle.overflowX,\n      overflowY = _getComputedStyle.overflowY;\n\n  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}", "import getParentNode from \"./getParentNode.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nexport default function getScrollParent(node) {\n  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n    // $FlowFixMe[incompatible-return]: assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node) && isScrollParent(node)) {\n    return node;\n  }\n\n  return getScrollParent(getParentNode(node));\n}", "import getScrollParent from \"./getScrollParent.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getWindow from \"./getWindow.js\";\nimport isScrollParent from \"./isScrollParent.js\";\n/*\ngiven a DOM element, return the list of all scroll parents, up the list of ancesors\nuntil we get to the top window object. This list is what we attach scroll listeners\nto, because if any of these parent elements scroll, we'll need to re-calculate the\nreference element's position.\n*/\n\nexport default function listScrollParents(element, list) {\n  var _element$ownerDocumen;\n\n  if (list === void 0) {\n    list = [];\n  }\n\n  var scrollParent = getScrollParent(element);\n  var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);\n  var win = getWindow(scrollParent);\n  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;\n  var updatedList = list.concat(target);\n  return isBody ? updatedList : // $FlowFixMe[incompatible-call]: isBody tells us target will be an HTMLElement here\n  updatedList.concat(listScrollParents(getParentNode(target)));\n}", "export default function rectToClientRect(rect) {\n  return Object.assign({}, rect, {\n    left: rect.x,\n    top: rect.y,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}", "import { viewport } from \"../enums.js\";\nimport getViewportRect from \"./getViewportRect.js\";\nimport getDocumentRect from \"./getDocumentRect.js\";\nimport listScrollParents from \"./listScrollParents.js\";\nimport getOffsetParent from \"./getOffsetParent.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport contains from \"./contains.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport rectToClientRect from \"../utils/rectToClientRect.js\";\nimport { max, min } from \"../utils/math.js\";\n\nfunction getInnerBoundingClientRect(element, strategy) {\n  var rect = getBoundingClientRect(element, false, strategy === 'fixed');\n  rect.top = rect.top + element.clientTop;\n  rect.left = rect.left + element.clientLeft;\n  rect.bottom = rect.top + element.clientHeight;\n  rect.right = rect.left + element.clientWidth;\n  rect.width = element.clientWidth;\n  rect.height = element.clientHeight;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\n\nfunction getClientRectFromMixedType(element, clippingParent, strategy) {\n  return clippingParent === viewport ? rectToClientRect(getViewportRect(element, strategy)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent, strategy) : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n} // A \"clipping parent\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\n\n\nfunction getClippingParents(element) {\n  var clippingParents = listScrollParents(getParentNode(element));\n  var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle(element).position) >= 0;\n  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  } // $FlowFixMe[incompatible-return]: https://github.com/facebook/flow/issues/1414\n\n\n  return clippingParents.filter(function (clippingParent) {\n    return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== 'body';\n  });\n} // Gets the maximum area that the element is visible in due to any number of\n// clipping parents\n\n\nexport default function getClippingRect(element, boundary, rootBoundary, strategy) {\n  var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);\n  var clippingParents = [].concat(mainClippingParents, [rootBoundary]);\n  var firstClippingParent = clippingParents[0];\n  var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {\n    var rect = getClientRectFromMixedType(element, clippingParent, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromMixedType(element, firstClippingParent, strategy));\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n  return clippingRect;\n}", "import getBasePlacement from \"./getBasePlacement.js\";\nimport getVariation from \"./getVariation.js\";\nimport getMainAxisFromPlacement from \"./getMainAxisFromPlacement.js\";\nimport { top, right, bottom, left, start, end } from \"../enums.js\";\nexport default function computeOffsets(_ref) {\n  var reference = _ref.reference,\n      element = _ref.element,\n      placement = _ref.placement;\n  var basePlacement = placement ? getBasePlacement(placement) : null;\n  var variation = placement ? getVariation(placement) : null;\n  var commonX = reference.x + reference.width / 2 - element.width / 2;\n  var commonY = reference.y + reference.height / 2 - element.height / 2;\n  var offsets;\n\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: commonX,\n        y: reference.y - element.height\n      };\n      break;\n\n    case bottom:\n      offsets = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: commonY\n      };\n      break;\n\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n\n  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;\n\n  if (mainAxis != null) {\n    var len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variation) {\n      case start:\n        offsets[mainAxis] = offsets[mainAxis] - (reference[len] / 2 - element[len] / 2);\n        break;\n\n      case end:\n        offsets[mainAxis] = offsets[mainAxis] + (reference[len] / 2 - element[len] / 2);\n        break;\n\n      default:\n    }\n  }\n\n  return offsets;\n}", "import getClippingRect from \"../dom-utils/getClippingRect.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getBoundingClientRect from \"../dom-utils/getBoundingClientRect.js\";\nimport computeOffsets from \"./computeOffsets.js\";\nimport rectToClientRect from \"./rectToClientRect.js\";\nimport { clippingParents, reference, popper, bottom, top, right, basePlacements, viewport } from \"../enums.js\";\nimport { isElement } from \"../dom-utils/instanceOf.js\";\nimport mergePaddingObject from \"./mergePaddingObject.js\";\nimport expandToHashMap from \"./expandToHashMap.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport default function detectOverflow(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$placement = _options.placement,\n      placement = _options$placement === void 0 ? state.placement : _options$placement,\n      _options$strategy = _options.strategy,\n      strategy = _options$strategy === void 0 ? state.strategy : _options$strategy,\n      _options$boundary = _options.boundary,\n      boundary = _options$boundary === void 0 ? clippingParents : _options$boundary,\n      _options$rootBoundary = _options.rootBoundary,\n      rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary,\n      _options$elementConte = _options.elementContext,\n      elementContext = _options$elementConte === void 0 ? popper : _options$elementConte,\n      _options$altBoundary = _options.altBoundary,\n      altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary,\n      _options$padding = _options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n  var paddingObject = mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n  var altContext = elementContext === popper ? reference : popper;\n  var popperRect = state.rects.popper;\n  var element = state.elements[altBoundary ? altContext : elementContext];\n  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary, strategy);\n  var referenceClientRect = getBoundingClientRect(state.elements.reference);\n  var popperOffsets = computeOffsets({\n    reference: referenceClientRect,\n    element: popperRect,\n    strategy: 'absolute',\n    placement: placement\n  });\n  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets));\n  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect; // positive = overflowing the clipping rect\n  // 0 or negative = within the clipping rect\n\n  var overflowOffsets = {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n  var offsetData = state.modifiersData.offset; // Offsets can be applied only to the popper element\n\n  if (elementContext === popper && offsetData) {\n    var offset = offsetData[placement];\n    Object.keys(overflowOffsets).forEach(function (key) {\n      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;\n      var axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';\n      overflowOffsets[key] += offset[axis] * multiply;\n    });\n  }\n\n  return overflowOffsets;\n}", "import getVariation from \"./getVariation.js\";\nimport { variationPlacements, basePlacements, placements as allPlacements } from \"../enums.js\";\nimport detectOverflow from \"./detectOverflow.js\";\nimport getBasePlacement from \"./getBasePlacement.js\";\nexport default function computeAutoPlacement(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      placement = _options.placement,\n      boundary = _options.boundary,\n      rootBoundary = _options.rootBoundary,\n      padding = _options.padding,\n      flipVariations = _options.flipVariations,\n      _options$allowedAutoP = _options.allowedAutoPlacements,\n      allowedAutoPlacements = _options$allowedAutoP === void 0 ? allPlacements : _options$allowedAutoP;\n  var variation = getVariation(placement);\n  var placements = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function (placement) {\n    return getVariation(placement) === variation;\n  }) : basePlacements;\n  var allowedPlacements = placements.filter(function (placement) {\n    return allowedAutoPlacements.indexOf(placement) >= 0;\n  });\n\n  if (allowedPlacements.length === 0) {\n    allowedPlacements = placements;\n  } // $FlowFixMe[incompatible-type]: Flow seems to have problems with two array unions...\n\n\n  var overflows = allowedPlacements.reduce(function (acc, placement) {\n    acc[placement] = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding\n    })[getBasePlacement(placement)];\n    return acc;\n  }, {});\n  return Object.keys(overflows).sort(function (a, b) {\n    return overflows[a] - overflows[b];\n  });\n}", "import getOppositePlacement from \"../utils/getOppositePlacement.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getOppositeVariationPlacement from \"../utils/getOppositeVariationPlacement.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport computeAutoPlacement from \"../utils/computeAutoPlacement.js\";\nimport { bottom, top, start, right, left, auto } from \"../enums.js\";\nimport getVariation from \"../utils/getVariation.js\"; // eslint-disable-next-line import/no-unused-modules\n\nfunction getExpandedFallbackPlacements(placement) {\n  if (getBasePlacement(placement) === auto) {\n    return [];\n  }\n\n  var oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];\n}\n\nfunction flip(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n\n  if (state.modifiersData[name]._skip) {\n    return;\n  }\n\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis,\n      specifiedFallbackPlacements = options.fallbackPlacements,\n      padding = options.padding,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      _options$flipVariatio = options.flipVariations,\n      flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio,\n      allowedAutoPlacements = options.allowedAutoPlacements;\n  var preferredPlacement = state.options.placement;\n  var basePlacement = getBasePlacement(preferredPlacement);\n  var isBasePlacement = basePlacement === preferredPlacement;\n  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));\n  var placements = [preferredPlacement].concat(fallbackPlacements).reduce(function (acc, placement) {\n    return acc.concat(getBasePlacement(placement) === auto ? computeAutoPlacement(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding,\n      flipVariations: flipVariations,\n      allowedAutoPlacements: allowedAutoPlacements\n    }) : placement);\n  }, []);\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var checksMap = new Map();\n  var makeFallbackChecks = true;\n  var firstFittingPlacement = placements[0];\n\n  for (var i = 0; i < placements.length; i++) {\n    var placement = placements[i];\n\n    var _basePlacement = getBasePlacement(placement);\n\n    var isStartVariation = getVariation(placement) === start;\n    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;\n    var len = isVertical ? 'width' : 'height';\n    var overflow = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      altBoundary: altBoundary,\n      padding: padding\n    });\n    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;\n\n    if (referenceRect[len] > popperRect[len]) {\n      mainVariationSide = getOppositePlacement(mainVariationSide);\n    }\n\n    var altVariationSide = getOppositePlacement(mainVariationSide);\n    var checks = [];\n\n    if (checkMainAxis) {\n      checks.push(overflow[_basePlacement] <= 0);\n    }\n\n    if (checkAltAxis) {\n      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);\n    }\n\n    if (checks.every(function (check) {\n      return check;\n    })) {\n      firstFittingPlacement = placement;\n      makeFallbackChecks = false;\n      break;\n    }\n\n    checksMap.set(placement, checks);\n  }\n\n  if (makeFallbackChecks) {\n    // `2` may be desired in some cases \u2013 research later\n    var numberOfChecks = flipVariations ? 3 : 1;\n\n    var _loop = function _loop(_i) {\n      var fittingPlacement = placements.find(function (placement) {\n        var checks = checksMap.get(placement);\n\n        if (checks) {\n          return checks.slice(0, _i).every(function (check) {\n            return check;\n          });\n        }\n      });\n\n      if (fittingPlacement) {\n        firstFittingPlacement = fittingPlacement;\n        return \"break\";\n      }\n    };\n\n    for (var _i = numberOfChecks; _i > 0; _i--) {\n      var _ret = _loop(_i);\n\n      if (_ret === \"break\") break;\n    }\n  }\n\n  if (state.placement !== firstFittingPlacement) {\n    state.modifiersData[name]._skip = true;\n    state.placement = firstFittingPlacement;\n    state.reset = true;\n  }\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'flip',\n  enabled: true,\n  phase: 'main',\n  fn: flip,\n  requiresIfExists: ['offset'],\n  data: {\n    _skip: false\n  }\n};", "import { top, bottom, left, right } from \"../enums.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\n\nfunction getSideOffsets(overflow, rect, preventedOffsets) {\n  if (preventedOffsets === void 0) {\n    preventedOffsets = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  return {\n    top: overflow.top - rect.height - preventedOffsets.y,\n    right: overflow.right - rect.width + preventedOffsets.x,\n    bottom: overflow.bottom - rect.height + preventedOffsets.y,\n    left: overflow.left - rect.width - preventedOffsets.x\n  };\n}\n\nfunction isAnySideFullyClipped(overflow) {\n  return [top, right, bottom, left].some(function (side) {\n    return overflow[side] >= 0;\n  });\n}\n\nfunction hide(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var preventedOffsets = state.modifiersData.preventOverflow;\n  var referenceOverflow = detectOverflow(state, {\n    elementContext: 'reference'\n  });\n  var popperAltOverflow = detectOverflow(state, {\n    altBoundary: true\n  });\n  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);\n  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);\n  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);\n  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);\n  state.modifiersData[name] = {\n    referenceClippingOffsets: referenceClippingOffsets,\n    popperEscapeOffsets: popperEscapeOffsets,\n    isReferenceHidden: isReferenceHidden,\n    hasPopperEscaped: hasPopperEscaped\n  };\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-reference-hidden': isReferenceHidden,\n    'data-popper-escaped': hasPopperEscaped\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'hide',\n  enabled: true,\n  phase: 'main',\n  requiresIfExists: ['preventOverflow'],\n  fn: hide\n};", "import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport { top, left, right, placements } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport function distanceAndSkiddingToXY(placement, rects, offset) {\n  var basePlacement = getBasePlacement(placement);\n  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;\n\n  var _ref = typeof offset === 'function' ? offset(Object.assign({}, rects, {\n    placement: placement\n  })) : offset,\n      skidding = _ref[0],\n      distance = _ref[1];\n\n  skidding = skidding || 0;\n  distance = (distance || 0) * invertDistance;\n  return [left, right].indexOf(basePlacement) >= 0 ? {\n    x: distance,\n    y: skidding\n  } : {\n    x: skidding,\n    y: distance\n  };\n}\n\nfunction offset(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$offset = options.offset,\n      offset = _options$offset === void 0 ? [0, 0] : _options$offset;\n  var data = placements.reduce(function (acc, placement) {\n    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset);\n    return acc;\n  }, {});\n  var _data$state$placement = data[state.placement],\n      x = _data$state$placement.x,\n      y = _data$state$placement.y;\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.modifiersData.popperOffsets.x += x;\n    state.modifiersData.popperOffsets.y += y;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'offset',\n  enabled: true,\n  phase: 'main',\n  requires: ['popperOffsets'],\n  fn: offset\n};", "import computeOffsets from \"../utils/computeOffsets.js\";\n\nfunction popperOffsets(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  // Offsets are the actual position the popper needs to have to be\n  // properly positioned near its reference element\n  // This is the most basic placement, and will be adjusted by\n  // the modifiers in the next step\n  state.modifiersData[name] = computeOffsets({\n    reference: state.rects.reference,\n    element: state.rects.popper,\n    strategy: 'absolute',\n    placement: state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'popperOffsets',\n  enabled: true,\n  phase: 'read',\n  fn: popperOffsets,\n  data: {}\n};", "export default function getAltAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}", "import { top, left, right, bottom, start } from \"../enums.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport getAltAxis from \"../utils/getAltAxis.js\";\nimport { within, withinMaxClamp } from \"../utils/within.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport getFreshSideObject from \"../utils/getFreshSideObject.js\";\nimport { min as mathMin, max as mathMax } from \"../utils/math.js\";\n\nfunction preventOverflow(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      padding = options.padding,\n      _options$tether = options.tether,\n      tether = _options$tether === void 0 ? true : _options$tether,\n      _options$tetherOffset = options.tetherOffset,\n      tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;\n  var overflow = detectOverflow(state, {\n    boundary: boundary,\n    rootBoundary: rootBoundary,\n    padding: padding,\n    altBoundary: altBoundary\n  });\n  var basePlacement = getBasePlacement(state.placement);\n  var variation = getVariation(state.placement);\n  var isBasePlacement = !variation;\n  var mainAxis = getMainAxisFromPlacement(basePlacement);\n  var altAxis = getAltAxis(mainAxis);\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var tetherOffsetValue = typeof tetherOffset === 'function' ? tetherOffset(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : tetherOffset;\n  var normalizedTetherOffsetValue = typeof tetherOffsetValue === 'number' ? {\n    mainAxis: tetherOffsetValue,\n    altAxis: tetherOffsetValue\n  } : Object.assign({\n    mainAxis: 0,\n    altAxis: 0\n  }, tetherOffsetValue);\n  var offsetModifierState = state.modifiersData.offset ? state.modifiersData.offset[state.placement] : null;\n  var data = {\n    x: 0,\n    y: 0\n  };\n\n  if (!popperOffsets) {\n    return;\n  }\n\n  if (checkMainAxis) {\n    var _offsetModifierState$;\n\n    var mainSide = mainAxis === 'y' ? top : left;\n    var altSide = mainAxis === 'y' ? bottom : right;\n    var len = mainAxis === 'y' ? 'height' : 'width';\n    var offset = popperOffsets[mainAxis];\n    var min = offset + overflow[mainSide];\n    var max = offset - overflow[altSide];\n    var additive = tether ? -popperRect[len] / 2 : 0;\n    var minLen = variation === start ? referenceRect[len] : popperRect[len];\n    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len]; // We need to include the arrow in the calculation so the arrow doesn't go\n    // outside the reference bounds\n\n    var arrowElement = state.elements.arrow;\n    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {\n      width: 0,\n      height: 0\n    };\n    var arrowPaddingObject = state.modifiersData['arrow#persistent'] ? state.modifiersData['arrow#persistent'].padding : getFreshSideObject();\n    var arrowPaddingMin = arrowPaddingObject[mainSide];\n    var arrowPaddingMax = arrowPaddingObject[altSide]; // If the reference length is smaller than the arrow length, we don't want\n    // to include its full size in the calculation. If the reference is small\n    // and near the edge of a boundary, the popper can overflow even if the\n    // reference is not overflowing as well (e.g. virtual elements with no\n    // width or height)\n\n    var arrowLen = within(0, referenceRect[len], arrowRect[len]);\n    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis : minLen - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis;\n    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis : maxLen + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis;\n    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);\n    var clientOffset = arrowOffsetParent ? mainAxis === 'y' ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;\n    var offsetModifierValue = (_offsetModifierState$ = offsetModifierState == null ? void 0 : offsetModifierState[mainAxis]) != null ? _offsetModifierState$ : 0;\n    var tetherMin = offset + minOffset - offsetModifierValue - clientOffset;\n    var tetherMax = offset + maxOffset - offsetModifierValue;\n    var preventedOffset = within(tether ? mathMin(min, tetherMin) : min, offset, tether ? mathMax(max, tetherMax) : max);\n    popperOffsets[mainAxis] = preventedOffset;\n    data[mainAxis] = preventedOffset - offset;\n  }\n\n  if (checkAltAxis) {\n    var _offsetModifierState$2;\n\n    var _mainSide = mainAxis === 'x' ? top : left;\n\n    var _altSide = mainAxis === 'x' ? bottom : right;\n\n    var _offset = popperOffsets[altAxis];\n\n    var _len = altAxis === 'y' ? 'height' : 'width';\n\n    var _min = _offset + overflow[_mainSide];\n\n    var _max = _offset - overflow[_altSide];\n\n    var isOriginSide = [top, left].indexOf(basePlacement) !== -1;\n\n    var _offsetModifierValue = (_offsetModifierState$2 = offsetModifierState == null ? void 0 : offsetModifierState[altAxis]) != null ? _offsetModifierState$2 : 0;\n\n    var _tetherMin = isOriginSide ? _min : _offset - referenceRect[_len] - popperRect[_len] - _offsetModifierValue + normalizedTetherOffsetValue.altAxis;\n\n    var _tetherMax = isOriginSide ? _offset + referenceRect[_len] + popperRect[_len] - _offsetModifierValue - normalizedTetherOffsetValue.altAxis : _max;\n\n    var _preventedOffset = tether && isOriginSide ? withinMaxClamp(_tetherMin, _offset, _tetherMax) : within(tether ? _tetherMin : _min, _offset, tether ? _tetherMax : _max);\n\n    popperOffsets[altAxis] = _preventedOffset;\n    data[altAxis] = _preventedOffset - _offset;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'preventOverflow',\n  enabled: true,\n  phase: 'main',\n  fn: preventOverflow,\n  requiresIfExists: ['offset']\n};", "export default function getHTMLElementScroll(element) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}", "import getWindowScroll from \"./getWindowScroll.js\";\nimport getWindow from \"./getWindow.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getHTMLElementScroll from \"./getHTMLElementScroll.js\";\nexport default function getNodeScroll(node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}", "import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getNodeScroll from \"./getNodeScroll.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport { round } from \"../utils/math.js\";\n\nfunction isElementScaled(element) {\n  var rect = element.getBoundingClientRect();\n  var scaleX = round(rect.width) / element.offsetWidth || 1;\n  var scaleY = round(rect.height) / element.offsetHeight || 1;\n  return scaleX !== 1 || scaleY !== 1;\n} // Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\n\n\nexport default function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n\n  var isOffsetParentAnElement = isHTMLElement(offsetParent);\n  var offsetParentIsScaled = isHTMLElement(offsetParent) && isElementScaled(offsetParent);\n  var documentElement = getDocumentElement(offsetParent);\n  var rect = getBoundingClientRect(elementOrVirtualElement, offsetParentIsScaled, isFixed);\n  var scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  var offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || // https://github.com/popperjs/popper-core/issues/1078\n    isScrollParent(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      offsets = getBoundingClientRect(offsetParent, true);\n      offsets.x += offsetParent.clientLeft;\n      offsets.y += offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}", "import { modifierPhases } from \"../enums.js\"; // source: https://stackoverflow.com/questions/49875255\n\nfunction order(modifiers) {\n  var map = new Map();\n  var visited = new Set();\n  var result = [];\n  modifiers.forEach(function (modifier) {\n    map.set(modifier.name, modifier);\n  }); // On visiting object, check for its dependencies and visit them recursively\n\n  function sort(modifier) {\n    visited.add(modifier.name);\n    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);\n    requires.forEach(function (dep) {\n      if (!visited.has(dep)) {\n        var depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n    result.push(modifier);\n  }\n\n  modifiers.forEach(function (modifier) {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n  return result;\n}\n\nexport default function orderModifiers(modifiers) {\n  // order based on dependencies\n  var orderedModifiers = order(modifiers); // order based on phase\n\n  return modifierPhases.reduce(function (acc, phase) {\n    return acc.concat(orderedModifiers.filter(function (modifier) {\n      return modifier.phase === phase;\n    }));\n  }, []);\n}", "export default function debounce(fn) {\n  var pending;\n  return function () {\n    if (!pending) {\n      pending = new Promise(function (resolve) {\n        Promise.resolve().then(function () {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}", "export default function mergeByName(modifiers) {\n  var merged = modifiers.reduce(function (merged, current) {\n    var existing = merged[current.name];\n    merged[current.name] = existing ? Object.assign({}, existing, current, {\n      options: Object.assign({}, existing.options, current.options),\n      data: Object.assign({}, existing.data, current.data)\n    }) : current;\n    return merged;\n  }, {}); // IE11 does not support Object.values\n\n  return Object.keys(merged).map(function (key) {\n    return merged[key];\n  });\n}", "import getCompositeRect from \"./dom-utils/getCompositeRect.js\";\nimport getLayoutRect from \"./dom-utils/getLayoutRect.js\";\nimport listScrollParents from \"./dom-utils/listScrollParents.js\";\nimport getOffsetParent from \"./dom-utils/getOffsetParent.js\";\nimport orderModifiers from \"./utils/orderModifiers.js\";\nimport debounce from \"./utils/debounce.js\";\nimport mergeByName from \"./utils/mergeByName.js\";\nimport detectOverflow from \"./utils/detectOverflow.js\";\nimport { isElement } from \"./dom-utils/instanceOf.js\";\nvar DEFAULT_OPTIONS = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute'\n};\n\nfunction areValidElements() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return !args.some(function (element) {\n    return !(element && typeof element.getBoundingClientRect === 'function');\n  });\n}\n\nexport function popperGenerator(generatorOptions) {\n  if (generatorOptions === void 0) {\n    generatorOptions = {};\n  }\n\n  var _generatorOptions = generatorOptions,\n      _generatorOptions$def = _generatorOptions.defaultModifiers,\n      defaultModifiers = _generatorOptions$def === void 0 ? [] : _generatorOptions$def,\n      _generatorOptions$def2 = _generatorOptions.defaultOptions,\n      defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;\n  return function createPopper(reference, popper, options) {\n    if (options === void 0) {\n      options = defaultOptions;\n    }\n\n    var state = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),\n      modifiersData: {},\n      elements: {\n        reference: reference,\n        popper: popper\n      },\n      attributes: {},\n      styles: {}\n    };\n    var effectCleanupFns = [];\n    var isDestroyed = false;\n    var instance = {\n      state: state,\n      setOptions: function setOptions(setOptionsAction) {\n        var options = typeof setOptionsAction === 'function' ? setOptionsAction(state.options) : setOptionsAction;\n        cleanupModifierEffects();\n        state.options = Object.assign({}, defaultOptions, state.options, options);\n        state.scrollParents = {\n          reference: isElement(reference) ? listScrollParents(reference) : reference.contextElement ? listScrollParents(reference.contextElement) : [],\n          popper: listScrollParents(popper)\n        }; // Orders the modifiers based on their dependencies and `phase`\n        // properties\n\n        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers, state.options.modifiers))); // Strip out disabled modifiers\n\n        state.orderedModifiers = orderedModifiers.filter(function (m) {\n          return m.enabled;\n        });\n        runModifierEffects();\n        return instance.update();\n      },\n      // Sync update \u2013 it will always be executed, even if not necessary. This\n      // is useful for low frequency updates where sync behavior simplifies the\n      // logic.\n      // For high frequency updates (e.g. `resize` and `scroll` events), always\n      // prefer the async Popper#update method\n      forceUpdate: function forceUpdate() {\n        if (isDestroyed) {\n          return;\n        }\n\n        var _state$elements = state.elements,\n            reference = _state$elements.reference,\n            popper = _state$elements.popper; // Don't proceed if `reference` or `popper` are not valid elements\n        // anymore\n\n        if (!areValidElements(reference, popper)) {\n          return;\n        } // Store the reference and popper rects to be read by modifiers\n\n\n        state.rects = {\n          reference: getCompositeRect(reference, getOffsetParent(popper), state.options.strategy === 'fixed'),\n          popper: getLayoutRect(popper)\n        }; // Modifiers have the ability to reset the current update cycle. The\n        // most common use case for this is the `flip` modifier changing the\n        // placement, which then needs to re-run all the modifiers, because the\n        // logic was previously ran for the previous placement and is therefore\n        // stale/incorrect\n\n        state.reset = false;\n        state.placement = state.options.placement; // On each update cycle, the `modifiersData` property for each modifier\n        // is filled with the initial data specified by the modifier. This means\n        // it doesn't persist and is fresh on each update.\n        // To ensure persistent data, use `${name}#persistent`\n\n        state.orderedModifiers.forEach(function (modifier) {\n          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);\n        });\n\n        for (var index = 0; index < state.orderedModifiers.length; index++) {\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          var _state$orderedModifie = state.orderedModifiers[index],\n              fn = _state$orderedModifie.fn,\n              _state$orderedModifie2 = _state$orderedModifie.options,\n              _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2,\n              name = _state$orderedModifie.name;\n\n          if (typeof fn === 'function') {\n            state = fn({\n              state: state,\n              options: _options,\n              name: name,\n              instance: instance\n            }) || state;\n          }\n        }\n      },\n      // Async and optimistically optimized update \u2013 it will not be executed if\n      // not necessary (debounced to run at most once-per-tick)\n      update: debounce(function () {\n        return new Promise(function (resolve) {\n          instance.forceUpdate();\n          resolve(state);\n        });\n      }),\n      destroy: function destroy() {\n        cleanupModifierEffects();\n        isDestroyed = true;\n      }\n    };\n\n    if (!areValidElements(reference, popper)) {\n      return instance;\n    }\n\n    instance.setOptions(options).then(function (state) {\n      if (!isDestroyed && options.onFirstUpdate) {\n        options.onFirstUpdate(state);\n      }\n    }); // Modifiers have the ability to execute arbitrary code before the first\n    // update cycle runs. They will be executed in the same order as the update\n    // cycle. This is useful when a modifier adds some persistent data that\n    // other modifiers need to use, but the modifier is run after the dependent\n    // one.\n\n    function runModifierEffects() {\n      state.orderedModifiers.forEach(function (_ref) {\n        var name = _ref.name,\n            _ref$options = _ref.options,\n            options = _ref$options === void 0 ? {} : _ref$options,\n            effect = _ref.effect;\n\n        if (typeof effect === 'function') {\n          var cleanupFn = effect({\n            state: state,\n            name: name,\n            instance: instance,\n            options: options\n          });\n\n          var noopFn = function noopFn() {};\n\n          effectCleanupFns.push(cleanupFn || noopFn);\n        }\n      });\n    }\n\n    function cleanupModifierEffects() {\n      effectCleanupFns.forEach(function (fn) {\n        return fn();\n      });\n      effectCleanupFns = [];\n    }\n\n    return instance;\n  };\n}\nexport var createPopper = /*#__PURE__*/popperGenerator(); // eslint-disable-next-line import/no-unused-modules\n\nexport { detectOverflow };", "import { popperGenerator, detectOverflow } from \"./createPopper.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nimport offset from \"./modifiers/offset.js\";\nimport flip from \"./modifiers/flip.js\";\nimport preventOverflow from \"./modifiers/preventOverflow.js\";\nimport arrow from \"./modifiers/arrow.js\";\nimport hide from \"./modifiers/hide.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles, offset, flip, preventOverflow, arrow, hide];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow }; // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper as createPopperLite } from \"./popper-lite.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport * from \"./modifiers/index.js\";", "import { Controller } from \"@hotwired/stimulus\"\nimport { createPopper } from '@popperjs/core'\n\n// Connects to data-controller=\"resource-drop-down\"\nexport default class extends Controller {\n  static targets = [\"trigger\", \"menu\"]\n  static values = {\n    placement: { type: String, default: 'bottom' }\n  }\n\n  connect() {\n    this.visible = false\n    this.initialized = false\n\n    // Default options matching Flowbite's defaults\n    this.options = {\n      placement: this.placementValue,\n      triggerType: 'click',\n      offsetSkidding: 0,\n      offsetDistance: 10,\n      delay: 300,\n      ignoreClickOutsideClass: false\n    }\n\n    this.init()\n  }\n\n  init() {\n    if (this.triggerTarget && this.menuTarget && !this.initialized) {\n      // Initialize popper instance\n      // Use 'fixed' strategy to escape overflow containers (e.g., table rows)\n      this.popperInstance = createPopper(this.triggerTarget, this.menuTarget, {\n        strategy: 'fixed',\n        placement: this.options.placement,\n        modifiers: [\n          {\n            name: 'offset',\n            options: {\n              offset: [this.options.offsetSkidding, this.options.offsetDistance],\n            },\n          },\n          {\n            name: 'flip',\n            options: {\n              fallbackPlacements: ['bottom-end', 'bottom-start', 'top', 'top-end', 'top-start'],\n              boundary: 'viewport',\n            },\n          },\n          {\n            name: 'preventOverflow',\n            options: {\n              boundary: 'viewport',\n              altAxis: true,\n              padding: 8,\n            },\n          },\n        ],\n      })\n\n      this.setupEventListeners()\n      this.initialized = true\n    }\n  }\n\n  disconnect() {\n    if (this.initialized) {\n      // Remove click event listeners\n      if (this.options.triggerType === 'click') {\n        this.triggerTarget.removeEventListener('click', this.clickHandler)\n      }\n\n      // Remove hover event listeners\n      if (this.options.triggerType === 'hover') {\n        this.triggerTarget.removeEventListener('mouseenter', this.hoverShowTriggerHandler)\n        this.menuTarget.removeEventListener('mouseenter', this.hoverShowMenuHandler)\n        this.triggerTarget.removeEventListener('mouseleave', this.hoverHideHandler)\n        this.menuTarget.removeEventListener('mouseleave', this.hoverHideHandler)\n      }\n\n      // Remove click outside listener\n      this.removeClickOutsideListener()\n\n      // Destroy popper instance\n      this.popperInstance.destroy()\n      this.initialized = false\n    }\n  }\n\n  setupEventListeners() {\n    // Bind handlers to preserve context\n    this.clickHandler = this.toggle.bind(this)\n    this.hoverShowTriggerHandler = (ev) => {\n      if (ev.type === 'click') {\n        this.toggle()\n      } else {\n        setTimeout(() => {\n          this.show()\n        }, this.options.delay)\n      }\n    }\n    this.hoverShowMenuHandler = () => {\n      this.show()\n    }\n    this.hoverHideHandler = () => {\n      setTimeout(() => {\n        if (!this.menuTarget.matches(':hover')) {\n          this.hide()\n        }\n      }, this.options.delay)\n    }\n\n    // Set up click or hover events based on trigger type\n    if (this.options.triggerType === 'click') {\n      this.triggerTarget.addEventListener('click', this.clickHandler)\n    } else if (this.options.triggerType === 'hover') {\n      this.triggerTarget.addEventListener('mouseenter', this.hoverShowTriggerHandler)\n      this.menuTarget.addEventListener('mouseenter', this.hoverShowMenuHandler)\n      this.triggerTarget.addEventListener('mouseleave', this.hoverHideHandler)\n      this.menuTarget.addEventListener('mouseleave', this.hoverHideHandler)\n    }\n  }\n\n  setupClickOutsideListener() {\n    this.clickOutsideHandler = (ev) => {\n      const clickedEl = ev.target\n      const ignoreClickOutsideClass = this.options.ignoreClickOutsideClass\n\n      let isIgnored = false\n      if (ignoreClickOutsideClass) {\n        const ignoredEls = document.querySelectorAll(`.${ignoreClickOutsideClass}`)\n        ignoredEls.forEach((el) => {\n          if (el.contains(clickedEl)) {\n            isIgnored = true\n            return\n          }\n        })\n      }\n\n      // Ignore clicks on flatpickr calendars and other floating UI elements\n      const isFloatingUI = clickedEl.closest('.flatpickr-calendar, .ss-main, .ss-content')\n\n      if (\n        clickedEl !== this.menuTarget &&\n        !this.menuTarget.contains(clickedEl) &&\n        !this.triggerTarget.contains(clickedEl) &&\n        !isIgnored &&\n        !isFloatingUI &&\n        this.visible\n      ) {\n        this.hide()\n      }\n    }\n\n    document.body.addEventListener('click', this.clickOutsideHandler, true)\n  }\n\n  removeClickOutsideListener() {\n    if (this.clickOutsideHandler) {\n      document.body.removeEventListener('click', this.clickOutsideHandler, true)\n    }\n  }\n\n  toggle() {\n    if (this.visible) {\n      this.hide()\n    } else {\n      this.show()\n    }\n  }\n\n  show() {\n    this.menuTarget.classList.remove('hidden')\n    this.menuTarget.classList.add('block')\n    this.menuTarget.removeAttribute('aria-hidden')\n\n    // Enable popper event listeners\n    this.popperInstance.setOptions((options) => ({\n      ...options,\n      modifiers: [\n        ...options.modifiers,\n        { name: 'eventListeners', enabled: true },\n      ],\n    }))\n\n    this.setupClickOutsideListener()\n    this.popperInstance.update()\n    this.visible = true\n  }\n\n  hide() {\n    this.menuTarget.classList.remove('block')\n    this.menuTarget.classList.add('hidden')\n    this.menuTarget.setAttribute('aria-hidden', 'true')\n\n    // Disable popper event listeners\n    this.popperInstance.setOptions((options) => ({\n      ...options,\n      modifiers: [\n        ...options.modifiers,\n        { name: 'eventListeners', enabled: false },\n      ],\n    }))\n\n    this.removeClickOutsideListener()\n    this.visible = false\n  }\n}\n", "import { Controller } from \"@hotwired/stimulus\"\n\n// Connects to data-controller=\"resource-collapse\"\nexport default class extends Controller {\n  static targets = [\"trigger\", \"menu\"]\n\n  connect() {\n\n    // Default to false if the data attribute isn't set\n    if (!this.element.hasAttribute('data-visible')) {\n      this.element.setAttribute('data-visible', 'false')\n    }\n\n    // Set initial state\n    this.#updateState()\n  }\n\n  toggle() {\n    const isVisible = this.element.getAttribute('data-visible') === 'true'\n    this.element.setAttribute('data-visible', (!isVisible).toString())\n    this.#updateState()\n  }\n\n  #updateState() {\n    const isVisible = this.element.getAttribute('data-visible') === 'true'\n\n    if (isVisible) {\n      this.menuTarget.classList.remove('hidden')\n      this.triggerTarget.setAttribute('aria-expanded', 'true')\n      this.dispatch('expand')\n    } else {\n      this.menuTarget.classList.add('hidden')\n      this.triggerTarget.setAttribute('aria-expanded', 'false')\n      this.dispatch('collapse')\n    }\n  }\n}\n", "import { Controller } from \"@hotwired/stimulus\"\n\n// Connects to data-controller=\"resource-dismiss\"\nexport default class extends Controller {\n  static values = {\n    after: Number,\n  }\n\n  connect() {\n\n    if (this.hasAfterValue && this.afterValue > 0) {\n      this.autoDismissTimeout = setTimeout(() => {\n        this.dismiss()\n        this.autoDismissTimeout = null\n      }, this.afterValue);\n    }\n  }\n\n  disconnect() {\n    if (this.autoDismissTimeout) clearTimeout(this.autoDismissTimeout)\n\n    this.autoDismissTimeout = null\n  }\n\n  dismiss() {\n    this.element.remove()\n  }\n}\n", "import { Controller } from \"@hotwired/stimulus\"\n\n// Connects to data-controller=\"frame-navigator\"\nexport default class extends Controller {\n  static targets = [\"frame\", \"refreshButton\", \"backButton\", \"homeButton\", \"maximizeLink\"];\n\n  connect() {\n    this.#loadingStarted()\n\n    this.srcHistory = []\n    this.originalFrameSrc = this.frameTarget.src\n\n    if (this.hasRefreshButtonTarget) {\n      this.refreshButtonTarget.style.display = ''\n      this.refreshButtonClicked = this.refreshButtonClicked.bind(this);\n      this.refreshButtonTarget.addEventListener(\"click\", this.refreshButtonClicked);\n    }\n\n    if (this.hasBackButtonTarget) {\n      this.backButtonClicked = this.backButtonClicked.bind(this);\n      this.backButtonTarget.addEventListener(\"click\", this.backButtonClicked);\n    }\n\n    if (this.hasHomeButtonTarget) {\n      this.homeButtonClicked = this.homeButtonClicked.bind(this);\n      this.homeButtonTarget.addEventListener(\"click\", this.homeButtonClicked);\n    }\n\n    this.frameLoaded = this.frameLoaded.bind(this);\n    this.frameTarget.addEventListener(\"turbo:frame-load\", this.frameLoaded);\n\n    this.frameLoading = this.frameLoading.bind(this);\n    this.frameTarget.addEventListener(\"turbo:click\", this.frameLoading);\n    this.frameTarget.addEventListener(\"turbo:submit-start\", this.frameLoading);\n\n    this.frameFailed = this.frameFailed.bind(this);\n    this.frameTarget.addEventListener(\"turbo:fetch-request-error\", this.frameFailed);\n  }\n\n  disconnect() {\n    if (this.hasRefreshButtonTarget) this.refreshButtonTarget.removeEventListener(\"click\", this.refreshButtonClicked);\n    if (this.hasBackButtonTarget) this.backButtonTarget.removeEventListener(\"click\", this.backButtonClicked);\n    if (this.hasHomeButtonTarget) this.homeButtonTarget.removeEventListener(\"click\", this.homeButtonClicked);\n\n    this.frameTarget.removeEventListener(\"turbo:frame-load\", this.frameLoaded);\n    this.frameTarget.removeEventListener(\"turbo:click\", this.frameLoading);\n    this.frameTarget.removeEventListener(\"turbo:submit-start\", this.frameLoading);\n    this.frameTarget.removeEventListener(\"turbo:fetch-request-error\", this.frameFailed);\n  }\n\n  frameLoading(event) {\n    this.#loadingStarted()\n  }\n\n  frameFailed(event) {\n    this.#loadingStopped()\n  }\n\n  frameLoaded(event) {\n    this.#loadingStopped()\n\n    let src = event.target.src\n    this.#notifySrcChanged(src)\n  }\n\n  refreshButtonClicked(event) {\n    this.frameLoading(null)\n\n    this.frameTarget.reload()\n  }\n\n  backButtonClicked(event) {\n    this.frameLoading(null)\n\n    this.srcHistory.pop()\n    this.frameTarget.src = this.currentSrc\n  }\n\n  homeButtonClicked(event) {\n    this.frameLoading(null)\n\n    this.frameTarget.src = this.originalFrameSrc\n  }\n\n  get currentSrc() { return this.srcHistory[this.srcHistory.length - 1] }\n\n  #notifySrcChanged(src) {\n    if (src == this.currentSrc) {\n      // this must be a refresh\n      // do nothing\n    }\n    else if (src == this.originalFrameSrc)\n      this.srcHistory = [src]\n    else\n      this.srcHistory.push(src)\n\n    this.#updateNavigationButtonsDisplay()\n    if (this.hasMaximizeLinkTarget) this.maximizeLinkTarget.href = src\n  }\n\n  #loadingStarted() {\n    if (this.hasRefreshButtonTarget) this.refreshButtonTarget.classList.add(\"motion-safe:animate-spin\")\n    this.frameTarget.classList.add(\"motion-safe:animate-pulse\")\n  }\n\n  #loadingStopped() {\n    if (this.hasRefreshButtonTarget) this.refreshButtonTarget.classList.remove(\"motion-safe:animate-spin\")\n    this.frameTarget.classList.remove(\"motion-safe:animate-pulse\")\n  }\n\n  #updateNavigationButtonsDisplay() {\n    if (this.hasHomeButtonTarget) {\n      this.homeButtonTarget.style.display = this.srcHistory.length > 2 ? '' : 'none'\n    }\n\n    if (this.hasBackButtonTarget) {\n      this.backButtonTarget.style.display = this.srcHistory.length > 1 ? '' : 'none'\n    }\n  }\n}\n", "import { Controller } from \"@hotwired/stimulus\";\n\n// Connects to data-controller=\"color-mode\"\nexport default class extends Controller {\n  static values = { current: String };\n\n  connect() {\n    // Set initial mode from localStorage or default\n    const mode = localStorage.getItem('theme') || \"light\";\n    this.setMode(mode);\n\n    // Listen for cross-tab theme changes\n    this.handleStorageChange = (e) => {\n      console.log('Storage event received in color-mode controller:', e.key, e.newValue, e.oldValue)\n      if (e.key === 'theme' && e.newValue) {\n        console.log('Updating color-mode theme to:', e.newValue)\n        this.setMode(e.newValue);\n      }\n    };\n    window.addEventListener('storage', this.handleStorageChange);\n  }\n\n  disconnect() {\n    // Clean up event listener\n    window.removeEventListener('storage', this.handleStorageChange);\n  }\n\n  toggleMode() {\n    const current = this.currentValue || \"light\";\n    const next = current === \"light\" ? \"dark\" : \"light\";\n    this.setMode(next);\n  }\n\n  setMode(mode) {\n    // Update html class\n    if (mode === \"dark\") {\n      document.documentElement.classList.add(\"dark\");\n    } else {\n      document.documentElement.classList.remove(\"dark\");\n    }\n\n    // Update button state\n    this.currentValue = mode;\n\n    // Show/hide icons\n    this.toggleIcons(mode);\n\n    // Store in localStorage to trigger storage events in other tabs\n    localStorage.setItem('theme', mode);\n  }\n\n  toggleIcons(mode) {\n    const sun = this.element.querySelector(\".color-mode-icon-light\");\n    const moon = this.element.querySelector(\".color-mode-icon-dark\");\n\n    if (sun && moon) {\n      if (mode === \"light\") {\n        sun.classList.remove(\"hidden\");\n        moon.classList.add(\"hidden\");\n      } else {\n        sun.classList.add(\"hidden\");\n        moon.classList.remove(\"hidden\");\n      }\n    }\n  }\n}\n", "const {\n  entries,\n  setPrototypeOf,\n  isFrozen,\n  getPrototypeOf,\n  getOwnPropertyDescriptor,\n} = Object;\n\nlet { freeze, seal, create } = Object; // eslint-disable-line import/no-mutable-exports\nlet { apply, construct } = typeof Reflect !== 'undefined' && Reflect;\n\nif (!freeze) {\n  freeze = function <T>(x: T): T {\n    return x;\n  };\n}\n\nif (!seal) {\n  seal = function <T>(x: T): T {\n    return x;\n  };\n}\n\nif (!apply) {\n  apply = function <T>(\n    func: (thisArg: any, ...args: any[]) => T,\n    thisArg: any,\n    ...args: any[]\n  ): T {\n    return func.apply(thisArg, args);\n  };\n}\n\nif (!construct) {\n  construct = function <T>(Func: new (...args: any[]) => T, ...args: any[]): T {\n    return new Func(...args);\n  };\n}\n\nconst arrayForEach = unapply(Array.prototype.forEach);\nconst arrayIndexOf = unapply(Array.prototype.indexOf);\nconst arrayLastIndexOf = unapply(Array.prototype.lastIndexOf);\nconst arrayPop = unapply(Array.prototype.pop);\nconst arrayPush = unapply(Array.prototype.push);\nconst arraySlice = unapply(Array.prototype.slice);\nconst arraySplice = unapply(Array.prototype.splice);\n\nconst stringToLowerCase = unapply(String.prototype.toLowerCase);\nconst stringToString = unapply(String.prototype.toString);\nconst stringMatch = unapply(String.prototype.match);\nconst stringReplace = unapply(String.prototype.replace);\nconst stringIndexOf = unapply(String.prototype.indexOf);\nconst stringTrim = unapply(String.prototype.trim);\n\nconst objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);\n\nconst regExpTest = unapply(RegExp.prototype.test);\n\nconst typeErrorCreate = unconstruct(TypeError);\n\n/**\n * Creates a new function that calls the given function with a specified thisArg and arguments.\n *\n * @param func - The function to be wrapped and called.\n * @returns A new function that calls the given function with a specified thisArg and arguments.\n */\nfunction unapply<T>(\n  func: (thisArg: any, ...args: any[]) => T\n): (thisArg: any, ...args: any[]) => T {\n  return (thisArg: any, ...args: any[]): T => {\n    if (thisArg instanceof RegExp) {\n      thisArg.lastIndex = 0;\n    }\n\n    return apply(func, thisArg, args);\n  };\n}\n\n/**\n * Creates a new function that constructs an instance of the given constructor function with the provided arguments.\n *\n * @param func - The constructor function to be wrapped and called.\n * @returns A new function that constructs an instance of the given constructor function with the provided arguments.\n */\nfunction unconstruct<T>(\n  Func: new (...args: any[]) => T\n): (...args: any[]) => T {\n  return (...args: any[]): T => construct(Func, args);\n}\n\n/**\n * Add properties to a lookup table\n *\n * @param set - The set to which elements will be added.\n * @param array - The array containing elements to be added to the set.\n * @param transformCaseFunc - An optional function to transform the case of each element before adding to the set.\n * @returns The modified set with added elements.\n */\nfunction addToSet(\n  set: Record<string, any>,\n  array: readonly any[],\n  transformCaseFunc: ReturnType<typeof unapply<string>> = stringToLowerCase\n): Record<string, any> {\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n\n  let l = array.length;\n  while (l--) {\n    let element = array[l];\n    if (typeof element === 'string') {\n      const lcElement = transformCaseFunc(element);\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          (array as any[])[l] = lcElement;\n        }\n\n        element = lcElement;\n      }\n    }\n\n    set[element] = true;\n  }\n\n  return set;\n}\n\n/**\n * Clean up an array to harden against CSPP\n *\n * @param array - The array to be cleaned.\n * @returns The cleaned version of the array\n */\nfunction cleanArray<T>(array: T[]): Array<T | null> {\n  for (let index = 0; index < array.length; index++) {\n    const isPropertyExist = objectHasOwnProperty(array, index);\n\n    if (!isPropertyExist) {\n      array[index] = null;\n    }\n  }\n\n  return array;\n}\n\n/**\n * Shallow clone an object\n *\n * @param object - The object to be cloned.\n * @returns A new object that copies the original.\n */\nfunction clone<T extends Record<string, any>>(object: T): T {\n  const newObject = create(null);\n\n  for (const [property, value] of entries(object)) {\n    const isPropertyExist = objectHasOwnProperty(object, property);\n\n    if (isPropertyExist) {\n      if (Array.isArray(value)) {\n        newObject[property] = cleanArray(value);\n      } else if (\n        value &&\n        typeof value === 'object' &&\n        value.constructor === Object\n      ) {\n        newObject[property] = clone(value);\n      } else {\n        newObject[property] = value;\n      }\n    }\n  }\n\n  return newObject;\n}\n\n/**\n * This method automatically checks if the prop is function or getter and behaves accordingly.\n *\n * @param object - The object to look up the getter function in its prototype chain.\n * @param prop - The property name for which to find the getter function.\n * @returns The getter function found in the prototype chain or a fallback function.\n */\nfunction lookupGetter<T extends Record<string, any>>(\n  object: T,\n  prop: string\n): ReturnType<typeof unapply<any>> | (() => null) {\n  while (object !== null) {\n    const desc = getOwnPropertyDescriptor(object, prop);\n\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n\n      if (typeof desc.value === 'function') {\n        return unapply(desc.value);\n      }\n    }\n\n    object = getPrototypeOf(object);\n  }\n\n  function fallbackValue(): null {\n    return null;\n  }\n\n  return fallbackValue;\n}\n\nexport {\n  // Array\n  arrayForEach,\n  arrayIndexOf,\n  arrayLastIndexOf,\n  arrayPop,\n  arrayPush,\n  arraySlice,\n  arraySplice,\n  // Object\n  entries,\n  freeze,\n  getPrototypeOf,\n  getOwnPropertyDescriptor,\n  isFrozen,\n  setPrototypeOf,\n  seal,\n  clone,\n  create,\n  objectHasOwnProperty,\n  // RegExp\n  regExpTest,\n  // String\n  stringIndexOf,\n  stringMatch,\n  stringReplace,\n  stringToLowerCase,\n  stringToString,\n  stringTrim,\n  // Errors\n  typeErrorCreate,\n  // Other\n  lookupGetter,\n  addToSet,\n  // Reflect\n  unapply,\n  unconstruct,\n};\n", "import { freeze } from './utils.js';\n\nexport const html = freeze([\n  'a',\n  'abbr',\n  'acronym',\n  'address',\n  'area',\n  'article',\n  'aside',\n  'audio',\n  'b',\n  'bdi',\n  'bdo',\n  'big',\n  'blink',\n  'blockquote',\n  'body',\n  'br',\n  'button',\n  'canvas',\n  'caption',\n  'center',\n  'cite',\n  'code',\n  'col',\n  'colgroup',\n  'content',\n  'data',\n  'datalist',\n  'dd',\n  'decorator',\n  'del',\n  'details',\n  'dfn',\n  'dialog',\n  'dir',\n  'div',\n  'dl',\n  'dt',\n  'element',\n  'em',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'font',\n  'footer',\n  'form',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'head',\n  'header',\n  'hgroup',\n  'hr',\n  'html',\n  'i',\n  'img',\n  'input',\n  'ins',\n  'kbd',\n  'label',\n  'legend',\n  'li',\n  'main',\n  'map',\n  'mark',\n  'marquee',\n  'menu',\n  'menuitem',\n  'meter',\n  'nav',\n  'nobr',\n  'ol',\n  'optgroup',\n  'option',\n  'output',\n  'p',\n  'picture',\n  'pre',\n  'progress',\n  'q',\n  'rp',\n  'rt',\n  'ruby',\n  's',\n  'samp',\n  'search',\n  'section',\n  'select',\n  'shadow',\n  'slot',\n  'small',\n  'source',\n  'spacer',\n  'span',\n  'strike',\n  'strong',\n  'style',\n  'sub',\n  'summary',\n  'sup',\n  'table',\n  'tbody',\n  'td',\n  'template',\n  'textarea',\n  'tfoot',\n  'th',\n  'thead',\n  'time',\n  'tr',\n  'track',\n  'tt',\n  'u',\n  'ul',\n  'var',\n  'video',\n  'wbr',\n] as const);\n\nexport const svg = freeze([\n  'svg',\n  'a',\n  'altglyph',\n  'altglyphdef',\n  'altglyphitem',\n  'animatecolor',\n  'animatemotion',\n  'animatetransform',\n  'circle',\n  'clippath',\n  'defs',\n  'desc',\n  'ellipse',\n  'enterkeyhint',\n  'exportparts',\n  'filter',\n  'font',\n  'g',\n  'glyph',\n  'glyphref',\n  'hkern',\n  'image',\n  'inputmode',\n  'line',\n  'lineargradient',\n  'marker',\n  'mask',\n  'metadata',\n  'mpath',\n  'part',\n  'path',\n  'pattern',\n  'polygon',\n  'polyline',\n  'radialgradient',\n  'rect',\n  'stop',\n  'style',\n  'switch',\n  'symbol',\n  'text',\n  'textpath',\n  'title',\n  'tref',\n  'tspan',\n  'view',\n  'vkern',\n] as const);\n\nexport const svgFilters = freeze([\n  'feBlend',\n  'feColorMatrix',\n  'feComponentTransfer',\n  'feComposite',\n  'feConvolveMatrix',\n  'feDiffuseLighting',\n  'feDisplacementMap',\n  'feDistantLight',\n  'feDropShadow',\n  'feFlood',\n  'feFuncA',\n  'feFuncB',\n  'feFuncG',\n  'feFuncR',\n  'feGaussianBlur',\n  'feImage',\n  'feMerge',\n  'feMergeNode',\n  'feMorphology',\n  'feOffset',\n  'fePointLight',\n  'feSpecularLighting',\n  'feSpotLight',\n  'feTile',\n  'feTurbulence',\n] as const);\n\n// List of SVG elements that are disallowed by default.\n// We still need to know them so that we can do namespace\n// checks properly in case one wants to add them to\n// allow-list.\nexport const svgDisallowed = freeze([\n  'animate',\n  'color-profile',\n  'cursor',\n  'discard',\n  'font-face',\n  'font-face-format',\n  'font-face-name',\n  'font-face-src',\n  'font-face-uri',\n  'foreignobject',\n  'hatch',\n  'hatchpath',\n  'mesh',\n  'meshgradient',\n  'meshpatch',\n  'meshrow',\n  'missing-glyph',\n  'script',\n  'set',\n  'solidcolor',\n  'unknown',\n  'use',\n] as const);\n\nexport const mathMl = freeze([\n  'math',\n  'menclose',\n  'merror',\n  'mfenced',\n  'mfrac',\n  'mglyph',\n  'mi',\n  'mlabeledtr',\n  'mmultiscripts',\n  'mn',\n  'mo',\n  'mover',\n  'mpadded',\n  'mphantom',\n  'mroot',\n  'mrow',\n  'ms',\n  'mspace',\n  'msqrt',\n  'mstyle',\n  'msub',\n  'msup',\n  'msubsup',\n  'mtable',\n  'mtd',\n  'mtext',\n  'mtr',\n  'munder',\n  'munderover',\n  'mprescripts',\n] as const);\n\n// Similarly to SVG, we want to know all MathML elements,\n// even those that we disallow by default.\nexport const mathMlDisallowed = freeze([\n  'maction',\n  'maligngroup',\n  'malignmark',\n  'mlongdiv',\n  'mscarries',\n  'mscarry',\n  'msgroup',\n  'mstack',\n  'msline',\n  'msrow',\n  'semantics',\n  'annotation',\n  'annotation-xml',\n  'mprescripts',\n  'none',\n] as const);\n\nexport const text = freeze(['#text'] as const);\n", "import { freeze } from './utils.js';\n\nexport const html = freeze([\n  'accept',\n  'action',\n  'align',\n  'alt',\n  'autocapitalize',\n  'autocomplete',\n  'autopictureinpicture',\n  'autoplay',\n  'background',\n  'bgcolor',\n  'border',\n  'capture',\n  'cellpadding',\n  'cellspacing',\n  'checked',\n  'cite',\n  'class',\n  'clear',\n  'color',\n  'cols',\n  'colspan',\n  'controls',\n  'controlslist',\n  'coords',\n  'crossorigin',\n  'datetime',\n  'decoding',\n  'default',\n  'dir',\n  'disabled',\n  'disablepictureinpicture',\n  'disableremoteplayback',\n  'download',\n  'draggable',\n  'enctype',\n  'enterkeyhint',\n  'exportparts',\n  'face',\n  'for',\n  'headers',\n  'height',\n  'hidden',\n  'high',\n  'href',\n  'hreflang',\n  'id',\n  'inert',\n  'inputmode',\n  'integrity',\n  'ismap',\n  'kind',\n  'label',\n  'lang',\n  'list',\n  'loading',\n  'loop',\n  'low',\n  'max',\n  'maxlength',\n  'media',\n  'method',\n  'min',\n  'minlength',\n  'multiple',\n  'muted',\n  'name',\n  'nonce',\n  'noshade',\n  'novalidate',\n  'nowrap',\n  'open',\n  'optimum',\n  'part',\n  'pattern',\n  'placeholder',\n  'playsinline',\n  'popover',\n  'popovertarget',\n  'popovertargetaction',\n  'poster',\n  'preload',\n  'pubdate',\n  'radiogroup',\n  'readonly',\n  'rel',\n  'required',\n  'rev',\n  'reversed',\n  'role',\n  'rows',\n  'rowspan',\n  'spellcheck',\n  'scope',\n  'selected',\n  'shape',\n  'size',\n  'sizes',\n  'slot',\n  'span',\n  'srclang',\n  'start',\n  'src',\n  'srcset',\n  'step',\n  'style',\n  'summary',\n  'tabindex',\n  'title',\n  'translate',\n  'type',\n  'usemap',\n  'valign',\n  'value',\n  'width',\n  'wrap',\n  'xmlns',\n  'slot',\n] as const);\n\nexport const svg = freeze([\n  'accent-height',\n  'accumulate',\n  'additive',\n  'alignment-baseline',\n  'amplitude',\n  'ascent',\n  'attributename',\n  'attributetype',\n  'azimuth',\n  'basefrequency',\n  'baseline-shift',\n  'begin',\n  'bias',\n  'by',\n  'class',\n  'clip',\n  'clippathunits',\n  'clip-path',\n  'clip-rule',\n  'color',\n  'color-interpolation',\n  'color-interpolation-filters',\n  'color-profile',\n  'color-rendering',\n  'cx',\n  'cy',\n  'd',\n  'dx',\n  'dy',\n  'diffuseconstant',\n  'direction',\n  'display',\n  'divisor',\n  'dur',\n  'edgemode',\n  'elevation',\n  'end',\n  'exponent',\n  'fill',\n  'fill-opacity',\n  'fill-rule',\n  'filter',\n  'filterunits',\n  'flood-color',\n  'flood-opacity',\n  'font-family',\n  'font-size',\n  'font-size-adjust',\n  'font-stretch',\n  'font-style',\n  'font-variant',\n  'font-weight',\n  'fx',\n  'fy',\n  'g1',\n  'g2',\n  'glyph-name',\n  'glyphref',\n  'gradientunits',\n  'gradienttransform',\n  'height',\n  'href',\n  'id',\n  'image-rendering',\n  'in',\n  'in2',\n  'intercept',\n  'k',\n  'k1',\n  'k2',\n  'k3',\n  'k4',\n  'kerning',\n  'keypoints',\n  'keysplines',\n  'keytimes',\n  'lang',\n  'lengthadjust',\n  'letter-spacing',\n  'kernelmatrix',\n  'kernelunitlength',\n  'lighting-color',\n  'local',\n  'marker-end',\n  'marker-mid',\n  'marker-start',\n  'markerheight',\n  'markerunits',\n  'markerwidth',\n  'maskcontentunits',\n  'maskunits',\n  'max',\n  'mask',\n  'mask-type',\n  'media',\n  'method',\n  'mode',\n  'min',\n  'name',\n  'numoctaves',\n  'offset',\n  'operator',\n  'opacity',\n  'order',\n  'orient',\n  'orientation',\n  'origin',\n  'overflow',\n  'paint-order',\n  'path',\n  'pathlength',\n  'patterncontentunits',\n  'patterntransform',\n  'patternunits',\n  'points',\n  'preservealpha',\n  'preserveaspectratio',\n  'primitiveunits',\n  'r',\n  'rx',\n  'ry',\n  'radius',\n  'refx',\n  'refy',\n  'repeatcount',\n  'repeatdur',\n  'restart',\n  'result',\n  'rotate',\n  'scale',\n  'seed',\n  'shape-rendering',\n  'slope',\n  'specularconstant',\n  'specularexponent',\n  'spreadmethod',\n  'startoffset',\n  'stddeviation',\n  'stitchtiles',\n  'stop-color',\n  'stop-opacity',\n  'stroke-dasharray',\n  'stroke-dashoffset',\n  'stroke-linecap',\n  'stroke-linejoin',\n  'stroke-miterlimit',\n  'stroke-opacity',\n  'stroke',\n  'stroke-width',\n  'style',\n  'surfacescale',\n  'systemlanguage',\n  'tabindex',\n  'tablevalues',\n  'targetx',\n  'targety',\n  'transform',\n  'transform-origin',\n  'text-anchor',\n  'text-decoration',\n  'text-rendering',\n  'textlength',\n  'type',\n  'u1',\n  'u2',\n  'unicode',\n  'values',\n  'viewbox',\n  'visibility',\n  'version',\n  'vert-adv-y',\n  'vert-origin-x',\n  'vert-origin-y',\n  'width',\n  'word-spacing',\n  'wrap',\n  'writing-mode',\n  'xchannelselector',\n  'ychannelselector',\n  'x',\n  'x1',\n  'x2',\n  'xmlns',\n  'y',\n  'y1',\n  'y2',\n  'z',\n  'zoomandpan',\n] as const);\n\nexport const mathMl = freeze([\n  'accent',\n  'accentunder',\n  'align',\n  'bevelled',\n  'close',\n  'columnsalign',\n  'columnlines',\n  'columnspan',\n  'denomalign',\n  'depth',\n  'dir',\n  'display',\n  'displaystyle',\n  'encoding',\n  'fence',\n  'frame',\n  'height',\n  'href',\n  'id',\n  'largeop',\n  'length',\n  'linethickness',\n  'lspace',\n  'lquote',\n  'mathbackground',\n  'mathcolor',\n  'mathsize',\n  'mathvariant',\n  'maxsize',\n  'minsize',\n  'movablelimits',\n  'notation',\n  'numalign',\n  'open',\n  'rowalign',\n  'rowlines',\n  'rowspacing',\n  'rowspan',\n  'rspace',\n  'rquote',\n  'scriptlevel',\n  'scriptminsize',\n  'scriptsizemultiplier',\n  'selection',\n  'separator',\n  'separators',\n  'stretchy',\n  'subscriptshift',\n  'supscriptshift',\n  'symmetric',\n  'voffset',\n  'width',\n  'xmlns',\n]);\n\nexport const xml = freeze([\n  'xlink:href',\n  'xml:id',\n  'xlink:title',\n  'xml:space',\n  'xmlns:xlink',\n] as const);\n", "import { seal } from './utils.js';\n\n// eslint-disable-next-line unicorn/better-regex\nexport const MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nexport const ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\nexport const TMPLIT_EXPR = seal(/\\$\\{[\\w\\W]*/gm); // eslint-disable-line unicorn/better-regex\nexport const DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]+$/); // eslint-disable-line no-useless-escape\nexport const ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nexport const IS_ALLOWED_URI = seal(\n  /^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nexport const IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nexport const ATTR_WHITESPACE = seal(\n  /[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n);\nexport const DOCTYPE_NAME = seal(/^html$/i);\nexport const CUSTOM_ELEMENT = seal(/^[a-z][.\\w]*(-[.\\w]+)+$/i);\n", "/* eslint-disable @typescript-eslint/indent */\n\nimport type {\n  TrustedHTML,\n  TrustedTypesWindow,\n} from 'trusted-types/lib/index.js';\nimport type { Config, UseProfilesConfig } from './config';\nimport * as TAGS from './tags.js';\nimport * as ATTRS from './attrs.js';\nimport * as EXPRESSIONS from './regexp.js';\nimport {\n  addToSet,\n  clone,\n  entries,\n  freeze,\n  arrayForEach,\n  arrayLastIndexOf,\n  arrayPop,\n  arrayPush,\n  arraySplice,\n  stringMatch,\n  stringReplace,\n  stringToLowerCase,\n  stringToString,\n  stringIndexOf,\n  stringTrim,\n  regExpTest,\n  typeErrorCreate,\n  lookupGetter,\n  create,\n  objectHasOwnProperty,\n} from './utils.js';\n\nexport type { Config } from './config';\n\ndeclare const VERSION: string;\n\n// https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\nconst NODE_TYPE = {\n  element: 1,\n  attribute: 2,\n  text: 3,\n  cdataSection: 4,\n  entityReference: 5, // Deprecated\n  entityNode: 6, // Deprecated\n  progressingInstruction: 7,\n  comment: 8,\n  document: 9,\n  documentType: 10,\n  documentFragment: 11,\n  notation: 12, // Deprecated\n};\n\nconst getGlobal = function (): WindowLike {\n  return typeof window === 'undefined' ? null : window;\n};\n\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param trustedTypes The policy factory.\n * @param purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).\n * @return The policy created (or null, if Trusted Types\n * are not supported or creating the policy failed).\n */\nconst _createTrustedTypesPolicy = function (\n  trustedTypes: TrustedTypePolicyFactory,\n  purifyHostElement: HTMLScriptElement\n) {\n  if (\n    typeof trustedTypes !== 'object' ||\n    typeof trustedTypes.createPolicy !== 'function'\n  ) {\n    return null;\n  }\n\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  let suffix = null;\n  const ATTR_NAME = 'data-tt-policy-suffix';\n  if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n    suffix = purifyHostElement.getAttribute(ATTR_NAME);\n  }\n\n  const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML(html) {\n        return html;\n      },\n      createScriptURL(scriptUrl) {\n        return scriptUrl;\n      },\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn(\n      'TrustedTypes policy ' + policyName + ' could not be created.'\n    );\n    return null;\n  }\n};\n\nconst _createHooksMap = function (): HooksMap {\n  return {\n    afterSanitizeAttributes: [],\n    afterSanitizeElements: [],\n    afterSanitizeShadowDOM: [],\n    beforeSanitizeAttributes: [],\n    beforeSanitizeElements: [],\n    beforeSanitizeShadowDOM: [],\n    uponSanitizeAttribute: [],\n    uponSanitizeElement: [],\n    uponSanitizeShadowNode: [],\n  };\n};\n\nfunction createDOMPurify(window: WindowLike = getGlobal()): DOMPurify {\n  const DOMPurify: DOMPurify = (root: WindowLike) => createDOMPurify(root);\n\n  DOMPurify.version = VERSION;\n\n  DOMPurify.removed = [];\n\n  if (\n    !window ||\n    !window.document ||\n    window.document.nodeType !== NODE_TYPE.document ||\n    !window.Element\n  ) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n\n    return DOMPurify;\n  }\n\n  let { document } = window;\n\n  const originalDocument = document;\n  const currentScript: HTMLScriptElement =\n    originalDocument.currentScript as HTMLScriptElement;\n  const {\n    DocumentFragment,\n    HTMLTemplateElement,\n    Node,\n    Element,\n    NodeFilter,\n    NamedNodeMap = window.NamedNodeMap || (window as any).MozNamedAttrMap,\n    HTMLFormElement,\n    DOMParser,\n    trustedTypes,\n  } = window;\n\n  const ElementPrototype = Element.prototype;\n\n  const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n  const remove = lookupGetter(ElementPrototype, 'remove');\n  const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n  const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n  const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n  if (typeof HTMLTemplateElement === 'function') {\n    const template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n\n  let trustedTypesPolicy;\n  let emptyHTML = '';\n\n  const {\n    implementation,\n    createNodeIterator,\n    createDocumentFragment,\n    getElementsByTagName,\n  } = document;\n  const { importNode } = originalDocument;\n\n  let hooks = _createHooksMap();\n\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported =\n    typeof entries === 'function' &&\n    typeof getParentNode === 'function' &&\n    implementation &&\n    implementation.createHTMLDocument !== undefined;\n\n  const {\n    MUSTACHE_EXPR,\n    ERB_EXPR,\n    TMPLIT_EXPR,\n    DATA_ATTR,\n    ARIA_ATTR,\n    IS_SCRIPT_OR_DATA,\n    ATTR_WHITESPACE,\n    CUSTOM_ELEMENT,\n  } = EXPRESSIONS;\n\n  let { IS_ALLOWED_URI } = EXPRESSIONS;\n\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n\n  /* allowed element names */\n  let ALLOWED_TAGS = null;\n  const DEFAULT_ALLOWED_TAGS = addToSet({}, [\n    ...TAGS.html,\n    ...TAGS.svg,\n    ...TAGS.svgFilters,\n    ...TAGS.mathMl,\n    ...TAGS.text,\n  ]);\n\n  /* Allowed attribute names */\n  let ALLOWED_ATTR = null;\n  const DEFAULT_ALLOWED_ATTR = addToSet({}, [\n    ...ATTRS.html,\n    ...ATTRS.svg,\n    ...ATTRS.mathMl,\n    ...ATTRS.xml,\n  ]);\n\n  /*\n   * Configure how DOMPurify should handle custom elements and their attributes as well as customized built-in elements.\n   * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n   * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n   * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n   */\n  let CUSTOM_ELEMENT_HANDLING = Object.seal(\n    create(null, {\n      tagNameCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null,\n      },\n      attributeNameCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null,\n      },\n      allowCustomizedBuiltInElements: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: false,\n      },\n    })\n  );\n\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  let FORBID_TAGS = null;\n\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  let FORBID_ATTR = null;\n\n  /* Config object to store ADD_TAGS/ADD_ATTR functions (when used as functions) */\n  const EXTRA_ELEMENT_HANDLING = Object.seal(\n    create(null, {\n      tagCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null,\n      },\n      attributeCheck: {\n        writable: true,\n        configurable: false,\n        enumerable: true,\n        value: null,\n      },\n    })\n  );\n\n  /* Decide if ARIA attributes are okay */\n  let ALLOW_ARIA_ATTR = true;\n\n  /* Decide if custom data attributes are okay */\n  let ALLOW_DATA_ATTR = true;\n\n  /* Decide if unknown protocols are okay */\n  let ALLOW_UNKNOWN_PROTOCOLS = false;\n\n  /* Decide if self-closing tags in attributes are allowed.\n   * Usually removed due to a mXSS issue in jQuery 3.0 */\n  let ALLOW_SELF_CLOSE_IN_ATTR = true;\n\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  let SAFE_FOR_TEMPLATES = false;\n\n  /* Output should be safe even for XML used within HTML and alike.\n   * This means, DOMPurify removes comments when containing risky content.\n   */\n  let SAFE_FOR_XML = true;\n\n  /* Decide if document with <html>... should be returned */\n  let WHOLE_DOCUMENT = false;\n\n  /* Track whether config is already set on this instance of DOMPurify. */\n  let SET_CONFIG = false;\n\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  let FORCE_BODY = false;\n\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  let RETURN_DOM = false;\n\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  let RETURN_DOM_FRAGMENT = false;\n\n  /* Try to return a Trusted Type object instead of a string, return a string in\n   * case Trusted Types are not supported  */\n  let RETURN_TRUSTED_TYPE = false;\n\n  /* Output should be free from DOM clobbering attacks?\n   * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n   */\n  let SANITIZE_DOM = true;\n\n  /* Achieve full DOM Clobbering protection by isolating the namespace of named\n   * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n   *\n   * HTML/DOM spec rules that enable DOM Clobbering:\n   *   - Named Access on Window (7.3.3)\n   *   - DOM Tree Accessors (3.1.5)\n   *   - Form Element Parent-Child Relations (4.10.3)\n   *   - Iframe srcdoc / Nested WindowProxies (4.8.5)\n   *   - HTMLCollection (4.2.10.2)\n   *\n   * Namespace isolation is implemented by prefixing `id` and `name` attributes\n   * with a constant string, i.e., `user-content-`\n   */\n  let SANITIZE_NAMED_PROPS = false;\n  const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n\n  /* Keep element content when removing element? */\n  let KEEP_CONTENT = true;\n\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  let IN_PLACE = false;\n\n  /* Allow usage of profiles like html, svg and mathMl */\n  let USE_PROFILES: UseProfilesConfig | false = {};\n\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  let FORBID_CONTENTS = null;\n  const DEFAULT_FORBID_CONTENTS = addToSet({}, [\n    'annotation-xml',\n    'audio',\n    'colgroup',\n    'desc',\n    'foreignobject',\n    'head',\n    'iframe',\n    'math',\n    'mi',\n    'mn',\n    'mo',\n    'ms',\n    'mtext',\n    'noembed',\n    'noframes',\n    'noscript',\n    'plaintext',\n    'script',\n    'style',\n    'svg',\n    'template',\n    'thead',\n    'title',\n    'video',\n    'xmp',\n  ]);\n\n  /* Tags that are safe for data: URIs */\n  let DATA_URI_TAGS = null;\n  const DEFAULT_DATA_URI_TAGS = addToSet({}, [\n    'audio',\n    'video',\n    'img',\n    'source',\n    'image',\n    'track',\n  ]);\n\n  /* Attributes safe for values like \"javascript:\" */\n  let URI_SAFE_ATTRIBUTES = null;\n  const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, [\n    'alt',\n    'class',\n    'for',\n    'id',\n    'label',\n    'name',\n    'pattern',\n    'placeholder',\n    'role',\n    'summary',\n    'title',\n    'value',\n    'style',\n    'xmlns',\n  ]);\n\n  const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n  const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n  const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n  /* Document namespace */\n  let NAMESPACE = HTML_NAMESPACE;\n  let IS_EMPTY_INPUT = false;\n\n  /* Allowed XHTML+XML namespaces */\n  let ALLOWED_NAMESPACES = null;\n  const DEFAULT_ALLOWED_NAMESPACES = addToSet(\n    {},\n    [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE],\n    stringToString\n  );\n\n  let MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, [\n    'mi',\n    'mo',\n    'mn',\n    'ms',\n    'mtext',\n  ]);\n\n  let HTML_INTEGRATION_POINTS = addToSet({}, ['annotation-xml']);\n\n  // Certain elements are allowed in both SVG and HTML\n  // namespace. We need to specify them explicitly\n  // so that they don't get erroneously deleted from\n  // HTML namespace.\n  const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, [\n    'title',\n    'style',\n    'font',\n    'a',\n    'script',\n  ]);\n\n  /* Parsing of strict XHTML documents */\n  let PARSER_MEDIA_TYPE: null | DOMParserSupportedType = null;\n  const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n  const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n  let transformCaseFunc: null | Parameters<typeof addToSet>[2] = null;\n\n  /* Keep a reference to config to pass to hooks */\n  let CONFIG: Config | null = null;\n\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n\n  const formElement = document.createElement('form');\n\n  const isRegexOrFunction = function (\n    testValue: unknown\n  ): testValue is Function | RegExp {\n    return testValue instanceof RegExp || testValue instanceof Function;\n  };\n\n  /**\n   * _parseConfig\n   *\n   * @param cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  const _parseConfig = function (cfg: Config = {}): void {\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n\n    /* Shield configuration object from tampering */\n    if (!cfg || typeof cfg !== 'object') {\n      cfg = {};\n    }\n\n    /* Shield configuration object from prototype pollution */\n    cfg = clone(cfg);\n\n    PARSER_MEDIA_TYPE =\n      // eslint-disable-next-line unicorn/prefer-includes\n      SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1\n        ? DEFAULT_PARSER_MEDIA_TYPE\n        : cfg.PARSER_MEDIA_TYPE;\n\n    // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n    transformCaseFunc =\n      PARSER_MEDIA_TYPE === 'application/xhtml+xml'\n        ? stringToString\n        : stringToLowerCase;\n\n    /* Set configuration parameters */\n    ALLOWED_TAGS = objectHasOwnProperty(cfg, 'ALLOWED_TAGS')\n      ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc)\n      : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = objectHasOwnProperty(cfg, 'ALLOWED_ATTR')\n      ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc)\n      : DEFAULT_ALLOWED_ATTR;\n    ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, 'ALLOWED_NAMESPACES')\n      ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString)\n      : DEFAULT_ALLOWED_NAMESPACES;\n    URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, 'ADD_URI_SAFE_ATTR')\n      ? addToSet(\n          clone(DEFAULT_URI_SAFE_ATTRIBUTES),\n          cfg.ADD_URI_SAFE_ATTR,\n          transformCaseFunc\n        )\n      : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS = objectHasOwnProperty(cfg, 'ADD_DATA_URI_TAGS')\n      ? addToSet(\n          clone(DEFAULT_DATA_URI_TAGS),\n          cfg.ADD_DATA_URI_TAGS,\n          transformCaseFunc\n        )\n      : DEFAULT_DATA_URI_TAGS;\n    FORBID_CONTENTS = objectHasOwnProperty(cfg, 'FORBID_CONTENTS')\n      ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc)\n      : DEFAULT_FORBID_CONTENTS;\n    FORBID_TAGS = objectHasOwnProperty(cfg, 'FORBID_TAGS')\n      ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc)\n      : clone({});\n    FORBID_ATTR = objectHasOwnProperty(cfg, 'FORBID_ATTR')\n      ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc)\n      : clone({});\n    USE_PROFILES = objectHasOwnProperty(cfg, 'USE_PROFILES')\n      ? cfg.USE_PROFILES\n      : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false; // Default true\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n    IS_ALLOWED_URI = cfg.ALLOWED_URI_REGEXP || EXPRESSIONS.IS_ALLOWED_URI;\n    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n    MATHML_TEXT_INTEGRATION_POINTS =\n      cfg.MATHML_TEXT_INTEGRATION_POINTS || MATHML_TEXT_INTEGRATION_POINTS;\n    HTML_INTEGRATION_POINTS =\n      cfg.HTML_INTEGRATION_POINTS || HTML_INTEGRATION_POINTS;\n\n    CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n    if (\n      cfg.CUSTOM_ELEMENT_HANDLING &&\n      isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)\n    ) {\n      CUSTOM_ELEMENT_HANDLING.tagNameCheck =\n        cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n    }\n\n    if (\n      cfg.CUSTOM_ELEMENT_HANDLING &&\n      isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)\n    ) {\n      CUSTOM_ELEMENT_HANDLING.attributeNameCheck =\n        cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n    }\n\n    if (\n      cfg.CUSTOM_ELEMENT_HANDLING &&\n      typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements ===\n        'boolean'\n    ) {\n      CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements =\n        cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n    }\n\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, TAGS.text);\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, TAGS.html);\n        addToSet(ALLOWED_ATTR, ATTRS.html);\n      }\n\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, TAGS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, TAGS.svgFilters);\n        addToSet(ALLOWED_ATTR, ATTRS.svg);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, TAGS.mathMl);\n        addToSet(ALLOWED_ATTR, ATTRS.mathMl);\n        addToSet(ALLOWED_ATTR, ATTRS.xml);\n      }\n    }\n\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (typeof cfg.ADD_TAGS === 'function') {\n        EXTRA_ELEMENT_HANDLING.tagCheck = cfg.ADD_TAGS;\n      } else {\n        if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n          ALLOWED_TAGS = clone(ALLOWED_TAGS);\n        }\n\n        addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n      }\n    }\n\n    if (cfg.ADD_ATTR) {\n      if (typeof cfg.ADD_ATTR === 'function') {\n        EXTRA_ELEMENT_HANDLING.attributeCheck = cfg.ADD_ATTR;\n      } else {\n        if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n          ALLOWED_ATTR = clone(ALLOWED_ATTR);\n        }\n\n        addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n      }\n    }\n\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n    }\n\n    if (cfg.FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n\n      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n    }\n\n    if (cfg.ADD_FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n\n      addToSet(FORBID_CONTENTS, cfg.ADD_FORBID_CONTENTS, transformCaseFunc);\n    }\n\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n\n    if (cfg.TRUSTED_TYPES_POLICY) {\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n        throw typeErrorCreate(\n          'TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.'\n        );\n      }\n\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n        throw typeErrorCreate(\n          'TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.'\n        );\n      }\n\n      // Overwrite existing TrustedTypes policy.\n      trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n\n      // Sign local variables required by `sanitize`.\n      emptyHTML = trustedTypesPolicy.createHTML('');\n    } else {\n      // Uninitialized policy, attempt to initialize the internal dompurify policy.\n      if (trustedTypesPolicy === undefined) {\n        trustedTypesPolicy = _createTrustedTypesPolicy(\n          trustedTypes,\n          currentScript\n        );\n      }\n\n      // If creating the internal policy succeeded sign internal variables.\n      if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n        emptyHTML = trustedTypesPolicy.createHTML('');\n      }\n    }\n\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n\n    CONFIG = cfg;\n  };\n\n  /* Keep track of all possible SVG and MathML tags\n   * so that we can perform the namespace checks\n   * correctly. */\n  const ALL_SVG_TAGS = addToSet({}, [\n    ...TAGS.svg,\n    ...TAGS.svgFilters,\n    ...TAGS.svgDisallowed,\n  ]);\n  const ALL_MATHML_TAGS = addToSet({}, [\n    ...TAGS.mathMl,\n    ...TAGS.mathMlDisallowed,\n  ]);\n\n  /**\n   * @param element a DOM element whose namespace is being checked\n   * @returns Return false if the element has a\n   *  namespace that a spec-compliant parser would never\n   *  return. Return true otherwise.\n   */\n  const _checkValidNamespace = function (element: Element): boolean {\n    let parent = getParentNode(element);\n\n    // In JSDOM, if we're inside shadow DOM, then parentNode\n    // can be null. We just simulate parent in this case.\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: NAMESPACE,\n        tagName: 'template',\n      };\n    }\n\n    const tagName = stringToLowerCase(element.tagName);\n    const parentTagName = stringToLowerCase(parent.tagName);\n\n    if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return false;\n    }\n\n    if (element.namespaceURI === SVG_NAMESPACE) {\n      // The only way to switch from HTML namespace to SVG\n      // is via <svg>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'svg';\n      }\n\n      // The only way to switch from MathML to SVG is via`\n      // svg if parent is either <annotation-xml> or MathML\n      // text integration points.\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return (\n          tagName === 'svg' &&\n          (parentTagName === 'annotation-xml' ||\n            MATHML_TEXT_INTEGRATION_POINTS[parentTagName])\n        );\n      }\n\n      // We only allow elements that are defined in SVG\n      // spec. All others are disallowed in SVG namespace.\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n\n    if (element.namespaceURI === MATHML_NAMESPACE) {\n      // The only way to switch from HTML namespace to MathML\n      // is via <math>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'math';\n      }\n\n      // The only way to switch from SVG to MathML is via\n      // <math> and HTML integration points\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n      }\n\n      // We only allow elements that are defined in MathML\n      // spec. All others are disallowed in MathML namespace.\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n\n    if (element.namespaceURI === HTML_NAMESPACE) {\n      // The only way to switch from SVG to HTML is via\n      // HTML integration points, and from MathML to HTML\n      // is via MathML text integration points\n      if (\n        parent.namespaceURI === SVG_NAMESPACE &&\n        !HTML_INTEGRATION_POINTS[parentTagName]\n      ) {\n        return false;\n      }\n\n      if (\n        parent.namespaceURI === MATHML_NAMESPACE &&\n        !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]\n      ) {\n        return false;\n      }\n\n      // We disallow tags that are specific for MathML\n      // or SVG and should never appear in HTML namespace\n      return (\n        !ALL_MATHML_TAGS[tagName] &&\n        (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName])\n      );\n    }\n\n    // For XHTML and XML documents that support custom namespaces\n    if (\n      PARSER_MEDIA_TYPE === 'application/xhtml+xml' &&\n      ALLOWED_NAMESPACES[element.namespaceURI]\n    ) {\n      return true;\n    }\n\n    // The code should never reach this place (this means\n    // that the element somehow got namespace that is not\n    // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n    // Return false just in case.\n    return false;\n  };\n\n  /**\n   * _forceRemove\n   *\n   * @param node a DOM node\n   */\n  const _forceRemove = function (node: Node): void {\n    arrayPush(DOMPurify.removed, { element: node });\n\n    try {\n      // eslint-disable-next-line unicorn/prefer-dom-node-remove\n      getParentNode(node).removeChild(node);\n    } catch (_) {\n      remove(node);\n    }\n  };\n\n  /**\n   * _removeAttribute\n   *\n   * @param name an Attribute name\n   * @param element a DOM node\n   */\n  const _removeAttribute = function (name: string, element: Element): void {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: element.getAttributeNode(name),\n        from: element,\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: element,\n      });\n    }\n\n    element.removeAttribute(name);\n\n    // We void attribute values for unremovable \"is\" attributes\n    if (name === 'is') {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(element);\n        } catch (_) {}\n      } else {\n        try {\n          element.setAttribute(name, '');\n        } catch (_) {}\n      }\n    }\n  };\n\n  /**\n   * _initDocument\n   *\n   * @param dirty - a string of dirty markup\n   * @return a DOM, filled with the dirty markup\n   */\n  const _initDocument = function (dirty: string): Document {\n    /* Create a HTML document */\n    let doc = null;\n    let leadingWhitespace = null;\n\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n\n    if (\n      PARSER_MEDIA_TYPE === 'application/xhtml+xml' &&\n      NAMESPACE === HTML_NAMESPACE\n    ) {\n      // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n      dirty =\n        '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' +\n        dirty +\n        '</body></html>';\n    }\n\n    const dirtyPayload = trustedTypesPolicy\n      ? trustedTypesPolicy.createHTML(dirty)\n      : dirty;\n    /*\n     * Use the DOMParser API by default, fallback later if needs be\n     * DOMParser not work for svg when has multiple root element.\n     */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      try {\n        doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n      } catch (_) {}\n    }\n\n    /* Use createHTMLDocument in case DOMParser is not available */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createDocument(NAMESPACE, 'template', null);\n      try {\n        doc.documentElement.innerHTML = IS_EMPTY_INPUT\n          ? emptyHTML\n          : dirtyPayload;\n      } catch (_) {\n        // Syntax error if dirtyPayload is invalid xml\n      }\n    }\n\n    const body = doc.body || doc.documentElement;\n\n    if (dirty && leadingWhitespace) {\n      body.insertBefore(\n        document.createTextNode(leadingWhitespace),\n        body.childNodes[0] || null\n      );\n    }\n\n    /* Work on whole document or just its body */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      return getElementsByTagName.call(\n        doc,\n        WHOLE_DOCUMENT ? 'html' : 'body'\n      )[0];\n    }\n\n    return WHOLE_DOCUMENT ? doc.documentElement : body;\n  };\n\n  /**\n   * Creates a NodeIterator object that you can use to traverse filtered lists of nodes or elements in a document.\n   *\n   * @param root The root element or node to start traversing on.\n   * @return The created NodeIterator\n   */\n  const _createNodeIterator = function (root: Node): NodeIterator {\n    return createNodeIterator.call(\n      root.ownerDocument || root,\n      root,\n      // eslint-disable-next-line no-bitwise\n      NodeFilter.SHOW_ELEMENT |\n        NodeFilter.SHOW_COMMENT |\n        NodeFilter.SHOW_TEXT |\n        NodeFilter.SHOW_PROCESSING_INSTRUCTION |\n        NodeFilter.SHOW_CDATA_SECTION,\n      null\n    );\n  };\n\n  /**\n   * _isClobbered\n   *\n   * @param element element to check for clobbering attacks\n   * @return true if clobbered, false if safe\n   */\n  const _isClobbered = function (element: Element): boolean {\n    return (\n      element instanceof HTMLFormElement &&\n      (typeof element.nodeName !== 'string' ||\n        typeof element.textContent !== 'string' ||\n        typeof element.removeChild !== 'function' ||\n        !(element.attributes instanceof NamedNodeMap) ||\n        typeof element.removeAttribute !== 'function' ||\n        typeof element.setAttribute !== 'function' ||\n        typeof element.namespaceURI !== 'string' ||\n        typeof element.insertBefore !== 'function' ||\n        typeof element.hasChildNodes !== 'function')\n    );\n  };\n\n  /**\n   * Checks whether the given object is a DOM node.\n   *\n   * @param value object to check whether it's a DOM node\n   * @return true is object is a DOM node\n   */\n  const _isNode = function (value: unknown): value is Node {\n    return typeof Node === 'function' && value instanceof Node;\n  };\n\n  function _executeHooks<T extends HookFunction>(\n    hooks: HookFunction[],\n    currentNode: Parameters<T>[0],\n    data: Parameters<T>[1]\n  ): void {\n    arrayForEach(hooks, (hook: T) => {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  }\n\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   * @param currentNode to check for permission to exist\n   * @return true if node was killed, false if left alive\n   */\n  const _sanitizeElements = function (currentNode: any): boolean {\n    let content = null;\n\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeElements, currentNode, null);\n\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Now let's check the element's type and name */\n    const tagName = transformCaseFunc(currentNode.nodeName);\n\n    /* Execute a hook if present */\n    _executeHooks(hooks.uponSanitizeElement, currentNode, {\n      tagName,\n      allowedTags: ALLOWED_TAGS,\n    });\n\n    /* Detect mXSS attempts abusing namespace confusion */\n    if (\n      SAFE_FOR_XML &&\n      currentNode.hasChildNodes() &&\n      !_isNode(currentNode.firstElementChild) &&\n      regExpTest(/<[/\\w!]/g, currentNode.innerHTML) &&\n      regExpTest(/<[/\\w!]/g, currentNode.textContent)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove any occurrence of processing instructions */\n    if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove any kind of possibly harmful comments */\n    if (\n      SAFE_FOR_XML &&\n      currentNode.nodeType === NODE_TYPE.comment &&\n      regExpTest(/<[/\\w]/g, currentNode.data)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Remove element if anything forbids its presence */\n    if (\n      !(\n        EXTRA_ELEMENT_HANDLING.tagCheck instanceof Function &&\n        EXTRA_ELEMENT_HANDLING.tagCheck(tagName)\n      ) &&\n      (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName])\n    ) {\n      /* Check if we have a custom element to handle */\n      if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {\n        if (\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp &&\n          regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)\n        ) {\n          return false;\n        }\n\n        if (\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function &&\n          CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)\n        ) {\n          return false;\n        }\n      }\n\n      /* Keep content except for bad-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n        const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n\n        if (childNodes && parentNode) {\n          const childCount = childNodes.length;\n\n          for (let i = childCount - 1; i >= 0; --i) {\n            const childClone = cloneNode(childNodes[i], true);\n            childClone.__removalCount = (currentNode.__removalCount || 0) + 1;\n            parentNode.insertBefore(childClone, getNextSibling(currentNode));\n          }\n        }\n      }\n\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Check whether element has a valid namespace */\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Make sure that older browsers don't get fallback-tag mXSS */\n    if (\n      (tagName === 'noscript' ||\n        tagName === 'noembed' ||\n        tagName === 'noframes') &&\n      regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)\n    ) {\n      _forceRemove(currentNode);\n      return true;\n    }\n\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], (expr: RegExp) => {\n        content = stringReplace(content, expr, ' ');\n      });\n\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, { element: currentNode.cloneNode() });\n        currentNode.textContent = content;\n      }\n    }\n\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeElements, currentNode, null);\n\n    return false;\n  };\n\n  /**\n   * _isValidAttribute\n   *\n   * @param lcTag Lowercase tag name of containing element.\n   * @param lcName Lowercase attribute name.\n   * @param value Attribute value.\n   * @return Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  const _isValidAttribute = function (\n    lcTag: string,\n    lcName: string,\n    value: string\n  ): boolean {\n    /* Make sure attribute cannot clobber */\n    if (\n      SANITIZE_DOM &&\n      (lcName === 'id' || lcName === 'name') &&\n      (value in document || value in formElement)\n    ) {\n      return false;\n    }\n\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (\n      ALLOW_DATA_ATTR &&\n      !FORBID_ATTR[lcName] &&\n      regExpTest(DATA_ATTR, lcName)\n    ) {\n      // This attribute is safe\n    } else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) {\n      // This attribute is safe\n      /* Check if ADD_ATTR function allows this attribute */\n    } else if (\n      EXTRA_ELEMENT_HANDLING.attributeCheck instanceof Function &&\n      EXTRA_ELEMENT_HANDLING.attributeCheck(lcName, lcTag)\n    ) {\n      // This attribute is safe\n      /* Otherwise, check the name is permitted */\n    } else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      if (\n        // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n        // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n        (_isBasicCustomElement(lcTag) &&\n          ((CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp &&\n            regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag)) ||\n            (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function &&\n              CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag))) &&\n          ((CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp &&\n            regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName)) ||\n            (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function &&\n              CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName, lcTag)))) ||\n        // Alternative, second condition checks if it's an `is`-attribute, AND\n        // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n        (lcName === 'is' &&\n          CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements &&\n          ((CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp &&\n            regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value)) ||\n            (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function &&\n              CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))))\n      ) {\n        // If user has supplied a regexp or function in CUSTOM_ELEMENT_HANDLING.tagNameCheck, we need to also allow derived custom elements using the same tagName test.\n        // Additionally, we need to allow attributes passing the CUSTOM_ELEMENT_HANDLING.attributeNameCheck user has configured, as custom elements can define these at their own discretion.\n      } else {\n        return false;\n      }\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) {\n      // This attribute is safe\n      /* Check no script, data or unknown possibly unsafe URI\n        unless we know URI values are safe for that attribute */\n    } else if (\n      regExpTest(IS_ALLOWED_URI, stringReplace(value, ATTR_WHITESPACE, ''))\n    ) {\n      // This attribute is safe\n      /* Keep image data URIs alive if src/xlink:href is allowed */\n      /* Further prevent gadget XSS for dynamically built script tags */\n    } else if (\n      (lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') &&\n      lcTag !== 'script' &&\n      stringIndexOf(value, 'data:') === 0 &&\n      DATA_URI_TAGS[lcTag]\n    ) {\n      // This attribute is safe\n      /* Allow unknown protocols: This provides support for links that\n        are handled by protocol handlers which may be unknown ahead of\n        time, e.g. fb:, spotify: */\n    } else if (\n      ALLOW_UNKNOWN_PROTOCOLS &&\n      !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))\n    ) {\n      // This attribute is safe\n      /* Check for binary attributes */\n    } else if (value) {\n      return false;\n    } else {\n      // Binary attributes are safe at this point\n      /* Anything else, presume unsafe, do not add it back */\n    }\n\n    return true;\n  };\n\n  /**\n   * _isBasicCustomElement\n   * checks if at least one dash is included in tagName, and it's not the first char\n   * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n   *\n   * @param tagName name of the tag of the node to sanitize\n   * @returns Returns true if the tag name meets the basic criteria for a custom element, otherwise false.\n   */\n  const _isBasicCustomElement = function (tagName: string): RegExpMatchArray {\n    return tagName !== 'annotation-xml' && stringMatch(tagName, CUSTOM_ELEMENT);\n  };\n\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param currentNode to sanitize\n   */\n  const _sanitizeAttributes = function (currentNode: Element): void {\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeAttributes, currentNode, null);\n\n    const { attributes } = currentNode;\n\n    /* Check if we have attributes; if not we might have a text node */\n    if (!attributes || _isClobbered(currentNode)) {\n      return;\n    }\n\n    const hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR,\n      forceKeepAttr: undefined,\n    };\n    let l = attributes.length;\n\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      const attr = attributes[l];\n      const { name, namespaceURI, value: attrValue } = attr;\n      const lcName = transformCaseFunc(name);\n\n      const initValue = attrValue;\n      let value = name === 'value' ? initValue : stringTrim(initValue);\n\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n      _executeHooks(hooks.uponSanitizeAttribute, currentNode, hookEvent);\n      value = hookEvent.attrValue;\n\n      /* Full DOM Clobbering protection via namespace isolation,\n       * Prefix id and name attributes with `user-content-`\n       */\n      if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n        // Remove the attribute with this value\n        _removeAttribute(name, currentNode);\n\n        // Prefix the value and later re-create the attribute with the sanitized value\n        value = SANITIZE_NAMED_PROPS_PREFIX + value;\n      }\n\n      /* Work around a security issue with comments inside attributes */\n      if (\n        SAFE_FOR_XML &&\n        regExpTest(/((--!?|])>)|<\\/(style|title|textarea)/i, value)\n      ) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Make sure we cannot easily use animated hrefs, even if animations are allowed */\n      if (lcName === 'attributename' && stringMatch(value, 'href')) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Did the hooks approve of the attribute? */\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Work around a security issue in jQuery 3.0 */\n      if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], (expr: RegExp) => {\n          value = stringReplace(value, expr, ' ');\n        });\n      }\n\n      /* Is `value` valid for this attribute? */\n      const lcTag = transformCaseFunc(currentNode.nodeName);\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n\n      /* Handle attributes that require Trusted Types */\n      if (\n        trustedTypesPolicy &&\n        typeof trustedTypes === 'object' &&\n        typeof trustedTypes.getAttributeType === 'function'\n      ) {\n        if (namespaceURI) {\n          /* Namespaces are not yet supported, see https://bugs.chromium.org/p/chromium/issues/detail?id=1305293 */\n        } else {\n          switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n            case 'TrustedHTML': {\n              value = trustedTypesPolicy.createHTML(value);\n              break;\n            }\n\n            case 'TrustedScriptURL': {\n              value = trustedTypesPolicy.createScriptURL(value);\n              break;\n            }\n\n            default: {\n              break;\n            }\n          }\n        }\n      }\n\n      /* Handle invalid data-* attribute set by try-catching it */\n      if (value !== initValue) {\n        try {\n          if (namespaceURI) {\n            currentNode.setAttributeNS(namespaceURI, name, value);\n          } else {\n            /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n            currentNode.setAttribute(name, value);\n          }\n\n          if (_isClobbered(currentNode)) {\n            _forceRemove(currentNode);\n          } else {\n            arrayPop(DOMPurify.removed);\n          }\n        } catch (_) {\n          _removeAttribute(name, currentNode);\n        }\n      }\n    }\n\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeAttributes, currentNode, null);\n  };\n\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param fragment to iterate over recursively\n   */\n  const _sanitizeShadowDOM = function (fragment: DocumentFragment): void {\n    let shadowNode = null;\n    const shadowIterator = _createNodeIterator(fragment);\n\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeShadowDOM, fragment, null);\n\n    while ((shadowNode = shadowIterator.nextNode())) {\n      /* Execute a hook if present */\n      _executeHooks(hooks.uponSanitizeShadowNode, shadowNode, null);\n\n      /* Sanitize tags and elements */\n      _sanitizeElements(shadowNode);\n\n      /* Check attributes next */\n      _sanitizeAttributes(shadowNode);\n\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n    }\n\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeShadowDOM, fragment, null);\n  };\n\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty, cfg = {}) {\n    let body = null;\n    let importedNode = null;\n    let currentNode = null;\n    let returnNode = null;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    IS_EMPTY_INPUT = !dirty;\n    if (IS_EMPTY_INPUT) {\n      dirty = '<!-->';\n    }\n\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      if (typeof dirty.toString === 'function') {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      } else {\n        throw typeErrorCreate('toString is not a function');\n      }\n    }\n\n    /* Return dirty HTML if DOMPurify cannot run */\n    if (!DOMPurify.isSupported) {\n      return dirty;\n    }\n\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n\n    /* Check if dirty is correctly typed for IN_PLACE */\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n\n    if (IN_PLACE) {\n      /* Do some early pre-sanitization to avoid unsafe root nodes */\n      if ((dirty as Node).nodeName) {\n        const tagName = transformCaseFunc((dirty as Node).nodeName);\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          throw typeErrorCreate(\n            'root node is forbidden and cannot be sanitized in-place'\n          );\n        }\n      }\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!---->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (\n        importedNode.nodeType === NODE_TYPE.element &&\n        importedNode.nodeName === 'BODY'\n      ) {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-dom-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (\n        !RETURN_DOM &&\n        !SAFE_FOR_TEMPLATES &&\n        !WHOLE_DOCUMENT &&\n        // eslint-disable-next-line unicorn/prefer-includes\n        dirty.indexOf('<') === -1\n      ) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE\n          ? trustedTypesPolicy.createHTML(dirty)\n          : dirty;\n      }\n\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n      }\n    }\n\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n\n    /* Get node iterator */\n    const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);\n\n    /* Now start iterating over the created document */\n    while ((currentNode = nodeIterator.nextNode())) {\n      /* Sanitize tags and elements */\n      _sanitizeElements(currentNode);\n\n      /* Check attributes next */\n      _sanitizeAttributes(currentNode);\n\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n    }\n\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n\n      if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n\n      return returnNode;\n    }\n\n    let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n\n    /* Serialize doctype if allowed */\n    if (\n      WHOLE_DOCUMENT &&\n      ALLOWED_TAGS['!doctype'] &&\n      body.ownerDocument &&\n      body.ownerDocument.doctype &&\n      body.ownerDocument.doctype.name &&\n      regExpTest(EXPRESSIONS.DOCTYPE_NAME, body.ownerDocument.doctype.name)\n    ) {\n      serializedHTML =\n        '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n    }\n\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], (expr: RegExp) => {\n        serializedHTML = stringReplace(serializedHTML, expr, ' ');\n      });\n    }\n\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE\n      ? trustedTypesPolicy.createHTML(serializedHTML)\n      : serializedHTML;\n  };\n\n  DOMPurify.setConfig = function (cfg = {}) {\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n\n    const lcTag = transformCaseFunc(tag);\n    const lcName = transformCaseFunc(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n\n  DOMPurify.addHook = function (\n    entryPoint: keyof HooksMap,\n    hookFunction: HookFunction\n  ) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n\n  DOMPurify.removeHook = function (\n    entryPoint: keyof HooksMap,\n    hookFunction: HookFunction\n  ) {\n    if (hookFunction !== undefined) {\n      const index = arrayLastIndexOf(hooks[entryPoint], hookFunction);\n\n      return index === -1\n        ? undefined\n        : arraySplice(hooks[entryPoint], index, 1)[0];\n    }\n\n    return arrayPop(hooks[entryPoint]);\n  };\n\n  DOMPurify.removeHooks = function (entryPoint: keyof HooksMap) {\n    hooks[entryPoint] = [];\n  };\n\n  DOMPurify.removeAllHooks = function () {\n    hooks = _createHooksMap();\n  };\n\n  return DOMPurify;\n}\n\nexport default createDOMPurify();\n\nexport interface DOMPurify {\n  /**\n   * Creates a DOMPurify instance using the given window-like object. Defaults to `window`.\n   */\n  (root?: WindowLike): DOMPurify;\n\n  /**\n   * Version label, exposed for easier checks\n   * if DOMPurify is up to date or not\n   */\n  version: string;\n\n  /**\n   * Array of elements that DOMPurify removed during sanitation.\n   * Empty if nothing was removed.\n   */\n  removed: Array<RemovedElement | RemovedAttribute>;\n\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  isSupported: boolean;\n\n  /**\n   * Set the configuration once.\n   *\n   * @param cfg configuration object\n   */\n  setConfig(cfg?: Config): void;\n\n  /**\n   * Removes the configuration.\n   */\n  clearConfig(): void;\n\n  /**\n   * Provides core sanitation functionality.\n   *\n   * @param dirty string or DOM node\n   * @param cfg object\n   * @returns Sanitized TrustedHTML.\n   */\n  sanitize(\n    dirty: string | Node,\n    cfg: Config & { RETURN_TRUSTED_TYPE: true }\n  ): TrustedHTML;\n\n  /**\n   * Provides core sanitation functionality.\n   *\n   * @param dirty DOM node\n   * @param cfg object\n   * @returns Sanitized DOM node.\n   */\n  sanitize(dirty: Node, cfg: Config & { IN_PLACE: true }): Node;\n\n  /**\n   * Provides core sanitation functionality.\n   *\n   * @param dirty string or DOM node\n   * @param cfg object\n   * @returns Sanitized DOM node.\n   */\n  sanitize(dirty: string | Node, cfg: Config & { RETURN_DOM: true }): Node;\n\n  /**\n   * Provides core sanitation functionality.\n   *\n   * @param dirty string or DOM node\n   * @param cfg object\n   * @returns Sanitized document fragment.\n   */\n  sanitize(\n    dirty: string | Node,\n    cfg: Config & { RETURN_DOM_FRAGMENT: true }\n  ): DocumentFragment;\n\n  /**\n   * Provides core sanitation functionality.\n   *\n   * @param dirty string or DOM node\n   * @param cfg object\n   * @returns Sanitized string.\n   */\n  sanitize(dirty: string | Node, cfg?: Config): string;\n\n  /**\n   * Checks if an attribute value is valid.\n   * Uses last set config, if any. Otherwise, uses config defaults.\n   *\n   * @param tag Tag name of containing element.\n   * @param attr Attribute name.\n   * @param value Attribute value.\n   * @returns Returns true if `value` is valid. Otherwise, returns false.\n   */\n  isValidAttribute(tag: string, attr: string, value: string): boolean;\n\n  /**\n   * Adds a DOMPurify hook.\n   *\n   * @param entryPoint entry point for the hook to add\n   * @param hookFunction function to execute\n   */\n  addHook(entryPoint: BasicHookName, hookFunction: NodeHook): void;\n\n  /**\n   * Adds a DOMPurify hook.\n   *\n   * @param entryPoint entry point for the hook to add\n   * @param hookFunction function to execute\n   */\n  addHook(entryPoint: ElementHookName, hookFunction: ElementHook): void;\n\n  /**\n   * Adds a DOMPurify hook.\n   *\n   * @param entryPoint entry point for the hook to add\n   * @param hookFunction function to execute\n   */\n  addHook(\n    entryPoint: DocumentFragmentHookName,\n    hookFunction: DocumentFragmentHook\n  ): void;\n\n  /**\n   * Adds a DOMPurify hook.\n   *\n   * @param entryPoint entry point for the hook to add\n   * @param hookFunction function to execute\n   */\n  addHook(\n    entryPoint: 'uponSanitizeElement',\n    hookFunction: UponSanitizeElementHook\n  ): void;\n\n  /**\n   * Adds a DOMPurify hook.\n   *\n   * @param entryPoint entry point for the hook to add\n   * @param hookFunction function to execute\n   */\n  addHook(\n    entryPoint: 'uponSanitizeAttribute',\n    hookFunction: UponSanitizeAttributeHook\n  ): void;\n\n  /**\n   * Remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if hook not specified)\n   *\n   * @param entryPoint entry point for the hook to remove\n   * @param hookFunction optional specific hook to remove\n   * @returns removed hook\n   */\n  removeHook(\n    entryPoint: BasicHookName,\n    hookFunction?: NodeHook\n  ): NodeHook | undefined;\n\n  /**\n   * Remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if hook not specified)\n   *\n   * @param entryPoint entry point for the hook to remove\n   * @param hookFunction optional specific hook to remove\n   * @returns removed hook\n   */\n  removeHook(\n    entryPoint: ElementHookName,\n    hookFunction?: ElementHook\n  ): ElementHook | undefined;\n\n  /**\n   * Remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if hook not specified)\n   *\n   * @param entryPoint entry point for the hook to remove\n   * @param hookFunction optional specific hook to remove\n   * @returns removed hook\n   */\n  removeHook(\n    entryPoint: DocumentFragmentHookName,\n    hookFunction?: DocumentFragmentHook\n  ): DocumentFragmentHook | undefined;\n\n  /**\n   * Remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if hook not specified)\n   *\n   * @param entryPoint entry point for the hook to remove\n   * @param hookFunction optional specific hook to remove\n   * @returns removed hook\n   */\n  removeHook(\n    entryPoint: 'uponSanitizeElement',\n    hookFunction?: UponSanitizeElementHook\n  ): UponSanitizeElementHook | undefined;\n\n  /**\n   * Remove a DOMPurify hook at a given entryPoint\n   * (pops it from the stack of hooks if hook not specified)\n   *\n   * @param entryPoint entry point for the hook to remove\n   * @param hookFunction optional specific hook to remove\n   * @returns removed hook\n   */\n  removeHook(\n    entryPoint: 'uponSanitizeAttribute',\n    hookFunction?: UponSanitizeAttributeHook\n  ): UponSanitizeAttributeHook | undefined;\n\n  /**\n   * Removes all DOMPurify hooks at a given entryPoint\n   *\n   * @param entryPoint entry point for the hooks to remove\n   */\n  removeHooks(entryPoint: HookName): void;\n\n  /**\n   * Removes all DOMPurify hooks.\n   */\n  removeAllHooks(): void;\n}\n\n/**\n * An element removed by DOMPurify.\n */\nexport interface RemovedElement {\n  /**\n   * The element that was removed.\n   */\n  element: Node;\n}\n\n/**\n * An element removed by DOMPurify.\n */\nexport interface RemovedAttribute {\n  /**\n   * The attribute that was removed.\n   */\n  attribute: Attr | null;\n\n  /**\n   * The element that the attribute was removed.\n   */\n  from: Node;\n}\n\ntype BasicHookName =\n  | 'beforeSanitizeElements'\n  | 'afterSanitizeElements'\n  | 'uponSanitizeShadowNode';\ntype ElementHookName = 'beforeSanitizeAttributes' | 'afterSanitizeAttributes';\ntype DocumentFragmentHookName =\n  | 'beforeSanitizeShadowDOM'\n  | 'afterSanitizeShadowDOM';\ntype UponSanitizeElementHookName = 'uponSanitizeElement';\ntype UponSanitizeAttributeHookName = 'uponSanitizeAttribute';\n\ninterface HooksMap {\n  beforeSanitizeElements: NodeHook[];\n  afterSanitizeElements: NodeHook[];\n  beforeSanitizeShadowDOM: DocumentFragmentHook[];\n  uponSanitizeShadowNode: NodeHook[];\n  afterSanitizeShadowDOM: DocumentFragmentHook[];\n  beforeSanitizeAttributes: ElementHook[];\n  afterSanitizeAttributes: ElementHook[];\n  uponSanitizeElement: UponSanitizeElementHook[];\n  uponSanitizeAttribute: UponSanitizeAttributeHook[];\n}\n\ntype ArrayElement<T> = T extends Array<infer U> ? U : never;\n\ntype HookFunction = ArrayElement<HooksMap[keyof HooksMap]>;\n\nexport type HookName =\n  | BasicHookName\n  | ElementHookName\n  | DocumentFragmentHookName\n  | UponSanitizeElementHookName\n  | UponSanitizeAttributeHookName;\n\nexport type NodeHook = (\n  this: DOMPurify,\n  currentNode: Node,\n  hookEvent: null,\n  config: Config\n) => void;\n\nexport type ElementHook = (\n  this: DOMPurify,\n  currentNode: Element,\n  hookEvent: null,\n  config: Config\n) => void;\n\nexport type DocumentFragmentHook = (\n  this: DOMPurify,\n  currentNode: DocumentFragment,\n  hookEvent: null,\n  config: Config\n) => void;\n\nexport type UponSanitizeElementHook = (\n  this: DOMPurify,\n  currentNode: Node,\n  hookEvent: UponSanitizeElementHookEvent,\n  config: Config\n) => void;\n\nexport type UponSanitizeAttributeHook = (\n  this: DOMPurify,\n  currentNode: Element,\n  hookEvent: UponSanitizeAttributeHookEvent,\n  config: Config\n) => void;\n\nexport interface UponSanitizeElementHookEvent {\n  tagName: string;\n  allowedTags: Record<string, boolean>;\n}\n\nexport interface UponSanitizeAttributeHookEvent {\n  attrName: string;\n  attrValue: string;\n  keepAttr: boolean;\n  allowedAttributes: Record<string, boolean>;\n  forceKeepAttr: boolean | undefined;\n}\n\n/**\n * A `Window`-like object containing the properties and types that DOMPurify requires.\n */\nexport type WindowLike = Pick<\n  typeof globalThis,\n  | 'DocumentFragment'\n  | 'HTMLTemplateElement'\n  | 'Node'\n  | 'Element'\n  | 'NodeFilter'\n  | 'NamedNodeMap'\n  | 'HTMLFormElement'\n  | 'DOMParser'\n> & {\n  document?: Document;\n  MozNamedAttrMap?: typeof window.NamedNodeMap;\n} & Pick<TrustedTypesWindow, 'trustedTypes'>;\n", "/**\n * Gets the original marked default options.\n */\nexport function _getDefaults() {\n    return {\n        async: false,\n        breaks: false,\n        extensions: null,\n        gfm: true,\n        hooks: null,\n        pedantic: false,\n        renderer: null,\n        silent: false,\n        tokenizer: null,\n        walkTokens: null,\n    };\n}\nexport let _defaults = _getDefaults();\nexport function changeDefaults(newDefaults) {\n    _defaults = newDefaults;\n}\n", "const noopTest = { exec: () => null };\nfunction edit(regex, opt = '') {\n    let source = typeof regex === 'string' ? regex : regex.source;\n    const obj = {\n        replace: (name, val) => {\n            let valSource = typeof val === 'string' ? val : val.source;\n            valSource = valSource.replace(other.caret, '$1');\n            source = source.replace(name, valSource);\n            return obj;\n        },\n        getRegex: () => {\n            return new RegExp(source, opt);\n        },\n    };\n    return obj;\n}\nexport const other = {\n    codeRemoveIndent: /^(?: {1,4}| {0,3}\\t)/gm,\n    outputLinkReplace: /\\\\([\\[\\]])/g,\n    indentCodeCompensation: /^(\\s+)(?:```)/,\n    beginningSpace: /^\\s+/,\n    endingHash: /#$/,\n    startingSpaceChar: /^ /,\n    endingSpaceChar: / $/,\n    nonSpaceChar: /[^ ]/,\n    newLineCharGlobal: /\\n/g,\n    tabCharGlobal: /\\t/g,\n    multipleSpaceGlobal: /\\s+/g,\n    blankLine: /^[ \\t]*$/,\n    doubleBlankLine: /\\n[ \\t]*\\n[ \\t]*$/,\n    blockquoteStart: /^ {0,3}>/,\n    blockquoteSetextReplace: /\\n {0,3}((?:=+|-+) *)(?=\\n|$)/g,\n    blockquoteSetextReplace2: /^ {0,3}>[ \\t]?/gm,\n    listReplaceTabs: /^\\t+/,\n    listReplaceNesting: /^ {1,4}(?=( {4})*[^ ])/g,\n    listIsTask: /^\\[[ xX]\\] /,\n    listReplaceTask: /^\\[[ xX]\\] +/,\n    anyLine: /\\n.*\\n/,\n    hrefBrackets: /^<(.*)>$/,\n    tableDelimiter: /[:|]/,\n    tableAlignChars: /^\\||\\| *$/g,\n    tableRowBlankLine: /\\n[ \\t]*$/,\n    tableAlignRight: /^ *-+: *$/,\n    tableAlignCenter: /^ *:-+: *$/,\n    tableAlignLeft: /^ *:-+ *$/,\n    startATag: /^<a /i,\n    endATag: /^<\\/a>/i,\n    startPreScriptTag: /^<(pre|code|kbd|script)(\\s|>)/i,\n    endPreScriptTag: /^<\\/(pre|code|kbd|script)(\\s|>)/i,\n    startAngleBracket: /^</,\n    endAngleBracket: />$/,\n    pedanticHrefTitle: /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/,\n    unicodeAlphaNumeric: /[\\p{L}\\p{N}]/u,\n    escapeTest: /[&<>\"']/,\n    escapeReplace: /[&<>\"']/g,\n    escapeTestNoEncode: /[<>\"']|&(?!(#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);)/,\n    escapeReplaceNoEncode: /[<>\"']|&(?!(#\\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\\w+);)/g,\n    unescapeTest: /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig,\n    caret: /(^|[^\\[])\\^/g,\n    percentDecode: /%25/g,\n    findPipe: /\\|/g,\n    splitPipe: / \\|/,\n    slashPipe: /\\\\\\|/g,\n    carriageReturn: /\\r\\n|\\r/g,\n    spaceLine: /^ +$/gm,\n    notSpaceStart: /^\\S*/,\n    endingNewline: /\\n$/,\n    listItemRegex: (bull) => new RegExp(`^( {0,3}${bull})((?:[\\t ][^\\\\n]*)?(?:\\\\n|$))`),\n    nextBulletRegex: (indent) => new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\\\d{1,9}[.)])((?:[ \\t][^\\\\n]*)?(?:\\\\n|$))`),\n    hrRegex: (indent) => new RegExp(`^ {0,${Math.min(3, indent - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)`),\n    fencesBeginRegex: (indent) => new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:\\`\\`\\`|~~~)`),\n    headingBeginRegex: (indent) => new RegExp(`^ {0,${Math.min(3, indent - 1)}}#`),\n    htmlBeginRegex: (indent) => new RegExp(`^ {0,${Math.min(3, indent - 1)}}<(?:[a-z].*>|!--)`, 'i'),\n};\n/**\n * Block-Level Grammar\n */\nconst newline = /^(?:[ \\t]*(?:\\n|$))+/;\nconst blockCode = /^((?: {4}| {0,3}\\t)[^\\n]+(?:\\n(?:[ \\t]*(?:\\n|$))*)?)+/;\nconst fences = /^ {0,3}(`{3,}(?=[^`\\n]*(?:\\n|$))|~{3,})([^\\n]*)(?:\\n|$)(?:|([\\s\\S]*?)(?:\\n|$))(?: {0,3}\\1[~`]* *(?=\\n|$)|$)/;\nconst hr = /^ {0,3}((?:-[\\t ]*){3,}|(?:_[ \\t]*){3,}|(?:\\*[ \\t]*){3,})(?:\\n+|$)/;\nconst heading = /^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/;\nconst bullet = /(?:[*+-]|\\d{1,9}[.)])/;\nconst lheadingCore = /^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\\n(?!\\s*?\\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/;\nconst lheading = edit(lheadingCore)\n    .replace(/bull/g, bullet) // lists can interrupt\n    .replace(/blockCode/g, /(?: {4}| {0,3}\\t)/) // indented code blocks can interrupt\n    .replace(/fences/g, / {0,3}(?:`{3,}|~{3,})/) // fenced code blocks can interrupt\n    .replace(/blockquote/g, / {0,3}>/) // blockquote can interrupt\n    .replace(/heading/g, / {0,3}#{1,6}/) // ATX heading can interrupt\n    .replace(/html/g, / {0,3}<[^\\n>]+>\\n/) // block html can interrupt\n    .replace(/\\|table/g, '') // table not in commonmark\n    .getRegex();\nconst lheadingGfm = edit(lheadingCore)\n    .replace(/bull/g, bullet) // lists can interrupt\n    .replace(/blockCode/g, /(?: {4}| {0,3}\\t)/) // indented code blocks can interrupt\n    .replace(/fences/g, / {0,3}(?:`{3,}|~{3,})/) // fenced code blocks can interrupt\n    .replace(/blockquote/g, / {0,3}>/) // blockquote can interrupt\n    .replace(/heading/g, / {0,3}#{1,6}/) // ATX heading can interrupt\n    .replace(/html/g, / {0,3}<[^\\n>]+>\\n/) // block html can interrupt\n    .replace(/table/g, / {0,3}\\|?(?:[:\\- ]*\\|)+[\\:\\- ]*\\n/) // table can interrupt\n    .getRegex();\nconst _paragraph = /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\\n)[^\\n]+)*)/;\nconst blockText = /^[^\\n]+/;\nconst _blockLabel = /(?!\\s*\\])(?:\\\\.|[^\\[\\]\\\\])+/;\nconst def = edit(/^ {0,3}\\[(label)\\]: *(?:\\n[ \\t]*)?([^<\\s][^\\s]*|<.*?>)(?:(?: +(?:\\n[ \\t]*)?| *\\n[ \\t]*)(title))? *(?:\\n+|$)/)\n    .replace('label', _blockLabel)\n    .replace('title', /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/)\n    .getRegex();\nconst list = edit(/^( {0,3}bull)([ \\t][^\\n]+?)?(?:\\n|$)/)\n    .replace(/bull/g, bullet)\n    .getRegex();\nconst _tag = 'address|article|aside|base|basefont|blockquote|body|caption'\n    + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption'\n    + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe'\n    + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option'\n    + '|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title'\n    + '|tr|track|ul';\nconst _comment = /<!--(?:-?>|[\\s\\S]*?(?:-->|$))/;\nconst html = edit('^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n[ \\t]*)+\\\\n|$)' // (6)\n    + '|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n[ \\t]*)+\\\\n|$)' // (7) open tag\n    + '|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n[ \\t]*)+\\\\n|$)' // (7) closing tag\n    + ')', 'i')\n    .replace('comment', _comment)\n    .replace('tag', _tag)\n    .replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/)\n    .getRegex();\nconst paragraph = edit(_paragraph)\n    .replace('hr', hr)\n    .replace('heading', ' {0,3}#{1,6}(?:\\\\s|$)')\n    .replace('|lheading', '') // setext headings don't interrupt commonmark paragraphs\n    .replace('|table', '')\n    .replace('blockquote', ' {0,3}>')\n    .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n    .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n    .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n    .replace('tag', _tag) // pars can be interrupted by type (6) html blocks\n    .getRegex();\nconst blockquote = edit(/^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/)\n    .replace('paragraph', paragraph)\n    .getRegex();\n/**\n * Normal Block Grammar\n */\nconst blockNormal = {\n    blockquote,\n    code: blockCode,\n    def,\n    fences,\n    heading,\n    hr,\n    html,\n    lheading,\n    list,\n    newline,\n    paragraph,\n    table: noopTest,\n    text: blockText,\n};\n/**\n * GFM Block Grammar\n */\nconst gfmTable = edit('^ *([^\\\\n ].*)\\\\n' // Header\n    + ' {0,3}((?:\\\\| *)?:?-+:? *(?:\\\\| *:?-+:? *)*(?:\\\\| *)?)' // Align\n    + '(?:\\\\n((?:(?! *\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)') // Cells\n    .replace('hr', hr)\n    .replace('heading', ' {0,3}#{1,6}(?:\\\\s|$)')\n    .replace('blockquote', ' {0,3}>')\n    .replace('code', '(?: {4}| {0,3}\\t)[^\\\\n]')\n    .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n    .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n    .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n    .replace('tag', _tag) // tables can be interrupted by type (6) html blocks\n    .getRegex();\nconst blockGfm = {\n    ...blockNormal,\n    lheading: lheadingGfm,\n    table: gfmTable,\n    paragraph: edit(_paragraph)\n        .replace('hr', hr)\n        .replace('heading', ' {0,3}#{1,6}(?:\\\\s|$)')\n        .replace('|lheading', '') // setext headings don't interrupt commonmark paragraphs\n        .replace('table', gfmTable) // interrupt paragraphs with table\n        .replace('blockquote', ' {0,3}>')\n        .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n        .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n        .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n        .replace('tag', _tag) // pars can be interrupted by type (6) html blocks\n        .getRegex(),\n};\n/**\n * Pedantic grammar (original John Gruber's loose markdown specification)\n */\nconst blockPedantic = {\n    ...blockNormal,\n    html: edit('^ *(?:comment *(?:\\\\n|\\\\s*$)'\n        + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n        + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))')\n        .replace('comment', _comment)\n        .replace(/tag/g, '(?!(?:'\n        + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub'\n        + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)'\n        + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b')\n        .getRegex(),\n    def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n    heading: /^(#{1,6})(.*)(?:\\n+|$)/,\n    fences: noopTest, // fences not supported\n    lheading: /^(.+?)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n    paragraph: edit(_paragraph)\n        .replace('hr', hr)\n        .replace('heading', ' *#{1,6} *[^\\n]')\n        .replace('lheading', lheading)\n        .replace('|table', '')\n        .replace('blockquote', ' {0,3}>')\n        .replace('|fences', '')\n        .replace('|list', '')\n        .replace('|html', '')\n        .replace('|tag', '')\n        .getRegex(),\n};\n/**\n * Inline-Level Grammar\n */\nconst escape = /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/;\nconst inlineCode = /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/;\nconst br = /^( {2,}|\\\\)\\n(?!\\s*$)/;\nconst inlineText = /^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/;\n// list of unicode punctuation marks, plus any missing characters from CommonMark spec\nconst _punctuation = /[\\p{P}\\p{S}]/u;\nconst _punctuationOrSpace = /[\\s\\p{P}\\p{S}]/u;\nconst _notPunctuationOrSpace = /[^\\s\\p{P}\\p{S}]/u;\nconst punctuation = edit(/^((?![*_])punctSpace)/, 'u')\n    .replace(/punctSpace/g, _punctuationOrSpace).getRegex();\n// GFM allows ~ inside strong and em for strikethrough\nconst _punctuationGfmStrongEm = /(?!~)[\\p{P}\\p{S}]/u;\nconst _punctuationOrSpaceGfmStrongEm = /(?!~)[\\s\\p{P}\\p{S}]/u;\nconst _notPunctuationOrSpaceGfmStrongEm = /(?:[^\\s\\p{P}\\p{S}]|~)/u;\n// sequences em should skip over [title](link), `code`, <html>\nconst blockSkip = /\\[[^[\\]]*?\\]\\((?:\\\\.|[^\\\\\\(\\)]|\\((?:\\\\.|[^\\\\\\(\\)])*\\))*\\)|`[^`]*?`|<[^<>]*?>/g;\nconst emStrongLDelimCore = /^(?:\\*+(?:((?!\\*)punct)|[^\\s*]))|^_+(?:((?!_)punct)|([^\\s_]))/;\nconst emStrongLDelim = edit(emStrongLDelimCore, 'u')\n    .replace(/punct/g, _punctuation)\n    .getRegex();\nconst emStrongLDelimGfm = edit(emStrongLDelimCore, 'u')\n    .replace(/punct/g, _punctuationGfmStrongEm)\n    .getRegex();\nconst emStrongRDelimAstCore = '^[^_*]*?__[^_*]*?\\\\*[^_*]*?(?=__)' // Skip orphan inside strong\n    + '|[^*]+(?=[^*])' // Consume to delim\n    + '|(?!\\\\*)punct(\\\\*+)(?=[\\\\s]|$)' // (1) #*** can only be a Right Delimiter\n    + '|notPunctSpace(\\\\*+)(?!\\\\*)(?=punctSpace|$)' // (2) a***#, a*** can only be a Right Delimiter\n    + '|(?!\\\\*)punctSpace(\\\\*+)(?=notPunctSpace)' // (3) #***a, ***a can only be Left Delimiter\n    + '|[\\\\s](\\\\*+)(?!\\\\*)(?=punct)' // (4) ***# can only be Left Delimiter\n    + '|(?!\\\\*)punct(\\\\*+)(?!\\\\*)(?=punct)' // (5) #***# can be either Left or Right Delimiter\n    + '|notPunctSpace(\\\\*+)(?=notPunctSpace)'; // (6) a***a can be either Left or Right Delimiter\nconst emStrongRDelimAst = edit(emStrongRDelimAstCore, 'gu')\n    .replace(/notPunctSpace/g, _notPunctuationOrSpace)\n    .replace(/punctSpace/g, _punctuationOrSpace)\n    .replace(/punct/g, _punctuation)\n    .getRegex();\nconst emStrongRDelimAstGfm = edit(emStrongRDelimAstCore, 'gu')\n    .replace(/notPunctSpace/g, _notPunctuationOrSpaceGfmStrongEm)\n    .replace(/punctSpace/g, _punctuationOrSpaceGfmStrongEm)\n    .replace(/punct/g, _punctuationGfmStrongEm)\n    .getRegex();\n// (6) Not allowed for _\nconst emStrongRDelimUnd = edit('^[^_*]*?\\\\*\\\\*[^_*]*?_[^_*]*?(?=\\\\*\\\\*)' // Skip orphan inside strong\n    + '|[^_]+(?=[^_])' // Consume to delim\n    + '|(?!_)punct(_+)(?=[\\\\s]|$)' // (1) #___ can only be a Right Delimiter\n    + '|notPunctSpace(_+)(?!_)(?=punctSpace|$)' // (2) a___#, a___ can only be a Right Delimiter\n    + '|(?!_)punctSpace(_+)(?=notPunctSpace)' // (3) #___a, ___a can only be Left Delimiter\n    + '|[\\\\s](_+)(?!_)(?=punct)' // (4) ___# can only be Left Delimiter\n    + '|(?!_)punct(_+)(?!_)(?=punct)', 'gu') // (5) #___# can be either Left or Right Delimiter\n    .replace(/notPunctSpace/g, _notPunctuationOrSpace)\n    .replace(/punctSpace/g, _punctuationOrSpace)\n    .replace(/punct/g, _punctuation)\n    .getRegex();\nconst anyPunctuation = edit(/\\\\(punct)/, 'gu')\n    .replace(/punct/g, _punctuation)\n    .getRegex();\nconst autolink = edit(/^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/)\n    .replace('scheme', /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/)\n    .replace('email', /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/)\n    .getRegex();\nconst _inlineComment = edit(_comment).replace('(?:-->|$)', '-->').getRegex();\nconst tag = edit('^comment'\n    + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>') // CDATA section\n    .replace('comment', _inlineComment)\n    .replace('attribute', /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/)\n    .getRegex();\nconst _inlineLabel = /(?:\\[(?:\\\\.|[^\\[\\]\\\\])*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\nconst link = edit(/^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/)\n    .replace('label', _inlineLabel)\n    .replace('href', /<(?:\\\\.|[^\\n<>\\\\])+>|[^\\s\\x00-\\x1f]*/)\n    .replace('title', /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/)\n    .getRegex();\nconst reflink = edit(/^!?\\[(label)\\]\\[(ref)\\]/)\n    .replace('label', _inlineLabel)\n    .replace('ref', _blockLabel)\n    .getRegex();\nconst nolink = edit(/^!?\\[(ref)\\](?:\\[\\])?/)\n    .replace('ref', _blockLabel)\n    .getRegex();\nconst reflinkSearch = edit('reflink|nolink(?!\\\\()', 'g')\n    .replace('reflink', reflink)\n    .replace('nolink', nolink)\n    .getRegex();\n/**\n * Normal Inline Grammar\n */\nconst inlineNormal = {\n    _backpedal: noopTest, // only used for GFM url\n    anyPunctuation,\n    autolink,\n    blockSkip,\n    br,\n    code: inlineCode,\n    del: noopTest,\n    emStrongLDelim,\n    emStrongRDelimAst,\n    emStrongRDelimUnd,\n    escape,\n    link,\n    nolink,\n    punctuation,\n    reflink,\n    reflinkSearch,\n    tag,\n    text: inlineText,\n    url: noopTest,\n};\n/**\n * Pedantic Inline Grammar\n */\nconst inlinePedantic = {\n    ...inlineNormal,\n    link: edit(/^!?\\[(label)\\]\\((.*?)\\)/)\n        .replace('label', _inlineLabel)\n        .getRegex(),\n    reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/)\n        .replace('label', _inlineLabel)\n        .getRegex(),\n};\n/**\n * GFM Inline Grammar\n */\nconst inlineGfm = {\n    ...inlineNormal,\n    emStrongRDelimAst: emStrongRDelimAstGfm,\n    emStrongLDelim: emStrongLDelimGfm,\n    url: edit(/^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/, 'i')\n        .replace('email', /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/)\n        .getRegex(),\n    _backpedal: /(?:[^?!.,:;*_'\"~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'\"~)]+(?!$))+/,\n    del: /^(~~?)(?=[^\\s~])((?:\\\\.|[^\\\\])*?(?:\\\\.|[^\\s~\\\\]))\\1(?=[^~]|$)/,\n    text: /^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/,\n};\n/**\n * GFM + Line Breaks Inline Grammar\n */\nconst inlineBreaks = {\n    ...inlineGfm,\n    br: edit(br).replace('{2,}', '*').getRegex(),\n    text: edit(inlineGfm.text)\n        .replace('\\\\b_', '\\\\b_| {2,}\\\\n')\n        .replace(/\\{2,\\}/g, '*')\n        .getRegex(),\n};\n/**\n * exports\n */\nexport const block = {\n    normal: blockNormal,\n    gfm: blockGfm,\n    pedantic: blockPedantic,\n};\nexport const inline = {\n    normal: inlineNormal,\n    gfm: inlineGfm,\n    breaks: inlineBreaks,\n    pedantic: inlinePedantic,\n};\n", "import { other } from './rules.ts';\n/**\n * Helpers\n */\nconst escapeReplacements = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n};\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\nexport function escape(html, encode) {\n    if (encode) {\n        if (other.escapeTest.test(html)) {\n            return html.replace(other.escapeReplace, getEscapeReplacement);\n        }\n    }\n    else {\n        if (other.escapeTestNoEncode.test(html)) {\n            return html.replace(other.escapeReplaceNoEncode, getEscapeReplacement);\n        }\n    }\n    return html;\n}\nexport function unescape(html) {\n    // explicitly match decimal, hex, and named HTML entities\n    return html.replace(other.unescapeTest, (_, n) => {\n        n = n.toLowerCase();\n        if (n === 'colon')\n            return ':';\n        if (n.charAt(0) === '#') {\n            return n.charAt(1) === 'x'\n                ? String.fromCharCode(parseInt(n.substring(2), 16))\n                : String.fromCharCode(+n.substring(1));\n        }\n        return '';\n    });\n}\nexport function cleanUrl(href) {\n    try {\n        href = encodeURI(href).replace(other.percentDecode, '%');\n    }\n    catch {\n        return null;\n    }\n    return href;\n}\nexport function splitCells(tableRow, count) {\n    // ensure that every cell-delimiting pipe has a space\n    // before it to distinguish it from an escaped pipe\n    const row = tableRow.replace(other.findPipe, (match, offset, str) => {\n        let escaped = false;\n        let curr = offset;\n        while (--curr >= 0 && str[curr] === '\\\\')\n            escaped = !escaped;\n        if (escaped) {\n            // odd number of slashes means | is escaped\n            // so we leave it alone\n            return '|';\n        }\n        else {\n            // add space before unescaped |\n            return ' |';\n        }\n    }), cells = row.split(other.splitPipe);\n    let i = 0;\n    // First/last cell in a row cannot be empty if it has no leading/trailing pipe\n    if (!cells[0].trim()) {\n        cells.shift();\n    }\n    if (cells.length > 0 && !cells.at(-1)?.trim()) {\n        cells.pop();\n    }\n    if (count) {\n        if (cells.length > count) {\n            cells.splice(count);\n        }\n        else {\n            while (cells.length < count)\n                cells.push('');\n        }\n    }\n    for (; i < cells.length; i++) {\n        // leading or trailing whitespace is ignored per the gfm spec\n        cells[i] = cells[i].trim().replace(other.slashPipe, '|');\n    }\n    return cells;\n}\n/**\n * Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n * /c*$/ is vulnerable to REDOS.\n *\n * @param str\n * @param c\n * @param invert Remove suffix of non-c chars instead. Default falsey.\n */\nexport function rtrim(str, c, invert) {\n    const l = str.length;\n    if (l === 0) {\n        return '';\n    }\n    // Length of suffix matching the invert condition.\n    let suffLen = 0;\n    // Step left until we fail to match the invert condition.\n    while (suffLen < l) {\n        const currChar = str.charAt(l - suffLen - 1);\n        if (currChar === c && !invert) {\n            suffLen++;\n        }\n        else if (currChar !== c && invert) {\n            suffLen++;\n        }\n        else {\n            break;\n        }\n    }\n    return str.slice(0, l - suffLen);\n}\nexport function findClosingBracket(str, b) {\n    if (str.indexOf(b[1]) === -1) {\n        return -1;\n    }\n    let level = 0;\n    for (let i = 0; i < str.length; i++) {\n        if (str[i] === '\\\\') {\n            i++;\n        }\n        else if (str[i] === b[0]) {\n            level++;\n        }\n        else if (str[i] === b[1]) {\n            level--;\n            if (level < 0) {\n                return i;\n            }\n        }\n    }\n    return -1;\n}\n", "import { _defaults } from './defaults.ts';\nimport { rtrim, splitCells, findClosingBracket, } from './helpers.ts';\nfunction outputLink(cap, link, raw, lexer, rules) {\n    const href = link.href;\n    const title = link.title || null;\n    const text = cap[1].replace(rules.other.outputLinkReplace, '$1');\n    if (cap[0].charAt(0) !== '!') {\n        lexer.state.inLink = true;\n        const token = {\n            type: 'link',\n            raw,\n            href,\n            title,\n            text,\n            tokens: lexer.inlineTokens(text),\n        };\n        lexer.state.inLink = false;\n        return token;\n    }\n    return {\n        type: 'image',\n        raw,\n        href,\n        title,\n        text,\n    };\n}\nfunction indentCodeCompensation(raw, text, rules) {\n    const matchIndentToCode = raw.match(rules.other.indentCodeCompensation);\n    if (matchIndentToCode === null) {\n        return text;\n    }\n    const indentToCode = matchIndentToCode[1];\n    return text\n        .split('\\n')\n        .map(node => {\n        const matchIndentInNode = node.match(rules.other.beginningSpace);\n        if (matchIndentInNode === null) {\n            return node;\n        }\n        const [indentInNode] = matchIndentInNode;\n        if (indentInNode.length >= indentToCode.length) {\n            return node.slice(indentToCode.length);\n        }\n        return node;\n    })\n        .join('\\n');\n}\n/**\n * Tokenizer\n */\nexport class _Tokenizer {\n    options;\n    rules; // set by the lexer\n    lexer; // set by the lexer\n    constructor(options) {\n        this.options = options || _defaults;\n    }\n    space(src) {\n        const cap = this.rules.block.newline.exec(src);\n        if (cap && cap[0].length > 0) {\n            return {\n                type: 'space',\n                raw: cap[0],\n            };\n        }\n    }\n    code(src) {\n        const cap = this.rules.block.code.exec(src);\n        if (cap) {\n            const text = cap[0].replace(this.rules.other.codeRemoveIndent, '');\n            return {\n                type: 'code',\n                raw: cap[0],\n                codeBlockStyle: 'indented',\n                text: !this.options.pedantic\n                    ? rtrim(text, '\\n')\n                    : text,\n            };\n        }\n    }\n    fences(src) {\n        const cap = this.rules.block.fences.exec(src);\n        if (cap) {\n            const raw = cap[0];\n            const text = indentCodeCompensation(raw, cap[3] || '', this.rules);\n            return {\n                type: 'code',\n                raw,\n                lang: cap[2] ? cap[2].trim().replace(this.rules.inline.anyPunctuation, '$1') : cap[2],\n                text,\n            };\n        }\n    }\n    heading(src) {\n        const cap = this.rules.block.heading.exec(src);\n        if (cap) {\n            let text = cap[2].trim();\n            // remove trailing #s\n            if (this.rules.other.endingHash.test(text)) {\n                const trimmed = rtrim(text, '#');\n                if (this.options.pedantic) {\n                    text = trimmed.trim();\n                }\n                else if (!trimmed || this.rules.other.endingSpaceChar.test(trimmed)) {\n                    // CommonMark requires space before trailing #s\n                    text = trimmed.trim();\n                }\n            }\n            return {\n                type: 'heading',\n                raw: cap[0],\n                depth: cap[1].length,\n                text,\n                tokens: this.lexer.inline(text),\n            };\n        }\n    }\n    hr(src) {\n        const cap = this.rules.block.hr.exec(src);\n        if (cap) {\n            return {\n                type: 'hr',\n                raw: rtrim(cap[0], '\\n'),\n            };\n        }\n    }\n    blockquote(src) {\n        const cap = this.rules.block.blockquote.exec(src);\n        if (cap) {\n            let lines = rtrim(cap[0], '\\n').split('\\n');\n            let raw = '';\n            let text = '';\n            const tokens = [];\n            while (lines.length > 0) {\n                let inBlockquote = false;\n                const currentLines = [];\n                let i;\n                for (i = 0; i < lines.length; i++) {\n                    // get lines up to a continuation\n                    if (this.rules.other.blockquoteStart.test(lines[i])) {\n                        currentLines.push(lines[i]);\n                        inBlockquote = true;\n                    }\n                    else if (!inBlockquote) {\n                        currentLines.push(lines[i]);\n                    }\n                    else {\n                        break;\n                    }\n                }\n                lines = lines.slice(i);\n                const currentRaw = currentLines.join('\\n');\n                const currentText = currentRaw\n                    // precede setext continuation with 4 spaces so it isn't a setext\n                    .replace(this.rules.other.blockquoteSetextReplace, '\\n    $1')\n                    .replace(this.rules.other.blockquoteSetextReplace2, '');\n                raw = raw ? `${raw}\\n${currentRaw}` : currentRaw;\n                text = text ? `${text}\\n${currentText}` : currentText;\n                // parse blockquote lines as top level tokens\n                // merge paragraphs if this is a continuation\n                const top = this.lexer.state.top;\n                this.lexer.state.top = true;\n                this.lexer.blockTokens(currentText, tokens, true);\n                this.lexer.state.top = top;\n                // if there is no continuation then we are done\n                if (lines.length === 0) {\n                    break;\n                }\n                const lastToken = tokens.at(-1);\n                if (lastToken?.type === 'code') {\n                    // blockquote continuation cannot be preceded by a code block\n                    break;\n                }\n                else if (lastToken?.type === 'blockquote') {\n                    // include continuation in nested blockquote\n                    const oldToken = lastToken;\n                    const newText = oldToken.raw + '\\n' + lines.join('\\n');\n                    const newToken = this.blockquote(newText);\n                    tokens[tokens.length - 1] = newToken;\n                    raw = raw.substring(0, raw.length - oldToken.raw.length) + newToken.raw;\n                    text = text.substring(0, text.length - oldToken.text.length) + newToken.text;\n                    break;\n                }\n                else if (lastToken?.type === 'list') {\n                    // include continuation in nested list\n                    const oldToken = lastToken;\n                    const newText = oldToken.raw + '\\n' + lines.join('\\n');\n                    const newToken = this.list(newText);\n                    tokens[tokens.length - 1] = newToken;\n                    raw = raw.substring(0, raw.length - lastToken.raw.length) + newToken.raw;\n                    text = text.substring(0, text.length - oldToken.raw.length) + newToken.raw;\n                    lines = newText.substring(tokens.at(-1).raw.length).split('\\n');\n                    continue;\n                }\n            }\n            return {\n                type: 'blockquote',\n                raw,\n                tokens,\n                text,\n            };\n        }\n    }\n    list(src) {\n        let cap = this.rules.block.list.exec(src);\n        if (cap) {\n            let bull = cap[1].trim();\n            const isordered = bull.length > 1;\n            const list = {\n                type: 'list',\n                raw: '',\n                ordered: isordered,\n                start: isordered ? +bull.slice(0, -1) : '',\n                loose: false,\n                items: [],\n            };\n            bull = isordered ? `\\\\d{1,9}\\\\${bull.slice(-1)}` : `\\\\${bull}`;\n            if (this.options.pedantic) {\n                bull = isordered ? bull : '[*+-]';\n            }\n            // Get next list item\n            const itemRegex = this.rules.other.listItemRegex(bull);\n            let endsWithBlankLine = false;\n            // Check if current bullet point can start a new List Item\n            while (src) {\n                let endEarly = false;\n                let raw = '';\n                let itemContents = '';\n                if (!(cap = itemRegex.exec(src))) {\n                    break;\n                }\n                if (this.rules.block.hr.test(src)) { // End list if bullet was actually HR (possibly move into itemRegex?)\n                    break;\n                }\n                raw = cap[0];\n                src = src.substring(raw.length);\n                let line = cap[2].split('\\n', 1)[0].replace(this.rules.other.listReplaceTabs, (t) => ' '.repeat(3 * t.length));\n                let nextLine = src.split('\\n', 1)[0];\n                let blankLine = !line.trim();\n                let indent = 0;\n                if (this.options.pedantic) {\n                    indent = 2;\n                    itemContents = line.trimStart();\n                }\n                else if (blankLine) {\n                    indent = cap[1].length + 1;\n                }\n                else {\n                    indent = cap[2].search(this.rules.other.nonSpaceChar); // Find first non-space char\n                    indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\n                    itemContents = line.slice(indent);\n                    indent += cap[1].length;\n                }\n                if (blankLine && this.rules.other.blankLine.test(nextLine)) { // Items begin with at most one blank line\n                    raw += nextLine + '\\n';\n                    src = src.substring(nextLine.length + 1);\n                    endEarly = true;\n                }\n                if (!endEarly) {\n                    const nextBulletRegex = this.rules.other.nextBulletRegex(indent);\n                    const hrRegex = this.rules.other.hrRegex(indent);\n                    const fencesBeginRegex = this.rules.other.fencesBeginRegex(indent);\n                    const headingBeginRegex = this.rules.other.headingBeginRegex(indent);\n                    const htmlBeginRegex = this.rules.other.htmlBeginRegex(indent);\n                    // Check if following lines should be included in List Item\n                    while (src) {\n                        const rawLine = src.split('\\n', 1)[0];\n                        let nextLineWithoutTabs;\n                        nextLine = rawLine;\n                        // Re-align to follow commonmark nesting rules\n                        if (this.options.pedantic) {\n                            nextLine = nextLine.replace(this.rules.other.listReplaceNesting, '  ');\n                            nextLineWithoutTabs = nextLine;\n                        }\n                        else {\n                            nextLineWithoutTabs = nextLine.replace(this.rules.other.tabCharGlobal, '    ');\n                        }\n                        // End list item if found code fences\n                        if (fencesBeginRegex.test(nextLine)) {\n                            break;\n                        }\n                        // End list item if found start of new heading\n                        if (headingBeginRegex.test(nextLine)) {\n                            break;\n                        }\n                        // End list item if found start of html block\n                        if (htmlBeginRegex.test(nextLine)) {\n                            break;\n                        }\n                        // End list item if found start of new bullet\n                        if (nextBulletRegex.test(nextLine)) {\n                            break;\n                        }\n                        // Horizontal rule found\n                        if (hrRegex.test(nextLine)) {\n                            break;\n                        }\n                        if (nextLineWithoutTabs.search(this.rules.other.nonSpaceChar) >= indent || !nextLine.trim()) { // Dedent if possible\n                            itemContents += '\\n' + nextLineWithoutTabs.slice(indent);\n                        }\n                        else {\n                            // not enough indentation\n                            if (blankLine) {\n                                break;\n                            }\n                            // paragraph continuation unless last line was a different block level element\n                            if (line.replace(this.rules.other.tabCharGlobal, '    ').search(this.rules.other.nonSpaceChar) >= 4) { // indented code block\n                                break;\n                            }\n                            if (fencesBeginRegex.test(line)) {\n                                break;\n                            }\n                            if (headingBeginRegex.test(line)) {\n                                break;\n                            }\n                            if (hrRegex.test(line)) {\n                                break;\n                            }\n                            itemContents += '\\n' + nextLine;\n                        }\n                        if (!blankLine && !nextLine.trim()) { // Check if current line is blank\n                            blankLine = true;\n                        }\n                        raw += rawLine + '\\n';\n                        src = src.substring(rawLine.length + 1);\n                        line = nextLineWithoutTabs.slice(indent);\n                    }\n                }\n                if (!list.loose) {\n                    // If the previous item ended with a blank line, the list is loose\n                    if (endsWithBlankLine) {\n                        list.loose = true;\n                    }\n                    else if (this.rules.other.doubleBlankLine.test(raw)) {\n                        endsWithBlankLine = true;\n                    }\n                }\n                let istask = null;\n                let ischecked;\n                // Check for task list items\n                if (this.options.gfm) {\n                    istask = this.rules.other.listIsTask.exec(itemContents);\n                    if (istask) {\n                        ischecked = istask[0] !== '[ ] ';\n                        itemContents = itemContents.replace(this.rules.other.listReplaceTask, '');\n                    }\n                }\n                list.items.push({\n                    type: 'list_item',\n                    raw,\n                    task: !!istask,\n                    checked: ischecked,\n                    loose: false,\n                    text: itemContents,\n                    tokens: [],\n                });\n                list.raw += raw;\n            }\n            // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\n            const lastItem = list.items.at(-1);\n            if (lastItem) {\n                lastItem.raw = lastItem.raw.trimEnd();\n                lastItem.text = lastItem.text.trimEnd();\n            }\n            else {\n                // not a list since there were no items\n                return;\n            }\n            list.raw = list.raw.trimEnd();\n            // Item child tokens handled here at end because we needed to have the final item to trim it first\n            for (let i = 0; i < list.items.length; i++) {\n                this.lexer.state.top = false;\n                list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\n                if (!list.loose) {\n                    // Check if list should be loose\n                    const spacers = list.items[i].tokens.filter(t => t.type === 'space');\n                    const hasMultipleLineBreaks = spacers.length > 0 && spacers.some(t => this.rules.other.anyLine.test(t.raw));\n                    list.loose = hasMultipleLineBreaks;\n                }\n            }\n            // Set all items to loose if list is loose\n            if (list.loose) {\n                for (let i = 0; i < list.items.length; i++) {\n                    list.items[i].loose = true;\n                }\n            }\n            return list;\n        }\n    }\n    html(src) {\n        const cap = this.rules.block.html.exec(src);\n        if (cap) {\n            const token = {\n                type: 'html',\n                block: true,\n                raw: cap[0],\n                pre: cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style',\n                text: cap[0],\n            };\n            return token;\n        }\n    }\n    def(src) {\n        const cap = this.rules.block.def.exec(src);\n        if (cap) {\n            const tag = cap[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal, ' ');\n            const href = cap[2] ? cap[2].replace(this.rules.other.hrefBrackets, '$1').replace(this.rules.inline.anyPunctuation, '$1') : '';\n            const title = cap[3] ? cap[3].substring(1, cap[3].length - 1).replace(this.rules.inline.anyPunctuation, '$1') : cap[3];\n            return {\n                type: 'def',\n                tag,\n                raw: cap[0],\n                href,\n                title,\n            };\n        }\n    }\n    table(src) {\n        const cap = this.rules.block.table.exec(src);\n        if (!cap) {\n            return;\n        }\n        if (!this.rules.other.tableDelimiter.test(cap[2])) {\n            // delimiter row must have a pipe (|) or colon (:) otherwise it is a setext heading\n            return;\n        }\n        const headers = splitCells(cap[1]);\n        const aligns = cap[2].replace(this.rules.other.tableAlignChars, '').split('|');\n        const rows = cap[3]?.trim() ? cap[3].replace(this.rules.other.tableRowBlankLine, '').split('\\n') : [];\n        const item = {\n            type: 'table',\n            raw: cap[0],\n            header: [],\n            align: [],\n            rows: [],\n        };\n        if (headers.length !== aligns.length) {\n            // header and align columns must be equal, rows can be different.\n            return;\n        }\n        for (const align of aligns) {\n            if (this.rules.other.tableAlignRight.test(align)) {\n                item.align.push('right');\n            }\n            else if (this.rules.other.tableAlignCenter.test(align)) {\n                item.align.push('center');\n            }\n            else if (this.rules.other.tableAlignLeft.test(align)) {\n                item.align.push('left');\n            }\n            else {\n                item.align.push(null);\n            }\n        }\n        for (let i = 0; i < headers.length; i++) {\n            item.header.push({\n                text: headers[i],\n                tokens: this.lexer.inline(headers[i]),\n                header: true,\n                align: item.align[i],\n            });\n        }\n        for (const row of rows) {\n            item.rows.push(splitCells(row, item.header.length).map((cell, i) => {\n                return {\n                    text: cell,\n                    tokens: this.lexer.inline(cell),\n                    header: false,\n                    align: item.align[i],\n                };\n            }));\n        }\n        return item;\n    }\n    lheading(src) {\n        const cap = this.rules.block.lheading.exec(src);\n        if (cap) {\n            return {\n                type: 'heading',\n                raw: cap[0],\n                depth: cap[2].charAt(0) === '=' ? 1 : 2,\n                text: cap[1],\n                tokens: this.lexer.inline(cap[1]),\n            };\n        }\n    }\n    paragraph(src) {\n        const cap = this.rules.block.paragraph.exec(src);\n        if (cap) {\n            const text = cap[1].charAt(cap[1].length - 1) === '\\n'\n                ? cap[1].slice(0, -1)\n                : cap[1];\n            return {\n                type: 'paragraph',\n                raw: cap[0],\n                text,\n                tokens: this.lexer.inline(text),\n            };\n        }\n    }\n    text(src) {\n        const cap = this.rules.block.text.exec(src);\n        if (cap) {\n            return {\n                type: 'text',\n                raw: cap[0],\n                text: cap[0],\n                tokens: this.lexer.inline(cap[0]),\n            };\n        }\n    }\n    escape(src) {\n        const cap = this.rules.inline.escape.exec(src);\n        if (cap) {\n            return {\n                type: 'escape',\n                raw: cap[0],\n                text: cap[1],\n            };\n        }\n    }\n    tag(src) {\n        const cap = this.rules.inline.tag.exec(src);\n        if (cap) {\n            if (!this.lexer.state.inLink && this.rules.other.startATag.test(cap[0])) {\n                this.lexer.state.inLink = true;\n            }\n            else if (this.lexer.state.inLink && this.rules.other.endATag.test(cap[0])) {\n                this.lexer.state.inLink = false;\n            }\n            if (!this.lexer.state.inRawBlock && this.rules.other.startPreScriptTag.test(cap[0])) {\n                this.lexer.state.inRawBlock = true;\n            }\n            else if (this.lexer.state.inRawBlock && this.rules.other.endPreScriptTag.test(cap[0])) {\n                this.lexer.state.inRawBlock = false;\n            }\n            return {\n                type: 'html',\n                raw: cap[0],\n                inLink: this.lexer.state.inLink,\n                inRawBlock: this.lexer.state.inRawBlock,\n                block: false,\n                text: cap[0],\n            };\n        }\n    }\n    link(src) {\n        const cap = this.rules.inline.link.exec(src);\n        if (cap) {\n            const trimmedUrl = cap[2].trim();\n            if (!this.options.pedantic && this.rules.other.startAngleBracket.test(trimmedUrl)) {\n                // commonmark requires matching angle brackets\n                if (!(this.rules.other.endAngleBracket.test(trimmedUrl))) {\n                    return;\n                }\n                // ending angle bracket cannot be escaped\n                const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\');\n                if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n                    return;\n                }\n            }\n            else {\n                // find closing parenthesis\n                const lastParenIndex = findClosingBracket(cap[2], '()');\n                if (lastParenIndex > -1) {\n                    const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n                    const linkLen = start + cap[1].length + lastParenIndex;\n                    cap[2] = cap[2].substring(0, lastParenIndex);\n                    cap[0] = cap[0].substring(0, linkLen).trim();\n                    cap[3] = '';\n                }\n            }\n            let href = cap[2];\n            let title = '';\n            if (this.options.pedantic) {\n                // split pedantic href and title\n                const link = this.rules.other.pedanticHrefTitle.exec(href);\n                if (link) {\n                    href = link[1];\n                    title = link[3];\n                }\n            }\n            else {\n                title = cap[3] ? cap[3].slice(1, -1) : '';\n            }\n            href = href.trim();\n            if (this.rules.other.startAngleBracket.test(href)) {\n                if (this.options.pedantic && !(this.rules.other.endAngleBracket.test(trimmedUrl))) {\n                    // pedantic allows starting angle bracket without ending angle bracket\n                    href = href.slice(1);\n                }\n                else {\n                    href = href.slice(1, -1);\n                }\n            }\n            return outputLink(cap, {\n                href: href ? href.replace(this.rules.inline.anyPunctuation, '$1') : href,\n                title: title ? title.replace(this.rules.inline.anyPunctuation, '$1') : title,\n            }, cap[0], this.lexer, this.rules);\n        }\n    }\n    reflink(src, links) {\n        let cap;\n        if ((cap = this.rules.inline.reflink.exec(src))\n            || (cap = this.rules.inline.nolink.exec(src))) {\n            const linkString = (cap[2] || cap[1]).replace(this.rules.other.multipleSpaceGlobal, ' ');\n            const link = links[linkString.toLowerCase()];\n            if (!link) {\n                const text = cap[0].charAt(0);\n                return {\n                    type: 'text',\n                    raw: text,\n                    text,\n                };\n            }\n            return outputLink(cap, link, cap[0], this.lexer, this.rules);\n        }\n    }\n    emStrong(src, maskedSrc, prevChar = '') {\n        let match = this.rules.inline.emStrongLDelim.exec(src);\n        if (!match)\n            return;\n        // _ can't be between two alphanumerics. \\p{L}\\p{N} includes non-english alphabet/numbers as well\n        if (match[3] && prevChar.match(this.rules.other.unicodeAlphaNumeric))\n            return;\n        const nextChar = match[1] || match[2] || '';\n        if (!nextChar || !prevChar || this.rules.inline.punctuation.exec(prevChar)) {\n            // unicode Regex counts emoji as 1 char; spread into array for proper count (used multiple times below)\n            const lLength = [...match[0]].length - 1;\n            let rDelim, rLength, delimTotal = lLength, midDelimTotal = 0;\n            const endReg = match[0][0] === '*' ? this.rules.inline.emStrongRDelimAst : this.rules.inline.emStrongRDelimUnd;\n            endReg.lastIndex = 0;\n            // Clip maskedSrc to same section of string as src (move to lexer?)\n            maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\n            while ((match = endReg.exec(maskedSrc)) != null) {\n                rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\n                if (!rDelim)\n                    continue; // skip single * in __abc*abc__\n                rLength = [...rDelim].length;\n                if (match[3] || match[4]) { // found another Left Delim\n                    delimTotal += rLength;\n                    continue;\n                }\n                else if (match[5] || match[6]) { // either Left or Right Delim\n                    if (lLength % 3 && !((lLength + rLength) % 3)) {\n                        midDelimTotal += rLength;\n                        continue; // CommonMark Emphasis Rules 9-10\n                    }\n                }\n                delimTotal -= rLength;\n                if (delimTotal > 0)\n                    continue; // Haven't found enough closing delimiters\n                // Remove extra characters. *a*** -> *a*\n                rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal);\n                // char length can be >1 for unicode characters;\n                const lastCharLength = [...match[0]][0].length;\n                const raw = src.slice(0, lLength + match.index + lastCharLength + rLength);\n                // Create `em` if smallest delimiter has odd char count. *a***\n                if (Math.min(lLength, rLength) % 2) {\n                    const text = raw.slice(1, -1);\n                    return {\n                        type: 'em',\n                        raw,\n                        text,\n                        tokens: this.lexer.inlineTokens(text),\n                    };\n                }\n                // Create 'strong' if smallest delimiter has even char count. **a***\n                const text = raw.slice(2, -2);\n                return {\n                    type: 'strong',\n                    raw,\n                    text,\n                    tokens: this.lexer.inlineTokens(text),\n                };\n            }\n        }\n    }\n    codespan(src) {\n        const cap = this.rules.inline.code.exec(src);\n        if (cap) {\n            let text = cap[2].replace(this.rules.other.newLineCharGlobal, ' ');\n            const hasNonSpaceChars = this.rules.other.nonSpaceChar.test(text);\n            const hasSpaceCharsOnBothEnds = this.rules.other.startingSpaceChar.test(text) && this.rules.other.endingSpaceChar.test(text);\n            if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n                text = text.substring(1, text.length - 1);\n            }\n            return {\n                type: 'codespan',\n                raw: cap[0],\n                text,\n            };\n        }\n    }\n    br(src) {\n        const cap = this.rules.inline.br.exec(src);\n        if (cap) {\n            return {\n                type: 'br',\n                raw: cap[0],\n            };\n        }\n    }\n    del(src) {\n        const cap = this.rules.inline.del.exec(src);\n        if (cap) {\n            return {\n                type: 'del',\n                raw: cap[0],\n                text: cap[2],\n                tokens: this.lexer.inlineTokens(cap[2]),\n            };\n        }\n    }\n    autolink(src) {\n        const cap = this.rules.inline.autolink.exec(src);\n        if (cap) {\n            let text, href;\n            if (cap[2] === '@') {\n                text = cap[1];\n                href = 'mailto:' + text;\n            }\n            else {\n                text = cap[1];\n                href = text;\n            }\n            return {\n                type: 'link',\n                raw: cap[0],\n                text,\n                href,\n                tokens: [\n                    {\n                        type: 'text',\n                        raw: text,\n                        text,\n                    },\n                ],\n            };\n        }\n    }\n    url(src) {\n        let cap;\n        if (cap = this.rules.inline.url.exec(src)) {\n            let text, href;\n            if (cap[2] === '@') {\n                text = cap[0];\n                href = 'mailto:' + text;\n            }\n            else {\n                // do extended autolink path validation\n                let prevCapZero;\n                do {\n                    prevCapZero = cap[0];\n                    cap[0] = this.rules.inline._backpedal.exec(cap[0])?.[0] ?? '';\n                } while (prevCapZero !== cap[0]);\n                text = cap[0];\n                if (cap[1] === 'www.') {\n                    href = 'http://' + cap[0];\n                }\n                else {\n                    href = cap[0];\n                }\n            }\n            return {\n                type: 'link',\n                raw: cap[0],\n                text,\n                href,\n                tokens: [\n                    {\n                        type: 'text',\n                        raw: text,\n                        text,\n                    },\n                ],\n            };\n        }\n    }\n    inlineText(src) {\n        const cap = this.rules.inline.text.exec(src);\n        if (cap) {\n            const escaped = this.lexer.state.inRawBlock;\n            return {\n                type: 'text',\n                raw: cap[0],\n                text: cap[0],\n                escaped,\n            };\n        }\n    }\n}\n", "import { _Tokenizer } from './Tokenizer.ts';\nimport { _defaults } from './defaults.ts';\nimport { other, block, inline } from './rules.ts';\n/**\n * Block Lexer\n */\nexport class _Lexer {\n    tokens;\n    options;\n    state;\n    tokenizer;\n    inlineQueue;\n    constructor(options) {\n        // TokenList cannot be created in one go\n        this.tokens = [];\n        this.tokens.links = Object.create(null);\n        this.options = options || _defaults;\n        this.options.tokenizer = this.options.tokenizer || new _Tokenizer();\n        this.tokenizer = this.options.tokenizer;\n        this.tokenizer.options = this.options;\n        this.tokenizer.lexer = this;\n        this.inlineQueue = [];\n        this.state = {\n            inLink: false,\n            inRawBlock: false,\n            top: true,\n        };\n        const rules = {\n            other,\n            block: block.normal,\n            inline: inline.normal,\n        };\n        if (this.options.pedantic) {\n            rules.block = block.pedantic;\n            rules.inline = inline.pedantic;\n        }\n        else if (this.options.gfm) {\n            rules.block = block.gfm;\n            if (this.options.breaks) {\n                rules.inline = inline.breaks;\n            }\n            else {\n                rules.inline = inline.gfm;\n            }\n        }\n        this.tokenizer.rules = rules;\n    }\n    /**\n     * Expose Rules\n     */\n    static get rules() {\n        return {\n            block,\n            inline,\n        };\n    }\n    /**\n     * Static Lex Method\n     */\n    static lex(src, options) {\n        const lexer = new _Lexer(options);\n        return lexer.lex(src);\n    }\n    /**\n     * Static Lex Inline Method\n     */\n    static lexInline(src, options) {\n        const lexer = new _Lexer(options);\n        return lexer.inlineTokens(src);\n    }\n    /**\n     * Preprocessing\n     */\n    lex(src) {\n        src = src.replace(other.carriageReturn, '\\n');\n        this.blockTokens(src, this.tokens);\n        for (let i = 0; i < this.inlineQueue.length; i++) {\n            const next = this.inlineQueue[i];\n            this.inlineTokens(next.src, next.tokens);\n        }\n        this.inlineQueue = [];\n        return this.tokens;\n    }\n    blockTokens(src, tokens = [], lastParagraphClipped = false) {\n        if (this.options.pedantic) {\n            src = src.replace(other.tabCharGlobal, '    ').replace(other.spaceLine, '');\n        }\n        while (src) {\n            let token;\n            if (this.options.extensions?.block?.some((extTokenizer) => {\n                if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n                    src = src.substring(token.raw.length);\n                    tokens.push(token);\n                    return true;\n                }\n                return false;\n            })) {\n                continue;\n            }\n            // newline\n            if (token = this.tokenizer.space(src)) {\n                src = src.substring(token.raw.length);\n                const lastToken = tokens.at(-1);\n                if (token.raw.length === 1 && lastToken !== undefined) {\n                    // if there's a single \\n as a spacer, it's terminating the last line,\n                    // so move it there so that we don't get unnecessary paragraph tags\n                    lastToken.raw += '\\n';\n                }\n                else {\n                    tokens.push(token);\n                }\n                continue;\n            }\n            // code\n            if (token = this.tokenizer.code(src)) {\n                src = src.substring(token.raw.length);\n                const lastToken = tokens.at(-1);\n                // An indented code block cannot interrupt a paragraph.\n                if (lastToken?.type === 'paragraph' || lastToken?.type === 'text') {\n                    lastToken.raw += '\\n' + token.raw;\n                    lastToken.text += '\\n' + token.text;\n                    this.inlineQueue.at(-1).src = lastToken.text;\n                }\n                else {\n                    tokens.push(token);\n                }\n                continue;\n            }\n            // fences\n            if (token = this.tokenizer.fences(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // heading\n            if (token = this.tokenizer.heading(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // hr\n            if (token = this.tokenizer.hr(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // blockquote\n            if (token = this.tokenizer.blockquote(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // list\n            if (token = this.tokenizer.list(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // html\n            if (token = this.tokenizer.html(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // def\n            if (token = this.tokenizer.def(src)) {\n                src = src.substring(token.raw.length);\n                const lastToken = tokens.at(-1);\n                if (lastToken?.type === 'paragraph' || lastToken?.type === 'text') {\n                    lastToken.raw += '\\n' + token.raw;\n                    lastToken.text += '\\n' + token.raw;\n                    this.inlineQueue.at(-1).src = lastToken.text;\n                }\n                else if (!this.tokens.links[token.tag]) {\n                    this.tokens.links[token.tag] = {\n                        href: token.href,\n                        title: token.title,\n                    };\n                }\n                continue;\n            }\n            // table (gfm)\n            if (token = this.tokenizer.table(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // lheading\n            if (token = this.tokenizer.lheading(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // top-level paragraph\n            // prevent paragraph consuming extensions by clipping 'src' to extension start\n            let cutSrc = src;\n            if (this.options.extensions?.startBlock) {\n                let startIndex = Infinity;\n                const tempSrc = src.slice(1);\n                let tempStart;\n                this.options.extensions.startBlock.forEach((getStartIndex) => {\n                    tempStart = getStartIndex.call({ lexer: this }, tempSrc);\n                    if (typeof tempStart === 'number' && tempStart >= 0) {\n                        startIndex = Math.min(startIndex, tempStart);\n                    }\n                });\n                if (startIndex < Infinity && startIndex >= 0) {\n                    cutSrc = src.substring(0, startIndex + 1);\n                }\n            }\n            if (this.state.top && (token = this.tokenizer.paragraph(cutSrc))) {\n                const lastToken = tokens.at(-1);\n                if (lastParagraphClipped && lastToken?.type === 'paragraph') {\n                    lastToken.raw += '\\n' + token.raw;\n                    lastToken.text += '\\n' + token.text;\n                    this.inlineQueue.pop();\n                    this.inlineQueue.at(-1).src = lastToken.text;\n                }\n                else {\n                    tokens.push(token);\n                }\n                lastParagraphClipped = cutSrc.length !== src.length;\n                src = src.substring(token.raw.length);\n                continue;\n            }\n            // text\n            if (token = this.tokenizer.text(src)) {\n                src = src.substring(token.raw.length);\n                const lastToken = tokens.at(-1);\n                if (lastToken?.type === 'text') {\n                    lastToken.raw += '\\n' + token.raw;\n                    lastToken.text += '\\n' + token.text;\n                    this.inlineQueue.pop();\n                    this.inlineQueue.at(-1).src = lastToken.text;\n                }\n                else {\n                    tokens.push(token);\n                }\n                continue;\n            }\n            if (src) {\n                const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n                if (this.options.silent) {\n                    console.error(errMsg);\n                    break;\n                }\n                else {\n                    throw new Error(errMsg);\n                }\n            }\n        }\n        this.state.top = true;\n        return tokens;\n    }\n    inline(src, tokens = []) {\n        this.inlineQueue.push({ src, tokens });\n        return tokens;\n    }\n    /**\n     * Lexing/Compiling\n     */\n    inlineTokens(src, tokens = []) {\n        // String with links masked to avoid interference with em and strong\n        let maskedSrc = src;\n        let match = null;\n        // Mask out reflinks\n        if (this.tokens.links) {\n            const links = Object.keys(this.tokens.links);\n            if (links.length > 0) {\n                while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\n                    if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\n                        maskedSrc = maskedSrc.slice(0, match.index)\n                            + '[' + 'a'.repeat(match[0].length - 2) + ']'\n                            + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\n                    }\n                }\n            }\n        }\n        // Mask out other blocks\n        while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\n            maskedSrc = maskedSrc.slice(0, match.index) + '[' + 'a'.repeat(match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n        }\n        // Mask out escaped characters\n        while ((match = this.tokenizer.rules.inline.anyPunctuation.exec(maskedSrc)) != null) {\n            maskedSrc = maskedSrc.slice(0, match.index) + '++' + maskedSrc.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);\n        }\n        let keepPrevChar = false;\n        let prevChar = '';\n        while (src) {\n            if (!keepPrevChar) {\n                prevChar = '';\n            }\n            keepPrevChar = false;\n            let token;\n            // extensions\n            if (this.options.extensions?.inline?.some((extTokenizer) => {\n                if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n                    src = src.substring(token.raw.length);\n                    tokens.push(token);\n                    return true;\n                }\n                return false;\n            })) {\n                continue;\n            }\n            // escape\n            if (token = this.tokenizer.escape(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // tag\n            if (token = this.tokenizer.tag(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // link\n            if (token = this.tokenizer.link(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // reflink, nolink\n            if (token = this.tokenizer.reflink(src, this.tokens.links)) {\n                src = src.substring(token.raw.length);\n                const lastToken = tokens.at(-1);\n                if (token.type === 'text' && lastToken?.type === 'text') {\n                    lastToken.raw += token.raw;\n                    lastToken.text += token.text;\n                }\n                else {\n                    tokens.push(token);\n                }\n                continue;\n            }\n            // em & strong\n            if (token = this.tokenizer.emStrong(src, maskedSrc, prevChar)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // code\n            if (token = this.tokenizer.codespan(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // br\n            if (token = this.tokenizer.br(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // del (gfm)\n            if (token = this.tokenizer.del(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // autolink\n            if (token = this.tokenizer.autolink(src)) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // url (gfm)\n            if (!this.state.inLink && (token = this.tokenizer.url(src))) {\n                src = src.substring(token.raw.length);\n                tokens.push(token);\n                continue;\n            }\n            // text\n            // prevent inlineText consuming extensions by clipping 'src' to extension start\n            let cutSrc = src;\n            if (this.options.extensions?.startInline) {\n                let startIndex = Infinity;\n                const tempSrc = src.slice(1);\n                let tempStart;\n                this.options.extensions.startInline.forEach((getStartIndex) => {\n                    tempStart = getStartIndex.call({ lexer: this }, tempSrc);\n                    if (typeof tempStart === 'number' && tempStart >= 0) {\n                        startIndex = Math.min(startIndex, tempStart);\n                    }\n                });\n                if (startIndex < Infinity && startIndex >= 0) {\n                    cutSrc = src.substring(0, startIndex + 1);\n                }\n            }\n            if (token = this.tokenizer.inlineText(cutSrc)) {\n                src = src.substring(token.raw.length);\n                if (token.raw.slice(-1) !== '_') { // Track prevChar before string of ____ started\n                    prevChar = token.raw.slice(-1);\n                }\n                keepPrevChar = true;\n                const lastToken = tokens.at(-1);\n                if (lastToken?.type === 'text') {\n                    lastToken.raw += token.raw;\n                    lastToken.text += token.text;\n                }\n                else {\n                    tokens.push(token);\n                }\n                continue;\n            }\n            if (src) {\n                const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n                if (this.options.silent) {\n                    console.error(errMsg);\n                    break;\n                }\n                else {\n                    throw new Error(errMsg);\n                }\n            }\n        }\n        return tokens;\n    }\n}\n", "import { _defaults } from './defaults.ts';\nimport { cleanUrl, escape, } from './helpers.ts';\nimport { other } from './rules.ts';\n/**\n * Renderer\n */\nexport class _Renderer {\n    options;\n    parser; // set by the parser\n    constructor(options) {\n        this.options = options || _defaults;\n    }\n    space(token) {\n        return '';\n    }\n    code({ text, lang, escaped }) {\n        const langString = (lang || '').match(other.notSpaceStart)?.[0];\n        const code = text.replace(other.endingNewline, '') + '\\n';\n        if (!langString) {\n            return '<pre><code>'\n                + (escaped ? code : escape(code, true))\n                + '</code></pre>\\n';\n        }\n        return '<pre><code class=\"language-'\n            + escape(langString)\n            + '\">'\n            + (escaped ? code : escape(code, true))\n            + '</code></pre>\\n';\n    }\n    blockquote({ tokens }) {\n        const body = this.parser.parse(tokens);\n        return `<blockquote>\\n${body}</blockquote>\\n`;\n    }\n    html({ text }) {\n        return text;\n    }\n    heading({ tokens, depth }) {\n        return `<h${depth}>${this.parser.parseInline(tokens)}</h${depth}>\\n`;\n    }\n    hr(token) {\n        return '<hr>\\n';\n    }\n    list(token) {\n        const ordered = token.ordered;\n        const start = token.start;\n        let body = '';\n        for (let j = 0; j < token.items.length; j++) {\n            const item = token.items[j];\n            body += this.listitem(item);\n        }\n        const type = ordered ? 'ol' : 'ul';\n        const startAttr = (ordered && start !== 1) ? (' start=\"' + start + '\"') : '';\n        return '<' + type + startAttr + '>\\n' + body + '</' + type + '>\\n';\n    }\n    listitem(item) {\n        let itemBody = '';\n        if (item.task) {\n            const checkbox = this.checkbox({ checked: !!item.checked });\n            if (item.loose) {\n                if (item.tokens[0]?.type === 'paragraph') {\n                    item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n                    if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                        item.tokens[0].tokens[0].text = checkbox + ' ' + escape(item.tokens[0].tokens[0].text);\n                        item.tokens[0].tokens[0].escaped = true;\n                    }\n                }\n                else {\n                    item.tokens.unshift({\n                        type: 'text',\n                        raw: checkbox + ' ',\n                        text: checkbox + ' ',\n                        escaped: true,\n                    });\n                }\n            }\n            else {\n                itemBody += checkbox + ' ';\n            }\n        }\n        itemBody += this.parser.parse(item.tokens, !!item.loose);\n        return `<li>${itemBody}</li>\\n`;\n    }\n    checkbox({ checked }) {\n        return '<input '\n            + (checked ? 'checked=\"\" ' : '')\n            + 'disabled=\"\" type=\"checkbox\">';\n    }\n    paragraph({ tokens }) {\n        return `<p>${this.parser.parseInline(tokens)}</p>\\n`;\n    }\n    table(token) {\n        let header = '';\n        // header\n        let cell = '';\n        for (let j = 0; j < token.header.length; j++) {\n            cell += this.tablecell(token.header[j]);\n        }\n        header += this.tablerow({ text: cell });\n        let body = '';\n        for (let j = 0; j < token.rows.length; j++) {\n            const row = token.rows[j];\n            cell = '';\n            for (let k = 0; k < row.length; k++) {\n                cell += this.tablecell(row[k]);\n            }\n            body += this.tablerow({ text: cell });\n        }\n        if (body)\n            body = `<tbody>${body}</tbody>`;\n        return '<table>\\n'\n            + '<thead>\\n'\n            + header\n            + '</thead>\\n'\n            + body\n            + '</table>\\n';\n    }\n    tablerow({ text }) {\n        return `<tr>\\n${text}</tr>\\n`;\n    }\n    tablecell(token) {\n        const content = this.parser.parseInline(token.tokens);\n        const type = token.header ? 'th' : 'td';\n        const tag = token.align\n            ? `<${type} align=\"${token.align}\">`\n            : `<${type}>`;\n        return tag + content + `</${type}>\\n`;\n    }\n    /**\n     * span level renderer\n     */\n    strong({ tokens }) {\n        return `<strong>${this.parser.parseInline(tokens)}</strong>`;\n    }\n    em({ tokens }) {\n        return `<em>${this.parser.parseInline(tokens)}</em>`;\n    }\n    codespan({ text }) {\n        return `<code>${escape(text, true)}</code>`;\n    }\n    br(token) {\n        return '<br>';\n    }\n    del({ tokens }) {\n        return `<del>${this.parser.parseInline(tokens)}</del>`;\n    }\n    link({ href, title, tokens }) {\n        const text = this.parser.parseInline(tokens);\n        const cleanHref = cleanUrl(href);\n        if (cleanHref === null) {\n            return text;\n        }\n        href = cleanHref;\n        let out = '<a href=\"' + href + '\"';\n        if (title) {\n            out += ' title=\"' + (escape(title)) + '\"';\n        }\n        out += '>' + text + '</a>';\n        return out;\n    }\n    image({ href, title, text }) {\n        const cleanHref = cleanUrl(href);\n        if (cleanHref === null) {\n            return escape(text);\n        }\n        href = cleanHref;\n        let out = `<img src=\"${href}\" alt=\"${text}\"`;\n        if (title) {\n            out += ` title=\"${escape(title)}\"`;\n        }\n        out += '>';\n        return out;\n    }\n    text(token) {\n        return 'tokens' in token && token.tokens\n            ? this.parser.parseInline(token.tokens)\n            : ('escaped' in token && token.escaped ? token.text : escape(token.text));\n    }\n}\n", "/**\n * TextRenderer\n * returns only the textual part of the token\n */\nexport class _TextRenderer {\n    // no need for block level renderers\n    strong({ text }) {\n        return text;\n    }\n    em({ text }) {\n        return text;\n    }\n    codespan({ text }) {\n        return text;\n    }\n    del({ text }) {\n        return text;\n    }\n    html({ text }) {\n        return text;\n    }\n    text({ text }) {\n        return text;\n    }\n    link({ text }) {\n        return '' + text;\n    }\n    image({ text }) {\n        return '' + text;\n    }\n    br() {\n        return '';\n    }\n}\n", "import { _Renderer } from './Renderer.ts';\nimport { _TextRenderer } from './TextRenderer.ts';\nimport { _defaults } from './defaults.ts';\n/**\n * Parsing & Compiling\n */\nexport class _Parser {\n    options;\n    renderer;\n    textRenderer;\n    constructor(options) {\n        this.options = options || _defaults;\n        this.options.renderer = this.options.renderer || new _Renderer();\n        this.renderer = this.options.renderer;\n        this.renderer.options = this.options;\n        this.renderer.parser = this;\n        this.textRenderer = new _TextRenderer();\n    }\n    /**\n     * Static Parse Method\n     */\n    static parse(tokens, options) {\n        const parser = new _Parser(options);\n        return parser.parse(tokens);\n    }\n    /**\n     * Static Parse Inline Method\n     */\n    static parseInline(tokens, options) {\n        const parser = new _Parser(options);\n        return parser.parseInline(tokens);\n    }\n    /**\n     * Parse Loop\n     */\n    parse(tokens, top = true) {\n        let out = '';\n        for (let i = 0; i < tokens.length; i++) {\n            const anyToken = tokens[i];\n            // Run any renderer extensions\n            if (this.options.extensions?.renderers?.[anyToken.type]) {\n                const genericToken = anyToken;\n                const ret = this.options.extensions.renderers[genericToken.type].call({ parser: this }, genericToken);\n                if (ret !== false || !['space', 'hr', 'heading', 'code', 'table', 'blockquote', 'list', 'html', 'paragraph', 'text'].includes(genericToken.type)) {\n                    out += ret || '';\n                    continue;\n                }\n            }\n            const token = anyToken;\n            switch (token.type) {\n                case 'space': {\n                    out += this.renderer.space(token);\n                    continue;\n                }\n                case 'hr': {\n                    out += this.renderer.hr(token);\n                    continue;\n                }\n                case 'heading': {\n                    out += this.renderer.heading(token);\n                    continue;\n                }\n                case 'code': {\n                    out += this.renderer.code(token);\n                    continue;\n                }\n                case 'table': {\n                    out += this.renderer.table(token);\n                    continue;\n                }\n                case 'blockquote': {\n                    out += this.renderer.blockquote(token);\n                    continue;\n                }\n                case 'list': {\n                    out += this.renderer.list(token);\n                    continue;\n                }\n                case 'html': {\n                    out += this.renderer.html(token);\n                    continue;\n                }\n                case 'paragraph': {\n                    out += this.renderer.paragraph(token);\n                    continue;\n                }\n                case 'text': {\n                    let textToken = token;\n                    let body = this.renderer.text(textToken);\n                    while (i + 1 < tokens.length && tokens[i + 1].type === 'text') {\n                        textToken = tokens[++i];\n                        body += '\\n' + this.renderer.text(textToken);\n                    }\n                    if (top) {\n                        out += this.renderer.paragraph({\n                            type: 'paragraph',\n                            raw: body,\n                            text: body,\n                            tokens: [{ type: 'text', raw: body, text: body, escaped: true }],\n                        });\n                    }\n                    else {\n                        out += body;\n                    }\n                    continue;\n                }\n                default: {\n                    const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n                    if (this.options.silent) {\n                        console.error(errMsg);\n                        return '';\n                    }\n                    else {\n                        throw new Error(errMsg);\n                    }\n                }\n            }\n        }\n        return out;\n    }\n    /**\n     * Parse Inline Tokens\n     */\n    parseInline(tokens, renderer = this.renderer) {\n        let out = '';\n        for (let i = 0; i < tokens.length; i++) {\n            const anyToken = tokens[i];\n            // Run any renderer extensions\n            if (this.options.extensions?.renderers?.[anyToken.type]) {\n                const ret = this.options.extensions.renderers[anyToken.type].call({ parser: this }, anyToken);\n                if (ret !== false || !['escape', 'html', 'link', 'image', 'strong', 'em', 'codespan', 'br', 'del', 'text'].includes(anyToken.type)) {\n                    out += ret || '';\n                    continue;\n                }\n            }\n            const token = anyToken;\n            switch (token.type) {\n                case 'escape': {\n                    out += renderer.text(token);\n                    break;\n                }\n                case 'html': {\n                    out += renderer.html(token);\n                    break;\n                }\n                case 'link': {\n                    out += renderer.link(token);\n                    break;\n                }\n                case 'image': {\n                    out += renderer.image(token);\n                    break;\n                }\n                case 'strong': {\n                    out += renderer.strong(token);\n                    break;\n                }\n                case 'em': {\n                    out += renderer.em(token);\n                    break;\n                }\n                case 'codespan': {\n                    out += renderer.codespan(token);\n                    break;\n                }\n                case 'br': {\n                    out += renderer.br(token);\n                    break;\n                }\n                case 'del': {\n                    out += renderer.del(token);\n                    break;\n                }\n                case 'text': {\n                    out += renderer.text(token);\n                    break;\n                }\n                default: {\n                    const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n                    if (this.options.silent) {\n                        console.error(errMsg);\n                        return '';\n                    }\n                    else {\n                        throw new Error(errMsg);\n                    }\n                }\n            }\n        }\n        return out;\n    }\n}\n", "import { _defaults } from './defaults.ts';\nimport { _Lexer } from './Lexer.ts';\nimport { _Parser } from './Parser.ts';\nexport class _Hooks {\n    options;\n    block;\n    constructor(options) {\n        this.options = options || _defaults;\n    }\n    static passThroughHooks = new Set([\n        'preprocess',\n        'postprocess',\n        'processAllTokens',\n    ]);\n    /**\n     * Process markdown before marked\n     */\n    preprocess(markdown) {\n        return markdown;\n    }\n    /**\n     * Process HTML after marked is finished\n     */\n    postprocess(html) {\n        return html;\n    }\n    /**\n     * Process all tokens before walk tokens\n     */\n    processAllTokens(tokens) {\n        return tokens;\n    }\n    /**\n     * Provide function to tokenize markdown\n     */\n    provideLexer() {\n        return this.block ? _Lexer.lex : _Lexer.lexInline;\n    }\n    /**\n     * Provide function to parse tokens\n     */\n    provideParser() {\n        return this.block ? _Parser.parse : _Parser.parseInline;\n    }\n}\n", "import { _getDefaults } from './defaults.ts';\nimport { _Lexer } from './Lexer.ts';\nimport { _Parser } from './Parser.ts';\nimport { _Hooks } from './Hooks.ts';\nimport { _Renderer } from './Renderer.ts';\nimport { _Tokenizer } from './Tokenizer.ts';\nimport { _TextRenderer } from './TextRenderer.ts';\nimport { escape } from './helpers.ts';\nexport class Marked {\n    defaults = _getDefaults();\n    options = this.setOptions;\n    parse = this.parseMarkdown(true);\n    parseInline = this.parseMarkdown(false);\n    Parser = _Parser;\n    Renderer = _Renderer;\n    TextRenderer = _TextRenderer;\n    Lexer = _Lexer;\n    Tokenizer = _Tokenizer;\n    Hooks = _Hooks;\n    constructor(...args) {\n        this.use(...args);\n    }\n    /**\n     * Run callback for every token\n     */\n    walkTokens(tokens, callback) {\n        let values = [];\n        for (const token of tokens) {\n            values = values.concat(callback.call(this, token));\n            switch (token.type) {\n                case 'table': {\n                    const tableToken = token;\n                    for (const cell of tableToken.header) {\n                        values = values.concat(this.walkTokens(cell.tokens, callback));\n                    }\n                    for (const row of tableToken.rows) {\n                        for (const cell of row) {\n                            values = values.concat(this.walkTokens(cell.tokens, callback));\n                        }\n                    }\n                    break;\n                }\n                case 'list': {\n                    const listToken = token;\n                    values = values.concat(this.walkTokens(listToken.items, callback));\n                    break;\n                }\n                default: {\n                    const genericToken = token;\n                    if (this.defaults.extensions?.childTokens?.[genericToken.type]) {\n                        this.defaults.extensions.childTokens[genericToken.type].forEach((childTokens) => {\n                            const tokens = genericToken[childTokens].flat(Infinity);\n                            values = values.concat(this.walkTokens(tokens, callback));\n                        });\n                    }\n                    else if (genericToken.tokens) {\n                        values = values.concat(this.walkTokens(genericToken.tokens, callback));\n                    }\n                }\n            }\n        }\n        return values;\n    }\n    use(...args) {\n        const extensions = this.defaults.extensions || { renderers: {}, childTokens: {} };\n        args.forEach((pack) => {\n            // copy options to new object\n            const opts = { ...pack };\n            // set async to true if it was set to true before\n            opts.async = this.defaults.async || opts.async || false;\n            // ==-- Parse \"addon\" extensions --== //\n            if (pack.extensions) {\n                pack.extensions.forEach((ext) => {\n                    if (!ext.name) {\n                        throw new Error('extension name required');\n                    }\n                    if ('renderer' in ext) { // Renderer extensions\n                        const prevRenderer = extensions.renderers[ext.name];\n                        if (prevRenderer) {\n                            // Replace extension with func to run new extension but fall back if false\n                            extensions.renderers[ext.name] = function (...args) {\n                                let ret = ext.renderer.apply(this, args);\n                                if (ret === false) {\n                                    ret = prevRenderer.apply(this, args);\n                                }\n                                return ret;\n                            };\n                        }\n                        else {\n                            extensions.renderers[ext.name] = ext.renderer;\n                        }\n                    }\n                    if ('tokenizer' in ext) { // Tokenizer Extensions\n                        if (!ext.level || (ext.level !== 'block' && ext.level !== 'inline')) {\n                            throw new Error(\"extension level must be 'block' or 'inline'\");\n                        }\n                        const extLevel = extensions[ext.level];\n                        if (extLevel) {\n                            extLevel.unshift(ext.tokenizer);\n                        }\n                        else {\n                            extensions[ext.level] = [ext.tokenizer];\n                        }\n                        if (ext.start) { // Function to check for start of token\n                            if (ext.level === 'block') {\n                                if (extensions.startBlock) {\n                                    extensions.startBlock.push(ext.start);\n                                }\n                                else {\n                                    extensions.startBlock = [ext.start];\n                                }\n                            }\n                            else if (ext.level === 'inline') {\n                                if (extensions.startInline) {\n                                    extensions.startInline.push(ext.start);\n                                }\n                                else {\n                                    extensions.startInline = [ext.start];\n                                }\n                            }\n                        }\n                    }\n                    if ('childTokens' in ext && ext.childTokens) { // Child tokens to be visited by walkTokens\n                        extensions.childTokens[ext.name] = ext.childTokens;\n                    }\n                });\n                opts.extensions = extensions;\n            }\n            // ==-- Parse \"overwrite\" extensions --== //\n            if (pack.renderer) {\n                const renderer = this.defaults.renderer || new _Renderer(this.defaults);\n                for (const prop in pack.renderer) {\n                    if (!(prop in renderer)) {\n                        throw new Error(`renderer '${prop}' does not exist`);\n                    }\n                    if (['options', 'parser'].includes(prop)) {\n                        // ignore options property\n                        continue;\n                    }\n                    const rendererProp = prop;\n                    const rendererFunc = pack.renderer[rendererProp];\n                    const prevRenderer = renderer[rendererProp];\n                    // Replace renderer with func to run extension, but fall back if false\n                    renderer[rendererProp] = (...args) => {\n                        let ret = rendererFunc.apply(renderer, args);\n                        if (ret === false) {\n                            ret = prevRenderer.apply(renderer, args);\n                        }\n                        return ret || '';\n                    };\n                }\n                opts.renderer = renderer;\n            }\n            if (pack.tokenizer) {\n                const tokenizer = this.defaults.tokenizer || new _Tokenizer(this.defaults);\n                for (const prop in pack.tokenizer) {\n                    if (!(prop in tokenizer)) {\n                        throw new Error(`tokenizer '${prop}' does not exist`);\n                    }\n                    if (['options', 'rules', 'lexer'].includes(prop)) {\n                        // ignore options, rules, and lexer properties\n                        continue;\n                    }\n                    const tokenizerProp = prop;\n                    const tokenizerFunc = pack.tokenizer[tokenizerProp];\n                    const prevTokenizer = tokenizer[tokenizerProp];\n                    // Replace tokenizer with func to run extension, but fall back if false\n                    // @ts-expect-error cannot type tokenizer function dynamically\n                    tokenizer[tokenizerProp] = (...args) => {\n                        let ret = tokenizerFunc.apply(tokenizer, args);\n                        if (ret === false) {\n                            ret = prevTokenizer.apply(tokenizer, args);\n                        }\n                        return ret;\n                    };\n                }\n                opts.tokenizer = tokenizer;\n            }\n            // ==-- Parse Hooks extensions --== //\n            if (pack.hooks) {\n                const hooks = this.defaults.hooks || new _Hooks();\n                for (const prop in pack.hooks) {\n                    if (!(prop in hooks)) {\n                        throw new Error(`hook '${prop}' does not exist`);\n                    }\n                    if (['options', 'block'].includes(prop)) {\n                        // ignore options and block properties\n                        continue;\n                    }\n                    const hooksProp = prop;\n                    const hooksFunc = pack.hooks[hooksProp];\n                    const prevHook = hooks[hooksProp];\n                    if (_Hooks.passThroughHooks.has(prop)) {\n                        // @ts-expect-error cannot type hook function dynamically\n                        hooks[hooksProp] = (arg) => {\n                            if (this.defaults.async) {\n                                return Promise.resolve(hooksFunc.call(hooks, arg)).then(ret => {\n                                    return prevHook.call(hooks, ret);\n                                });\n                            }\n                            const ret = hooksFunc.call(hooks, arg);\n                            return prevHook.call(hooks, ret);\n                        };\n                    }\n                    else {\n                        // @ts-expect-error cannot type hook function dynamically\n                        hooks[hooksProp] = (...args) => {\n                            let ret = hooksFunc.apply(hooks, args);\n                            if (ret === false) {\n                                ret = prevHook.apply(hooks, args);\n                            }\n                            return ret;\n                        };\n                    }\n                }\n                opts.hooks = hooks;\n            }\n            // ==-- Parse WalkTokens extensions --== //\n            if (pack.walkTokens) {\n                const walkTokens = this.defaults.walkTokens;\n                const packWalktokens = pack.walkTokens;\n                opts.walkTokens = function (token) {\n                    let values = [];\n                    values.push(packWalktokens.call(this, token));\n                    if (walkTokens) {\n                        values = values.concat(walkTokens.call(this, token));\n                    }\n                    return values;\n                };\n            }\n            this.defaults = { ...this.defaults, ...opts };\n        });\n        return this;\n    }\n    setOptions(opt) {\n        this.defaults = { ...this.defaults, ...opt };\n        return this;\n    }\n    lexer(src, options) {\n        return _Lexer.lex(src, options ?? this.defaults);\n    }\n    parser(tokens, options) {\n        return _Parser.parse(tokens, options ?? this.defaults);\n    }\n    parseMarkdown(blockType) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const parse = (src, options) => {\n            const origOpt = { ...options };\n            const opt = { ...this.defaults, ...origOpt };\n            const throwError = this.onError(!!opt.silent, !!opt.async);\n            // throw error if an extension set async to true but parse was called with async: false\n            if (this.defaults.async === true && origOpt.async === false) {\n                return throwError(new Error('marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise.'));\n            }\n            // throw error in case of non string input\n            if (typeof src === 'undefined' || src === null) {\n                return throwError(new Error('marked(): input parameter is undefined or null'));\n            }\n            if (typeof src !== 'string') {\n                return throwError(new Error('marked(): input parameter is of type '\n                    + Object.prototype.toString.call(src) + ', string expected'));\n            }\n            if (opt.hooks) {\n                opt.hooks.options = opt;\n                opt.hooks.block = blockType;\n            }\n            const lexer = opt.hooks ? opt.hooks.provideLexer() : (blockType ? _Lexer.lex : _Lexer.lexInline);\n            const parser = opt.hooks ? opt.hooks.provideParser() : (blockType ? _Parser.parse : _Parser.parseInline);\n            if (opt.async) {\n                return Promise.resolve(opt.hooks ? opt.hooks.preprocess(src) : src)\n                    .then(src => lexer(src, opt))\n                    .then(tokens => opt.hooks ? opt.hooks.processAllTokens(tokens) : tokens)\n                    .then(tokens => opt.walkTokens ? Promise.all(this.walkTokens(tokens, opt.walkTokens)).then(() => tokens) : tokens)\n                    .then(tokens => parser(tokens, opt))\n                    .then(html => opt.hooks ? opt.hooks.postprocess(html) : html)\n                    .catch(throwError);\n            }\n            try {\n                if (opt.hooks) {\n                    src = opt.hooks.preprocess(src);\n                }\n                let tokens = lexer(src, opt);\n                if (opt.hooks) {\n                    tokens = opt.hooks.processAllTokens(tokens);\n                }\n                if (opt.walkTokens) {\n                    this.walkTokens(tokens, opt.walkTokens);\n                }\n                let html = parser(tokens, opt);\n                if (opt.hooks) {\n                    html = opt.hooks.postprocess(html);\n                }\n                return html;\n            }\n            catch (e) {\n                return throwError(e);\n            }\n        };\n        return parse;\n    }\n    onError(silent, async) {\n        return (e) => {\n            e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n            if (silent) {\n                const msg = '<p>An error occurred:</p><pre>'\n                    + escape(e.message + '', true)\n                    + '</pre>';\n                if (async) {\n                    return Promise.resolve(msg);\n                }\n                return msg;\n            }\n            if (async) {\n                return Promise.reject(e);\n            }\n            throw e;\n        };\n    }\n}\n", "import { _Lexer } from './Lexer.ts';\nimport { _Parser } from './Parser.ts';\nimport { _Tokenizer } from './Tokenizer.ts';\nimport { _Renderer } from './Renderer.ts';\nimport { _TextRenderer } from './TextRenderer.ts';\nimport { _Hooks } from './Hooks.ts';\nimport { Marked } from './Instance.ts';\nimport { _getDefaults, changeDefaults, _defaults, } from './defaults.ts';\nconst markedInstance = new Marked();\nexport function marked(src, opt) {\n    return markedInstance.parse(src, opt);\n}\n/**\n * Sets the default options.\n *\n * @param options Hash of options\n */\nmarked.options =\n    marked.setOptions = function (options) {\n        markedInstance.setOptions(options);\n        marked.defaults = markedInstance.defaults;\n        changeDefaults(marked.defaults);\n        return marked;\n    };\n/**\n * Gets the original marked default options.\n */\nmarked.getDefaults = _getDefaults;\nmarked.defaults = _defaults;\n/**\n * Use Extension\n */\nmarked.use = function (...args) {\n    markedInstance.use(...args);\n    marked.defaults = markedInstance.defaults;\n    changeDefaults(marked.defaults);\n    return marked;\n};\n/**\n * Run callback for every token\n */\nmarked.walkTokens = function (tokens, callback) {\n    return markedInstance.walkTokens(tokens, callback);\n};\n/**\n * Compiles markdown to HTML without enclosing `p` tag.\n *\n * @param src String of markdown source to be compiled\n * @param options Hash of options\n * @return String of compiled HTML\n */\nmarked.parseInline = markedInstance.parseInline;\n/**\n * Expose\n */\nmarked.Parser = _Parser;\nmarked.parser = _Parser.parse;\nmarked.Renderer = _Renderer;\nmarked.TextRenderer = _TextRenderer;\nmarked.Lexer = _Lexer;\nmarked.lexer = _Lexer.lex;\nmarked.Tokenizer = _Tokenizer;\nmarked.Hooks = _Hooks;\nmarked.parse = marked;\nexport const options = marked.options;\nexport const setOptions = marked.setOptions;\nexport const use = marked.use;\nexport const walkTokens = marked.walkTokens;\nexport const parseInline = marked.parseInline;\nexport const parse = marked;\nexport const parser = _Parser.parse;\nexport const lexer = _Lexer.lex;\nexport { _defaults as defaults, _getDefaults as getDefaults } from './defaults.ts';\nexport { _Lexer as Lexer } from './Lexer.ts';\nexport { _Parser as Parser } from './Parser.ts';\nexport { _Tokenizer as Tokenizer } from './Tokenizer.ts';\nexport { _Renderer as Renderer } from './Renderer.ts';\nexport { _TextRenderer as TextRenderer } from './TextRenderer.ts';\nexport { _Hooks as Hooks } from './Hooks.ts';\nexport { Marked } from './Instance.ts';\n", "import { Controller } from \"@hotwired/stimulus\"\nimport DOMPurify from 'dompurify';\nimport { marked } from 'marked';\n\n// Connects to data-controller=\"easymde\"\nexport default class extends Controller {\n  static targets = [\"textarea\"]\n  \n  connect() {\n    if (this.easyMDE) return\n    \n    this.originalValue = this.element.value\n    this.easyMDE = new EasyMDE(this.#buildOptions())\n    \n    // Store the editor content before morphing\n    this.element.addEventListener(\"turbo:before-morph-element\", (event) => {\n      if (event.target === this.element && this.easyMDE) {\n        this.storedValue = this.easyMDE.value()\n      }\n    })\n    \n    // Restore after morphing\n    this.element.addEventListener(\"turbo:morph-element\", (event) => {\n      if (event.target === this.element) {\n        requestAnimationFrame(() => this.#handleMorph())\n      }\n    })\n  }\n\n  disconnect() {\n    if (this.easyMDE) {\n      try {\n        // Only call toTextArea if the element is still in the DOM\n        if (this.element.isConnected && this.element.parentNode) {\n          this.easyMDE.toTextArea()\n        }\n      } catch (error) {\n        console.warn('EasyMDE cleanup error:', error)\n      }\n      this.easyMDE = null\n    }\n  }\n  \n  #handleMorph() {\n    if (!this.element.isConnected) return\n    \n    // Don't call toTextArea during morph - just clean up references\n    if (this.easyMDE) {\n      // Skip toTextArea cleanup - it causes DOM errors during morphing\n      this.easyMDE = null\n    }\n    \n    // Recreate the editor\n    this.easyMDE = new EasyMDE(this.#buildOptions())\n    \n    // Restore the stored value if we have it\n    if (this.storedValue !== undefined) {\n      this.easyMDE.value(this.storedValue)\n      this.storedValue = undefined\n    }\n  }\n\n  #buildOptions() {\n    let options = {\n      element: this.element,\n      promptURLs: true,\n      spellChecker: false,\n      // Override the default preview renderer\n      previewRender: (plainText) => {\n        // First sanitize the input to remove any undesired HTML\n        const cleanedText = DOMPurify.sanitize(plainText, {\n          ALLOWED_TAGS: ['strong', 'em', 'sub', 'sup', 'details', 'summary'],\n          ALLOWED_ATTR: []\n        });\n\n        // Then convert markdown to HTML\n        const cleanedHTML = marked(cleanedText);\n\n        // Finally, another pass, since marked does not sanitize html\n        return DOMPurify.sanitize(cleanedHTML, { USE_PROFILES: { html: true } })\n      }\n    }\n    if (this.element.attributes.id.value) {\n      options.autosave = {\n        enabled: true,\n        uniqueId: this.element.attributes.id.value,\n        delay: 1000,\n      }\n    }\n    return options\n  }\n}\n", "import { Controller } from \"@hotwired/stimulus\";\n\n// Connects to data-controller=\"slim-select\"\nexport default class extends Controller {\n  connect() {\n    if (this.slimSelect) return;\n\n    this.#setupSlimSelect();\n\n    // Just recreate SlimSelect after morphing - the DOM will have correct selections\n    this.element.addEventListener(\"turbo:morph-element\", (event) => {\n      if (event.target === this.element && !this.morphing) {\n        this.morphing = true;\n        requestAnimationFrame(() => {\n          this.#handleMorph();\n          this.morphing = false;\n        });\n      }\n    });\n  }\n\n  #setupSlimSelect() {\n    const settings = {};\n    const modal = document.querySelector('[data-controller=\"remote-modal\"]');\n\n    if (modal) {\n      // Create a dedicated container div right after the select element\n      this.dropdownContainer = document.createElement(\"div\");\n      this.dropdownContainer.className = \"ss-dropdown-container\";\n\n      // Make the select wrapper position relative to contain the absolute dropdown\n      const selectWrapper = this.element.parentNode;\n      const originalPosition = getComputedStyle(selectWrapper).position;\n      if (originalPosition === \"static\") {\n        selectWrapper.style.position = \"relative\";\n        this.modifiedSelectWrapper = selectWrapper;\n      }\n\n      // Insert the container right after the select element\n      this.element.parentNode.insertBefore(\n        this.dropdownContainer,\n        this.element.nextSibling\n      );\n\n      settings.contentLocation = this.dropdownContainer;\n      settings.contentPosition = \"absolute\";\n      settings.openPosition = \"auto\";\n    }\n\n    this.slimSelect = new SlimSelect({\n      select: this.element,\n      settings: settings,\n    });\n\n    // Add event listeners for better positioning\n    this.handleDropdownPosition();\n\n    // Bind event handlers for proper cleanup\n    this.boundHandleDropdownOpen = this.handleDropdownOpen.bind(this);\n    this.boundHandleDropdownClose = this.handleDropdownClose.bind(this);\n\n    // Add event listeners to properly handle dropdown visibility\n    this.element.addEventListener(\"ss:open\", this.boundHandleDropdownOpen);\n    this.element.addEventListener(\"ss:close\", this.boundHandleDropdownClose);\n\n    // Add mutation observer to track aria-expanded attribute\n    this.setupAriaObserver();\n  }\n\n  handleDropdownPosition() {\n    if (this.dropdownContainer) {\n      // Reposition dropdown when window resizes or scrolls\n      const repositionDropdown = () => {\n        const selectRect = this.element.getBoundingClientRect();\n\n        // Calculate if there's enough space below\n        const spaceBelow = window.innerHeight - selectRect.bottom;\n        const spaceAbove = selectRect.top;\n\n        if (spaceBelow < 200 && spaceAbove > spaceBelow) {\n          // Position above if not enough space below\n          this.dropdownContainer.style.top = \"auto\";\n          this.dropdownContainer.style.bottom = \"100%\";\n          this.dropdownContainer.style.borderRadius = \"0.375rem 0.375rem 0 0\";\n        } else {\n          // Position below (default)\n          this.dropdownContainer.style.bottom = \"auto\";\n          this.dropdownContainer.style.borderRadius = \"0 0 0.375rem 0.375rem\";\n        }\n      };\n\n      // Initial positioning\n      setTimeout(repositionDropdown, 0);\n\n      // Reposition on events\n      window.addEventListener(\"resize\", repositionDropdown);\n      window.addEventListener(\"scroll\", repositionDropdown);\n\n      // Store references for cleanup\n      this.repositionDropdown = repositionDropdown;\n    }\n  }\n\n  handleDropdownOpen() {\n    if (this.dropdownContainer) {\n      // When dropdown opens, ensure our container is properly sized\n      this.dropdownContainer.style.height = \"auto\";\n      this.dropdownContainer.style.overflow = \"visible\";\n\n      // Add open class for better CSS targeting\n      this.dropdownContainer.classList.add(\"ss-active\");\n\n      // Ensure this dropdown appears above others\n      const allContainers = document.querySelectorAll(\".ss-dropdown-container\");\n      allContainers.forEach((container) => {\n        if (container !== this.dropdownContainer) {\n          container.style.zIndex = \"9999\";\n        }\n      });\n      this.dropdownContainer.style.zIndex = \"10000\";\n    }\n  }\n\n  handleDropdownClose() {\n    if (this.dropdownContainer) {\n      // Remove active class\n      this.dropdownContainer.classList.remove(\"ss-active\");\n    }\n  }\n\n  setupAriaObserver() {\n    // Track aria-expanded attribute on the select element or its wrapper\n    if (this.element) {\n      this.ariaObserver = new MutationObserver((mutations) => {\n        mutations.forEach((mutation) => {\n          if (mutation.attributeName === \"aria-expanded\") {\n            const expanded =\n              mutation.target.getAttribute(\"aria-expanded\") === \"true\";\n            if (expanded) {\n              this.handleDropdownOpen();\n            } else {\n              this.handleDropdownClose();\n            }\n          }\n        });\n      });\n\n      // Look for the actual element that gets the aria-expanded attribute\n      const possibleTargets = [\n        this.element,\n        this.element.parentNode.querySelector(\".ss-main\"),\n        this.element.parentNode.querySelector(\"[aria-expanded]\"),\n      ];\n\n      const target = possibleTargets.find(\n        (el) => el && el.hasAttribute && el.hasAttribute(\"aria-expanded\")\n      );\n\n      if (target) {\n        this.ariaObserver.observe(target, {\n          attributes: true,\n          attributeFilter: [\"aria-expanded\"],\n        });\n\n        // Check initial state\n        const expanded = target.getAttribute(\"aria-expanded\") === \"true\";\n        if (expanded) {\n          this.handleDropdownOpen();\n        } else {\n          this.handleDropdownClose();\n        }\n      }\n    }\n  }\n\n  disconnect() {\n    this.#cleanupSlimSelect();\n  }\n\n  #handleMorph() {\n    if (!this.element.isConnected) return;\n\n    // Clean up the old instance without DOM manipulation\n    this.#cleanupSlimSelect();\n\n    // Recreate the select - it will automatically pick up the current DOM selections\n    this.#setupSlimSelect();\n  }\n\n  #cleanupSlimSelect() {\n    // Clean up event listeners\n    if (this.element) {\n      if (this.boundHandleDropdownOpen) {\n        this.element.removeEventListener(\n          \"ss:open\",\n          this.boundHandleDropdownOpen\n        );\n      }\n      if (this.boundHandleDropdownClose) {\n        this.element.removeEventListener(\n          \"ss:close\",\n          this.boundHandleDropdownClose\n        );\n      }\n    }\n\n    // Disconnect observer\n    if (this.ariaObserver) {\n      this.ariaObserver.disconnect();\n      this.ariaObserver = null;\n    }\n\n    if (this.slimSelect) {\n      this.slimSelect.destroy();\n      this.slimSelect = null;\n    }\n\n    // Clean up event listeners\n    if (this.repositionDropdown) {\n      window.removeEventListener(\"resize\", this.repositionDropdown);\n      window.removeEventListener(\"scroll\", this.repositionDropdown);\n      this.repositionDropdown = null;\n    }\n\n    // Clean up the dropdown container if it exists\n    if (this.dropdownContainer && this.dropdownContainer.parentNode) {\n      this.dropdownContainer.parentNode.removeChild(this.dropdownContainer);\n      this.dropdownContainer = null;\n    }\n\n    // Restore original positioning if we modified it\n    if (this.modifiedSelectWrapper) {\n      this.modifiedSelectWrapper.style.position = \"\";\n      this.modifiedSelectWrapper = null;\n    }\n  }\n}\n", "import { Controller } from \"@hotwired/stimulus\";\n\n// Connects to data-controller=\"flatpickr\"\nexport default class extends Controller {\n  connect() {\n    if (this.picker) return;\n\n    this.modal = document.querySelector(\"[data-controller=remote-modal]\");\n    this.picker = new flatpickr(this.element, this.#buildOptions());\n\n    // Just recreate Flatpickr after morphing - the DOM will have correct value\n    this.element.addEventListener(\"turbo:morph-element\", (event) => {\n      if (event.target === this.element && !this.morphing) {\n        this.morphing = true;\n        requestAnimationFrame(() => {\n          this.#handleMorph();\n          this.morphing = false;\n        });\n      }\n    });\n  }\n\n  disconnect() {\n    if (this.picker) {\n      this.picker.destroy();\n      this.picker = null;\n    }\n  }\n\n  #handleMorph() {\n    if (!this.element.isConnected) return;\n\n    // Clean up the old instance\n    if (this.picker) {\n      this.picker.destroy();\n      this.picker = null;\n    }\n\n    // Recreate the picker - it will pick up the current DOM value\n    this.modal = document.querySelector(\"[data-controller=remote-modal]\");\n    this.picker = new flatpickr(this.element, this.#buildOptions());\n  }\n\n  #buildOptions() {\n    let options = { altInput: true };\n\n    if (this.element.attributes.type.value == \"datetime-local\") {\n      options.enableTime = true;\n    } else if (this.element.attributes.type.value == \"time\") {\n      options.enableTime = true;\n      options.noCalendar = true;\n      // options.time_24hr = true\n      // options.altFormat = \"H:i\"\n    }\n\n    if (this.modal) {\n      options.appendTo = this.modal;\n    }\n\n    return options;\n  }\n}\n", "import { Controller } from \"@hotwired/stimulus\"\n\n// Connects to data-controller=\"intl-tel-input\"\nexport default class extends Controller {\n  static targets = [\"input\"]\n\n  connect() {\n  }\n\n  disconnect() {\n    this.inputTargetDisconnected()\n  }\n\n  inputTargetConnected() {\n    if (!this.hasInputTarget || this.iti) return;\n\n    this.iti = window.intlTelInput(this.inputTarget, this.#buildOptions())\n\n    // Just recreate IntlTelInput after morphing - the DOM will have correct value\n    this.element.addEventListener(\"turbo:morph-element\", (event) => {\n      if (event.target === this.element && !this.morphing) {\n        this.morphing = true;\n        requestAnimationFrame(() => {\n          this.#handleMorph();\n          this.morphing = false;\n        });\n      }\n    });\n  }\n\n  inputTargetDisconnected() {\n    if (this.iti) {\n      this.iti.destroy()\n      this.iti = null\n    }\n  }\n\n  #handleMorph() {\n    if (!this.inputTarget || !this.inputTarget.isConnected) return;\n\n    // Clean up the old instance\n    if (this.iti) {\n      this.iti.destroy();\n      this.iti = null;\n    }\n\n    // Recreate the intl tel input - it will pick up the current DOM value\n    this.iti = window.intlTelInput(this.inputTarget, this.#buildOptions());\n  }\n\n  #buildOptions() {\n    return {\n      strictMode: true,\n      hiddenInput: () => ({ phone: this.inputTarget.attributes.name.value }),\n      loadUtilsOnInit: \"https://cdn.jsdelivr.net/npm/intl-tel-input@24.8.1/build/js/utils.js\",\n    }\n  }\n}\n", "import { Controller } from \"@hotwired/stimulus\"\n\n// Connects to data-controller=\"select-navigator\"\nexport default class extends Controller {\n  static targets = [\"select\"]\n\n  navigate(_) {\n    const url = this.selectTarget.value\n    const anchor = document.createElement('a')\n    anchor.href = url\n\n    this.element.appendChild(anchor)\n    anchor.click()\n    anchor.remove()\n  }\n}\n", "import { Controller } from \"@hotwired/stimulus\"\n\n// Connects to data-controller=\"resource-tab-list\"\nexport default class extends Controller {\n  static targets = [\"btn\", \"tab\"]\n  static values = {\n    defaultTab: String,\n    activeClasses: String,\n    inActiveClasses: String\n  }\n\n  connect() {\n    this.activeClasses = this.hasActiveClassesValue ? this.activeClassesValue.split(\" \") : []\n    this.inActiveClasses = this.hasInActiveClassesValue ? this.inActiveClassesValue.split(\" \") : []\n\n    this.#selectInternal(this.defaultTabValue || this.btnTargets[0].id)\n  }\n\n  select(event) {\n    this.#selectInternal(event.currentTarget.id)\n  }\n\n  #selectInternal(id) {\n    const selectedBtn = this.btnTargets.find(element => element.id === id)\n    if (!selectedBtn) {\n      console.error(`Tab Button with id \"${id}\" not found`)\n      return\n    }\n\n    const selectedTab = this.tabTargets.find(element => element.id === selectedBtn.dataset.target)\n    if (!selectedTab) {\n      console.error(`Tab Panel with id \"${selectedBtn.dataset.target}\" not found`)\n      return\n    }\n\n    // Update tab visibility and ARIA states\n    this.tabTargets.forEach(tab => {\n      tab.hidden = true\n      tab.setAttribute('aria-hidden', 'true')\n    })\n\n    // Update button states and classes\n    this.btnTargets.forEach(btn => {\n      btn.setAttribute('aria-selected', 'false')\n      btn.setAttribute('tabindex', '-1')\n      btn.classList.remove(...this.activeClasses)\n      btn.classList.add(...this.inActiveClasses)\n    })\n\n    // Activate selected tab and button\n    selectedBtn.setAttribute('aria-selected', 'true')\n    selectedBtn.setAttribute('tabindex', '0')\n    selectedBtn.classList.remove(...this.inActiveClasses)\n    selectedBtn.classList.add(...this.activeClasses)\n\n    selectedTab.hidden = false\n    selectedTab.setAttribute('aria-hidden', 'false')\n\n    // Focus management\n    if (selectedBtn !== document.activeElement) {\n      selectedBtn.focus()\n    }\n  }\n}\n", "function insertReplacement(source, rx, replacement) {\n    const newParts = [];\n    source.forEach((chunk) => {\n        // When the source contains multiple placeholders for interpolation,\n        // we should ignore chunks that are not strings, because those\n        // can be JSX objects and will be otherwise incorrectly turned into strings.\n        // Without this condition we\u2019d get this: [object Object] hello [object Object] my <button>\n        if (typeof chunk !== 'string') {\n            return newParts.push(chunk);\n        }\n        return rx[Symbol.split](chunk).forEach((raw, i, list) => {\n            if (raw !== '') {\n                newParts.push(raw);\n            }\n            // Interlace with the `replacement` value\n            if (i < list.length - 1) {\n                newParts.push(replacement);\n            }\n        });\n    });\n    return newParts;\n}\n/**\n * Takes a string with placeholder variables like `%{smart_count} file selected`\n * and replaces it with values from options `{smart_count: 5}`\n *\n * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE\n * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299\n *\n * @param phrase that needs interpolation, with placeholders\n * @param options with values that will be used to replace placeholders\n */\nfunction interpolate(phrase, options) {\n    const dollarRegex = /\\$/g;\n    const dollarBillsYall = '$$$$';\n    let interpolated = [phrase];\n    if (options == null)\n        return interpolated;\n    for (const arg of Object.keys(options)) {\n        if (arg !== '_') {\n            // Ensure replacement value is escaped to prevent special $-prefixed\n            // regex replace tokens. the \"$$$$\" is needed because each \"$\" needs to\n            // be escaped with \"$\" itself, and we need two in the resulting output.\n            let replacement = options[arg];\n            if (typeof replacement === 'string') {\n                replacement = dollarRegex[Symbol.replace](replacement, dollarBillsYall);\n            }\n            // We create a new `RegExp` each time instead of using a more-efficient\n            // string replace so that the same argument can be replaced multiple times\n            // in the same phrase.\n            interpolated = insertReplacement(interpolated, new RegExp(`%\\\\{${arg}\\\\}`, 'g'), replacement);\n        }\n    }\n    return interpolated;\n}\nconst defaultOnMissingKey = (key) => {\n    throw new Error(`missing string: ${key}`);\n};\n/**\n * Translates strings with interpolation & pluralization support.\n * Extensible with custom dictionaries and pluralization functions.\n *\n * Borrows heavily from and inspired by Polyglot https://github.com/airbnb/polyglot.js,\n * basically a stripped-down version of it. Differences: pluralization functions are not hardcoded\n * and can be easily added among with dictionaries, nested objects are used for pluralization\n * as opposed to `||||` delimeter\n *\n * Usage example: `translator.translate('files_chosen', {smart_count: 3})`\n */\nexport default class Translator {\n    locale;\n    constructor(locales, { onMissingKey = defaultOnMissingKey } = {}) {\n        this.locale = {\n            strings: {},\n            pluralize(n) {\n                if (n === 1) {\n                    return 0;\n                }\n                return 1;\n            },\n        };\n        if (Array.isArray(locales)) {\n            locales.forEach(this.#apply, this);\n        }\n        else {\n            this.#apply(locales);\n        }\n        this.#onMissingKey = onMissingKey;\n    }\n    #onMissingKey;\n    #apply(locale) {\n        if (!locale?.strings) {\n            return;\n        }\n        const prevLocale = this.locale;\n        Object.assign(this.locale, {\n            strings: { ...prevLocale.strings, ...locale.strings },\n            pluralize: locale.pluralize || prevLocale.pluralize,\n        });\n    }\n    /**\n     * Public translate method\n     *\n     * @param key\n     * @param options with values that will be used later to replace placeholders in string\n     * @returns string translated (and interpolated)\n     */\n    translate(key, options) {\n        return this.translateArray(key, options).join('');\n    }\n    /**\n     * Get a translation and return the translated and interpolated parts as an array.\n     *\n     * @returns The translated and interpolated parts, in order.\n     */\n    translateArray(key, options) {\n        let string = this.locale.strings[key];\n        if (string == null) {\n            this.#onMissingKey(key);\n            string = key;\n        }\n        const hasPluralForms = typeof string === 'object';\n        if (hasPluralForms) {\n            if (options && typeof options.smart_count !== 'undefined') {\n                const plural = this.locale.pluralize(options.smart_count);\n                return interpolate(string[plural], options);\n            }\n            throw new Error('Attempted to use a string with plural forms, but no value was given for %{smart_count}');\n        }\n        if (typeof string !== 'string') {\n            throw new Error(`string was not a string`);\n        }\n        return interpolate(string, options);\n    }\n}\n", "/**\n * Core plugin logic that all plugins share.\n *\n * BasePlugin does not contain DOM rendering so it can be used for plugins\n * without a user interface.\n *\n * See `Plugin` for the extended version with Preact rendering for interfaces.\n */\nimport Translator from '@uppy/utils/lib/Translator';\nexport default class BasePlugin {\n    uppy;\n    opts;\n    id;\n    defaultLocale;\n    i18n;\n    i18nArray;\n    type;\n    VERSION;\n    constructor(uppy, opts) {\n        this.uppy = uppy;\n        this.opts = opts ?? {};\n    }\n    getPluginState() {\n        const { plugins } = this.uppy.getState();\n        return (plugins?.[this.id] || {});\n    }\n    setPluginState(update) {\n        const { plugins } = this.uppy.getState();\n        this.uppy.setState({\n            plugins: {\n                ...plugins,\n                [this.id]: {\n                    ...plugins[this.id],\n                    ...update,\n                },\n            },\n        });\n    }\n    setOptions(newOpts) {\n        this.opts = { ...this.opts, ...newOpts };\n        this.setPluginState(undefined); // so that UI re-renders with new options\n        this.i18nInit();\n    }\n    i18nInit() {\n        const translator = new Translator([\n            this.defaultLocale,\n            this.uppy.locale,\n            this.opts.locale,\n        ]);\n        this.i18n = translator.translate.bind(translator);\n        this.i18nArray = translator.translateArray.bind(translator);\n        this.setPluginState(undefined); // so that UI re-renders and we see the updated locale\n    }\n    /**\n     * Extendable methods\n     * ==================\n     * These methods are here to serve as an overview of the extendable methods as well as\n     * making them not conditional in use, such as `if (this.afterUpdate)`.\n     */\n    addTarget(plugin) {\n        throw new Error(\"Extend the addTarget method to add your plugin to another plugin's target\");\n    }\n    install() { }\n    uninstall() { }\n    update(state) { }\n    // Called after every state update, after everything's mounted. Debounced.\n    afterUpdate() { }\n}\n", "/**\n * Adds zero to strings shorter than two characters.\n */\nfunction pad(number) {\n    return number < 10 ? `0${number}` : number.toString();\n}\n/**\n * Returns a timestamp in the format of `hours:minutes:seconds`\n */\nexport default function getTimeStamp() {\n    const date = new Date();\n    const hours = pad(date.getHours());\n    const minutes = pad(date.getMinutes());\n    const seconds = pad(date.getSeconds());\n    return `${hours}:${minutes}:${seconds}`;\n}\n", "import getTimeStamp from '@uppy/utils/lib/getTimeStamp';\n// Swallow all logs, except errors.\n// default if logger is not set or debug: false\nconst justErrorsLogger = {\n    debug: () => { },\n    warn: () => { },\n    error: (...args) => console.error(`[Uppy] [${getTimeStamp()}]`, ...args),\n};\n// Print logs to console with namespace + timestamp,\n// set by logger: Uppy.debugLogger or debug: true\nconst debugLogger = {\n    debug: (...args) => console.debug(`[Uppy] [${getTimeStamp()}]`, ...args),\n    warn: (...args) => console.warn(`[Uppy] [${getTimeStamp()}]`, ...args),\n    error: (...args) => console.error(`[Uppy] [${getTimeStamp()}]`, ...args),\n};\nexport { justErrorsLogger, debugLogger };\n", "/**\n * Check if an object is a DOM element. Duck-typing based on `nodeType`.\n */\nexport default function isDOMElement(obj) {\n    if (typeof obj !== 'object' || obj === null)\n        return false;\n    if (!('nodeType' in obj))\n        return false;\n    return obj.nodeType === Node.ELEMENT_NODE;\n}\n", "import isDOMElement from './isDOMElement.js';\nfunction findDOMElement(element, context = document) {\n    if (typeof element === 'string') {\n        return context.querySelector(element);\n    }\n    if (isDOMElement(element)) {\n        return element;\n    }\n    return null;\n}\nexport default findDOMElement;\n", "/**\n * Get the declared text direction for an element.\n */\nfunction getTextDirection(element) {\n    // There is another way to determine text direction using getComputedStyle(), as done here:\n    // https://github.com/pencil-js/text-direction/blob/2a235ce95089b3185acec3b51313cbba921b3811/text-direction.js\n    //\n    // We do not use that approach because we are interested specifically in the _declared_ text direction.\n    // If no text direction is declared, we have to provide our own explicit text direction so our\n    // bidirectional CSS style sheets work.\n    while (element && !element.dir) {\n        element = element.parentNode;\n    }\n    return element?.dir;\n}\nexport default getTextDirection;\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const NULL = null;\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { EMPTY_ARR } from './constants';\n\nexport const isArray = Array.isArray;\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-expect-error We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {import('./index').ContainerNode} node The node to remove\n */\nexport function removeNode(node) {\n\tif (node && node.parentNode) node.parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n", "import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n", "import { slice } from './util';\nimport options from './options';\nimport { NULL, UNDEFINED } from './constants';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor for this\n * virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the\n * virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != NULL) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === UNDEFINED) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, NULL);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\t/** @type {import('./internal').VNode} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: NULL,\n\t\t_parent: NULL,\n\t\t_depth: 0,\n\t\t_dom: NULL,\n\t\t_component: NULL,\n\t\tconstructor: UNDEFINED,\n\t\t_original: original == NULL ? ++vnodeId : original,\n\t\t_index: -1,\n\t\t_flags: 0\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == NULL && options.vnode != NULL) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: NULL };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != NULL && vnode.constructor === UNDEFINED;\n", "import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\nimport { MODE_HYDRATE, NULL } from './constants';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function BaseComponent(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {import('./internal').Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nBaseComponent.prototype.setState = function (update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != NULL && this._nextState != this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == NULL) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {import('./internal').Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nBaseComponent.prototype.forceUpdate = function (callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](https://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {ComponentChildren | void}\n */\nBaseComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == NULL) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._index + 1)\n\t\t\t: NULL;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != NULL && sibling._dom != NULL) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : NULL;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet oldVNode = component._vnode,\n\t\toldDom = oldVNode._dom,\n\t\tcommitQueue = [],\n\t\trefQueue = [];\n\n\tif (component._parentDom) {\n\t\tconst newVNode = assign({}, oldVNode);\n\t\tnewVNode._original = oldVNode._original + 1;\n\t\tif (options.vnode) options.vnode(newVNode);\n\n\t\tdiff(\n\t\t\tcomponent._parentDom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tcomponent._parentDom.namespaceURI,\n\t\t\toldVNode._flags & MODE_HYDRATE ? [oldDom] : NULL,\n\t\t\tcommitQueue,\n\t\t\toldDom == NULL ? getDomSibling(oldVNode) : oldDom,\n\t\t\t!!(oldVNode._flags & MODE_HYDRATE),\n\t\t\trefQueue\n\t\t);\n\n\t\tnewVNode._original = oldVNode._original;\n\t\tnewVNode._parent._children[newVNode._index] = newVNode;\n\t\tcommitRoot(commitQueue, newVNode, refQueue);\n\t\toldVNode._dom = oldVNode._parent = null;\n\n\t\tif (newVNode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(newVNode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != NULL && vnode._component != NULL) {\n\t\tvnode._dom = vnode._component.base = NULL;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != NULL && child._dom != NULL) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce != options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/**\n * @param {import('./internal').Component} a\n * @param {import('./internal').Component} b\n */\nconst depthSort = (a, b) => a._vnode._depth - b._vnode._depth;\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet c,\n\t\tl = 1;\n\n\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t// process() calls from getting scheduled while `queue` is still being consumed.\n\twhile (rerenderQueue.length) {\n\t\t// Keep the rerender queue sorted by (depth, insertion order). The queue\n\t\t// will initially be sorted on the first iteration only if it has more than 1 item.\n\t\t//\n\t\t// New items can be added to the queue e.g. when rerendering a provider, so we want to\n\t\t// keep the order from top to bottom with those new items so we can handle them in a\n\t\t// single pass\n\t\tif (rerenderQueue.length > l) {\n\t\t\trerenderQueue.sort(depthSort);\n\t\t}\n\n\t\tc = rerenderQueue.shift();\n\t\tl = rerenderQueue.length;\n\n\t\tif (c._dirty) {\n\t\t\trenderComponent(c);\n\t\t}\n\t}\n\tprocess._rerenderCount = 0;\n}\n\nprocess._rerenderCount = 0;\n", "import { IS_NON_DIMENSIONAL, NULL, SVG_NAMESPACE } from '../constants';\nimport options from '../options';\n\nfunction setStyle(style, key, value) {\n\tif (key[0] == '-') {\n\t\tstyle.setProperty(key, value == NULL ? '' : value);\n\t} else if (value == NULL) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\nconst CAPTURE_REGEX = /(PointerCapture)$|Capture$/i;\n\n// A logical clock to solve issues like https://github.com/preactjs/preact/issues/3927.\n// When the DOM performs an event it leaves micro-ticks in between bubbling up which means that\n// an event can trigger on a newly reated DOM-node while the event bubbles up.\n//\n// Originally inspired by Vue\n// (https://github.com/vuejs/core/blob/caeb8a68811a1b0f79/packages/runtime-dom/src/modules/events.ts#L90-L101),\n// but modified to use a logical clock instead of Date.now() in case event handlers get attached\n// and events get dispatched during the same millisecond.\n//\n// The clock is incremented after each new event dispatch. This allows 1 000 000 new events\n// per second for over 280 years before the value reaches Number.MAX_SAFE_INTEGER (2**53 - 1).\nlet eventClock = 0;\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {string} namespace Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, namespace) {\n\tlet useCapture;\n\n\to: if (name == 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] != oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] == 'o' && name[1] == 'n') {\n\t\tuseCapture = name != (name = name.replace(CAPTURE_REGEX, '$1'));\n\t\tconst lowerCaseName = name.toLowerCase();\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (lowerCaseName in dom || name == 'onFocusOut' || name == 'onFocusIn')\n\t\t\tname = lowerCaseName.slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tvalue._attached = eventClock;\n\t\t\t\tdom.addEventListener(\n\t\t\t\t\tname,\n\t\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\t\tuseCapture\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tvalue._attached = oldValue._attached;\n\t\t\t}\n\t\t} else {\n\t\t\tdom.removeEventListener(\n\t\t\t\tname,\n\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\tuseCapture\n\t\t\t);\n\t\t}\n\t} else {\n\t\tif (namespace == SVG_NAMESPACE) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname != 'width' &&\n\t\t\tname != 'height' &&\n\t\t\tname != 'href' &&\n\t\t\tname != 'list' &&\n\t\t\tname != 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname != 'tabIndex' &&\n\t\t\tname != 'download' &&\n\t\t\tname != 'rowSpan' &&\n\t\t\tname != 'colSpan' &&\n\t\t\tname != 'role' &&\n\t\t\tname != 'popover' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == NULL ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// aria- and data- attributes have no boolean representation.\n\t\t// A `false` value is different from the attribute not being\n\t\t// present, so we can't remove it. For non-boolean aria\n\t\t// attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost too many bytes. On top of\n\t\t// that other frameworks generally stringify `false`.\n\n\t\tif (typeof value == 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != NULL && (value !== false || name[4] == '-')) {\n\t\t\tdom.setAttribute(name, name == 'popover' && value == true ? '' : value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Create an event proxy function.\n * @param {boolean} useCapture Is the event handler for the capture phase.\n * @private\n */\nfunction createEventProxy(useCapture) {\n\t/**\n\t * Proxy an event to hooked event handlers\n\t * @param {import('../internal').PreactEvent} e The event object from the browser\n\t * @private\n\t */\n\treturn function (e) {\n\t\tif (this._listeners) {\n\t\t\tconst eventHandler = this._listeners[e.type + useCapture];\n\t\t\tif (e._dispatched == NULL) {\n\t\t\t\te._dispatched = eventClock++;\n\n\t\t\t\t// When `e._dispatched` is smaller than the time when the targeted event\n\t\t\t\t// handler was attached we know we have bubbled up to an element that was added\n\t\t\t\t// during patching the DOM.\n\t\t\t} else if (e._dispatched < eventHandler._attached) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn eventHandler(options.event ? options.event(e) : e);\n\t\t}\n\t};\n}\n\nconst eventProxy = createEventProxy(false);\nconst eventProxyCapture = createEventProxy(true);\n", "import { enqueueRender } from './component';\nimport { NULL } from './constants';\n\nexport let i = 0;\n\nexport function createContext(defaultValue) {\n\tfunction Context(props) {\n\t\tif (!this.getChildContext) {\n\t\t\t/** @type {Set<import('./internal').Component> | null} */\n\t\t\tlet subs = new Set();\n\t\t\tlet ctx = {};\n\t\t\tctx[Context._id] = this;\n\n\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\tthis.componentWillUnmount = () => {\n\t\t\t\tsubs = NULL;\n\t\t\t};\n\n\t\t\tthis.shouldComponentUpdate = function (_props) {\n\t\t\t\t// @ts-expect-error even\n\t\t\t\tif (this.props.value != _props.value) {\n\t\t\t\t\tsubs.forEach(c => {\n\t\t\t\t\t\tc._force = true;\n\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.sub = c => {\n\t\t\t\tsubs.add(c);\n\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\tif (subs) {\n\t\t\t\t\t\tsubs.delete(c);\n\t\t\t\t\t}\n\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\n\t\treturn props.children;\n\t}\n\n\tContext._id = '__cC' + i++;\n\tContext._defaultValue = defaultValue;\n\n\t/** @type {import('./internal').FunctionComponent} */\n\tContext.Consumer = (props, contextValue) => {\n\t\treturn props.children(contextValue);\n\t};\n\n\t// we could also get rid of _contextRef entirely\n\tContext.Provider =\n\t\tContext._contextRef =\n\t\tContext.Consumer.contextType =\n\t\t\tContext;\n\n\treturn Context;\n}\n", "import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport {\n\tEMPTY_OBJ,\n\tEMPTY_ARR,\n\tINSERT_VNODE,\n\tMATCHED,\n\tUNDEFINED,\n\tNULL\n} from '../constants';\nimport { isArray } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * Diff the children of a virtual node\n * @param {PreactElement} parentDom The DOM element whose children are being\n * diffed\n * @param {ComponentChildren[]} renderResult\n * @param {VNode} newParentVNode The new virtual node whose children should be\n * diff'ed against oldParentVNode\n * @param {VNode} oldParentVNode The old virtual node whose children should be\n * diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\tlet i,\n\t\t/** @type {VNode} */\n\t\toldVNode,\n\t\t/** @type {VNode} */\n\t\tchildVNode,\n\t\t/** @type {PreactElement} */\n\t\tnewDom,\n\t\t/** @type {PreactElement} */\n\t\tfirstChildDom;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\t/** @type {VNode[]} */\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet newChildrenLength = renderResult.length;\n\n\toldDom = constructNewChildrenArray(\n\t\tnewParentVNode,\n\t\trenderResult,\n\t\toldChildren,\n\t\toldDom,\n\t\tnewChildrenLength\n\t);\n\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\tchildVNode = newParentVNode._children[i];\n\t\tif (childVNode == NULL) continue;\n\n\t\t// At this point, constructNewChildrenArray has assigned _index to be the\n\t\t// matchingIndex for this VNode's oldVNode (or -1 if there is no oldVNode).\n\t\tif (childVNode._index == -1) {\n\t\t\toldVNode = EMPTY_OBJ;\n\t\t} else {\n\t\t\toldVNode = oldChildren[childVNode._index] || EMPTY_OBJ;\n\t\t}\n\n\t\t// Update childVNode._index to its final index\n\t\tchildVNode._index = i;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tlet result = diff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\n\t\t// Adjust DOM nodes\n\t\tnewDom = childVNode._dom;\n\t\tif (childVNode.ref && oldVNode.ref != childVNode.ref) {\n\t\t\tif (oldVNode.ref) {\n\t\t\t\tapplyRef(oldVNode.ref, NULL, childVNode);\n\t\t\t}\n\t\t\trefQueue.push(\n\t\t\t\tchildVNode.ref,\n\t\t\t\tchildVNode._component || newDom,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t}\n\n\t\tif (firstChildDom == NULL && newDom != NULL) {\n\t\t\tfirstChildDom = newDom;\n\t\t}\n\n\t\tlet shouldPlace = !!(childVNode._flags & INSERT_VNODE);\n\t\tif (shouldPlace || oldVNode._children === childVNode._children) {\n\t\t\toldDom = insert(childVNode, oldDom, parentDom, shouldPlace);\n\t\t} else if (typeof childVNode.type == 'function' && result !== UNDEFINED) {\n\t\t\toldDom = result;\n\t\t} else if (newDom) {\n\t\t\toldDom = newDom.nextSibling;\n\t\t}\n\n\t\t// Unset diffing flags\n\t\tchildVNode._flags &= ~(INSERT_VNODE | MATCHED);\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} newParentVNode\n * @param {ComponentChildren[]} renderResult\n * @param {VNode[]} oldChildren\n */\nfunction constructNewChildrenArray(\n\tnewParentVNode,\n\trenderResult,\n\toldChildren,\n\toldDom,\n\tnewChildrenLength\n) {\n\t/** @type {number} */\n\tlet i;\n\t/** @type {VNode} */\n\tlet childVNode;\n\t/** @type {VNode} */\n\tlet oldVNode;\n\n\tlet oldChildrenLength = oldChildren.length,\n\t\tremainingOldChildren = oldChildrenLength;\n\n\tlet skew = 0;\n\n\tnewParentVNode._children = new Array(newChildrenLength);\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\t// @ts-expect-error We are reusing the childVNode variable to hold both the\n\t\t// pre and post normalized childVNode\n\t\tchildVNode = renderResult[i];\n\n\t\tif (\n\t\t\tchildVNode == NULL ||\n\t\t\ttypeof childVNode == 'boolean' ||\n\t\t\ttypeof childVNode == 'function'\n\t\t) {\n\t\t\tnewParentVNode._children[i] = NULL;\n\t\t\tcontinue;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint' ||\n\t\t\tchildVNode.constructor == String\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tNULL,\n\t\t\t\tchildVNode,\n\t\t\t\tNULL,\n\t\t\t\tNULL,\n\t\t\t\tNULL\n\t\t\t);\n\t\t} else if (isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tNULL,\n\t\t\t\tNULL,\n\t\t\t\tNULL\n\t\t\t);\n\t\t} else if (childVNode.constructor === UNDEFINED && childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : NULL,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tnewParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\tconst skewedIndex = i + skew;\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Temporarily store the matchingIndex on the _index property so we can pull\n\t\t// out the oldVNode in diffChildren. We'll override this to the VNode's\n\t\t// final index after using this property to get the oldVNode\n\t\tconst matchingIndex = (childVNode._index = findMatchingIndex(\n\t\t\tchildVNode,\n\t\t\toldChildren,\n\t\t\tskewedIndex,\n\t\t\tremainingOldChildren\n\t\t));\n\n\t\toldVNode = NULL;\n\t\tif (matchingIndex != -1) {\n\t\t\toldVNode = oldChildren[matchingIndex];\n\t\t\tremainingOldChildren--;\n\t\t\tif (oldVNode) {\n\t\t\t\toldVNode._flags |= MATCHED;\n\t\t\t}\n\t\t}\n\n\t\t// Here, we define isMounting for the purposes of the skew diffing\n\t\t// algorithm. Nodes that are unsuspending are considered mounting and we detect\n\t\t// this by checking if oldVNode._original == null\n\t\tconst isMounting = oldVNode == NULL || oldVNode._original == NULL;\n\n\t\tif (isMounting) {\n\t\t\tif (matchingIndex == -1) {\n\t\t\t\t// When the array of children is growing we need to decrease the skew\n\t\t\t\t// as we are adding a new element to the array.\n\t\t\t\t// Example:\n\t\t\t\t// [1, 2, 3] --> [0, 1, 2, 3]\n\t\t\t\t// oldChildren   newChildren\n\t\t\t\t//\n\t\t\t\t// The new element is at index 0, so our skew is 0,\n\t\t\t\t// we need to decrease the skew as we are adding a new element.\n\t\t\t\t// The decrease will cause us to compare the element at position 1\n\t\t\t\t// with value 1 with the element at position 0 with value 0.\n\t\t\t\t//\n\t\t\t\t// A linear concept is applied when the array is shrinking,\n\t\t\t\t// if the length is unchanged we can assume that no skew\n\t\t\t\t// changes are needed.\n\t\t\t\tif (newChildrenLength > oldChildrenLength) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else if (newChildrenLength < oldChildrenLength) {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we are mounting a DOM VNode, mark it for insertion\n\t\t\tif (typeof childVNode.type != 'function') {\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t} else if (matchingIndex != skewedIndex) {\n\t\t\t// When we move elements around i.e. [0, 1, 2] --> [1, 0, 2]\n\t\t\t// --> we diff 1, we find it at position 1 while our skewed index is 0 and our skew is 0\n\t\t\t//     we set the skew to 1 as we found an offset.\n\t\t\t// --> we diff 0, we find it at position 0 while our skewed index is at 2 and our skew is 1\n\t\t\t//     this makes us increase the skew again.\n\t\t\t// --> we diff 2, we find it at position 2 while our skewed index is at 4 and our skew is 2\n\t\t\t//\n\t\t\t// this becomes an optimization question where currently we see a 1 element offset as an insertion\n\t\t\t// or deletion i.e. we optimize for [0, 1, 2] --> [9, 0, 1, 2]\n\t\t\t// while a more than 1 offset we see as a swap.\n\t\t\t// We could probably build heuristics for having an optimized course of action here as well, but\n\t\t\t// might go at the cost of some bytes.\n\t\t\t//\n\t\t\t// If we wanted to optimize for i.e. only swaps we'd just do the last two code-branches and have\n\t\t\t// only the first item be a re-scouting and all the others fall in their skewed counter-part.\n\t\t\t// We could also further optimize for swaps\n\t\t\tif (matchingIndex == skewedIndex - 1) {\n\t\t\t\tskew--;\n\t\t\t} else if (matchingIndex == skewedIndex + 1) {\n\t\t\t\tskew++;\n\t\t\t} else {\n\t\t\t\tif (matchingIndex > skewedIndex) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\n\t\t\t\t// Move this VNode's DOM if the original index (matchingIndex) doesn't\n\t\t\t\t// match the new skew index (i + new skew)\n\t\t\t\t// In the former two branches we know that it matches after skewing\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any. Loop forwards so that as we\n\t// unmount DOM from the beginning of the oldChildren, we can adjust oldDom to\n\t// point to the next child, which needs to be the first DOM node that won't be\n\t// unmounted.\n\tif (remainingOldChildren) {\n\t\tfor (i = 0; i < oldChildrenLength; i++) {\n\t\t\toldVNode = oldChildren[i];\n\t\t\tif (oldVNode != NULL && (oldVNode._flags & MATCHED) == 0) {\n\t\t\t\tif (oldVNode._dom == oldDom) {\n\t\t\t\t\toldDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\n\t\t\t\tunmount(oldVNode, oldVNode);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} parentVNode\n * @param {PreactElement} oldDom\n * @param {PreactElement} parentDom\n * @param {boolean} shouldPlace\n * @returns {PreactElement}\n */\nfunction insert(parentVNode, oldDom, parentDom, shouldPlace) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\n\tif (typeof parentVNode.type == 'function') {\n\t\tlet children = parentVNode._children;\n\t\tfor (let i = 0; children && i < children.length; i++) {\n\t\t\tif (children[i]) {\n\t\t\t\t// If we enter this code path on sCU bailout, where we copy\n\t\t\t\t// oldVNode._children to newVNode._children, we need to update the old\n\t\t\t\t// children's _parent pointer to point to the newVNode (parentVNode\n\t\t\t\t// here).\n\t\t\t\tchildren[i]._parent = parentVNode;\n\t\t\t\toldDom = insert(children[i], oldDom, parentDom, shouldPlace);\n\t\t\t}\n\t\t}\n\n\t\treturn oldDom;\n\t} else if (parentVNode._dom != oldDom) {\n\t\tif (shouldPlace) {\n\t\t\tif (oldDom && parentVNode.type && !oldDom.parentNode) {\n\t\t\t\toldDom = getDomSibling(parentVNode);\n\t\t\t}\n\t\t\tparentDom.insertBefore(parentVNode._dom, oldDom || NULL);\n\t\t}\n\t\toldDom = parentVNode._dom;\n\t}\n\n\tdo {\n\t\toldDom = oldDom && oldDom.nextSibling;\n\t} while (oldDom != NULL && oldDom.nodeType == 8);\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {ComponentChildren} children The unflattened children of a virtual\n * node\n * @returns {VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == NULL || typeof children == 'boolean') {\n\t} else if (isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\n/**\n * @param {VNode} childVNode\n * @param {VNode[]} oldChildren\n * @param {number} skewedIndex\n * @param {number} remainingOldChildren\n * @returns {number}\n */\nfunction findMatchingIndex(\n\tchildVNode,\n\toldChildren,\n\tskewedIndex,\n\tremainingOldChildren\n) {\n\tconst key = childVNode.key;\n\tconst type = childVNode.type;\n\tlet oldVNode = oldChildren[skewedIndex];\n\tconst matched = oldVNode != NULL && (oldVNode._flags & MATCHED) == 0;\n\n\t// We only need to perform a search if there are more children\n\t// (remainingOldChildren) to search. However, if the oldVNode we just looked\n\t// at skewedIndex was not already used in this diff, then there must be at\n\t// least 1 other (so greater than 1) remainingOldChildren to attempt to match\n\t// against. So the following condition checks that ensuring\n\t// remainingOldChildren > 1 if the oldVNode is not already used/matched. Else\n\t// if the oldVNode was null or matched, then there could needs to be at least\n\t// 1 (aka `remainingOldChildren > 0`) children to find and compare against.\n\t//\n\t// If there is an unkeyed functional VNode, that isn't a built-in like our Fragment,\n\t// we should not search as we risk re-using state of an unrelated VNode. (reverted for now)\n\tlet shouldSearch =\n\t\t// (typeof type != 'function' || type === Fragment || key) &&\n\t\tremainingOldChildren > (matched ? 1 : 0);\n\n\tif (\n\t\t(oldVNode === NULL && key == null) ||\n\t\t(matched && key == oldVNode.key && type == oldVNode.type)\n\t) {\n\t\treturn skewedIndex;\n\t} else if (shouldSearch) {\n\t\tlet x = skewedIndex - 1;\n\t\tlet y = skewedIndex + 1;\n\t\twhile (x >= 0 || y < oldChildren.length) {\n\t\t\tconst childIndex = x >= 0 ? x-- : y++;\n\t\t\toldVNode = oldChildren[childIndex];\n\t\t\tif (\n\t\t\t\toldVNode != NULL &&\n\t\t\t\t(oldVNode._flags & MATCHED) == 0 &&\n\t\t\t\tkey == oldVNode.key &&\n\t\t\t\ttype == oldVNode.type\n\t\t\t) {\n\t\t\t\treturn childIndex;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn -1;\n}\n", "import {\n\tEMPTY_OBJ,\n\tMATH_NAMESPACE,\n\tMODE_HYDRATE,\n\tMODE_SUSPENDED,\n\tNULL,\n\tRESET_MODE,\n\tSVG_NAMESPACE,\n\tUNDEFINED,\n\tXHTML_NAMESPACE\n} from '../constants';\nimport { BaseComponent, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { setProperty } from './props';\nimport { assign, isArray, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * @template {any} T\n * @typedef {import('../internal').Ref<T>} Ref<T>\n */\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {PreactElement} parentDom The parent of the DOM element\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\t/** @type {any} */\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== UNDEFINED) return NULL;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._flags & MODE_SUSPENDED) {\n\t\tisHydrating = !!(oldVNode._flags & MODE_HYDRATE);\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\touter: if (typeof newType == 'function') {\n\t\ttry {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\t\t\tconst isClassComponent =\n\t\t\t\t'prototype' in newType && newType.prototype.render;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif (isClassComponent) {\n\t\t\t\t\t// @ts-expect-error The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-expect-error Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new BaseComponent(\n\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (isClassComponent && c._nextState == NULL) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (isClassComponent && newType.getDerivedStateFromProps != NULL) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\t\t\tc._vnode = newVNode;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == NULL &&\n\t\t\t\t\tc.componentWillMount != NULL\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidMount != NULL) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == NULL &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != NULL\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tnewVNode._original == oldVNode._original ||\n\t\t\t\t\t(!c._force &&\n\t\t\t\t\t\tc.shouldComponentUpdate != NULL &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false)\n\t\t\t\t) {\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original != oldVNode._original) {\n\t\t\t\t\t\t// When we are dealing with a bail because of sCU we have to update\n\t\t\t\t\t\t// the props, state and dirty-state.\n\t\t\t\t\t\t// when we are dealing with strict-equality we don't as the child could still\n\t\t\t\t\t\t// be dirtied see #3883\n\t\t\t\t\t\tc.props = newProps;\n\t\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t\tc._dirty = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.some(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != NULL) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidUpdate != NULL) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._parentDom = parentDom;\n\t\t\tc._force = false;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif (isClassComponent) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != NULL) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (isClassComponent && !isNew && c.getSnapshotBeforeUpdate != NULL) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != NULL && tmp.type === Fragment && tmp.key == NULL;\n\t\t\tlet renderResult = tmp;\n\n\t\t\tif (isTopLevelFragment) {\n\t\t\t\trenderResult = cloneNode(tmp.props.children);\n\t\t\t}\n\n\t\t\toldDom = diffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tisArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnamespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._flags &= RESET_MODE;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = NULL;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tnewVNode._original = NULL;\n\t\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\t\tif (isHydrating || excessDomChildren != NULL) {\n\t\t\t\tif (e.then) {\n\t\t\t\t\tnewVNode._flags |= isHydrating\n\t\t\t\t\t\t? MODE_HYDRATE | MODE_SUSPENDED\n\t\t\t\t\t\t: MODE_SUSPENDED;\n\n\t\t\t\t\twhile (oldDom && oldDom.nodeType == 8 && oldDom.nextSibling) {\n\t\t\t\t\t\toldDom = oldDom.nextSibling;\n\t\t\t\t\t}\n\n\t\t\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = NULL;\n\t\t\t\t\tnewVNode._dom = oldDom;\n\t\t\t\t} else {\n\t\t\t\t\tfor (let i = excessDomChildren.length; i--; ) {\n\t\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t\t}\n\t\t\t\t\tmarkAsForce(newVNode);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\tif (!e.then) markAsForce(newVNode);\n\t\t\t}\n\t\t\toptions._catchError(e, newVNode, oldVNode);\n\t\t}\n\t} else if (\n\t\texcessDomChildren == NULL &&\n\t\tnewVNode._original == oldVNode._original\n\t) {\n\t\tnewVNode._children = oldVNode._children;\n\t\tnewVNode._dom = oldVNode._dom;\n\t} else {\n\t\toldDom = newVNode._dom = diffElementNodes(\n\t\t\toldVNode._dom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\t}\n\n\tif ((tmp = options.diffed)) tmp(newVNode);\n\n\treturn newVNode._flags & MODE_SUSPENDED ? undefined : oldDom;\n}\n\nfunction markAsForce(vnode) {\n\tif (vnode && vnode._component) vnode._component._force = true;\n\tif (vnode && vnode._children) vnode._children.forEach(markAsForce);\n}\n\n/**\n * @param {Array<Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {VNode} root\n */\nexport function commitRoot(commitQueue, root, refQueue) {\n\tfor (let i = 0; i < refQueue.length; i++) {\n\t\tapplyRef(refQueue[i], refQueue[++i], refQueue[++i]);\n\t}\n\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-expect-error Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-expect-error See above comment on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\nfunction cloneNode(node) {\n\tif (\n\t\ttypeof node != 'object' ||\n\t\tnode == NULL ||\n\t\t(node._depth && node._depth > 0)\n\t) {\n\t\treturn node;\n\t}\n\n\tif (isArray(node)) {\n\t\treturn node.map(cloneNode);\n\t}\n\n\treturn assign({}, node);\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {PreactElement} dom The DOM element representing the virtual nodes\n * being diffed\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n * @returns {PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating,\n\trefQueue\n) {\n\tlet oldProps = oldVNode.props || EMPTY_OBJ;\n\tlet newProps = newVNode.props;\n\tlet nodeType = /** @type {string} */ (newVNode.type);\n\t/** @type {any} */\n\tlet i;\n\t/** @type {{ __html?: string }} */\n\tlet newHtml;\n\t/** @type {{ __html?: string }} */\n\tlet oldHtml;\n\t/** @type {ComponentChildren} */\n\tlet newChildren;\n\tlet value;\n\tlet inputValue;\n\tlet checked;\n\n\t// Tracks entering and exiting namespaces when descending through the tree.\n\tif (nodeType == 'svg') namespace = SVG_NAMESPACE;\n\telse if (nodeType == 'math') namespace = MATH_NAMESPACE;\n\telse if (!namespace) namespace = XHTML_NAMESPACE;\n\n\tif (excessDomChildren != NULL) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tvalue = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tvalue &&\n\t\t\t\t'setAttribute' in value == !!nodeType &&\n\t\t\t\t(nodeType ? value.localName == nodeType : value.nodeType == 3)\n\t\t\t) {\n\t\t\t\tdom = value;\n\t\t\t\texcessDomChildren[i] = NULL;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == NULL) {\n\t\tif (nodeType == NULL) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tdom = document.createElementNS(\n\t\t\tnamespace,\n\t\t\tnodeType,\n\t\t\tnewProps.is && newProps\n\t\t);\n\n\t\t// we are creating a new node, so we can assume this is a new subtree (in\n\t\t// case we are hydrating), this deopts the hydrate\n\t\tif (isHydrating) {\n\t\t\tif (options._hydrationMismatch)\n\t\t\t\toptions._hydrationMismatch(newVNode, excessDomChildren);\n\t\t\tisHydrating = false;\n\t\t}\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = NULL;\n\t}\n\n\tif (nodeType == NULL) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data != newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\t// If we are in a situation where we are not hydrating but are using\n\t\t// existing DOM (e.g. replaceNode) we should read the existing DOM\n\t\t// attributes to diff them\n\t\tif (!isHydrating && excessDomChildren != NULL) {\n\t\t\toldProps = {};\n\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\tvalue = dom.attributes[i];\n\t\t\t\toldProps[value.name] = value.value;\n\t\t\t}\n\t\t}\n\n\t\tfor (i in oldProps) {\n\t\t\tvalue = oldProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\toldHtml = value;\n\t\t\t} else if (!(i in newProps)) {\n\t\t\t\tif (\n\t\t\t\t\t(i == 'value' && 'defaultValue' in newProps) ||\n\t\t\t\t\t(i == 'checked' && 'defaultChecked' in newProps)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tsetProperty(dom, i, NULL, value, namespace);\n\t\t\t}\n\t\t}\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tfor (i in newProps) {\n\t\t\tvalue = newProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t\tnewChildren = value;\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\tnewHtml = value;\n\t\t\t} else if (i == 'value') {\n\t\t\t\tinputValue = value;\n\t\t\t} else if (i == 'checked') {\n\t\t\t\tchecked = value;\n\t\t\t} else if (\n\t\t\t\t(!isHydrating || typeof value == 'function') &&\n\t\t\t\toldProps[i] !== value\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, value, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\tif (\n\t\t\t\t!isHydrating &&\n\t\t\t\t(!oldHtml ||\n\t\t\t\t\t(newHtml.__html != oldHtml.__html && newHtml.__html != dom.innerHTML))\n\t\t\t) {\n\t\t\t\tdom.innerHTML = newHtml.__html;\n\t\t\t}\n\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\tif (oldHtml) dom.innerHTML = '';\n\n\t\t\tdiffChildren(\n\t\t\t\t// @ts-expect-error\n\t\t\t\tnewVNode.type == 'template' ? dom.content : dom,\n\t\t\t\tisArray(newChildren) ? newChildren : [newChildren],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnodeType == 'foreignObject' ? XHTML_NAMESPACE : namespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != NULL) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// As above, don't diff props during hydration\n\t\tif (!isHydrating) {\n\t\t\ti = 'value';\n\t\t\tif (nodeType == 'progress' && inputValue == NULL) {\n\t\t\t\tdom.removeAttribute('value');\n\t\t\t} else if (\n\t\t\t\tinputValue != UNDEFINED &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(inputValue !== dom[i] ||\n\t\t\t\t\t(nodeType == 'progress' && !inputValue) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType == 'option' && inputValue != oldProps[i]))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, inputValue, oldProps[i], namespace);\n\t\t\t}\n\n\t\t\ti = 'checked';\n\t\t\tif (checked != UNDEFINED && checked != dom[i]) {\n\t\t\t\tsetProperty(dom, i, checked, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {Ref<any> & { _unmount?: unknown }} ref\n * @param {any} value\n * @param {VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') {\n\t\t\tlet hasRefUnmount = typeof ref._unmount == 'function';\n\t\t\tif (hasRefUnmount) {\n\t\t\t\t// @ts-ignore TS doesn't like moving narrowing checks into variables\n\t\t\t\tref._unmount();\n\t\t\t}\n\n\t\t\tif (!hasRefUnmount || value != NULL) {\n\t\t\t\t// Store the cleanup function on the function\n\t\t\t\t// instance object itself to avoid shape\n\t\t\t\t// transitioning vnode\n\t\t\t\tref._unmount = ref(value);\n\t\t\t}\n\t\t} else ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {VNode} vnode The virtual node to unmount\n * @param {VNode} parentVNode The parent of the VNode that initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current == vnode._dom) {\n\t\t\tapplyRef(r, NULL, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != NULL) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = NULL;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type != 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\tvnode._component = vnode._parent = vnode._dom = UNDEFINED;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n", "import { EMPTY_OBJ, NULL } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to render into\n * @param {import('./internal').PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\t// https://github.com/preactjs/preact/issues/3794\n\tif (parentDom == document) {\n\t\tparentDom = document.documentElement;\n\t}\n\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode == 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? NULL\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = ((!isHydrating && replaceNode) || parentDom)._children =\n\t\tcreateElement(Fragment, NULL, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [],\n\t\trefQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.namespaceURI,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t\t? NULL\n\t\t\t\t: parentDom.firstChild\n\t\t\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t\t\t: NULL,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t\t? oldVNode._dom\n\t\t\t\t: parentDom.firstChild,\n\t\tisHydrating,\n\t\trefQueue\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode, refQueue);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n", "import { assign, slice } from './util';\nimport { createVNode } from './create-element';\nimport { NULL, UNDEFINED } from './constants';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its\n * children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Any additional arguments will be used\n * as replacement children.\n * @returns {import('./internal').VNode}\n */\nexport function cloneElement(vnode, props, children) {\n\tlet normalizedProps = assign({}, vnode.props),\n\t\tkey,\n\t\tref,\n\t\ti;\n\n\tlet defaultProps;\n\n\tif (vnode.type && vnode.type.defaultProps) {\n\t\tdefaultProps = vnode.type.defaultProps;\n\t}\n\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse if (props[i] === UNDEFINED && defaultProps != UNDEFINED) {\n\t\t\tnormalizedProps[i] = defaultProps[i];\n\t\t} else {\n\t\t\tnormalizedProps[i] = props[i];\n\t\t}\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\treturn createVNode(\n\t\tvnode.type,\n\t\tnormalizedProps,\n\t\tkey || vnode.key,\n\t\tref || vnode.ref,\n\t\tNULL\n\t);\n}\n", "import { NULL } from '../constants';\n\n/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw the error that was caught (except\n * for unmounting when this parameter is the highest parent that was being\n * unmounted)\n * @param {import('../internal').VNode} [oldVNode]\n * @param {import('../internal').ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {import('../internal').Component} */\n\tlet component,\n\t\t/** @type {import('../internal').ComponentType} */\n\t\tctor,\n\t\t/** @type {boolean} */\n\t\thandled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != NULL) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != NULL) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n", "import { options as _options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\n// Cast to use internal Options type\nconst options = /** @type {import('./internal').Options} */ (_options);\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\nlet oldRoot = options._root;\n\n// We take the minimum timeout for requestAnimationFrame to ensure that\n// the callback is invoked after the next frame. 35ms is based on a 30hz\n// refresh rate, which is the minimum rate for a smooth user experience.\nconst RAF_TIMEOUT = 35;\nlet prevRaf;\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._root = (vnode, parentDom) => {\n\tif (vnode && parentDom._children && parentDom._children._mask) {\n\t\tvnode._mask = parentDom._children._mask;\n\t}\n\n\tif (oldRoot) oldRoot(vnode, parentDom);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t}\n\t\t\t\thookItem._pendingArgs = hookItem._nextValue = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentIndex = 0;\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\n// TODO: Improve typing of commitQueue parameter\n/** @type {(vnode: import('./internal').VNode, commitQueue: any) => void} */\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tc.__hooks = undefined;\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\n\treturn hooks._list[index];\n}\n\n/**\n * @template {unknown} S\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} [initialState]\n * @returns {[S, (state: S) => void]}\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @template {unknown} S\n * @template {unknown} A\n * @param {import('./index').Reducer<S, A>} reducer\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ S, (state: S) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst currentValue = hookState._nextValue\n\t\t\t\t\t? hookState._nextValue[0]\n\t\t\t\t\t: hookState._value[0];\n\t\t\t\tconst nextValue = hookState._reducer(currentValue, action);\n\n\t\t\t\tif (currentValue !== nextValue) {\n\t\t\t\t\thookState._nextValue = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\n\t\tif (!currentComponent._hasScuFromHooks) {\n\t\t\tcurrentComponent._hasScuFromHooks = true;\n\t\t\tlet prevScu = currentComponent.shouldComponentUpdate;\n\t\t\tconst prevCWU = currentComponent.componentWillUpdate;\n\n\t\t\t// If we're dealing with a forced update `shouldComponentUpdate` will\n\t\t\t// not be called. But we use that to update the hook values, so we\n\t\t\t// need to call it.\n\t\t\tcurrentComponent.componentWillUpdate = function (p, s, c) {\n\t\t\t\tif (this._force) {\n\t\t\t\t\tlet tmp = prevScu;\n\t\t\t\t\t// Clear to avoid other sCU hooks from being called\n\t\t\t\t\tprevScu = undefined;\n\t\t\t\t\tupdateHookState(p, s, c);\n\t\t\t\t\tprevScu = tmp;\n\t\t\t\t}\n\n\t\t\t\tif (prevCWU) prevCWU.call(this, p, s, c);\n\t\t\t};\n\n\t\t\t// This SCU has the purpose of bailing out after repeated updates\n\t\t\t// to stateful hooks.\n\t\t\t// we store the next value in _nextValue[0] and keep doing that for all\n\t\t\t// state setters, if we have next states and\n\t\t\t// all next states within a component end up being equal to their original state\n\t\t\t// we are safe to bail out for this specific component.\n\t\t\t/**\n\t\t\t *\n\t\t\t * @type {import('./internal').Component[\"shouldComponentUpdate\"]}\n\t\t\t */\n\t\t\t// @ts-ignore - We don't use TS to downtranspile\n\t\t\t// eslint-disable-next-line no-inner-declarations\n\t\t\tfunction updateHookState(p, s, c) {\n\t\t\t\tif (!hookState._component.__hooks) return true;\n\n\t\t\t\t/** @type {(x: import('./internal').HookState) => x is import('./internal').ReducerHookState} */\n\t\t\t\tconst isStateHook = x => !!x._component;\n\t\t\t\tconst stateHooks =\n\t\t\t\t\thookState._component.__hooks._list.filter(isStateHook);\n\n\t\t\t\tconst allHooksEmpty = stateHooks.every(x => !x._nextValue);\n\t\t\t\t// When we have no updated hooks in the component we invoke the previous SCU or\n\t\t\t\t// traverse the VDOM tree further.\n\t\t\t\tif (allHooksEmpty) {\n\t\t\t\t\treturn prevScu ? prevScu.call(this, p, s, c) : true;\n\t\t\t\t}\n\n\t\t\t\t// We check whether we have components with a nextValue set that\n\t\t\t\t// have values that aren't equal to one another this pushes\n\t\t\t\t// us to update further down the tree\n\t\t\t\tlet shouldUpdate = hookState._component.props !== p;\n\t\t\t\tstateHooks.forEach(hookItem => {\n\t\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\t\tconst currentValue = hookItem._value[0];\n\t\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t\t\thookItem._nextValue = undefined;\n\t\t\t\t\t\tif (currentValue !== hookItem._value[0]) shouldUpdate = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn prevScu\n\t\t\t\t\t? prevScu.call(this, p, s, c) || shouldUpdate\n\t\t\t\t\t: shouldUpdate;\n\t\t\t}\n\n\t\t\tcurrentComponent.shouldComponentUpdate = updateHookState;\n\t\t}\n\t}\n\n\treturn hookState._nextValue || hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\n/** @type {(initialValue: unknown) => unknown} */\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tconst result = ref(createHandle());\n\t\t\t\treturn () => {\n\t\t\t\t\tref(null);\n\t\t\t\t\tif (result && typeof result == 'function') result();\n\t\t\t\t};\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @template {unknown} T\n * @param {() => T} factory\n * @param {unknown[]} args\n * @returns {T}\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState<T>} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = factory();\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {unknown[]} args\n * @returns {() => void}\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(\n\t\t\tformatter ? formatter(value) : /** @type {any}*/ (value)\n\t\t);\n\t}\n}\n\n/**\n * @param {(error: unknown, errorInfo: import('preact').ErrorInfo) => void} cb\n * @returns {[unknown, () => void]}\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = (err, errorInfo) => {\n\t\t\tif (state._value) state._value(err, errorInfo);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\n/** @type {() => string} */\nexport function useId() {\n\t/** @type {import('./internal').IdHookState} */\n\tconst state = getHookState(currentIndex++, 11);\n\tif (!state._value) {\n\t\t// Grab either the root node or the nearest async boundary node.\n\t\t/** @type {import('./internal').VNode} */\n\t\tlet root = currentComponent._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\tlet mask = root._mask || (root._mask = [0, 0]);\n\t\tstate._value = 'P' + mask[0] + '-' + mask[1]++;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom || !component.__hooks) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n * @returns {void}\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').HookState} hook\n * @returns {void}\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n * @returns {void}\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {unknown[]} oldArgs\n * @param {unknown[]} newArgs\n * @returns {boolean}\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\n/**\n * @template Arg\n * @param {Arg} arg\n * @param {(arg: Arg) => any} f\n * @returns {any}\n */\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n", "/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Check if two objects have a different shape\n * @param {object} a\n * @param {object} b\n * @returns {boolean}\n */\nexport function shallowDiffers(a, b) {\n\tfor (let i in a) if (i !== '__source' && !(i in b)) return true;\n\tfor (let i in b) if (i !== '__source' && a[i] !== b[i]) return true;\n\treturn false;\n}\n\n/**\n * Check if two values are the same value\n * @param {*} x\n * @param {*} y\n * @returns {boolean}\n */\nexport function is(x, y) {\n\treturn (x === y && (x !== 0 || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\n", "import { useState, useLayoutEffect, useEffect } from 'preact/hooks';\nimport { is } from './util';\n\n/**\n * This is taken from https://github.com/facebook/react/blob/main/packages/use-sync-external-store/src/useSyncExternalStoreShimClient.js#L84\n * on a high level this cuts out the warnings, ... and attempts a smaller implementation\n * @typedef {{ _value: any; _getSnapshot: () => any }} Store\n */\nexport function useSyncExternalStore(subscribe, getSnapshot) {\n\tconst value = getSnapshot();\n\n\t/**\n\t * @typedef {{ _instance: Store }} StoreRef\n\t * @type {[StoreRef, (store: StoreRef) => void]}\n\t */\n\tconst [{ _instance }, forceUpdate] = useState({\n\t\t_instance: { _value: value, _getSnapshot: getSnapshot }\n\t});\n\n\tuseLayoutEffect(() => {\n\t\t_instance._value = value;\n\t\t_instance._getSnapshot = getSnapshot;\n\n\t\tif (didSnapshotChange(_instance)) {\n\t\t\tforceUpdate({ _instance });\n\t\t}\n\t}, [subscribe, value, getSnapshot]);\n\n\tuseEffect(() => {\n\t\tif (didSnapshotChange(_instance)) {\n\t\t\tforceUpdate({ _instance });\n\t\t}\n\n\t\treturn subscribe(() => {\n\t\t\tif (didSnapshotChange(_instance)) {\n\t\t\t\tforceUpdate({ _instance });\n\t\t\t}\n\t\t});\n\t}, [subscribe]);\n\n\treturn value;\n}\n\n/** @type {(inst: Store) => boolean} */\nfunction didSnapshotChange(inst) {\n\tconst latestGetSnapshot = inst._getSnapshot;\n\tconst prevValue = inst._value;\n\ttry {\n\t\tconst nextValue = latestGetSnapshot();\n\t\treturn !is(prevValue, nextValue);\n\t} catch (error) {\n\t\treturn true;\n\t}\n}\n\nexport function startTransition(cb) {\n\tcb();\n}\n\nexport function useDeferredValue(val) {\n\treturn val;\n}\n\nexport function useTransition() {\n\treturn [false, startTransition];\n}\n\n// TODO: in theory this should be done after a VNode is diffed as we want to insert\n// styles/... before it attaches\nexport const useInsertionEffect = useLayoutEffect;\n", "import { Component } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Component class with a predefined `shouldComponentUpdate` implementation\n */\nexport function PureComponent(p, c) {\n\tthis.props = p;\n\tthis.context = c;\n}\nPureComponent.prototype = new Component();\n// Some third-party libraries check if this property is present\nPureComponent.prototype.isPureReactComponent = true;\nPureComponent.prototype.shouldComponentUpdate = function (props, state) {\n\treturn shallowDiffers(this.props, props) || shallowDiffers(this.state, state);\n};\n", "import { createElement } from 'preact';\nimport { shallowDiffers } from './util';\n\n/**\n * Memoize a component, so that it only updates when the props actually have\n * changed. This was previously known as `React.pure`.\n * @param {import('./internal').FunctionComponent} c functional component\n * @param {(prev: object, next: object) => boolean} [comparer] Custom equality function\n * @returns {import('./internal').FunctionComponent}\n */\nexport function memo(c, comparer) {\n\tfunction shouldUpdate(nextProps) {\n\t\tlet ref = this.props.ref;\n\t\tlet updateRef = ref == nextProps.ref;\n\t\tif (!updateRef && ref) {\n\t\t\tref.call ? ref(null) : (ref.current = null);\n\t\t}\n\n\t\tif (!comparer) {\n\t\t\treturn shallowDiffers(this.props, nextProps);\n\t\t}\n\n\t\treturn !comparer(this.props, nextProps) || !updateRef;\n\t}\n\n\tfunction Memoed(props) {\n\t\tthis.shouldComponentUpdate = shouldUpdate;\n\t\treturn createElement(c, props);\n\t}\n\tMemoed.displayName = 'Memo(' + (c.displayName || c.name) + ')';\n\tMemoed.prototype.isReactComponent = true;\n\tMemoed._forwarded = true;\n\tMemoed.type = c;\n\treturn Memoed;\n}\n", "import { options } from 'preact';\nimport { assign } from './util';\n\nlet oldDiffHook = options._diff;\noptions._diff = vnode => {\n\tif (vnode.type && vnode.type._forwarded && vnode.ref) {\n\t\tvnode.props.ref = vnode.ref;\n\t\tvnode.ref = null;\n\t}\n\tif (oldDiffHook) oldDiffHook(vnode);\n};\n\nexport const REACT_FORWARD_SYMBOL =\n\t(typeof Symbol != 'undefined' &&\n\t\tSymbol.for &&\n\t\tSymbol.for('react.forward_ref')) ||\n\t0xf47;\n\n/**\n * Pass ref down to a child. This is mainly used in libraries with HOCs that\n * wrap components. Using `forwardRef` there is an easy way to get a reference\n * of the wrapped component instead of one of the wrapper itself.\n * @param {import('./index').ForwardFn} fn\n * @returns {import('./internal').FunctionComponent}\n */\nexport function forwardRef(fn) {\n\tfunction Forwarded(props) {\n\t\tlet clone = assign({}, props);\n\t\tdelete clone.ref;\n\t\treturn fn(clone, props.ref || null);\n\t}\n\n\t// mobx-react checks for this being present\n\tForwarded.$$typeof = REACT_FORWARD_SYMBOL;\n\t// mobx-react heavily relies on implementation details.\n\t// It expects an object here with a `render` property,\n\t// and prototype.render will fail. Without this\n\t// mobx-react throws.\n\tForwarded.render = fn;\n\n\tForwarded.prototype.isReactComponent = Forwarded._forwarded = true;\n\tForwarded.displayName = 'ForwardRef(' + (fn.displayName || fn.name) + ')';\n\treturn Forwarded;\n}\n", "import { toChildArray } from 'preact';\n\nconst mapFn = (children, fn) => {\n\tif (children == null) return null;\n\treturn toChildArray(toChildArray(children).map(fn));\n};\n\n// This API is completely unnecessary for Preact, so it's basically passthrough.\nexport const Children = {\n\tmap: mapFn,\n\tforEach: mapFn,\n\tcount(children) {\n\t\treturn children ? toChildArray(children).length : 0;\n\t},\n\tonly(children) {\n\t\tconst normalized = toChildArray(children);\n\t\tif (normalized.length !== 1) throw 'Children.only';\n\t\treturn normalized[0];\n\t},\n\ttoArray: toChildArray\n};\n", "import { Component, createElement, options, Fragment } from 'preact';\nimport { MODE_HYDRATE } from '../../src/constants';\nimport { assign } from './util';\n\nconst oldCatchError = options._catchError;\noptions._catchError = function (error, newVNode, oldVNode, errorInfo) {\n\tif (error.then) {\n\t\t/** @type {import('./internal').Component} */\n\t\tlet component;\n\t\tlet vnode = newVNode;\n\n\t\tfor (; (vnode = vnode._parent); ) {\n\t\t\tif ((component = vnode._component) && component._childDidSuspend) {\n\t\t\t\tif (newVNode._dom == null) {\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t}\n\t\t\t\t// Don't call oldCatchError if we found a Suspense\n\t\t\t\treturn component._childDidSuspend(error, newVNode);\n\t\t\t}\n\t\t}\n\t}\n\toldCatchError(error, newVNode, oldVNode, errorInfo);\n};\n\nconst oldUnmount = options.unmount;\noptions.unmount = function (vnode) {\n\t/** @type {import('./internal').Component} */\n\tconst component = vnode._component;\n\tif (component && component._onResolve) {\n\t\tcomponent._onResolve();\n\t}\n\n\t// if the component is still hydrating\n\t// most likely it is because the component is suspended\n\t// we set the vnode.type as `null` so that it is not a typeof function\n\t// so the unmount will remove the vnode._dom\n\tif (component && vnode._flags & MODE_HYDRATE) {\n\t\tvnode.type = null;\n\t}\n\n\tif (oldUnmount) oldUnmount(vnode);\n};\n\nfunction detachedClone(vnode, detachedParent, parentDom) {\n\tif (vnode) {\n\t\tif (vnode._component && vnode._component.__hooks) {\n\t\t\tvnode._component.__hooks._list.forEach(effect => {\n\t\t\t\tif (typeof effect._cleanup == 'function') effect._cleanup();\n\t\t\t});\n\n\t\t\tvnode._component.__hooks = null;\n\t\t}\n\n\t\tvnode = assign({}, vnode);\n\t\tif (vnode._component != null) {\n\t\t\tif (vnode._component._parentDom === parentDom) {\n\t\t\t\tvnode._component._parentDom = detachedParent;\n\t\t\t}\n\n\t\t\tvnode._component._force = true;\n\n\t\t\tvnode._component = null;\n\t\t}\n\n\t\tvnode._children =\n\t\t\tvnode._children &&\n\t\t\tvnode._children.map(child =>\n\t\t\t\tdetachedClone(child, detachedParent, parentDom)\n\t\t\t);\n\t}\n\n\treturn vnode;\n}\n\nfunction removeOriginal(vnode, detachedParent, originalParent) {\n\tif (vnode && originalParent) {\n\t\tvnode._original = null;\n\t\tvnode._children =\n\t\t\tvnode._children &&\n\t\t\tvnode._children.map(child =>\n\t\t\t\tremoveOriginal(child, detachedParent, originalParent)\n\t\t\t);\n\n\t\tif (vnode._component) {\n\t\t\tif (vnode._component._parentDom === detachedParent) {\n\t\t\t\tif (vnode._dom) {\n\t\t\t\t\toriginalParent.appendChild(vnode._dom);\n\t\t\t\t}\n\t\t\t\tvnode._component._force = true;\n\t\t\t\tvnode._component._parentDom = originalParent;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn vnode;\n}\n\n// having custom inheritance instead of a class here saves a lot of bytes\nexport function Suspense() {\n\t// we do not call super here to golf some bytes...\n\tthis._pendingSuspensionCount = 0;\n\tthis._suspenders = null;\n\tthis._detachOnNextRender = null;\n}\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspense.prototype = new Component();\n\n/**\n * @this {import('./internal').SuspenseComponent}\n * @param {Promise} promise The thrown promise\n * @param {import('./internal').VNode<any, any>} suspendingVNode The suspending component\n */\nSuspense.prototype._childDidSuspend = function (promise, suspendingVNode) {\n\tconst suspendingComponent = suspendingVNode._component;\n\n\t/** @type {import('./internal').SuspenseComponent} */\n\tconst c = this;\n\n\tif (c._suspenders == null) {\n\t\tc._suspenders = [];\n\t}\n\tc._suspenders.push(suspendingComponent);\n\n\tconst resolve = suspended(c._vnode);\n\n\tlet resolved = false;\n\tconst onResolved = () => {\n\t\tif (resolved) return;\n\n\t\tresolved = true;\n\t\tsuspendingComponent._onResolve = null;\n\n\t\tif (resolve) {\n\t\t\tresolve(onSuspensionComplete);\n\t\t} else {\n\t\t\tonSuspensionComplete();\n\t\t}\n\t};\n\n\tsuspendingComponent._onResolve = onResolved;\n\n\tconst onSuspensionComplete = () => {\n\t\tif (!--c._pendingSuspensionCount) {\n\t\t\t// If the suspension was during hydration we don't need to restore the\n\t\t\t// suspended children into the _children array\n\t\t\tif (c.state._suspended) {\n\t\t\t\tconst suspendedVNode = c.state._suspended;\n\t\t\t\tc._vnode._children[0] = removeOriginal(\n\t\t\t\t\tsuspendedVNode,\n\t\t\t\t\tsuspendedVNode._component._parentDom,\n\t\t\t\t\tsuspendedVNode._component._originalParentDom\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tc.setState({ _suspended: (c._detachOnNextRender = null) });\n\n\t\t\tlet suspended;\n\t\t\twhile ((suspended = c._suspenders.pop())) {\n\t\t\t\tsuspended.forceUpdate();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * We do not set `suspended: true` during hydration because we want the actual markup\n\t * to remain on screen and hydrate it when the suspense actually gets resolved.\n\t * While in non-hydration cases the usual fallback -> component flow would occour.\n\t */\n\tif (\n\t\t!c._pendingSuspensionCount++ &&\n\t\t!(suspendingVNode._flags & MODE_HYDRATE)\n\t) {\n\t\tc.setState({ _suspended: (c._detachOnNextRender = c._vnode._children[0]) });\n\t}\n\tpromise.then(onResolved, onResolved);\n};\n\nSuspense.prototype.componentWillUnmount = function () {\n\tthis._suspenders = [];\n};\n\n/**\n * @this {import('./internal').SuspenseComponent}\n * @param {import('./internal').SuspenseComponent[\"props\"]} props\n * @param {import('./internal').SuspenseState} state\n */\nSuspense.prototype.render = function (props, state) {\n\tif (this._detachOnNextRender) {\n\t\t// When the Suspense's _vnode was created by a call to createVNode\n\t\t// (i.e. due to a setState further up in the tree)\n\t\t// it's _children prop is null, in this case we \"forget\" about the parked vnodes to detach\n\t\tif (this._vnode._children) {\n\t\t\tconst detachedParent = document.createElement('div');\n\t\t\tconst detachedComponent = this._vnode._children[0]._component;\n\t\t\tthis._vnode._children[0] = detachedClone(\n\t\t\t\tthis._detachOnNextRender,\n\t\t\t\tdetachedParent,\n\t\t\t\t(detachedComponent._originalParentDom = detachedComponent._parentDom)\n\t\t\t);\n\t\t}\n\n\t\tthis._detachOnNextRender = null;\n\t}\n\n\t// Wrap fallback tree in a VNode that prevents itself from being marked as aborting mid-hydration:\n\t/** @type {import('./internal').VNode} */\n\tconst fallback =\n\t\tstate._suspended && createElement(Fragment, null, props.fallback);\n\tif (fallback) fallback._flags &= ~MODE_HYDRATE;\n\n\treturn [\n\t\tcreateElement(Fragment, null, state._suspended ? null : props.children),\n\t\tfallback\n\t];\n};\n\n/**\n * Checks and calls the parent component's _suspended method, passing in the\n * suspended vnode. This is a way for a parent (e.g. SuspenseList) to get notified\n * that one of its children/descendants suspended.\n *\n * The parent MAY return a callback. The callback will get called when the\n * suspension resolves, notifying the parent of the fact.\n * Moreover, the callback gets function `unsuspend` as a parameter. The resolved\n * child descendant will not actually get unsuspended until `unsuspend` gets called.\n * This is a way for the parent to delay unsuspending.\n *\n * If the parent does not return a callback then the resolved vnode\n * gets unsuspended immediately when it resolves.\n *\n * @param {import('./internal').VNode} vnode\n * @returns {((unsuspend: () => void) => void)?}\n */\nexport function suspended(vnode) {\n\t/** @type {import('./internal').Component} */\n\tlet component = vnode._parent._component;\n\treturn component && component._suspended && component._suspended(vnode);\n}\n\nexport function lazy(loader) {\n\tlet prom;\n\tlet component = null;\n\tlet error;\n\tlet resolved;\n\n\tfunction Lazy(props) {\n\t\tif (!prom) {\n\t\t\tprom = loader();\n\t\t\tprom.then(\n\t\t\t\texports => {\n\t\t\t\t\tif (exports) {\n\t\t\t\t\t\tcomponent = exports.default || exports;\n\t\t\t\t\t}\n\t\t\t\t\tresolved = true;\n\t\t\t\t},\n\t\t\t\te => {\n\t\t\t\t\terror = e;\n\t\t\t\t\tresolved = true;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (!resolved) {\n\t\t\tthrow prom;\n\t\t}\n\n\t\treturn component ? createElement(component, props) : null;\n\t}\n\n\tLazy.displayName = 'Lazy';\n\tLazy._forwarded = true;\n\treturn Lazy;\n}\n", "import { Component, toChildArray } from 'preact';\nimport { suspended } from './suspense.js';\n\n// Indexes to linked list nodes (nodes are stored as arrays to save bytes).\nconst SUSPENDED_COUNT = 0;\nconst RESOLVED_COUNT = 1;\nconst NEXT_NODE = 2;\n\n// Having custom inheritance instead of a class here saves a lot of bytes.\nexport function SuspenseList() {\n\tthis._next = null;\n\tthis._map = null;\n}\n\n// Mark one of child's earlier suspensions as resolved.\n// Some pending callbacks may become callable due to this\n// (e.g. the last suspended descendant gets resolved when\n// revealOrder === 'together'). Process those callbacks as well.\nconst resolve = (list, child, node) => {\n\tif (++node[RESOLVED_COUNT] === node[SUSPENDED_COUNT]) {\n\t\t// The number a child (or any of its descendants) has been suspended\n\t\t// matches the number of times it's been resolved. Therefore we\n\t\t// mark the child as completely resolved by deleting it from ._map.\n\t\t// This is used to figure out when *all* children have been completely\n\t\t// resolved when revealOrder is 'together'.\n\t\tlist._map.delete(child);\n\t}\n\n\t// If revealOrder is falsy then we can do an early exit, as the\n\t// callbacks won't get queued in the node anyway.\n\t// If revealOrder is 'together' then also do an early exit\n\t// if all suspended descendants have not yet been resolved.\n\tif (\n\t\t!list.props.revealOrder ||\n\t\t(list.props.revealOrder[0] === 't' && list._map.size)\n\t) {\n\t\treturn;\n\t}\n\n\t// Walk the currently suspended children in order, calling their\n\t// stored callbacks on the way. Stop if we encounter a child that\n\t// has not been completely resolved yet.\n\tnode = list._next;\n\twhile (node) {\n\t\twhile (node.length > 3) {\n\t\t\tnode.pop()();\n\t\t}\n\t\tif (node[RESOLVED_COUNT] < node[SUSPENDED_COUNT]) {\n\t\t\tbreak;\n\t\t}\n\t\tlist._next = node = node[NEXT_NODE];\n\t}\n};\n\n// Things we do here to save some bytes but are not proper JS inheritance:\n// - call `new Component()` as the prototype\n// - do not set `Suspense.prototype.constructor` to `Suspense`\nSuspenseList.prototype = new Component();\n\nSuspenseList.prototype._suspended = function (child) {\n\tconst list = this;\n\tconst delegated = suspended(list._vnode);\n\n\tlet node = list._map.get(child);\n\tnode[SUSPENDED_COUNT]++;\n\n\treturn unsuspend => {\n\t\tconst wrappedUnsuspend = () => {\n\t\t\tif (!list.props.revealOrder) {\n\t\t\t\t// Special case the undefined (falsy) revealOrder, as there\n\t\t\t\t// is no need to coordinate a specific order or unsuspends.\n\t\t\t\tunsuspend();\n\t\t\t} else {\n\t\t\t\tnode.push(unsuspend);\n\t\t\t\tresolve(list, child, node);\n\t\t\t}\n\t\t};\n\t\tif (delegated) {\n\t\t\tdelegated(wrappedUnsuspend);\n\t\t} else {\n\t\t\twrappedUnsuspend();\n\t\t}\n\t};\n};\n\nSuspenseList.prototype.render = function (props) {\n\tthis._next = null;\n\tthis._map = new Map();\n\n\tconst children = toChildArray(props.children);\n\tif (props.revealOrder && props.revealOrder[0] === 'b') {\n\t\t// If order === 'backwards' (or, well, anything starting with a 'b')\n\t\t// then flip the child list around so that the last child will be\n\t\t// the first in the linked list.\n\t\tchildren.reverse();\n\t}\n\t// Build the linked list. Iterate through the children in reverse order\n\t// so that `_next` points to the first linked list node to be resolved.\n\tfor (let i = children.length; i--; ) {\n\t\t// Create a new linked list node as an array of form:\n\t\t// \t[suspended_count, resolved_count, next_node]\n\t\t// where suspended_count and resolved_count are numeric counters for\n\t\t// keeping track how many times a node has been suspended and resolved.\n\t\t//\n\t\t// Note that suspended_count starts from 1 instead of 0, so we can block\n\t\t// processing callbacks until componentDidMount has been called. In a sense\n\t\t// node is suspended at least until componentDidMount gets called!\n\t\t//\n\t\t// Pending callbacks are added to the end of the node:\n\t\t// \t[suspended_count, resolved_count, next_node, callback_0, callback_1, ...]\n\t\tthis._map.set(children[i], (this._next = [1, 0, this._next]));\n\t}\n\treturn props.children;\n};\n\nSuspenseList.prototype.componentDidUpdate =\n\tSuspenseList.prototype.componentDidMount = function () {\n\t\t// Iterate through all children after mounting for two reasons:\n\t\t// 1. As each node[SUSPENDED_COUNT] starts from 1, this iteration increases\n\t\t//    each node[RELEASED_COUNT] by 1, therefore balancing the counters.\n\t\t//    The nodes can now be completely consumed from the linked list.\n\t\t// 2. Handle nodes that might have gotten resolved between render and\n\t\t//    componentDidMount.\n\t\tthis._map.forEach((node, child) => {\n\t\t\tresolve(this, child, node);\n\t\t});\n\t};\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const NULL = null;\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { createElement, render } from 'preact';\n\n/**\n * @param {import('../../src/index').RenderableProps<{ context: any }>} props\n */\nfunction ContextProvider(props) {\n\tthis.getChildContext = () => props.context;\n\treturn props.children;\n}\n\n/**\n * Portal component\n * @this {import('./internal').Component}\n * @param {object | null | undefined} props\n *\n * TODO: use createRoot() instead of fake root\n */\nfunction Portal(props) {\n\tconst _this = this;\n\tlet container = props._container;\n\n\t_this.componentWillUnmount = function () {\n\t\trender(null, _this._temp);\n\t\t_this._temp = null;\n\t\t_this._container = null;\n\t};\n\n\t// When we change container we should clear our old container and\n\t// indicate a new mount.\n\tif (_this._container && _this._container !== container) {\n\t\t_this.componentWillUnmount();\n\t}\n\n\tif (!_this._temp) {\n\t\t// Ensure the element has a mask for useId invocations\n\t\tlet root = _this._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\t_this._container = container;\n\n\t\t// Create a fake DOM parent node that manages a subset of `container`'s children:\n\t\t_this._temp = {\n\t\t\tnodeType: 1,\n\t\t\tparentNode: container,\n\t\t\tchildNodes: [],\n\t\t\t_children: { _mask: root._mask },\n\t\t\tcontains: () => true,\n\t\t\tinsertBefore(child, before) {\n\t\t\t\tthis.childNodes.push(child);\n\t\t\t\t_this._container.insertBefore(child, before);\n\t\t\t},\n\t\t\tremoveChild(child) {\n\t\t\t\tthis.childNodes.splice(this.childNodes.indexOf(child) >>> 1, 1);\n\t\t\t\t_this._container.removeChild(child);\n\t\t\t}\n\t\t};\n\t}\n\n\t// Render our wrapping element into temp.\n\trender(\n\t\tcreateElement(ContextProvider, { context: _this.context }, props._vnode),\n\t\t_this._temp\n\t);\n}\n\n/**\n * Create a `Portal` to continue rendering the vnode tree at a different DOM node\n * @param {import('./internal').VNode} vnode The vnode to render\n * @param {import('./internal').PreactElement} container The DOM node to continue rendering in to.\n */\nexport function createPortal(vnode, container) {\n\tconst el = createElement(Portal, { _vnode: vnode, _container: container });\n\tel.containerInfo = container;\n\treturn el;\n}\n", "import {\n\trender as preactRender,\n\thydrate as preactHydrate,\n\toptions,\n\ttoChildArray,\n\tComponent\n} from 'preact';\nimport {\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue,\n\tuseEffect,\n\tuseId,\n\tuseImperativeHandle,\n\tuseLayoutEffect,\n\tuseMemo,\n\tuseReducer,\n\tuseRef,\n\tuseState\n} from 'preact/hooks';\nimport {\n\tuseDeferredValue,\n\tuseInsertionEffect,\n\tuseSyncExternalStore,\n\tuseTransition\n} from './index';\n\nexport const REACT_ELEMENT_TYPE =\n\t(typeof Symbol != 'undefined' && Symbol.for && Symbol.for('react.element')) ||\n\t0xeac7;\n\nconst CAMEL_PROPS =\n\t/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/;\nconst ON_ANI = /^on(Ani|Tra|Tou|BeforeInp|Compo)/;\nconst CAMEL_REPLACE = /[A-Z0-9]/g;\nconst IS_DOM = typeof document !== 'undefined';\n\n// Input types for which onchange should not be converted to oninput.\n// type=\"file|checkbox|radio\", plus \"range\" in IE11.\n// (IE11 doesn't support Symbol, which we use here to turn `rad` into `ra` which matches \"range\")\nconst onChangeInputType = type =>\n\t(typeof Symbol != 'undefined' && typeof Symbol() == 'symbol'\n\t\t? /fil|che|rad/\n\t\t: /fil|che|ra/\n\t).test(type);\n\n// Some libraries like `react-virtualized` explicitly check for this.\nComponent.prototype.isReactComponent = {};\n\n// `UNSAFE_*` lifecycle hooks\n// Preact only ever invokes the unprefixed methods.\n// Here we provide a base \"fallback\" implementation that calls any defined UNSAFE_ prefixed method.\n// - If a component defines its own `componentDidMount()` (including via defineProperty), use that.\n// - If a component defines `UNSAFE_componentDidMount()`, `componentDidMount` is the alias getter/setter.\n// - If anything assigns to an `UNSAFE_*` property, the assignment is forwarded to the unprefixed property.\n// See https://github.com/preactjs/preact/issues/1941\n[\n\t'componentWillMount',\n\t'componentWillReceiveProps',\n\t'componentWillUpdate'\n].forEach(key => {\n\tObject.defineProperty(Component.prototype, key, {\n\t\tconfigurable: true,\n\t\tget() {\n\t\t\treturn this['UNSAFE_' + key];\n\t\t},\n\t\tset(v) {\n\t\t\tObject.defineProperty(this, key, {\n\t\t\t\tconfigurable: true,\n\t\t\t\twritable: true,\n\t\t\t\tvalue: v\n\t\t\t});\n\t\t}\n\t});\n});\n\n/**\n * Proxy render() since React returns a Component reference.\n * @param {import('./internal').VNode} vnode VNode tree to render\n * @param {import('./internal').PreactElement} parent DOM node to render vnode tree into\n * @param {() => void} [callback] Optional callback that will be called after rendering\n * @returns {import('./internal').Component | null} The root component reference or null\n */\nexport function render(vnode, parent, callback) {\n\t// React destroys any existing DOM nodes, see #1727\n\t// ...but only on the first render, see #1828\n\tif (parent._children == null) {\n\t\tparent.textContent = '';\n\t}\n\n\tpreactRender(vnode, parent);\n\tif (typeof callback == 'function') callback();\n\n\treturn vnode ? vnode._component : null;\n}\n\nexport function hydrate(vnode, parent, callback) {\n\tpreactHydrate(vnode, parent);\n\tif (typeof callback == 'function') callback();\n\n\treturn vnode ? vnode._component : null;\n}\n\nlet oldEventHook = options.event;\noptions.event = e => {\n\tif (oldEventHook) e = oldEventHook(e);\n\n\te.persist = empty;\n\te.isPropagationStopped = isPropagationStopped;\n\te.isDefaultPrevented = isDefaultPrevented;\n\treturn (e.nativeEvent = e);\n};\n\nfunction empty() {}\n\nfunction isPropagationStopped() {\n\treturn this.cancelBubble;\n}\n\nfunction isDefaultPrevented() {\n\treturn this.defaultPrevented;\n}\n\nconst classNameDescriptorNonEnumberable = {\n\tenumerable: false,\n\tconfigurable: true,\n\tget() {\n\t\treturn this.class;\n\t}\n};\n\nfunction handleDomVNode(vnode) {\n\tlet props = vnode.props,\n\t\ttype = vnode.type,\n\t\tnormalizedProps = {};\n\n\tlet isNonDashedType = type.indexOf('-') === -1;\n\tfor (let i in props) {\n\t\tlet value = props[i];\n\n\t\tif (\n\t\t\t(i === 'value' && 'defaultValue' in props && value == null) ||\n\t\t\t// Emulate React's behavior of not rendering the contents of noscript tags on the client.\n\t\t\t(IS_DOM && i === 'children' && type === 'noscript') ||\n\t\t\ti === 'class' ||\n\t\t\ti === 'className'\n\t\t) {\n\t\t\t// Skip applying value if it is null/undefined and we already set\n\t\t\t// a default value\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet lowerCased = i.toLowerCase();\n\t\tif (i === 'defaultValue' && 'value' in props && props.value == null) {\n\t\t\t// `defaultValue` is treated as a fallback `value` when a value prop is present but null/undefined.\n\t\t\t// `defaultValue` for Elements with no value prop is the same as the DOM defaultValue property.\n\t\t\ti = 'value';\n\t\t} else if (i === 'download' && value === true) {\n\t\t\t// Calling `setAttribute` with a truthy value will lead to it being\n\t\t\t// passed as a stringified value, e.g. `download=\"true\"`. React\n\t\t\t// converts it to an empty string instead, otherwise the attribute\n\t\t\t// value will be used as the file name and the file will be called\n\t\t\t// \"true\" upon downloading it.\n\t\t\tvalue = '';\n\t\t} else if (lowerCased === 'translate' && value === 'no') {\n\t\t\tvalue = false;\n\t\t} else if (lowerCased[0] === 'o' && lowerCased[1] === 'n') {\n\t\t\tif (lowerCased === 'ondoubleclick') {\n\t\t\t\ti = 'ondblclick';\n\t\t\t} else if (\n\t\t\t\tlowerCased === 'onchange' &&\n\t\t\t\t(type === 'input' || type === 'textarea') &&\n\t\t\t\t!onChangeInputType(props.type)\n\t\t\t) {\n\t\t\t\tlowerCased = i = 'oninput';\n\t\t\t} else if (lowerCased === 'onfocus') {\n\t\t\t\ti = 'onfocusin';\n\t\t\t} else if (lowerCased === 'onblur') {\n\t\t\t\ti = 'onfocusout';\n\t\t\t} else if (ON_ANI.test(i)) {\n\t\t\t\ti = lowerCased;\n\t\t\t}\n\t\t} else if (isNonDashedType && CAMEL_PROPS.test(i)) {\n\t\t\ti = i.replace(CAMEL_REPLACE, '-$&').toLowerCase();\n\t\t} else if (value === null) {\n\t\t\tvalue = undefined;\n\t\t}\n\n\t\t// Add support for onInput and onChange, see #3561\n\t\t// if we have an oninput prop already change it to oninputCapture\n\t\tif (lowerCased === 'oninput') {\n\t\t\ti = lowerCased;\n\t\t\tif (normalizedProps[i]) {\n\t\t\t\ti = 'oninputCapture';\n\t\t\t}\n\t\t}\n\n\t\tnormalizedProps[i] = value;\n\t}\n\n\t// Add support for array select values: <select multiple value={[]} />\n\tif (\n\t\ttype == 'select' &&\n\t\tnormalizedProps.multiple &&\n\t\tArray.isArray(normalizedProps.value)\n\t) {\n\t\t// forEach() always returns undefined, which we abuse here to unset the value prop.\n\t\tnormalizedProps.value = toChildArray(props.children).forEach(child => {\n\t\t\tchild.props.selected =\n\t\t\t\tnormalizedProps.value.indexOf(child.props.value) != -1;\n\t\t});\n\t}\n\n\t// Adding support for defaultValue in select tag\n\tif (type == 'select' && normalizedProps.defaultValue != null) {\n\t\tnormalizedProps.value = toChildArray(props.children).forEach(child => {\n\t\t\tif (normalizedProps.multiple) {\n\t\t\t\tchild.props.selected =\n\t\t\t\t\tnormalizedProps.defaultValue.indexOf(child.props.value) != -1;\n\t\t\t} else {\n\t\t\t\tchild.props.selected =\n\t\t\t\t\tnormalizedProps.defaultValue == child.props.value;\n\t\t\t}\n\t\t});\n\t}\n\n\tif (props.class && !props.className) {\n\t\tnormalizedProps.class = props.class;\n\t\tObject.defineProperty(\n\t\t\tnormalizedProps,\n\t\t\t'className',\n\t\t\tclassNameDescriptorNonEnumberable\n\t\t);\n\t} else if (props.className && !props.class) {\n\t\tnormalizedProps.class = normalizedProps.className = props.className;\n\t} else if (props.class && props.className) {\n\t\tnormalizedProps.class = normalizedProps.className = props.className;\n\t}\n\n\tvnode.props = normalizedProps;\n}\n\nlet oldVNodeHook = options.vnode;\noptions.vnode = vnode => {\n\t// only normalize props on Element nodes\n\tif (typeof vnode.type === 'string') {\n\t\thandleDomVNode(vnode);\n\t}\n\n\tvnode.$$typeof = REACT_ELEMENT_TYPE;\n\n\tif (oldVNodeHook) oldVNodeHook(vnode);\n};\n\n// Only needed for react-relay\nlet currentComponent;\nconst oldBeforeRender = options._render;\noptions._render = function (vnode) {\n\tif (oldBeforeRender) {\n\t\toldBeforeRender(vnode);\n\t}\n\tcurrentComponent = vnode._component;\n};\n\nconst oldDiffed = options.diffed;\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.diffed = function (vnode) {\n\tif (oldDiffed) {\n\t\toldDiffed(vnode);\n\t}\n\n\tconst props = vnode.props;\n\tconst dom = vnode._dom;\n\n\tif (\n\t\tdom != null &&\n\t\tvnode.type === 'textarea' &&\n\t\t'value' in props &&\n\t\tprops.value !== dom.value\n\t) {\n\t\tdom.value = props.value == null ? '' : props.value;\n\t}\n\n\tcurrentComponent = null;\n};\n\n// This is a very very private internal function for React it\n// is used to sort-of do runtime dependency injection.\nexport const __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = {\n\tReactCurrentDispatcher: {\n\t\tcurrent: {\n\t\t\treadContext(context) {\n\t\t\t\treturn currentComponent._globalContext[context._id].props.value;\n\t\t\t},\n\t\t\tuseCallback,\n\t\t\tuseContext,\n\t\t\tuseDebugValue,\n\t\t\tuseDeferredValue,\n\t\t\tuseEffect,\n\t\t\tuseId,\n\t\t\tuseImperativeHandle,\n\t\t\tuseInsertionEffect,\n\t\t\tuseLayoutEffect,\n\t\t\tuseMemo,\n\t\t\t// useMutableSource, // experimental-only and replaced by uSES, likely not worth supporting\n\t\t\tuseReducer,\n\t\t\tuseRef,\n\t\t\tuseState,\n\t\t\tuseSyncExternalStore,\n\t\t\tuseTransition\n\t\t}\n\t}\n};\n", "import {\n\tcreateElement,\n\trender as preactRender,\n\tcloneElement as preactCloneElement,\n\tcreateRef,\n\tComponent,\n\tcreateContext,\n\tFragment\n} from 'preact';\nimport {\n\tuseState,\n\tuseId,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue\n} from 'preact/hooks';\nimport {\n\tuseInsertionEffect,\n\tstartTransition,\n\tuseDeferredValue,\n\tuseSyncExternalStore,\n\tuseTransition\n} from './hooks';\nimport { PureComponent } from './PureComponent';\nimport { memo } from './memo';\nimport { forwardRef } from './forwardRef';\nimport { Children } from './Children';\nimport { Suspense, lazy } from './suspense';\nimport { SuspenseList } from './suspense-list';\nimport { createPortal } from './portals';\nimport {\n\thydrate,\n\trender,\n\tREACT_ELEMENT_TYPE,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n} from './render';\n\nconst version = '18.3.1'; // trick libraries to think we are react\n\n/**\n * Legacy version of createElement.\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor\n */\nfunction createFactory(type) {\n\treturn createElement.bind(null, type);\n}\n\n/**\n * Check if the passed element is a valid (p)react node.\n * @param {*} element The element to check\n * @returns {boolean}\n */\nfunction isValidElement(element) {\n\treturn !!element && element.$$typeof === REACT_ELEMENT_TYPE;\n}\n\n/**\n * Check if the passed element is a Fragment node.\n * @param {*} element The element to check\n * @returns {boolean}\n */\nfunction isFragment(element) {\n\treturn isValidElement(element) && element.type === Fragment;\n}\n\n/**\n * Check if the passed element is a Memo node.\n * @param {*} element The element to check\n * @returns {boolean}\n */\nfunction isMemo(element) {\n\treturn (\n\t\t!!element &&\n\t\t!!element.displayName &&\n\t\t(typeof element.displayName === 'string' ||\n\t\t\telement.displayName instanceof String) &&\n\t\telement.displayName.startsWith('Memo(')\n\t);\n}\n\n/**\n * Wrap `cloneElement` to abort if the passed element is not a valid element and apply\n * all vnode normalizations.\n * @param {import('./internal').VNode} element The vnode to clone\n * @param {object} props Props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Optional component children\n */\nfunction cloneElement(element) {\n\tif (!isValidElement(element)) return element;\n\treturn preactCloneElement.apply(null, arguments);\n}\n\n/**\n * Remove a component tree from the DOM, including state and event handlers.\n * @param {import('./internal').PreactElement} container\n * @returns {boolean}\n */\nfunction unmountComponentAtNode(container) {\n\tif (container._children) {\n\t\tpreactRender(null, container);\n\t\treturn true;\n\t}\n\treturn false;\n}\n\n/**\n * Get the matching DOM node for a component\n * @param {import('./internal').Component} component\n * @returns {import('./internal').PreactElement | null}\n */\nfunction findDOMNode(component) {\n\treturn (\n\t\t(component &&\n\t\t\t(component.base || (component.nodeType === 1 && component))) ||\n\t\tnull\n\t);\n}\n\n/**\n * Deprecated way to control batched rendering inside the reconciler, but we\n * already schedule in batches inside our rendering code\n * @template Arg\n * @param {(arg: Arg) => void} callback function that triggers the updated\n * @param {Arg} [arg] Optional argument that can be passed to the callback\n */\n// eslint-disable-next-line camelcase\nconst unstable_batchedUpdates = (callback, arg) => callback(arg);\n\n/**\n * In React, `flushSync` flushes the entire tree and forces a rerender. It's\n * implmented here as a no-op.\n * @template Arg\n * @template Result\n * @param {(arg: Arg) => Result} callback function that runs before the flush\n * @param {Arg} [arg] Optional argument that can be passed to the callback\n * @returns\n */\nconst flushSync = (callback, arg) => callback(arg);\n\n/**\n * Strict Mode is not implemented in Preact, so we provide a stand-in for it\n * that just renders its children without imposing any restrictions.\n */\nconst StrictMode = Fragment;\n\n// compat to react-is\nexport const isElement = isValidElement;\n\nexport * from 'preact/hooks';\nexport {\n\tversion,\n\tChildren,\n\trender,\n\thydrate,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tisFragment,\n\tisMemo,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\tflushSync,\n\tuseInsertionEffect,\n\tstartTransition,\n\tuseDeferredValue,\n\tuseSyncExternalStore,\n\tuseTransition,\n\t// eslint-disable-next-line camelcase\n\tunstable_batchedUpdates,\n\tStrictMode,\n\tSuspense,\n\tSuspenseList,\n\tlazy,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n};\n\n// React copies the named exports to the default one.\nexport default {\n\tuseState,\n\tuseId,\n\tuseReducer,\n\tuseEffect,\n\tuseLayoutEffect,\n\tuseInsertionEffect,\n\tuseTransition,\n\tuseDeferredValue,\n\tuseSyncExternalStore,\n\tstartTransition,\n\tuseRef,\n\tuseImperativeHandle,\n\tuseMemo,\n\tuseCallback,\n\tuseContext,\n\tuseDebugValue,\n\tversion,\n\tChildren,\n\trender,\n\thydrate,\n\tunmountComponentAtNode,\n\tcreatePortal,\n\tcreateElement,\n\tcreateContext,\n\tcreateFactory,\n\tcloneElement,\n\tcreateRef,\n\tFragment,\n\tisValidElement,\n\tisElement,\n\tisFragment,\n\tisMemo,\n\tfindDOMNode,\n\tComponent,\n\tPureComponent,\n\tmemo,\n\tforwardRef,\n\tflushSync,\n\tunstable_batchedUpdates,\n\tStrictMode,\n\tSuspense,\n\tSuspenseList,\n\tlazy,\n\t__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\n};\n", "import findDOMElement from '@uppy/utils/lib/findDOMElement';\nimport getTextDirection from '@uppy/utils/lib/getTextDirection';\nimport { render } from 'preact/compat';\nimport BasePlugin from './BasePlugin.js';\n/**\n * Defer a frequent call to the microtask queue.\n */\nfunction debounce(fn) {\n    let calling = null;\n    let latestArgs;\n    return (...args) => {\n        latestArgs = args;\n        if (!calling) {\n            calling = Promise.resolve().then(() => {\n                calling = null;\n                // At this point `args` may be different from the most\n                // recent state, if multiple calls happened since this task\n                // was queued. So we use the `latestArgs`, which definitely\n                // is the most recent call.\n                return fn(...latestArgs);\n            });\n        }\n        return calling;\n    };\n}\n/**\n * UIPlugin is the extended version of BasePlugin to incorporate rendering with Preact.\n * Use this for plugins that need a user interface.\n *\n * For plugins without an user interface, see BasePlugin.\n */\nclass UIPlugin extends BasePlugin {\n    #updateUI;\n    isTargetDOMEl;\n    el;\n    parent;\n    title;\n    getTargetPlugin(target) {\n        let targetPlugin;\n        if (typeof target?.addTarget === 'function') {\n            // Targeting a plugin *instance*\n            targetPlugin = target;\n            if (!(targetPlugin instanceof UIPlugin)) {\n                console.warn(new Error('The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.', { cause: { targetPlugin, UIPlugin } }));\n            }\n        }\n        else if (typeof target === 'function') {\n            // Targeting a plugin type\n            const Target = target;\n            // Find the target plugin instance.\n            this.uppy.iteratePlugins((p) => {\n                if (p instanceof Target) {\n                    targetPlugin = p;\n                }\n            });\n        }\n        return targetPlugin;\n    }\n    /**\n     * Check if supplied `target` is a DOM element or an `object`.\n     * If it\u2019s an object \u2014 target is a plugin, and we search `plugins`\n     * for a plugin with same name and return its target.\n     */\n    mount(target, plugin) {\n        const callerPluginName = plugin.id;\n        const targetElement = findDOMElement(target);\n        if (targetElement) {\n            this.isTargetDOMEl = true;\n            // When target is <body> with a single <div> element,\n            // Preact thinks it\u2019s the Uppy root element in there when doing a diff,\n            // and destroys it. So we are creating a fragment (could be empty div)\n            const uppyRootElement = document.createElement('div');\n            uppyRootElement.classList.add('uppy-Root');\n            // API for plugins that require a synchronous rerender.\n            this.#updateUI = debounce((state) => {\n                // plugin could be removed, but this.rerender is debounced below,\n                // so it could still be called even after uppy.removePlugin or uppy.destroy\n                // hence the check\n                if (!this.uppy.getPlugin(this.id))\n                    return;\n                render(this.render(state, uppyRootElement), uppyRootElement);\n                this.afterUpdate();\n            });\n            this.uppy.log(`Installing ${callerPluginName} to a DOM element '${target}'`);\n            if (this.opts.replaceTargetContent) {\n                // Doing render(h(null), targetElement), which should have been\n                // a better way, since because the component might need to do additional cleanup when it is removed,\n                // stopped working \u2014 Preact just adds null into target, not replacing\n                targetElement.innerHTML = '';\n            }\n            render(this.render(this.uppy.getState(), uppyRootElement), uppyRootElement);\n            this.el = uppyRootElement;\n            targetElement.appendChild(uppyRootElement);\n            // Set the text direction if the page has not defined one.\n            uppyRootElement.dir =\n                this.opts.direction || getTextDirection(uppyRootElement) || 'ltr';\n            this.onMount();\n            return this.el;\n        }\n        const targetPlugin = this.getTargetPlugin(target);\n        if (targetPlugin) {\n            this.uppy.log(`Installing ${callerPluginName} to ${targetPlugin.id}`);\n            this.parent = targetPlugin;\n            this.el = targetPlugin.addTarget(plugin);\n            this.onMount();\n            return this.el;\n        }\n        this.uppy.log(`Not installing ${callerPluginName}`);\n        let message = `Invalid target option given to ${callerPluginName}.`;\n        if (typeof target === 'function') {\n            message +=\n                ' The given target is not a Plugin class. ' +\n                    \"Please check that you're not specifying a React Component instead of a plugin. \" +\n                    'If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: ' +\n                    'run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.';\n        }\n        else {\n            message +=\n                'If you meant to target an HTML element, please make sure that the element exists. ' +\n                    'Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. ' +\n                    '(see https://github.com/transloadit/uppy/issues/1042)\\n\\n' +\n                    'If you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.';\n        }\n        throw new Error(message);\n    }\n    /**\n     * Called when plugin is mounted, whether in DOM or into another plugin.\n     * Needed because sometimes plugins are mounted separately/after `install`,\n     * so this.el and this.parent might not be available in `install`.\n     * This is the case with @uppy/react plugins, for example.\n     */\n    render(state, container) {\n        throw new Error('Extend the render method to add your plugin to a DOM element');\n    }\n    update(state) {\n        if (this.el != null) {\n            this.#updateUI?.(state);\n        }\n    }\n    unmount() {\n        if (this.isTargetDOMEl) {\n            this.el?.remove();\n        }\n        this.onUnmount();\n    }\n    onMount() { }\n    onUnmount() { }\n}\nexport default UIPlugin;\n", "{\n  \"name\": \"@uppy/store-default\",\n  \"description\": \"The default simple object-based store for Uppy.\",\n  \"version\": \"4.3.2\",\n  \"license\": \"MIT\",\n  \"main\": \"lib/index.js\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --environment=jsdom --silent='passed-only'\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\",\n    \"uppy-store\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"devDependencies\": {\n    \"jsdom\": \"^26.1.0\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ]\n}", "import packageJson from '../package.json' with { type: 'json' };\n/**\n * Default store that keeps state in a simple object.\n */\nclass DefaultStore {\n    static VERSION = packageJson.version;\n    state = {};\n    #callbacks = new Set();\n    getState() {\n        return this.state;\n    }\n    setState(patch) {\n        const prevState = { ...this.state };\n        const nextState = { ...this.state, ...patch };\n        this.state = nextState;\n        this.#publish(prevState, nextState, patch);\n    }\n    subscribe(listener) {\n        this.#callbacks.add(listener);\n        return () => {\n            this.#callbacks.delete(listener);\n        };\n    }\n    #publish(...args) {\n        this.#callbacks.forEach((listener) => {\n            listener(...args);\n        });\n    }\n}\nexport default DefaultStore;\n", "/**\n * Takes a full filename string and returns an object {name, extension}\n */\nexport default function getFileNameAndExtension(fullFileName) {\n    const lastDot = fullFileName.lastIndexOf('.');\n    // these count as no extension: \"no-dot\", \"trailing-dot.\"\n    if (lastDot === -1 || lastDot === fullFileName.length - 1) {\n        return {\n            name: fullFileName,\n            extension: undefined,\n        };\n    }\n    return {\n        name: fullFileName.slice(0, lastDot),\n        extension: fullFileName.slice(lastDot + 1),\n    };\n}\n", "// ___Why not add the mime-types package?\n//    It's 19.7kB gzipped, and we only need mime types for well-known extensions (for file previews).\n// ___Where to take new extensions from?\n//    https://github.com/jshttp/mime-db/blob/master/db.json\nexport default {\n    __proto__: null,\n    md: 'text/markdown',\n    markdown: 'text/markdown',\n    mp4: 'video/mp4',\n    mp3: 'audio/mp3',\n    svg: 'image/svg+xml',\n    jpg: 'image/jpeg',\n    png: 'image/png',\n    webp: 'image/webp',\n    gif: 'image/gif',\n    heic: 'image/heic',\n    heif: 'image/heif',\n    yaml: 'text/yaml',\n    yml: 'text/yaml',\n    csv: 'text/csv',\n    tsv: 'text/tab-separated-values',\n    tab: 'text/tab-separated-values',\n    avi: 'video/x-msvideo',\n    mks: 'video/x-matroska',\n    mkv: 'video/x-matroska',\n    mov: 'video/quicktime',\n    dicom: 'application/dicom',\n    doc: 'application/msword',\n    msg: 'application/vnd.ms-outlook',\n    docm: 'application/vnd.ms-word.document.macroenabled.12',\n    docx: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n    dot: 'application/msword',\n    dotm: 'application/vnd.ms-word.template.macroenabled.12',\n    dotx: 'application/vnd.openxmlformats-officedocument.wordprocessingml.template',\n    xla: 'application/vnd.ms-excel',\n    xlam: 'application/vnd.ms-excel.addin.macroenabled.12',\n    xlc: 'application/vnd.ms-excel',\n    xlf: 'application/x-xliff+xml',\n    xlm: 'application/vnd.ms-excel',\n    xls: 'application/vnd.ms-excel',\n    xlsb: 'application/vnd.ms-excel.sheet.binary.macroenabled.12',\n    xlsm: 'application/vnd.ms-excel.sheet.macroenabled.12',\n    xlsx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n    xlt: 'application/vnd.ms-excel',\n    xltm: 'application/vnd.ms-excel.template.macroenabled.12',\n    xltx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.template',\n    xlw: 'application/vnd.ms-excel',\n    txt: 'text/plain',\n    text: 'text/plain',\n    conf: 'text/plain',\n    log: 'text/plain',\n    pdf: 'application/pdf',\n    zip: 'application/zip',\n    '7z': 'application/x-7z-compressed',\n    rar: 'application/x-rar-compressed',\n    tar: 'application/x-tar',\n    gz: 'application/gzip',\n    dmg: 'application/x-apple-diskimage',\n};\n", "import getFileNameAndExtension from './getFileNameAndExtension.js';\nimport mimeTypes from './mimeTypes.js';\nexport default function getFileType(file) {\n    if (file.type)\n        return file.type;\n    const fileExtension = file.name\n        ? getFileNameAndExtension(file.name).extension?.toLowerCase()\n        : null;\n    if (fileExtension && fileExtension in mimeTypes) {\n        // else, see if we can map extension to a mime type\n        return mimeTypes[fileExtension];\n    }\n    // if all fails, fall back to a generic byte stream type\n    return 'application/octet-stream';\n}\n", "import getFileType from './getFileType.js';\nfunction encodeCharacter(character) {\n    return character.charCodeAt(0).toString(32);\n}\nfunction encodeFilename(name) {\n    let suffix = '';\n    return (name.replace(/[^A-Z0-9]/gi, (character) => {\n        suffix += `-${encodeCharacter(character)}`;\n        return '/';\n    }) + suffix);\n}\n/**\n * Takes a file object and turns it into fileID, by converting file.name to lowercase,\n * removing extra characters and adding type, size and lastModified\n */\nexport default function generateFileID(file, instanceId) {\n    // It's tempting to do `[items].filter(Boolean).join('-')` here, but that\n    // is slower! simple string concatenation is fast\n    let id = instanceId || 'uppy';\n    if (typeof file.name === 'string') {\n        id += `-${encodeFilename(file.name.toLowerCase())}`;\n    }\n    if (file.type !== undefined) {\n        id += `-${file.type}`;\n    }\n    if (file.meta && typeof file.meta.relativePath === 'string') {\n        id += `-${encodeFilename(file.meta.relativePath.toLowerCase())}`;\n    }\n    if (file.data.size !== undefined) {\n        id += `-${file.data.size}`;\n    }\n    if (file.data.lastModified !== undefined) {\n        id += `-${file.data.lastModified}`;\n    }\n    return id;\n}\n// If the provider has a stable, unique ID, then we can use that to identify the file.\n// Then we don't have to generate our own ID, and we can add the same file many times if needed (different path)\nfunction hasFileStableId(file) {\n    if (!file.isRemote || !file.remote)\n        return false;\n    // These are the providers that it seems like have stable IDs for their files. The other's I haven't checked yet.\n    const stableIdProviders = new Set([\n        'box',\n        'dropbox',\n        'drive',\n        'facebook',\n        'unsplash',\n    ]);\n    return stableIdProviders.has(file.remote.provider);\n}\nexport function getSafeFileId(file, instanceId) {\n    if (hasFileStableId(file))\n        return file.id;\n    const fileType = getFileType(file);\n    return generateFileID({\n        ...file,\n        type: fileType,\n    }, instanceId);\n}\n", "/* global AggregateError */\nimport DefaultStore, {} from '@uppy/store-default';\nimport { getSafeFileId } from '@uppy/utils/lib/generateFileID';\nimport getFileNameAndExtension from '@uppy/utils/lib/getFileNameAndExtension';\nimport getFileType from '@uppy/utils/lib/getFileType';\nimport Translator from '@uppy/utils/lib/Translator';\nimport throttle from 'lodash/throttle.js';\n// @ts-ignore untyped\nimport ee from 'namespace-emitter';\nimport { nanoid } from 'nanoid/non-secure';\nimport packageJson from '../package.json' with { type: 'json' };\nimport getFileName from './getFileName.js';\nimport locale from './locale.js';\nimport { debugLogger, justErrorsLogger } from './loggers.js';\nimport { defaultOptions as defaultRestrictionOptions, Restricter, RestrictionError, } from './Restricter.js';\nimport supportsUploadProgress from './supportsUploadProgress.js';\nconst defaultUploadState = {\n    totalProgress: 0,\n    allowNewUpload: true,\n    error: null,\n    recoveredState: null,\n};\n/**\n * Uppy Core module.\n * Manages plugins, state updates, acts as an event bus,\n * adds/removes files and metadata.\n */\nexport class Uppy {\n    static VERSION = packageJson.version;\n    #plugins = Object.create(null);\n    #restricter;\n    #storeUnsubscribe;\n    #emitter = ee();\n    #preProcessors = new Set();\n    #uploaders = new Set();\n    #postProcessors = new Set();\n    defaultLocale;\n    locale;\n    // The user optionally passes in options, but we set defaults for missing options.\n    // We consider all options present after the contructor has run.\n    opts;\n    store;\n    // Warning: do not use this from a plugin, as it will cause the plugins' translations to be missing\n    i18n;\n    i18nArray;\n    scheduledAutoProceed = null;\n    wasOffline = false;\n    /**\n     * Instantiate Uppy\n     */\n    constructor(opts) {\n        this.defaultLocale = locale;\n        const defaultOptions = {\n            id: 'uppy',\n            autoProceed: false,\n            allowMultipleUploadBatches: true,\n            debug: false,\n            restrictions: defaultRestrictionOptions,\n            meta: {},\n            onBeforeFileAdded: (file, files) => !Object.hasOwn(files, file.id),\n            onBeforeUpload: (files) => files,\n            store: new DefaultStore(),\n            logger: justErrorsLogger,\n            infoTimeout: 5000,\n        };\n        const merged = { ...defaultOptions, ...opts };\n        // Merge default options with the ones set by user,\n        // making sure to merge restrictions too\n        this.opts = {\n            ...merged,\n            restrictions: {\n                ...defaultOptions.restrictions,\n                ...opts?.restrictions,\n            },\n        };\n        // Support debug: true for backwards-compatability, unless logger is set in opts\n        // opts instead of this.opts to avoid comparing objects \u2014 we set logger: justErrorsLogger in defaultOptions\n        if (opts?.logger && opts.debug) {\n            this.log('You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.', 'warning');\n        }\n        else if (opts?.debug) {\n            this.opts.logger = debugLogger;\n        }\n        this.log(`Using Core v${Uppy.VERSION}`);\n        this.i18nInit();\n        this.store = this.opts.store;\n        this.setState({\n            ...defaultUploadState,\n            plugins: {},\n            files: {},\n            currentUploads: {},\n            capabilities: {\n                uploadProgress: supportsUploadProgress(),\n                individualCancellation: true,\n                resumableUploads: false,\n            },\n            meta: { ...this.opts.meta },\n            info: [],\n        });\n        this.#restricter = new Restricter(() => this.opts, () => this.i18n);\n        this.#storeUnsubscribe = this.store.subscribe((prevState, nextState, patch) => {\n            this.emit('state-update', prevState, nextState, patch);\n            this.updateAll(nextState);\n        });\n        // Exposing uppy object on window for debugging and testing\n        if (this.opts.debug && typeof window !== 'undefined') {\n            // @ts-ignore Mutating the global object for debug purposes\n            window[this.opts.id] = this;\n        }\n        this.#addListeners();\n    }\n    emit(event, ...args) {\n        this.#emitter.emit(event, ...args);\n    }\n    on(event, callback) {\n        this.#emitter.on(event, callback);\n        return this;\n    }\n    once(event, callback) {\n        this.#emitter.once(event, callback);\n        return this;\n    }\n    off(event, callback) {\n        this.#emitter.off(event, callback);\n        return this;\n    }\n    /**\n     * Iterate on all plugins and run `update` on them.\n     * Called each time state changes.\n     *\n     */\n    updateAll(state) {\n        this.iteratePlugins((plugin) => {\n            plugin.update(state);\n        });\n    }\n    /**\n     * Updates state with a patch\n     */\n    setState(patch) {\n        this.store.setState(patch);\n    }\n    /**\n     * Returns current state.\n     */\n    getState() {\n        return this.store.getState();\n    }\n    patchFilesState(filesWithNewState) {\n        const existingFilesState = this.getState().files;\n        this.setState({\n            files: {\n                ...existingFilesState,\n                ...Object.fromEntries(Object.entries(filesWithNewState).map(([fileID, newFileState]) => [\n                    fileID,\n                    {\n                        ...existingFilesState[fileID],\n                        ...newFileState,\n                    },\n                ])),\n            },\n        });\n    }\n    /**\n     * Shorthand to set state for a specific file.\n     */\n    setFileState(fileID, state) {\n        if (!this.getState().files[fileID]) {\n            throw new Error(`Can\u2019t set state for ${fileID} (the file could have been removed)`);\n        }\n        this.patchFilesState({ [fileID]: state });\n    }\n    i18nInit() {\n        const onMissingKey = (key) => this.log(`Missing i18n string: ${key}`, 'error');\n        const translator = new Translator([this.defaultLocale, this.opts.locale], {\n            onMissingKey,\n        });\n        this.i18n = translator.translate.bind(translator);\n        this.i18nArray = translator.translateArray.bind(translator);\n        this.locale = translator.locale;\n    }\n    setOptions(newOpts) {\n        this.opts = {\n            ...this.opts,\n            ...newOpts,\n            restrictions: {\n                ...this.opts.restrictions,\n                ...newOpts?.restrictions,\n            },\n        };\n        if (newOpts.meta) {\n            this.setMeta(newOpts.meta);\n        }\n        this.i18nInit();\n        if (newOpts.locale) {\n            this.iteratePlugins((plugin) => {\n                plugin.setOptions(newOpts);\n            });\n        }\n        // Note: this is not the preact `setState`, it's an internal function that has the same name.\n        this.setState(undefined); // so that UI re-renders with new options\n    }\n    resetProgress() {\n        const defaultProgress = {\n            percentage: 0,\n            bytesUploaded: false,\n            uploadComplete: false,\n            uploadStarted: null,\n        };\n        const files = { ...this.getState().files };\n        const updatedFiles = Object.create(null);\n        Object.keys(files).forEach((fileID) => {\n            updatedFiles[fileID] = {\n                ...files[fileID],\n                progress: {\n                    ...files[fileID].progress,\n                    ...defaultProgress,\n                },\n                // @ts-expect-error these typed are inserted\n                // into the namespace in their respective packages\n                // but core isn't ware of those\n                tus: undefined,\n                transloadit: undefined,\n            };\n        });\n        this.setState({ files: updatedFiles, ...defaultUploadState });\n    }\n    clear() {\n        const { capabilities, currentUploads } = this.getState();\n        if (Object.keys(currentUploads).length > 0 &&\n            !capabilities.individualCancellation) {\n            throw new Error('The installed uploader plugin does not allow removing files during an upload.');\n        }\n        this.setState({ ...defaultUploadState, files: {} });\n    }\n    addPreProcessor(fn) {\n        this.#preProcessors.add(fn);\n    }\n    removePreProcessor(fn) {\n        return this.#preProcessors.delete(fn);\n    }\n    addPostProcessor(fn) {\n        this.#postProcessors.add(fn);\n    }\n    removePostProcessor(fn) {\n        return this.#postProcessors.delete(fn);\n    }\n    addUploader(fn) {\n        this.#uploaders.add(fn);\n    }\n    removeUploader(fn) {\n        return this.#uploaders.delete(fn);\n    }\n    setMeta(data) {\n        const updatedMeta = { ...this.getState().meta, ...data };\n        const updatedFiles = { ...this.getState().files };\n        Object.keys(updatedFiles).forEach((fileID) => {\n            updatedFiles[fileID] = {\n                ...updatedFiles[fileID],\n                meta: { ...updatedFiles[fileID].meta, ...data },\n            };\n        });\n        this.log('Adding metadata:');\n        this.log(data);\n        this.setState({\n            meta: updatedMeta,\n            files: updatedFiles,\n        });\n    }\n    setFileMeta(fileID, data) {\n        const updatedFiles = { ...this.getState().files };\n        if (!updatedFiles[fileID]) {\n            this.log(`Was trying to set metadata for a file that has been removed: ${fileID}`);\n            return;\n        }\n        const newMeta = { ...updatedFiles[fileID].meta, ...data };\n        updatedFiles[fileID] = { ...updatedFiles[fileID], meta: newMeta };\n        this.setState({ files: updatedFiles });\n    }\n    /**\n     * Get a file object.\n     */\n    getFile(fileID) {\n        return this.getState().files[fileID];\n    }\n    /**\n     * Get all files in an array.\n     */\n    getFiles() {\n        const { files } = this.getState();\n        return Object.values(files);\n    }\n    getFilesByIds(ids) {\n        return ids.map((id) => this.getFile(id));\n    }\n    getObjectOfFilesPerState() {\n        const { files: filesObject, totalProgress, error } = this.getState();\n        const files = Object.values(filesObject);\n        const inProgressFiles = [];\n        const newFiles = [];\n        const startedFiles = [];\n        const uploadStartedFiles = [];\n        const pausedFiles = [];\n        const completeFiles = [];\n        const erroredFiles = [];\n        const inProgressNotPausedFiles = [];\n        const processingFiles = [];\n        for (const file of files) {\n            const { progress } = file;\n            if (!progress.uploadComplete && progress.uploadStarted) {\n                inProgressFiles.push(file);\n                if (!file.isPaused) {\n                    inProgressNotPausedFiles.push(file);\n                }\n            }\n            if (!progress.uploadStarted) {\n                newFiles.push(file);\n            }\n            if (progress.uploadStarted ||\n                progress.preprocess ||\n                progress.postprocess) {\n                startedFiles.push(file);\n            }\n            if (progress.uploadStarted) {\n                uploadStartedFiles.push(file);\n            }\n            if (file.isPaused) {\n                pausedFiles.push(file);\n            }\n            if (progress.uploadComplete) {\n                completeFiles.push(file);\n            }\n            if (file.error) {\n                erroredFiles.push(file);\n            }\n            if (progress.preprocess || progress.postprocess) {\n                processingFiles.push(file);\n            }\n        }\n        return {\n            newFiles,\n            startedFiles,\n            uploadStartedFiles,\n            pausedFiles,\n            completeFiles,\n            erroredFiles,\n            inProgressFiles,\n            inProgressNotPausedFiles,\n            processingFiles,\n            isUploadStarted: uploadStartedFiles.length > 0,\n            isAllComplete: totalProgress === 100 &&\n                completeFiles.length === files.length &&\n                processingFiles.length === 0,\n            isAllErrored: !!error && erroredFiles.length === files.length,\n            isAllPaused: inProgressFiles.length !== 0 &&\n                pausedFiles.length === inProgressFiles.length,\n            isUploadInProgress: inProgressFiles.length > 0,\n            isSomeGhost: files.some((file) => file.isGhost),\n        };\n    }\n    #informAndEmit(errors) {\n        for (const error of errors) {\n            if (error.isRestriction) {\n                this.emit('restriction-failed', error.file, error);\n            }\n            else {\n                this.emit('error', error, error.file);\n            }\n            this.log(error, 'warning');\n        }\n        const userFacingErrors = errors.filter((error) => error.isUserFacing);\n        // don't flood the user: only show the first 4 toasts\n        const maxNumToShow = 4;\n        const firstErrors = userFacingErrors.slice(0, maxNumToShow);\n        const additionalErrors = userFacingErrors.slice(maxNumToShow);\n        firstErrors.forEach(({ message, details = '' }) => {\n            this.info({ message, details }, 'error', this.opts.infoTimeout);\n        });\n        if (additionalErrors.length > 0) {\n            this.info({\n                message: this.i18n('additionalRestrictionsFailed', {\n                    count: additionalErrors.length,\n                }),\n            });\n        }\n    }\n    validateRestrictions(file, files = this.getFiles()) {\n        try {\n            this.#restricter.validate(files, [file]);\n        }\n        catch (err) {\n            return err;\n        }\n        return null;\n    }\n    validateSingleFile(file) {\n        try {\n            this.#restricter.validateSingleFile(file);\n        }\n        catch (err) {\n            return err.message;\n        }\n        return null;\n    }\n    validateAggregateRestrictions(files) {\n        const existingFiles = this.getFiles();\n        try {\n            this.#restricter.validateAggregateRestrictions(existingFiles, files);\n        }\n        catch (err) {\n            return err.message;\n        }\n        return null;\n    }\n    #checkRequiredMetaFieldsOnFile(file) {\n        const { missingFields, error } = this.#restricter.getMissingRequiredMetaFields(file);\n        if (missingFields.length > 0) {\n            this.setFileState(file.id, {\n                missingRequiredMetaFields: missingFields,\n                error: error.message,\n            });\n            this.log(error.message);\n            this.emit('restriction-failed', file, error);\n            return false;\n        }\n        if (missingFields.length === 0 && file.missingRequiredMetaFields) {\n            this.setFileState(file.id, {\n                missingRequiredMetaFields: [],\n            });\n        }\n        return true;\n    }\n    #checkRequiredMetaFields(files) {\n        let success = true;\n        for (const file of Object.values(files)) {\n            if (!this.#checkRequiredMetaFieldsOnFile(file)) {\n                success = false;\n            }\n        }\n        return success;\n    }\n    #assertNewUploadAllowed(file) {\n        const { allowNewUpload } = this.getState();\n        if (allowNewUpload === false) {\n            const error = new RestrictionError(this.i18n('noMoreFilesAllowed'), {\n                file,\n            });\n            this.#informAndEmit([error]);\n            throw error;\n        }\n    }\n    checkIfFileAlreadyExists(fileID) {\n        const { files } = this.getState();\n        if (files[fileID] && !files[fileID].isGhost) {\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Create a file state object based on user-provided `addFile()` options.\n     */\n    #transformFile(fileDescriptorOrFile) {\n        // Uppy expects files in { name, type, size, data } format.\n        // If the actual File object is passed from input[type=file] or drag-drop,\n        // we normalize it to match Uppy file object\n        const file = (fileDescriptorOrFile instanceof File\n            ? {\n                name: fileDescriptorOrFile.name,\n                type: fileDescriptorOrFile.type,\n                size: fileDescriptorOrFile.size,\n                data: fileDescriptorOrFile,\n            }\n            : fileDescriptorOrFile);\n        const fileType = getFileType(file);\n        const fileName = getFileName(fileType, file);\n        const fileExtension = getFileNameAndExtension(fileName).extension;\n        const id = getSafeFileId(file, this.getID());\n        const meta = file.meta || {};\n        meta.name = fileName;\n        meta.type = fileType;\n        // `null` means the size is unknown.\n        const size = Number.isFinite(file.data.size)\n            ? file.data.size\n            : null;\n        return {\n            source: file.source || '',\n            id,\n            name: fileName,\n            extension: fileExtension || '',\n            meta: {\n                ...this.getState().meta,\n                ...meta,\n            },\n            type: fileType,\n            data: file.data,\n            progress: {\n                percentage: 0,\n                bytesUploaded: false,\n                bytesTotal: size,\n                uploadComplete: false,\n                uploadStarted: null,\n            },\n            size,\n            isGhost: false,\n            isRemote: file.isRemote || false,\n            remote: file.remote,\n            preview: file.preview,\n        };\n    }\n    // Schedule an upload if `autoProceed` is enabled.\n    #startIfAutoProceed() {\n        if (this.opts.autoProceed && !this.scheduledAutoProceed) {\n            this.scheduledAutoProceed = setTimeout(() => {\n                this.scheduledAutoProceed = null;\n                this.upload().catch((err) => {\n                    if (!err.isRestriction) {\n                        this.log(err.stack || err.message || err);\n                    }\n                });\n            }, 4);\n        }\n    }\n    #checkAndUpdateFileState(filesToAdd) {\n        let { files: existingFiles } = this.getState();\n        // create a copy of the files object only once\n        let nextFilesState = { ...existingFiles };\n        const validFilesToAdd = [];\n        const errors = [];\n        for (const fileToAdd of filesToAdd) {\n            try {\n                let newFile = this.#transformFile(fileToAdd);\n                // If a file has been recovered (Golden Retriever), but we were unable to recover its data (probably too large),\n                // users are asked to re-select these half-recovered files and then this method will be called again.\n                // In order to keep the progress, meta and everything else, we keep the existing file,\n                // but we replace `data`, and we remove `isGhost`, because the file is no longer a ghost now\n                const isGhost = existingFiles[newFile.id]?.isGhost;\n                if (isGhost) {\n                    const existingFileState = existingFiles[newFile.id];\n                    newFile = {\n                        ...existingFileState,\n                        isGhost: false,\n                        data: fileToAdd.data,\n                    };\n                    this.log(`Replaced the blob in the restored ghost file: ${newFile.name}, ${newFile.id}`);\n                }\n                const onBeforeFileAddedResult = this.opts.onBeforeFileAdded(newFile, nextFilesState);\n                // update state after onBeforeFileAdded\n                existingFiles = this.getState().files;\n                nextFilesState = { ...existingFiles, ...nextFilesState };\n                if (!onBeforeFileAddedResult &&\n                    this.checkIfFileAlreadyExists(newFile.id)) {\n                    throw new RestrictionError(this.i18n('noDuplicates', {\n                        fileName: newFile.name ?? this.i18n('unnamed'),\n                    }), { file: fileToAdd });\n                }\n                // Pass through reselected files from Golden Retriever\n                if (onBeforeFileAddedResult === false && !isGhost) {\n                    // Don\u2019t show UI info for this error, as it should be done by the developer\n                    throw new RestrictionError('Cannot add the file because onBeforeFileAdded returned false.', { isUserFacing: false, file: fileToAdd });\n                }\n                else if (typeof onBeforeFileAddedResult === 'object' &&\n                    onBeforeFileAddedResult !== null) {\n                    newFile = onBeforeFileAddedResult;\n                }\n                this.#restricter.validateSingleFile(newFile);\n                // need to add it to the new local state immediately, so we can use the state to validate the next files too\n                nextFilesState[newFile.id] = newFile;\n                validFilesToAdd.push(newFile);\n            }\n            catch (err) {\n                errors.push(err);\n            }\n        }\n        try {\n            // need to run this separately because it's much more slow, so if we run it inside the for-loop it will be very slow\n            // when many files are added\n            this.#restricter.validateAggregateRestrictions(Object.values(existingFiles), validFilesToAdd);\n        }\n        catch (err) {\n            errors.push(err);\n            // If we have any aggregate error, don't allow adding this batch\n            return {\n                nextFilesState: existingFiles,\n                validFilesToAdd: [],\n                errors,\n            };\n        }\n        return {\n            nextFilesState,\n            validFilesToAdd,\n            errors,\n        };\n    }\n    /**\n     * Add a new file to `state.files`. This will run `onBeforeFileAdded`,\n     * try to guess file type in a clever way, check file against restrictions,\n     * and start an upload if `autoProceed === true`.\n     */\n    addFile(file) {\n        this.#assertNewUploadAllowed(file);\n        const { nextFilesState, validFilesToAdd, errors } = this.#checkAndUpdateFileState([file]);\n        const restrictionErrors = errors.filter((error) => error.isRestriction);\n        this.#informAndEmit(restrictionErrors);\n        if (errors.length > 0)\n            throw errors[0];\n        this.setState({ files: nextFilesState });\n        const [firstValidFileToAdd] = validFilesToAdd;\n        this.emit('file-added', firstValidFileToAdd);\n        this.emit('files-added', validFilesToAdd);\n        this.log(`Added file: ${firstValidFileToAdd.name}, ${firstValidFileToAdd.id}, mime type: ${firstValidFileToAdd.type}`);\n        this.#startIfAutoProceed();\n        return firstValidFileToAdd.id;\n    }\n    /**\n     * Add multiple files to `state.files`. See the `addFile()` documentation.\n     *\n     * If an error occurs while adding a file, it is logged and the user is notified.\n     * This is good for UI plugins, but not for programmatic use.\n     * Programmatic users should usually still use `addFile()` on individual files.\n     */\n    addFiles(fileDescriptors) {\n        this.#assertNewUploadAllowed();\n        const { nextFilesState, validFilesToAdd, errors } = this.#checkAndUpdateFileState(fileDescriptors);\n        const restrictionErrors = errors.filter((error) => error.isRestriction);\n        this.#informAndEmit(restrictionErrors);\n        const nonRestrictionErrors = errors.filter((error) => !error.isRestriction);\n        if (nonRestrictionErrors.length > 0) {\n            let message = 'Multiple errors occurred while adding files:\\n';\n            nonRestrictionErrors.forEach((subError) => {\n                message += `\\n * ${subError.message}`;\n            });\n            this.info({\n                message: this.i18n('addBulkFilesFailed', {\n                    smart_count: nonRestrictionErrors.length,\n                }),\n                details: message,\n            }, 'error', this.opts.infoTimeout);\n            if (typeof AggregateError === 'function') {\n                throw new AggregateError(nonRestrictionErrors, message);\n            }\n            else {\n                const err = new Error(message);\n                // @ts-expect-error fallback when AggregateError is not available\n                err.errors = nonRestrictionErrors;\n                throw err;\n            }\n        }\n        // OK, we haven't thrown an error, we can start updating state and emitting events now:\n        this.setState({ files: nextFilesState });\n        validFilesToAdd.forEach((file) => {\n            this.emit('file-added', file);\n        });\n        this.emit('files-added', validFilesToAdd);\n        if (validFilesToAdd.length > 5) {\n            this.log(`Added batch of ${validFilesToAdd.length} files`);\n        }\n        else {\n            Object.values(validFilesToAdd).forEach((file) => {\n                this.log(`Added file: ${file.name}\\n id: ${file.id}\\n type: ${file.type}`);\n            });\n        }\n        if (validFilesToAdd.length > 0) {\n            this.#startIfAutoProceed();\n        }\n    }\n    removeFiles(fileIDs) {\n        const { files, currentUploads } = this.getState();\n        const updatedFiles = { ...files };\n        const updatedUploads = { ...currentUploads };\n        const removedFiles = Object.create(null);\n        fileIDs.forEach((fileID) => {\n            if (files[fileID]) {\n                removedFiles[fileID] = files[fileID];\n                delete updatedFiles[fileID];\n            }\n        });\n        // Remove files from the `fileIDs` list in each upload.\n        function fileIsNotRemoved(uploadFileID) {\n            return removedFiles[uploadFileID] === undefined;\n        }\n        Object.keys(updatedUploads).forEach((uploadID) => {\n            const newFileIDs = currentUploads[uploadID].fileIDs.filter(fileIsNotRemoved);\n            // Remove the upload if no files are associated with it anymore.\n            if (newFileIDs.length === 0) {\n                delete updatedUploads[uploadID];\n                return;\n            }\n            const { capabilities } = this.getState();\n            if (newFileIDs.length !== currentUploads[uploadID].fileIDs.length &&\n                !capabilities.individualCancellation) {\n                throw new Error('The installed uploader plugin does not allow removing files during an upload.');\n            }\n            updatedUploads[uploadID] = {\n                ...currentUploads[uploadID],\n                fileIDs: newFileIDs,\n            };\n        });\n        const stateUpdate = {\n            currentUploads: updatedUploads,\n            files: updatedFiles,\n        };\n        // If all files were removed - allow new uploads,\n        // and clear recoveredState\n        if (Object.keys(updatedFiles).length === 0) {\n            stateUpdate.allowNewUpload = true;\n            stateUpdate.error = null;\n            stateUpdate.recoveredState = null;\n        }\n        this.setState(stateUpdate);\n        this.#updateTotalProgressThrottled();\n        const removedFileIDs = Object.keys(removedFiles);\n        removedFileIDs.forEach((fileID) => {\n            this.emit('file-removed', removedFiles[fileID]);\n        });\n        if (removedFileIDs.length > 5) {\n            this.log(`Removed ${removedFileIDs.length} files`);\n        }\n        else {\n            this.log(`Removed files: ${removedFileIDs.join(', ')}`);\n        }\n    }\n    removeFile(fileID) {\n        this.removeFiles([fileID]);\n    }\n    pauseResume(fileID) {\n        if (!this.getState().capabilities.resumableUploads ||\n            this.getFile(fileID).progress.uploadComplete) {\n            return undefined;\n        }\n        const file = this.getFile(fileID);\n        const wasPaused = file.isPaused || false;\n        const isPaused = !wasPaused;\n        this.setFileState(fileID, {\n            isPaused,\n        });\n        this.emit('upload-pause', file, isPaused);\n        return isPaused;\n    }\n    pauseAll() {\n        const updatedFiles = { ...this.getState().files };\n        const inProgressUpdatedFiles = Object.keys(updatedFiles).filter((file) => {\n            return (!updatedFiles[file].progress.uploadComplete &&\n                updatedFiles[file].progress.uploadStarted);\n        });\n        inProgressUpdatedFiles.forEach((file) => {\n            const updatedFile = { ...updatedFiles[file], isPaused: true };\n            updatedFiles[file] = updatedFile;\n        });\n        this.setState({ files: updatedFiles });\n        this.emit('pause-all');\n    }\n    resumeAll() {\n        const updatedFiles = { ...this.getState().files };\n        const inProgressUpdatedFiles = Object.keys(updatedFiles).filter((file) => {\n            return (!updatedFiles[file].progress.uploadComplete &&\n                updatedFiles[file].progress.uploadStarted);\n        });\n        inProgressUpdatedFiles.forEach((file) => {\n            const updatedFile = {\n                ...updatedFiles[file],\n                isPaused: false,\n                error: null,\n            };\n            updatedFiles[file] = updatedFile;\n        });\n        this.setState({ files: updatedFiles });\n        this.emit('resume-all');\n    }\n    #getFilesToRetry() {\n        const { files } = this.getState();\n        return Object.keys(files).filter((fileId) => {\n            const file = files[fileId];\n            // Only retry files that have errors AND don't have missing required metadata\n            return (file.error &&\n                (!file.missingRequiredMetaFields ||\n                    file.missingRequiredMetaFields.length === 0));\n        });\n    }\n    async #doRetryAll() {\n        const filesToRetry = this.#getFilesToRetry();\n        const updatedFiles = { ...this.getState().files };\n        filesToRetry.forEach((fileID) => {\n            updatedFiles[fileID] = {\n                ...updatedFiles[fileID],\n                isPaused: false,\n                error: null,\n            };\n        });\n        this.setState({\n            files: updatedFiles,\n            error: null,\n        });\n        this.emit('retry-all', this.getFilesByIds(filesToRetry));\n        if (filesToRetry.length === 0) {\n            return {\n                successful: [],\n                failed: [],\n            };\n        }\n        const uploadID = this.#createUpload(filesToRetry, {\n            forceAllowNewUpload: true, // create new upload even if allowNewUpload: false\n        });\n        return this.#runUpload(uploadID);\n    }\n    async retryAll() {\n        const result = await this.#doRetryAll();\n        this.emit('complete', result);\n        return result;\n    }\n    cancelAll() {\n        this.emit('cancel-all');\n        const { files } = this.getState();\n        const fileIDs = Object.keys(files);\n        if (fileIDs.length) {\n            this.removeFiles(fileIDs);\n        }\n        this.setState(defaultUploadState);\n    }\n    retryUpload(fileID) {\n        this.setFileState(fileID, {\n            error: null,\n            isPaused: false,\n        });\n        this.emit('upload-retry', this.getFile(fileID));\n        const uploadID = this.#createUpload([fileID], {\n            forceAllowNewUpload: true, // create new upload even if allowNewUpload: false\n        });\n        return this.#runUpload(uploadID);\n    }\n    logout() {\n        this.iteratePlugins((plugin) => {\n            ;\n            plugin.provider?.logout?.();\n        });\n    }\n    #handleUploadProgress = (file, progress) => {\n        const fileInState = file ? this.getFile(file.id) : undefined;\n        if (file == null || !fileInState) {\n            this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n            return;\n        }\n        if (fileInState.progress.percentage === 100) {\n            this.log(`Not setting progress for a file that has been already uploaded: ${file.id}`);\n            return;\n        }\n        const newProgress = {\n            bytesTotal: progress.bytesTotal,\n            // bytesTotal may be null or zero; in that case we can't divide by it\n            percentage: progress.bytesTotal != null &&\n                Number.isFinite(progress.bytesTotal) &&\n                progress.bytesTotal > 0\n                ? Math.round((progress.bytesUploaded / progress.bytesTotal) * 100)\n                : undefined,\n        };\n        if (fileInState.progress.uploadStarted != null) {\n            this.setFileState(file.id, {\n                progress: {\n                    ...fileInState.progress,\n                    ...newProgress,\n                    bytesUploaded: progress.bytesUploaded,\n                },\n            });\n        }\n        else {\n            this.setFileState(file.id, {\n                progress: {\n                    ...fileInState.progress,\n                    ...newProgress,\n                },\n            });\n        }\n        this.#updateTotalProgressThrottled();\n    };\n    #updateTotalProgress() {\n        const totalProgress = this.#calculateTotalProgress();\n        let totalProgressPercent = null;\n        if (totalProgress != null) {\n            totalProgressPercent = Math.round(totalProgress * 100);\n            if (totalProgressPercent > 100)\n                totalProgressPercent = 100;\n            else if (totalProgressPercent < 0)\n                totalProgressPercent = 0;\n        }\n        this.emit('progress', totalProgressPercent ?? 0);\n        this.setState({\n            totalProgress: totalProgressPercent ?? 0,\n        });\n    }\n    // ___Why throttle at 500ms?\n    //    - We must throttle at >250ms for superfocus in Dashboard to work well\n    //    (because animation takes 0.25s, and we want to wait for all animations to be over before refocusing).\n    //    [Practical Check]: if thottle is at 100ms, then if you are uploading a file,\n    //    and click 'ADD MORE FILES', - focus won't activate in Firefox.\n    //    - We must throttle at around >500ms to avoid performance lags.\n    //    [Practical Check] Firefox, try to upload a big file for a prolonged period of time. Laptop will start to heat up.\n    #updateTotalProgressThrottled = throttle(() => this.#updateTotalProgress(), 500, { leading: true, trailing: true });\n    [Symbol.for('uppy test: updateTotalProgress')]() {\n        return this.#updateTotalProgress();\n    }\n    #calculateTotalProgress() {\n        // calculate total progress, using the number of files currently uploading,\n        // between 0 and 1 and sum of individual progress of each file\n        const files = this.getFiles();\n        // note: also includes files that have completed uploading:\n        const filesInProgress = files.filter((file) => {\n            return (file.progress.uploadStarted ||\n                file.progress.preprocess ||\n                file.progress.postprocess);\n        });\n        if (filesInProgress.length === 0) {\n            return 0;\n        }\n        if (filesInProgress.every((file) => file.progress.uploadComplete)) {\n            // If every uploading file is complete, and we're still getting progress, it probably means\n            // there's a bug somewhere in some progress reporting code (maybe not even our code)\n            // and we're still getting progress, so let's just assume it means a 100% progress\n            return 1;\n        }\n        const isSizedFile = (file) => file.progress.bytesTotal != null && file.progress.bytesTotal !== 0;\n        const sizedFilesInProgress = filesInProgress.filter(isSizedFile);\n        const unsizedFilesInProgress = filesInProgress.filter((file) => !isSizedFile(file));\n        if (sizedFilesInProgress.every((file) => file.progress.uploadComplete) &&\n            unsizedFilesInProgress.length > 0 &&\n            !unsizedFilesInProgress.every((file) => file.progress.uploadComplete)) {\n            // we are done with uploading all files of known size, however\n            // there is at least one file with unknown size still uploading,\n            // and we cannot say anything about their progress\n            // In any case, return null because it doesn't make any sense to show a progress\n            return null;\n        }\n        const totalFilesSize = sizedFilesInProgress.reduce((acc, file) => acc + (file.progress.bytesTotal ?? 0), 0);\n        const totalUploadedSize = sizedFilesInProgress.reduce((acc, file) => acc + (file.progress.bytesUploaded || 0), 0);\n        return totalFilesSize === 0 ? 0 : totalUploadedSize / totalFilesSize;\n    }\n    /**\n     * Registers listeners for all global actions, like:\n     * `error`, `file-removed`, `upload-progress`\n     */\n    #addListeners() {\n        // Type inference only works for inline functions so we have to type it again\n        const errorHandler = (error, file, response) => {\n            let errorMsg = error.message || 'Unknown error';\n            if (error.details) {\n                errorMsg += ` ${error.details}`;\n            }\n            this.setState({ error: errorMsg });\n            if (file != null && file.id in this.getState().files) {\n                this.setFileState(file.id, {\n                    error: errorMsg,\n                    response,\n                });\n            }\n        };\n        this.on('error', errorHandler);\n        this.on('upload-error', (file, error, response) => {\n            errorHandler(error, file, response);\n            if (typeof error === 'object' && error.message) {\n                this.log(error.message, 'error');\n                const newError = new Error(this.i18n('failedToUpload', { file: file?.name ?? '' })); // we may want a new custom error here\n                newError.isUserFacing = true; // todo maybe don't do this with all errors?\n                newError.details = error.message;\n                if (error.details) {\n                    newError.details += ` ${error.details}`;\n                }\n                this.#informAndEmit([newError]);\n            }\n            else {\n                this.#informAndEmit([error]);\n            }\n        });\n        let uploadStalledWarningRecentlyEmitted = null;\n        this.on('upload-stalled', (error, files) => {\n            const { message } = error;\n            const details = files.map((file) => file.meta.name).join(', ');\n            if (!uploadStalledWarningRecentlyEmitted) {\n                this.info({ message, details }, 'warning', this.opts.infoTimeout);\n                uploadStalledWarningRecentlyEmitted = setTimeout(() => {\n                    uploadStalledWarningRecentlyEmitted = null;\n                }, this.opts.infoTimeout);\n            }\n            this.log(`${message} ${details}`.trim(), 'warning');\n        });\n        this.on('upload', () => {\n            this.setState({ error: null });\n        });\n        const onUploadStarted = (files) => {\n            const filesFiltered = files.filter((file) => {\n                const exists = file != null && this.getFile(file.id);\n                if (!exists)\n                    this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return exists;\n            });\n            const filesState = Object.fromEntries(filesFiltered.map((file) => [\n                file.id,\n                {\n                    progress: {\n                        uploadStarted: Date.now(),\n                        uploadComplete: false,\n                        bytesUploaded: 0,\n                        bytesTotal: file.size,\n                    },\n                },\n            ]));\n            this.patchFilesState(filesState);\n        };\n        this.on('upload-start', onUploadStarted);\n        this.on('upload-progress', this.#handleUploadProgress);\n        this.on('upload-success', (file, uploadResp) => {\n            if (file == null || !this.getFile(file.id)) {\n                this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return;\n            }\n            const currentProgress = this.getFile(file.id).progress;\n            this.setFileState(file.id, {\n                progress: {\n                    ...currentProgress,\n                    postprocess: this.#postProcessors.size > 0\n                        ? {\n                            mode: 'indeterminate',\n                        }\n                        : undefined,\n                    uploadComplete: true,\n                    percentage: 100,\n                    bytesUploaded: currentProgress.bytesTotal,\n                },\n                response: uploadResp,\n                uploadURL: uploadResp.uploadURL,\n                isPaused: false,\n            });\n            // Remote providers sometimes don't tell us the file size,\n            // but we can know how many bytes we uploaded once the upload is complete.\n            if (file.size == null) {\n                this.setFileState(file.id, {\n                    size: uploadResp.bytesUploaded || currentProgress.bytesTotal,\n                });\n            }\n            this.#updateTotalProgressThrottled();\n        });\n        this.on('preprocess-progress', (file, progress) => {\n            if (file == null || !this.getFile(file.id)) {\n                this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return;\n            }\n            this.setFileState(file.id, {\n                progress: { ...this.getFile(file.id).progress, preprocess: progress },\n            });\n        });\n        this.on('preprocess-complete', (file) => {\n            if (file == null || !this.getFile(file.id)) {\n                this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return;\n            }\n            const files = { ...this.getState().files };\n            files[file.id] = {\n                ...files[file.id],\n                progress: { ...files[file.id].progress },\n            };\n            delete files[file.id].progress.preprocess;\n            this.setState({ files });\n        });\n        this.on('postprocess-progress', (file, progress) => {\n            if (file == null || !this.getFile(file.id)) {\n                this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return;\n            }\n            this.setFileState(file.id, {\n                progress: {\n                    ...this.getState().files[file.id].progress,\n                    postprocess: progress,\n                },\n            });\n        });\n        this.on('postprocess-complete', (file) => {\n            if (file == null || !this.getFile(file.id)) {\n                this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return;\n            }\n            const files = {\n                ...this.getState().files,\n            };\n            files[file.id] = {\n                ...files[file.id],\n                progress: {\n                    ...files[file.id].progress,\n                },\n            };\n            delete files[file.id].progress.postprocess;\n            this.setState({ files });\n        });\n        this.on('restored', () => {\n            // Files may have changed--ensure progress is still accurate.\n            this.#updateTotalProgressThrottled();\n        });\n        // @ts-expect-error should fix itself when dashboard it typed (also this doesn't belong here)\n        this.on('dashboard:file-edit-complete', (file) => {\n            if (file) {\n                this.#checkRequiredMetaFieldsOnFile(file);\n            }\n        });\n        // show informer if offline\n        if (typeof window !== 'undefined' && window.addEventListener) {\n            window.addEventListener('online', this.#updateOnlineStatus);\n            window.addEventListener('offline', this.#updateOnlineStatus);\n            setTimeout(this.#updateOnlineStatus, 3000);\n        }\n    }\n    updateOnlineStatus() {\n        const online = window.navigator.onLine ?? true;\n        if (!online) {\n            this.emit('is-offline');\n            this.info(this.i18n('noInternetConnection'), 'error', 0);\n            this.wasOffline = true;\n        }\n        else {\n            this.emit('is-online');\n            if (this.wasOffline) {\n                this.emit('back-online');\n                this.info(this.i18n('connectedToInternet'), 'success', 3000);\n                this.wasOffline = false;\n            }\n        }\n    }\n    #updateOnlineStatus = this.updateOnlineStatus.bind(this);\n    getID() {\n        return this.opts.id;\n    }\n    /**\n     * Registers a plugin with Core.\n     */\n    use(Plugin, \n    // We want to let the plugin decide whether `opts` is optional or not\n    // so we spread the argument rather than defining `opts:` ourselves.\n    ...args) {\n        if (typeof Plugin !== 'function') {\n            const msg = `Expected a plugin class, but got ${Plugin === null ? 'null' : typeof Plugin}.` +\n                ' Please verify that the plugin was imported and spelled correctly.';\n            throw new TypeError(msg);\n        }\n        // Instantiate\n        const plugin = new Plugin(this, ...args);\n        const pluginId = plugin.id;\n        if (!pluginId) {\n            throw new Error('Your plugin must have an id');\n        }\n        if (!plugin.type) {\n            throw new Error('Your plugin must have a type');\n        }\n        const existsPluginAlready = this.getPlugin(pluginId);\n        if (existsPluginAlready) {\n            const msg = `Already found a plugin named '${existsPluginAlready.id}'. ` +\n                `Tried to use: '${pluginId}'.\\n` +\n                'Uppy plugins must have unique `id` options.';\n            throw new Error(msg);\n        }\n        // @ts-expect-error does exist\n        if (Plugin.VERSION) {\n            // @ts-expect-error does exist\n            this.log(`Using ${pluginId} v${Plugin.VERSION}`);\n        }\n        if (plugin.type in this.#plugins) {\n            this.#plugins[plugin.type].push(plugin);\n        }\n        else {\n            this.#plugins[plugin.type] = [plugin];\n        }\n        plugin.install();\n        this.emit('plugin-added', plugin);\n        return this;\n    }\n    /**\n     * Find one Plugin by name.\n     */\n    getPlugin(id) {\n        for (const plugins of Object.values(this.#plugins)) {\n            const foundPlugin = plugins.find((plugin) => plugin.id === id);\n            if (foundPlugin != null)\n                return foundPlugin;\n        }\n        return undefined;\n    }\n    [Symbol.for('uppy test: getPlugins')](type) {\n        return this.#plugins[type];\n    }\n    /**\n     * Iterate through all `use`d plugins.\n     *\n     */\n    iteratePlugins(method) {\n        Object.values(this.#plugins).flat(1).forEach(method);\n    }\n    /**\n     * Uninstall and remove a plugin.\n     *\n     * @param {object} instance The plugin instance to remove.\n     */\n    removePlugin(instance) {\n        this.log(`Removing plugin ${instance.id}`);\n        this.emit('plugin-remove', instance);\n        if (instance.uninstall) {\n            instance.uninstall();\n        }\n        const list = this.#plugins[instance.type];\n        // list.indexOf failed here, because Vue3 converted the plugin instance\n        // to a Proxy object, which failed the strict comparison test:\n        // obj !== objProxy\n        const index = list.findIndex((item) => item.id === instance.id);\n        if (index !== -1) {\n            list.splice(index, 1);\n        }\n        const state = this.getState();\n        const updatedState = {\n            plugins: {\n                ...state.plugins,\n                [instance.id]: undefined,\n            },\n        };\n        this.setState(updatedState);\n    }\n    /**\n     * Uninstall all plugins and close down this Uppy instance.\n     */\n    destroy() {\n        this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`);\n        this.cancelAll();\n        this.#storeUnsubscribe();\n        this.iteratePlugins((plugin) => {\n            this.removePlugin(plugin);\n        });\n        if (typeof window !== 'undefined' && window.removeEventListener) {\n            window.removeEventListener('online', this.#updateOnlineStatus);\n            window.removeEventListener('offline', this.#updateOnlineStatus);\n        }\n    }\n    hideInfo() {\n        const { info } = this.getState();\n        this.setState({ info: info.slice(1) });\n        this.emit('info-hidden');\n    }\n    /**\n     * Set info message in `state.info`, so that UI plugins like `Informer`\n     * can display the message.\n     */\n    info(message, type = 'info', duration = 3000) {\n        const isComplexMessage = typeof message === 'object';\n        this.setState({\n            info: [\n                ...this.getState().info,\n                {\n                    type,\n                    message: isComplexMessage ? message.message : message,\n                    details: isComplexMessage ? message.details : null,\n                },\n            ],\n        });\n        setTimeout(() => this.hideInfo(), duration);\n        this.emit('info-visible');\n    }\n    /**\n     * Passes messages to a function, provided in `opts.logger`.\n     * If `opts.logger: Uppy.debugLogger` or `opts.debug: true`, logs to the browser console.\n     */\n    log(message, type) {\n        const { logger } = this.opts;\n        switch (type) {\n            case 'error':\n                logger.error(message);\n                break;\n            case 'warning':\n                logger.warn(message);\n                break;\n            default:\n                logger.debug(message);\n                break;\n        }\n    }\n    // We need to store request clients by a unique ID, so we can share RequestClient instances across files\n    // this allows us to do rate limiting and synchronous operations like refreshing provider tokens\n    // example: refreshing tokens: if each file has their own requestclient,\n    // we don't have any way to synchronize all requests in order to\n    // - block all requests\n    // - refresh the token\n    // - unblock all requests and allow them to run with a the new access token\n    // back when we had a requestclient per file, once an access token expired,\n    // all 6 files would go ahead and refresh the token at the same time\n    // (calling /refresh-token up to 6 times), which will probably fail for some providers\n    #requestClientById = new Map();\n    registerRequestClient(id, client) {\n        this.#requestClientById.set(id, client);\n    }\n    /** @protected */\n    getRequestClientForFile(file) {\n        if (!file.remote)\n            throw new Error(`Tried to get RequestClient for a non-remote file ${file.id}`);\n        const requestClient = this.#requestClientById.get(file.remote.requestClientId);\n        if (requestClient == null)\n            throw new Error(`requestClientId \"${file.remote.requestClientId}\" not registered for file \"${file.id}\"`);\n        return requestClient;\n    }\n    /**\n     * Restore an upload by its ID.\n     */\n    restore(uploadID) {\n        this.log(`Core: attempting to restore upload \"${uploadID}\"`);\n        if (!this.getState().currentUploads[uploadID]) {\n            this.#removeUpload(uploadID);\n            return Promise.reject(new Error('Nonexistent upload'));\n        }\n        return this.#runUpload(uploadID);\n    }\n    /**\n     * Create an upload for a bunch of files.\n     *\n     */\n    #createUpload(fileIDs, opts = {}) {\n        // uppy.retryAll sets this to true \u2014 when retrying we want to ignore `allowNewUpload: false`\n        const { forceAllowNewUpload = false } = opts;\n        const { allowNewUpload, currentUploads } = this.getState();\n        if (!allowNewUpload && !forceAllowNewUpload) {\n            throw new Error('Cannot create a new upload: already uploading.');\n        }\n        const uploadID = nanoid();\n        this.emit('upload', uploadID, this.getFilesByIds(fileIDs));\n        this.setState({\n            allowNewUpload: this.opts.allowMultipleUploadBatches !== false &&\n                this.opts.allowMultipleUploads !== false,\n            currentUploads: {\n                ...currentUploads,\n                [uploadID]: {\n                    fileIDs,\n                    step: 0,\n                    result: {},\n                },\n            },\n        });\n        return uploadID;\n    }\n    [Symbol.for('uppy test: createUpload')](...args) {\n        // @ts-expect-error https://github.com/microsoft/TypeScript/issues/47595\n        return this.#createUpload(...args);\n    }\n    #getUpload(uploadID) {\n        const { currentUploads } = this.getState();\n        return currentUploads[uploadID];\n    }\n    /**\n     * Add data to an upload's result object.\n     */\n    addResultData(uploadID, data) {\n        if (!this.#getUpload(uploadID)) {\n            this.log(`Not setting result for an upload that has been removed: ${uploadID}`);\n            return;\n        }\n        const { currentUploads } = this.getState();\n        const currentUpload = {\n            ...currentUploads[uploadID],\n            result: { ...currentUploads[uploadID].result, ...data },\n        };\n        this.setState({\n            currentUploads: { ...currentUploads, [uploadID]: currentUpload },\n        });\n    }\n    /**\n     * Remove an upload, eg. if it has been canceled or completed.\n     *\n     */\n    #removeUpload(uploadID) {\n        const currentUploads = { ...this.getState().currentUploads };\n        delete currentUploads[uploadID];\n        this.setState({\n            currentUploads,\n        });\n    }\n    /**\n     * Run an upload. This picks up where it left off in case the upload is being restored.\n     */\n    async #runUpload(uploadID) {\n        const getCurrentUpload = () => {\n            const { currentUploads } = this.getState();\n            return currentUploads[uploadID];\n        };\n        let currentUpload = getCurrentUpload();\n        const steps = [\n            ...this.#preProcessors,\n            ...this.#uploaders,\n            ...this.#postProcessors,\n        ];\n        try {\n            for (let step = currentUpload.step || 0; step < steps.length; step++) {\n                if (!currentUpload) {\n                    break;\n                }\n                const fn = steps[step];\n                this.setState({\n                    currentUploads: {\n                        ...this.getState().currentUploads,\n                        [uploadID]: {\n                            ...currentUpload,\n                            step,\n                        },\n                    },\n                });\n                const { fileIDs } = currentUpload;\n                // TODO give this the `updatedUpload` object as its only parameter maybe?\n                // Otherwise when more metadata may be added to the upload this would keep getting more parameters\n                await fn(fileIDs, uploadID);\n                // Update currentUpload value in case it was modified asynchronously.\n                currentUpload = getCurrentUpload();\n            }\n        }\n        catch (err) {\n            this.#removeUpload(uploadID);\n            throw err;\n        }\n        // Set result data.\n        if (currentUpload) {\n            // Mark postprocessing step as complete if necessary; this addresses a case where we might get\n            // stuck in the postprocessing UI while the upload is fully complete.\n            // If the postprocessing steps do not do any work, they may not emit postprocessing events at\n            // all, and never mark the postprocessing as complete. This is fine on its own but we\n            // introduced code in the @uppy/core upload-success handler to prepare postprocessing progress\n            // state if any postprocessors are registered. That is to avoid a \"flash of completed state\"\n            // before the postprocessing plugins can emit events.\n            //\n            // So, just in case an upload with postprocessing plugins *has* completed *without* emitting\n            // postprocessing completion, we do it instead.\n            currentUpload.fileIDs.forEach((fileID) => {\n                const file = this.getFile(fileID);\n                if (file?.progress.postprocess) {\n                    this.emit('postprocess-complete', file);\n                }\n            });\n            const files = currentUpload.fileIDs.map((fileID) => this.getFile(fileID));\n            const successful = files.filter((file) => !file.error);\n            const failed = files.filter((file) => file.error);\n            this.addResultData(uploadID, { successful, failed, uploadID });\n            // Update currentUpload value in case it was modified asynchronously.\n            currentUpload = getCurrentUpload();\n        }\n        // Emit completion events.\n        // This is in a separate function so that the `currentUploads` variable\n        // always refers to the latest state. In the handler right above it refers\n        // to an outdated object without the `.result` property.\n        let result;\n        if (currentUpload) {\n            result = currentUpload.result;\n            this.#removeUpload(uploadID);\n        }\n        if (result == null) {\n            this.log(`Not setting result for an upload that has been removed: ${uploadID}`);\n            result = {\n                successful: [],\n                failed: [],\n                uploadID,\n            };\n        }\n        return result;\n    }\n    /**\n     * Start an upload for all the files that are not currently being uploaded.\n     */\n    async upload() {\n        if (!this.#plugins.uploader?.length) {\n            this.log('No uploader type plugins are used', 'warning');\n        }\n        let { files } = this.getState();\n        // retry any failed files from a previous upload() call\n        const filesToRetry = this.#getFilesToRetry();\n        if (filesToRetry.length > 0) {\n            const retryResult = await this.#doRetryAll(); // we don't want the complete event to fire\n            const hasNewFiles = this.getFiles().filter((file) => file.progress.uploadStarted == null)\n                .length > 0;\n            // if no new files, make it idempotent and return\n            if (!hasNewFiles) {\n                this.emit('complete', retryResult);\n                return retryResult;\n            }\n            // reload files which might have  changed after retry\n            ;\n            ({ files } = this.getState());\n        }\n        // If no files to retry, proceed with original upload() behavior for new files\n        const onBeforeUploadResult = this.opts.onBeforeUpload(files);\n        if (onBeforeUploadResult === false) {\n            return Promise.reject(new Error('Not starting the upload because onBeforeUpload returned false'));\n        }\n        if (onBeforeUploadResult && typeof onBeforeUploadResult === 'object') {\n            files = onBeforeUploadResult;\n            // Updating files in state, because uploader plugins receive file IDs,\n            // and then fetch the actual file object from state\n            this.setState({\n                files,\n            });\n        }\n        return Promise.resolve()\n            .then(() => this.#restricter.validateMinNumberOfFiles(files))\n            .catch((err) => {\n            this.#informAndEmit([err]);\n            throw err;\n        })\n            .then(() => {\n            if (!this.#checkRequiredMetaFields(files)) {\n                throw new RestrictionError(this.i18n('missingRequiredMetaField'));\n            }\n        })\n            .catch((err) => {\n            // Doing this in a separate catch because we already emited and logged\n            // all the errors in `checkRequiredMetaFields` so we only throw a generic\n            // missing fields error here.\n            throw err;\n        })\n            .then(async () => {\n            const { currentUploads } = this.getState();\n            // get a list of files that are currently assigned to uploads\n            const currentlyUploadingFiles = Object.values(currentUploads).flatMap((curr) => curr.fileIDs);\n            const waitingFileIDs = [];\n            Object.keys(files).forEach((fileID) => {\n                const file = this.getFile(fileID);\n                // if the file hasn't started uploading and hasn't already been assigned to an upload..\n                if (!file.progress.uploadStarted &&\n                    currentlyUploadingFiles.indexOf(fileID) === -1) {\n                    waitingFileIDs.push(file.id);\n                }\n            });\n            const uploadID = this.#createUpload(waitingFileIDs);\n            const result = await this.#runUpload(uploadID);\n            this.emit('complete', result);\n            return result;\n        })\n            .catch((err) => {\n            this.emit('error', err);\n            this.log(err, 'error');\n            throw err;\n        });\n    }\n}\nexport default Uppy;\n", "/* @ts-self-types=\"./index.d.ts\" */\nlet urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\nexport let customAlphabet = (alphabet, defaultSize = 21) => {\n  return (size = defaultSize) => {\n    let id = ''\n    let i = size | 0\n    while (i--) {\n      id += alphabet[(Math.random() * alphabet.length) | 0]\n    }\n    return id\n  }\n}\nexport let nanoid = (size = 21) => {\n  let id = ''\n  let i = size | 0\n  while (i--) {\n    id += urlAlphabet[(Math.random() * 64) | 0]\n  }\n  return id\n}\n", "{\n  \"name\": \"@uppy/core\",\n  \"description\": \"Core module for the extensible JavaScript file upload widget with support for drag&drop, resumable uploads, previews, restrictions, file processing/encoding, remote providers like Instagram, Dropbox, Google Drive, S3 and more :dog:\",\n  \"version\": \"4.5.3\",\n  \"license\": \"MIT\",\n  \"main\": \"lib/index.js\",\n  \"style\": \"dist/style.min.css\",\n  \"type\": \"module\",\n  \"sideEffects\": [\n    \"*.css\"\n  ],\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"build:css\": \"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --environment=jsdom --silent='passed-only'\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\",\n    \"uppy-plugin\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"dependencies\": {\n    \"@transloadit/prettier-bytes\": \"^0.3.4\",\n    \"@uppy/store-default\": \"^4.3.2\",\n    \"@uppy/utils\": \"^6.2.2\",\n    \"lodash\": \"^4.17.21\",\n    \"mime-match\": \"^1.0.2\",\n    \"namespace-emitter\": \"^2.0.1\",\n    \"nanoid\": \"^5.0.9\",\n    \"preact\": \"^10.5.13\"\n  },\n  \"devDependencies\": {\n    \"@types/deep-freeze\": \"^0\",\n    \"cssnano\": \"^7.0.7\",\n    \"deep-freeze\": \"^0.0.1\",\n    \"jsdom\": \"^26.1.0\",\n    \"postcss\": \"^8.5.6\",\n    \"postcss-cli\": \"^11.0.1\",\n    \"sass\": \"^1.89.2\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  }\n}", "export default function getFileName(fileType, fileDescriptor) {\n    if (fileDescriptor.name) {\n        return fileDescriptor.name;\n    }\n    if (fileType.split('/')[0] === 'image') {\n        return `${fileType.split('/')[0]}.${fileType.split('/')[1]}`;\n    }\n    return 'noname';\n}\n", "export default {\n    strings: {\n        addBulkFilesFailed: {\n            0: 'Failed to add %{smart_count} file due to an internal error',\n            1: 'Failed to add %{smart_count} files due to internal errors',\n        },\n        youCanOnlyUploadX: {\n            0: 'You can only upload %{smart_count} file',\n            1: 'You can only upload %{smart_count} files',\n        },\n        youHaveToAtLeastSelectX: {\n            0: 'You have to select at least %{smart_count} file',\n            1: 'You have to select at least %{smart_count} files',\n        },\n        aggregateExceedsSize: 'You selected %{size} of files, but maximum allowed size is %{sizeAllowed}',\n        exceedsSize: '%{file} exceeds maximum allowed size of %{size}',\n        missingRequiredMetaField: 'Missing required meta fields',\n        missingRequiredMetaFieldOnFile: 'Missing required meta fields in %{fileName}',\n        inferiorSize: 'This file is smaller than the allowed size of %{size}',\n        youCanOnlyUploadFileTypes: 'You can only upload: %{types}',\n        noMoreFilesAllowed: 'Cannot add more files',\n        noDuplicates: \"Cannot add the duplicate file '%{fileName}', it already exists\",\n        companionError: 'Connection with Companion failed',\n        authAborted: 'Authentication aborted',\n        companionUnauthorizeHint: 'To unauthorize to your %{provider} account, please go to %{url}',\n        failedToUpload: 'Failed to upload %{file}',\n        noInternetConnection: 'No Internet connection',\n        connectedToInternet: 'Connected to the Internet',\n        // Strings for remote providers\n        noFilesFound: 'You have no files or folders here',\n        noSearchResults: 'Unfortunately, there are no results for this search',\n        selectX: {\n            0: 'Select %{smart_count}',\n            1: 'Select %{smart_count}',\n        },\n        allFilesFromFolderNamed: 'All files from folder %{name}',\n        openFolderNamed: 'Open folder %{name}',\n        cancel: 'Cancel',\n        logOut: 'Log out',\n        logIn: 'Log in',\n        pickFiles: 'Pick files',\n        pickPhotos: 'Pick photos',\n        filter: 'Filter',\n        resetFilter: 'Reset filter',\n        loading: 'Loading...',\n        loadedXFiles: 'Loaded %{numFiles} files',\n        authenticateWithTitle: 'Please authenticate with %{pluginName} to select files',\n        authenticateWith: 'Connect to %{pluginName}',\n        signInWithGoogle: 'Sign in with Google',\n        searchImages: 'Search for images',\n        enterTextToSearch: 'Enter text to search for images',\n        search: 'Search',\n        resetSearch: 'Reset search',\n        emptyFolderAdded: 'No files were added from empty folder',\n        addedNumFiles: 'Added %{numFiles} file(s)',\n        folderAlreadyAdded: 'The folder \"%{folder}\" was already added',\n        folderAdded: {\n            0: 'Added %{smart_count} file from %{folder}',\n            1: 'Added %{smart_count} files from %{folder}',\n        },\n        additionalRestrictionsFailed: '%{count} additional restrictions were not fulfilled',\n        unnamed: 'Unnamed',\n        pleaseWait: 'Please wait',\n    },\n};\n", "import prettierBytes from '@transloadit/prettier-bytes';\n// @ts-ignore untyped\nimport match from 'mime-match';\nconst defaultOptions = {\n    maxFileSize: null,\n    minFileSize: null,\n    maxTotalFileSize: null,\n    maxNumberOfFiles: null,\n    minNumberOfFiles: null,\n    allowedFileTypes: null,\n    requiredMetaFields: [],\n};\nclass RestrictionError extends Error {\n    isUserFacing;\n    file;\n    constructor(message, opts) {\n        super(message);\n        this.isUserFacing = opts?.isUserFacing ?? true;\n        if (opts?.file) {\n            this.file = opts.file; // only some restriction errors are related to a particular file\n        }\n    }\n    isRestriction = true;\n}\nclass Restricter {\n    getI18n;\n    getOpts;\n    constructor(getOpts, getI18n) {\n        this.getI18n = getI18n;\n        this.getOpts = () => {\n            const opts = getOpts();\n            if (opts.restrictions?.allowedFileTypes != null &&\n                !Array.isArray(opts.restrictions.allowedFileTypes)) {\n                throw new TypeError('`restrictions.allowedFileTypes` must be an array');\n            }\n            return opts;\n        };\n    }\n    // Because these operations are slow, we cannot run them for every file (if we are adding multiple files)\n    validateAggregateRestrictions(existingFiles, addingFiles) {\n        const { maxTotalFileSize, maxNumberOfFiles } = this.getOpts().restrictions;\n        if (maxNumberOfFiles) {\n            const nonGhostFiles = existingFiles.filter((f) => !f.isGhost);\n            if (nonGhostFiles.length + addingFiles.length > maxNumberOfFiles) {\n                throw new RestrictionError(`${this.getI18n()('youCanOnlyUploadX', {\n                    smart_count: maxNumberOfFiles,\n                })}`);\n            }\n        }\n        if (maxTotalFileSize) {\n            const totalFilesSize = [...existingFiles, ...addingFiles].reduce((total, f) => total + (f.size ?? 0), 0);\n            if (totalFilesSize > maxTotalFileSize) {\n                throw new RestrictionError(this.getI18n()('aggregateExceedsSize', {\n                    sizeAllowed: prettierBytes(maxTotalFileSize),\n                    size: prettierBytes(totalFilesSize),\n                }));\n            }\n        }\n    }\n    validateSingleFile(file) {\n        const { maxFileSize, minFileSize, allowedFileTypes } = this.getOpts().restrictions;\n        if (allowedFileTypes) {\n            const isCorrectFileType = allowedFileTypes.some((type) => {\n                // check if this is a mime-type\n                if (type.includes('/')) {\n                    if (!file.type)\n                        return false;\n                    return match(file.type.replace(/;.*?$/, ''), type);\n                }\n                // otherwise this is likely an extension\n                if (type[0] === '.' && file.extension) {\n                    return file.extension.toLowerCase() === type.slice(1).toLowerCase();\n                }\n                return false;\n            });\n            if (!isCorrectFileType) {\n                const allowedFileTypesString = allowedFileTypes.join(', ');\n                throw new RestrictionError(this.getI18n()('youCanOnlyUploadFileTypes', {\n                    types: allowedFileTypesString,\n                }), { file });\n            }\n        }\n        // We can't check maxFileSize if the size is unknown.\n        if (maxFileSize && file.size != null && file.size > maxFileSize) {\n            throw new RestrictionError(this.getI18n()('exceedsSize', {\n                size: prettierBytes(maxFileSize),\n                file: file.name ?? this.getI18n()('unnamed'),\n            }), { file });\n        }\n        // We can't check minFileSize if the size is unknown.\n        if (minFileSize && file.size != null && file.size < minFileSize) {\n            throw new RestrictionError(this.getI18n()('inferiorSize', {\n                size: prettierBytes(minFileSize),\n            }), { file });\n        }\n    }\n    validate(existingFiles, addingFiles) {\n        addingFiles.forEach((addingFile) => {\n            this.validateSingleFile(addingFile);\n        });\n        this.validateAggregateRestrictions(existingFiles, addingFiles);\n    }\n    validateMinNumberOfFiles(files) {\n        const { minNumberOfFiles } = this.getOpts().restrictions;\n        if (minNumberOfFiles && Object.keys(files).length < minNumberOfFiles) {\n            throw new RestrictionError(this.getI18n()('youHaveToAtLeastSelectX', {\n                smart_count: minNumberOfFiles,\n            }));\n        }\n    }\n    getMissingRequiredMetaFields(file) {\n        const error = new RestrictionError(this.getI18n()('missingRequiredMetaFieldOnFile', {\n            fileName: file.name ?? this.getI18n()('unnamed'),\n        }));\n        const { requiredMetaFields } = this.getOpts().restrictions;\n        const missingFields = [];\n        for (const field of requiredMetaFields) {\n            if (!Object.hasOwn(file.meta, field) || file.meta[field] === '') {\n                missingFields.push(field);\n            }\n        }\n        return { missingFields, error };\n    }\n}\nexport { Restricter, defaultOptions, RestrictionError };\n", "// Edge 15.x does not fire 'progress' events on uploads.\n// See https://github.com/transloadit/uppy/issues/945\n// And https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/12224510/\nexport default function supportsUploadProgress(userAgent) {\n    // Allow passing in userAgent for tests\n    if (userAgent == null && typeof navigator !== 'undefined') {\n        userAgent = navigator.userAgent;\n    }\n    // Assume it works because basically everything supports progress events.\n    if (!userAgent)\n        return true;\n    const m = /Edge\\/(\\d+\\.\\d+)/.exec(userAgent);\n    if (!m)\n        return true;\n    const edgeVersion = m[1];\n    const version = edgeVersion.split('.', 2);\n    const major = parseInt(version[0], 10);\n    const minor = parseInt(version[1], 10);\n    // Worked before:\n    // Edge 40.15063.0.0\n    // Microsoft EdgeHTML 15.15063\n    if (major < 15 || (major === 15 && minor < 15063)) {\n        return true;\n    }\n    // Fixed in:\n    // Microsoft EdgeHTML 18.18218\n    if (major > 18 || (major === 18 && minor >= 18218)) {\n        return true;\n    }\n    // other versions don't work.\n    return false;\n}\n", "const ENCODED_ENTITIES = /[\"&<]/;\n\n/** @param {string} str */\nexport function encodeEntities(str) {\n\t// Skip all work for strings with no entities needing encoding:\n\tif (str.length === 0 || ENCODED_ENTITIES.test(str) === false) return str;\n\n\tlet last = 0,\n\t\ti = 0,\n\t\tout = '',\n\t\tch = '';\n\n\t// Seek forward in str until the next entity char:\n\tfor (; i < str.length; i++) {\n\t\tswitch (str.charCodeAt(i)) {\n\t\t\tcase 34:\n\t\t\t\tch = '&quot;';\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\tch = '&amp;';\n\t\t\t\tbreak;\n\t\t\tcase 60:\n\t\t\t\tch = '&lt;';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcontinue;\n\t\t}\n\t\t// Append skipped/buffered characters and the encoded entity:\n\t\tif (i !== last) out += str.slice(last, i);\n\t\tout += ch;\n\t\t// Start the next seek/buffer after the entity's offset:\n\t\tlast = i + 1;\n\t}\n\tif (i !== last) out += str.slice(last, i);\n\treturn out;\n}\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const NULL = null;\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { options, Fragment } from 'preact';\nimport { encodeEntities } from './utils';\nimport { IS_NON_DIMENSIONAL } from '../../src/constants';\n\nlet vnodeId = 0;\n\nconst isArray = Array.isArray;\n\n/**\n * @fileoverview\n * This file exports various methods that implement Babel's \"automatic\" JSX runtime API:\n * - jsx(type, props, key)\n * - jsxs(type, props, key)\n * - jsxDEV(type, props, key, __source, __self)\n *\n * The implementation of createVNode here is optimized for performance.\n * Benchmarks: https://esbench.com/bench/5f6b54a0b4632100a7dcd2b3\n */\n\n/**\n * JSX.Element factory used by Babel's {runtime:\"automatic\"} JSX transform\n * @param {VNode['type']} type\n * @param {VNode['props']} props\n * @param {VNode['key']} [key]\n * @param {unknown} [isStaticChildren]\n * @param {unknown} [__source]\n * @param {unknown} [__self]\n */\nfunction createVNode(type, props, key, isStaticChildren, __source, __self) {\n\tif (!props) props = {};\n\t// We'll want to preserve `ref` in props to get rid of the need for\n\t// forwardRef components in the future, but that should happen via\n\t// a separate PR.\n\tlet normalizedProps = props,\n\t\tref,\n\t\ti;\n\n\tif ('ref' in normalizedProps) {\n\t\tnormalizedProps = {};\n\t\tfor (i in props) {\n\t\t\tif (i == 'ref') {\n\t\t\t\tref = props[i];\n\t\t\t} else {\n\t\t\t\tnormalizedProps[i] = props[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t/** @type {VNode & { __source: any; __self: any }} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops: normalizedProps,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_component: null,\n\t\tconstructor: undefined,\n\t\t_original: --vnodeId,\n\t\t_index: -1,\n\t\t_flags: 0,\n\t\t__source,\n\t\t__self\n\t};\n\n\t// If a Component VNode, check for and apply defaultProps.\n\t// Note: `type` is often a String, and can be `undefined` in development.\n\tif (typeof type === 'function' && (ref = type.defaultProps)) {\n\t\tfor (i in ref)\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = ref[i];\n\t\t\t}\n\t}\n\n\tif (options.vnode) options.vnode(vnode);\n\treturn vnode;\n}\n\n/**\n * Create a template vnode. This function is not expected to be\n * used directly, but rather through a precompile JSX transform\n * @param {string[]} templates\n * @param  {Array<string | null | VNode>} exprs\n * @returns {VNode}\n */\nfunction jsxTemplate(templates, ...exprs) {\n\tconst vnode = createVNode(Fragment, { tpl: templates, exprs });\n\t// Bypass render to string top level Fragment optimization\n\tvnode.key = vnode._vnode;\n\treturn vnode;\n}\n\nconst JS_TO_CSS = {};\nconst CSS_REGEX = /[A-Z]/g;\n\n/**\n * Unwrap potential signals.\n * @param {*} value\n * @returns {*}\n */\nfunction normalizeAttrValue(value) {\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.valueOf === 'function'\n\t\t? value.valueOf()\n\t\t: value;\n}\n\n/**\n * Serialize an HTML attribute to a string. This function is not\n * expected to be used directly, but rather through a precompile\n * JSX transform\n * @param {string} name The attribute name\n * @param {*} value The attribute value\n * @returns {string}\n */\nfunction jsxAttr(name, value) {\n\tif (options.attr) {\n\t\tconst result = options.attr(name, value);\n\t\tif (typeof result === 'string') return result;\n\t}\n\n\tvalue = normalizeAttrValue(value);\n\n\tif (name === 'ref' || name === 'key') return '';\n\tif (name === 'style' && typeof value === 'object') {\n\t\tlet str = '';\n\t\tfor (let prop in value) {\n\t\t\tlet val = value[prop];\n\t\t\tif (val != null && val !== '') {\n\t\t\t\tconst name =\n\t\t\t\t\tprop[0] == '-'\n\t\t\t\t\t\t? prop\n\t\t\t\t\t\t: JS_TO_CSS[prop] ||\n\t\t\t\t\t\t\t(JS_TO_CSS[prop] = prop.replace(CSS_REGEX, '-$&').toLowerCase());\n\n\t\t\t\tlet suffix = ';';\n\t\t\t\tif (\n\t\t\t\t\ttypeof val === 'number' &&\n\t\t\t\t\t// Exclude custom-attributes\n\t\t\t\t\t!name.startsWith('--') &&\n\t\t\t\t\t!IS_NON_DIMENSIONAL.test(name)\n\t\t\t\t) {\n\t\t\t\t\tsuffix = 'px;';\n\t\t\t\t}\n\t\t\t\tstr = str + name + ':' + val + suffix;\n\t\t\t}\n\t\t}\n\t\treturn name + '=\"' + encodeEntities(str) + '\"';\n\t}\n\n\tif (\n\t\tvalue == null ||\n\t\tvalue === false ||\n\t\ttypeof value === 'function' ||\n\t\ttypeof value === 'object'\n\t) {\n\t\treturn '';\n\t} else if (value === true) return name;\n\n\treturn name + '=\"' + encodeEntities('' + value) + '\"';\n}\n\n/**\n * Escape a dynamic child passed to `jsxTemplate`. This function\n * is not expected to be used directly, but rather through a\n * precompile JSX transform\n * @param {*} value\n * @returns {string | null | VNode | Array<string | null | VNode>}\n */\nfunction jsxEscape(value) {\n\tif (\n\t\tvalue == null ||\n\t\ttypeof value === 'boolean' ||\n\t\ttypeof value === 'function'\n\t) {\n\t\treturn null;\n\t}\n\n\tif (typeof value === 'object') {\n\t\t// Check for VNode\n\t\tif (value.constructor === undefined) return value;\n\n\t\tif (isArray(value)) {\n\t\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\t\tvalue[i] = jsxEscape(value[i]);\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t}\n\n\treturn encodeEntities('' + value);\n}\n\nexport {\n\tcreateVNode as jsx,\n\tcreateVNode as jsxs,\n\tcreateVNode as jsxDEV,\n\tFragment,\n\t// precompiled JSX transform\n\tjsxTemplate,\n\tjsxAttr,\n\tjsxEscape\n};\n", "{\n  \"name\": \"@uppy/informer\",\n  \"description\": \"A notification and error pop-up bar for Uppy.\",\n  \"version\": \"4.3.2\",\n  \"license\": \"MIT\",\n  \"main\": \"lib/index.js\",\n  \"style\": \"dist/style.min.css\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"build:css\": \"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css\",\n    \"typecheck\": \"tsc --build\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\",\n    \"uppy-plugin\",\n    \"notification\",\n    \"bar\",\n    \"ui\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"dependencies\": {\n    \"@uppy/utils\": \"^6.2.2\",\n    \"preact\": \"^10.5.13\"\n  },\n  \"peerDependencies\": {\n    \"@uppy/core\": \"^4.5.2\"\n  },\n  \"devDependencies\": {\n    \"cssnano\": \"^7.0.7\",\n    \"postcss\": \"^8.5.6\",\n    \"postcss-cli\": \"^11.0.1\",\n    \"sass\": \"^1.89.2\",\n    \"typescript\": \"^5.8.3\"\n  }\n}", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { Component, createRef, h } from 'preact';\nconst TRANSITION_MS = 300;\nexport default class FadeIn extends Component {\n    ref = createRef();\n    componentWillEnter(callback) {\n        this.ref.current.style.opacity = '1';\n        this.ref.current.style.transform = 'none';\n        setTimeout(callback, TRANSITION_MS);\n    }\n    componentWillLeave(callback) {\n        this.ref.current.style.opacity = '0';\n        this.ref.current.style.transform = 'translateY(350%)';\n        setTimeout(callback, TRANSITION_MS);\n    }\n    render() {\n        const { children } = this.props;\n        return (_jsx(\"div\", { className: \"uppy-Informer-animated\", ref: this.ref, children: children }));\n    }\n}\n", "// INFO: not typing copy pasted libarary code\n// @ts-nocheck\n/**\n * @source https://github.com/developit/preact-transition-group\n */\nimport { Component, cloneElement, h, toChildArray } from 'preact';\nfunction assign(obj, props) {\n    return Object.assign(obj, props);\n}\nfunction getKey(vnode, fallback) {\n    return vnode?.key ?? fallback;\n}\nfunction linkRef(component, name) {\n    // biome-ignore lint/suspicious/noAssignInExpressions: ...\n    const cache = component._ptgLinkedRefs || (component._ptgLinkedRefs = {});\n    return (cache[name] ||\n        // biome-ignore lint/suspicious/noAssignInExpressions: ...\n        (cache[name] = (c) => {\n            component.refs[name] = c;\n        }));\n}\nfunction getChildMapping(children) {\n    const out = {};\n    for (let i = 0; i < children.length; i++) {\n        if (children[i] != null) {\n            const key = getKey(children[i], i.toString(36));\n            out[key] = children[i];\n        }\n    }\n    return out;\n}\nfunction mergeChildMappings(prev, next) {\n    prev = prev || {};\n    next = next || {};\n    const getValueForKey = (key) => Object.hasOwn(next, key) ? next[key] : prev[key];\n    // For each key of `next`, the list of keys to insert before that key in\n    // the combined list\n    const nextKeysPending = {};\n    let pendingKeys = [];\n    for (const prevKey in prev) {\n        if (Object.hasOwn(next, prevKey)) {\n            if (pendingKeys.length) {\n                nextKeysPending[prevKey] = pendingKeys;\n                pendingKeys = [];\n            }\n        }\n        else {\n            pendingKeys.push(prevKey);\n        }\n    }\n    const childMapping = {};\n    for (const nextKey in next) {\n        if (Object.hasOwn(nextKeysPending, nextKey)) {\n            for (let i = 0; i < nextKeysPending[nextKey].length; i++) {\n                const pendingNextKey = nextKeysPending[nextKey][i];\n                childMapping[nextKeysPending[nextKey][i]] =\n                    getValueForKey(pendingNextKey);\n            }\n        }\n        childMapping[nextKey] = getValueForKey(nextKey);\n    }\n    // Finally, add the keys which didn't appear before any key in `next`\n    for (let i = 0; i < pendingKeys.length; i++) {\n        childMapping[pendingKeys[i]] = getValueForKey(pendingKeys[i]);\n    }\n    return childMapping;\n}\nconst identity = (i) => i;\nclass TransitionGroup extends Component {\n    constructor(props, context) {\n        super(props, context);\n        this.refs = {};\n        this.state = {\n            children: getChildMapping(toChildArray(toChildArray(this.props.children)) || []),\n        };\n        this.performAppear = this.performAppear.bind(this);\n        this.performEnter = this.performEnter.bind(this);\n        this.performLeave = this.performLeave.bind(this);\n    }\n    componentWillMount() {\n        this.currentlyTransitioningKeys = {};\n        this.keysToAbortLeave = [];\n        this.keysToEnter = [];\n        this.keysToLeave = [];\n    }\n    componentDidMount() {\n        const initialChildMapping = this.state.children;\n        for (const key in initialChildMapping) {\n            if (initialChildMapping[key]) {\n                // this.performAppear(getKey(initialChildMapping[key], key));\n                this.performAppear(key);\n            }\n        }\n    }\n    componentWillReceiveProps(nextProps) {\n        const nextChildMapping = getChildMapping(toChildArray(nextProps.children) || []);\n        const prevChildMapping = this.state.children;\n        this.setState((prevState) => ({\n            children: mergeChildMappings(prevState.children, nextChildMapping),\n        }));\n        let key;\n        for (key in nextChildMapping) {\n            if (Object.hasOwn(nextChildMapping, key)) {\n                const hasPrev = prevChildMapping && Object.hasOwn(prevChildMapping, key);\n                // We should re-enter the component and abort its leave function\n                if (nextChildMapping[key] &&\n                    hasPrev &&\n                    this.currentlyTransitioningKeys[key]) {\n                    this.keysToEnter.push(key);\n                    this.keysToAbortLeave.push(key);\n                }\n                else if (nextChildMapping[key] &&\n                    !hasPrev &&\n                    !this.currentlyTransitioningKeys[key]) {\n                    this.keysToEnter.push(key);\n                }\n            }\n        }\n        for (key in prevChildMapping) {\n            if (Object.hasOwn(prevChildMapping, key)) {\n                const hasNext = nextChildMapping && Object.hasOwn(nextChildMapping, key);\n                if (prevChildMapping[key] &&\n                    !hasNext &&\n                    !this.currentlyTransitioningKeys[key]) {\n                    this.keysToLeave.push(key);\n                }\n            }\n        }\n    }\n    componentDidUpdate() {\n        const { keysToEnter } = this;\n        this.keysToEnter = [];\n        keysToEnter.forEach(this.performEnter);\n        const { keysToLeave } = this;\n        this.keysToLeave = [];\n        keysToLeave.forEach(this.performLeave);\n    }\n    _finishAbort(key) {\n        const idx = this.keysToAbortLeave.indexOf(key);\n        if (idx !== -1) {\n            this.keysToAbortLeave.splice(idx, 1);\n        }\n    }\n    performAppear(key) {\n        this.currentlyTransitioningKeys[key] = true;\n        const component = this.refs[key];\n        if (component?.componentWillAppear) {\n            component.componentWillAppear(this._handleDoneAppearing.bind(this, key));\n        }\n        else {\n            this._handleDoneAppearing(key);\n        }\n    }\n    _handleDoneAppearing(key) {\n        const component = this.refs[key];\n        if (component?.componentDidAppear) {\n            component.componentDidAppear();\n        }\n        delete this.currentlyTransitioningKeys[key];\n        this._finishAbort(key);\n        const currentChildMapping = getChildMapping(toChildArray(this.props.children) || []);\n        if (!currentChildMapping || !Object.hasOwn(currentChildMapping, key)) {\n            // This was removed before it had fully appeared. Remove it.\n            this.performLeave(key);\n        }\n    }\n    performEnter(key) {\n        this.currentlyTransitioningKeys[key] = true;\n        const component = this.refs[key];\n        if (component?.componentWillEnter) {\n            component.componentWillEnter(this._handleDoneEntering.bind(this, key));\n        }\n        else {\n            this._handleDoneEntering(key);\n        }\n    }\n    _handleDoneEntering(key) {\n        const component = this.refs[key];\n        if (component?.componentDidEnter) {\n            component.componentDidEnter();\n        }\n        delete this.currentlyTransitioningKeys[key];\n        this._finishAbort(key);\n        const currentChildMapping = getChildMapping(toChildArray(this.props.children) || []);\n        if (!currentChildMapping || !Object.hasOwn(currentChildMapping, key)) {\n            // This was removed before it had fully entered. Remove it.\n            this.performLeave(key);\n        }\n    }\n    performLeave(key) {\n        // If we should immediately abort this leave function,\n        // don't run the leave transition at all.\n        const idx = this.keysToAbortLeave.indexOf(key);\n        if (idx !== -1) {\n            return;\n        }\n        this.currentlyTransitioningKeys[key] = true;\n        const component = this.refs[key];\n        if (component?.componentWillLeave) {\n            component.componentWillLeave(this._handleDoneLeaving.bind(this, key));\n        }\n        else {\n            // Note that this is somewhat dangerous b/c it calls setState()\n            // again, effectively mutating the component before all the work\n            // is done.\n            this._handleDoneLeaving(key);\n        }\n    }\n    _handleDoneLeaving(key) {\n        // If we should immediately abort the leave,\n        // then skip this altogether\n        const idx = this.keysToAbortLeave.indexOf(key);\n        if (idx !== -1) {\n            return;\n        }\n        const component = this.refs[key];\n        if (component?.componentDidLeave) {\n            component.componentDidLeave();\n        }\n        delete this.currentlyTransitioningKeys[key];\n        const currentChildMapping = getChildMapping(toChildArray(this.props.children) || []);\n        if (currentChildMapping && Object.hasOwn(currentChildMapping, key)) {\n            // This entered again before it fully left. Add it again.\n            this.performEnter(key);\n        }\n        else {\n            const children = assign({}, this.state.children);\n            delete children[key];\n            this.setState({ children });\n        }\n    }\n    render({ childFactory, transitionLeave, transitionName, transitionAppear, transitionEnter, transitionLeaveTimeout, transitionEnterTimeout, transitionAppearTimeout, component, ...props }, { children }) {\n        // TODO: we could get rid of the need for the wrapper node\n        // by cloning a single child\n        const childrenToRender = Object.entries(children)\n            .map(([key, child]) => {\n            if (!child)\n                return undefined;\n            const ref = linkRef(this, key);\n            return cloneElement(childFactory(child), { ref, key });\n        })\n            .filter(Boolean);\n        return h(component, props, childrenToRender);\n    }\n}\nTransitionGroup.defaultProps = {\n    component: 'span',\n    childFactory: identity,\n};\nexport default TransitionGroup;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { UIPlugin } from '@uppy/core';\nimport { h } from 'preact';\nimport packageJson from '../package.json' with { type: 'json' };\nimport FadeIn from './FadeIn.js';\nimport TransitionGroup from './TransitionGroup.js';\n/**\n * Informer\n * Shows rad message bubbles\n * used like this: `uppy.info('hello world', 'info', 5000)`\n * or for errors: `uppy.info('Error uploading img.jpg', 'error', 5000)`\n *\n */\nexport default class Informer extends UIPlugin {\n    static VERSION = packageJson.version;\n    constructor(uppy, opts) {\n        super(uppy, opts);\n        this.type = 'progressindicator';\n        this.id = this.opts.id || 'Informer';\n        this.title = 'Informer';\n    }\n    render = (state) => {\n        return (_jsx(\"div\", { className: \"uppy uppy-Informer\", children: _jsx(TransitionGroup, { children: state.info.map((info) => (_jsx(FadeIn, { children: _jsxs(\"p\", { role: \"alert\", children: [info.message, ' ', info.details && (\n                            // biome-ignore lint/a11y/useKeyWithClickEvents: ...\n                            _jsx(\"span\", { \"aria-label\": info.details, \"data-microtip-position\": \"top-left\", \"data-microtip-size\": \"medium\", role: \"tooltip\", onClick: () => alert(`${info.message} \\n\\n ${info.details}`), children: \"?\" }))] }) }, info.message))) }) }));\n    };\n    install() {\n        const { target } = this.opts;\n        if (target) {\n            this.mount(target, this);\n        }\n    }\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { useCallback } from 'preact/hooks';\nfunction GoogleIcon() {\n    return (_jsx(\"svg\", { width: \"26\", height: \"26\", viewBox: \"0 0 26 26\", xmlns: \"http://www.w3.org/2000/svg\", children: _jsxs(\"g\", { fill: \"none\", \"fill-rule\": \"evenodd\", children: [_jsx(\"circle\", { fill: \"#FFF\", cx: \"13\", cy: \"13\", r: \"13\" }), _jsx(\"path\", { d: \"M21.64 13.205c0-.639-.057-1.252-.164-1.841H13v3.481h4.844a4.14 4.14 0 01-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z\", fill: \"#4285F4\", \"fill-rule\": \"nonzero\" }), _jsx(\"path\", { d: \"M13 22c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H4.957v2.332A8.997 8.997 0 0013 22z\", fill: \"#34A853\", \"fill-rule\": \"nonzero\" }), _jsx(\"path\", { d: \"M7.964 14.71A5.41 5.41 0 017.682 13c0-.593.102-1.17.282-1.71V8.958H4.957A8.996 8.996 0 004 13c0 1.452.348 2.827.957 4.042l3.007-2.332z\", fill: \"#FBBC05\", \"fill-rule\": \"nonzero\" }), _jsx(\"path\", { d: \"M13 7.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C17.463 4.891 15.426 4 13 4a8.997 8.997 0 00-8.043 4.958l3.007 2.332C8.672 9.163 10.656 7.58 13 7.58z\", fill: \"#EA4335\", \"fill-rule\": \"nonzero\" }), _jsx(\"path\", { d: \"M4 4h18v18H4z\" })] }) }));\n}\nfunction DefaultForm({ pluginName, i18n, onAuth, }) {\n    // In order to comply with Google's brand we need to create a different button\n    // for the Google Drive plugin\n    const isGoogleDrive = pluginName === 'Google Drive';\n    const onSubmit = useCallback((e) => {\n        e.preventDefault();\n        onAuth();\n    }, [onAuth]);\n    return (_jsx(\"form\", { onSubmit: onSubmit, children: isGoogleDrive ? (_jsxs(\"button\", { type: \"submit\", className: \"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn uppy-Provider-btn-google\", \"data-uppy-super-focusable\": true, children: [_jsx(GoogleIcon, {}), i18n('signInWithGoogle')] })) : (_jsx(\"button\", { type: \"submit\", className: \"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn\", \"data-uppy-super-focusable\": true, children: i18n('authenticateWith', { pluginName }) })) }));\n}\nconst defaultRenderForm = ({ pluginName, i18n, onAuth, }) => _jsx(DefaultForm, { pluginName: pluginName, i18n: i18n, onAuth: onAuth });\nexport default function AuthView({ loading, pluginName, pluginIcon, i18n, handleAuth, renderForm = defaultRenderForm, }) {\n    return (_jsxs(\"div\", { className: \"uppy-Provider-auth\", children: [_jsx(\"div\", { className: \"uppy-Provider-authIcon\", children: pluginIcon() }), _jsx(\"div\", { className: \"uppy-Provider-authTitle\", children: i18n('authenticateWithTitle', {\n                    pluginName,\n                }) }), renderForm({ pluginName, i18n, loading, onAuth: handleAuth })] }));\n}\n", "import getFileNameAndExtension from './getFileNameAndExtension.js';\nexport default function remoteFileObjToLocal(file) {\n    return {\n        ...file,\n        type: file.mimeType,\n        extension: file.name ? getFileNameAndExtension(file.name).extension : null,\n    };\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport remoteFileObjToLocal from '@uppy/utils/lib/remoteFileObjToLocal';\nimport classNames from 'classnames';\nimport packageJson from '../../package.json' with { type: 'json' };\nimport Browser from '../Browser.js';\nimport FooterActions from '../FooterActions.js';\nimport SearchInput from '../SearchInput.js';\nimport addFiles from '../utils/addFiles.js';\nimport getClickedRange from '../utils/getClickedRange.js';\nimport handleError from '../utils/handleError.js';\nimport getBreadcrumbs from '../utils/PartialTreeUtils/getBreadcrumbs.js';\nimport getCheckedFilesWithPaths from '../utils/PartialTreeUtils/getCheckedFilesWithPaths.js';\nimport getNumberOfSelectedFiles from '../utils/PartialTreeUtils/getNumberOfSelectedFiles.js';\nimport PartialTreeUtils from '../utils/PartialTreeUtils/index.js';\nimport shouldHandleScroll from '../utils/shouldHandleScroll.js';\nimport AuthView from './AuthView.js';\nimport Header from './Header.js';\nexport function defaultPickerIcon() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", width: \"30\", height: \"30\", viewBox: \"0 0 30 30\", children: _jsx(\"path\", { d: \"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z\" }) }));\n}\nconst getDefaultState = (rootFolderId) => ({\n    authenticated: undefined, // we don't know yet\n    partialTree: [\n        {\n            type: 'root',\n            id: rootFolderId,\n            cached: false,\n            nextPagePath: null,\n        },\n    ],\n    currentFolderId: rootFolderId,\n    searchString: '',\n    didFirstRender: false,\n    username: null,\n    loading: false,\n});\n/**\n * Class to easily generate generic views for Provider plugins\n */\nexport default class ProviderView {\n    static VERSION = packageJson.version;\n    plugin;\n    provider;\n    opts;\n    isHandlingScroll = false;\n    lastCheckbox = null;\n    constructor(plugin, opts) {\n        this.plugin = plugin;\n        this.provider = opts.provider;\n        const defaultOptions = {\n            viewType: 'list',\n            showTitles: true,\n            showFilter: true,\n            showBreadcrumbs: true,\n            loadAllFiles: false,\n            virtualList: false,\n        };\n        this.opts = { ...defaultOptions, ...opts };\n        this.openFolder = this.openFolder.bind(this);\n        this.logout = this.logout.bind(this);\n        this.handleAuth = this.handleAuth.bind(this);\n        this.handleScroll = this.handleScroll.bind(this);\n        this.resetPluginState = this.resetPluginState.bind(this);\n        this.donePicking = this.donePicking.bind(this);\n        this.render = this.render.bind(this);\n        this.cancelSelection = this.cancelSelection.bind(this);\n        this.toggleCheckbox = this.toggleCheckbox.bind(this);\n        // Set default state for the plugin\n        this.resetPluginState();\n        // todo\n        // @ts-expect-error this should be typed in @uppy/dashboard.\n        this.plugin.uppy.on('dashboard:close-panel', this.resetPluginState);\n        this.plugin.uppy.registerRequestClient(this.provider.provider, this.provider);\n    }\n    resetPluginState() {\n        this.plugin.setPluginState(getDefaultState(this.plugin.rootFolderId));\n    }\n    tearDown() {\n        // Nothing.\n    }\n    setLoading(loading) {\n        this.plugin.setPluginState({ loading });\n    }\n    cancelSelection() {\n        const { partialTree } = this.plugin.getPluginState();\n        const newPartialTree = partialTree.map((item) => item.type === 'root' ? item : { ...item, status: 'unchecked' });\n        this.plugin.setPluginState({ partialTree: newPartialTree });\n    }\n    #abortController;\n    async #withAbort(op) {\n        // prevent multiple requests in parallel from causing race conditions\n        this.#abortController?.abort();\n        const abortController = new AbortController();\n        this.#abortController = abortController;\n        const cancelRequest = () => {\n            abortController.abort();\n        };\n        try {\n            // @ts-expect-error this should be typed in @uppy/dashboard.\n            // Even then I don't think we can make this work without adding dashboard\n            // as a dependency to provider-views.\n            this.plugin.uppy.on('dashboard:close-panel', cancelRequest);\n            this.plugin.uppy.on('cancel-all', cancelRequest);\n            await op(abortController.signal);\n        }\n        finally {\n            // @ts-expect-error this should be typed in @uppy/dashboard.\n            // Even then I don't think we can make this work without adding dashboard\n            // as a dependency to provider-views.\n            this.plugin.uppy.off('dashboard:close-panel', cancelRequest);\n            this.plugin.uppy.off('cancel-all', cancelRequest);\n            this.#abortController = undefined;\n        }\n    }\n    async openFolder(folderId) {\n        this.lastCheckbox = null;\n        // Returning cached folder\n        const { partialTree } = this.plugin.getPluginState();\n        const clickedFolder = partialTree.find((folder) => folder.id === folderId);\n        if (clickedFolder.cached) {\n            this.plugin.setPluginState({\n                currentFolderId: folderId,\n                searchString: '',\n            });\n            return;\n        }\n        this.setLoading(true);\n        await this.#withAbort(async (signal) => {\n            let currentPagePath = folderId;\n            let currentItems = [];\n            do {\n                const { username, nextPagePath, items } = await this.provider.list(currentPagePath, { signal });\n                // It's important to set the username during one of our first fetches\n                this.plugin.setPluginState({ username });\n                currentPagePath = nextPagePath;\n                currentItems = currentItems.concat(items);\n                this.setLoading(this.plugin.uppy.i18n('loadedXFiles', {\n                    numFiles: currentItems.length,\n                }));\n            } while (this.opts.loadAllFiles && currentPagePath);\n            const newPartialTree = PartialTreeUtils.afterOpenFolder(partialTree, currentItems, clickedFolder, currentPagePath, this.validateSingleFile);\n            this.plugin.setPluginState({\n                partialTree: newPartialTree,\n                currentFolderId: folderId,\n                searchString: '',\n            });\n        }).catch(handleError(this.plugin.uppy));\n        this.setLoading(false);\n    }\n    /**\n     * Removes session token on client side.\n     */\n    async logout() {\n        await this.#withAbort(async (signal) => {\n            const res = await this.provider.logout({\n                signal,\n            });\n            // res.ok is from the JSON body, not to be confused with Response.ok\n            if (res.ok) {\n                if (!res.revoked) {\n                    const message = this.plugin.uppy.i18n('companionUnauthorizeHint', {\n                        provider: this.plugin.title,\n                        url: res.manual_revoke_url,\n                    });\n                    this.plugin.uppy.info(message, 'info', 7000);\n                }\n                this.plugin.setPluginState({\n                    ...getDefaultState(this.plugin.rootFolderId),\n                    authenticated: false,\n                });\n            }\n        }).catch(handleError(this.plugin.uppy));\n    }\n    async handleAuth(authFormData) {\n        await this.#withAbort(async (signal) => {\n            this.setLoading(true);\n            await this.provider.login({ authFormData, signal });\n            this.plugin.setPluginState({ authenticated: true });\n            await Promise.all([\n                this.provider.fetchPreAuthToken(),\n                this.openFolder(this.plugin.rootFolderId),\n            ]);\n        }).catch(handleError(this.plugin.uppy));\n        this.setLoading(false);\n    }\n    async handleScroll(event) {\n        const { partialTree, currentFolderId } = this.plugin.getPluginState();\n        const currentFolder = partialTree.find((i) => i.id === currentFolderId);\n        if (shouldHandleScroll(event) &&\n            !this.isHandlingScroll &&\n            currentFolder.nextPagePath) {\n            this.isHandlingScroll = true;\n            await this.#withAbort(async (signal) => {\n                const { nextPagePath, items } = await this.provider.list(currentFolder.nextPagePath, { signal });\n                const newPartialTree = PartialTreeUtils.afterScrollFolder(partialTree, currentFolderId, items, nextPagePath, this.validateSingleFile);\n                this.plugin.setPluginState({ partialTree: newPartialTree });\n            }).catch(handleError(this.plugin.uppy));\n            this.isHandlingScroll = false;\n        }\n    }\n    validateSingleFile = (file) => {\n        const companionFile = remoteFileObjToLocal(file);\n        const result = this.plugin.uppy.validateSingleFile(companionFile);\n        return result;\n    };\n    async donePicking() {\n        const { partialTree } = this.plugin.getPluginState();\n        this.setLoading(true);\n        await this.#withAbort(async (signal) => {\n            // 1. Enrich our partialTree by fetching all 'checked' but not-yet-fetched folders\n            const enrichedTree = await PartialTreeUtils.afterFill(partialTree, (path) => this.provider.list(path, { signal }), this.validateSingleFile, (n) => {\n                this.setLoading(this.plugin.uppy.i18n('addedNumFiles', { numFiles: n }));\n            });\n            // 2. Now that we know how many files there are - recheck aggregateRestrictions!\n            const aggregateRestrictionError = this.validateAggregateRestrictions(enrichedTree);\n            if (aggregateRestrictionError) {\n                this.plugin.setPluginState({ partialTree: enrichedTree });\n                return;\n            }\n            // 3. Add files\n            const companionFiles = getCheckedFilesWithPaths(enrichedTree);\n            addFiles(companionFiles, this.plugin, this.provider);\n            // 4. Reset state\n            this.resetPluginState();\n        }).catch(handleError(this.plugin.uppy));\n        this.setLoading(false);\n    }\n    toggleCheckbox(ourItem, isShiftKeyPressed) {\n        const { partialTree } = this.plugin.getPluginState();\n        const clickedRange = getClickedRange(ourItem.id, this.getDisplayedPartialTree(), isShiftKeyPressed, this.lastCheckbox);\n        const newPartialTree = PartialTreeUtils.afterToggleCheckbox(partialTree, clickedRange);\n        this.plugin.setPluginState({ partialTree: newPartialTree });\n        this.lastCheckbox = ourItem.id;\n    }\n    getDisplayedPartialTree = () => {\n        const { partialTree, currentFolderId, searchString } = this.plugin.getPluginState();\n        const inThisFolder = partialTree.filter((item) => item.type !== 'root' && item.parentId === currentFolderId);\n        const filtered = searchString === ''\n            ? inThisFolder\n            : inThisFolder.filter((item) => (item.data.name ?? this.plugin.uppy.i18n('unnamed'))\n                .toLowerCase()\n                .indexOf(searchString.toLowerCase()) !== -1);\n        return filtered;\n    };\n    getBreadcrumbs = () => {\n        const { partialTree, currentFolderId } = this.plugin.getPluginState();\n        return getBreadcrumbs(partialTree, currentFolderId);\n    };\n    getSelectedAmount = () => {\n        const { partialTree } = this.plugin.getPluginState();\n        return getNumberOfSelectedFiles(partialTree);\n    };\n    validateAggregateRestrictions = (partialTree) => {\n        const checkedFiles = partialTree.filter((item) => item.type === 'file' && item.status === 'checked');\n        const uppyFiles = checkedFiles.map((file) => file.data);\n        return this.plugin.uppy.validateAggregateRestrictions(uppyFiles);\n    };\n    render(state, viewOptions = {}) {\n        const { didFirstRender } = this.plugin.getPluginState();\n        const { i18n } = this.plugin.uppy;\n        if (!didFirstRender) {\n            this.plugin.setPluginState({ didFirstRender: true });\n            this.provider.fetchPreAuthToken();\n            this.openFolder(this.plugin.rootFolderId);\n        }\n        const opts = { ...this.opts, ...viewOptions };\n        const { authenticated, loading } = this.plugin.getPluginState();\n        const pluginIcon = this.plugin.icon || defaultPickerIcon;\n        if (authenticated === false) {\n            return (_jsx(AuthView, { pluginName: this.plugin.title, pluginIcon: pluginIcon, handleAuth: this.handleAuth, i18n: this.plugin.uppy.i18n, renderForm: opts.renderAuthForm, loading: loading }));\n        }\n        const { partialTree, username, searchString } = this.plugin.getPluginState();\n        const breadcrumbs = this.getBreadcrumbs();\n        return (_jsxs(\"div\", { className: classNames('uppy-ProviderBrowser', `uppy-ProviderBrowser-viewType--${opts.viewType}`), children: [_jsx(Header, { showBreadcrumbs: opts.showBreadcrumbs, openFolder: this.openFolder, breadcrumbs: breadcrumbs, pluginIcon: pluginIcon, title: this.plugin.title, logout: this.logout, username: username, i18n: i18n }), opts.showFilter && (_jsx(SearchInput, { searchString: searchString, setSearchString: (s) => {\n                        this.plugin.setPluginState({ searchString: s });\n                    }, submitSearchString: () => { }, inputLabel: i18n('filter'), clearSearchLabel: i18n('resetFilter'), wrapperClassName: \"uppy-ProviderBrowser-searchFilter\", inputClassName: \"uppy-ProviderBrowser-searchFilterInput\" })), _jsx(Browser, { toggleCheckbox: this.toggleCheckbox, displayedPartialTree: this.getDisplayedPartialTree(), openFolder: this.openFolder, virtualList: opts.virtualList, noResultsLabel: i18n('noFilesFound'), handleScroll: this.handleScroll, viewType: opts.viewType, showTitles: opts.showTitles, i18n: this.plugin.uppy.i18n, isLoading: loading, utmSource: \"Companion\" }), _jsx(FooterActions, { partialTree: partialTree, donePicking: this.donePicking, cancelSelection: this.cancelSelection, i18n: i18n, validateAggregateRestrictions: this.validateAggregateRestrictions })] }));\n    }\n}\n", "{\n  \"name\": \"@uppy/provider-views\",\n  \"description\": \"View library for Uppy remote provider plugins.\",\n  \"version\": \"4.5.3\",\n  \"license\": \"MIT\",\n  \"main\": \"lib/index.js\",\n  \"style\": \"dist/style.min.css\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"build:css\": \"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --environment=jsdom --silent='passed-only'\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"dependencies\": {\n    \"@uppy/utils\": \"^6.2.2\",\n    \"classnames\": \"^2.2.6\",\n    \"nanoid\": \"^5.0.9\",\n    \"p-queue\": \"^8.0.0\",\n    \"preact\": \"^10.5.13\"\n  },\n  \"devDependencies\": {\n    \"@types/gapi\": \"^0.0.47\",\n    \"@types/google.accounts\": \"^0.0.14\",\n    \"@types/google.picker\": \"^0.0.42\",\n    \"cssnano\": \"^7.0.7\",\n    \"jsdom\": \"^26.1.0\",\n    \"postcss\": \"^8.5.6\",\n    \"postcss-cli\": \"^11.0.1\",\n    \"sass\": \"^1.89.2\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  },\n  \"peerDependencies\": {\n    \"@uppy/core\": \"^4.5.3\"\n  }\n}", "import { jsx as _jsx } from \"preact/jsx-runtime\";\n/**\n * Adapted from preact-virtual-list: https://github.com/developit/preact-virtual-list\n *\n * \u00A9 2016 Jason Miller\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n *\n * Adaptations:\n * - Added role=presentation to helper elements\n * - Tweaked styles for Uppy's Dashboard use case\n */\nimport { Component, h } from 'preact';\nconst STYLE_INNER = {\n    position: 'relative',\n    // Disabled for our use case: the wrapper elements around FileList already deal with overflow,\n    // and this additional property would hide things that we want to show.\n    //\n    // overflow: 'hidden',\n    width: '100%',\n    minHeight: '100%',\n};\nconst STYLE_CONTENT = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    // Because the `top` value gets set to some offset, this `height` being 100% would make the scrollbar\n    // stretch far beyond the content. For our use case, the content div actually can get its height from\n    // the elements inside it, so we don't need to specify a `height` property at all.\n    //\n    // height: '100%',\n    width: '100%',\n    overflow: 'visible',\n};\nclass VirtualList extends Component {\n    constructor(props) {\n        super(props);\n        // The currently focused node, used to retain focus when the visible rows change.\n        // To avoid update loops, this should not cause state updates, so it's kept as a plain property.\n        this.focusElement = null;\n        this.state = {\n            offset: 0,\n            height: 0,\n        };\n    }\n    componentDidMount() {\n        this.resize();\n        window.addEventListener('resize', this.handleResize);\n    }\n    // TODO: refactor to stable lifecycle method\n    componentWillUpdate() {\n        if (this.base.contains(document.activeElement)) {\n            this.focusElement = document.activeElement;\n        }\n    }\n    componentDidUpdate() {\n        // Maintain focus when rows are added and removed.\n        if (this.focusElement?.parentNode &&\n            document.activeElement !== this.focusElement) {\n            this.focusElement.focus();\n        }\n        this.focusElement = null;\n        this.resize();\n    }\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.handleResize);\n    }\n    handleScroll = () => {\n        this.setState({ offset: this.base.scrollTop });\n    };\n    handleResize = () => {\n        this.resize();\n    };\n    resize() {\n        const { height } = this.state;\n        if (height !== this.base.offsetHeight) {\n            this.setState({\n                height: this.base.offsetHeight,\n            });\n        }\n    }\n    render({ data, rowHeight, renderRow, overscanCount = 10, ...props }) {\n        const { offset, height } = this.state;\n        // first visible row index\n        let start = Math.floor(offset / rowHeight);\n        // actual number of visible rows (without overscan)\n        let visibleRowCount = Math.floor(height / rowHeight);\n        // Overscan: render blocks of rows modulo an overscan row count\n        // This dramatically reduces DOM writes during scrolling\n        if (overscanCount) {\n            start = Math.max(0, start - (start % overscanCount));\n            visibleRowCount += overscanCount;\n        }\n        // last visible + overscan row index + padding to allow keyboard focus to travel past the visible area\n        const end = start + visibleRowCount + 4;\n        // data slice currently in viewport plus overscan items\n        const selection = data.slice(start, end);\n        const styleInner = { ...STYLE_INNER, height: data.length * rowHeight };\n        const styleContent = { ...STYLE_CONTENT, top: start * rowHeight };\n        // The `role=\"presentation\"` attributes ensure that these wrapper elements are not treated as list\n        // items by accessibility and outline tools.\n        return (_jsx(\"div\", { onScroll: this.handleScroll, ...props, children: _jsx(\"div\", { role: \"presentation\", style: styleInner, children: _jsx(\"div\", { role: \"presentation\", style: styleContent, children: selection.map(renderRow) }) }) }));\n    }\n}\nexport default VirtualList;\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport GridItem from './components/GridItem.js';\nimport ListItem from './components/ListItem.js';\nexport default function Item(props) {\n    const { viewType, toggleCheckbox, showTitles, i18n, openFolder, file, utmSource, } = props;\n    const restrictionError = file.type === 'folder' ? null : file.restrictionError;\n    const isDisabled = !!restrictionError && file.status !== 'checked';\n    const ourProps = {\n        file,\n        openFolder,\n        toggleCheckbox,\n        utmSource,\n        i18n,\n        viewType,\n        showTitles,\n        className: classNames('uppy-ProviderBrowserItem', { 'uppy-ProviderBrowserItem--disabled': isDisabled }, { 'uppy-ProviderBrowserItem--noPreview': file.data.icon === 'video' }, { 'uppy-ProviderBrowserItem--is-checked': file.status === 'checked' }, { 'uppy-ProviderBrowserItem--is-partial': file.status === 'partial' }),\n        isDisabled,\n        restrictionError,\n    };\n    switch (viewType) {\n        case 'grid':\n            return _jsx(GridItem, { ...ourProps });\n        case 'list':\n            return _jsx(ListItem, { ...ourProps });\n        case 'unsplash':\n            return (_jsx(GridItem, { ...ourProps, children: _jsx(\"a\", { href: `${file.data.author.url}?utm_source=${utmSource}&utm_medium=referral`, target: \"_blank\", rel: \"noopener noreferrer\", className: \"uppy-ProviderBrowserItem-author\", tabIndex: -1, children: file.data.author.name }) }));\n        default:\n            throw new Error(`There is no such type ${viewType}`);\n    }\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nfunction FileIcon() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: 11, height: 14.5, viewBox: \"0 0 44 58\", children: _jsx(\"path\", { d: \"M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z\" }) }));\n}\nfunction FolderIcon() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", style: { minWidth: 16, marginRight: 3 }, viewBox: \"0 0 276.157 276.157\", children: _jsx(\"path\", { d: \"M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z\" }) }));\n}\nfunction VideoIcon() {\n    return (_jsxs(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", style: { width: 16, marginRight: 4 }, viewBox: \"0 0 58 58\", children: [_jsx(\"path\", { d: \"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z\" }), _jsx(\"path\", { d: \"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z\" })] }));\n}\nexport default function ItemIcon({ itemIconString, alt = undefined, }) {\n    if (itemIconString === null)\n        return null;\n    switch (itemIconString) {\n        case 'file':\n            return _jsx(FileIcon, {});\n        case 'folder':\n            return _jsx(FolderIcon, {});\n        case 'video':\n            return _jsx(VideoIcon, {});\n        default: {\n            return (_jsx(\"img\", { src: itemIconString, alt: alt, referrerPolicy: \"no-referrer\", loading: \"lazy\", width: 16, height: 16 }));\n        }\n    }\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport ItemIcon from './ItemIcon.js';\nfunction GridItem({ file, toggleCheckbox, className, isDisabled, restrictionError, showTitles, children = null, i18n, }) {\n    return (_jsxs(\"li\", { className: className, title: isDisabled && restrictionError ? restrictionError : undefined, children: [_jsx(\"input\", { type: \"checkbox\", className: \"uppy-u-reset uppy-ProviderBrowserItem-checkbox uppy-ProviderBrowserItem-checkbox--grid\", onChange: toggleCheckbox, name: \"listitem\", id: file.id, checked: file.status === 'checked', disabled: isDisabled, \"data-uppy-super-focusable\": true }), _jsxs(\"label\", { htmlFor: file.id, \"aria-label\": file.data.name ?? i18n('unnamed'), className: \"uppy-u-reset uppy-ProviderBrowserItem-inner\", children: [_jsx(ItemIcon, { itemIconString: file.data.thumbnail || file.data.icon }), showTitles && (file.data.name ?? i18n('unnamed')), children] })] }));\n}\nexport default GridItem;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport ItemIcon from './ItemIcon.js';\nexport default function ListItem({ file, openFolder, className, isDisabled, restrictionError, toggleCheckbox, showTitles, i18n, }) {\n    return (_jsxs(\"li\", { className: className, title: file.status !== 'checked' && restrictionError\n            ? restrictionError\n            : undefined, children: [_jsx(\"input\", { type: \"checkbox\", className: \"uppy-u-reset uppy-ProviderBrowserItem-checkbox\", onChange: toggleCheckbox, \n                // for the <label/>\n                name: \"listitem\", id: file.id, checked: file.status === 'checked', \"aria-label\": file.data.isFolder\n                    ? i18n('allFilesFromFolderNamed', {\n                        name: file.data.name ?? i18n('unnamed'),\n                    })\n                    : null, disabled: isDisabled, \"data-uppy-super-focusable\": true }), file.data.isFolder ? (\n            // button to open a folder\n            _jsxs(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-ProviderBrowserItem-inner\", onClick: () => openFolder(file.id), \"aria-label\": i18n('openFolderNamed', {\n                    name: file.data.name ?? i18n('unnamed'),\n                }), children: [_jsx(\"div\", { className: \"uppy-ProviderBrowserItem-iconWrap\", children: _jsx(ItemIcon, { itemIconString: file.data.icon }) }), showTitles && file.data.name ? (_jsx(\"span\", { children: file.data.name })) : (i18n('unnamed'))] })) : (\n            // label for a checkbox\n            _jsxs(\"label\", { htmlFor: file.id, className: \"uppy-u-reset uppy-ProviderBrowserItem-inner\", children: [_jsx(\"div\", { className: \"uppy-ProviderBrowserItem-iconWrap\", children: _jsx(ItemIcon, { itemIconString: file.data.icon }) }), showTitles && (file.data.name ?? i18n('unnamed'))] }))] }));\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport VirtualList from '@uppy/utils/lib/VirtualList';\nimport { useEffect, useState } from 'preact/hooks';\nimport Item from './Item/index.js';\nfunction Browser(props) {\n    const { displayedPartialTree, viewType, toggleCheckbox, handleScroll, showTitles, i18n, isLoading, openFolder, noResultsLabel, virtualList, utmSource, } = props;\n    const [isShiftKeyPressed, setIsShiftKeyPressed] = useState(false);\n    // This records whether the user is holding the SHIFT key this very moment.\n    // Typically, this is implemented using `onClick((e) => e.shiftKey)` -\n    // however we can't use that, because for accessibility reasons\n    // we're using html tags that don't support `e.shiftKey` property (see #3768).\n    useEffect(() => {\n        const handleKeyUp = (e) => {\n            if (e.key === 'Shift')\n                setIsShiftKeyPressed(false);\n        };\n        const handleKeyDown = (e) => {\n            if (e.key === 'Shift')\n                setIsShiftKeyPressed(true);\n        };\n        document.addEventListener('keyup', handleKeyUp);\n        document.addEventListener('keydown', handleKeyDown);\n        return () => {\n            document.removeEventListener('keyup', handleKeyUp);\n            document.removeEventListener('keydown', handleKeyDown);\n        };\n    }, []);\n    if (isLoading) {\n        return (_jsx(\"div\", { className: \"uppy-Provider-loading\", children: typeof isLoading === 'string' ? isLoading : i18n('loading') }));\n    }\n    if (displayedPartialTree.length === 0) {\n        return _jsx(\"div\", { className: \"uppy-Provider-empty\", children: noResultsLabel });\n    }\n    const renderItem = (item) => (_jsx(Item, { viewType: viewType, toggleCheckbox: (event) => {\n            event.stopPropagation();\n            event.preventDefault();\n            // Prevent shift-clicking from highlighting file names\n            // (https://stackoverflow.com/a/1527797/3192470)\n            document.getSelection()?.removeAllRanges();\n            toggleCheckbox(item, isShiftKeyPressed);\n        }, showTitles: showTitles, i18n: i18n, openFolder: openFolder, file: item, utmSource: utmSource }, item.id));\n    // todo remove virtuallist option and always use virtual list\n    if (virtualList) {\n        return (_jsx(\"div\", { className: \"uppy-ProviderBrowser-body\", children: _jsx(VirtualList, { className: \"uppy-ProviderBrowser-list\", data: displayedPartialTree, renderRow: renderItem, rowHeight: 35.5 }) }));\n    }\n    return (_jsx(\"div\", { className: \"uppy-ProviderBrowser-body\", children: _jsx(\"ul\", { className: \"uppy-ProviderBrowser-list\", onScroll: handleScroll, \n            // making <ul> not focusable for firefox\n            tabIndex: -1, children: displayedPartialTree.map(renderItem) }) }));\n}\nexport default Browser;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport { useMemo } from 'preact/hooks';\nimport getNumberOfSelectedFiles from './utils/PartialTreeUtils/getNumberOfSelectedFiles.js';\nexport default function FooterActions({ cancelSelection, donePicking, i18n, partialTree, validateAggregateRestrictions, }) {\n    const aggregateRestrictionError = useMemo(() => {\n        return validateAggregateRestrictions(partialTree);\n    }, [partialTree, validateAggregateRestrictions]);\n    const nOfSelectedFiles = useMemo(() => {\n        return getNumberOfSelectedFiles(partialTree);\n    }, [partialTree]);\n    if (nOfSelectedFiles === 0) {\n        return null;\n    }\n    return (_jsxs(\"div\", { className: \"uppy-ProviderBrowser-footer\", children: [_jsxs(\"div\", { className: \"uppy-ProviderBrowser-footer-buttons\", children: [_jsx(\"button\", { className: classNames('uppy-u-reset uppy-c-btn uppy-c-btn-primary', {\n                            'uppy-c-btn--disabled': aggregateRestrictionError,\n                        }), disabled: !!aggregateRestrictionError, onClick: donePicking, type: \"button\", children: i18n('selectX', {\n                            smart_count: nOfSelectedFiles,\n                        }) }), _jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-c-btn-link\", onClick: cancelSelection, type: \"button\", children: i18n('cancel') })] }), aggregateRestrictionError && (_jsx(\"div\", { className: \"uppy-ProviderBrowser-footer-error\", children: aggregateRestrictionError }))] }));\n}\n", "/**\n * We're interested in all 'checked' leaves of this tree,\n * but we don't yet know how many files there are inside of each checked folder.\n * `getNumberOfSelectedFiles()` returns the most intuitive number we can show to the user\n * in this situation.\n */\nconst getNumberOfSelectedFiles = (partialTree) => {\n    const checkedLeaves = partialTree.filter((item) => {\n        if (item.type === 'file' && item.status === 'checked') {\n            return true;\n        }\n        if (item.type === 'folder' && item.status === 'checked') {\n            const doesItHaveChildren = partialTree.some((i) => i.type !== 'root' && i.parentId === item.id);\n            return !doesItHaveChildren;\n        }\n        return false;\n    });\n    return checkedLeaves.length;\n};\nexport default getNumberOfSelectedFiles;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { nanoid } from 'nanoid/non-secure';\nimport { useCallback, useEffect, useState } from 'preact/hooks';\nfunction SearchInput({ searchString, setSearchString, submitSearchString, wrapperClassName, inputClassName, inputLabel, clearSearchLabel = '', showButton = false, buttonLabel = '', buttonCSSClassName = '', }) {\n    const onInput = (e) => {\n        setSearchString(e.target.value);\n    };\n    const submit = useCallback((ev) => {\n        ev.preventDefault();\n        submitSearchString();\n    }, [submitSearchString]);\n    // We do this to avoid nested <form>s\n    // (See https://github.com/transloadit/uppy/pull/5050#discussion_r1640392516)\n    const [form] = useState(() => {\n        const formEl = document.createElement('form');\n        formEl.setAttribute('tabindex', '-1');\n        formEl.id = nanoid();\n        return formEl;\n    });\n    useEffect(() => {\n        document.body.appendChild(form);\n        form.addEventListener('submit', submit);\n        return () => {\n            form.removeEventListener('submit', submit);\n            document.body.removeChild(form);\n        };\n    }, [form, submit]);\n    return (_jsxs(\"section\", { className: wrapperClassName, children: [_jsx(\"input\", { className: `uppy-u-reset ${inputClassName}`, type: \"search\", \"aria-label\": inputLabel, placeholder: inputLabel, value: searchString, onInput: onInput, form: form.id, \"data-uppy-super-focusable\": true }), !showButton && (\n            // \uD83D\uDD0D\n            _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon uppy-ProviderBrowser-searchFilterIcon\", width: \"12\", height: \"12\", viewBox: \"0 0 12 12\", children: _jsx(\"path\", { d: \"M8.638 7.99l3.172 3.172a.492.492 0 1 1-.697.697L7.91 8.656a4.977 4.977 0 0 1-2.983.983C2.206 9.639 0 7.481 0 4.819 0 2.158 2.206 0 4.927 0c2.721 0 4.927 2.158 4.927 4.82a4.74 4.74 0 0 1-1.216 3.17zm-3.71.685c2.176 0 3.94-1.726 3.94-3.856 0-2.129-1.764-3.855-3.94-3.855C2.75.964.984 2.69.984 4.819c0 2.13 1.765 3.856 3.942 3.856z\" }) })), !showButton && searchString && (\n            // \u274C\n            _jsx(\"button\", { className: \"uppy-u-reset uppy-ProviderBrowser-searchFilterReset\", type: \"button\", \"aria-label\": clearSearchLabel, title: clearSearchLabel, onClick: () => setSearchString(''), children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", viewBox: \"0 0 19 19\", children: _jsx(\"path\", { d: \"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z\" }) }) })), showButton && (_jsx(\"button\", { className: `uppy-u-reset uppy-c-btn uppy-c-btn-primary ${buttonCSSClassName}`, type: \"submit\", form: form.id, children: buttonLabel }))] }));\n}\nexport default SearchInput;\n", "// TODO: document what is a \"tagFile\" or get rid of this concept\nconst getTagFile = (file, plugin, provider) => {\n    const tagFile = {\n        id: file.id,\n        source: plugin.id,\n        name: file.name || file.id,\n        type: file.mimeType,\n        isRemote: true,\n        data: file,\n        preview: file.thumbnail || undefined,\n        meta: {\n            authorName: file.author?.name,\n            authorUrl: file.author?.url,\n            // We need to do this `|| null` check, because null value\n            // for .relDirPath is `undefined` and for .relativePath is `null`.\n            // I do think we should just use `null` everywhere.\n            relativePath: file.relDirPath || null,\n            absolutePath: file.absDirPath,\n        },\n        body: {\n            fileId: file.id,\n        },\n        remote: {\n            companionUrl: plugin.opts.companionUrl,\n            url: `${provider.fileUrl(file.requestPath)}`,\n            body: {\n                fileId: file.id,\n            },\n            providerName: provider.name,\n            provider: provider.provider,\n            requestClientId: provider.provider,\n        },\n    };\n    return tagFile;\n};\nexport default getTagFile;\n", "import { getSafeFileId } from '@uppy/utils/lib/generateFileID';\nimport getTagFile from './getTagFile.js';\nconst addFiles = (companionFiles, plugin, provider) => {\n    const tagFiles = companionFiles.map((f) => getTagFile(f, plugin, provider));\n    const filesToAdd = [];\n    const filesAlreadyAdded = [];\n    tagFiles.forEach((tagFile) => {\n        if (plugin.uppy.checkIfFileAlreadyExists(getSafeFileId(tagFile, plugin.uppy.getID()))) {\n            filesAlreadyAdded.push(tagFile);\n        }\n        else {\n            filesToAdd.push(tagFile);\n        }\n    });\n    if (filesToAdd.length > 0) {\n        plugin.uppy.info(plugin.uppy.i18n('addedNumFiles', { numFiles: filesToAdd.length }));\n    }\n    if (filesAlreadyAdded.length > 0) {\n        plugin.uppy.info(`Not adding ${filesAlreadyAdded.length} files because they already exist`);\n    }\n    plugin.uppy.addFiles(filesToAdd);\n};\nexport default addFiles;\n", "// Shift-clicking selects a single consecutive list of items\n// starting at the previous click.\nconst getClickedRange = (clickedId, displayedPartialTree, isShiftKeyPressed, lastCheckbox) => {\n    const lastCheckboxIndex = displayedPartialTree.findIndex((item) => item.id === lastCheckbox);\n    if (lastCheckboxIndex !== -1 && isShiftKeyPressed) {\n        const newCheckboxIndex = displayedPartialTree.findIndex((item) => item.id === clickedId);\n        const clickedRange = displayedPartialTree.slice(Math.min(lastCheckboxIndex, newCheckboxIndex), Math.max(lastCheckboxIndex, newCheckboxIndex) + 1);\n        return clickedRange.map((item) => item.id);\n    }\n    return [clickedId];\n};\nexport default getClickedRange;\n", "const handleError = (uppy) => (error) => {\n    // authError just means we're not authenticated, don't report it\n    if (error.isAuthError) {\n        return;\n    }\n    // AbortError means the user has clicked \"cancel\" on an operation\n    if (error.name === 'AbortError') {\n        uppy.log('Aborting request', 'warning');\n        return;\n    }\n    uppy.log(error, 'error');\n    if (error.name === 'UserFacingApiError') {\n        uppy.info({\n            message: uppy.i18n('companionError'),\n            details: uppy.i18n(error.message),\n        }, 'warning', 5000);\n    }\n};\nexport default handleError;\n", "const getBreadcrumbs = (partialTree, currentFolderId) => {\n    let folder = partialTree.find((f) => f.id === currentFolderId);\n    let breadcrumbs = [];\n    while (true) {\n        breadcrumbs = [folder, ...breadcrumbs];\n        if (folder.type === 'root')\n            break;\n        const currentParentId = folder.parentId;\n        folder = partialTree.find((f) => f.id === currentParentId);\n    }\n    return breadcrumbs;\n};\nexport default getBreadcrumbs;\n", "const getPath = (partialTree, id, cache) => {\n    const sId = id === null ? 'null' : id;\n    if (cache[sId])\n        return cache[sId];\n    const file = partialTree.find((f) => f.id === id);\n    if (file.type === 'root')\n        return [];\n    const meAndParentPath = [...getPath(partialTree, file.parentId, cache), file];\n    cache[sId] = meAndParentPath;\n    return meAndParentPath;\n};\n// See \"Uppy file properties\" documentation for `.absolutePath` and `.relativePath`\n// (https://uppy.io/docs/uppy/#working-with-uppy-files)\nconst getCheckedFilesWithPaths = (partialTree) => {\n    // Equivalent to `const cache = {}`, but makes keys such as 'hasOwnProperty' safe too\n    const cache = Object.create(null);\n    // We're only interested in injecting paths into 'checked' files\n    const checkedFiles = partialTree.filter((item) => item.type === 'file' && item.status === 'checked');\n    const companionFilesWithInjectedPaths = checkedFiles.map((file) => {\n        const absFolders = getPath(partialTree, file.id, cache);\n        const firstCheckedFolderIndex = absFolders.findIndex((i) => i.type === 'folder' && i.status === 'checked');\n        const relFolders = absFolders.slice(firstCheckedFolderIndex);\n        const absDirPath = `/${absFolders.map((i) => i.data.name).join('/')}`;\n        const relDirPath = relFolders.length === 1\n            ? // Must return `undefined` (which later turns into `null` in `.getTagFile()`)\n                // (https://github.com/transloadit/uppy/pull/4537#issuecomment-1629136652)\n                undefined\n            : relFolders.map((i) => i.data.name).join('/');\n        return {\n            ...file.data,\n            absDirPath,\n            relDirPath,\n        };\n    });\n    return companionFilesWithInjectedPaths;\n};\nexport default getCheckedFilesWithPaths;\n", "import EventEmitter from './index.js'\n\nexport { EventEmitter }\nexport default EventEmitter\n", "export class TimeoutError extends Error {\n\tconstructor(message) {\n\t\tsuper(message);\n\t\tthis.name = 'TimeoutError';\n\t}\n}\n\n/**\nAn error to be thrown when the request is aborted by AbortController.\nDOMException is thrown instead of this Error when DOMException is available.\n*/\nexport class AbortError extends Error {\n\tconstructor(message) {\n\t\tsuper();\n\t\tthis.name = 'AbortError';\n\t\tthis.message = message;\n\t}\n}\n\n/**\nTODO: Remove AbortError and just throw DOMException when targeting Node 18.\n*/\nconst getDOMException = errorMessage => globalThis.DOMException === undefined\n\t? new AbortError(errorMessage)\n\t: new DOMException(errorMessage);\n\n/**\nTODO: Remove below function and just 'reject(signal.reason)' when targeting Node 18.\n*/\nconst getAbortedReason = signal => {\n\tconst reason = signal.reason === undefined\n\t\t? getDOMException('This operation was aborted.')\n\t\t: signal.reason;\n\n\treturn reason instanceof Error ? reason : getDOMException(reason);\n};\n\nexport default function pTimeout(promise, options) {\n\tconst {\n\t\tmilliseconds,\n\t\tfallback,\n\t\tmessage,\n\t\tcustomTimers = {setTimeout, clearTimeout},\n\t} = options;\n\n\tlet timer;\n\tlet abortHandler;\n\n\tconst wrappedPromise = new Promise((resolve, reject) => {\n\t\tif (typeof milliseconds !== 'number' || Math.sign(milliseconds) !== 1) {\n\t\t\tthrow new TypeError(`Expected \\`milliseconds\\` to be a positive number, got \\`${milliseconds}\\``);\n\t\t}\n\n\t\tif (options.signal) {\n\t\t\tconst {signal} = options;\n\t\t\tif (signal.aborted) {\n\t\t\t\treject(getAbortedReason(signal));\n\t\t\t}\n\n\t\t\tabortHandler = () => {\n\t\t\t\treject(getAbortedReason(signal));\n\t\t\t};\n\n\t\t\tsignal.addEventListener('abort', abortHandler, {once: true});\n\t\t}\n\n\t\tif (milliseconds === Number.POSITIVE_INFINITY) {\n\t\t\tpromise.then(resolve, reject);\n\t\t\treturn;\n\t\t}\n\n\t\t// We create the error outside of `setTimeout` to preserve the stack trace.\n\t\tconst timeoutError = new TimeoutError();\n\n\t\ttimer = customTimers.setTimeout.call(undefined, () => {\n\t\t\tif (fallback) {\n\t\t\t\ttry {\n\t\t\t\t\tresolve(fallback());\n\t\t\t\t} catch (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (typeof promise.cancel === 'function') {\n\t\t\t\tpromise.cancel();\n\t\t\t}\n\n\t\t\tif (message === false) {\n\t\t\t\tresolve();\n\t\t\t} else if (message instanceof Error) {\n\t\t\t\treject(message);\n\t\t\t} else {\n\t\t\t\ttimeoutError.message = message ?? `Promise timed out after ${milliseconds} milliseconds`;\n\t\t\t\treject(timeoutError);\n\t\t\t}\n\t\t}, milliseconds);\n\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\tresolve(await promise);\n\t\t\t} catch (error) {\n\t\t\t\treject(error);\n\t\t\t}\n\t\t})();\n\t});\n\n\tconst cancelablePromise = wrappedPromise.finally(() => {\n\t\tcancelablePromise.clear();\n\t\tif (abortHandler && options.signal) {\n\t\t\toptions.signal.removeEventListener('abort', abortHandler);\n\t\t}\n\t});\n\n\tcancelablePromise.clear = () => {\n\t\tcustomTimers.clearTimeout.call(undefined, timer);\n\t\ttimer = undefined;\n\t};\n\n\treturn cancelablePromise;\n}\n", "// Port of lower_bound from https://en.cppreference.com/w/cpp/algorithm/lower_bound\n// Used to compute insertion index to keep queue sorted after insertion\nexport default function lowerBound(array, value, comparator) {\n    let first = 0;\n    let count = array.length;\n    while (count > 0) {\n        const step = Math.trunc(count / 2);\n        let it = first + step;\n        if (comparator(array[it], value) <= 0) {\n            first = ++it;\n            count -= step + 1;\n        }\n        else {\n            count = step;\n        }\n    }\n    return first;\n}\n", "import lowerBound from './lower-bound.js';\nexport default class PriorityQueue {\n    #queue = [];\n    enqueue(run, options) {\n        options = {\n            priority: 0,\n            ...options,\n        };\n        const element = {\n            priority: options.priority,\n            id: options.id,\n            run,\n        };\n        if (this.size === 0 || this.#queue[this.size - 1].priority >= options.priority) {\n            this.#queue.push(element);\n            return;\n        }\n        const index = lowerBound(this.#queue, element, (a, b) => b.priority - a.priority);\n        this.#queue.splice(index, 0, element);\n    }\n    setPriority(id, priority) {\n        const index = this.#queue.findIndex((element) => element.id === id);\n        if (index === -1) {\n            throw new ReferenceError(`No promise function with the id \"${id}\" exists in the queue.`);\n        }\n        const [item] = this.#queue.splice(index, 1);\n        this.enqueue(item.run, { priority, id });\n    }\n    dequeue() {\n        const item = this.#queue.shift();\n        return item?.run;\n    }\n    filter(options) {\n        return this.#queue.filter((element) => element.priority === options.priority).map((element) => element.run);\n    }\n    get size() {\n        return this.#queue.length;\n    }\n}\n", "import { EventEmitter } from 'eventemitter3';\nimport pTimeout, { TimeoutError } from 'p-timeout';\nimport PriorityQueue from './priority-queue.js';\n/**\nPromise queue with concurrency control.\n*/\nexport default class PQueue extends EventEmitter {\n    #carryoverConcurrencyCount;\n    #isIntervalIgnored;\n    #intervalCount = 0;\n    #intervalCap;\n    #interval;\n    #intervalEnd = 0;\n    #intervalId;\n    #timeoutId;\n    #queue;\n    #queueClass;\n    #pending = 0;\n    // The `!` is needed because of https://github.com/microsoft/TypeScript/issues/32194\n    #concurrency;\n    #isPaused;\n    #throwOnTimeout;\n    // Use to assign a unique identifier to a promise function, if not explicitly specified\n    #idAssigner = 1n;\n    /**\n    Per-operation timeout in milliseconds. Operations fulfill once `timeout` elapses if they haven't already.\n\n    Applies to each future operation.\n    */\n    timeout;\n    // TODO: The `throwOnTimeout` option should affect the return types of `add()` and `addAll()`\n    constructor(options) {\n        super();\n        // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n        options = {\n            carryoverConcurrencyCount: false,\n            intervalCap: Number.POSITIVE_INFINITY,\n            interval: 0,\n            concurrency: Number.POSITIVE_INFINITY,\n            autoStart: true,\n            queueClass: PriorityQueue,\n            ...options,\n        };\n        if (!(typeof options.intervalCap === 'number' && options.intervalCap >= 1)) {\n            throw new TypeError(`Expected \\`intervalCap\\` to be a number from 1 and up, got \\`${options.intervalCap?.toString() ?? ''}\\` (${typeof options.intervalCap})`);\n        }\n        if (options.interval === undefined || !(Number.isFinite(options.interval) && options.interval >= 0)) {\n            throw new TypeError(`Expected \\`interval\\` to be a finite number >= 0, got \\`${options.interval?.toString() ?? ''}\\` (${typeof options.interval})`);\n        }\n        this.#carryoverConcurrencyCount = options.carryoverConcurrencyCount;\n        this.#isIntervalIgnored = options.intervalCap === Number.POSITIVE_INFINITY || options.interval === 0;\n        this.#intervalCap = options.intervalCap;\n        this.#interval = options.interval;\n        this.#queue = new options.queueClass();\n        this.#queueClass = options.queueClass;\n        this.concurrency = options.concurrency;\n        this.timeout = options.timeout;\n        this.#throwOnTimeout = options.throwOnTimeout === true;\n        this.#isPaused = options.autoStart === false;\n    }\n    get #doesIntervalAllowAnother() {\n        return this.#isIntervalIgnored || this.#intervalCount < this.#intervalCap;\n    }\n    get #doesConcurrentAllowAnother() {\n        return this.#pending < this.#concurrency;\n    }\n    #next() {\n        this.#pending--;\n        this.#tryToStartAnother();\n        this.emit('next');\n    }\n    #onResumeInterval() {\n        this.#onInterval();\n        this.#initializeIntervalIfNeeded();\n        this.#timeoutId = undefined;\n    }\n    get #isIntervalPaused() {\n        const now = Date.now();\n        if (this.#intervalId === undefined) {\n            const delay = this.#intervalEnd - now;\n            if (delay < 0) {\n                // Act as the interval was done\n                // We don't need to resume it here because it will be resumed on line 160\n                this.#intervalCount = (this.#carryoverConcurrencyCount) ? this.#pending : 0;\n            }\n            else {\n                // Act as the interval is pending\n                if (this.#timeoutId === undefined) {\n                    this.#timeoutId = setTimeout(() => {\n                        this.#onResumeInterval();\n                    }, delay);\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n    #tryToStartAnother() {\n        if (this.#queue.size === 0) {\n            // We can clear the interval (\"pause\")\n            // Because we can redo it later (\"resume\")\n            if (this.#intervalId) {\n                clearInterval(this.#intervalId);\n            }\n            this.#intervalId = undefined;\n            this.emit('empty');\n            if (this.#pending === 0) {\n                this.emit('idle');\n            }\n            return false;\n        }\n        if (!this.#isPaused) {\n            const canInitializeInterval = !this.#isIntervalPaused;\n            if (this.#doesIntervalAllowAnother && this.#doesConcurrentAllowAnother) {\n                const job = this.#queue.dequeue();\n                if (!job) {\n                    return false;\n                }\n                this.emit('active');\n                job();\n                if (canInitializeInterval) {\n                    this.#initializeIntervalIfNeeded();\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n    #initializeIntervalIfNeeded() {\n        if (this.#isIntervalIgnored || this.#intervalId !== undefined) {\n            return;\n        }\n        this.#intervalId = setInterval(() => {\n            this.#onInterval();\n        }, this.#interval);\n        this.#intervalEnd = Date.now() + this.#interval;\n    }\n    #onInterval() {\n        if (this.#intervalCount === 0 && this.#pending === 0 && this.#intervalId) {\n            clearInterval(this.#intervalId);\n            this.#intervalId = undefined;\n        }\n        this.#intervalCount = this.#carryoverConcurrencyCount ? this.#pending : 0;\n        this.#processQueue();\n    }\n    /**\n    Executes all queued functions until it reaches the limit.\n    */\n    #processQueue() {\n        // eslint-disable-next-line no-empty\n        while (this.#tryToStartAnother()) { }\n    }\n    get concurrency() {\n        return this.#concurrency;\n    }\n    set concurrency(newConcurrency) {\n        if (!(typeof newConcurrency === 'number' && newConcurrency >= 1)) {\n            throw new TypeError(`Expected \\`concurrency\\` to be a number from 1 and up, got \\`${newConcurrency}\\` (${typeof newConcurrency})`);\n        }\n        this.#concurrency = newConcurrency;\n        this.#processQueue();\n    }\n    async #throwOnAbort(signal) {\n        return new Promise((_resolve, reject) => {\n            signal.addEventListener('abort', () => {\n                reject(signal.reason);\n            }, { once: true });\n        });\n    }\n    /**\n    Updates the priority of a promise function by its id, affecting its execution order. Requires a defined concurrency limit to take effect.\n\n    For example, this can be used to prioritize a promise function to run earlier.\n\n    ```js\n    import PQueue from 'p-queue';\n\n    const queue = new PQueue({concurrency: 1});\n\n    queue.add(async () => '\uD83E\uDD84', {priority: 1});\n    queue.add(async () => '\uD83E\uDD80', {priority: 0, id: '\uD83E\uDD80'});\n    queue.add(async () => '\uD83E\uDD84', {priority: 1});\n    queue.add(async () => '\uD83E\uDD84', {priority: 1});\n\n    queue.setPriority('\uD83E\uDD80', 2);\n    ```\n\n    In this case, the promise function with `id: '\uD83E\uDD80'` runs second.\n\n    You can also deprioritize a promise function to delay its execution:\n\n    ```js\n    import PQueue from 'p-queue';\n\n    const queue = new PQueue({concurrency: 1});\n\n    queue.add(async () => '\uD83E\uDD84', {priority: 1});\n    queue.add(async () => '\uD83E\uDD80', {priority: 1, id: '\uD83E\uDD80'});\n    queue.add(async () => '\uD83E\uDD84');\n    queue.add(async () => '\uD83E\uDD84', {priority: 0});\n\n    queue.setPriority('\uD83E\uDD80', -1);\n    ```\n    Here, the promise function with `id: '\uD83E\uDD80'` executes last.\n    */\n    setPriority(id, priority) {\n        this.#queue.setPriority(id, priority);\n    }\n    async add(function_, options = {}) {\n        // In case `id` is not defined.\n        options.id ??= (this.#idAssigner++).toString();\n        options = {\n            timeout: this.timeout,\n            throwOnTimeout: this.#throwOnTimeout,\n            ...options,\n        };\n        return new Promise((resolve, reject) => {\n            this.#queue.enqueue(async () => {\n                this.#pending++;\n                this.#intervalCount++;\n                try {\n                    options.signal?.throwIfAborted();\n                    let operation = function_({ signal: options.signal });\n                    if (options.timeout) {\n                        operation = pTimeout(Promise.resolve(operation), { milliseconds: options.timeout });\n                    }\n                    if (options.signal) {\n                        operation = Promise.race([operation, this.#throwOnAbort(options.signal)]);\n                    }\n                    const result = await operation;\n                    resolve(result);\n                    this.emit('completed', result);\n                }\n                catch (error) {\n                    if (error instanceof TimeoutError && !options.throwOnTimeout) {\n                        resolve();\n                        return;\n                    }\n                    reject(error);\n                    this.emit('error', error);\n                }\n                finally {\n                    this.#next();\n                }\n            }, options);\n            this.emit('add');\n            this.#tryToStartAnother();\n        });\n    }\n    async addAll(functions, options) {\n        return Promise.all(functions.map(async (function_) => this.add(function_, options)));\n    }\n    /**\n    Start (or resume) executing enqueued tasks within concurrency limit. No need to call this if queue is not paused (via `options.autoStart = false` or by `.pause()` method.)\n    */\n    start() {\n        if (!this.#isPaused) {\n            return this;\n        }\n        this.#isPaused = false;\n        this.#processQueue();\n        return this;\n    }\n    /**\n    Put queue execution on hold.\n    */\n    pause() {\n        this.#isPaused = true;\n    }\n    /**\n    Clear the queue.\n    */\n    clear() {\n        this.#queue = new this.#queueClass();\n    }\n    /**\n    Can be called multiple times. Useful if you for example add additional items at a later time.\n\n    @returns A promise that settles when the queue becomes empty.\n    */\n    async onEmpty() {\n        // Instantly resolve if the queue is empty\n        if (this.#queue.size === 0) {\n            return;\n        }\n        await this.#onEvent('empty');\n    }\n    /**\n    @returns A promise that settles when the queue size is less than the given limit: `queue.size < limit`.\n\n    If you want to avoid having the queue grow beyond a certain size you can `await queue.onSizeLessThan()` before adding a new item.\n\n    Note that this only limits the number of items waiting to start. There could still be up to `concurrency` jobs already running that this call does not include in its calculation.\n    */\n    async onSizeLessThan(limit) {\n        // Instantly resolve if the queue is empty.\n        if (this.#queue.size < limit) {\n            return;\n        }\n        await this.#onEvent('next', () => this.#queue.size < limit);\n    }\n    /**\n    The difference with `.onEmpty` is that `.onIdle` guarantees that all work from the queue has finished. `.onEmpty` merely signals that the queue is empty, but it could mean that some promises haven't completed yet.\n\n    @returns A promise that settles when the queue becomes empty, and all promises have completed; `queue.size === 0 && queue.pending === 0`.\n    */\n    async onIdle() {\n        // Instantly resolve if none pending and if nothing else is queued\n        if (this.#pending === 0 && this.#queue.size === 0) {\n            return;\n        }\n        await this.#onEvent('idle');\n    }\n    async #onEvent(event, filter) {\n        return new Promise(resolve => {\n            const listener = () => {\n                if (filter && !filter()) {\n                    return;\n                }\n                this.off(event, listener);\n                resolve();\n            };\n            this.on(event, listener);\n        });\n    }\n    /**\n    Size of the queue, the number of queued items waiting to run.\n    */\n    get size() {\n        return this.#queue.size;\n    }\n    /**\n    Size of the queue, filtered by the given options.\n\n    For example, this can be used to find the number of items remaining in the queue with a specific priority level.\n    */\n    sizeBy(options) {\n        // eslint-disable-next-line unicorn/no-array-callback-reference\n        return this.#queue.filter(options).length;\n    }\n    /**\n    Number of running items (no longer in the queue).\n    */\n    get pending() {\n        return this.#pending;\n    }\n    /**\n    Whether the queue is currently paused.\n    */\n    get isPaused() {\n        return this.#isPaused;\n    }\n}\n", "/**\n * One-level copying is sufficient as mutations within our `partialTree` are limited to properties\n * such as `.status`, `.cached`, `.nextPagePath`, and not `.data = { THIS }`.\n */\nconst shallowClone = (partialTree) => {\n    return partialTree.map((item) => ({ ...item }));\n};\nexport default shallowClone;\n", "// p-queue does not have a `\"main\"` field in its `package.json`, and that makes `import/no-unresolved` freak out.\n// We can safely ignore it because bundlers will happily use the `\"exports\"` field instead.\nimport PQueue from 'p-queue';\nimport shallowClone from './shallowClone.js';\nconst recursivelyFetch = async (queue, poorTree, poorFolder, apiList, validateSingleFile) => {\n    let items = [];\n    let currentPath = poorFolder.cached\n        ? poorFolder.nextPagePath\n        : poorFolder.id;\n    while (currentPath) {\n        const response = await apiList(currentPath);\n        items = items.concat(response.items);\n        currentPath = response.nextPagePath;\n    }\n    const newFolders = items.filter((i) => i.isFolder === true);\n    const newFiles = items.filter((i) => i.isFolder === false);\n    const folders = newFolders.map((folder) => ({\n        type: 'folder',\n        id: folder.requestPath,\n        cached: false,\n        nextPagePath: null,\n        status: 'checked',\n        parentId: poorFolder.id,\n        data: folder,\n    }));\n    const files = newFiles.map((file) => {\n        const restrictionError = validateSingleFile(file);\n        return {\n            type: 'file',\n            id: file.requestPath,\n            restrictionError,\n            status: restrictionError ? 'unchecked' : 'checked',\n            parentId: poorFolder.id,\n            data: file,\n        };\n    });\n    poorFolder.cached = true;\n    poorFolder.nextPagePath = null;\n    poorTree.push(...files, ...folders);\n    folders.forEach(async (folder) => {\n        queue.add(() => recursivelyFetch(queue, poorTree, folder, apiList, validateSingleFile));\n    });\n};\nconst afterFill = async (partialTree, apiList, validateSingleFile, reportProgress) => {\n    const queue = new PQueue({ concurrency: 6 });\n    // fill up the missing parts of a partialTree!\n    const poorTree = shallowClone(partialTree);\n    const poorFolders = poorTree.filter((item) => item.type === 'folder' &&\n        item.status === 'checked' &&\n        // either \"not yet cached at all\" or \"some pages are left to fetch\"\n        (item.cached === false || item.nextPagePath));\n    // per each poor folder, recursively fetch all files and make them .checked!\n    poorFolders.forEach((poorFolder) => {\n        queue.add(() => recursivelyFetch(queue, poorTree, poorFolder, apiList, validateSingleFile));\n    });\n    queue.on('completed', () => {\n        const nOfFilesChecked = poorTree.filter((i) => i.type === 'file' && i.status === 'checked').length;\n        reportProgress(nOfFilesChecked);\n    });\n    await queue.onIdle();\n    return poorTree;\n};\nexport default afterFill;\n", "const afterOpenFolder = (oldPartialTree, discoveredItems, clickedFolder, currentPagePath, validateSingleFile) => {\n    const discoveredFolders = discoveredItems.filter((i) => i.isFolder === true);\n    const discoveredFiles = discoveredItems.filter((i) => i.isFolder === false);\n    const isParentFolderChecked = clickedFolder.type === 'folder' && clickedFolder.status === 'checked';\n    const folders = discoveredFolders.map((folder) => ({\n        type: 'folder',\n        id: folder.requestPath,\n        cached: false,\n        nextPagePath: null,\n        status: isParentFolderChecked ? 'checked' : 'unchecked',\n        parentId: clickedFolder.id,\n        data: folder,\n    }));\n    const files = discoveredFiles.map((file) => {\n        const restrictionError = validateSingleFile(file);\n        return {\n            type: 'file',\n            id: file.requestPath,\n            restrictionError,\n            status: isParentFolderChecked && !restrictionError ? 'checked' : 'unchecked',\n            parentId: clickedFolder.id,\n            data: file,\n        };\n    });\n    // just doing `clickedFolder.cached = true` in a non-mutating way\n    const updatedClickedFolder = {\n        ...clickedFolder,\n        cached: true,\n        nextPagePath: currentPagePath,\n    };\n    const partialTreeWithUpdatedClickedFolder = oldPartialTree.map((folder) => folder.id === updatedClickedFolder.id ? updatedClickedFolder : folder);\n    const newPartialTree = [\n        ...partialTreeWithUpdatedClickedFolder,\n        ...folders,\n        ...files,\n    ];\n    return newPartialTree;\n};\nexport default afterOpenFolder;\n", "const afterScrollFolder = (oldPartialTree, currentFolderId, items, nextPagePath, validateSingleFile) => {\n    const currentFolder = oldPartialTree.find((i) => i.id === currentFolderId);\n    const newFolders = items.filter((i) => i.isFolder === true);\n    const newFiles = items.filter((i) => i.isFolder === false);\n    // just doing `scrolledFolder.nextPagePath = ...` in a non-mutating way\n    const scrolledFolder = { ...currentFolder, nextPagePath };\n    const partialTreeWithUpdatedScrolledFolder = oldPartialTree.map((folder) => folder.id === scrolledFolder.id ? scrolledFolder : folder);\n    const isParentFolderChecked = scrolledFolder.type === 'folder' && scrolledFolder.status === 'checked';\n    const folders = newFolders.map((folder) => ({\n        type: 'folder',\n        id: folder.requestPath,\n        cached: false,\n        nextPagePath: null,\n        status: isParentFolderChecked ? 'checked' : 'unchecked',\n        parentId: scrolledFolder.id,\n        data: folder,\n    }));\n    const files = newFiles.map((file) => {\n        const restrictionError = validateSingleFile(file);\n        return {\n            type: 'file',\n            id: file.requestPath,\n            restrictionError,\n            status: isParentFolderChecked && !restrictionError ? 'checked' : 'unchecked',\n            parentId: scrolledFolder.id,\n            data: file,\n        };\n    });\n    const newPartialTree = [\n        ...partialTreeWithUpdatedScrolledFolder,\n        ...folders,\n        ...files,\n    ];\n    return newPartialTree;\n};\nexport default afterScrollFolder;\n", "import shallowClone from './shallowClone.js';\n/*\n  FROM        | TO\n\n  root        |  root\n    folder    |    folder\n    folder \u2705\uFE0E  |    folder \u2705\uFE0E\n      file    |      file \u2705\uFE0E\n      file    |      file \u2705\uFE0E\n      folder  |      folder \u2705\uFE0E\n        file  |        file \u2705\uFE0E\n    file      |    file\n    file      |    file\n*/\nconst percolateDown = (tree, id, shouldMarkAsChecked) => {\n    const children = tree.filter((item) => item.type !== 'root' && item.parentId === id);\n    children.forEach((item) => {\n        item.status =\n            shouldMarkAsChecked && !(item.type === 'file' && item.restrictionError)\n                ? 'checked'\n                : 'unchecked';\n        percolateDown(tree, item.id, shouldMarkAsChecked);\n    });\n};\n/*\n  FROM         | TO\n\n  root         |  root\n    folder     |    folder\n    folder     |    folder [\u25AC] ('partial' status)\n      file     |      file\n      folder   |      folder \u2705\uFE0E\n        file \u2705\uFE0E |       file \u2705\uFE0E\n    file       |    file\n    file       |    file\n*/\nconst percolateUp = (tree, id) => {\n    const folder = tree.find((item) => item.id === id);\n    if (folder.type === 'root')\n        return;\n    const validChildren = tree.filter((item) => \n    // is a child\n    item.type !== 'root' &&\n        item.parentId === folder.id &&\n        // does pass validations\n        !(item.type === 'file' && item.restrictionError));\n    const areAllChildrenChecked = validChildren.every((item) => item.status === 'checked');\n    const areAllChildrenUnchecked = validChildren.every((item) => item.status === 'unchecked');\n    if (areAllChildrenChecked) {\n        folder.status = 'checked';\n    }\n    else if (areAllChildrenUnchecked) {\n        folder.status = 'unchecked';\n    }\n    else {\n        folder.status = 'partial';\n    }\n    percolateUp(tree, folder.parentId);\n};\nconst afterToggleCheckbox = (oldTree, clickedRange) => {\n    const tree = shallowClone(oldTree);\n    if (clickedRange.length >= 2) {\n        // We checked two or more items\n        const newlyCheckedItems = tree.filter((item) => item.type !== 'root' && clickedRange.includes(item.id));\n        newlyCheckedItems.forEach((item) => {\n            if (item.type === 'file') {\n                item.status = item.restrictionError ? 'unchecked' : 'checked';\n            }\n            else {\n                item.status = 'checked';\n            }\n        });\n        newlyCheckedItems.forEach((item) => {\n            percolateDown(tree, item.id, true);\n        });\n        percolateUp(tree, newlyCheckedItems[0].parentId);\n    }\n    else {\n        // We checked exactly one item\n        const clickedItem = tree.find((item) => item.id === clickedRange[0]);\n        clickedItem.status =\n            clickedItem.status === 'checked' ? 'unchecked' : 'checked';\n        percolateDown(tree, clickedItem.id, clickedItem.status === 'checked');\n        percolateUp(tree, clickedItem.parentId);\n    }\n    return tree;\n};\nexport default afterToggleCheckbox;\n", "import afterFill from './afterFill.js';\nimport afterOpenFolder from './afterOpenFolder.js';\nimport afterScrollFolder from './afterScrollFolder.js';\nimport afterToggleCheckbox from './afterToggleCheckbox.js';\nexport default {\n    afterOpenFolder,\n    afterScrollFolder,\n    afterToggleCheckbox,\n    afterFill,\n};\n", "const shouldHandleScroll = (event) => {\n    const { scrollHeight, scrollTop, offsetHeight } = event.target;\n    const scrollPosition = scrollHeight - (scrollTop + offsetHeight);\n    return scrollPosition < 50;\n};\nexport default shouldHandleScroll;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport Breadcrumbs from '../Breadcrumbs.js';\nimport User from './User.js';\nexport default function Header(props) {\n    return (_jsx(\"div\", { className: \"uppy-ProviderBrowser-header\", children: _jsxs(\"div\", { className: classNames('uppy-ProviderBrowser-headerBar', !props.showBreadcrumbs && 'uppy-ProviderBrowser-headerBar--simple'), children: [props.showBreadcrumbs && (_jsx(Breadcrumbs, { openFolder: props.openFolder, breadcrumbs: props.breadcrumbs, breadcrumbsIcon: props.pluginIcon?.(), title: props.title, i18n: props.i18n })), _jsx(User, { logout: props.logout, username: props.username, i18n: props.i18n })] }) }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Fragment } from 'preact';\nexport default function Breadcrumbs(props) {\n    const { openFolder, title, breadcrumbsIcon, breadcrumbs, i18n } = props;\n    return (_jsxs(\"div\", { className: \"uppy-Provider-breadcrumbs\", children: [_jsx(\"div\", { className: \"uppy-Provider-breadcrumbsIcon\", children: breadcrumbsIcon }), breadcrumbs.map((folder, index) => (_jsxs(Fragment, { children: [_jsx(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn\", onClick: () => openFolder(folder.id), children: folder.type === 'root'\n                            ? title\n                            : (folder.data.name ?? i18n('unnamed')) }, folder.id), breadcrumbs.length === index + 1 ? '' : ' / '] })))] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Fragment } from 'preact';\nexport default function User({ i18n, logout, username }) {\n    return (_jsxs(Fragment, { children: [username && (_jsx(\"span\", { className: \"uppy-ProviderBrowser-user\", children: username }, \"username\")), _jsx(\"button\", { type: \"button\", onClick: logout, className: \"uppy-u-reset uppy-c-btn uppy-ProviderBrowser-userLogout\", children: i18n('logOut') }, \"logout\")] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport remoteFileObjToLocal from '@uppy/utils/lib/remoteFileObjToLocal';\nimport classNames from 'classnames';\nimport packageJson from '../../package.json' with { type: 'json' };\nimport Browser from '../Browser.js';\nimport FooterActions from '../FooterActions.js';\nimport SearchInput from '../SearchInput.js';\nimport addFiles from '../utils/addFiles.js';\nimport getClickedRange from '../utils/getClickedRange.js';\nimport handleError from '../utils/handleError.js';\nimport getCheckedFilesWithPaths from '../utils/PartialTreeUtils/getCheckedFilesWithPaths.js';\nimport PartialTreeUtils from '../utils/PartialTreeUtils/index.js';\nimport shouldHandleScroll from '../utils/shouldHandleScroll.js';\nconst defaultState = {\n    loading: false,\n    searchString: '',\n    partialTree: [\n        {\n            type: 'root',\n            id: null,\n            cached: false,\n            nextPagePath: null,\n        },\n    ],\n    currentFolderId: null,\n    isInputMode: true,\n};\nconst defaultOptions = {\n    viewType: 'grid',\n    showTitles: true,\n    showFilter: true,\n    utmSource: 'Companion',\n};\n/**\n * SearchProviderView, used for Unsplash and future image search providers.\n * Extends generic View, shared with regular providers like Google Drive and Instagram.\n */\nexport default class SearchProviderView {\n    static VERSION = packageJson.version;\n    plugin;\n    provider;\n    opts;\n    isHandlingScroll = false;\n    lastCheckbox = null;\n    constructor(plugin, opts) {\n        this.plugin = plugin;\n        this.provider = opts.provider;\n        this.opts = { ...defaultOptions, ...opts };\n        this.setSearchString = this.setSearchString.bind(this);\n        this.search = this.search.bind(this);\n        this.resetPluginState = this.resetPluginState.bind(this);\n        this.handleScroll = this.handleScroll.bind(this);\n        this.donePicking = this.donePicking.bind(this);\n        this.cancelSelection = this.cancelSelection.bind(this);\n        this.toggleCheckbox = this.toggleCheckbox.bind(this);\n        this.render = this.render.bind(this);\n        // Set default state for the plugin\n        this.resetPluginState();\n        // @ts-expect-error this should be typed in @uppy/dashboard.\n        this.plugin.uppy.on('dashboard:close-panel', this.resetPluginState);\n        this.plugin.uppy.registerRequestClient(this.provider.provider, this.provider);\n    }\n    tearDown() {\n        // Nothing.\n    }\n    setLoading(loading) {\n        this.plugin.setPluginState({ loading });\n    }\n    resetPluginState() {\n        this.plugin.setPluginState(defaultState);\n    }\n    cancelSelection() {\n        const { partialTree } = this.plugin.getPluginState();\n        const newPartialTree = partialTree.map((item) => item.type === 'root' ? item : { ...item, status: 'unchecked' });\n        this.plugin.setPluginState({ partialTree: newPartialTree });\n    }\n    async search() {\n        const { searchString } = this.plugin.getPluginState();\n        if (searchString === '')\n            return;\n        this.setLoading(true);\n        try {\n            const response = await this.provider.search(searchString);\n            const newPartialTree = [\n                {\n                    type: 'root',\n                    id: null,\n                    cached: false,\n                    nextPagePath: response.nextPageQuery,\n                },\n                ...response.items.map((item) => ({\n                    type: 'file',\n                    id: item.requestPath,\n                    status: 'unchecked',\n                    parentId: null,\n                    data: item,\n                })),\n            ];\n            this.plugin.setPluginState({\n                partialTree: newPartialTree,\n                isInputMode: false,\n            });\n        }\n        catch (error) {\n            handleError(this.plugin.uppy)(error);\n        }\n        this.setLoading(false);\n    }\n    async handleScroll(event) {\n        const { partialTree, searchString } = this.plugin.getPluginState();\n        const root = partialTree.find((i) => i.type === 'root');\n        if (shouldHandleScroll(event) &&\n            !this.isHandlingScroll &&\n            root.nextPagePath) {\n            this.isHandlingScroll = true;\n            try {\n                const response = await this.provider.search(searchString, root.nextPagePath);\n                const newRoot = {\n                    ...root,\n                    nextPagePath: response.nextPageQuery,\n                };\n                const oldItems = partialTree.filter((i) => i.type !== 'root');\n                const newPartialTree = [\n                    newRoot,\n                    ...oldItems,\n                    ...response.items.map((item) => ({\n                        type: 'file',\n                        id: item.requestPath,\n                        status: 'unchecked',\n                        parentId: null,\n                        data: item,\n                    })),\n                ];\n                this.plugin.setPluginState({ partialTree: newPartialTree });\n            }\n            catch (error) {\n                handleError(this.plugin.uppy)(error);\n            }\n            this.isHandlingScroll = false;\n        }\n    }\n    async donePicking() {\n        const { partialTree } = this.plugin.getPluginState();\n        // 1. Add files\n        const companionFiles = getCheckedFilesWithPaths(partialTree);\n        addFiles(companionFiles, this.plugin, this.provider);\n        // 2. Reset state\n        this.resetPluginState();\n    }\n    toggleCheckbox(ourItem, isShiftKeyPressed) {\n        const { partialTree } = this.plugin.getPluginState();\n        const clickedRange = getClickedRange(ourItem.id, this.getDisplayedPartialTree(), isShiftKeyPressed, this.lastCheckbox);\n        const newPartialTree = PartialTreeUtils.afterToggleCheckbox(partialTree, clickedRange);\n        this.plugin.setPluginState({ partialTree: newPartialTree });\n        this.lastCheckbox = ourItem.id;\n    }\n    validateSingleFile = (file) => {\n        const companionFile = remoteFileObjToLocal(file);\n        const result = this.plugin.uppy.validateSingleFile(companionFile);\n        return result;\n    };\n    getDisplayedPartialTree = () => {\n        const { partialTree } = this.plugin.getPluginState();\n        return partialTree.filter((item) => item.type !== 'root');\n    };\n    setSearchString = (searchString) => {\n        this.plugin.setPluginState({ searchString });\n        if (searchString === '') {\n            this.plugin.setPluginState({ partialTree: [] });\n        }\n    };\n    validateAggregateRestrictions = (partialTree) => {\n        const checkedFiles = partialTree.filter((item) => item.type === 'file' && item.status === 'checked');\n        const uppyFiles = checkedFiles.map((file) => file.data);\n        return this.plugin.uppy.validateAggregateRestrictions(uppyFiles);\n    };\n    render(state, viewOptions = {}) {\n        const { isInputMode, searchString, loading, partialTree } = this.plugin.getPluginState();\n        const { i18n } = this.plugin.uppy;\n        const opts = { ...this.opts, ...viewOptions };\n        if (isInputMode) {\n            return (_jsx(SearchInput, { searchString: searchString, setSearchString: this.setSearchString, submitSearchString: this.search, inputLabel: i18n('enterTextToSearch'), buttonLabel: i18n('searchImages'), wrapperClassName: \"uppy-SearchProvider\", inputClassName: \"uppy-c-textInput uppy-SearchProvider-input\", showButton: true, buttonCSSClassName: \"uppy-SearchProvider-searchButton\" }));\n        }\n        return (_jsxs(\"div\", { className: classNames('uppy-ProviderBrowser', `uppy-ProviderBrowser-viewType--${opts.viewType}`), children: [opts.showFilter && (_jsx(SearchInput, { searchString: searchString, setSearchString: this.setSearchString, submitSearchString: this.search, inputLabel: i18n('search'), clearSearchLabel: i18n('resetSearch'), wrapperClassName: \"uppy-ProviderBrowser-searchFilter\", inputClassName: \"uppy-ProviderBrowser-searchFilterInput\" })), _jsx(Browser, { toggleCheckbox: this.toggleCheckbox, displayedPartialTree: this.getDisplayedPartialTree(), handleScroll: this.handleScroll, openFolder: async () => { }, noResultsLabel: i18n('noSearchResults'), viewType: opts.viewType, showTitles: opts.showTitles, isLoading: loading, i18n: i18n, virtualList: false, utmSource: this.opts.utmSource }), _jsx(FooterActions, { partialTree: partialTree, donePicking: this.donePicking, cancelSelection: this.cancelSelection, i18n: i18n, validateAggregateRestrictions: this.validateAggregateRestrictions })] }));\n    }\n}\n", "/**\n * Low-pass filter using Exponential Moving Averages (aka exponential smoothing)\n * Filters a sequence of values by updating the mixing the previous output value\n * with the new input using the exponential window function\n *\n * @param newValue the n-th value of the sequence\n * @param previousSmoothedValue the exponential average of the first n-1 values\n * @param halfLife value of `dt` to move the smoothed value halfway between `previousFilteredValue` and `newValue`\n * @param dt time elapsed between adding the (n-1)th and the n-th values\n * @returns the exponential average of the first n values\n */\nexport default function emaFilter(newValue, previousSmoothedValue, halfLife, dt) {\n    if (halfLife === 0 || newValue === previousSmoothedValue)\n        return newValue;\n    if (dt === 0)\n        return previousSmoothedValue;\n    return newValue + (previousSmoothedValue - newValue) * 2 ** (-dt / halfLife);\n}\n", "{\n  \"name\": \"@uppy/status-bar\",\n  \"description\": \"A progress bar for Uppy, with many bells and whistles.\",\n  \"version\": \"4.2.3\",\n  \"license\": \"MIT\",\n  \"main\": \"lib/index.js\",\n  \"style\": \"dist/style.min.css\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"build:css\": \"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css\",\n    \"typecheck\": \"tsc --build\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\",\n    \"uppy-plugin\",\n    \"progress bar\",\n    \"status bar\",\n    \"progress\",\n    \"upload\",\n    \"eta\",\n    \"speed\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"dependencies\": {\n    \"@transloadit/prettier-bytes\": \"^0.3.4\",\n    \"@uppy/utils\": \"^6.2.2\",\n    \"classnames\": \"^2.2.6\",\n    \"preact\": \"^10.5.13\"\n  },\n  \"peerDependencies\": {\n    \"@uppy/core\": \"^4.5.2\"\n  },\n  \"devDependencies\": {\n    \"cssnano\": \"^7.0.7\",\n    \"postcss\": \"^8.5.6\",\n    \"postcss-cli\": \"^11.0.1\",\n    \"sass\": \"^1.89.2\",\n    \"typescript\": \"^5.8.3\"\n  }\n}", "export default {\n    strings: {\n        // Shown in the status bar while files are being uploaded.\n        uploading: 'Uploading',\n        // Shown in the status bar once all files have been uploaded.\n        complete: 'Complete',\n        // Shown in the status bar if an upload failed.\n        uploadFailed: 'Upload failed',\n        // Shown in the status bar while the upload is paused.\n        paused: 'Paused',\n        // Used as the label for the button that retries an upload.\n        retry: 'Retry',\n        // Used as the label for the button that cancels an upload.\n        cancel: 'Cancel',\n        // Used as the label for the button that pauses an upload.\n        pause: 'Pause',\n        // Used as the label for the button that resumes an upload.\n        resume: 'Resume',\n        // Used as the label for the button that resets the upload state after an upload\n        done: 'Done',\n        // When `showProgressDetails` is set, shows the number of files that have been fully uploaded so far.\n        filesUploadedOfTotal: {\n            0: '%{complete} of %{smart_count} file uploaded',\n            1: '%{complete} of %{smart_count} files uploaded',\n        },\n        // When `showProgressDetails` is set, shows the amount of bytes that have been uploaded so far.\n        dataUploadedOfTotal: '%{complete} of %{total}',\n        dataUploadedOfUnknown: '%{complete} of unknown',\n        // When `showProgressDetails` is set, shows an estimation of how long the upload will take to complete.\n        xTimeLeft: '%{time} left',\n        // Used as the label for the button that starts an upload.\n        uploadXFiles: {\n            0: 'Upload %{smart_count} file',\n            1: 'Upload %{smart_count} files',\n        },\n        // Used as the label for the button that starts an upload, if another upload has been started in the past\n        // and new files were added later.\n        uploadXNewFiles: {\n            0: 'Upload +%{smart_count} file',\n            1: 'Upload +%{smart_count} files',\n        },\n        upload: 'Upload',\n        retryUpload: 'Retry upload',\n        xMoreFilesAdded: {\n            0: '%{smart_count} more file added',\n            1: '%{smart_count} more files added',\n        },\n        showErrorDetails: 'Show error details',\n    },\n};\n", "export default {\n    STATE_ERROR: 'error',\n    STATE_WAITING: 'waiting',\n    STATE_PREPROCESSING: 'preprocessing',\n    STATE_UPLOADING: 'uploading',\n    STATE_POSTPROCESSING: 'postprocessing',\n    STATE_COMPLETE: 'complete',\n};\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport { h } from 'preact';\nimport { CancelBtn, DoneBtn, PauseResumeButton, ProgressBarComplete, ProgressBarError, ProgressBarProcessing, ProgressBarUploading, RetryBtn, UploadBtn, } from './Components.js';\nimport calculateProcessingProgress from './calculateProcessingProgress.js';\nimport statusBarStates from './StatusBarStates.js';\nconst { STATE_ERROR, STATE_WAITING, STATE_PREPROCESSING, STATE_UPLOADING, STATE_POSTPROCESSING, STATE_COMPLETE, } = statusBarStates;\nexport default function StatusBarUI({ newFiles, allowNewUpload, isUploadInProgress, isAllPaused, resumableUploads, error, hideUploadButton = undefined, hidePauseResumeButton = false, hideCancelButton = false, hideRetryButton = false, recoveredState, uploadState, totalProgress, files, supportsUploadProgress, hideAfterFinish = false, isSomeGhost, doneButtonHandler = undefined, isUploadStarted, i18n, startUpload, uppy, isAllComplete, showProgressDetails = undefined, numUploads, complete, totalSize, totalETA, totalUploadedSize, }) {\n    function getProgressValue() {\n        switch (uploadState) {\n            case STATE_POSTPROCESSING:\n            case STATE_PREPROCESSING: {\n                const progress = calculateProcessingProgress(files);\n                if (progress.mode === 'determinate') {\n                    return progress.value * 100;\n                }\n                return totalProgress;\n            }\n            case STATE_ERROR: {\n                return null;\n            }\n            case STATE_UPLOADING: {\n                if (!supportsUploadProgress) {\n                    return null;\n                }\n                return totalProgress;\n            }\n            default:\n                return totalProgress;\n        }\n    }\n    function getIsIndeterminate() {\n        switch (uploadState) {\n            case STATE_POSTPROCESSING:\n            case STATE_PREPROCESSING: {\n                const { mode } = calculateProcessingProgress(files);\n                return mode === 'indeterminate';\n            }\n            case STATE_UPLOADING: {\n                if (!supportsUploadProgress) {\n                    return true;\n                }\n                return false;\n            }\n            default:\n                return false;\n        }\n    }\n    const progressValue = getProgressValue();\n    const width = progressValue ?? 100;\n    const showUploadBtn = !error &&\n        newFiles &&\n        ((!isUploadInProgress && !isAllPaused) || recoveredState) &&\n        allowNewUpload &&\n        !hideUploadButton;\n    const showCancelBtn = !hideCancelButton &&\n        uploadState !== STATE_WAITING &&\n        uploadState !== STATE_COMPLETE;\n    const showPauseResumeBtn = resumableUploads &&\n        !hidePauseResumeButton &&\n        uploadState === STATE_UPLOADING;\n    const showRetryBtn = error && !isAllComplete && !hideRetryButton;\n    const showDoneBtn = doneButtonHandler && uploadState === STATE_COMPLETE;\n    const progressClassNames = classNames('uppy-StatusBar-progress', {\n        'is-indeterminate': getIsIndeterminate(),\n    });\n    const statusBarClassNames = classNames('uppy-StatusBar', `is-${uploadState}`, { 'has-ghosts': isSomeGhost });\n    const progressBarStateEl = (() => {\n        switch (uploadState) {\n            case STATE_PREPROCESSING:\n            case STATE_POSTPROCESSING:\n                return (_jsx(ProgressBarProcessing, { progress: calculateProcessingProgress(files) }));\n            case STATE_COMPLETE:\n                return _jsx(ProgressBarComplete, { i18n: i18n });\n            case STATE_ERROR:\n                return (_jsx(ProgressBarError, { error: error, i18n: i18n, numUploads: numUploads, complete: complete }));\n            case STATE_UPLOADING:\n                return (_jsx(ProgressBarUploading, { i18n: i18n, supportsUploadProgress: supportsUploadProgress, totalProgress: totalProgress, showProgressDetails: showProgressDetails, isUploadStarted: isUploadStarted, isAllComplete: isAllComplete, isAllPaused: isAllPaused, newFiles: newFiles, numUploads: numUploads, complete: complete, totalUploadedSize: totalUploadedSize, totalSize: totalSize, totalETA: totalETA, startUpload: startUpload }));\n            default:\n                return null;\n        }\n    })();\n    const atLeastOneAction = showUploadBtn ||\n        showRetryBtn ||\n        showPauseResumeBtn ||\n        showCancelBtn ||\n        showDoneBtn;\n    const thereIsNothingInside = !atLeastOneAction && !progressBarStateEl;\n    const isHidden = thereIsNothingInside || (uploadState === STATE_COMPLETE && hideAfterFinish);\n    if (isHidden) {\n        return null;\n    }\n    return (_jsxs(\"div\", { className: statusBarClassNames, children: [_jsx(\"div\", { className: progressClassNames, style: { width: `${width}%` }, role: \"progressbar\", \"aria-label\": `${width}%`, \"aria-valuetext\": `${width}%`, \"aria-valuemin\": 0, \"aria-valuemax\": 100, \"aria-valuenow\": progressValue }), progressBarStateEl, _jsxs(\"div\", { className: \"uppy-StatusBar-actions\", children: [showUploadBtn ? (_jsx(UploadBtn, { newFiles: newFiles, isUploadStarted: isUploadStarted, recoveredState: recoveredState, i18n: i18n, isSomeGhost: isSomeGhost, startUpload: startUpload, uploadState: uploadState })) : null, showRetryBtn ? _jsx(RetryBtn, { i18n: i18n, uppy: uppy }) : null, showPauseResumeBtn ? (_jsx(PauseResumeButton, { isAllPaused: isAllPaused, i18n: i18n, isAllComplete: isAllComplete, resumableUploads: resumableUploads, uppy: uppy })) : null, showCancelBtn ? _jsx(CancelBtn, { i18n: i18n, uppy: uppy }) : null, showDoneBtn ? (_jsx(DoneBtn, { i18n: i18n, doneButtonHandler: doneButtonHandler })) : null] })] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport prettierBytes from '@transloadit/prettier-bytes';\nimport prettyETA from '@uppy/utils/lib/prettyETA';\nimport classNames from 'classnames';\nimport { h } from 'preact';\nimport statusBarStates from './StatusBarStates.js';\nconst DOT = `\\u00B7`;\nconst renderDot = () => ` ${DOT} `;\nfunction UploadBtn(props) {\n    const { newFiles, isUploadStarted, recoveredState, i18n, uploadState, isSomeGhost, startUpload, } = props;\n    const uploadBtnClassNames = classNames('uppy-u-reset', 'uppy-c-btn', 'uppy-StatusBar-actionBtn', 'uppy-StatusBar-actionBtn--upload', {\n        'uppy-c-btn-primary': uploadState === statusBarStates.STATE_WAITING,\n    }, { 'uppy-StatusBar-actionBtn--disabled': isSomeGhost });\n    const uploadBtnText = newFiles && isUploadStarted && !recoveredState\n        ? i18n('uploadXNewFiles', { smart_count: newFiles })\n        : i18n('uploadXFiles', { smart_count: newFiles });\n    return (_jsx(\"button\", { type: \"button\", className: uploadBtnClassNames, \"aria-label\": i18n('uploadXFiles', { smart_count: newFiles }), onClick: startUpload, disabled: isSomeGhost, \"data-uppy-super-focusable\": true, children: uploadBtnText }));\n}\nfunction RetryBtn(props) {\n    const { i18n, uppy } = props;\n    return (_jsxs(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry\", \"aria-label\": i18n('retryUpload'), onClick: () => uppy.retryAll().catch(() => {\n            /* Error reported and handled via an event */\n        }), \"data-uppy-super-focusable\": true, \"data-cy\": \"retry\", children: [_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"8\", height: \"10\", viewBox: \"0 0 8 10\", children: _jsx(\"path\", { d: \"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z\" }) }), i18n('retry')] }));\n}\nfunction CancelBtn(props) {\n    const { i18n, uppy } = props;\n    return (_jsx(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-StatusBar-actionCircleBtn\", title: i18n('cancel'), \"aria-label\": i18n('cancel'), onClick: () => uppy.cancelAll(), \"data-cy\": \"cancel\", \"data-uppy-super-focusable\": true, children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"16\", height: \"16\", viewBox: \"0 0 16 16\", children: _jsxs(\"g\", { fill: \"none\", fillRule: \"evenodd\", children: [_jsx(\"circle\", { fill: \"#888\", cx: \"8\", cy: \"8\", r: \"8\" }), _jsx(\"path\", { fill: \"#FFF\", d: \"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z\" })] }) }) }));\n}\nfunction PauseResumeButton(props) {\n    const { isAllPaused, i18n, isAllComplete, resumableUploads, uppy } = props;\n    const title = isAllPaused ? i18n('resume') : i18n('pause');\n    function togglePauseResume() {\n        if (isAllComplete)\n            return;\n        if (!resumableUploads) {\n            uppy.cancelAll();\n            return;\n        }\n        if (isAllPaused) {\n            uppy.resumeAll();\n            return;\n        }\n        uppy.pauseAll();\n    }\n    return (_jsx(\"button\", { title: title, \"aria-label\": title, className: \"uppy-u-reset uppy-StatusBar-actionCircleBtn\", type: \"button\", onClick: togglePauseResume, \"data-cy\": \"togglePauseResume\", \"data-uppy-super-focusable\": true, children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"16\", height: \"16\", viewBox: \"0 0 16 16\", children: _jsxs(\"g\", { fill: \"none\", fillRule: \"evenodd\", children: [_jsx(\"circle\", { fill: \"#888\", cx: \"8\", cy: \"8\", r: \"8\" }), _jsx(\"path\", { fill: \"#FFF\", d: isAllPaused\n                            ? 'M6 4.25L11.5 8 6 11.75z'\n                            : 'M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z' })] }) }) }));\n}\nfunction DoneBtn(props) {\n    const { i18n, doneButtonHandler } = props;\n    return (_jsx(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done\", onClick: doneButtonHandler, \"data-uppy-super-focusable\": true, children: i18n('done') }));\n}\nfunction LoadingSpinner() {\n    return (_jsx(\"svg\", { className: \"uppy-StatusBar-spinner\", \"aria-hidden\": \"true\", focusable: \"false\", width: \"14\", height: \"14\", children: _jsx(\"path\", { d: \"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0\", fillRule: \"evenodd\" }) }));\n}\nfunction ProgressBarProcessing(props) {\n    const { progress } = props;\n    const { value, mode, message } = progress;\n    const dot = `\\u00B7`;\n    return (_jsxs(\"div\", { className: \"uppy-StatusBar-content\", children: [_jsx(LoadingSpinner, {}), mode === 'determinate' ? `${Math.round(value * 100)}% ${dot} ` : '', message] }));\n}\nfunction ProgressDetails(props) {\n    const { numUploads, complete, totalUploadedSize, totalSize, totalETA, i18n } = props;\n    const ifShowFilesUploadedOfTotal = numUploads > 1;\n    const totalUploadedSizeStr = prettierBytes(totalUploadedSize);\n    return (_jsxs(\"div\", { className: \"uppy-StatusBar-statusSecondary\", children: [ifShowFilesUploadedOfTotal &&\n                i18n('filesUploadedOfTotal', {\n                    complete,\n                    smart_count: numUploads,\n                }), _jsxs(\"span\", { className: \"uppy-StatusBar-additionalInfo\", children: [ifShowFilesUploadedOfTotal && renderDot(), totalSize != null\n                        ? i18n('dataUploadedOfTotal', {\n                            complete: totalUploadedSizeStr,\n                            total: prettierBytes(totalSize),\n                        })\n                        : i18n('dataUploadedOfUnknown', { complete: totalUploadedSizeStr }), renderDot(), totalETA != null &&\n                        i18n('xTimeLeft', {\n                            time: prettyETA(totalETA),\n                        })] })] }));\n}\nfunction FileUploadCount(props) {\n    const { i18n, complete, numUploads } = props;\n    return (_jsx(\"div\", { className: \"uppy-StatusBar-statusSecondary\", children: i18n('filesUploadedOfTotal', { complete, smart_count: numUploads }) }));\n}\nfunction UploadNewlyAddedFiles(props) {\n    const { i18n, newFiles, startUpload } = props;\n    const uploadBtnClassNames = classNames('uppy-u-reset', 'uppy-c-btn', 'uppy-StatusBar-actionBtn', 'uppy-StatusBar-actionBtn--uploadNewlyAdded');\n    return (_jsxs(\"div\", { className: \"uppy-StatusBar-statusSecondary\", children: [_jsx(\"div\", { className: \"uppy-StatusBar-statusSecondaryHint\", children: i18n('xMoreFilesAdded', { smart_count: newFiles }) }), _jsx(\"button\", { type: \"button\", className: uploadBtnClassNames, \"aria-label\": i18n('uploadXFiles', { smart_count: newFiles }), onClick: startUpload, children: i18n('upload') })] }));\n}\nfunction ProgressBarUploading(props) {\n    const { i18n, supportsUploadProgress, totalProgress, showProgressDetails, isUploadStarted, isAllComplete, isAllPaused, newFiles, numUploads, complete, totalUploadedSize, totalSize, totalETA, startUpload, } = props;\n    const showUploadNewlyAddedFiles = newFiles && isUploadStarted;\n    if (!isUploadStarted || isAllComplete) {\n        return null;\n    }\n    const title = isAllPaused ? i18n('paused') : i18n('uploading');\n    function renderProgressDetails() {\n        if (!isAllPaused && !showUploadNewlyAddedFiles && showProgressDetails) {\n            if (supportsUploadProgress) {\n                return (_jsx(ProgressDetails, { numUploads: numUploads, complete: complete, totalUploadedSize: totalUploadedSize, totalSize: totalSize, totalETA: totalETA, i18n: i18n }));\n            }\n            return (_jsx(FileUploadCount, { i18n: i18n, complete: complete, numUploads: numUploads }));\n        }\n        return null;\n    }\n    return (_jsxs(\"div\", { className: \"uppy-StatusBar-content\", title: title, children: [!isAllPaused ? _jsx(LoadingSpinner, {}) : null, _jsxs(\"div\", { className: \"uppy-StatusBar-status\", children: [_jsx(\"div\", { className: \"uppy-StatusBar-statusPrimary\", children: supportsUploadProgress && totalProgress !== 0\n                            ? `${title}: ${totalProgress}%`\n                            : title }), renderProgressDetails(), showUploadNewlyAddedFiles ? (_jsx(UploadNewlyAddedFiles, { i18n: i18n, newFiles: newFiles, startUpload: startUpload })) : null] })] }));\n}\nfunction ProgressBarComplete(props) {\n    const { i18n } = props;\n    return (_jsx(\"div\", { className: \"uppy-StatusBar-content\", \n        // biome-ignore lint/a11y/useSemanticElements: ...\n        role: \"status\", title: i18n('complete'), children: _jsx(\"div\", { className: \"uppy-StatusBar-status\", children: _jsxs(\"div\", { className: \"uppy-StatusBar-statusPrimary\", children: [_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-StatusBar-statusIndicator uppy-c-icon\", width: \"15\", height: \"11\", viewBox: \"0 0 15 11\", children: _jsx(\"path\", { d: \"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z\" }) }), i18n('complete')] }) }) }));\n}\nfunction ProgressBarError(props) {\n    const { error, i18n, complete, numUploads } = props;\n    function displayErrorAlert() {\n        const errorMessage = `${i18n('uploadFailed')} \\n\\n ${error}`;\n        alert(errorMessage); // TODO: move to custom alert implementation\n    }\n    return (_jsxs(\"div\", { className: \"uppy-StatusBar-content\", title: i18n('uploadFailed'), children: [_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-StatusBar-statusIndicator uppy-c-icon\", width: \"11\", height: \"11\", viewBox: \"0 0 11 11\", children: _jsx(\"path\", { d: \"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z\" }) }), _jsxs(\"div\", { className: \"uppy-StatusBar-status\", children: [_jsxs(\"div\", { className: \"uppy-StatusBar-statusPrimary\", children: [i18n('uploadFailed'), _jsx(\"button\", { className: \"uppy-u-reset uppy-StatusBar-details\", \"aria-label\": i18n('showErrorDetails'), \"data-microtip-position\": \"top-right\", \"data-microtip-size\": \"medium\", onClick: displayErrorAlert, type: \"button\", children: \"?\" })] }), _jsx(FileUploadCount, { i18n: i18n, complete: complete, numUploads: numUploads })] })] }));\n}\nexport { UploadBtn, RetryBtn, CancelBtn, PauseResumeButton, DoneBtn, LoadingSpinner, ProgressDetails, ProgressBarProcessing, ProgressBarError, ProgressBarUploading, ProgressBarComplete, };\n", "export default function secondsToTime(rawSeconds) {\n    const hours = Math.floor(rawSeconds / 3600) % 24;\n    const minutes = Math.floor(rawSeconds / 60) % 60;\n    const seconds = Math.floor(rawSeconds % 60);\n    return { hours, minutes, seconds };\n}\n", "import secondsToTime from './secondsToTime.js';\nexport default function prettyETA(seconds) {\n    const time = secondsToTime(seconds);\n    // Only display hours and minutes if they are greater than 0 but always\n    // display minutes if hours is being displayed\n    // Display a leading zero if the there is a preceding unit: 1m 05s, but 5s\n    const hoursStr = time.hours === 0 ? '' : `${time.hours}h`;\n    const minutesStr = time.minutes === 0\n        ? ''\n        : `${time.hours === 0\n            ? time.minutes\n            : ` ${time.minutes.toString(10).padStart(2, '0')}`}m`;\n    const secondsStr = time.hours !== 0\n        ? ''\n        : `${time.minutes === 0\n            ? time.seconds\n            : ` ${time.seconds.toString(10).padStart(2, '0')}`}s`;\n    return `${hoursStr}${minutesStr}${secondsStr}`;\n}\n", "export default function calculateProcessingProgress(files) {\n    const values = [];\n    let mode = 'indeterminate';\n    let message;\n    for (const { progress } of Object.values(files)) {\n        const { preprocess, postprocess } = progress;\n        // In the future we should probably do this differently. For now we'll take the\n        // mode and message from the first file\u2026\n        if (message == null && (preprocess || postprocess)) {\n            ;\n            ({ mode, message } = preprocess || postprocess);\n        }\n        if (preprocess?.mode === 'determinate')\n            values.push(preprocess.value);\n        if (postprocess?.mode === 'determinate')\n            values.push(postprocess.value);\n    }\n    const value = values.reduce((total, progressValue) => {\n        return total + progressValue / values.length;\n    }, 0);\n    return {\n        mode,\n        message,\n        value,\n    };\n}\n", "import { UIPlugin } from '@uppy/core';\nimport emaFilter from '@uppy/utils/lib/emaFilter';\nimport getTextDirection from '@uppy/utils/lib/getTextDirection';\nimport { h } from 'preact';\nimport packageJson from '../package.json' with { type: 'json' };\nimport locale from './locale.js';\nimport statusBarStates from './StatusBarStates.js';\nimport StatusBarUI, {} from './StatusBarUI.js';\nconst speedFilterHalfLife = 2000;\nconst ETAFilterHalfLife = 2000;\nfunction getUploadingState(error, isAllComplete, recoveredState, files) {\n    if (error) {\n        return statusBarStates.STATE_ERROR;\n    }\n    if (isAllComplete) {\n        return statusBarStates.STATE_COMPLETE;\n    }\n    if (recoveredState) {\n        return statusBarStates.STATE_WAITING;\n    }\n    let state = statusBarStates.STATE_WAITING;\n    const fileIDs = Object.keys(files);\n    for (let i = 0; i < fileIDs.length; i++) {\n        const { progress } = files[fileIDs[i]];\n        // If ANY files are being uploaded right now, show the uploading state.\n        if (progress.uploadStarted && !progress.uploadComplete) {\n            return statusBarStates.STATE_UPLOADING;\n        }\n        // If files are being preprocessed AND postprocessed at this time, we show the\n        // preprocess state. If any files are being uploaded we show uploading.\n        if (progress.preprocess) {\n            state = statusBarStates.STATE_PREPROCESSING;\n        }\n        // If NO files are being preprocessed or uploaded right now, but some files are\n        // being postprocessed, show the postprocess state.\n        if (progress.postprocess && state !== statusBarStates.STATE_PREPROCESSING) {\n            state = statusBarStates.STATE_POSTPROCESSING;\n        }\n    }\n    return state;\n}\nconst defaultOptions = {\n    hideUploadButton: false,\n    hideRetryButton: false,\n    hidePauseResumeButton: false,\n    hideCancelButton: false,\n    showProgressDetails: false,\n    hideAfterFinish: true,\n    doneButtonHandler: null,\n};\n/**\n * StatusBar: renders a status bar with upload/pause/resume/cancel/retry buttons,\n * progress percentage and time remaining.\n */\nexport default class StatusBar extends UIPlugin {\n    static VERSION = packageJson.version;\n    #lastUpdateTime;\n    #previousUploadedBytes;\n    #previousSpeed;\n    #previousETA;\n    constructor(uppy, opts) {\n        super(uppy, { ...defaultOptions, ...opts });\n        this.id = this.opts.id || 'StatusBar';\n        this.title = 'StatusBar';\n        this.type = 'progressindicator';\n        this.defaultLocale = locale;\n        this.i18nInit();\n        this.render = this.render.bind(this);\n        this.install = this.install.bind(this);\n    }\n    #computeSmoothETA(totalBytes) {\n        if (totalBytes.total == null || totalBytes.total === 0) {\n            return null;\n        }\n        const remaining = totalBytes.total - totalBytes.uploaded;\n        if (remaining <= 0) {\n            return null;\n        }\n        // When state is restored, lastUpdateTime is still nullish at this point.\n        this.#lastUpdateTime ??= performance.now();\n        const dt = performance.now() - this.#lastUpdateTime;\n        if (dt === 0) {\n            return Math.round((this.#previousETA ?? 0) / 100) / 10;\n        }\n        const uploadedBytesSinceLastTick = totalBytes.uploaded - this.#previousUploadedBytes;\n        this.#previousUploadedBytes = totalBytes.uploaded;\n        // uploadedBytesSinceLastTick can be negative in some cases (packet loss?)\n        // in which case, we wait for next tick to update ETA.\n        if (uploadedBytesSinceLastTick <= 0) {\n            return Math.round((this.#previousETA ?? 0) / 100) / 10;\n        }\n        const currentSpeed = uploadedBytesSinceLastTick / dt;\n        const filteredSpeed = this.#previousSpeed == null\n            ? currentSpeed\n            : emaFilter(currentSpeed, this.#previousSpeed, speedFilterHalfLife, dt);\n        this.#previousSpeed = filteredSpeed;\n        const instantETA = remaining / filteredSpeed;\n        const updatedPreviousETA = Math.max(this.#previousETA - dt, 0);\n        const filteredETA = this.#previousETA == null\n            ? instantETA\n            : emaFilter(instantETA, updatedPreviousETA, ETAFilterHalfLife, dt);\n        this.#previousETA = filteredETA;\n        this.#lastUpdateTime = performance.now();\n        return Math.round(filteredETA / 100) / 10;\n    }\n    startUpload = () => {\n        return this.uppy.upload().catch((() => {\n            // Error logged in Core\n        }));\n    };\n    render(state) {\n        const { capabilities, files, allowNewUpload, totalProgress, error, recoveredState, } = state;\n        const { newFiles, startedFiles, completeFiles, isUploadStarted, isAllComplete, isAllPaused, isUploadInProgress, isSomeGhost, } = this.uppy.getObjectOfFilesPerState();\n        // If some state was recovered, we want to show Upload button/counter\n        // for all the files, because in this case it\u2019s not an Upload button,\n        // but \u201CConfirm Restore Button\u201D\n        const newFilesOrRecovered = recoveredState ? Object.values(files) : newFiles;\n        const resumableUploads = !!capabilities.resumableUploads;\n        const supportsUploadProgress = capabilities.uploadProgress !== false;\n        let totalSize = null;\n        let totalUploadedSize = 0;\n        // Only if all files have a known size, does it make sense to display a total size\n        if (startedFiles.every((f) => f.progress.bytesTotal != null && f.progress.bytesTotal !== 0)) {\n            totalSize = 0;\n            startedFiles.forEach((file) => {\n                totalSize += file.progress.bytesTotal || 0;\n                totalUploadedSize += file.progress.bytesUploaded || 0;\n            });\n        }\n        else {\n            // however uploaded size we will always have\n            startedFiles.forEach((file) => {\n                totalUploadedSize += file.progress.bytesUploaded || 0;\n            });\n        }\n        const totalETA = this.#computeSmoothETA({\n            uploaded: totalUploadedSize,\n            total: totalSize,\n        });\n        return StatusBarUI({\n            error,\n            uploadState: getUploadingState(error, isAllComplete, recoveredState, state.files || {}),\n            allowNewUpload,\n            totalProgress,\n            totalSize,\n            totalUploadedSize,\n            isAllComplete: false,\n            isAllPaused,\n            isUploadStarted,\n            isUploadInProgress,\n            isSomeGhost,\n            recoveredState,\n            complete: completeFiles.length,\n            newFiles: newFilesOrRecovered.length,\n            numUploads: startedFiles.length,\n            totalETA,\n            files,\n            i18n: this.i18n,\n            uppy: this.uppy,\n            startUpload: this.startUpload,\n            doneButtonHandler: this.opts.doneButtonHandler,\n            resumableUploads,\n            supportsUploadProgress,\n            showProgressDetails: this.opts.showProgressDetails,\n            hideUploadButton: this.opts.hideUploadButton,\n            hideRetryButton: this.opts.hideRetryButton,\n            hidePauseResumeButton: this.opts.hidePauseResumeButton,\n            hideCancelButton: this.opts.hideCancelButton,\n            hideAfterFinish: this.opts.hideAfterFinish,\n        });\n    }\n    onMount() {\n        // Set the text direction if the page has not defined one.\n        const element = this.el;\n        const direction = getTextDirection(element);\n        if (!direction) {\n            element.dir = 'ltr';\n        }\n    }\n    #onUploadStart = () => {\n        const { recoveredState } = this.uppy.getState();\n        this.#previousSpeed = null;\n        this.#previousETA = null;\n        if (recoveredState) {\n            this.#previousUploadedBytes = Object.values(recoveredState.files).reduce((pv, { progress }) => pv + progress.bytesUploaded, 0);\n            // We don't set `#lastUpdateTime` at this point because the upload won't\n            // actually resume until the user asks for it.\n            this.uppy.emit('restore-confirmed');\n            return;\n        }\n        this.#lastUpdateTime = performance.now();\n        this.#previousUploadedBytes = 0;\n    };\n    install() {\n        const { target } = this.opts;\n        if (target) {\n            this.mount(target, this);\n        }\n        this.uppy.on('upload', this.#onUploadStart);\n        // To cover the use case where the status bar is installed while the upload\n        // has started, we set `lastUpdateTime` right away.\n        this.#lastUpdateTime = performance.now();\n        this.#previousUploadedBytes = this.uppy\n            .getFiles()\n            .reduce((pv, file) => pv + file.progress.bytesUploaded, 0);\n    }\n    uninstall() {\n        this.unmount();\n        this.uppy.off('upload', this.#onUploadStart);\n    }\n}\n", "const DATA_URL_PATTERN = /^data:([^/]+\\/[^,;]+(?:[^,]*?))(;base64)?,([\\s\\S]*)$/;\nfunction dataURItoBlob(dataURI, opts, toFile) {\n    // get the base64 data\n    const dataURIData = DATA_URL_PATTERN.exec(dataURI);\n    // user may provide mime type, if not get it from data URI\n    const mimeType = opts.mimeType ?? dataURIData?.[1] ?? 'plain/text';\n    let data; // We add `!` to tell TS we're OK with `data` being not defined when the dataURI is invalid.\n    if (dataURIData?.[2] != null) {\n        const binary = atob(decodeURIComponent(dataURIData[3]));\n        const bytes = new Uint8Array(binary.length);\n        for (let i = 0; i < binary.length; i++) {\n            bytes[i] = binary.charCodeAt(i);\n        }\n        data = [bytes];\n    }\n    else if (dataURIData?.[3] != null) {\n        data = [decodeURIComponent(dataURIData[3])];\n    }\n    // Convert to a File?\n    if (toFile) {\n        return new File(data, opts.name || '', { type: mimeType });\n    }\n    return new Blob(data, { type: mimeType });\n}\nexport default dataURItoBlob;\n", "/**\n * Check if a URL string is an object URL from `URL.createObjectURL`.\n */\nexport default function isObjectURL(url) {\n    return url.startsWith('blob:');\n}\n", "export default function isPreviewSupported(fileType) {\n    if (!fileType)\n        return false;\n    // list of images that browsers can preview\n    return /^[^/]+\\/(jpe?g|gif|png|svg|svg\\+xml|bmp|webp|avif)$/.test(fileType);\n}\n", "function e(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var t=\"undefined\"!=typeof self?self:global;const s=\"undefined\"!=typeof navigator,i=s&&\"undefined\"==typeof HTMLImageElement,n=!(\"undefined\"==typeof global||\"undefined\"==typeof process||!process.versions||!process.versions.node),r=t.Buffer,a=!!r,h=e=>void 0!==e;function f(e){return void 0===e||(e instanceof Map?0===e.size:0===Object.values(e).filter(h).length)}function l(e){let t=new Error(e);throw delete t.stack,t}function o(e){let t=function(e){let t=0;return e.ifd0.enabled&&(t+=1024),e.exif.enabled&&(t+=2048),e.makerNote&&(t+=2048),e.userComment&&(t+=1024),e.gps.enabled&&(t+=512),e.interop.enabled&&(t+=100),e.ifd1.enabled&&(t+=1024),t+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}const u=e=>String.fromCharCode.apply(null,e),d=\"undefined\"!=typeof TextDecoder?new TextDecoder(\"utf-8\"):void 0;class c{static from(e,t){return e instanceof this&&e.le===t?e:new c(e,void 0,void 0,t)}constructor(e,t=0,s,i){if(\"boolean\"==typeof i&&(this.le=i),Array.isArray(e)&&(e=new Uint8Array(e)),0===e)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){void 0===s&&(s=e.byteLength-t);let i=new DataView(e,t,s);this._swapDataView(i)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof c){void 0===s&&(s=e.byteLength-t),(t+=e.byteOffset)+s>e.byteOffset+e.byteLength&&l(\"Creating view outside of available memory in ArrayBuffer\");let i=new DataView(e.buffer,t,s);this._swapDataView(i)}else if(\"number\"==typeof e){let t=new DataView(new ArrayBuffer(e));this._swapDataView(t)}else l(\"Invalid input argument for BufferView: \"+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,s=c){return e instanceof DataView||e instanceof c?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||l(\"BufferView.set(): Invalid data argument.\"),this.toUint8().set(e,t),new s(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new c(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){let s=this.getUint8Array(e,t);return i=s,d?d.decode(i):a?Buffer.from(i).toString(\"utf8\"):decodeURIComponent(escape(u(i)));var i}getLatin1String(e=0,t=this.byteLength){let s=this.getUint8Array(e,t);return u(s)}getUnicodeString(e=0,t=this.byteLength){const s=[];for(let i=0;i<t&&e+i<this.byteLength;i+=2)s.push(this.getUint16(e+i));return u(s)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,s){switch(t){case 1:return this.getUint8(e,s);case 2:return this.getUint16(e,s);case 4:return this.getUint32(e,s);case 8:return this.getUint64&&this.getUint64(e,s)}}getUint(e,t,s){switch(t){case 8:return this.getUint8(e,s);case 16:return this.getUint16(e,s);case 32:return this.getUint32(e,s);case 64:return this.getUint64&&this.getUint64(e,s)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function p(e,t){l(`${e} '${t}' was not loaded, try using full build of exifr.`)}class g extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||p(this.kind,e),t&&(e in t||function(e,t){l(`Unknown ${e} '${t}'.`)}(this.kind,e),t[e].enabled||p(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var m=new g(\"file parser\"),y=new g(\"segment parser\"),b=new g(\"file reader\");let w=t.fetch;function k(e,t){return(i=e).startsWith(\"data:\")||i.length>1e4?v(e,t,\"base64\"):n&&e.includes(\"://\")?O(e,t,\"url\",S):n?v(e,t,\"fs\"):s?O(e,t,\"url\",S):void l(\"Invalid input argument\");var i}async function O(e,t,s,i){return b.has(s)?v(e,t,s):i?async function(e,t){let s=await t(e);return new c(s)}(e,i):void l(`Parser ${s} is not loaded`)}async function v(e,t,s){let i=new(b.get(s))(e,t);return await i.read(),i}const S=e=>w(e).then((e=>e.arrayBuffer())),A=e=>new Promise(((t,s)=>{let i=new FileReader;i.onloadend=()=>t(i.result||new ArrayBuffer),i.onerror=s,i.readAsArrayBuffer(e)}));class U extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function x(e,t,s){let i=new U;for(let[e,t]of s)i.set(e,t);if(Array.isArray(t))for(let s of t)e.set(s,i);else e.set(t,i);return i}function C(e,t,s){let i,n=e.get(t);for(i of s)n.set(i[0],i[1])}const B=new Map,V=new Map,I=new Map,L=[\"chunked\",\"firstChunkSize\",\"firstChunkSizeNode\",\"firstChunkSizeBrowser\",\"chunkSize\",\"chunkLimit\"],T=[\"jfif\",\"xmp\",\"icc\",\"iptc\",\"ihdr\"],z=[\"tiff\",...T],P=[\"ifd0\",\"ifd1\",\"exif\",\"gps\",\"interop\"],F=[...z,...P],j=[\"makerNote\",\"userComment\"],E=[\"translateKeys\",\"translateValues\",\"reviveValues\",\"multiSegment\"],M=[...E,\"sanitize\",\"mergeOutput\",\"silentErrors\"];class _{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class D extends _{get needed(){return this.enabled||this.deps.size>0}constructor(t,s,i,n){if(super(),e(this,\"enabled\",!1),e(this,\"skip\",new Set),e(this,\"pick\",new Set),e(this,\"deps\",new Set),e(this,\"translateKeys\",!1),e(this,\"translateValues\",!1),e(this,\"reviveValues\",!1),this.key=t,this.enabled=s,this.parse=this.enabled,this.applyInheritables(n),this.canBeFiltered=P.includes(t),this.canBeFiltered&&(this.dict=B.get(t)),void 0!==i)if(Array.isArray(i))this.parse=this.enabled=!0,this.canBeFiltered&&i.length>0&&this.translateTagSet(i,this.pick);else if(\"object\"==typeof i){if(this.enabled=!0,this.parse=!1!==i.parse,this.canBeFiltered){let{pick:e,skip:t}=i;e&&e.length>0&&this.translateTagSet(e,this.pick),t&&t.length>0&&this.translateTagSet(t,this.skip)}this.applyInheritables(i)}else!0===i||!1===i?this.parse=this.enabled=i:l(`Invalid options argument: ${i}`)}applyInheritables(e){let t,s;for(t of E)s=e[t],void 0!==s&&(this[t]=s)}translateTagSet(e,t){if(this.dict){let s,i,{tagKeys:n,tagValues:r}=this.dict;for(s of e)\"string\"==typeof s?(i=r.indexOf(s),-1===i&&(i=n.indexOf(Number(s))),-1!==i&&t.add(Number(n[i]))):t.add(s)}else for(let s of e)t.add(s)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,X(this.pick,this.deps)):this.enabled&&this.pick.size>0&&X(this.pick,this.deps)}}var N={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},$=new Map;class R extends _{static useCached(e){let t=$.get(e);return void 0!==t||(t=new this(e),$.set(e,t)),t}constructor(e){super(),!0===e?this.setupFromTrue():void 0===e?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):\"object\"==typeof e?this.setupFromObject(e):l(`Invalid options argument ${e}`),void 0===this.firstChunkSize&&(this.firstChunkSize=s?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of L)this[e]=N[e];for(e of M)this[e]=N[e];for(e of j)this[e]=N[e];for(e of F)this[e]=new D(e,N[e],void 0,this)}setupFromTrue(){let e;for(e of L)this[e]=N[e];for(e of M)this[e]=N[e];for(e of j)this[e]=!0;for(e of F)this[e]=new D(e,!0,void 0,this)}setupFromArray(e){let t;for(t of L)this[t]=N[t];for(t of M)this[t]=N[t];for(t of j)this[t]=N[t];for(t of F)this[t]=new D(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,P)}setupFromObject(e){let t;for(t of(P.ifd0=P.ifd0||P.image,P.ifd1=P.ifd1||P.thumbnail,Object.assign(this,e),L))this[t]=W(e[t],N[t]);for(t of M)this[t]=W(e[t],N[t]);for(t of j)this[t]=W(e[t],N[t]);for(t of z)this[t]=new D(t,N[t],e[t],this);for(t of P)this[t]=new D(t,N[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,P,F),!0===e.tiff?this.batchEnableWithBool(P,!0):!1===e.tiff?this.batchEnableWithUserValue(P,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,P):\"object\"==typeof e.tiff&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,P)}batchEnableWithBool(e,t){for(let s of e)this[s].enabled=t}batchEnableWithUserValue(e,t){for(let s of e){let e=t[s];this[s].enabled=!1!==e&&void 0!==e}}setupGlobalFilters(e,t,s,i=s){if(e&&e.length){for(let e of i)this[e].enabled=!1;let t=K(e,s);for(let[e,s]of t)X(this[e].pick,s),this[e].enabled=!0}else if(t&&t.length){let e=K(t,s);for(let[t,s]of e)X(this[t].skip,s)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:s,iptc:i,icc:n}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),s.enabled||e.skip.add(700),i.enabled||e.skip.add(33723),n.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:s,interop:i}=this;i.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),s.needed&&e.deps.add(34853),this.tiff.enabled=P.some((e=>!0===this[e].enabled))||this.makerNote||this.userComment;for(let e of P)this[e].finalizeFilters()}get onlyTiff(){return!T.map((e=>this[e].enabled)).some((e=>!0===e))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of z)this[e].enabled&&!y.has(e)&&p(\"segment parser\",e)}}function K(e,t){let s,i,n,r,a=[];for(n of t){for(r of(s=B.get(n),i=[],s))(e.includes(r[0])||e.includes(r[1]))&&i.push(r[0]);i.length&&a.push([n,i])}return a}function W(e,t){return void 0!==e?e:void 0!==t?t:void 0}function X(e,t){for(let s of t)e.add(s)}e(R,\"default\",N);class H{constructor(t){e(this,\"parsers\",{}),e(this,\"output\",{}),e(this,\"errors\",[]),e(this,\"pushToErrors\",(e=>this.errors.push(e))),this.options=R.useCached(t)}async read(e){this.file=await function(e,t){return\"string\"==typeof e?k(e,t):s&&!i&&e instanceof HTMLImageElement?k(e.src,t):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new c(e):s&&e instanceof Blob?O(e,t,\"blob\",A):void l(\"Invalid input argument\")}(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[s,i]of m)if(i.canHandle(e,t))return this.fileParser=new i(this.options,this.file,this.parsers),e[s]=!0;this.file.close&&this.file.close(),l(\"Unknown file format\")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),f(s=e)?void 0:s;var s}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map((async t=>{let s=await t.parse();t.assignToOutput(e,s)}));this.options.silentErrors&&(t=t.map((e=>e.catch(this.pushToErrors)))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,s=y.get(\"tiff\",e);var i;if(t.tiff?i={start:0,type:\"tiff\"}:t.jpeg&&(i=await this.fileParser.getOrFindSegment(\"tiff\")),void 0===i)return;let n=await this.fileParser.ensureSegmentChunk(i),r=this.parsers.tiff=new s(n,e,t),a=await r.extractThumbnail();return t.close&&t.close(),a}}async function Y(e,t){let s=new H(t);return await s.read(e),s.parse()}var G=Object.freeze({__proto__:null,parse:Y,Exifr:H,fileParsers:m,segmentParsers:y,fileReaders:b,tagKeys:B,tagValues:V,tagRevivers:I,createDictionary:x,extendDictionary:C,fetchUrlAsArrayBuffer:S,readBlobAsArrayBuffer:A,chunkedProps:L,otherSegments:T,segments:z,tiffBlocks:P,segmentsAndBlocks:F,tiffExtractables:j,inheritables:E,allFormatters:M,Options:R});class J{static findPosition(e,t){let s=e.getUint16(t+2)+2,i=\"function\"==typeof this.headerLength?this.headerLength(e,t,s):this.headerLength,n=t+i,r=s-i;return{offset:t,length:s,headerLength:i,start:n,size:r,end:n+r}}static parse(e,t={}){return new this(e,new R({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof c?e:new c(e)}constructor(t,s={},i){e(this,\"errors\",[]),e(this,\"raw\",new Map),e(this,\"handleError\",(e=>{if(!this.options.silentErrors)throw e;this.errors.push(e.message)})),this.chunk=this.normalizeInput(t),this.file=i,this.type=this.constructor.type,this.globalOptions=this.options=s,this.localOptions=s[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let s=I.get(t),i=V.get(t),n=B.get(t),r=this.options[t],a=r.reviveValues&&!!s,h=r.translateValues&&!!i,f=r.translateKeys&&!!n,l={};for(let[t,r]of e)a&&s.has(t)?r=s.get(t)(r):h&&i.has(t)&&(r=this.translateValue(r,i.get(t))),f&&n.has(t)&&(t=n.get(t)||t),l[t]=r;return l}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,s){if(this.globalOptions.mergeOutput)return Object.assign(e,s);e[t]?Object.assign(e[t],s):e[t]=s}}e(J,\"headerLength\",4),e(J,\"type\",void 0),e(J,\"multiSegment\",!1),e(J,\"canHandle\",(()=>!1));function q(e){return 192===e||194===e||196===e||219===e||221===e||218===e||254===e}function Q(e){return e>=224&&e<=239}function Z(e,t,s){for(let[i,n]of y)if(n.canHandle(e,t,s))return i}class ee extends class{constructor(t,s,i){e(this,\"errors\",[]),e(this,\"ensureSegmentChunk\",(async e=>{let t=e.start,s=e.size||65536;if(this.file.chunked)if(this.file.available(t,s))e.chunk=this.file.subarray(t,s);else try{e.chunk=await this.file.readChunk(t,s)}catch(t){l(`Couldn't read segment: ${JSON.stringify(e)}. ${t.message}`)}else this.file.byteLength>t+s?e.chunk=this.file.subarray(t,s):void 0===e.size?e.chunk=this.file.subarray(t):l(\"Segment unreachable: \"+JSON.stringify(e));return e.chunk})),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=s,this.parsers=i}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let s=new(y.get(e))(t,this.options,this.file);return this.parsers[e]=s}createParsers(e){for(let t of e){let{type:e,chunk:s}=t,i=this.options[e];if(i&&i.enabled){let t=this.parsers[e];t&&t.append||t||this.createParser(e,s)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}{constructor(...t){super(...t),e(this,\"appSegments\",[]),e(this,\"jpegSegments\",[]),e(this,\"unknownSegments\",[])}static canHandle(e,t){return 65496===t}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){!0===e?(this.findAll=!0,this.wanted=new Set(y.keyList())):(e=void 0===e?y.keyList().filter((e=>this.options[e].enabled)):e.filter((e=>this.options[e].enabled&&y.has(e))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:s,findAll:i,wanted:n,remaining:r}=this;if(!i&&this.file.chunked&&(i=Array.from(n).some((e=>{let t=y.get(e),s=this.options[e];return t.multiSegment&&s.multiSegment})),i&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,s.byteLength),!this.options.onlyTiff&&s.chunked){let t=!1;for(;r.size>0&&!t&&(s.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:i}=s,n=this.appSegments.some((e=>!this.file.available(e.offset||e.start,e.length||e.size)));if(t=e>i&&!n?!await s.readNextChunk(e):!await s.readNextChunk(i),void 0===(e=this.findAppSegmentsInRange(e,s.byteLength)))return}}}findAppSegmentsInRange(e,t){t-=2;let s,i,n,r,a,h,{file:f,findAll:l,wanted:o,remaining:u,options:d}=this;for(;e<t;e++)if(255===f.getUint8(e))if(s=f.getUint8(e+1),Q(s)){if(i=f.getUint16(e+2),n=Z(f,e,i),n&&o.has(n)&&(r=y.get(n),a=r.findPosition(f,e),h=d[n],a.type=n,this.appSegments.push(a),!l&&(r.multiSegment&&h.multiSegment?(this.unfinishedMultiSegment=a.chunkNumber<a.chunkCount,this.unfinishedMultiSegment||u.delete(n)):u.delete(n),0===u.size)))break;d.recordUnknownSegments&&(a=J.findPosition(f,e),a.marker=s,this.unknownSegments.push(a)),e+=i+1}else if(q(s)){if(i=f.getUint16(e+2),218===s&&!1!==d.stopAfterSos)return;d.recordJpegSegments&&this.jpegSegments.push({offset:e,length:i,marker:s}),e+=i+1}return e}mergeMultiSegments(){if(!this.appSegments.some((e=>e.multiSegment)))return;let e=function(e,t){let s,i,n,r=new Map;for(let a=0;a<e.length;a++)s=e[a],i=s[t],r.has(i)?n=r.get(i):r.set(i,n=[]),n.push(s);return Array.from(r)}(this.appSegments,\"type\");this.mergedAppSegments=e.map((([e,t])=>{let s=y.get(e,this.options);if(s.handleMultiSegments){return{type:e,chunk:s.handleMultiSegments(t)}}return t[0]}))}getSegment(e){return this.appSegments.find((t=>t.type===e))}async getOrFindSegment(e){let t=this.getSegment(e);return void 0===t&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}e(ee,\"type\",\"jpeg\"),m.set(\"jpeg\",ee);const te=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class se extends J{parseHeader(){var e=this.chunk.getUint16();18761===e?this.le=!0:19789===e&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,s=new Map){let{pick:i,skip:n}=this.options[t];i=new Set(i);let r=i.size>0,a=0===n.size,h=this.chunk.getUint16(e);e+=2;for(let f=0;f<h;f++){let h=this.chunk.getUint16(e);if(r){if(i.has(h)&&(s.set(h,this.parseTag(e,h,t)),i.delete(h),0===i.size))break}else!a&&n.has(h)||s.set(h,this.parseTag(e,h,t));e+=12}return s}parseTag(e,t,s){let{chunk:i}=this,n=i.getUint16(e+2),r=i.getUint32(e+4),a=te[n];if(a*r<=4?e+=8:e=i.getUint32(e+8),(n<1||n>13)&&l(`Invalid TIFF value type. block: ${s.toUpperCase()}, tag: ${t.toString(16)}, type: ${n}, offset ${e}`),e>i.byteLength&&l(`Invalid TIFF value offset. block: ${s.toUpperCase()}, tag: ${t.toString(16)}, type: ${n}, offset ${e} is outside of chunk size ${i.byteLength}`),1===n)return i.getUint8Array(e,r);if(2===n)return\"\"===(h=function(e){for(;e.endsWith(\"\\0\");)e=e.slice(0,-1);return e}(h=i.getString(e,r)).trim())?void 0:h;var h;if(7===n)return i.getUint8Array(e,r);if(1===r)return this.parseTagValue(n,e);{let t=new(function(e){switch(e){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(n))(r),s=a;for(let i=0;i<r;i++)t[i]=this.parseTagValue(n,e),e+=s;return t}}parseTagValue(e,t){let{chunk:s}=this;switch(e){case 1:return s.getUint8(t);case 3:return s.getUint16(t);case 4:return s.getUint32(t);case 5:return s.getUint32(t)/s.getUint32(t+4);case 6:return s.getInt8(t);case 8:return s.getInt16(t);case 9:return s.getInt32(t);case 10:return s.getInt32(t)/s.getInt32(t+4);case 11:return s.getFloat(t);case 12:return s.getDouble(t);case 13:return s.getUint32(t);default:l(`Invalid tiff type ${e}`)}}}class ie extends se{static canHandle(e,t){return 225===e.getUint8(t+1)&&1165519206===e.getUint32(t+4)&&0===e.getUint16(t+8)}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse(\"parseExifBlock\"),e.gps.enabled&&await this.safeParse(\"parseGpsBlock\"),e.interop.enabled&&await this.safeParse(\"parseInteropBlock\"),e.ifd1.enabled&&await this.safeParse(\"parseThumbnailBlock\"),this.createOutput()}safeParse(e){let t=this[e]();return void 0!==t.catch&&(t=t.catch(this.handleError)),t}findIfd0Offset(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(void 0===this.ifd1Offset){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let s=new Map;return this[t]=s,this.parseTags(e,t,s),s}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&l(\"Malformed EXIF data\"),!e.chunked&&this.ifd0Offset>e.byteLength&&l(`IFD0 offset points to outside of file.\\nthis.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,o(this.options));let t=this.parseBlock(this.ifd0Offset,\"ifd0\");return 0!==t.size?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.exifOffset)return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,o(this.options));let e=this.parseBlock(this.exifOffset,\"exif\");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let s=e.get(t);s&&1===s.length&&e.set(t,s[0])}async parseGpsBlock(){if(this.gps)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.gpsOffset)return;let e=this.parseBlock(this.gpsOffset,\"gps\");return e&&e.has(2)&&e.has(4)&&(e.set(\"latitude\",ne(...e.get(2),e.get(1))),e.set(\"longitude\",ne(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),void 0!==this.interopOffset||this.exif||await this.parseExifBlock(),void 0!==this.interopOffset))return this.parseBlock(this.interopOffset,\"interop\")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,\"ifd1\"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),void 0===this.ifd1)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,s,i={};for(t of P)if(e=this[t],!f(e))if(s=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(\"ifd1\"===t)continue;Object.assign(i,s)}else i[t]=s;return this.makerNote&&(i.makerNote=this.makerNote),this.userComment&&(i.userComment=this.userComment),i}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[s,i]of Object.entries(t))this.assignObjectToOutput(e,s,i)}}function ne(e,t,s,i){var n=e+t/60+s/3600;return\"S\"!==i&&\"W\"!==i||(n*=-1),n}e(ie,\"type\",\"tiff\"),e(ie,\"headerLength\",10),y.set(\"tiff\",ie);var re=Object.freeze({__proto__:null,default:G,Exifr:H,fileParsers:m,segmentParsers:y,fileReaders:b,tagKeys:B,tagValues:V,tagRevivers:I,createDictionary:x,extendDictionary:C,fetchUrlAsArrayBuffer:S,readBlobAsArrayBuffer:A,chunkedProps:L,otherSegments:T,segments:z,tiffBlocks:P,segmentsAndBlocks:F,tiffExtractables:j,inheritables:E,allFormatters:M,Options:R,parse:Y});const ae={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},he=Object.assign({},ae,{firstChunkSize:4e4,gps:[1,2,3,4]});async function fe(e){let t=new H(he);await t.read(e);let s=await t.parse();if(s&&s.gps){let{latitude:e,longitude:t}=s.gps;return{latitude:e,longitude:t}}}const le=Object.assign({},ae,{tiff:!1,ifd1:!0,mergeOutput:!1});async function oe(e){let t=new H(le);await t.read(e);let s=await t.extractThumbnail();return s&&a?r.from(s):s}async function ue(e){let t=await this.thumbnail(e);if(void 0!==t){let e=new Blob([t]);return URL.createObjectURL(e)}}const de=Object.assign({},ae,{firstChunkSize:4e4,ifd0:[274]});async function ce(e){let t=new H(de);await t.read(e);let s=await t.parse();if(s&&s.ifd0)return s.ifd0[274]}const pe=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let ge=!0,me=!0;if(\"object\"==typeof navigator){let e=navigator.userAgent;if(e.includes(\"iPad\")||e.includes(\"iPhone\")){let t=e.match(/OS (\\d+)_(\\d+)/);if(t){let[,e,s]=t,i=Number(e)+.1*Number(s);ge=i<13.4,me=!1}}else if(e.includes(\"OS X 10\")){let[,t]=e.match(/OS X 10[_.](\\d+)/);ge=me=Number(t)<15}if(e.includes(\"Chrome/\")){let[,t]=e.match(/Chrome\\/(\\d+)/);ge=me=Number(t)<81}else if(e.includes(\"Firefox/\")){let[,t]=e.match(/Firefox\\/(\\d+)/);ge=me=Number(t)<77}}async function ye(e){let t=await ce(e);return Object.assign({canvas:ge,css:me},pe[t])}class be extends c{constructor(...t){super(...t),e(this,\"ranges\",new we),0!==this.byteLength&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,s){if(0===e&&0===this.byteLength&&s){let e=new DataView(s.buffer||s,s.byteOffset,s.byteLength);this._swapDataView(e)}else{let s=e+t;if(s>this.byteLength){let{dataView:e}=this._extend(s);this._swapDataView(e)}}}_extend(e){let t;t=a?r.allocUnsafe(e):new Uint8Array(e);let s=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:s}}subarray(e,t,s=!1){return t=t||this._lengthToEnd(e),s&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,s=!1){s&&this._tryExtend(t,e.byteLength,e);let i=super.set(e,t);return this.ranges.add(t,i.byteLength),i}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class we{constructor(){e(this,\"list\",[])}get length(){return this.list.length}add(e,t,s=0){let i=e+t,n=this.list.filter((t=>ke(e,t.offset,i)||ke(e,t.end,i)));if(n.length>0){e=Math.min(e,...n.map((e=>e.offset))),i=Math.max(i,...n.map((e=>e.end))),t=i-e;let s=n.shift();s.offset=e,s.length=t,s.end=i,this.list=this.list.filter((e=>!n.includes(e)))}else this.list.push({offset:e,length:t,end:i})}available(e,t){let s=e+t;return this.list.some((t=>t.offset<=e&&s<=t.end))}}function ke(e,t,s){return e<=t&&t<=s}class Oe extends be{constructor(t,s){super(0),e(this,\"chunksRead\",0),this.input=t,this.options=s}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,s=await this.readChunk(e,t);return!!s&&s.byteLength===t}async readChunk(e,t){if(this.chunksRead++,0!==(t=this.safeWrapAddress(e,t)))return this._readChunk(e,t)}safeWrapAddress(e,t){return void 0!==this.size&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return void 0!==this.size&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}b.set(\"blob\",class extends Oe{async readWhole(){this.chunked=!1;let e=await A(this.input);this._swapArrayBuffer(e)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(e,t){let s=t?e+t:void 0,i=this.input.slice(e,s),n=await A(i);return this.set(n,e,!0)}});export default re;export{H as Exifr,R as Options,M as allFormatters,L as chunkedProps,x as createDictionary,C as extendDictionary,S as fetchUrlAsArrayBuffer,m as fileParsers,b as fileReaders,fe as gps,he as gpsOnlyOptions,E as inheritables,ce as orientation,de as orientationOnlyOptions,T as otherSegments,Y as parse,A as readBlobAsArrayBuffer,ge as rotateCanvas,me as rotateCss,ye as rotation,pe as rotations,y as segmentParsers,z as segments,F as segmentsAndBlocks,B as tagKeys,I as tagRevivers,V as tagValues,oe as thumbnail,le as thumbnailOnlyOptions,ue as thumbnailUrl,P as tiffBlocks,j as tiffExtractables};\n", "{\n  \"name\": \"@uppy/thumbnail-generator\",\n  \"description\": \"Uppy plugin that generates small previews of images to show on your upload UI.\",\n  \"version\": \"4.2.3\",\n  \"license\": \"MIT\",\n  \"main\": \"lib/index.js\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --environment=jsdom --silent='passed-only'\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\",\n    \"uppy-plugin\",\n    \"thumbnail\",\n    \"preview\",\n    \"resize\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"dependencies\": {\n    \"@uppy/utils\": \"^6.2.2\",\n    \"exifr\": \"^7.0.0\"\n  },\n  \"devDependencies\": {\n    \"jsdom\": \"^26.1.0\",\n    \"namespace-emitter\": \"2.0.1\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  },\n  \"peerDependencies\": {\n    \"@uppy/core\": \"^4.5.3\"\n  }\n}", "export default {\n    strings: {\n        generatingThumbnails: 'Generating thumbnails...',\n    },\n};\n", "import { UIPlugin } from '@uppy/core';\nimport dataURItoBlob from '@uppy/utils/lib/dataURItoBlob';\nimport isObjectURL from '@uppy/utils/lib/isObjectURL';\nimport isPreviewSupported from '@uppy/utils/lib/isPreviewSupported';\n// @ts-ignore untyped\nimport { rotation } from 'exifr/dist/mini.esm.mjs';\nimport packageJson from '../package.json' with { type: 'json' };\nimport locale from './locale.js';\n/**\n * Save a <canvas> element's content to a Blob object.\n *\n */\nfunction canvasToBlob(canvas, type, quality) {\n    try {\n        canvas.getContext('2d').getImageData(0, 0, 1, 1);\n    }\n    catch (err) {\n        if (err.code === 18) {\n            return Promise.reject(new Error('cannot read image, probably an svg with external resources'));\n        }\n    }\n    if (canvas.toBlob) {\n        return new Promise((resolve) => {\n            canvas.toBlob(resolve, type, quality);\n        }).then((blob) => {\n            if (blob === null) {\n                throw new Error('cannot read image, probably an svg with external resources');\n            }\n            return blob;\n        });\n    }\n    return Promise.resolve()\n        .then(() => {\n        return dataURItoBlob(canvas.toDataURL(type, quality), {});\n    })\n        .then((blob) => {\n        if (blob === null) {\n            throw new Error('could not extract blob, probably an old browser');\n        }\n        return blob;\n    });\n}\nfunction rotateImage(image, translate) {\n    let w = image.width;\n    let h = image.height;\n    if (translate.deg === 90 || translate.deg === 270) {\n        w = image.height;\n        h = image.width;\n    }\n    const canvas = document.createElement('canvas');\n    canvas.width = w;\n    canvas.height = h;\n    const context = canvas.getContext('2d');\n    context.translate(w / 2, h / 2);\n    if (translate.canvas) {\n        context.rotate(translate.rad);\n        context.scale(translate.scaleX, translate.scaleY);\n    }\n    context.drawImage(image, -image.width / 2, -image.height / 2, image.width, image.height);\n    return canvas;\n}\n/**\n * Make sure the image doesn\u2019t exceed browser/device canvas limits.\n * For ios with 256 RAM and ie\n */\nfunction protect(image) {\n    // https://stackoverflow.com/questions/6081483/maximum-size-of-a-canvas-element\n    const ratio = image.width / image.height;\n    const maxSquare = 5000000; // ios max canvas square\n    const maxSize = 4096; // ie max canvas dimensions\n    let maxW = Math.floor(Math.sqrt(maxSquare * ratio));\n    let maxH = Math.floor(maxSquare / Math.sqrt(maxSquare * ratio));\n    if (maxW > maxSize) {\n        maxW = maxSize;\n        maxH = Math.round(maxW / ratio);\n    }\n    if (maxH > maxSize) {\n        maxH = maxSize;\n        maxW = Math.round(ratio * maxH);\n    }\n    if (image.width > maxW) {\n        const canvas = document.createElement('canvas');\n        canvas.width = maxW;\n        canvas.height = maxH;\n        canvas.getContext('2d').drawImage(image, 0, 0, maxW, maxH);\n        return canvas;\n    }\n    return image;\n}\nconst defaultOptions = {\n    thumbnailWidth: null,\n    thumbnailHeight: null,\n    thumbnailType: 'image/jpeg',\n    waitForThumbnailsBeforeUpload: false,\n    lazy: false,\n};\n/**\n * The Thumbnail Generator plugin\n */\nexport default class ThumbnailGenerator extends UIPlugin {\n    static VERSION = packageJson.version;\n    queue;\n    queueProcessing;\n    defaultThumbnailDimension;\n    thumbnailType;\n    constructor(uppy, opts) {\n        super(uppy, { ...defaultOptions, ...opts });\n        this.type = 'modifier';\n        this.id = this.opts.id || 'ThumbnailGenerator';\n        this.title = 'Thumbnail Generator';\n        this.queue = [];\n        this.queueProcessing = false;\n        this.defaultThumbnailDimension = 200;\n        this.thumbnailType = this.opts.thumbnailType;\n        this.defaultLocale = locale;\n        this.i18nInit();\n        if (this.opts.lazy && this.opts.waitForThumbnailsBeforeUpload) {\n            throw new Error('ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.');\n        }\n    }\n    createThumbnail(file, targetWidth, targetHeight) {\n        const originalUrl = URL.createObjectURL(file.data);\n        const onload = new Promise((resolve, reject) => {\n            const image = new Image();\n            image.src = originalUrl;\n            image.addEventListener('load', () => {\n                URL.revokeObjectURL(originalUrl);\n                resolve(image);\n            });\n            image.addEventListener('error', (event) => {\n                URL.revokeObjectURL(originalUrl);\n                reject(event.error || new Error('Could not create thumbnail'));\n            });\n        });\n        const orientationPromise = rotation(file.data).catch(() => 1);\n        return Promise.all([onload, orientationPromise])\n            .then(([image, orientation]) => {\n            const dimensions = this.getProportionalDimensions(image, targetWidth, targetHeight, orientation.deg);\n            const rotatedImage = rotateImage(image, orientation);\n            const resizedImage = this.resizeImage(rotatedImage, dimensions.width, dimensions.height);\n            return canvasToBlob(resizedImage, this.thumbnailType, 80);\n        })\n            .then((blob) => {\n            return URL.createObjectURL(blob);\n        });\n    }\n    /**\n     * Get the new calculated dimensions for the given image and a target width\n     * or height. If both width and height are given, only width is taken into\n     * account. If neither width nor height are given, the default dimension\n     * is used.\n     */\n    getProportionalDimensions(img, width, height, deg) {\n        let aspect = img.width / img.height;\n        if (deg === 90 || deg === 270) {\n            aspect = img.height / img.width;\n        }\n        if (width != null) {\n            let targetWidth = width;\n            // Thumbnail shouldn\u2019t be enlarged / upscaled, only reduced.\n            // If img is already smaller than width/height, leave it as is.\n            if (img.width < width)\n                targetWidth = img.width;\n            return {\n                width: targetWidth,\n                height: Math.round(targetWidth / aspect),\n            };\n        }\n        if (height != null) {\n            let targetHeight = height;\n            if (img.height < height)\n                targetHeight = img.height;\n            return {\n                width: Math.round(targetHeight * aspect),\n                height: targetHeight,\n            };\n        }\n        return {\n            width: this.defaultThumbnailDimension,\n            height: Math.round(this.defaultThumbnailDimension / aspect),\n        };\n    }\n    /**\n     * Resize an image to the target `width` and `height`.\n     *\n     * Returns a Canvas with the resized image on it.\n     */\n    resizeImage(image, targetWidth, targetHeight) {\n        // Resizing in steps refactored to use a solution from\n        // https://blog.uploadcare.com/image-resize-in-browsers-is-broken-e38eed08df01\n        let img = protect(image);\n        let steps = Math.ceil(Math.log2(img.width / targetWidth));\n        if (steps < 1) {\n            steps = 1;\n        }\n        let sW = targetWidth * 2 ** (steps - 1);\n        let sH = targetHeight * 2 ** (steps - 1);\n        const x = 2;\n        while (steps--) {\n            const canvas = document.createElement('canvas');\n            canvas.width = sW;\n            canvas.height = sH;\n            canvas.getContext('2d').drawImage(img, 0, 0, sW, sH);\n            img = canvas;\n            sW = Math.round(sW / x);\n            sH = Math.round(sH / x);\n        }\n        return img;\n    }\n    /**\n     * Set the preview URL for a file.\n     */\n    setPreviewURL(fileID, preview) {\n        this.uppy.setFileState(fileID, { preview });\n    }\n    addToQueue(fileID) {\n        this.queue.push(fileID);\n        if (this.queueProcessing === false) {\n            this.processQueue();\n        }\n    }\n    processQueue() {\n        this.queueProcessing = true;\n        if (this.queue.length > 0) {\n            const current = this.uppy.getFile(this.queue.shift());\n            if (!current) {\n                this.uppy.log('[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug', 'error');\n                return Promise.resolve();\n            }\n            return this.requestThumbnail(current)\n                .catch(() => { })\n                .then(() => this.processQueue());\n        }\n        this.queueProcessing = false;\n        this.uppy.log('[ThumbnailGenerator] Emptied thumbnail queue');\n        this.uppy.emit('thumbnail:all-generated');\n        return Promise.resolve();\n    }\n    requestThumbnail(file) {\n        if (isPreviewSupported(file.type) && !file.isRemote) {\n            return this.createThumbnail(file, this.opts.thumbnailWidth, this.opts.thumbnailHeight)\n                .then((preview) => {\n                this.setPreviewURL(file.id, preview);\n                this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${file.id}`);\n                this.uppy.emit('thumbnail:generated', this.uppy.getFile(file.id), preview);\n            })\n                .catch((err) => {\n                this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${file.id}:`, 'warning');\n                this.uppy.log(err, 'warning');\n                this.uppy.emit('thumbnail:error', this.uppy.getFile(file.id), err);\n            });\n        }\n        return Promise.resolve();\n    }\n    onFileAdded = (file) => {\n        if (!file.preview &&\n            file.data &&\n            isPreviewSupported(file.type) &&\n            !file.isRemote) {\n            this.addToQueue(file.id);\n        }\n    };\n    /**\n     * Cancel a lazy request for a thumbnail if the thumbnail has not yet been generated.\n     */\n    onCancelRequest = (file) => {\n        const index = this.queue.indexOf(file.id);\n        if (index !== -1) {\n            this.queue.splice(index, 1);\n        }\n    };\n    /**\n     * Clean up the thumbnail for a file. Cancel lazy requests and free the thumbnail URL.\n     */\n    onFileRemoved = (file) => {\n        const index = this.queue.indexOf(file.id);\n        if (index !== -1) {\n            this.queue.splice(index, 1);\n        }\n        // Clean up object URLs.\n        if (file.preview && isObjectURL(file.preview)) {\n            URL.revokeObjectURL(file.preview);\n        }\n    };\n    onRestored = () => {\n        const restoredFiles = this.uppy.getFiles().filter((file) => file.isRestored);\n        restoredFiles.forEach((file) => {\n            // Only add blob URLs; they are likely invalid after being restored.\n            if (!file.preview || isObjectURL(file.preview)) {\n                this.addToQueue(file.id);\n            }\n        });\n    };\n    onAllFilesRemoved = () => {\n        this.queue = [];\n    };\n    waitUntilAllProcessed = (fileIDs) => {\n        fileIDs.forEach((fileID) => {\n            const file = this.uppy.getFile(fileID);\n            this.uppy.emit('preprocess-progress', file, {\n                mode: 'indeterminate',\n                message: this.i18n('generatingThumbnails'),\n            });\n        });\n        const emitPreprocessCompleteForAll = () => {\n            fileIDs.forEach((fileID) => {\n                const file = this.uppy.getFile(fileID);\n                this.uppy.emit('preprocess-complete', file);\n            });\n        };\n        return new Promise((resolve) => {\n            if (this.queueProcessing) {\n                this.uppy.once('thumbnail:all-generated', () => {\n                    emitPreprocessCompleteForAll();\n                    resolve();\n                });\n            }\n            else {\n                emitPreprocessCompleteForAll();\n                resolve();\n            }\n        });\n    };\n    install() {\n        this.uppy.on('file-removed', this.onFileRemoved);\n        this.uppy.on('cancel-all', this.onAllFilesRemoved);\n        if (this.opts.lazy) {\n            this.uppy.on('thumbnail:request', this.onFileAdded);\n            this.uppy.on('thumbnail:cancel', this.onCancelRequest);\n        }\n        else {\n            this.uppy.on('thumbnail:request', this.onFileAdded);\n            this.uppy.on('file-added', this.onFileAdded);\n            this.uppy.on('restored', this.onRestored);\n        }\n        if (this.opts.waitForThumbnailsBeforeUpload) {\n            this.uppy.addPreProcessor(this.waitUntilAllProcessed);\n        }\n    }\n    uninstall() {\n        this.uppy.off('file-removed', this.onFileRemoved);\n        this.uppy.off('cancel-all', this.onAllFilesRemoved);\n        if (this.opts.lazy) {\n            this.uppy.off('thumbnail:request', this.onFileAdded);\n            this.uppy.off('thumbnail:cancel', this.onCancelRequest);\n        }\n        else {\n            this.uppy.off('thumbnail:request', this.onFileAdded);\n            this.uppy.off('file-added', this.onFileAdded);\n            this.uppy.off('restored', this.onRestored);\n        }\n        if (this.opts.waitForThumbnailsBeforeUpload) {\n            this.uppy.removePreProcessor(this.waitUntilAllProcessed);\n        }\n    }\n}\n", "import isDOMElement from './isDOMElement.js';\n/**\n * Find one or more DOM elements.\n */\nfunction findAllDOMElements(element) {\n    if (typeof element === 'string') {\n        const elements = document.querySelectorAll(element);\n        return elements.length === 0 ? null : Array.from(elements);\n    }\n    if (typeof element === 'object' && isDOMElement(element)) {\n        return [element];\n    }\n    return null;\n}\nexport default findAllDOMElements;\n", "/**\n * Converts list into array\n */\nexport default Array.from;\n", "import toArray from '../../toArray.js';\n// .files fallback, should be implemented in any browser\nexport default function fallbackApi(dataTransfer) {\n    const files = toArray(dataTransfer.files);\n    return Promise.resolve(files);\n}\n", "/**\n * Recursive function, calls the original callback() when the directory is entirely parsed.\n */\nexport default function getFilesAndDirectoriesFromDirectory(directoryReader, oldEntries, logDropError, { onSuccess }) {\n    directoryReader.readEntries((entries) => {\n        const newEntries = [...oldEntries, ...entries];\n        // According to the FileSystem API spec, getFilesAndDirectoriesFromDirectory()\n        // must be called until it calls the onSuccess with an empty array.\n        if (entries.length) {\n            queueMicrotask(() => {\n                getFilesAndDirectoriesFromDirectory(directoryReader, newEntries, logDropError, { onSuccess });\n            });\n            // Done iterating this particular directory\n        }\n        else {\n            onSuccess(newEntries);\n        }\n    }, \n    // Make sure we resolve on error anyway, it's fine if only one directory couldn't be parsed!\n    (error) => {\n        logDropError(error);\n        onSuccess(oldEntries);\n    });\n}\n", "import getFilesAndDirectoriesFromDirectory from './getFilesAndDirectoriesFromDirectory.js';\n/**\n * Polyfill for the new (experimental) getAsFileSystemHandle API (using the popular webkitGetAsEntry behind the scenes)\n * so that we can switch to the getAsFileSystemHandle API once it (hopefully) becomes standard\n */\nfunction getAsFileSystemHandleFromEntry(entry, logDropError) {\n    if (entry == null)\n        return entry;\n    return {\n        kind: entry.isFile\n            ? 'file'\n            : entry.isDirectory\n                ? 'directory'\n                : undefined,\n        name: entry.name,\n        getFile() {\n            return new Promise((resolve, reject) => entry.file(resolve, reject));\n        },\n        async *values() {\n            // If the file is a directory.\n            const directoryReader = entry.createReader();\n            const entries = await new Promise((resolve) => {\n                getFilesAndDirectoriesFromDirectory(directoryReader, [], logDropError, {\n                    onSuccess: (dirEntries) => resolve(dirEntries.map((file) => getAsFileSystemHandleFromEntry(file, logDropError))),\n                });\n            });\n            yield* entries;\n        },\n        isSameEntry: undefined,\n    };\n}\nasync function* createPromiseToAddFileOrParseDirectory(entry, relativePath, lastResortFile = undefined) {\n    const getNextRelativePath = () => `${relativePath}/${entry.name}`;\n    // For each dropped item, - make sure it's a file/directory, and start deepening in!\n    if (entry.kind === 'file') {\n        const file = await entry.getFile();\n        if (file != null) {\n            ;\n            file.relativePath = relativePath ? getNextRelativePath() : null;\n            yield file;\n        }\n        else if (lastResortFile != null)\n            yield lastResortFile;\n    }\n    else if (entry.kind === 'directory') {\n        for await (const handle of entry.values()) {\n            // Recurse on the directory, appending the dir name to the relative path\n            yield* createPromiseToAddFileOrParseDirectory(handle, relativePath ? getNextRelativePath() : entry.name);\n        }\n    }\n    else if (lastResortFile != null)\n        yield lastResortFile;\n}\n/**\n * Load all files from data transfer, and recursively read any directories.\n * Note that IE is not supported for drag-drop, because IE doesn't support Data Transfers\n *\n * @param {DataTransfer} dataTransfer\n * @param {*} logDropError on error\n */\nexport default async function* getFilesFromDataTransfer(dataTransfer, logDropError) {\n    // Retrieving the dropped items must happen synchronously\n    // otherwise only the first item gets treated and the other ones are garbage collected.\n    // https://github.com/transloadit/uppy/pull/3998\n    const fileSystemHandles = await Promise.all(Array.from(dataTransfer.items, async (item) => {\n        // biome-ignore lint/style/useConst: ...\n        let fileSystemHandle;\n        // TODO enable getAsFileSystemHandle API once we can get it working with subdirectories\n        // IMPORTANT: Need to check isSecureContext *before* calling getAsFileSystemHandle\n        // or else Chrome will crash when running in HTTP: https://github.com/transloadit/uppy/issues/4133\n        // if (window.isSecureContext && item.getAsFileSystemHandle != null)\n        // fileSystemHandle = await item.getAsFileSystemHandle()\n        // `webkitGetAsEntry` exists in all popular browsers (including non-WebKit browsers),\n        // however it may be renamed to getAsEntry() in the future, so you should code defensively, looking for both.\n        // from https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItem/webkitGetAsEntry\n        const getAsEntry = () => typeof item.getAsEntry === 'function'\n            ? item.getAsEntry()\n            : item.webkitGetAsEntry();\n        fileSystemHandle ??= getAsFileSystemHandleFromEntry(getAsEntry(), logDropError);\n        return {\n            fileSystemHandle,\n            lastResortFile: item.getAsFile(), // can be used as a fallback in case other methods fail\n        };\n    }));\n    for (const { lastResortFile, fileSystemHandle } of fileSystemHandles) {\n        // fileSystemHandle and lastResortFile can be null when we drop an url.\n        if (fileSystemHandle != null) {\n            try {\n                yield* createPromiseToAddFileOrParseDirectory(fileSystemHandle, '', lastResortFile);\n            }\n            catch (err) {\n                // Example: If dropping a symbolic link, Chromium will throw:\n                // \"DOMException: A requested file or directory could not be found at the time an operation was processed.\",\n                // So we will use lastResortFile instead. See https://github.com/transloadit/uppy/issues/3505.\n                if (lastResortFile != null) {\n                    yield lastResortFile;\n                }\n                else {\n                    logDropError(err);\n                }\n            }\n        }\n        else if (lastResortFile != null)\n            yield lastResortFile;\n    }\n}\n", "import fallbackApi from './utils/fallbackApi.js';\nimport webkitGetAsEntryApi from './utils/webkitGetAsEntryApi/index.js';\n/**\n * Returns a promise that resolves to the array of dropped files (if a folder is\n * dropped, and browser supports folder parsing - promise resolves to the flat\n * array of all files in all directories).\n * Each file has .relativePath prop appended to it (e.g. \"/docs/Prague/ticket_from_prague_to_ufa.pdf\")\n * if browser supports it. Otherwise it's undefined.\n *\n * @param dataTransfer\n * @param options\n * @param options.logDropError - a function that's called every time some\n * folder or some file error out (e.g. because of the folder name being too long\n * on Windows). Notice that resulting promise will always be resolved anyway.\n *\n * @returns {Promise} - Array<File>\n */\nexport default async function getDroppedFiles(dataTransfer, options) {\n    // Get all files from all subdirs. Works (at least) in Chrome, Mozilla, and Safari\n    const logDropError = options?.logDropError ?? Function.prototype;\n    try {\n        const accumulator = [];\n        for await (const file of webkitGetAsEntryApi(dataTransfer, logDropError)) {\n            accumulator.push(file);\n        }\n        return accumulator;\n        // Otherwise just return all first-order files\n    }\n    catch {\n        return fallbackApi(dataTransfer);\n    }\n}\n", "{\n  \"name\": \"@uppy/dashboard\",\n  \"description\": \"Universal UI plugin for Uppy.\",\n  \"version\": \"4.4.3\",\n  \"license\": \"MIT\",\n  \"main\": \"lib/index.js\",\n  \"style\": \"dist/style.min.css\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"build:css\": \"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --silent='passed-only'\",\n    \"test:e2e\": \"vitest watch --project browser --browser.headless false\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\",\n    \"uppy-plugin\",\n    \"dashboard\",\n    \"ui\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"dependencies\": {\n    \"@transloadit/prettier-bytes\": \"^0.3.4\",\n    \"@uppy/informer\": \"^4.3.2\",\n    \"@uppy/provider-views\": \"^4.5.2\",\n    \"@uppy/status-bar\": \"^4.2.3\",\n    \"@uppy/thumbnail-generator\": \"^4.2.2\",\n    \"@uppy/utils\": \"^6.2.2\",\n    \"classnames\": \"^2.2.6\",\n    \"lodash\": \"^4.17.21\",\n    \"nanoid\": \"^5.0.9\",\n    \"preact\": \"^10.5.13\",\n    \"shallow-equal\": \"^3.0.0\"\n  },\n  \"devDependencies\": {\n    \"@uppy/core\": \"^4.5.2\",\n    \"@uppy/google-drive\": \"^4.4.2\",\n    \"@uppy/status-bar\": \"^4.2.3\",\n    \"@uppy/url\": \"^4.3.2\",\n    \"@uppy/webcam\": \"^4.3.2\",\n    \"@vitest/browser\": \"^3.2.4\",\n    \"cssnano\": \"^7.0.7\",\n    \"jsdom\": \"^26.1.0\",\n    \"postcss\": \"^8.5.6\",\n    \"postcss-cli\": \"^11.0.1\",\n    \"resize-observer-polyfill\": \"^1.5.0\",\n    \"sass\": \"^1.89.2\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  },\n  \"peerDependencies\": {\n    \"@uppy/core\": \"^4.5.2\"\n  }\n}", "/**\n * Checks if the browser supports Drag & Drop (not supported on mobile devices, for example).\n */\nexport default function isDragDropSupported() {\n    const div = document.body;\n    if (!('draggable' in div) || !('ondragstart' in div && 'ondrop' in div)) {\n        return false;\n    }\n    if (!('FormData' in window)) {\n        return false;\n    }\n    if (!('FileReader' in window)) {\n        return false;\n    }\n    return true;\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport isDragDropSupported from '@uppy/utils/lib/isDragDropSupported';\nimport classNames from 'classnames';\nimport { h } from 'preact';\nimport AddFiles from './AddFiles.js';\nimport AddFilesPanel from './AddFilesPanel.js';\nimport EditorPanel from './EditorPanel.js';\nimport FileCard from './FileCard/index.js';\nimport FileList from './FileList.js';\nimport PickerPanelContent from './PickerPanelContent.js';\nimport PanelTopBar from './PickerPanelTopBar.js';\nimport Slide from './Slide.js';\n// http://dev.edenspiekermann.com/2016/02/11/introducing-accessible-modal-dialog\n// https://github.com/ghosh/micromodal\nconst WIDTH_XL = 900;\nconst WIDTH_LG = 700;\nconst WIDTH_MD = 576;\nconst HEIGHT_MD = 330;\nexport default function Dashboard(props) {\n    const isNoFiles = props.totalFileCount === 0;\n    const isSingleFile = props.totalFileCount === 1;\n    const isSizeMD = props.containerWidth > WIDTH_MD;\n    const isSizeHeightMD = props.containerHeight > HEIGHT_MD;\n    const dashboardClassName = classNames({\n        'uppy-Dashboard': true,\n        'uppy-Dashboard--isDisabled': props.disabled,\n        'uppy-Dashboard--animateOpenClose': props.animateOpenClose,\n        'uppy-Dashboard--isClosing': props.isClosing,\n        'uppy-Dashboard--isDraggingOver': props.isDraggingOver,\n        'uppy-Dashboard--modal': !props.inline,\n        'uppy-size--md': props.containerWidth > WIDTH_MD,\n        'uppy-size--lg': props.containerWidth > WIDTH_LG,\n        'uppy-size--xl': props.containerWidth > WIDTH_XL,\n        'uppy-size--height-md': props.containerHeight > HEIGHT_MD,\n        // We might want to enable this in the future\n        // 'uppy-size--height-lg': props.containerHeight > HEIGHT_LG,\n        // 'uppy-size--height-xl': props.containerHeight > HEIGHT_XL,\n        'uppy-Dashboard--isAddFilesPanelVisible': props.showAddFilesPanel,\n        'uppy-Dashboard--isInnerWrapVisible': props.areInsidesReadyToBeVisible,\n        // Only enable \u201Ccentered single file\u201D mode when Dashboard is tall enough\n        'uppy-Dashboard--singleFile': props.singleFileFullScreen && isSingleFile && isSizeHeightMD,\n    });\n    // Important: keep these in sync with the percent width values in `src/components/FileItem/index.scss`.\n    let itemsPerRow = 1; // mobile\n    if (props.containerWidth > WIDTH_XL) {\n        itemsPerRow = 5;\n    }\n    else if (props.containerWidth > WIDTH_LG) {\n        itemsPerRow = 4;\n    }\n    else if (props.containerWidth > WIDTH_MD) {\n        itemsPerRow = 3;\n    }\n    const showFileList = props.showSelectedFiles && !isNoFiles;\n    const numberOfFilesForRecovery = props.recoveredState\n        ? Object.keys(props.recoveredState.files).length\n        : null;\n    const numberOfGhosts = props.files\n        ? Object.keys(props.files).filter((fileID) => props.files[fileID].isGhost)\n            .length\n        : 0;\n    const renderRestoredText = () => {\n        if (numberOfGhosts > 0) {\n            return props.i18n('recoveredXFiles', {\n                smart_count: numberOfGhosts,\n            });\n        }\n        return props.i18n('recoveredAllFiles');\n    };\n    const dashboard = (\n    // biome-ignore lint/a11y/useAriaPropsSupportedByRole: ...\n    _jsxs(\"div\", { className: dashboardClassName, \"data-uppy-theme\": props.theme, \"data-uppy-num-acquirers\": props.acquirers.length, \"data-uppy-drag-drop-supported\": !props.disableLocalFiles && isDragDropSupported(), \"aria-hidden\": props.inline ? 'false' : props.isHidden, \"aria-disabled\": props.disabled, \"aria-label\": !props.inline\n            ? props.i18n('dashboardWindowTitle')\n            : props.i18n('dashboardTitle'), onPaste: props.handlePaste, onDragOver: props.handleDragOver, onDragLeave: props.handleDragLeave, onDrop: props.handleDrop, children: [_jsx(\"div\", { \"aria-hidden\": \"true\", className: \"uppy-Dashboard-overlay\", tabIndex: -1, onClick: props.handleClickOutside }), _jsxs(\"div\", { className: \"uppy-Dashboard-inner\", role: props.inline ? undefined : 'dialog', style: {\n                    width: props.inline && props.width ? props.width : '',\n                    height: props.inline && props.height ? props.height : '',\n                }, children: [!props.inline ? (_jsx(\"button\", { className: \"uppy-u-reset uppy-Dashboard-close\", type: \"button\", \"aria-label\": props.i18n('closeModal'), title: props.i18n('closeModal'), onClick: props.closeModal, children: _jsx(\"span\", { \"aria-hidden\": \"true\", children: \"\\u00D7\" }) })) : null, _jsxs(\"div\", { className: \"uppy-Dashboard-innerWrap\", children: [_jsx(\"div\", { className: \"uppy-Dashboard-dropFilesHereHint\", children: props.i18n('dropHint') }), showFileList && _jsx(PanelTopBar, { ...props }), numberOfFilesForRecovery && (_jsxs(\"div\", { className: \"uppy-Dashboard-serviceMsg\", children: [_jsx(\"svg\", { className: \"uppy-Dashboard-serviceMsg-icon\", \"aria-hidden\": \"true\", focusable: \"false\", width: \"21\", height: \"16\", viewBox: \"0 0 24 19\", children: _jsxs(\"g\", { transform: \"translate(0 -1)\", fill: \"none\", fillRule: \"evenodd\", children: [_jsx(\"path\", { d: \"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z\", fill: \"#FFD300\" }), _jsx(\"path\", { fill: \"#000\", d: \"M11 6h2l-.3 8h-1.4z\" }), _jsx(\"circle\", { fill: \"#000\", cx: \"12\", cy: \"17\", r: \"1\" })] }) }), _jsx(\"strong\", { className: \"uppy-Dashboard-serviceMsg-title\", children: props.i18n('sessionRestored') }), _jsx(\"div\", { className: \"uppy-Dashboard-serviceMsg-text\", children: renderRestoredText() })] })), showFileList ? (_jsx(FileList, { id: props.id, i18n: props.i18n, uppy: props.uppy, files: props.files, resumableUploads: props.resumableUploads, hideRetryButton: props.hideRetryButton, hidePauseResumeButton: props.hidePauseResumeButton, hideCancelButton: props.hideCancelButton, showLinkToFileUploadResult: props.showLinkToFileUploadResult, showRemoveButtonAfterComplete: props.showRemoveButtonAfterComplete, metaFields: props.metaFields, toggleFileCard: props.toggleFileCard, handleRequestThumbnail: props.handleRequestThumbnail, handleCancelThumbnail: props.handleCancelThumbnail, recoveredState: props.recoveredState, individualCancellation: props.individualCancellation, openFileEditor: props.openFileEditor, canEditFile: props.canEditFile, toggleAddFilesPanel: props.toggleAddFilesPanel, isSingleFile: isSingleFile, itemsPerRow: itemsPerRow, containerWidth: props.containerWidth, containerHeight: props.containerHeight })) : (_jsx(AddFiles, { i18n: props.i18n, i18nArray: props.i18nArray, acquirers: props.acquirers, handleInputChange: props.handleInputChange, maxNumberOfFiles: props.maxNumberOfFiles, allowedFileTypes: props.allowedFileTypes, showNativePhotoCameraButton: props.showNativePhotoCameraButton, showNativeVideoCameraButton: props.showNativeVideoCameraButton, nativeCameraFacingMode: props.nativeCameraFacingMode, showPanel: props.showPanel, activePickerPanel: props.activePickerPanel, disableLocalFiles: props.disableLocalFiles, fileManagerSelectionType: props.fileManagerSelectionType, note: props.note, proudlyDisplayPoweredByUppy: props.proudlyDisplayPoweredByUppy })), _jsx(Slide, { children: props.showAddFilesPanel ? (_jsx(AddFilesPanel, { ...props, isSizeMD: isSizeMD }, \"AddFiles\")) : null }), _jsx(Slide, { children: props.fileCardFor ? _jsx(FileCard, { ...props }, \"FileCard\") : null }), _jsx(Slide, { children: props.activePickerPanel ? (_jsx(PickerPanelContent, { ...props }, \"Picker\")) : null }), _jsx(Slide, { children: props.showFileEditor ? (_jsx(EditorPanel, { ...props }, \"Editor\")) : null }), _jsx(\"div\", { className: \"uppy-Dashboard-progressindicators\", children: props.progressindicators.map((target) => {\n                                    // TODO\n                                    // Here we're telling typescript all `this.type = 'progressindicator'` plugins inherit from `UIPlugin`\n                                    // This is factually true in Uppy right now, but maybe it doesn't have to be\n                                    return props.uppy.getPlugin(target.id).render(props.state);\n                                }) })] })] })] }));\n    return dashboard;\n}\n", "import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"preact/jsx-runtime\";\nimport { Component, Fragment, h } from 'preact';\nclass AddFiles extends Component {\n    fileInput = null;\n    folderInput = null;\n    mobilePhotoFileInput = null;\n    mobileVideoFileInput = null;\n    triggerFileInputClick = () => {\n        this.fileInput?.click();\n    };\n    triggerFolderInputClick = () => {\n        this.folderInput?.click();\n    };\n    triggerVideoCameraInputClick = () => {\n        this.mobileVideoFileInput?.click();\n    };\n    triggerPhotoCameraInputClick = () => {\n        this.mobilePhotoFileInput?.click();\n    };\n    onFileInputChange = (event) => {\n        this.props.handleInputChange(event);\n        // Clear the input so that Chrome/Safari/etc. can detect file section when the same file is repeatedly selected\n        // (see https://github.com/transloadit/uppy/issues/768#issuecomment-2264902758)\n        event.currentTarget.value = '';\n    };\n    renderHiddenInput = (isFolder, refCallback) => {\n        return (_jsx(\"input\", { className: \"uppy-Dashboard-input\", hidden: true, \"aria-hidden\": \"true\", tabIndex: -1, \n            // @ts-expect-error default types don't yet know about the `webkitdirectory` property\n            webkitdirectory: isFolder, type: \"file\", name: \"files[]\", multiple: this.props.maxNumberOfFiles !== 1, onChange: this.onFileInputChange, accept: this.props.allowedFileTypes?.join(', '), ref: refCallback }));\n    };\n    renderHiddenCameraInput = (type, nativeCameraFacingMode, refCallback) => {\n        const typeToAccept = { photo: 'image/*', video: 'video/*' };\n        const accept = typeToAccept[type];\n        return (_jsx(\"input\", { className: \"uppy-Dashboard-input\", hidden: true, \"aria-hidden\": \"true\", tabIndex: -1, type: \"file\", name: `camera-${type}`, onChange: this.onFileInputChange, capture: nativeCameraFacingMode === '' ? 'environment' : nativeCameraFacingMode, accept: accept, ref: refCallback }));\n    };\n    renderMyDeviceAcquirer = () => {\n        return (_jsx(\"div\", { className: \"uppy-DashboardTab\", role: \"presentation\", \"data-uppy-acquirer-id\": \"MyDevice\", children: _jsxs(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn\", role: \"tab\", tabIndex: 0, \"data-uppy-super-focusable\": true, onClick: this.triggerFileInputClick, children: [_jsx(\"div\", { className: \"uppy-DashboardTab-inner\", children: _jsx(\"svg\", { className: \"uppy-DashboardTab-iconMyDevice\", \"aria-hidden\": \"true\", focusable: \"false\", width: \"32\", height: \"32\", viewBox: \"0 0 32 32\", children: _jsx(\"path\", { d: \"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z\", fill: \"currentcolor\", \"fill-rule\": \"evenodd\" }) }) }), _jsx(\"div\", { className: \"uppy-DashboardTab-name\", children: this.props.i18n('myDevice') })] }) }));\n    };\n    renderPhotoCamera = () => {\n        return (_jsx(\"div\", { className: \"uppy-DashboardTab\", role: \"presentation\", \"data-uppy-acquirer-id\": \"MobilePhotoCamera\", children: _jsxs(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn\", role: \"tab\", tabIndex: 0, \"data-uppy-super-focusable\": true, onClick: this.triggerPhotoCameraInputClick, children: [_jsx(\"div\", { className: \"uppy-DashboardTab-inner\", children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", width: \"32\", height: \"32\", viewBox: \"0 0 32 32\", children: _jsx(\"path\", { d: \"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z\", fill: \"#02B383\", \"fill-rule\": \"nonzero\" }) }) }), _jsx(\"div\", { className: \"uppy-DashboardTab-name\", children: this.props.i18n('takePictureBtn') })] }) }));\n    };\n    renderVideoCamera = () => {\n        return (_jsx(\"div\", { className: \"uppy-DashboardTab\", role: \"presentation\", \"data-uppy-acquirer-id\": \"MobileVideoCamera\", children: _jsxs(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn\", role: \"tab\", tabIndex: 0, \"data-uppy-super-focusable\": true, onClick: this.triggerVideoCameraInputClick, children: [_jsx(\"div\", { className: \"uppy-DashboardTab-inner\", children: _jsx(\"svg\", { \"aria-hidden\": \"true\", width: \"32\", height: \"32\", viewBox: \"0 0 32 32\", children: _jsx(\"path\", { fill: \"#FF675E\", fillRule: \"nonzero\", d: \"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z \" }) }) }), _jsx(\"div\", { className: \"uppy-DashboardTab-name\", children: this.props.i18n('recordVideoBtn') })] }) }));\n    };\n    renderBrowseButton = (text, onClickFn) => {\n        const numberOfAcquirers = this.props.acquirers.length;\n        return (_jsx(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-browse\", onClick: onClickFn, \"data-uppy-super-focusable\": numberOfAcquirers === 0, children: text }));\n    };\n    renderDropPasteBrowseTagline = (numberOfAcquirers) => {\n        const browseFiles = this.renderBrowseButton(this.props.i18n('browseFiles'), this.triggerFileInputClick);\n        const browseFolders = this.renderBrowseButton(this.props.i18n('browseFolders'), this.triggerFolderInputClick);\n        // in order to keep the i18n CamelCase and options lower (as are defaults) we will want to transform a lower\n        // to Camel\n        const lowerFMSelectionType = this.props.fileManagerSelectionType;\n        const camelFMSelectionType = lowerFMSelectionType.charAt(0).toUpperCase() +\n            lowerFMSelectionType.slice(1);\n        return (_jsx(\"div\", { class: \"uppy-Dashboard-AddFiles-title\", children: this.props.disableLocalFiles\n                ? this.props.i18n('importFiles')\n                : numberOfAcquirers > 0\n                    ? this.props.i18nArray(`dropPasteImport${camelFMSelectionType}`, {\n                        browseFiles,\n                        browseFolders,\n                        browse: browseFiles,\n                    })\n                    : this.props.i18nArray(`dropPaste${camelFMSelectionType}`, {\n                        browseFiles,\n                        browseFolders,\n                        browse: browseFiles,\n                    }) }));\n    };\n    [Symbol.for('uppy test: disable unused locale key warning')]() {\n        // Those are actually used in `renderDropPasteBrowseTagline` method.\n        this.props.i18nArray('dropPasteBoth');\n        this.props.i18nArray('dropPasteFiles');\n        this.props.i18nArray('dropPasteFolders');\n        this.props.i18nArray('dropPasteImportBoth');\n        this.props.i18nArray('dropPasteImportFiles');\n        this.props.i18nArray('dropPasteImportFolders');\n    }\n    renderAcquirer = (acquirer) => {\n        return (_jsx(\"div\", { className: \"uppy-DashboardTab\", role: \"presentation\", \"data-uppy-acquirer-id\": acquirer.id, children: _jsxs(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn\", role: \"tab\", tabIndex: 0, \"data-cy\": acquirer.id, \"aria-controls\": `uppy-DashboardContent-panel--${acquirer.id}`, \"aria-selected\": this.props.activePickerPanel?.id === acquirer.id, \"data-uppy-super-focusable\": true, onClick: () => this.props.showPanel(acquirer.id), children: [_jsx(\"div\", { className: \"uppy-DashboardTab-inner\", children: acquirer.icon() }), _jsx(\"div\", { className: \"uppy-DashboardTab-name\", children: acquirer.name })] }) }));\n    };\n    renderAcquirers = (acquirers) => {\n        // Group last two buttons, so we don\u2019t end up with\n        // just one button on a new line\n        const acquirersWithoutLastTwo = [...acquirers];\n        const lastTwoAcquirers = acquirersWithoutLastTwo.splice(acquirers.length - 2, acquirers.length);\n        return (_jsxs(_Fragment, { children: [acquirersWithoutLastTwo.map((acquirer) => this.renderAcquirer(acquirer)), _jsx(\"span\", { role: \"presentation\", style: { 'white-space': 'nowrap' }, children: lastTwoAcquirers.map((acquirer) => this.renderAcquirer(acquirer)) })] }));\n    };\n    renderSourcesList = (acquirers, disableLocalFiles) => {\n        const { showNativePhotoCameraButton, showNativeVideoCameraButton } = this.props;\n        let list = [];\n        const myDeviceKey = 'myDevice';\n        if (!disableLocalFiles)\n            list.push({\n                key: myDeviceKey,\n                elements: this.renderMyDeviceAcquirer(),\n            });\n        if (showNativePhotoCameraButton)\n            list.push({\n                key: 'nativePhotoCameraButton',\n                elements: this.renderPhotoCamera(),\n            });\n        if (showNativeVideoCameraButton)\n            list.push({\n                key: 'nativePhotoCameraButton',\n                elements: this.renderVideoCamera(),\n            });\n        list.push(...acquirers.map((acquirer) => ({\n            key: acquirer.id,\n            elements: this.renderAcquirer(acquirer),\n        })));\n        // doesn't make sense to show only a lonely \"My Device\"\n        const hasOnlyMyDevice = list.length === 1 && list[0].key === myDeviceKey;\n        if (hasOnlyMyDevice)\n            list = [];\n        // Group last two buttons, so we don\u2019t end up with\n        // just one button on a new line\n        const listWithoutLastTwo = [...list];\n        const lastTwo = listWithoutLastTwo.splice(list.length - 2, list.length);\n        return (_jsxs(_Fragment, { children: [this.renderDropPasteBrowseTagline(list.length), _jsxs(\"div\", { className: \"uppy-Dashboard-AddFiles-list\", role: \"tablist\", children: [listWithoutLastTwo.map(({ key, elements }) => (_jsx(Fragment, { children: elements }, key))), _jsx(\"span\", { role: \"presentation\", style: { 'white-space': 'nowrap' }, children: lastTwo.map(({ key, elements }) => (_jsx(Fragment, { children: elements }, key))) })] })] }));\n    };\n    renderPoweredByUppy() {\n        const { i18nArray } = this.props;\n        const uppyBranding = (_jsxs(\"span\", { children: [_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon uppy-Dashboard-poweredByIcon\", width: \"11\", height: \"11\", viewBox: \"0 0 11 11\", children: _jsx(\"path\", { d: \"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z\", fillRule: \"evenodd\" }) }), _jsx(\"span\", { className: \"uppy-Dashboard-poweredByUppy\", children: \"Uppy\" })] }));\n        const linkText = i18nArray('poweredBy', { uppy: uppyBranding });\n        return (_jsx(\"a\", { tabIndex: -1, href: \"https://uppy.io\", rel: \"noreferrer noopener\", target: \"_blank\", className: \"uppy-Dashboard-poweredBy\", children: linkText }));\n    }\n    render() {\n        const { showNativePhotoCameraButton, showNativeVideoCameraButton, nativeCameraFacingMode, } = this.props;\n        return (_jsxs(\"div\", { className: \"uppy-Dashboard-AddFiles\", children: [this.renderHiddenInput(false, (ref) => {\n                    this.fileInput = ref;\n                }), this.renderHiddenInput(true, (ref) => {\n                    this.folderInput = ref;\n                }), showNativePhotoCameraButton &&\n                    this.renderHiddenCameraInput('photo', nativeCameraFacingMode, (ref) => {\n                        this.mobilePhotoFileInput = ref;\n                    }), showNativeVideoCameraButton &&\n                    this.renderHiddenCameraInput('video', nativeCameraFacingMode, (ref) => {\n                        this.mobileVideoFileInput = ref;\n                    }), this.renderSourcesList(this.props.acquirers, this.props.disableLocalFiles), _jsxs(\"div\", { className: \"uppy-Dashboard-AddFiles-info\", children: [this.props.note && (_jsx(\"div\", { className: \"uppy-Dashboard-note\", children: this.props.note })), this.props.proudlyDisplayPoweredByUppy && this.renderPoweredByUppy()] })] }));\n    }\n}\nexport default AddFiles;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport { h } from 'preact';\nimport AddFiles from './AddFiles.js';\nconst AddFilesPanel = (props) => {\n    return (_jsxs(\"div\", { className: classNames('uppy-Dashboard-AddFilesPanel', props.className), \"data-uppy-panelType\": \"AddFiles\", \"aria-hidden\": !props.showAddFilesPanel, children: [_jsxs(\"div\", { className: \"uppy-DashboardContent-bar\", children: [_jsx(\"div\", { className: \"uppy-DashboardContent-title\", \n                        // biome-ignore lint/a11y/useSemanticElements: ...\n                        role: \"heading\", \"aria-level\": 1, children: props.i18n('addingMoreFiles') }), _jsx(\"button\", { className: \"uppy-DashboardContent-back\", type: \"button\", onClick: () => props.toggleAddFilesPanel(false), children: props.i18n('back') })] }), _jsx(AddFiles, { ...props })] }));\n};\nexport default AddFilesPanel;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport { h } from 'preact';\nfunction EditorPanel(props) {\n    const file = props.files[props.fileCardFor];\n    const handleCancel = () => {\n        props.uppy.emit('file-editor:cancel', file);\n        props.closeFileEditor();\n    };\n    return (_jsxs(\"div\", { className: classNames('uppy-DashboardContent-panel', props.className), role: \"tabpanel\", \"data-uppy-panelType\": \"FileEditor\", id: \"uppy-DashboardContent-panel--editor\", children: [_jsxs(\"div\", { className: \"uppy-DashboardContent-bar\", children: [_jsx(\"div\", { className: \"uppy-DashboardContent-title\", \n                        // biome-ignore lint/a11y/useSemanticElements: ...\n                        role: \"heading\", \"aria-level\": 1, children: props.i18nArray('editing', {\n                            file: (_jsx(\"span\", { className: \"uppy-DashboardContent-titleFile\", children: file.meta ? file.meta.name : file.name })),\n                        }) }), _jsx(\"button\", { className: \"uppy-DashboardContent-back\", type: \"button\", onClick: handleCancel, children: props.i18n('cancel') }), _jsx(\"button\", { className: \"uppy-DashboardContent-save\", type: \"button\", onClick: props.saveFileEditor, children: props.i18n('save') })] }), _jsx(\"div\", { className: \"uppy-DashboardContent-panelBody\", children: props.editors.map((target) => {\n                    return props.uppy.getPlugin(target.id).render(props.state);\n                }) })] }));\n}\nexport default EditorPanel;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport { nanoid } from 'nanoid/non-secure';\nimport { h } from 'preact';\nimport { useCallback, useEffect, useState } from 'preact/hooks';\nimport getFileTypeIcon from '../../utils/getFileTypeIcon.js';\nimport ignoreEvent from '../../utils/ignoreEvent.js';\nimport FilePreview from '../FilePreview.js';\nimport RenderMetaFields from './RenderMetaFields.js';\nexport default function FileCard(props) {\n    const { files, fileCardFor, toggleFileCard, saveFileCard, metaFields, requiredMetaFields, openFileEditor, i18n, i18nArray, className, canEditFile, } = props;\n    const getMetaFields = () => {\n        return typeof metaFields === 'function'\n            ? metaFields(files[fileCardFor])\n            : metaFields;\n    };\n    const file = files[fileCardFor];\n    const computedMetaFields = getMetaFields() ?? [];\n    const showEditButton = canEditFile(file);\n    const storedMetaData = {};\n    computedMetaFields.forEach((field) => {\n        storedMetaData[field.id] = file.meta[field.id] ?? '';\n    });\n    const [formState, setFormState] = useState(storedMetaData);\n    const handleSave = useCallback((ev) => {\n        ev.preventDefault();\n        saveFileCard(formState, fileCardFor);\n    }, [saveFileCard, formState, fileCardFor]);\n    const updateMeta = (newVal, name) => {\n        setFormState({\n            ...formState,\n            [name]: newVal,\n        });\n    };\n    const handleCancel = () => {\n        toggleFileCard(false);\n    };\n    const [form] = useState(() => {\n        const formEl = document.createElement('form');\n        formEl.setAttribute('tabindex', '-1');\n        formEl.id = nanoid();\n        return formEl;\n    });\n    useEffect(() => {\n        document.body.appendChild(form);\n        form.addEventListener('submit', handleSave);\n        return () => {\n            form.removeEventListener('submit', handleSave);\n            document.body.removeChild(form);\n        };\n    }, [form, handleSave]);\n    return (\n    // biome-ignore lint/a11y/noStaticElementInteractions: ...\n    _jsxs(\"div\", { className: classNames('uppy-Dashboard-FileCard', className), \"data-uppy-panelType\": \"FileCard\", onDragOver: ignoreEvent, onDragLeave: ignoreEvent, onDrop: ignoreEvent, onPaste: ignoreEvent, children: [_jsxs(\"div\", { className: \"uppy-DashboardContent-bar\", children: [_jsx(\"div\", { className: \"uppy-DashboardContent-title\", \n                        // biome-ignore lint/a11y/useSemanticElements: ...\n                        role: \"heading\", \"aria-level\": 1, children: i18nArray('editing', {\n                            file: (_jsx(\"span\", { className: \"uppy-DashboardContent-titleFile\", children: file.meta ? file.meta.name : file.name })),\n                        }) }), _jsx(\"button\", { className: \"uppy-DashboardContent-back\", type: \"button\", form: form.id, title: i18n('finishEditingFile'), onClick: handleCancel, children: i18n('cancel') })] }), _jsxs(\"div\", { className: \"uppy-Dashboard-FileCard-inner\", children: [_jsxs(\"div\", { className: \"uppy-Dashboard-FileCard-preview\", style: { backgroundColor: getFileTypeIcon(file.type).color }, children: [_jsx(FilePreview, { file: file }), showEditButton && (_jsx(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit\", onClick: (event) => {\n                                    // When opening the image editor we want to save any meta fields changes.\n                                    // Otherwise it's confusing for the user to click save in the editor,\n                                    // but the changes here are discarded. This bypasses validation,\n                                    // but we are okay with that.\n                                    handleSave(event);\n                                    openFileEditor(file);\n                                }, children: i18n('editImage') }))] }), _jsx(\"div\", { className: \"uppy-Dashboard-FileCard-info\", children: _jsx(RenderMetaFields, { computedMetaFields: computedMetaFields, requiredMetaFields: requiredMetaFields, updateMeta: updateMeta, form: form, formState: formState }) }), _jsxs(\"div\", { className: \"uppy-Dashboard-FileCard-actions\", children: [_jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn\", \n                                // If `form` attribute is supported, we want a submit button to trigger the form validation.\n                                // Otherwise, fallback to a classic button with a onClick event handler.\n                                type: \"submit\", form: form.id, children: i18n('saveChanges') }), _jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn\", type: \"button\", onClick: handleCancel, form: form.id, children: i18n('cancel') })] })] })] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { h } from 'preact';\nfunction iconImage() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsxs(\"g\", { fill: \"#686DE0\", fillRule: \"evenodd\", children: [_jsx(\"path\", { d: \"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z\", fillRule: \"nonzero\" }), _jsx(\"path\", { d: \"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z\", fillRule: \"nonzero\" }), _jsx(\"circle\", { cx: \"7.5\", cy: \"9.5\", r: \"1.5\" })] }) }));\n}\nfunction iconAudio() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsx(\"path\", { d: \"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z\", fill: \"#049BCF\", fillRule: \"nonzero\" }) }));\n}\nfunction iconVideo() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsx(\"path\", { d: \"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z\", fill: \"#19AF67\", fillRule: \"nonzero\" }) }));\n}\nfunction iconPDF() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsx(\"path\", { d: \"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z\", fill: \"#E2514A\", fillRule: \"nonzero\" }) }));\n}\nfunction iconArchive() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsx(\"path\", { d: \"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z\", fill: \"#00C469\", fillRule: \"nonzero\" }) }));\n}\nfunction iconFile() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsxs(\"g\", { fill: \"#A7AFB7\", fillRule: \"nonzero\", children: [_jsx(\"path\", { d: \"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z\" }), _jsx(\"path\", { d: \"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z\" })] }) }));\n}\nfunction iconText() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsx(\"path\", { d: \"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z\", fill: \"#5A5E69\", fillRule: \"nonzero\" }) }));\n}\nexport default function getIconByMime(fileType) {\n    const defaultChoice = {\n        color: '#838999',\n        icon: iconFile(),\n    };\n    if (!fileType)\n        return defaultChoice;\n    const fileTypeGeneral = fileType.split('/')[0];\n    const fileTypeSpecific = fileType.split('/')[1];\n    // Text\n    if (fileTypeGeneral === 'text') {\n        return {\n            color: '#5a5e69',\n            icon: iconText(),\n        };\n    }\n    // Image\n    if (fileTypeGeneral === 'image') {\n        return {\n            color: '#686de0',\n            icon: iconImage(),\n        };\n    }\n    // Audio\n    if (fileTypeGeneral === 'audio') {\n        return {\n            color: '#068dbb',\n            icon: iconAudio(),\n        };\n    }\n    // Video\n    if (fileTypeGeneral === 'video') {\n        return {\n            color: '#19af67',\n            icon: iconVideo(),\n        };\n    }\n    // PDF\n    if (fileTypeGeneral === 'application' && fileTypeSpecific === 'pdf') {\n        return {\n            color: '#e25149',\n            icon: iconPDF(),\n        };\n    }\n    // Archive\n    const archiveTypes = [\n        'zip',\n        'x-7z-compressed',\n        'x-zip-compressed',\n        'x-rar-compressed',\n        'x-tar',\n        'x-gzip',\n        'x-apple-diskimage',\n    ];\n    if (fileTypeGeneral === 'application' &&\n        archiveTypes.indexOf(fileTypeSpecific) !== -1) {\n        return {\n            color: '#00C469',\n            icon: iconArchive(),\n        };\n    }\n    return defaultChoice;\n}\n", "// ignore drop/paste events if they are not in input or textarea \u2014\n// otherwise when Url plugin adds drop/paste listeners to this.el,\n// draging UI elements or pasting anything into any field triggers those events \u2014\n// Url treats them as URLs that need to be imported\nfunction ignoreEvent(ev) {\n    const { tagName } = ev.target;\n    if (tagName === 'INPUT' || tagName === 'TEXTAREA') {\n        ev.stopPropagation();\n        return;\n    }\n    ev.preventDefault();\n    ev.stopPropagation();\n}\nexport default ignoreEvent;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { h } from 'preact';\nimport getFileTypeIcon from '../utils/getFileTypeIcon.js';\nexport default function FilePreview(props) {\n    const { file } = props;\n    if (file.preview) {\n        return (_jsx(\"img\", { draggable: false, className: \"uppy-Dashboard-Item-previewImg\", alt: file.name, src: file.preview }));\n    }\n    const { color, icon } = getFileTypeIcon(file.type);\n    return (_jsxs(\"div\", { className: \"uppy-Dashboard-Item-previewIconWrap\", children: [_jsx(\"span\", { className: \"uppy-Dashboard-Item-previewIcon\", style: { color }, children: icon }), _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-Dashboard-Item-previewIconBg\", width: \"58\", height: \"76\", viewBox: \"0 0 58 76\", children: _jsx(\"rect\", { fill: \"#FFF\", width: \"58\", height: \"76\", rx: \"3\", fillRule: \"evenodd\" }) })] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { h } from 'preact';\nexport default function RenderMetaFields(props) {\n    const { computedMetaFields, requiredMetaFields, updateMeta, form, formState, } = props;\n    const fieldCSSClasses = {\n        text: 'uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input',\n    };\n    return computedMetaFields.map((field) => {\n        const id = `uppy-Dashboard-FileCard-input-${field.id}`;\n        const required = requiredMetaFields.includes(field.id);\n        return (_jsxs(\"fieldset\", { className: \"uppy-Dashboard-FileCard-fieldset\", children: [_jsx(\"label\", { className: \"uppy-Dashboard-FileCard-label\", htmlFor: id, children: field.name }), field.render !== undefined ? (field.render({\n                    value: formState[field.id],\n                    onChange: (newVal) => updateMeta(newVal, field.id),\n                    fieldCSSClasses,\n                    required,\n                    form: form.id,\n                }, h)) : (_jsx(\"input\", { className: fieldCSSClasses.text, id: id, form: form.id, type: field.type || 'text', required: required, value: formState[field.id], placeholder: field.placeholder, onInput: (ev) => updateMeta(ev.target.value, field.id), \"data-uppy-super-focusable\": true }))] }, field.id));\n    });\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\n// biome-ignore lint/style/useImportType: h is not a type\nimport { Component, h } from 'preact';\nimport { shallowEqualObjects } from 'shallow-equal';\nimport Buttons from './Buttons/index.js';\nimport FileInfo from './FileInfo/index.js';\nimport FilePreviewAndLink from './FilePreviewAndLink/index.js';\nimport FileProgress from './FileProgress/index.js';\nexport default class FileItem extends Component {\n    componentDidMount() {\n        const { file } = this.props;\n        if (!file.preview) {\n            this.props.handleRequestThumbnail(file);\n        }\n    }\n    shouldComponentUpdate(nextProps) {\n        return !shallowEqualObjects(this.props, nextProps);\n    }\n    // VirtualList mounts FileItems again and they emit `thumbnail:request`\n    // Otherwise thumbnails are broken or missing after Golden Retriever restores files\n    componentDidUpdate() {\n        const { file } = this.props;\n        if (!file.preview) {\n            this.props.handleRequestThumbnail(file);\n        }\n    }\n    componentWillUnmount() {\n        const { file } = this.props;\n        if (!file.preview) {\n            this.props.handleCancelThumbnail(file);\n        }\n    }\n    render() {\n        const { file } = this.props;\n        const isProcessing = file.progress.preprocess || file.progress.postprocess;\n        const isUploaded = !!file.progress.uploadComplete && !isProcessing && !file.error;\n        const uploadInProgressOrComplete = !!file.progress.uploadStarted || !!isProcessing;\n        const uploadInProgress = (file.progress.uploadStarted && !file.progress.uploadComplete) ||\n            isProcessing;\n        const error = file.error || false;\n        // File that Golden Retriever was able to partly restore (only meta, not blob),\n        // users still need to re-add it, so it\u2019s a ghost\n        const { isGhost } = file;\n        let showRemoveButton = this.props.individualCancellation\n            ? !isUploaded\n            : !uploadInProgress && !isUploaded;\n        if (isUploaded && this.props.showRemoveButtonAfterComplete) {\n            showRemoveButton = true;\n        }\n        const dashboardItemClass = classNames({\n            'uppy-Dashboard-Item': true,\n            'is-inprogress': uploadInProgress && !this.props.recoveredState,\n            'is-processing': isProcessing,\n            'is-complete': isUploaded,\n            'is-error': !!error,\n            'is-resumable': this.props.resumableUploads,\n            'is-noIndividualCancellation': !this.props.individualCancellation,\n            'is-ghost': isGhost,\n        });\n        return (_jsxs(\"div\", { className: dashboardItemClass, id: `uppy_${file.id}`, role: this.props.role, children: [_jsxs(\"div\", { className: \"uppy-Dashboard-Item-preview\", children: [_jsx(FilePreviewAndLink, { file: file, showLinkToFileUploadResult: this.props.showLinkToFileUploadResult, i18n: this.props.i18n, toggleFileCard: this.props.toggleFileCard, metaFields: this.props.metaFields }), _jsx(FileProgress, { uppy: this.props.uppy, file: file, error: error, isUploaded: isUploaded, hideRetryButton: this.props.hideRetryButton, hideCancelButton: this.props.hideCancelButton, hidePauseResumeButton: this.props.hidePauseResumeButton, recoveredState: this.props.recoveredState, resumableUploads: this.props.resumableUploads, individualCancellation: this.props.individualCancellation, i18n: this.props.i18n })] }), _jsxs(\"div\", { className: \"uppy-Dashboard-Item-fileInfoAndButtons\", children: [_jsx(FileInfo, { file: file, containerWidth: this.props.containerWidth, containerHeight: this.props.containerHeight, i18n: this.props.i18n, toggleAddFilesPanel: this.props.toggleAddFilesPanel, toggleFileCard: this.props.toggleFileCard, metaFields: this.props.metaFields, isSingleFile: this.props.isSingleFile }), _jsx(Buttons, { file: file, metaFields: this.props.metaFields, showLinkToFileUploadResult: this.props.showLinkToFileUploadResult, showRemoveButton: showRemoveButton, canEditFile: this.props.canEditFile, uploadInProgressOrComplete: uploadInProgressOrComplete, toggleFileCard: this.props.toggleFileCard, openFileEditor: this.props.openFileEditor, uppy: this.props.uppy, i18n: this.props.i18n })] })] }));\n    }\n}\n", "export type validArrayValue = any[] | null | undefined;\n\nexport default function shallowEqualArrays(\n  arrA: validArrayValue,\n  arrB: validArrayValue\n): boolean {\n  if (arrA === arrB) {\n    return true;\n  }\n\n  if (!arrA || !arrB) {\n    return false;\n  }\n\n  const len = arrA.length;\n\n  if (arrB.length !== len) {\n    return false;\n  }\n\n  for (let i = 0; i < len; i++) {\n    if (arrA[i] !== arrB[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n", "export type validObjectValue = Record<string, any> | null | undefined;\n\nexport default function shallowEqualObjects<T>(\n  objA: validObjectValue,\n  objB: validObjectValue\n): boolean {\n  if (objA === objB) {\n    return true;\n  }\n\n  if (!objA || !objB) {\n    return false;\n  }\n\n  const aKeys = Object.keys(objA);\n  const bKeys = Object.keys(objB);\n  const len = aKeys.length;\n\n  if (bKeys.length !== len) {\n    return false;\n  }\n\n  for (let i = 0; i < len; i++) {\n    const key = aKeys[i];\n\n    if (\n      objA[key] !== objB[key] ||\n      !Object.prototype.hasOwnProperty.call(objB, key)\n    ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n", "import shallowEqualArrays from \"./arrays\";\nimport shallowEqualObjects from \"./objects\";\n\ntype Comparable = Record<string, any> | any[] | null | undefined;\n\nfunction shallowEqual<T extends Comparable>(a: T, b: T): boolean {\n  const aIsArr = Array.isArray(a);\n  const bIsArr = Array.isArray(b);\n\n  if (aIsArr !== bIsArr) {\n    return false;\n  }\n\n  if (aIsArr && bIsArr) {\n    return shallowEqualArrays(a, b);\n  }\n\n  return shallowEqualObjects(a, b);\n}\n\nexport { shallowEqual, shallowEqualObjects, shallowEqualArrays };\n", "/**\n * Copies text to clipboard by creating an almost invisible textarea,\n * adding text there, then running execCommand('copy').\n * Falls back to prompt() when the easy way fails (hello, Safari!)\n * From http://stackoverflow.com/a/30810322\n *\n * @param {string} textToCopy\n * @param {string} fallbackString\n * @returns {Promise}\n */\nexport default function copyToClipboard(textToCopy, fallbackString = 'Copy the URL below') {\n    return new Promise((resolve) => {\n        const textArea = document.createElement('textarea');\n        textArea.setAttribute('style', {\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            width: '2em',\n            height: '2em',\n            padding: 0,\n            border: 'none',\n            outline: 'none',\n            boxShadow: 'none',\n            background: 'transparent',\n        });\n        textArea.value = textToCopy;\n        document.body.appendChild(textArea);\n        textArea.select();\n        const magicCopyFailed = () => {\n            document.body.removeChild(textArea);\n            window.prompt(fallbackString, textToCopy);\n            resolve();\n        };\n        try {\n            const successful = document.execCommand('copy');\n            if (!successful) {\n                return magicCopyFailed();\n            }\n            document.body.removeChild(textArea);\n            return resolve();\n        }\n        catch (_err) {\n            document.body.removeChild(textArea);\n            return magicCopyFailed();\n        }\n    });\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { h } from 'preact';\nimport copyToClipboard from '../../../utils/copyToClipboard.js';\nfunction EditButton({ file, uploadInProgressOrComplete, metaFields, canEditFile, i18n, onClick, }) {\n    if ((!uploadInProgressOrComplete && metaFields && metaFields.length > 0) ||\n        (!uploadInProgressOrComplete && canEditFile(file))) {\n        return (_jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit\", type: \"button\", \"aria-label\": i18n('editFileWithFilename', { file: file.meta.name }), title: i18n('editFileWithFilename', { file: file.meta.name }), onClick: () => onClick(), children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"14\", height: \"14\", viewBox: \"0 0 14 14\", children: _jsxs(\"g\", { fillRule: \"evenodd\", children: [_jsx(\"path\", { d: \"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z\", fillRule: \"nonzero\" }), _jsx(\"rect\", { x: \"1\", y: \"12.293\", width: \"11\", height: \"1\", rx: \".5\" }), _jsx(\"path\", { fillRule: \"nonzero\", d: \"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z\" })] }) }) }));\n    }\n    return null;\n}\nfunction RemoveButton({ i18n, onClick, file, }) {\n    return (_jsx(\"button\", { className: \"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove\", type: \"button\", \"aria-label\": i18n('removeFile', { file: file.meta.name }), title: i18n('removeFile', { file: file.meta.name }), onClick: () => onClick(), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"18\", height: \"18\", viewBox: \"0 0 18 18\", children: [_jsx(\"path\", { d: \"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z\" }), _jsx(\"path\", { fill: \"#FFF\", d: \"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z\" })] }) }));\n}\nfunction CopyLinkButton({ file, uppy, i18n, }) {\n    const copyLinkToClipboard = (event) => {\n        copyToClipboard(file.uploadURL, i18n('copyLinkToClipboardFallback'))\n            .then(() => {\n            uppy.log('Link copied to clipboard.');\n            uppy.info(i18n('copyLinkToClipboardSuccess'), 'info', 3000);\n        })\n            .catch(uppy.log)\n            // avoid losing focus\n            .then(() => event.target.focus({ preventScroll: true }));\n    };\n    return (_jsx(\"button\", { className: \"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink\", type: \"button\", \"aria-label\": i18n('copyLink'), title: i18n('copyLink'), onClick: (event) => copyLinkToClipboard(event), children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"14\", height: \"14\", viewBox: \"0 0 14 12\", children: _jsx(\"path\", { d: \"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z\" }) }) }));\n}\nexport default function Buttons(props) {\n    const { uppy, file, uploadInProgressOrComplete, canEditFile, metaFields, showLinkToFileUploadResult, showRemoveButton, i18n, toggleFileCard, openFileEditor, } = props;\n    const editAction = () => {\n        if (metaFields && metaFields.length > 0) {\n            toggleFileCard(true, file.id);\n        }\n        else {\n            openFileEditor(file);\n        }\n    };\n    return (_jsxs(\"div\", { className: \"uppy-Dashboard-Item-actionWrapper\", children: [_jsx(EditButton, { i18n: i18n, file: file, uploadInProgressOrComplete: uploadInProgressOrComplete, canEditFile: canEditFile, metaFields: metaFields, onClick: editAction }), showLinkToFileUploadResult && file.uploadURL ? (_jsx(CopyLinkButton, { file: file, uppy: uppy, i18n: i18n })) : null, showRemoveButton ? (_jsx(RemoveButton, { i18n: i18n, file: file, onClick: () => uppy.removeFile(file.id) })) : null] }));\n}\n", "import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport prettierBytes from '@transloadit/prettier-bytes';\nimport truncateString from '@uppy/utils/lib/truncateString';\nimport { h } from 'preact';\nimport MetaErrorMessage from '../MetaErrorMessage.js';\nconst renderFileName = (props) => {\n    const { author, name } = props.file.meta;\n    function getMaxNameLength() {\n        if (props.isSingleFile && props.containerHeight >= 350) {\n            return 90;\n        }\n        if (props.containerWidth <= 352) {\n            return 35;\n        }\n        if (props.containerWidth <= 576) {\n            return 60;\n        }\n        // When `author` is present, we want to make sure\n        // the file name fits on one line so we can place\n        // the author on the second line.\n        return author ? 20 : 30;\n    }\n    return (_jsx(\"div\", { className: \"uppy-Dashboard-Item-name\", title: name, children: truncateString(name, getMaxNameLength()) }));\n};\nconst renderAuthor = (props) => {\n    const { author } = props.file.meta;\n    const providerName = props.file.remote?.providerName;\n    const dot = `\\u00B7`;\n    if (!author) {\n        return null;\n    }\n    return (_jsxs(\"div\", { className: \"uppy-Dashboard-Item-author\", children: [_jsx(\"a\", { href: `${author.url}?utm_source=Companion&utm_medium=referral`, target: \"_blank\", rel: \"noopener noreferrer\", children: truncateString(author.name, 13) }), providerName ? (_jsxs(_Fragment, { children: [` ${dot} `, providerName, ` ${dot} `] })) : null] }));\n};\nconst renderFileSize = (props) => props.file.size && (_jsx(\"div\", { className: \"uppy-Dashboard-Item-statusSize\", children: prettierBytes(props.file.size) }));\nconst ReSelectButton = (props) => props.file.isGhost && (_jsxs(\"span\", { children: [' \\u2022 ', _jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect\", type: \"button\", onClick: () => props.toggleAddFilesPanel(true), children: props.i18n('reSelect') })] }));\nconst ErrorButton = ({ file, onClick, }) => {\n    if (file.error) {\n        return (_jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails\", \"aria-label\": file.error, \"data-microtip-position\": \"bottom\", \"data-microtip-size\": \"medium\", onClick: onClick, type: \"button\", children: \"?\" }));\n    }\n    return null;\n};\nexport default function FileInfo(props) {\n    const { file, i18n, toggleFileCard, metaFields, toggleAddFilesPanel, isSingleFile, containerHeight, containerWidth, } = props;\n    return (_jsxs(\"div\", { className: \"uppy-Dashboard-Item-fileInfo\", \"data-uppy-file-source\": file.source, children: [_jsxs(\"div\", { className: \"uppy-Dashboard-Item-fileName\", children: [renderFileName({\n                        file,\n                        isSingleFile,\n                        containerHeight,\n                        containerWidth,\n                    }), _jsx(ErrorButton, { file: file, onClick: () => alert(file.error) })] }), _jsxs(\"div\", { className: \"uppy-Dashboard-Item-status\", children: [renderAuthor({ file }), renderFileSize({ file }), ReSelectButton({ file, toggleAddFilesPanel, i18n })] }), _jsx(MetaErrorMessage, { file: file, i18n: i18n, toggleFileCard: toggleFileCard, metaFields: metaFields })] }));\n}\n", "/**\n * Truncates a string to the given number of chars (maxLength) by inserting '...' in the middle of that string.\n * Partially taken from https://stackoverflow.com/a/5723274/3192470.\n */\nconst separator = '...';\nexport default function truncateString(string, maxLength) {\n    // Return the empty string if maxLength is zero\n    if (maxLength === 0)\n        return '';\n    // Return original string if it's already shorter than maxLength\n    if (string.length <= maxLength)\n        return string;\n    // Return truncated substring appended of the ellipsis char if string can't be meaningfully truncated\n    if (maxLength <= separator.length + 1)\n        return `${string.slice(0, maxLength - 1)}\u2026`;\n    const charsToShow = maxLength - separator.length;\n    const frontChars = Math.ceil(charsToShow / 2);\n    const backChars = Math.floor(charsToShow / 2);\n    return string.slice(0, frontChars) + separator + string.slice(-backChars);\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { h } from 'preact';\nconst metaFieldIdToName = (metaFieldId, metaFields) => {\n    const fields = typeof metaFields === 'function' ? metaFields() : metaFields;\n    const field = fields.filter((f) => f.id === metaFieldId);\n    return field[0].name;\n};\nexport default function MetaErrorMessage(props) {\n    const { file, toggleFileCard, i18n, metaFields } = props;\n    const { missingRequiredMetaFields } = file;\n    if (!missingRequiredMetaFields?.length) {\n        return null;\n    }\n    const metaFieldsString = missingRequiredMetaFields\n        .map((missingMetaField) => metaFieldIdToName(missingMetaField, metaFields))\n        .join(', ');\n    return (_jsxs(\"div\", { className: \"uppy-Dashboard-Item-errorMessage\", children: [i18n('missingRequiredMetaFields', {\n                smart_count: missingRequiredMetaFields.length,\n                fields: metaFieldsString,\n            }), ' ', _jsx(\"button\", { type: \"button\", class: \"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn\", onClick: () => toggleFileCard(true, file.id), children: i18n('editFile') })] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { h } from 'preact';\nimport getFileTypeIcon from '../../../utils/getFileTypeIcon.js';\nimport FilePreview from '../../FilePreview.js';\nimport MetaErrorMessage from '../MetaErrorMessage.js';\nexport default function FilePreviewAndLink(props) {\n    const { file, i18n, toggleFileCard, metaFields, showLinkToFileUploadResult } = props;\n    const white = 'rgba(255, 255, 255, 0.5)';\n    const previewBackgroundColor = file.preview\n        ? white\n        : getFileTypeIcon(file.type).color;\n    return (_jsxs(\"div\", { className: \"uppy-Dashboard-Item-previewInnerWrap\", style: { backgroundColor: previewBackgroundColor }, children: [showLinkToFileUploadResult && file.uploadURL && (_jsx(\"a\", { className: \"uppy-Dashboard-Item-previewLink\", href: file.uploadURL, rel: \"noreferrer noopener\", target: \"_blank\", \"aria-label\": file.meta.name, children: _jsx(\"span\", { hidden: true, children: file.meta.name }) })), _jsx(FilePreview, { file: file }), _jsx(MetaErrorMessage, { file: file, i18n: i18n, toggleFileCard: toggleFileCard, metaFields: metaFields })] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { h } from 'preact';\nfunction onPauseResumeCancelRetry(props) {\n    if (props.isUploaded)\n        return;\n    if (props.error && !props.hideRetryButton) {\n        props.uppy.retryUpload(props.file.id);\n        return;\n    }\n    if (props.resumableUploads && !props.hidePauseResumeButton) {\n        props.uppy.pauseResume(props.file.id);\n    }\n    else if (props.individualCancellation && !props.hideCancelButton) {\n        props.uppy.removeFile(props.file.id);\n    }\n}\nfunction progressIndicatorTitle(props) {\n    if (props.isUploaded) {\n        return props.i18n('uploadComplete');\n    }\n    if (props.error) {\n        return props.i18n('retryUpload');\n    }\n    if (props.resumableUploads) {\n        if (props.file.isPaused) {\n            return props.i18n('resumeUpload');\n        }\n        return props.i18n('pauseUpload');\n    }\n    if (props.individualCancellation) {\n        return props.i18n('cancelUpload');\n    }\n    return '';\n}\nfunction ProgressIndicatorButton(props) {\n    return (_jsx(\"div\", { className: \"uppy-Dashboard-Item-progress\", children: _jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator\", type: \"button\", \"aria-label\": progressIndicatorTitle(props), title: progressIndicatorTitle(props), onClick: () => onPauseResumeCancelRetry(props), children: props.children }) }));\n}\nfunction ProgressCircleContainer({ children }) {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", width: \"70\", height: \"70\", viewBox: \"0 0 36 36\", className: \"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle\", children: children }));\n}\nfunction ProgressCircle({ progress }) {\n    // circle length equals 2 * PI * R\n    const circleLength = 2 * Math.PI * 15;\n    return (_jsxs(\"g\", { children: [_jsx(\"circle\", { className: \"uppy-Dashboard-Item-progressIcon--bg\", r: \"15\", cx: \"18\", cy: \"18\", \"stroke-width\": \"2\", fill: \"none\" }), _jsx(\"circle\", { className: \"uppy-Dashboard-Item-progressIcon--progress\", r: \"15\", cx: \"18\", cy: \"18\", transform: \"rotate(-90, 18, 18)\", fill: \"none\", \"stroke-width\": \"2\", \"stroke-dasharray\": circleLength, \"stroke-dashoffset\": circleLength - (circleLength / 100) * progress })] }));\n}\nexport default function FileProgress(props) {\n    // Nothing if upload has not started\n    if (!props.file.progress.uploadStarted) {\n        return null;\n    }\n    if (props.file.progress.percentage === undefined) {\n        return null;\n    }\n    // Green checkmark when complete\n    if (props.isUploaded) {\n        return (_jsx(\"div\", { className: \"uppy-Dashboard-Item-progress\", children: _jsx(\"div\", { className: \"uppy-Dashboard-Item-progressIndicator\", children: _jsxs(ProgressCircleContainer, { children: [_jsx(\"circle\", { r: \"15\", cx: \"18\", cy: \"18\", fill: \"#1bb240\" }), _jsx(\"polygon\", { className: \"uppy-Dashboard-Item-progressIcon--check\", transform: \"translate(2, 3)\", points: \"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634\" })] }) }) }));\n    }\n    if (props.recoveredState) {\n        return null;\n    }\n    // Retry button for error\n    if (props.error && !props.hideRetryButton) {\n        return (_jsx(ProgressIndicatorButton, { ...props, children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry\", width: \"28\", height: \"31\", viewBox: \"0 0 16 19\", children: [_jsx(\"path\", { d: \"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z\" }), _jsx(\"path\", { d: \"M7.9 3H10v2H7.9z\" }), _jsx(\"path\", { d: \"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z\" }), _jsx(\"path\", { d: \"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z\" })] }) }));\n    }\n    // Pause/resume button for resumable uploads\n    if (props.resumableUploads && !props.hidePauseResumeButton) {\n        return (_jsx(ProgressIndicatorButton, { ...props, children: _jsxs(ProgressCircleContainer, { children: [_jsx(ProgressCircle, { progress: props.file.progress.percentage }), props.file.isPaused ? (_jsx(\"polygon\", { className: \"uppy-Dashboard-Item-progressIcon--play\", transform: \"translate(3, 3)\", points: \"12 20 12 10 20 15\" })) : (_jsxs(\"g\", { className: \"uppy-Dashboard-Item-progressIcon--pause\", transform: \"translate(14.5, 13)\", children: [_jsx(\"rect\", { x: \"0\", y: \"0\", width: \"2\", height: \"10\", rx: \"0\" }), _jsx(\"rect\", { x: \"5\", y: \"0\", width: \"2\", height: \"10\", rx: \"0\" })] }))] }) }));\n    }\n    // Cancel button for non-resumable uploads if individualCancellation is supported (not bundled)\n    if (!props.resumableUploads &&\n        props.individualCancellation &&\n        !props.hideCancelButton) {\n        return (_jsx(ProgressIndicatorButton, { ...props, children: _jsxs(ProgressCircleContainer, { children: [_jsx(ProgressCircle, { progress: props.file.progress.percentage }), _jsx(\"polygon\", { className: \"cancel\", transform: \"translate(2, 2)\", points: \"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12\" })] }) }));\n    }\n    // Just progress when buttons are disabled\n    return (_jsx(\"div\", { className: \"uppy-Dashboard-Item-progress\", children: _jsx(\"div\", { className: \"uppy-Dashboard-Item-progressIndicator\", children: _jsx(ProgressCircleContainer, { children: _jsx(ProgressCircle, { progress: props.file.progress.percentage }) }) }) }));\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\n// @ts-ignore untyped\nimport VirtualList from '@uppy/utils/lib/VirtualList';\nimport { h } from 'preact';\nimport { useMemo } from 'preact/hooks';\nimport FileItem from './FileItem/index.js';\nfunction chunks(list, size) {\n    const chunked = [];\n    let currentChunk = [];\n    list.forEach((item) => {\n        if (currentChunk.length < size) {\n            currentChunk.push(item);\n        }\n        else {\n            chunked.push(currentChunk);\n            currentChunk = [item];\n        }\n    });\n    if (currentChunk.length)\n        chunked.push(currentChunk);\n    return chunked;\n}\nexport default function FileList({ id, i18n, uppy, files, resumableUploads, hideRetryButton, hidePauseResumeButton, hideCancelButton, showLinkToFileUploadResult, showRemoveButtonAfterComplete, metaFields, isSingleFile, toggleFileCard, handleRequestThumbnail, handleCancelThumbnail, recoveredState, individualCancellation, itemsPerRow, openFileEditor, canEditFile, toggleAddFilesPanel, containerWidth, containerHeight, }) {\n    // It's not great that this is hardcoded!\n    // It's ESPECIALLY not great that this is checking against `itemsPerRow`!\n    const rowHeight = itemsPerRow === 1\n        ? // Mobile\n            71\n        : // 190px height + 2 * 5px margin\n            200;\n    // Sort files by file.isGhost, ghost files first, only if recoveredState is present\n    const rows = useMemo(() => {\n        const sortByGhostComesFirst = (file1, file2) => Number(files[file2].isGhost) - Number(files[file1].isGhost);\n        const fileIds = Object.keys(files);\n        if (recoveredState)\n            fileIds.sort(sortByGhostComesFirst);\n        return chunks(fileIds, itemsPerRow);\n    }, [files, itemsPerRow, recoveredState]);\n    const renderRow = (row) => (_jsx(\"div\", { class: \"uppy-Dashboard-filesInner\", \n        // The `role=\"presentation` attribute ensures that the list items are properly\n        // associated with the `VirtualList` element.\n        role: \"presentation\", children: row.map((fileID) => (_jsx(FileItem, { uppy: uppy, \n            // FIXME This is confusing, it's actually the Dashboard's plugin ID\n            id: id, \n            // TODO move this to context\n            i18n: i18n, \n            // features\n            resumableUploads: resumableUploads, individualCancellation: individualCancellation, \n            // visual options\n            hideRetryButton: hideRetryButton, hidePauseResumeButton: hidePauseResumeButton, hideCancelButton: hideCancelButton, showLinkToFileUploadResult: showLinkToFileUploadResult, showRemoveButtonAfterComplete: showRemoveButtonAfterComplete, metaFields: metaFields, recoveredState: recoveredState, isSingleFile: isSingleFile, containerWidth: containerWidth, containerHeight: containerHeight, \n            // callbacks\n            toggleFileCard: toggleFileCard, handleRequestThumbnail: handleRequestThumbnail, handleCancelThumbnail: handleCancelThumbnail, role: \"listitem\", openFileEditor: openFileEditor, canEditFile: canEditFile, toggleAddFilesPanel: toggleAddFilesPanel, file: files[fileID] }, fileID))) }, row[0]));\n    if (isSingleFile) {\n        return _jsx(\"div\", { class: \"uppy-Dashboard-files\", children: renderRow(rows[0]) });\n    }\n    return (_jsx(VirtualList, { class: \"uppy-Dashboard-files\", role: \"list\", data: rows, renderRow: renderRow, rowHeight: rowHeight }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport { h } from 'preact';\nimport { useRef } from 'preact/hooks';\nimport ignoreEvent from '../utils/ignoreEvent.js';\nfunction PickerPanelContent({ activePickerPanel, className, hideAllPanels, i18n, state, uppy, }) {\n    const ref = useRef(null);\n    return (_jsxs(\"div\", { className: classNames('uppy-DashboardContent-panel', className), role: \"tabpanel\", \"data-uppy-panelType\": \"PickerPanel\", id: `uppy-DashboardContent-panel--${activePickerPanel.id}`, onDragOver: ignoreEvent, onDragLeave: ignoreEvent, onDrop: ignoreEvent, onPaste: ignoreEvent, children: [_jsxs(\"div\", { className: \"uppy-DashboardContent-bar\", children: [_jsx(\"div\", { className: \"uppy-DashboardContent-title\", \n                        // biome-ignore lint/a11y/useSemanticElements: ...\n                        role: \"heading\", \"aria-level\": 1, children: i18n('importFrom', { name: activePickerPanel.name }) }), _jsx(\"button\", { className: \"uppy-DashboardContent-back\", type: \"button\", onClick: hideAllPanels, children: i18n('cancel') })] }), _jsx(\"div\", { ref: ref, className: \"uppy-DashboardContent-panelBody\", children: uppy.getPlugin(activePickerPanel.id).render(state, ref.current) })] }));\n}\nexport default PickerPanelContent;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { h } from 'preact';\nconst uploadStates = {\n    STATE_ERROR: 'error',\n    STATE_WAITING: 'waiting',\n    STATE_PREPROCESSING: 'preprocessing',\n    STATE_UPLOADING: 'uploading',\n    STATE_POSTPROCESSING: 'postprocessing',\n    STATE_COMPLETE: 'complete',\n    STATE_PAUSED: 'paused',\n};\nfunction getUploadingState(isAllErrored, isAllComplete, isAllPaused, files = {}) {\n    if (isAllErrored) {\n        return uploadStates.STATE_ERROR;\n    }\n    if (isAllComplete) {\n        return uploadStates.STATE_COMPLETE;\n    }\n    if (isAllPaused) {\n        return uploadStates.STATE_PAUSED;\n    }\n    let state = uploadStates.STATE_WAITING;\n    const fileIDs = Object.keys(files);\n    for (let i = 0; i < fileIDs.length; i++) {\n        const { progress } = files[fileIDs[i]];\n        // If ANY files are being uploaded right now, show the uploading state.\n        if (progress.uploadStarted && !progress.uploadComplete) {\n            return uploadStates.STATE_UPLOADING;\n        }\n        // If files are being preprocessed AND postprocessed at this time, we show the\n        // preprocess state. If any files are being uploaded we show uploading.\n        if (progress.preprocess && state !== uploadStates.STATE_UPLOADING) {\n            state = uploadStates.STATE_PREPROCESSING;\n        }\n        // If NO files are being preprocessed or uploaded right now, but some files are\n        // being postprocessed, show the postprocess state.\n        if (progress.postprocess &&\n            state !== uploadStates.STATE_UPLOADING &&\n            state !== uploadStates.STATE_PREPROCESSING) {\n            state = uploadStates.STATE_POSTPROCESSING;\n        }\n    }\n    return state;\n}\nfunction UploadStatus({ files, i18n, isAllComplete, isAllErrored, isAllPaused, inProgressNotPausedFiles, newFiles, processingFiles, }) {\n    const uploadingState = getUploadingState(isAllErrored, isAllComplete, isAllPaused, files);\n    switch (uploadingState) {\n        case 'uploading':\n            return i18n('uploadingXFiles', {\n                smart_count: inProgressNotPausedFiles.length,\n            });\n        case 'preprocessing':\n        case 'postprocessing':\n            return i18n('processingXFiles', { smart_count: processingFiles.length });\n        case 'paused':\n            return i18n('uploadPaused');\n        case 'waiting':\n            return i18n('xFilesSelected', { smart_count: newFiles.length });\n        case 'complete':\n            return i18n('uploadComplete');\n        case 'error':\n            return i18n('error');\n        default:\n    }\n}\nfunction PanelTopBar(props) {\n    const { i18n, isAllComplete, hideCancelButton, maxNumberOfFiles, toggleAddFilesPanel, uppy, } = props;\n    let { allowNewUpload } = props;\n    // TODO maybe this should be done in ../Dashboard.js, then just pass that down as `allowNewUpload`\n    if (allowNewUpload && maxNumberOfFiles) {\n        allowNewUpload = props.totalFileCount < props.maxNumberOfFiles;\n    }\n    return (_jsxs(\"div\", { className: \"uppy-DashboardContent-bar\", children: [!isAllComplete && !hideCancelButton ? (_jsx(\"button\", { className: \"uppy-DashboardContent-back\", type: \"button\", onClick: () => uppy.cancelAll(), children: i18n('cancel') })) : (_jsx(\"div\", {})), _jsx(\"div\", { className: \"uppy-DashboardContent-title\", children: _jsx(UploadStatus, { ...props }) }), allowNewUpload ? (_jsxs(\"button\", { className: \"uppy-DashboardContent-addMore\", type: \"button\", \"aria-label\": i18n('addMoreFiles'), title: i18n('addMoreFiles'), onClick: () => toggleAddFilesPanel(true), children: [_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"15\", height: \"15\", viewBox: \"0 0 15 15\", children: _jsx(\"path\", { d: \"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z\" }) }), _jsx(\"span\", { className: \"uppy-DashboardContent-addMoreCaption\", children: i18n('addMore') })] })) : (_jsx(\"div\", {}))] }));\n}\nexport default PanelTopBar;\n", "import classNames from 'classnames';\nimport { cloneElement, h, toChildArray, } from 'preact';\nimport { useEffect, useRef, useState } from 'preact/hooks';\nconst transitionName = 'uppy-transition-slideDownUp';\nconst duration = 250;\n/**\n * Vertical slide transition.\n *\n * This can take a _single_ child component, which _must_ accept a `className` prop.\n *\n * Currently this is specific to the `uppy-transition-slideDownUp` transition,\n * but it should be simple to extend this for any type of single-element\n * transition by setting the CSS name and duration as props.\n */\nfunction Slide({ children }) {\n    const [cachedChildren, setCachedChildren] = useState(null);\n    const [className, setClassName] = useState('');\n    const enterTimeoutRef = useRef();\n    const leaveTimeoutRef = useRef();\n    const animationFrameRef = useRef();\n    const handleEnterTransition = () => {\n        setClassName(`${transitionName}-enter`);\n        cancelAnimationFrame(animationFrameRef.current);\n        clearTimeout(leaveTimeoutRef.current);\n        leaveTimeoutRef.current = undefined;\n        animationFrameRef.current = requestAnimationFrame(() => {\n            setClassName(`${transitionName}-enter ${transitionName}-enter-active`);\n            enterTimeoutRef.current = setTimeout(() => {\n                setClassName('');\n            }, duration);\n        });\n    };\n    const handleLeaveTransition = () => {\n        setClassName(`${transitionName}-leave`);\n        cancelAnimationFrame(animationFrameRef.current);\n        clearTimeout(enterTimeoutRef.current);\n        enterTimeoutRef.current = undefined;\n        animationFrameRef.current = requestAnimationFrame(() => {\n            setClassName(`${transitionName}-leave ${transitionName}-leave-active`);\n            leaveTimeoutRef.current = setTimeout(() => {\n                setCachedChildren(null);\n                setClassName('');\n            }, duration);\n        });\n    };\n    useEffect(() => {\n        const child = toChildArray(children)[0];\n        if (cachedChildren === child)\n            return;\n        if (child && !cachedChildren) {\n            handleEnterTransition();\n        }\n        else if (cachedChildren && !child && !leaveTimeoutRef.current) {\n            handleLeaveTransition();\n        }\n        setCachedChildren(child);\n    }, [children, cachedChildren]); // Dependency array to trigger effect on children change\n    useEffect(() => {\n        return () => {\n            clearTimeout(enterTimeoutRef.current);\n            clearTimeout(leaveTimeoutRef.current);\n            cancelAnimationFrame(animationFrameRef.current);\n        };\n    }, []); // Cleanup useEffect\n    if (!cachedChildren)\n        return null;\n    return cloneElement(cachedChildren, {\n        className: classNames(className, cachedChildren.props.className),\n    });\n}\nexport default Slide;\n", "export default {\n    strings: {\n        // When `inline: false`, used as the screen reader label for the button that closes the modal.\n        closeModal: 'Close Modal',\n        // Used as the screen reader label for the plus (+) button that shows the \u201CAdd more files\u201D screen\n        addMoreFiles: 'Add more files',\n        addingMoreFiles: 'Adding more files',\n        // Used as the header for import panels, e.g., \u201CImport from Google Drive\u201D.\n        importFrom: 'Import from %{name}',\n        // When `inline: false`, used as the screen reader label for the dashboard modal.\n        dashboardWindowTitle: 'Uppy Dashboard Window (Press escape to close)',\n        // When `inline: true`, used as the screen reader label for the dashboard area.\n        dashboardTitle: 'Uppy Dashboard',\n        // Shown in the Informer when a link to a file was copied to the clipboard.\n        copyLinkToClipboardSuccess: 'Link copied to clipboard.',\n        // Used when a link cannot be copied automatically \u2014 the user has to select the text from the\n        // input element below this string.\n        copyLinkToClipboardFallback: 'Copy the URL below',\n        // Used as the hover title and screen reader label for buttons that copy a file link.\n        copyLink: 'Copy link',\n        back: 'Back',\n        // Used as the screen reader label for buttons that remove a file.\n        removeFile: 'Remove file',\n        // Used as the screen reader label for buttons that open the metadata editor panel for a file.\n        editFile: 'Edit file',\n        editImage: 'Edit image',\n        // Shown in the panel header for the metadata editor. Rendered as \u201CEditing image.png\u201D.\n        editing: 'Editing %{file}',\n        // Shown on the main upload screen when an upload error occurs\n        error: 'Error',\n        // Used as the screen reader label for the button that saves metadata edits and returns to the\n        // file list view.\n        finishEditingFile: 'Finish editing file',\n        saveChanges: 'Save changes',\n        // Used as the label for the tab button that opens the system file selection dialog.\n        myDevice: 'My Device',\n        dropHint: 'Drop your files here',\n        // Used as the hover text and screen reader label for file progress indicators when\n        // they have been fully uploaded.\n        uploadComplete: 'Upload complete',\n        uploadPaused: 'Upload paused',\n        // Used as the hover text and screen reader label for the buttons to resume paused uploads.\n        resumeUpload: 'Resume upload',\n        // Used as the hover text and screen reader label for the buttons to pause uploads.\n        pauseUpload: 'Pause upload',\n        // Used as the hover text and screen reader label for the buttons to retry failed uploads.\n        retryUpload: 'Retry upload',\n        // Used as the hover text and screen reader label for the buttons to cancel uploads.\n        cancelUpload: 'Cancel upload',\n        // Used in a title, how many files are currently selected\n        xFilesSelected: {\n            0: '%{smart_count} file selected',\n            1: '%{smart_count} files selected',\n        },\n        uploadingXFiles: {\n            0: 'Uploading %{smart_count} file',\n            1: 'Uploading %{smart_count} files',\n        },\n        processingXFiles: {\n            0: 'Processing %{smart_count} file',\n            1: 'Processing %{smart_count} files',\n        },\n        // The \"powered by Uppy\" link at the bottom of the Dashboard.\n        poweredBy: 'Powered by %{uppy}',\n        addMore: 'Add more',\n        editFileWithFilename: 'Edit file %{file}',\n        save: 'Save',\n        cancel: 'Cancel',\n        dropPasteFiles: 'Drop files here or %{browseFiles}',\n        dropPasteFolders: 'Drop files here or %{browseFolders}',\n        dropPasteBoth: 'Drop files here, %{browseFiles} or %{browseFolders}',\n        dropPasteImportFiles: 'Drop files here, %{browseFiles} or import from:',\n        dropPasteImportFolders: 'Drop files here, %{browseFolders} or import from:',\n        dropPasteImportBoth: 'Drop files here, %{browseFiles}, %{browseFolders} or import from:',\n        importFiles: 'Import files from:',\n        browseFiles: 'browse files',\n        browseFolders: 'browse folders',\n        recoveredXFiles: {\n            0: 'We could not fully recover 1 file. Please re-select it and resume the upload.',\n            1: 'We could not fully recover %{smart_count} files. Please re-select them and resume the upload.',\n        },\n        recoveredAllFiles: 'We restored all files. You can now resume the upload.',\n        sessionRestored: 'Session restored',\n        reSelect: 'Re-select',\n        missingRequiredMetaFields: {\n            0: 'Missing required meta field: %{fields}.',\n            1: 'Missing required meta fields: %{fields}.',\n        },\n        // Used for native device camera buttons on mobile\n        takePictureBtn: 'Take Picture',\n        recordVideoBtn: 'Record Video',\n    },\n};\n", "export default [\n    'a[href]:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    'area[href]:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    'input:not([disabled]):not([inert]):not([aria-hidden])',\n    'select:not([disabled]):not([inert]):not([aria-hidden])',\n    'textarea:not([disabled]):not([inert]):not([aria-hidden])',\n    'button:not([disabled]):not([inert]):not([aria-hidden])',\n    'iframe:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    'object:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    'embed:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    '[contenteditable]:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    '[tabindex]:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n];\n", "// @ts-ignore untyped\nimport FOCUSABLE_ELEMENTS from '@uppy/utils/lib/FOCUSABLE_ELEMENTS';\nimport debounce from 'lodash/debounce.js';\nimport getActiveOverlayEl from './getActiveOverlayEl.js';\n/*\n  Focuses on some element in the currently topmost overlay.\n\n  1. If there are some [data-uppy-super-focusable] elements rendered already - focuses\n     on the first superfocusable element, and leaves focus up to the control of\n     a user (until currently focused element disappears from the screen [which\n     can happen when overlay changes, or, e.g., when we click on a folder in googledrive]).\n  2. If there are no [data-uppy-super-focusable] elements yet (or ever) - focuses\n     on the first focusable element, but switches focus if superfocusable elements appear on next render.\n*/\nexport default function createSuperFocus() {\n    let lastFocusWasOnSuperFocusableEl = false;\n    const superFocus = (dashboardEl, activeOverlayType) => {\n        const overlayEl = getActiveOverlayEl(dashboardEl, activeOverlayType);\n        const isFocusInOverlay = overlayEl.contains(document.activeElement);\n        // If focus is already in the topmost overlay, AND on last update we focused on the superfocusable\n        // element - then leave focus up to the user.\n        // [Practical check] without this line, typing in the search input in googledrive overlay won't work.\n        if (isFocusInOverlay && lastFocusWasOnSuperFocusableEl)\n            return;\n        const superFocusableEl = overlayEl.querySelector('[data-uppy-super-focusable]');\n        // If we are already in the topmost overlay, AND there are no super focusable elements yet, - leave focus up to the user.\n        // [Practical check] without this line, if you are in an empty folder in google drive, and something's uploading in the\n        // bg, - focus will be jumping to Done all the time.\n        if (isFocusInOverlay && !superFocusableEl)\n            return;\n        if (superFocusableEl) {\n            superFocusableEl.focus({ preventScroll: true });\n            lastFocusWasOnSuperFocusableEl = true;\n        }\n        else {\n            const firstEl = overlayEl.querySelector(FOCUSABLE_ELEMENTS);\n            firstEl?.focus({ preventScroll: true });\n            lastFocusWasOnSuperFocusableEl = false;\n        }\n    };\n    // ___Why do we need to debounce?\n    //    1. To deal with animations: overlay changes via animations, which results in the DOM updating AFTER plugin.update()\n    //       already executed.\n    //    [Practical check] without debounce, if we open the Url overlay, and click 'Done', Dashboard won't get focused again.\n    //    [Practical check] if we delay 250ms instead of 260ms - IE11 won't get focused in same situation.\n    //    2. Performance: there can be many state update()s in a second, and this function is called every time.\n    return debounce(superFocus, 260);\n}\n", "/**\n * @returns {HTMLElement} - either dashboard element, or the overlay that's most on top\n */\nexport default function getActiveOverlayEl(dashboardEl, activeOverlayType) {\n    if (activeOverlayType) {\n        const overlayEl = dashboardEl.querySelector(`[data-uppy-paneltype=\"${activeOverlayType}\"]`);\n        // if an overlay is already mounted\n        if (overlayEl)\n            return overlayEl;\n    }\n    return dashboardEl;\n}\n", "// @ts-ignore untyped\nimport FOCUSABLE_ELEMENTS from '@uppy/utils/lib/FOCUSABLE_ELEMENTS';\nimport toArray from '@uppy/utils/lib/toArray';\nimport getActiveOverlayEl from './getActiveOverlayEl.js';\nfunction focusOnFirstNode(event, nodes) {\n    const node = nodes[0];\n    if (node) {\n        node.focus();\n        event.preventDefault();\n    }\n}\nfunction focusOnLastNode(event, nodes) {\n    const node = nodes[nodes.length - 1];\n    if (node) {\n        node.focus();\n        event.preventDefault();\n    }\n}\n// ___Why not just use (focusedItemIndex === -1)?\n//    Firefox thinks <ul> is focusable, but we don't have <ul>s in our FOCUSABLE_ELEMENTS. Which means that if we tab into\n//    the <ul>, code will think that we are not in the active overlay, and we should focusOnFirstNode() of the currently\n//    active overlay!\n//    [Practical check] if we use (focusedItemIndex === -1), instagram provider in firefox will never get focus on its pics\n//    in the <ul>.\nfunction isFocusInOverlay(activeOverlayEl) {\n    return activeOverlayEl.contains(document.activeElement);\n}\nfunction trapFocus(event, activeOverlayType, dashboardEl) {\n    const activeOverlayEl = getActiveOverlayEl(dashboardEl, activeOverlayType);\n    const focusableNodes = toArray(activeOverlayEl.querySelectorAll(FOCUSABLE_ELEMENTS));\n    const focusedItemIndex = focusableNodes.indexOf(document.activeElement);\n    // If we pressed tab, and focus is not yet within the current overlay - focus on\n    // the first element within the current overlay.\n    // This is a safety measure (for when user returns from another tab e.g.), most\n    // plugins will try to focus on some important element as it loads.\n    if (!isFocusInOverlay(activeOverlayEl)) {\n        focusOnFirstNode(event, focusableNodes);\n        // If we pressed shift + tab, and we're on the first element of a modal\n    }\n    else if (event.shiftKey && focusedItemIndex === 0) {\n        focusOnLastNode(event, focusableNodes);\n        // If we pressed tab, and we're on the last element of the modal\n    }\n    else if (!event.shiftKey &&\n        focusedItemIndex === focusableNodes.length - 1) {\n        focusOnFirstNode(event, focusableNodes);\n    }\n}\n// Traps focus inside of the currently open overlay (e.g. Dashboard, or e.g. Instagram),\n// never lets focus disappear from the modal.\nexport { trapFocus as forModal };\n// Traps focus inside of the currently open overlay, unless overlay is null - then let the user tab away.\nexport function forInline(event, activeOverlayType, dashboardEl) {\n    // ___When we're in the bare 'Drop files here, paste, browse or import from' screen\n    if (activeOverlayType === null) {\n        // Do nothing and let the browser handle it, user can tab away from Uppy to other elements on the page\n        // ___When there is some overlay with 'Done' button\n    }\n    else {\n        // Trap the focus inside this overlay!\n        // User can close the overlay (click 'Done') if they want to travel away from Uppy.\n        trapFocus(event, activeOverlayType, dashboardEl);\n    }\n}\n", "import { UIPlugin } from '@uppy/core';\nimport Informer from '@uppy/informer';\nimport { defaultPickerIcon } from '@uppy/provider-views';\nimport StatusBar from '@uppy/status-bar';\nimport ThumbnailGenerator from '@uppy/thumbnail-generator';\nimport findAllDOMElements from '@uppy/utils/lib/findAllDOMElements';\nimport getDroppedFiles from '@uppy/utils/lib/getDroppedFiles';\nimport toArray from '@uppy/utils/lib/toArray';\nimport { nanoid } from 'nanoid/non-secure';\nimport { h } from 'preact';\nimport packageJson from '../package.json' with { type: 'json' };\nimport DashboardUI from './components/Dashboard.js';\nimport locale from './locale.js';\nimport createSuperFocus from './utils/createSuperFocus.js';\nimport * as trapFocus from './utils/trapFocus.js';\nconst TAB_KEY = 9;\nconst ESC_KEY = 27;\nfunction createPromise() {\n    const o = {};\n    o.promise = new Promise((resolve, reject) => {\n        o.resolve = resolve;\n        o.reject = reject;\n    });\n    return o;\n}\nconst defaultOptions = {\n    target: 'body',\n    metaFields: [],\n    thumbnailWidth: 280,\n    thumbnailType: 'image/jpeg',\n    waitForThumbnailsBeforeUpload: false,\n    defaultPickerIcon,\n    showLinkToFileUploadResult: false,\n    showProgressDetails: false,\n    hideUploadButton: false,\n    hideCancelButton: false,\n    hideRetryButton: false,\n    hidePauseResumeButton: false,\n    hideProgressAfterFinish: false,\n    note: null,\n    singleFileFullScreen: true,\n    disableStatusBar: false,\n    disableInformer: false,\n    disableThumbnailGenerator: false,\n    fileManagerSelectionType: 'files',\n    proudlyDisplayPoweredByUppy: true,\n    showSelectedFiles: true,\n    showRemoveButtonAfterComplete: false,\n    showNativePhotoCameraButton: false,\n    showNativeVideoCameraButton: false,\n    theme: 'light',\n    autoOpen: null,\n    disabled: false,\n    disableLocalFiles: false,\n    nativeCameraFacingMode: '',\n    onDragLeave: () => { },\n    onDragOver: () => { },\n    onDrop: () => { },\n    plugins: [],\n    // Dynamic default options, they have to be defined in the constructor (because\n    // they require access to the `this` keyword), but we still want them to\n    // appear in the default options so TS knows they'll be defined.\n    doneButtonHandler: undefined,\n    onRequestCloseModal: null,\n    // defaultModalOptions\n    inline: false,\n    animateOpenClose: true,\n    browserBackButtonClose: false,\n    closeAfterFinish: false,\n    closeModalOnClickOutside: false,\n    disablePageScrollWhenModalOpen: true,\n    trigger: null,\n    // defaultInlineOptions\n    width: 750,\n    height: 550,\n};\n/**\n * Dashboard UI with previews, metadata editing, tabs for various services and more\n */\nexport default class Dashboard extends UIPlugin {\n    static VERSION = packageJson.version;\n    #disabledNodes;\n    modalName = `uppy-Dashboard-${nanoid()}`;\n    superFocus = createSuperFocus();\n    ifFocusedOnUppyRecently = false;\n    dashboardIsDisabled;\n    savedScrollPosition;\n    savedActiveElement;\n    resizeObserver;\n    darkModeMediaQuery;\n    // Timeouts\n    makeDashboardInsidesVisibleAnywayTimeout;\n    constructor(uppy, opts) {\n        const autoOpen = opts?.autoOpen ?? null;\n        super(uppy, { ...defaultOptions, ...opts, autoOpen });\n        this.id = this.opts.id || 'Dashboard';\n        this.title = 'Dashboard';\n        this.type = 'orchestrator';\n        this.defaultLocale = locale;\n        // Dynamic default options:\n        if (this.opts.doneButtonHandler === undefined) {\n            // `null` means \"do not display a Done button\", while `undefined` means\n            // \"I want the default behavior\". For this reason, we need to differentiate `null` and `undefined`.\n            this.opts.doneButtonHandler = () => {\n                this.uppy.clear();\n                this.requestCloseModal();\n            };\n        }\n        this.opts.onRequestCloseModal ??= () => this.closeModal();\n        this.i18nInit();\n    }\n    removeTarget = (plugin) => {\n        const pluginState = this.getPluginState();\n        // filter out the one we want to remove\n        const newTargets = pluginState.targets.filter((target) => target.id !== plugin.id);\n        this.setPluginState({\n            targets: newTargets,\n        });\n    };\n    addTarget = (plugin) => {\n        const callerPluginId = plugin.id || plugin.constructor.name;\n        const callerPluginName = plugin.title || callerPluginId;\n        const callerPluginType = plugin.type;\n        if (callerPluginType !== 'acquirer' &&\n            callerPluginType !== 'progressindicator' &&\n            callerPluginType !== 'editor') {\n            const msg = 'Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor';\n            this.uppy.log(msg, 'error');\n            return null;\n        }\n        const target = {\n            id: callerPluginId,\n            name: callerPluginName,\n            type: callerPluginType,\n        };\n        const state = this.getPluginState();\n        const newTargets = state.targets.slice();\n        newTargets.push(target);\n        this.setPluginState({\n            targets: newTargets,\n        });\n        return this.el;\n    };\n    hideAllPanels = () => {\n        const state = this.getPluginState();\n        const update = {\n            activePickerPanel: undefined,\n            showAddFilesPanel: false,\n            activeOverlayType: null,\n            fileCardFor: null,\n            showFileEditor: false,\n        };\n        if (state.activePickerPanel === update.activePickerPanel &&\n            state.showAddFilesPanel === update.showAddFilesPanel &&\n            state.showFileEditor === update.showFileEditor &&\n            state.activeOverlayType === update.activeOverlayType) {\n            // avoid doing a state update if nothing changed\n            return;\n        }\n        this.setPluginState(update);\n        this.uppy.emit('dashboard:close-panel', state.activePickerPanel?.id);\n    };\n    showPanel = (id) => {\n        const { targets } = this.getPluginState();\n        const activePickerPanel = targets.find((target) => {\n            return target.type === 'acquirer' && target.id === id;\n        });\n        this.setPluginState({\n            activePickerPanel,\n            activeOverlayType: 'PickerPanel',\n        });\n        this.uppy.emit('dashboard:show-panel', id);\n    };\n    canEditFile = (file) => {\n        const { targets } = this.getPluginState();\n        const editors = this.#getEditors(targets);\n        return editors.some((target) => this.uppy.getPlugin(target.id).canEditFile(file));\n    };\n    openFileEditor = (file) => {\n        const { targets } = this.getPluginState();\n        const editors = this.#getEditors(targets);\n        this.setPluginState({\n            showFileEditor: true,\n            fileCardFor: file.id || null,\n            activeOverlayType: 'FileEditor',\n        });\n        editors.forEach((editor) => {\n            ;\n            this.uppy.getPlugin(editor.id).selectFile(file);\n        });\n    };\n    closeFileEditor = () => {\n        const { metaFields } = this.getPluginState();\n        const isMetaEditorEnabled = metaFields && metaFields.length > 0;\n        if (isMetaEditorEnabled) {\n            this.setPluginState({\n                showFileEditor: false,\n                activeOverlayType: 'FileCard',\n            });\n        }\n        else {\n            this.setPluginState({\n                showFileEditor: false,\n                fileCardFor: null,\n                activeOverlayType: 'AddFiles',\n            });\n        }\n    };\n    saveFileEditor = () => {\n        const { targets } = this.getPluginState();\n        const editors = this.#getEditors(targets);\n        editors.forEach((editor) => {\n            ;\n            this.uppy.getPlugin(editor.id).save();\n        });\n        this.closeFileEditor();\n    };\n    openModal = () => {\n        const { promise, resolve } = createPromise();\n        // save scroll position\n        this.savedScrollPosition = window.pageYOffset;\n        // save active element, so we can restore focus when modal is closed\n        this.savedActiveElement = document.activeElement;\n        if (this.opts.disablePageScrollWhenModalOpen) {\n            document.body.classList.add('uppy-Dashboard-isFixed');\n        }\n        if (this.opts.animateOpenClose && this.getPluginState().isClosing) {\n            const handler = () => {\n                this.setPluginState({\n                    isHidden: false,\n                });\n                this.el.removeEventListener('animationend', handler, false);\n                resolve();\n            };\n            this.el.addEventListener('animationend', handler, false);\n        }\n        else {\n            this.setPluginState({\n                isHidden: false,\n            });\n            resolve();\n        }\n        if (this.opts.browserBackButtonClose) {\n            this.updateBrowserHistory();\n        }\n        // handle ESC and TAB keys in modal dialog\n        document.addEventListener('keydown', this.handleKeyDownInModal);\n        this.uppy.emit('dashboard:modal-open');\n        return promise;\n    };\n    closeModal = (opts) => {\n        // Whether the modal is being closed by the user (`true`) or by other means (e.g. browser back button)\n        const manualClose = opts?.manualClose ?? true;\n        const { isHidden, isClosing } = this.getPluginState();\n        if (isHidden || isClosing) {\n            // short-circuit if animation is ongoing\n            return undefined;\n        }\n        const { promise, resolve } = createPromise();\n        if (this.opts.disablePageScrollWhenModalOpen) {\n            document.body.classList.remove('uppy-Dashboard-isFixed');\n        }\n        if (this.opts.animateOpenClose) {\n            this.setPluginState({\n                isClosing: true,\n            });\n            const handler = () => {\n                this.setPluginState({\n                    isHidden: true,\n                    isClosing: false,\n                });\n                this.superFocus.cancel();\n                this.savedActiveElement.focus();\n                this.el.removeEventListener('animationend', handler, false);\n                resolve();\n            };\n            this.el.addEventListener('animationend', handler, false);\n        }\n        else {\n            this.setPluginState({\n                isHidden: true,\n            });\n            this.superFocus.cancel();\n            this.savedActiveElement.focus();\n            resolve();\n        }\n        // handle ESC and TAB keys in modal dialog\n        document.removeEventListener('keydown', this.handleKeyDownInModal);\n        if (manualClose) {\n            if (this.opts.browserBackButtonClose) {\n                // Make sure that the latest entry in the history state is our modal name\n                if (history.state?.[this.modalName]) {\n                    // Go back in history to clear out the entry we created (ultimately closing the modal)\n                    history.back();\n                }\n            }\n        }\n        this.uppy.emit('dashboard:modal-closed');\n        return promise;\n    };\n    isModalOpen = () => {\n        return !this.getPluginState().isHidden || false;\n    };\n    requestCloseModal = () => {\n        if (this.opts.onRequestCloseModal) {\n            return this.opts.onRequestCloseModal();\n        }\n        return this.closeModal();\n    };\n    setDarkModeCapability = (isDarkModeOn) => {\n        const { capabilities } = this.uppy.getState();\n        this.uppy.setState({\n            capabilities: {\n                ...capabilities,\n                darkMode: isDarkModeOn,\n            },\n        });\n    };\n    handleSystemDarkModeChange = (event) => {\n        const isDarkModeOnNow = event.matches;\n        this.uppy.log(`[Dashboard] Dark mode is ${isDarkModeOnNow ? 'on' : 'off'}`);\n        this.setDarkModeCapability(isDarkModeOnNow);\n    };\n    toggleFileCard = (show, fileID) => {\n        const file = this.uppy.getFile(fileID);\n        if (show) {\n            this.uppy.emit('dashboard:file-edit-start', file);\n        }\n        else {\n            this.uppy.emit('dashboard:file-edit-complete', file);\n        }\n        this.setPluginState({\n            fileCardFor: show ? fileID : null,\n            activeOverlayType: show ? 'FileCard' : null,\n        });\n    };\n    toggleAddFilesPanel = (show) => {\n        this.setPluginState({\n            showAddFilesPanel: show,\n            activeOverlayType: show ? 'AddFiles' : null,\n        });\n    };\n    addFiles = (files) => {\n        const descriptors = files.map((file) => ({\n            source: this.id,\n            name: file.name,\n            type: file.type,\n            data: file,\n            meta: {\n                // path of the file relative to the ancestor directory the user selected.\n                // e.g. 'docs/Old Prague/airbnb.pdf'\n                relativePath: file.relativePath || file.webkitRelativePath || null,\n            },\n        }));\n        try {\n            this.uppy.addFiles(descriptors);\n        }\n        catch (err) {\n            this.uppy.log(err);\n        }\n    };\n    // ___Why make insides of Dashboard invisible until first ResizeObserver event is emitted?\n    //    ResizeOberserver doesn't emit the first resize event fast enough, users can see the jump from one .uppy-size-- to\n    //    another (e.g. in Safari)\n    // ___Why not apply visibility property to .uppy-Dashboard-inner?\n    //    Because ideally, acc to specs, ResizeObserver should see invisible elements as of width 0. So even though applying\n    //    invisibility to .uppy-Dashboard-inner works now, it may not work in the future.\n    startListeningToResize = () => {\n        // Watch for Dashboard container (`.uppy-Dashboard-inner`) resize\n        // and update containerWidth/containerHeight in plugin state accordingly.\n        // Emits first event on initialization.\n        this.resizeObserver = new ResizeObserver((entries) => {\n            const uppyDashboardInnerEl = entries[0];\n            const { width, height } = uppyDashboardInnerEl.contentRect;\n            this.setPluginState({\n                containerWidth: width,\n                containerHeight: height,\n                areInsidesReadyToBeVisible: true,\n            });\n        });\n        this.resizeObserver.observe(this.el.querySelector('.uppy-Dashboard-inner'));\n        // If ResizeObserver fails to emit an event telling us what size to use - default to the mobile view\n        this.makeDashboardInsidesVisibleAnywayTimeout = setTimeout(() => {\n            const pluginState = this.getPluginState();\n            const isModalAndClosed = !this.opts.inline && pluginState.isHidden;\n            if (\n            // We might want to enable this in the future\n            // if ResizeObserver hasn't yet fired,\n            !pluginState.areInsidesReadyToBeVisible &&\n                // and it's not due to the modal being closed\n                !isModalAndClosed) {\n                this.uppy.log('[Dashboard] resize event didn\u2019t fire on time: defaulted to mobile layout', 'warning');\n                this.setPluginState({\n                    areInsidesReadyToBeVisible: true,\n                });\n            }\n        }, 1000);\n    };\n    stopListeningToResize = () => {\n        this.resizeObserver.disconnect();\n        clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout);\n    };\n    // Records whether we have been interacting with uppy right now,\n    // which is then used to determine whether state updates should trigger a refocusing.\n    recordIfFocusedOnUppyRecently = (event) => {\n        if (this.el.contains(event.target)) {\n            this.ifFocusedOnUppyRecently = true;\n        }\n        else {\n            this.ifFocusedOnUppyRecently = false;\n            // ___Why run this.superFocus.cancel here when it already runs in superFocusOnEachUpdate?\n            //    Because superFocus is debounced, when we move from Uppy to some other element on the page,\n            //    previously run superFocus sometimes hits and moves focus back to Uppy.\n            this.superFocus.cancel();\n        }\n    };\n    disableInteractiveElements = (disable) => {\n        const NODES_TO_DISABLE = [\n            'a[href]',\n            'input:not([disabled])',\n            'select:not([disabled])',\n            'textarea:not([disabled])',\n            'button:not([disabled])',\n            '[role=\"button\"]:not([disabled])',\n        ];\n        const nodesToDisable = this.#disabledNodes ??\n            toArray(this.el.querySelectorAll(NODES_TO_DISABLE)).filter((node) => !node.classList.contains('uppy-Dashboard-close'));\n        for (const node of nodesToDisable) {\n            // Links can\u2019t have `disabled` attr, so we use `aria-disabled` for a11y\n            if (node.tagName === 'A') {\n                node.setAttribute('aria-disabled', disable);\n            }\n            else {\n                node.disabled = disable;\n            }\n        }\n        if (disable) {\n            this.#disabledNodes = nodesToDisable;\n        }\n        else {\n            this.#disabledNodes = null;\n        }\n        this.dashboardIsDisabled = disable;\n    };\n    updateBrowserHistory = () => {\n        // Ensure history state does not already contain our modal name to avoid double-pushing\n        if (!history.state?.[this.modalName]) {\n            // Push to history so that the page is not lost on browser back button press\n            history.pushState({\n                ...history.state,\n                [this.modalName]: true,\n            }, '');\n        }\n        // Listen for back button presses\n        window.addEventListener('popstate', this.handlePopState, false);\n    };\n    handlePopState = (event) => {\n        // Close the modal if the history state no longer contains our modal name\n        if (this.isModalOpen() && (!event.state || !event.state[this.modalName])) {\n            this.closeModal({ manualClose: false });\n        }\n        // When the browser back button is pressed and uppy is now the latest entry\n        // in the history but the modal is closed, fix the history by removing the\n        // uppy history entry.\n        // This occurs when another entry is added into the history state while the\n        // modal is open, and then the modal gets manually closed.\n        // Solves PR #575 (https://github.com/transloadit/uppy/pull/575)\n        if (!this.isModalOpen() && event.state?.[this.modalName]) {\n            history.back();\n        }\n    };\n    handleKeyDownInModal = (event) => {\n        // close modal on esc key press\n        if (event.keyCode === ESC_KEY)\n            this.requestCloseModal();\n        // trap focus on tab key press\n        if (event.keyCode === TAB_KEY)\n            trapFocus.forModal(event, this.getPluginState().activeOverlayType, this.el);\n    };\n    handleClickOutside = () => {\n        if (this.opts.closeModalOnClickOutside)\n            this.requestCloseModal();\n    };\n    handlePaste = (event) => {\n        // Let any acquirer plugin (Url/Webcam/etc.) handle pastes to the root\n        this.uppy.iteratePlugins((plugin) => {\n            if (plugin.type === 'acquirer') {\n                // Every Plugin with .type acquirer can define handleRootPaste(event)\n                ;\n                plugin.handleRootPaste?.(event);\n            }\n        });\n        // Add all dropped files\n        const files = toArray(event.clipboardData.files);\n        if (files.length > 0) {\n            this.uppy.log('[Dashboard] Files pasted');\n            this.addFiles(files);\n        }\n    };\n    handleInputChange = (event) => {\n        event.preventDefault();\n        const files = toArray(event.currentTarget.files || []);\n        if (files.length > 0) {\n            this.uppy.log('[Dashboard] Files selected through input');\n            this.addFiles(files);\n        }\n    };\n    handleDragOver = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        // Check if some plugin can handle the datatransfer without files \u2014\n        // for instance, the Url plugin can import a url\n        const canSomePluginHandleRootDrop = () => {\n            let somePluginCanHandleRootDrop = true;\n            this.uppy.iteratePlugins((plugin) => {\n                if (plugin.canHandleRootDrop?.(event)) {\n                    somePluginCanHandleRootDrop = true;\n                }\n            });\n            return somePluginCanHandleRootDrop;\n        };\n        // Check if the \"type\" of the datatransfer object includes files\n        const doesEventHaveFiles = () => {\n            const { types } = event.dataTransfer;\n            return types.some((type) => type === 'Files');\n        };\n        // Deny drop, if no plugins can handle datatransfer, there are no files,\n        // or when opts.disabled is set, or new uploads are not allowed\n        const somePluginCanHandleRootDrop = canSomePluginHandleRootDrop();\n        const hasFiles = doesEventHaveFiles();\n        if ((!somePluginCanHandleRootDrop && !hasFiles) ||\n            this.opts.disabled ||\n            // opts.disableLocalFiles should only be taken into account if no plugins\n            // can handle the datatransfer\n            (this.opts.disableLocalFiles &&\n                (hasFiles || !somePluginCanHandleRootDrop)) ||\n            !this.uppy.getState().allowNewUpload) {\n            event.dataTransfer.dropEffect = 'none';\n            return;\n        }\n        // Add a small (+) icon on drop\n        // (and prevent browsers from interpreting this as files being _moved_ into the\n        // browser, https://github.com/transloadit/uppy/issues/1978).\n        event.dataTransfer.dropEffect = 'copy';\n        this.setPluginState({ isDraggingOver: true });\n        this.opts.onDragOver(event);\n    };\n    handleDragLeave = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        this.setPluginState({ isDraggingOver: false });\n        this.opts.onDragLeave(event);\n    };\n    handleDrop = async (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        this.setPluginState({ isDraggingOver: false });\n        // Let any acquirer plugin (Url/Webcam/etc.) handle drops to the root\n        this.uppy.iteratePlugins((plugin) => {\n            if (plugin.type === 'acquirer') {\n                // Every Plugin with .type acquirer can define handleRootDrop(event)\n                ;\n                plugin.handleRootDrop?.(event);\n            }\n        });\n        // Add all dropped files\n        let executedDropErrorOnce = false;\n        const logDropError = (error) => {\n            this.uppy.log(error, 'error');\n            // In practice all drop errors are most likely the same,\n            // so let's just show one to avoid overwhelming the user\n            if (!executedDropErrorOnce) {\n                this.uppy.info(error.message, 'error');\n                executedDropErrorOnce = true;\n            }\n        };\n        this.uppy.log('[Dashboard] Processing dropped files');\n        // Add all dropped files\n        const files = await getDroppedFiles(event.dataTransfer, { logDropError });\n        if (files.length > 0) {\n            this.uppy.log('[Dashboard] Files dropped');\n            this.addFiles(files);\n        }\n        this.opts.onDrop(event);\n    };\n    handleRequestThumbnail = (file) => {\n        if (!this.opts.waitForThumbnailsBeforeUpload) {\n            this.uppy.emit('thumbnail:request', file);\n        }\n    };\n    /**\n     * We cancel thumbnail requests when a file item component unmounts to avoid\n     * clogging up the queue when the user scrolls past many elements.\n     */\n    handleCancelThumbnail = (file) => {\n        if (!this.opts.waitForThumbnailsBeforeUpload) {\n            this.uppy.emit('thumbnail:cancel', file);\n        }\n    };\n    handleKeyDownInInline = (event) => {\n        // Trap focus on tab key press.\n        if (event.keyCode === TAB_KEY)\n            trapFocus.forInline(event, this.getPluginState().activeOverlayType, this.el);\n    };\n    // ___Why do we listen to the 'paste' event on a document instead of onPaste={props.handlePaste} prop,\n    //    or this.el.addEventListener('paste')?\n    //    Because (at least) Chrome doesn't handle paste if focus is on some button, e.g. 'My Device'.\n    //    => Therefore, the best option is to listen to all 'paste' events, and only react to them when we are focused on our\n    //       particular Uppy instance.\n    // ___Why do we still need onPaste={props.handlePaste} for the DashboardUi?\n    //    Because if we click on the 'Drop files here' caption e.g., `document.activeElement` will be 'body'. Which means our\n    //    standard determination of whether we're pasting into our Uppy instance won't work.\n    //    => Therefore, we need a traditional onPaste={props.handlePaste} handler too.\n    handlePasteOnBody = (event) => {\n        const isFocusInOverlay = this.el.contains(document.activeElement);\n        if (isFocusInOverlay) {\n            this.handlePaste(event);\n        }\n    };\n    handleComplete = ({ failed }) => {\n        if (this.opts.closeAfterFinish && !failed?.length) {\n            // All uploads are done\n            this.requestCloseModal();\n        }\n    };\n    handleCancelRestore = () => {\n        this.uppy.emit('restore-canceled');\n    };\n    #generateLargeThumbnailIfSingleFile = () => {\n        if (this.opts.disableThumbnailGenerator) {\n            return;\n        }\n        const LARGE_THUMBNAIL = 600;\n        const files = this.uppy.getFiles();\n        if (files.length === 1) {\n            const thumbnailGenerator = this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);\n            thumbnailGenerator?.setOptions({ thumbnailWidth: LARGE_THUMBNAIL });\n            const fileForThumbnail = { ...files[0], preview: undefined };\n            thumbnailGenerator?.requestThumbnail(fileForThumbnail).then(() => {\n                thumbnailGenerator?.setOptions({\n                    thumbnailWidth: this.opts.thumbnailWidth,\n                });\n            });\n        }\n    };\n    #openFileEditorWhenFilesAdded = (files) => {\n        const firstFile = files[0];\n        const { metaFields } = this.getPluginState();\n        const isMetaEditorEnabled = metaFields && metaFields.length > 0;\n        const isImageEditorEnabled = this.canEditFile(firstFile);\n        if (isMetaEditorEnabled && this.opts.autoOpen === 'metaEditor') {\n            this.toggleFileCard(true, firstFile.id);\n        }\n        else if (isImageEditorEnabled && this.opts.autoOpen === 'imageEditor') {\n            this.openFileEditor(firstFile);\n        }\n    };\n    initEvents = () => {\n        // Modal open button\n        if (this.opts.trigger && !this.opts.inline) {\n            const showModalTrigger = findAllDOMElements(this.opts.trigger);\n            if (showModalTrigger) {\n                showModalTrigger.forEach((trigger) => trigger.addEventListener('click', this.openModal));\n            }\n            else {\n                this.uppy.log('Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself', 'warning');\n            }\n        }\n        this.startListeningToResize();\n        document.addEventListener('paste', this.handlePasteOnBody);\n        this.uppy.on('plugin-added', this.#addSupportedPluginIfNoTarget);\n        this.uppy.on('plugin-remove', this.removeTarget);\n        this.uppy.on('file-added', this.hideAllPanels);\n        this.uppy.on('dashboard:modal-closed', this.hideAllPanels);\n        this.uppy.on('complete', this.handleComplete);\n        this.uppy.on('files-added', this.#generateLargeThumbnailIfSingleFile);\n        this.uppy.on('file-removed', this.#generateLargeThumbnailIfSingleFile);\n        // ___Why fire on capture?\n        //    Because this.ifFocusedOnUppyRecently needs to change before onUpdate() fires.\n        document.addEventListener('focus', this.recordIfFocusedOnUppyRecently, true);\n        document.addEventListener('click', this.recordIfFocusedOnUppyRecently, true);\n        if (this.opts.inline) {\n            this.el.addEventListener('keydown', this.handleKeyDownInInline);\n        }\n        if (this.opts.autoOpen) {\n            this.uppy.on('files-added', this.#openFileEditorWhenFilesAdded);\n        }\n    };\n    removeEvents = () => {\n        const showModalTrigger = findAllDOMElements(this.opts.trigger);\n        if (!this.opts.inline && showModalTrigger) {\n            showModalTrigger.forEach((trigger) => trigger.removeEventListener('click', this.openModal));\n        }\n        this.stopListeningToResize();\n        document.removeEventListener('paste', this.handlePasteOnBody);\n        window.removeEventListener('popstate', this.handlePopState, false);\n        this.uppy.off('plugin-added', this.#addSupportedPluginIfNoTarget);\n        this.uppy.off('plugin-remove', this.removeTarget);\n        this.uppy.off('file-added', this.hideAllPanels);\n        this.uppy.off('dashboard:modal-closed', this.hideAllPanels);\n        this.uppy.off('complete', this.handleComplete);\n        this.uppy.off('files-added', this.#generateLargeThumbnailIfSingleFile);\n        this.uppy.off('file-removed', this.#generateLargeThumbnailIfSingleFile);\n        document.removeEventListener('focus', this.recordIfFocusedOnUppyRecently);\n        document.removeEventListener('click', this.recordIfFocusedOnUppyRecently);\n        if (this.opts.inline) {\n            this.el.removeEventListener('keydown', this.handleKeyDownInInline);\n        }\n        if (this.opts.autoOpen) {\n            this.uppy.off('files-added', this.#openFileEditorWhenFilesAdded);\n        }\n    };\n    superFocusOnEachUpdate = () => {\n        const isFocusInUppy = this.el.contains(document.activeElement);\n        // When focus is lost on the page (== focus is on body for most browsers, or focus is null for IE11)\n        const isFocusNowhere = document.activeElement === document.body ||\n            document.activeElement === null;\n        const isInformerHidden = this.uppy.getState().info.length === 0;\n        const isModal = !this.opts.inline;\n        if (\n        // If update is connected to showing the Informer - let the screen reader calmly read it.\n        isInformerHidden &&\n            // If we are in a modal - always superfocus without concern for other elements\n            // on the page (user is unlikely to want to interact with the rest of the page)\n            (isModal ||\n                // If we are already inside of Uppy, or\n                isFocusInUppy ||\n                // If we are not focused on anything BUT we have already, at least once, focused on uppy\n                //   1. We focus when isFocusNowhere, because when the element we were focused\n                //      on disappears (e.g. an overlay), - focus gets lost. If user is typing\n                //      something somewhere else on the page, - focus won't be 'nowhere'.\n                //   2. We only focus when focus is nowhere AND this.ifFocusedOnUppyRecently,\n                //      to avoid focus jumps if we do something else on the page.\n                //   [Practical check] Without '&& this.ifFocusedOnUppyRecently', in Safari, in inline mode,\n                //                     when file is uploading, - navigate via tab to the checkbox,\n                //                     try to press space multiple times. Focus will jump to Uppy.\n                (isFocusNowhere && this.ifFocusedOnUppyRecently))) {\n            this.superFocus(this.el, this.getPluginState().activeOverlayType);\n        }\n        else {\n            this.superFocus.cancel();\n        }\n    };\n    afterUpdate = () => {\n        if (this.opts.disabled && !this.dashboardIsDisabled) {\n            this.disableInteractiveElements(true);\n            return;\n        }\n        if (!this.opts.disabled && this.dashboardIsDisabled) {\n            this.disableInteractiveElements(false);\n        }\n        this.superFocusOnEachUpdate();\n    };\n    saveFileCard = (meta, fileID) => {\n        this.uppy.setFileMeta(fileID, meta);\n        this.toggleFileCard(false, fileID);\n    };\n    #attachRenderFunctionToTarget = (target) => {\n        const plugin = this.uppy.getPlugin(target.id);\n        return {\n            ...target,\n            icon: plugin.icon || this.opts.defaultPickerIcon,\n            render: plugin.render,\n        };\n    };\n    #isTargetSupported = (target) => {\n        const plugin = this.uppy.getPlugin(target.id);\n        // If the plugin does not provide a `supported` check, assume the plugin works everywhere.\n        if (typeof plugin.isSupported !== 'function') {\n            return true;\n        }\n        return plugin.isSupported();\n    };\n    #getAcquirers = (targets) => {\n        return targets\n            .filter((target) => target.type === 'acquirer' && this.#isTargetSupported(target))\n            .map(this.#attachRenderFunctionToTarget);\n    };\n    #getProgressIndicators = (targets) => {\n        return targets\n            .filter((target) => target.type === 'progressindicator')\n            .map(this.#attachRenderFunctionToTarget);\n    };\n    #getEditors = (targets) => {\n        return targets\n            .filter((target) => target.type === 'editor')\n            .map(this.#attachRenderFunctionToTarget);\n    };\n    render = (state) => {\n        const pluginState = this.getPluginState();\n        const { files, capabilities, allowNewUpload } = state;\n        const { newFiles, uploadStartedFiles, completeFiles, erroredFiles, inProgressFiles, inProgressNotPausedFiles, processingFiles, isUploadStarted, isAllComplete, isAllPaused, } = this.uppy.getObjectOfFilesPerState();\n        const acquirers = this.#getAcquirers(pluginState.targets);\n        const progressindicators = this.#getProgressIndicators(pluginState.targets);\n        const editors = this.#getEditors(pluginState.targets);\n        let theme;\n        if (this.opts.theme === 'auto') {\n            theme = capabilities.darkMode ? 'dark' : 'light';\n        }\n        else {\n            theme = this.opts.theme;\n        }\n        if (['files', 'folders', 'both'].indexOf(this.opts.fileManagerSelectionType) <\n            0) {\n            this.opts.fileManagerSelectionType = 'files';\n            console.warn(`Unsupported option for \"fileManagerSelectionType\". Using default of \"${this.opts.fileManagerSelectionType}\".`);\n        }\n        return DashboardUI({\n            state,\n            isHidden: pluginState.isHidden,\n            files,\n            newFiles,\n            uploadStartedFiles,\n            completeFiles,\n            erroredFiles,\n            inProgressFiles,\n            inProgressNotPausedFiles,\n            processingFiles,\n            isUploadStarted,\n            isAllComplete,\n            isAllPaused,\n            totalFileCount: Object.keys(files).length,\n            totalProgress: state.totalProgress,\n            allowNewUpload,\n            acquirers,\n            theme,\n            disabled: this.opts.disabled,\n            disableLocalFiles: this.opts.disableLocalFiles,\n            direction: this.opts.direction,\n            activePickerPanel: pluginState.activePickerPanel,\n            showFileEditor: pluginState.showFileEditor,\n            saveFileEditor: this.saveFileEditor,\n            closeFileEditor: this.closeFileEditor,\n            disableInteractiveElements: this.disableInteractiveElements,\n            animateOpenClose: this.opts.animateOpenClose,\n            isClosing: pluginState.isClosing,\n            progressindicators,\n            editors,\n            autoProceed: this.uppy.opts.autoProceed,\n            id: this.id,\n            closeModal: this.requestCloseModal,\n            handleClickOutside: this.handleClickOutside,\n            handleInputChange: this.handleInputChange,\n            handlePaste: this.handlePaste,\n            inline: this.opts.inline,\n            showPanel: this.showPanel,\n            hideAllPanels: this.hideAllPanels,\n            i18n: this.i18n,\n            i18nArray: this.i18nArray,\n            uppy: this.uppy,\n            note: this.opts.note,\n            recoveredState: state.recoveredState,\n            metaFields: pluginState.metaFields,\n            resumableUploads: capabilities.resumableUploads || false,\n            individualCancellation: capabilities.individualCancellation,\n            isMobileDevice: capabilities.isMobileDevice,\n            fileCardFor: pluginState.fileCardFor,\n            toggleFileCard: this.toggleFileCard,\n            toggleAddFilesPanel: this.toggleAddFilesPanel,\n            showAddFilesPanel: pluginState.showAddFilesPanel,\n            saveFileCard: this.saveFileCard,\n            openFileEditor: this.openFileEditor,\n            canEditFile: this.canEditFile,\n            width: this.opts.width,\n            height: this.opts.height,\n            showLinkToFileUploadResult: this.opts.showLinkToFileUploadResult,\n            fileManagerSelectionType: this.opts.fileManagerSelectionType,\n            proudlyDisplayPoweredByUppy: this.opts.proudlyDisplayPoweredByUppy,\n            hideCancelButton: this.opts.hideCancelButton,\n            hideRetryButton: this.opts.hideRetryButton,\n            hidePauseResumeButton: this.opts.hidePauseResumeButton,\n            showRemoveButtonAfterComplete: this.opts.showRemoveButtonAfterComplete,\n            containerWidth: pluginState.containerWidth,\n            containerHeight: pluginState.containerHeight,\n            areInsidesReadyToBeVisible: pluginState.areInsidesReadyToBeVisible,\n            parentElement: this.el,\n            allowedFileTypes: this.uppy.opts.restrictions.allowedFileTypes,\n            maxNumberOfFiles: this.uppy.opts.restrictions.maxNumberOfFiles,\n            requiredMetaFields: this.uppy.opts.restrictions.requiredMetaFields,\n            showSelectedFiles: this.opts.showSelectedFiles,\n            showNativePhotoCameraButton: this.opts.showNativePhotoCameraButton,\n            showNativeVideoCameraButton: this.opts.showNativeVideoCameraButton,\n            nativeCameraFacingMode: this.opts.nativeCameraFacingMode,\n            singleFileFullScreen: this.opts.singleFileFullScreen,\n            handleCancelRestore: this.handleCancelRestore,\n            handleRequestThumbnail: this.handleRequestThumbnail,\n            handleCancelThumbnail: this.handleCancelThumbnail,\n            // drag props\n            isDraggingOver: pluginState.isDraggingOver,\n            handleDragOver: this.handleDragOver,\n            handleDragLeave: this.handleDragLeave,\n            handleDrop: this.handleDrop,\n        });\n    };\n    #addSpecifiedPluginsFromOptions = () => {\n        const { plugins } = this.opts;\n        plugins.forEach((pluginID) => {\n            const plugin = this.uppy.getPlugin(pluginID);\n            if (plugin) {\n                ;\n                plugin.mount(this, plugin);\n            }\n            else {\n                this.uppy.log(`[Uppy] Dashboard could not find plugin '${pluginID}', make sure to uppy.use() the plugins you are specifying`, 'warning');\n            }\n        });\n    };\n    #autoDiscoverPlugins = () => {\n        this.uppy.iteratePlugins(this.#addSupportedPluginIfNoTarget);\n    };\n    #addSupportedPluginIfNoTarget = (plugin) => {\n        // Only these types belong on the Dashboard,\n        // we wouldn\u2019t want to try and mount Compressor or Tus, for example.\n        const typesAllowed = ['acquirer', 'editor'];\n        if (plugin && !plugin.opts?.target && typesAllowed.includes(plugin.type)) {\n            const pluginAlreadyAdded = this.getPluginState().targets.some((installedPlugin) => plugin.id === installedPlugin.id);\n            if (!pluginAlreadyAdded) {\n                ;\n                plugin.mount(this, plugin);\n            }\n        }\n    };\n    #getStatusBarOpts() {\n        const { hideUploadButton, hideRetryButton, hidePauseResumeButton, hideCancelButton, showProgressDetails, hideProgressAfterFinish, locale: l, doneButtonHandler, } = this.opts;\n        return {\n            hideUploadButton,\n            hideRetryButton,\n            hidePauseResumeButton,\n            hideCancelButton,\n            showProgressDetails,\n            hideAfterFinish: hideProgressAfterFinish,\n            locale: l,\n            doneButtonHandler,\n        };\n    }\n    #getThumbnailGeneratorOpts() {\n        const { thumbnailWidth, thumbnailHeight, thumbnailType, waitForThumbnailsBeforeUpload, } = this.opts;\n        return {\n            thumbnailWidth,\n            thumbnailHeight,\n            thumbnailType,\n            waitForThumbnailsBeforeUpload,\n            // If we don't block on thumbnails, we can lazily generate them\n            lazy: !waitForThumbnailsBeforeUpload,\n        };\n    }\n    #getInformerOpts() {\n        return {\n        // currently no options\n        };\n    }\n    setOptions(opts) {\n        super.setOptions(opts);\n        this.uppy\n            .getPlugin(this.#getStatusBarId())\n            ?.setOptions(this.#getStatusBarOpts());\n        this.uppy\n            .getPlugin(this.#getThumbnailGeneratorId())\n            ?.setOptions(this.#getThumbnailGeneratorOpts());\n    }\n    #getStatusBarId() {\n        return `${this.id}:StatusBar`;\n    }\n    #getThumbnailGeneratorId() {\n        return `${this.id}:ThumbnailGenerator`;\n    }\n    #getInformerId() {\n        return `${this.id}:Informer`;\n    }\n    install = () => {\n        // Set default state for Dashboard\n        this.setPluginState({\n            isHidden: true,\n            fileCardFor: null,\n            activeOverlayType: null,\n            showAddFilesPanel: false,\n            activePickerPanel: undefined,\n            showFileEditor: false,\n            metaFields: this.opts.metaFields,\n            targets: [],\n            // We'll make them visible once .containerWidth is determined\n            areInsidesReadyToBeVisible: false,\n            isDraggingOver: false,\n        });\n        const { inline, closeAfterFinish } = this.opts;\n        if (inline && closeAfterFinish) {\n            throw new Error('[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.');\n        }\n        const { allowMultipleUploads, allowMultipleUploadBatches } = this.uppy.opts;\n        if ((allowMultipleUploads || allowMultipleUploadBatches) &&\n            closeAfterFinish) {\n            this.uppy.log('[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true', 'warning');\n        }\n        const { target } = this.opts;\n        if (target) {\n            this.mount(target, this);\n        }\n        if (!this.opts.disableStatusBar) {\n            this.uppy.use(StatusBar, {\n                id: this.#getStatusBarId(),\n                target: this,\n                ...this.#getStatusBarOpts(),\n            });\n        }\n        if (!this.opts.disableInformer) {\n            this.uppy.use(Informer, {\n                id: this.#getInformerId(),\n                target: this,\n                ...this.#getInformerOpts(),\n            });\n        }\n        if (!this.opts.disableThumbnailGenerator) {\n            this.uppy.use(ThumbnailGenerator, {\n                id: this.#getThumbnailGeneratorId(),\n                ...this.#getThumbnailGeneratorOpts(),\n            });\n        }\n        // Dark Mode / theme\n        this.darkModeMediaQuery =\n            typeof window !== 'undefined' && window.matchMedia\n                ? window.matchMedia('(prefers-color-scheme: dark)')\n                : null;\n        const isDarkModeOnFromTheStart = this.darkModeMediaQuery\n            ? this.darkModeMediaQuery.matches\n            : false;\n        this.uppy.log(`[Dashboard] Dark mode is ${isDarkModeOnFromTheStart ? 'on' : 'off'}`);\n        this.setDarkModeCapability(isDarkModeOnFromTheStart);\n        if (this.opts.theme === 'auto') {\n            this.darkModeMediaQuery?.addListener(this.handleSystemDarkModeChange);\n        }\n        this.#addSpecifiedPluginsFromOptions();\n        this.#autoDiscoverPlugins();\n        this.initEvents();\n    };\n    uninstall = () => {\n        if (!this.opts.disableInformer) {\n            const informer = this.uppy.getPlugin(`${this.id}:Informer`);\n            // Checking if this plugin exists, in case it was removed by uppy-core\n            // before the Dashboard was.\n            if (informer)\n                this.uppy.removePlugin(informer);\n        }\n        if (!this.opts.disableStatusBar) {\n            const statusBar = this.uppy.getPlugin(`${this.id}:StatusBar`);\n            if (statusBar)\n                this.uppy.removePlugin(statusBar);\n        }\n        if (!this.opts.disableThumbnailGenerator) {\n            const thumbnail = this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);\n            if (thumbnail)\n                this.uppy.removePlugin(thumbnail);\n        }\n        const { plugins } = this.opts;\n        plugins.forEach((pluginID) => {\n            const plugin = this.uppy.getPlugin(pluginID);\n            if (plugin)\n                plugin.unmount();\n        });\n        if (this.opts.theme === 'auto') {\n            this.darkModeMediaQuery?.removeListener(this.handleSystemDarkModeChange);\n        }\n        if (this.opts.disablePageScrollWhenModalOpen) {\n            document.body.classList.remove('uppy-Dashboard-isFixed');\n        }\n        this.unmount();\n        this.removeEvents();\n    };\n}\n", "{\n  \"name\": \"@uppy/image-editor\",\n  \"description\": \"Image editor and cropping UI\",\n  \"version\": \"3.4.2\",\n  \"license\": \"MIT\",\n  \"main\": \"lib/index.js\",\n  \"style\": \"dist/style.min.css\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"build:css\": \"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css\",\n    \"typecheck\": \"tsc --build\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"upload\",\n    \"uppy\",\n    \"uppy-plugin\",\n    \"image editor\",\n    \"cropper\",\n    \"crop\",\n    \"rotate\",\n    \"resize\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"dependencies\": {\n    \"@uppy/utils\": \"^6.2.2\",\n    \"cropperjs\": \"^1.6.2\",\n    \"preact\": \"^10.5.13\"\n  },\n  \"peerDependencies\": {\n    \"@uppy/core\": \"^4.5.2\"\n  },\n  \"publishConfig\": {\n    \"access\": \"public\"\n  },\n  \"devDependencies\": {\n    \"cssnano\": \"^7.0.7\",\n    \"postcss\": \"^8.5.6\",\n    \"postcss-cli\": \"^11.0.1\",\n    \"sass\": \"^1.89.2\",\n    \"typescript\": \"^5.8.3\"\n  }\n}", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport Cropper from 'cropperjs';\nimport { Component, h } from 'preact';\nimport getCanvasDataThatFitsPerfectlyIntoContainer from './utils/getCanvasDataThatFitsPerfectlyIntoContainer.js';\nimport getScaleFactorThatRemovesDarkCorners from './utils/getScaleFactorThatRemovesDarkCorners.js';\nimport limitCropboxMovementOnMove from './utils/limitCropboxMovementOnMove.js';\nimport limitCropboxMovementOnResize from './utils/limitCropboxMovementOnResize.js';\nexport default class Editor extends Component {\n    imgElement;\n    cropper;\n    constructor(props) {\n        super(props);\n        this.state = {\n            angle90Deg: 0,\n            angleGranular: 0,\n            prevCropboxData: null,\n        };\n        this.storePrevCropboxData = this.storePrevCropboxData.bind(this);\n        this.limitCropboxMovement = this.limitCropboxMovement.bind(this);\n    }\n    componentDidMount() {\n        const { opts, storeCropperInstance } = this.props;\n        this.cropper = new Cropper(this.imgElement, opts.cropperOptions);\n        this.imgElement.addEventListener('cropstart', this.storePrevCropboxData);\n        // @ts-expect-error custom cropper event but DOM API does not understand\n        this.imgElement.addEventListener('cropend', this.limitCropboxMovement);\n        storeCropperInstance(this.cropper);\n    }\n    componentWillUnmount() {\n        this.cropper.destroy();\n        this.imgElement.removeEventListener('cropstart', this.storePrevCropboxData);\n        // @ts-expect-error custom cropper event but DOM API does not understand\n        this.imgElement.removeEventListener('cropend', this.limitCropboxMovement);\n    }\n    storePrevCropboxData() {\n        this.setState({ prevCropboxData: this.cropper.getCropBoxData() });\n    }\n    limitCropboxMovement(event) {\n        const canvasData = this.cropper.getCanvasData();\n        const cropboxData = this.cropper.getCropBoxData();\n        const { prevCropboxData } = this.state;\n        // 1. When we grab the cropbox in the middle and move it\n        if (event.detail.action === 'all') {\n            const newCropboxData = limitCropboxMovementOnMove(canvasData, cropboxData, prevCropboxData);\n            if (newCropboxData)\n                this.cropper.setCropBoxData(newCropboxData);\n            // 2. When we stretch the cropbox by one of its sides\n        }\n        else {\n            const newCropboxData = limitCropboxMovementOnResize(canvasData, cropboxData, prevCropboxData);\n            if (newCropboxData)\n                this.cropper.setCropBoxData(newCropboxData);\n        }\n    }\n    onRotate90Deg = () => {\n        // 1. Set state\n        const { angle90Deg } = this.state;\n        const newAngle = angle90Deg - 90;\n        this.setState({\n            angle90Deg: newAngle,\n            angleGranular: 0,\n        });\n        // 2. Rotate the image\n        // Important to reset scale here, or cropper will get confused on further rotations\n        this.cropper.scale(1);\n        this.cropper.rotateTo(newAngle);\n        // 3. Fit the rotated image into the view\n        const canvasData = this.cropper.getCanvasData();\n        const containerData = this.cropper.getContainerData();\n        const newCanvasData = getCanvasDataThatFitsPerfectlyIntoContainer(containerData, canvasData);\n        this.cropper.setCanvasData(newCanvasData);\n        // 4. Make cropbox fully wrap the image\n        this.cropper.setCropBoxData(newCanvasData);\n    };\n    onRotateGranular = (ev) => {\n        // 1. Set state\n        const newGranularAngle = Number(ev.target.value);\n        this.setState({ angleGranular: newGranularAngle });\n        // 2. Rotate the image\n        const { angle90Deg } = this.state;\n        const newAngle = angle90Deg + newGranularAngle;\n        this.cropper.rotateTo(newAngle);\n        // 3. Scale the image so that it fits into the cropbox\n        const image = this.cropper.getImageData();\n        const scaleFactor = getScaleFactorThatRemovesDarkCorners(image.naturalWidth, image.naturalHeight, newGranularAngle);\n        // Preserve flip\n        const scaleFactorX = this.cropper.getImageData().scaleX < 0 ? -scaleFactor : scaleFactor;\n        this.cropper.scale(scaleFactorX, scaleFactor);\n    };\n    renderGranularRotate() {\n        const { i18n } = this.props;\n        const { angleGranular } = this.state;\n        return (_jsx(\"label\", { role: \"tooltip\", \"aria-label\": `${angleGranular}\u00BA`, \"data-microtip-position\": \"top\", className: \"uppy-ImageCropper-rangeWrapper\", children: _jsx(\"input\", { className: \"uppy-ImageCropper-range uppy-u-reset\", type: \"range\", onInput: this.onRotateGranular, onChange: this.onRotateGranular, value: angleGranular, min: \"-45\", max: \"45\", \"aria-label\": i18n('rotate') }) }));\n    }\n    renderRevert() {\n        const { i18n, opts } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('revert'), onClick: () => {\n                this.cropper.reset();\n                this.cropper.setAspectRatio(opts.cropperOptions.initialAspectRatio);\n                this.setState({ angle90Deg: 0, angleGranular: 0 });\n            }, children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }), _jsx(\"path\", { d: \"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z\" })] }) }));\n    }\n    renderRotate() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('rotate'), onClick: this.onRotate90Deg, children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M0 0h24v24H0V0zm0 0h24v24H0V0z\", fill: \"none\" }), _jsx(\"path\", { d: \"M14 10a2 2 0 012 2v7a2 2 0 01-2 2H6a2 2 0 01-2-2v-7a2 2 0 012-2h8zm0 1.75H6a.25.25 0 00-.243.193L5.75 12v7a.25.25 0 00.193.243L6 19.25h8a.25.25 0 00.243-.193L14.25 19v-7a.25.25 0 00-.193-.243L14 11.75zM12 .76V4c2.3 0 4.61.88 6.36 2.64a8.95 8.95 0 012.634 6.025L21 13a1 1 0 01-1.993.117L19 13h-.003a6.979 6.979 0 00-2.047-4.95 6.97 6.97 0 00-4.652-2.044L12 6v3.24L7.76 5 12 .76z\" })] }) }));\n    }\n    renderFlip() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('flipHorizontal'), onClick: () => this.cropper.scaleX(-this.cropper.getData().scaleX || -1), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }), _jsx(\"path\", { d: \"M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z\" })] }) }));\n    }\n    renderZoomIn() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('zoomIn'), onClick: () => this.cropper.zoom(0.1), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", height: \"24\", viewBox: \"0 0 24 24\", width: \"24\", children: [_jsx(\"path\", { d: \"M0 0h24v24H0V0z\", fill: \"none\" }), _jsx(\"path\", { d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" }), _jsx(\"path\", { d: \"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z\" })] }) }));\n    }\n    renderZoomOut() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('zoomOut'), onClick: () => this.cropper.zoom(-0.1), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M0 0h24v24H0V0z\", fill: \"none\" }), _jsx(\"path\", { d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z\" })] }) }));\n    }\n    renderCropSquare() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('aspectRatioSquare'), onClick: () => this.cropper.setAspectRatio(1), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }), _jsx(\"path\", { d: \"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" })] }) }));\n    }\n    renderCropWidescreen() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('aspectRatioLandscape'), onClick: () => this.cropper.setAspectRatio(16 / 9), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M 19,4.9999992 V 17.000001 H 4.9999998 V 6.9999992 H 19 m 0,-2 H 4.9999998 c -1.0999999,0 -1.9999999,0.9000001 -1.9999999,2 V 17.000001 c 0,1.1 0.9,2 1.9999999,2 H 19 c 1.1,0 2,-0.9 2,-2 V 6.9999992 c 0,-1.0999999 -0.9,-2 -2,-2 z\" }), _jsx(\"path\", { fill: \"none\", d: \"M0 0h24v24H0z\" })] }) }));\n    }\n    renderCropWidescreenVertical() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", \"aria-label\": i18n('aspectRatioPortrait'), className: \"uppy-u-reset uppy-c-btn\", onClick: () => this.cropper.setAspectRatio(9 / 16), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M 19.000001,19 H 6.999999 V 5 h 10.000002 v 14 m 2,0 V 5 c 0,-1.0999999 -0.9,-1.9999999 -2,-1.9999999 H 6.999999 c -1.1,0 -2,0.9 -2,1.9999999 v 14 c 0,1.1 0.9,2 2,2 h 10.000002 c 1.1,0 2,-0.9 2,-2 z\" }), _jsx(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" })] }) }));\n    }\n    render() {\n        const { currentImage, opts } = this.props;\n        const { actions } = opts;\n        const imageURL = URL.createObjectURL(currentImage.data);\n        return (_jsxs(\"div\", { className: \"uppy-ImageCropper\", children: [_jsx(\"div\", { className: \"uppy-ImageCropper-container\", children: _jsx(\"img\", { className: \"uppy-ImageCropper-image\", alt: currentImage.name, src: imageURL, ref: (ref) => {\n                            this.imgElement = ref;\n                        } }) }), _jsxs(\"div\", { className: \"uppy-ImageCropper-controls\", children: [actions.revert && this.renderRevert(), actions.rotate && this.renderRotate(), actions.granularRotate && this.renderGranularRotate(), actions.flip && this.renderFlip(), actions.zoomIn && this.renderZoomIn(), actions.zoomOut && this.renderZoomOut(), actions.cropSquare && this.renderCropSquare(), actions.cropWidescreen && this.renderCropWidescreen(), actions.cropWidescreenVertical &&\n                            this.renderCropWidescreenVertical()] })] }));\n    }\n}\n", "// See this cropperjs image to understand how container/image/canavas/cropbox relate to each other.\n// (https://github.com/fengyuanchen/cropperjs/blob/9b528a8baeaae876dc090085e37992a1683c6f34/docs/images/layers.jpg)\n//\nfunction getCanvasDataThatFitsPerfectlyIntoContainer(containerData, canvasData) {\n    // 1. Scale our canvas as much as possible\n    const widthRatio = containerData.width / canvasData.width;\n    const heightRatio = containerData.height / canvasData.height;\n    const scaleFactor = Math.min(widthRatio, heightRatio);\n    const newWidth = canvasData.width * scaleFactor;\n    const newHeight = canvasData.height * scaleFactor;\n    // 2. Center our canvas\n    const newLeft = (containerData.width - newWidth) / 2;\n    const newTop = (containerData.height - newHeight) / 2;\n    return {\n        width: newWidth,\n        height: newHeight,\n        left: newLeft,\n        top: newTop,\n    };\n}\nexport default getCanvasDataThatFitsPerfectlyIntoContainer;\n", "function toRadians(angle) {\n    return angle * (Math.PI / 180);\n}\nfunction getScaleFactorThatRemovesDarkCorners(w, h, granularAngle) {\n    const \u03B1 = Math.abs(toRadians(granularAngle));\n    const scaleFactor = Math.max((Math.sin(\u03B1) * w + Math.cos(\u03B1) * h) / h, (Math.sin(\u03B1) * h + Math.cos(\u03B1) * w) / w);\n    return scaleFactor;\n}\nexport default getScaleFactorThatRemovesDarkCorners;\n", "function limitCropboxMovementOnMove(canvas, cropbox, prevCropbox) {\n    // For the left boundary\n    if (cropbox.left < canvas.left) {\n        return {\n            left: canvas.left,\n            width: prevCropbox.width,\n        };\n    }\n    // For the top boundary\n    if (cropbox.top < canvas.top) {\n        return {\n            top: canvas.top,\n            height: prevCropbox.height,\n        };\n    }\n    // For the right boundary\n    if (cropbox.left + cropbox.width > canvas.left + canvas.width) {\n        return {\n            left: canvas.left + canvas.width - prevCropbox.width,\n            width: prevCropbox.width,\n        };\n    }\n    // For the bottom boundary\n    if (cropbox.top + cropbox.height > canvas.top + canvas.height) {\n        return {\n            top: canvas.top + canvas.height - prevCropbox.height,\n            height: prevCropbox.height,\n        };\n    }\n    return null;\n}\nexport default limitCropboxMovementOnMove;\n", "function limitCropboxMovementOnResize(canvas, cropboxData, prevCropbox) {\n    // For the left boundary\n    if (cropboxData.left < canvas.left) {\n        return {\n            left: canvas.left,\n            width: prevCropbox.left + prevCropbox.width - canvas.left,\n        };\n    }\n    // For the top boundary\n    if (cropboxData.top < canvas.top) {\n        return {\n            top: canvas.top,\n            height: prevCropbox.top + prevCropbox.height - canvas.top,\n        };\n    }\n    // For the right boundary\n    if (cropboxData.left + cropboxData.width > canvas.left + canvas.width) {\n        return {\n            left: prevCropbox.left,\n            width: canvas.left + canvas.width - prevCropbox.left,\n        };\n    }\n    // For the bottom boundary\n    if (cropboxData.top + cropboxData.height > canvas.top + canvas.height) {\n        return {\n            top: prevCropbox.top,\n            height: canvas.top + canvas.height - prevCropbox.top,\n        };\n    }\n    return null;\n}\nexport default limitCropboxMovementOnResize;\n", "export default {\n    strings: {\n        revert: 'Reset',\n        rotate: 'Rotate 90\u00B0',\n        zoomIn: 'Zoom in',\n        zoomOut: 'Zoom out',\n        flipHorizontal: 'Flip horizontally',\n        aspectRatioSquare: 'Crop square',\n        aspectRatioLandscape: 'Crop landscape (16:9)',\n        aspectRatioPortrait: 'Crop portrait (9:16)',\n    },\n};\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { UIPlugin } from '@uppy/core';\nimport { h } from 'preact';\nimport packageJson from '../package.json' with { type: 'json' };\nimport Editor from './Editor.js';\nimport locale from './locale.js';\nconst defaultCropperOptions = {\n    viewMode: 0,\n    background: false,\n    autoCropArea: 1,\n    responsive: true,\n    minCropBoxWidth: 70,\n    minCropBoxHeight: 70,\n    croppedCanvasOptions: {},\n    initialAspectRatio: 0,\n};\nconst defaultActions = {\n    revert: true,\n    rotate: true,\n    granularRotate: true,\n    flip: true,\n    zoomIn: true,\n    zoomOut: true,\n    cropSquare: true,\n    cropWidescreen: true,\n    cropWidescreenVertical: true,\n};\nconst defaultOptions = {\n    // `quality: 1` increases the image size by orders of magnitude - 0.8 seems to be the sweet spot.\n    // see https://github.com/fengyuanchen/cropperjs/issues/538#issuecomment-1776279427\n    quality: 0.8,\n    actions: defaultActions,\n    cropperOptions: defaultCropperOptions,\n};\nexport default class ImageEditor extends UIPlugin {\n    static VERSION = packageJson.version;\n    cropper;\n    constructor(uppy, opts) {\n        super(uppy, {\n            ...defaultOptions,\n            ...opts,\n            actions: {\n                ...defaultActions,\n                ...opts?.actions,\n            },\n            cropperOptions: {\n                ...defaultCropperOptions,\n                ...opts?.cropperOptions,\n            },\n        });\n        this.id = this.opts.id || 'ImageEditor';\n        this.title = 'Image Editor';\n        this.type = 'editor';\n        this.defaultLocale = locale;\n        this.i18nInit();\n    }\n    canEditFile(file) {\n        if (!file.type || file.isRemote) {\n            return false;\n        }\n        const fileTypeSpecific = file.type.split('/')[1];\n        if (/^(jpe?g|gif|png|bmp|webp)$/.test(fileTypeSpecific)) {\n            return true;\n        }\n        return false;\n    }\n    save = () => {\n        const saveBlobCallback = (blob) => {\n            const { currentImage } = this.getPluginState();\n            this.uppy.setFileState(currentImage.id, {\n                // Reinserting image's name and type, because .toBlob loses both.\n                data: new File([blob], currentImage.name ?? this.i18n('unnamed'), {\n                    type: blob.type,\n                }),\n                size: blob.size,\n                preview: undefined,\n            });\n            const updatedFile = this.uppy.getFile(currentImage.id);\n            this.uppy.emit('thumbnail:request', updatedFile);\n            this.setPluginState({\n                currentImage: updatedFile,\n            });\n            this.uppy.emit('file-editor:complete', updatedFile);\n        };\n        const { currentImage } = this.getPluginState();\n        // Fixes black 1px lines on odd-width images.\n        // This should be removed when cropperjs fixes this issue.\n        // (See https://github.com/transloadit/uppy/issues/4305 and https://github.com/fengyuanchen/cropperjs/issues/551).\n        const croppedCanvas = this.cropper.getCroppedCanvas({});\n        if (croppedCanvas.width % 2 !== 0) {\n            this.cropper.setData({ width: croppedCanvas.width - 1 });\n        }\n        if (croppedCanvas.height % 2 !== 0) {\n            this.cropper.setData({ height: croppedCanvas.height - 1 });\n        }\n        this.cropper\n            .getCroppedCanvas(this.opts.cropperOptions.croppedCanvasOptions)\n            .toBlob(saveBlobCallback, currentImage.type, this.opts.quality);\n    };\n    storeCropperInstance = (cropper) => {\n        this.cropper = cropper;\n    };\n    selectFile = (file) => {\n        this.uppy.emit('file-editor:start', file);\n        this.setPluginState({\n            currentImage: file,\n        });\n    };\n    install() {\n        this.setPluginState({\n            currentImage: null,\n        });\n        const { target } = this.opts;\n        if (target) {\n            this.mount(target, this);\n        }\n    }\n    uninstall() {\n        const { currentImage } = this.getPluginState();\n        if (currentImage) {\n            const file = this.uppy.getFile(currentImage.id);\n            this.uppy.emit('file-editor:cancel', file);\n        }\n        this.unmount();\n    }\n    render() {\n        const { currentImage } = this.getPluginState();\n        if (currentImage === null || currentImage.isRemote) {\n            return null;\n        }\n        return (_jsx(Editor, { currentImage: currentImage, storeCropperInstance: this.storeCropperInstance, save: this.save, opts: this.opts, i18n: this.i18n }));\n    }\n}\n", "/**\n * Create a wrapper around an event emitter with a `remove` method to remove\n * all events that were added using the wrapped emitter.\n */\nexport default class EventManager {\n    #uppy;\n    #events = [];\n    constructor(uppy) {\n        this.#uppy = uppy;\n    }\n    on(event, fn) {\n        this.#events.push([event, fn]);\n        return this.#uppy.on(event, fn);\n    }\n    remove() {\n        for (const [event, fn] of this.#events.splice(0)) {\n            this.#uppy.off(event, fn);\n        }\n    }\n    onFilePause(fileID, cb) {\n        this.on('upload-pause', (file, isPaused) => {\n            if (fileID === file?.id) {\n                cb(isPaused);\n            }\n        });\n    }\n    onFileRemove(fileID, cb) {\n        this.on('file-removed', (file) => {\n            if (fileID === file.id)\n                cb(file.id);\n        });\n    }\n    onPause(fileID, cb) {\n        this.on('upload-pause', (file, isPaused) => {\n            if (fileID === file?.id) {\n                // const isPaused = this.#uppy.pauseResume(fileID)\n                cb(isPaused);\n            }\n        });\n    }\n    onRetry(fileID, cb) {\n        this.on('upload-retry', (file) => {\n            if (fileID === file?.id) {\n                cb();\n            }\n        });\n    }\n    onRetryAll(fileID, cb) {\n        this.on('retry-all', () => {\n            if (!this.#uppy.getFile(fileID))\n                return;\n            cb();\n        });\n    }\n    onPauseAll(fileID, cb) {\n        this.on('pause-all', () => {\n            if (!this.#uppy.getFile(fileID))\n                return;\n            cb();\n        });\n    }\n    onCancelAll(fileID, eventHandler) {\n        this.on('cancel-all', (...args) => {\n            if (!this.#uppy.getFile(fileID))\n                return;\n            eventHandler(...args);\n        });\n    }\n    onResumeAll(fileID, cb) {\n        this.on('resume-all', () => {\n            if (!this.#uppy.getFile(fileID))\n                return;\n            cb();\n        });\n    }\n}\n", "function createCancelError(cause) {\n    return new Error('Cancelled', { cause });\n}\nfunction abortOn(signal) {\n    if (signal != null) {\n        const abortPromise = () => this.abort(signal.reason);\n        signal.addEventListener('abort', abortPromise, { once: true });\n        const removeAbortListener = () => {\n            signal.removeEventListener('abort', abortPromise);\n        };\n        this.then?.(removeAbortListener, removeAbortListener);\n    }\n    return this;\n}\nexport class RateLimitedQueue {\n    #activeRequests = 0;\n    #queuedHandlers = [];\n    #paused = false;\n    #pauseTimer;\n    #downLimit = 1;\n    #upperLimit;\n    #rateLimitingTimer;\n    limit;\n    constructor(limit) {\n        if (typeof limit !== 'number' || limit === 0) {\n            this.limit = Infinity;\n        }\n        else {\n            this.limit = limit;\n        }\n    }\n    #call(fn) {\n        this.#activeRequests += 1;\n        let done = false;\n        let cancelActive;\n        try {\n            cancelActive = fn();\n        }\n        catch (err) {\n            this.#activeRequests -= 1;\n            throw err;\n        }\n        return {\n            abort: (cause) => {\n                if (done)\n                    return;\n                done = true;\n                this.#activeRequests -= 1;\n                cancelActive?.(cause);\n                this.#queueNext();\n            },\n            done: () => {\n                if (done)\n                    return;\n                done = true;\n                this.#activeRequests -= 1;\n                this.#queueNext();\n            },\n        };\n    }\n    #queueNext() {\n        // Do it soon but not immediately, this allows clearing out the entire queue synchronously\n        // one by one without continuously _advancing_ it (and starting new tasks before immediately\n        // aborting them)\n        queueMicrotask(() => this.#next());\n    }\n    #next() {\n        if (this.#paused || this.#activeRequests >= this.limit) {\n            return;\n        }\n        if (this.#queuedHandlers.length === 0) {\n            return;\n        }\n        // Dispatch the next request, and update the abort/done handlers\n        // so that cancelling it does the Right Thing (and doesn't just try\n        // to dequeue an already-running request).\n        const next = this.#queuedHandlers.shift();\n        if (next == null) {\n            throw new Error('Invariant violation: next is null');\n        }\n        const handler = this.#call(next.fn);\n        next.abort = handler.abort;\n        next.done = handler.done;\n    }\n    #queue(fn, options) {\n        const handler = {\n            fn,\n            priority: options?.priority || 0,\n            abort: () => {\n                this.#dequeue(handler);\n            },\n            done: () => {\n                throw new Error('Cannot mark a queued request as done: this indicates a bug');\n            },\n        };\n        const index = this.#queuedHandlers.findIndex((other) => {\n            return handler.priority > other.priority;\n        });\n        if (index === -1) {\n            this.#queuedHandlers.push(handler);\n        }\n        else {\n            this.#queuedHandlers.splice(index, 0, handler);\n        }\n        return handler;\n    }\n    #dequeue(handler) {\n        const index = this.#queuedHandlers.indexOf(handler);\n        if (index !== -1) {\n            this.#queuedHandlers.splice(index, 1);\n        }\n    }\n    run(fn, queueOptions) {\n        if (!this.#paused && this.#activeRequests < this.limit) {\n            return this.#call(fn);\n        }\n        return this.#queue(fn, queueOptions);\n    }\n    wrapSyncFunction(fn, queueOptions) {\n        return (...args) => {\n            const queuedRequest = this.run(() => {\n                fn(...args);\n                queueMicrotask(() => queuedRequest.done());\n                return () => { };\n            }, queueOptions);\n            return {\n                abortOn,\n                abort() {\n                    queuedRequest.abort();\n                },\n            };\n        };\n    }\n    wrapPromiseFunction(fn, queueOptions) {\n        return (...args) => {\n            let queuedRequest;\n            const outerPromise = new Promise((resolve, reject) => {\n                queuedRequest = this.run(() => {\n                    let cancelError;\n                    let innerPromise;\n                    try {\n                        innerPromise = Promise.resolve(fn(...args));\n                    }\n                    catch (err) {\n                        innerPromise = Promise.reject(err);\n                    }\n                    innerPromise.then((result) => {\n                        if (cancelError) {\n                            reject(cancelError);\n                        }\n                        else {\n                            queuedRequest.done();\n                            resolve(result);\n                        }\n                    }, (err) => {\n                        if (cancelError) {\n                            reject(cancelError);\n                        }\n                        else {\n                            queuedRequest.done();\n                            reject(err);\n                        }\n                    });\n                    return (cause) => {\n                        cancelError = createCancelError(cause);\n                    };\n                }, queueOptions);\n            });\n            outerPromise.abort = (cause) => {\n                queuedRequest.abort(cause);\n            };\n            outerPromise.abortOn = abortOn;\n            return outerPromise;\n        };\n    }\n    resume() {\n        this.#paused = false;\n        clearTimeout(this.#pauseTimer);\n        for (let i = 0; i < this.limit; i++) {\n            this.#queueNext();\n        }\n    }\n    #resume = () => this.resume();\n    /**\n     * Freezes the queue for a while or indefinitely.\n     *\n     * @param {number | null } [duration] Duration for the pause to happen, in milliseconds.\n     *                                    If omitted, the queue won't resume automatically.\n     */\n    pause(duration = null) {\n        this.#paused = true;\n        clearTimeout(this.#pauseTimer);\n        if (duration != null) {\n            this.#pauseTimer = setTimeout(this.#resume, duration);\n        }\n    }\n    /**\n     * Pauses the queue for a duration, and lower the limit of concurrent requests\n     * when the queue resumes. When the queue resumes, it tries to progressively\n     * increase the limit in `this.#increaseLimit` until another call is made to\n     * `this.rateLimit`.\n     * Call this function when using the RateLimitedQueue for network requests and\n     * the remote server responds with 429 HTTP code.\n     *\n     * @param {number} duration in milliseconds.\n     */\n    rateLimit(duration) {\n        clearTimeout(this.#rateLimitingTimer);\n        this.pause(duration);\n        if (this.limit > 1 && Number.isFinite(this.limit)) {\n            this.#upperLimit = this.limit - 1;\n            this.limit = this.#downLimit;\n            this.#rateLimitingTimer = setTimeout(this.#increaseLimit, duration);\n        }\n    }\n    #increaseLimit = () => {\n        if (this.#paused) {\n            this.#rateLimitingTimer = setTimeout(this.#increaseLimit, 0);\n            return;\n        }\n        this.#downLimit = this.limit;\n        this.limit = Math.ceil((this.#upperLimit + this.#downLimit) / 2);\n        for (let i = this.#downLimit; i <= this.limit; i++) {\n            this.#queueNext();\n        }\n        if (this.#upperLimit - this.#downLimit > 3) {\n            this.#rateLimitingTimer = setTimeout(this.#increaseLimit, 2000);\n        }\n        else {\n            this.#downLimit = Math.floor(this.#downLimit / 2);\n        }\n    };\n    get isPaused() {\n        return this.#paused;\n    }\n}\nexport const internalRateLimitedQueue = Symbol('__queue');\n", "class NetworkError extends Error {\n    cause;\n    isNetworkError;\n    request;\n    constructor(error, xhr = null) {\n        super(`This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.`);\n        this.cause = error;\n        this.isNetworkError = true;\n        this.request = xhr;\n    }\n}\nexport default NetworkError;\n", "function isNetworkError(xhr) {\n    if (!xhr) {\n        return false;\n    }\n    return (xhr.readyState !== 0 && xhr.readyState !== 4) || xhr.status === 0;\n}\nexport default isNetworkError;\n", "/**\n * Helper to abort upload requests if there has not been any progress for `timeout` ms.\n * Create an instance using `timer = new ProgressTimeout(10000, onTimeout)`\n * Call `timer.progress()` to signal that there has been progress of any kind.\n * Call `timer.done()` when the upload has completed.\n */\nclass ProgressTimeout {\n    #aliveTimer;\n    #isDone = false;\n    #onTimedOut;\n    #timeout;\n    constructor(timeout, timeoutHandler) {\n        this.#timeout = timeout;\n        this.#onTimedOut = () => timeoutHandler(timeout);\n    }\n    progress() {\n        // Some browsers fire another progress event when the upload is\n        // cancelled, so we have to ignore progress after the timer was\n        // told to stop.\n        if (this.#isDone)\n            return;\n        if (this.#timeout > 0) {\n            clearTimeout(this.#aliveTimer);\n            this.#aliveTimer = setTimeout(this.#onTimedOut, this.#timeout);\n        }\n    }\n    done() {\n        if (!this.#isDone) {\n            clearTimeout(this.#aliveTimer);\n            this.#aliveTimer = undefined;\n            this.#isDone = true;\n        }\n    }\n}\nexport default ProgressTimeout;\n", "import NetworkError from './NetworkError.js';\nimport ProgressTimeout from './ProgressTimeout.js';\nconst noop = () => { };\n/**\n * Fetches data from a specified URL using XMLHttpRequest, with optional retry functionality and progress tracking.\n *\n * @param url The URL to send the request to.\n * @param options Optional settings for the fetch operation.\n */\nexport function fetcher(url, options = {}) {\n    const { body = null, headers = {}, method = 'GET', onBeforeRequest = noop, onUploadProgress = noop, shouldRetry = () => true, onAfterResponse = noop, onTimeout = noop, responseType, retries = 3, signal = null, timeout = 30_000, withCredentials = false, } = options;\n    // 300 ms, 600 ms, 1200 ms, 2400 ms, 4800 ms\n    const delay = (attempt) => 0.3 * 2 ** (attempt - 1) * 1000;\n    const timer = new ProgressTimeout(timeout, onTimeout);\n    function requestWithRetry(retryCount = 0) {\n        // biome-ignore lint/suspicious/noAsyncPromiseExecutor: it's fine\n        return new Promise(async (resolve, reject) => {\n            const xhr = new XMLHttpRequest();\n            const onError = (error) => {\n                if (shouldRetry(xhr) && retryCount < retries) {\n                    setTimeout(() => {\n                        requestWithRetry(retryCount + 1).then(resolve, reject);\n                    }, delay(retryCount));\n                }\n                else {\n                    timer.done();\n                    reject(error);\n                }\n            };\n            xhr.open(method, url, true);\n            xhr.withCredentials = withCredentials;\n            if (responseType) {\n                xhr.responseType = responseType;\n            }\n            signal?.addEventListener('abort', () => {\n                xhr.abort();\n                // Using DOMException for abort errors aligns with\n                // the convention established by the Fetch API.\n                reject(new DOMException('Aborted', 'AbortError'));\n            });\n            xhr.onload = async () => {\n                try {\n                    await onAfterResponse(xhr, retryCount);\n                }\n                catch (err) {\n                    // This is important as we need to emit the xhr\n                    // over the upload-error event.\n                    err.request = xhr;\n                    onError(err);\n                    return;\n                }\n                if (xhr.status >= 200 && xhr.status < 300) {\n                    timer.done();\n                    resolve(xhr);\n                }\n                else if (shouldRetry(xhr) && retryCount < retries) {\n                    setTimeout(() => {\n                        requestWithRetry(retryCount + 1).then(resolve, reject);\n                    }, delay(retryCount));\n                }\n                else {\n                    timer.done();\n                    reject(new NetworkError(xhr.statusText, xhr));\n                }\n            };\n            xhr.onerror = () => onError(new NetworkError(xhr.statusText, xhr));\n            xhr.upload.onprogress = (event) => {\n                timer.progress();\n                onUploadProgress(event);\n            };\n            if (headers) {\n                Object.keys(headers).forEach((key) => {\n                    xhr.setRequestHeader(key, headers[key]);\n                });\n            }\n            await onBeforeRequest(xhr, retryCount);\n            xhr.send(body);\n        });\n    }\n    return requestWithRetry();\n}\n", "export function filterNonFailedFiles(files) {\n    const hasError = (file) => 'error' in file && !!file.error;\n    return files.filter((file) => !hasError(file));\n}\n// Don't double-emit upload-started for Golden Retriever-restored files that were already started\nexport function filterFilesToEmitUploadStarted(files) {\n    return files.filter((file) => !file.progress?.uploadStarted || !file.isRestored);\n}\n", "export default function getAllowedMetaFields(fields, meta) {\n    if (fields === true) {\n        return Object.keys(meta);\n    }\n    if (Array.isArray(fields)) {\n        return fields;\n    }\n    return [];\n}\n", "export default {\n  strings: {\n    // Shown in the Informer if an upload is being canceled because it stalled for too long.\n    uploadStalled: 'Upload has not made any progress for %{seconds} seconds. You may want to retry it.'\n  }\n};", "function _classPrivateFieldLooseBase(e, t) { if (!{}.hasOwnProperty.call(e, t)) throw new TypeError(\"attempted to use private field on non-instance\"); return e; }\nvar id = 0;\nfunction _classPrivateFieldLooseKey(e) { return \"__private_\" + id++ + \"_\" + e; }\nimport { BasePlugin } from '@uppy/core';\nimport EventManager from '@uppy/core/lib/EventManager.js';\nimport { RateLimitedQueue, internalRateLimitedQueue\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore untyped\n} from '@uppy/utils/lib/RateLimitedQueue';\nimport NetworkError from '@uppy/utils/lib/NetworkError';\nimport isNetworkError from '@uppy/utils/lib/isNetworkError';\nimport { fetcher } from '@uppy/utils/lib/fetcher';\nimport { filterNonFailedFiles, filterFilesToEmitUploadStarted } from '@uppy/utils/lib/fileFilters';\nimport getAllowedMetaFields from '@uppy/utils/lib/getAllowedMetaFields';\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore We don't want TS to generate types for the package.json\nconst packageJson = {\n  \"version\": \"4.3.3\"\n};\nimport locale from './locale.js';\nfunction buildResponseError(xhr, err) {\n  let error = err;\n  // No error message\n  if (!error) error = new Error('Upload error');\n  // Got an error message string\n  if (typeof error === 'string') error = new Error(error);\n  // Got something else\n  if (!(error instanceof Error)) {\n    error = Object.assign(new Error('Upload error'), {\n      data: error\n    });\n  }\n  if (isNetworkError(xhr)) {\n    error = new NetworkError(error, xhr);\n    return error;\n  }\n\n  // @ts-expect-error request can only be set on NetworkError\n  // but we use NetworkError to distinguish between errors.\n  error.request = xhr;\n  return error;\n}\n\n/**\n * Set `data.type` in the blob to `file.meta.type`,\n * because we might have detected a more accurate file type in Uppy\n * https://stackoverflow.com/a/50875615\n */\nfunction setTypeInBlob(file) {\n  const dataWithUpdatedType = file.data.slice(0, file.data.size, file.meta.type);\n  return dataWithUpdatedType;\n}\nconst defaultOptions = {\n  formData: true,\n  fieldName: 'file',\n  method: 'post',\n  allowedMetaFields: true,\n  bundle: false,\n  headers: {},\n  timeout: 30 * 1000,\n  limit: 5,\n  withCredentials: false,\n  responseType: ''\n};\nvar _getFetcher = /*#__PURE__*/_classPrivateFieldLooseKey(\"getFetcher\");\nvar _uploadLocalFile = /*#__PURE__*/_classPrivateFieldLooseKey(\"uploadLocalFile\");\nvar _uploadBundle = /*#__PURE__*/_classPrivateFieldLooseKey(\"uploadBundle\");\nvar _getCompanionClientArgs = /*#__PURE__*/_classPrivateFieldLooseKey(\"getCompanionClientArgs\");\nvar _uploadFiles = /*#__PURE__*/_classPrivateFieldLooseKey(\"uploadFiles\");\nvar _handleUpload = /*#__PURE__*/_classPrivateFieldLooseKey(\"handleUpload\");\nexport default class XHRUpload extends BasePlugin {\n  constructor(uppy, _opts) {\n    super(uppy, {\n      ...defaultOptions,\n      fieldName: _opts.bundle ? 'files[]' : 'file',\n      ..._opts\n    });\n    Object.defineProperty(this, _uploadFiles, {\n      value: _uploadFiles2\n    });\n    Object.defineProperty(this, _getCompanionClientArgs, {\n      value: _getCompanionClientArgs2\n    });\n    Object.defineProperty(this, _uploadBundle, {\n      value: _uploadBundle2\n    });\n    Object.defineProperty(this, _uploadLocalFile, {\n      value: _uploadLocalFile2\n    });\n    Object.defineProperty(this, _getFetcher, {\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, _handleUpload, {\n      writable: true,\n      value: async fileIDs => {\n        if (fileIDs.length === 0) {\n          this.uppy.log('[XHRUpload] No files to upload!');\n          return;\n        }\n\n        // No limit configured by the user, and no RateLimitedQueue passed in by a \"parent\" plugin\n        // (basically just AwsS3) using the internal symbol\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore untyped internal\n        if (this.opts.limit === 0 && !this.opts[internalRateLimitedQueue]) {\n          this.uppy.log('[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0', 'warning');\n        }\n        this.uppy.log('[XHRUpload] Uploading...');\n        const files = this.uppy.getFilesByIds(fileIDs);\n        const filesFiltered = filterNonFailedFiles(files);\n        const filesToEmit = filterFilesToEmitUploadStarted(filesFiltered);\n        this.uppy.emit('upload-start', filesToEmit);\n        if (this.opts.bundle) {\n          // if bundle: true, we don\u2019t support remote uploads\n          const isSomeFileRemote = filesFiltered.some(file => file.isRemote);\n          if (isSomeFileRemote) {\n            throw new Error('Can\u2019t upload remote files when the `bundle: true` option is set');\n          }\n          if (typeof this.opts.headers === 'function') {\n            throw new TypeError('`headers` may not be a function when the `bundle: true` option is set');\n          }\n          await _classPrivateFieldLooseBase(this, _uploadBundle)[_uploadBundle](filesFiltered);\n        } else {\n          await _classPrivateFieldLooseBase(this, _uploadFiles)[_uploadFiles](filesFiltered);\n        }\n      }\n    });\n    this.type = 'uploader';\n    this.id = this.opts.id || 'XHRUpload';\n    this.defaultLocale = locale;\n    this.i18nInit();\n\n    // Simultaneous upload limiting is shared across all uploads with this plugin.\n    if (internalRateLimitedQueue in this.opts) {\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore untyped internal\n      this.requests = this.opts[internalRateLimitedQueue];\n    } else {\n      this.requests = new RateLimitedQueue(this.opts.limit);\n    }\n    if (this.opts.bundle && !this.opts.formData) {\n      throw new Error('`opts.formData` must be true when `opts.bundle` is enabled.');\n    }\n    if (this.opts.bundle && typeof this.opts.headers === 'function') {\n      throw new Error('`opts.headers` can not be a function when the `bundle: true` option is set.');\n    }\n    if ((_opts == null ? void 0 : _opts.allowedMetaFields) === undefined && 'metaFields' in this.opts) {\n      throw new Error('The `metaFields` option has been renamed to `allowedMetaFields`.');\n    }\n    this.uploaderEvents = Object.create(null);\n    /**\n     * xhr-upload wrapper for `fetcher` to handle user options\n     * `validateStatus`, `getResponseError`, `getResponseData`\n     * and to emit `upload-progress`, `upload-error`, and `upload-success` events.\n     */\n    _classPrivateFieldLooseBase(this, _getFetcher)[_getFetcher] = files => {\n      return async (url, options) => {\n        try {\n          var _this$opts$getRespons, _this$opts2, _body3;\n          const res = await fetcher(url, {\n            ...options,\n            onBeforeRequest: (xhr, retryCount) => {\n              var _this$opts$onBeforeRe, _this$opts;\n              return (_this$opts$onBeforeRe = (_this$opts = this.opts).onBeforeRequest) == null ? void 0 : _this$opts$onBeforeRe.call(_this$opts, xhr, retryCount, files);\n            },\n            shouldRetry: this.opts.shouldRetry,\n            onAfterResponse: this.opts.onAfterResponse,\n            onTimeout: timeout => {\n              const seconds = Math.ceil(timeout / 1000);\n              const error = new Error(this.i18n('uploadStalled', {\n                seconds\n              }));\n              this.uppy.emit('upload-stalled', error, files);\n            },\n            onUploadProgress: event => {\n              if (event.lengthComputable) {\n                for (const {\n                  id\n                } of files) {\n                  var _file$progress$upload;\n                  const file = this.uppy.getFile(id);\n                  this.uppy.emit('upload-progress', file, {\n                    uploadStarted: (_file$progress$upload = file.progress.uploadStarted) != null ? _file$progress$upload : 0,\n                    bytesUploaded: event.loaded / event.total * file.size,\n                    bytesTotal: file.size\n                  });\n                }\n              }\n            }\n          });\n          let body = await ((_this$opts$getRespons = (_this$opts2 = this.opts).getResponseData) == null ? void 0 : _this$opts$getRespons.call(_this$opts2, res));\n          if (res.responseType === 'json') {\n            var _body;\n            (_body = body) != null ? _body : body = res.response;\n          } else {\n            try {\n              var _body2;\n              (_body2 = body) != null ? _body2 : body = JSON.parse(res.responseText);\n            } catch (cause) {\n              throw new Error('@uppy/xhr-upload expects a JSON response (with a `url` property). To parse non-JSON responses, use `getResponseData` to turn your response into JSON.', {\n                cause\n              });\n            }\n          }\n          const uploadURL = typeof ((_body3 = body) == null ? void 0 : _body3.url) === 'string' ? body.url : undefined;\n          for (const {\n            id\n          } of files) {\n            this.uppy.emit('upload-success', this.uppy.getFile(id), {\n              status: res.status,\n              body,\n              uploadURL\n            });\n          }\n          return res;\n        } catch (error) {\n          if (error.name === 'AbortError') {\n            return undefined;\n          }\n          const request = error.request;\n          for (const file of files) {\n            this.uppy.emit('upload-error', this.uppy.getFile(file.id), buildResponseError(request, error), request);\n          }\n          throw error;\n        }\n      };\n    };\n  }\n  getOptions(file) {\n    const overrides = this.uppy.getState().xhrUpload;\n    const {\n      headers\n    } = this.opts;\n    const opts = {\n      ...this.opts,\n      ...(overrides || {}),\n      ...(file.xhrUpload || {}),\n      headers: {}\n    };\n    // Support for `headers` as a function, only in the XHRUpload settings.\n    // Options set by other plugins in Uppy state or on the files themselves are still merged in afterward.\n    //\n    // ```js\n    // headers: (file) => ({ expires: file.meta.expires })\n    // ```\n    if (typeof headers === 'function') {\n      opts.headers = headers(file);\n    } else {\n      Object.assign(opts.headers, this.opts.headers);\n    }\n    if (overrides) {\n      Object.assign(opts.headers, overrides.headers);\n    }\n    if (file.xhrUpload) {\n      Object.assign(opts.headers, file.xhrUpload.headers);\n    }\n    return opts;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  addMetadata(formData, meta, opts) {\n    const allowedMetaFields = getAllowedMetaFields(opts.allowedMetaFields, meta);\n    allowedMetaFields.forEach(item => {\n      const value = meta[item];\n      if (Array.isArray(value)) {\n        // In this case we don't transform `item` to add brackets, it's up to\n        // the user to add the brackets so it won't be overridden.\n        value.forEach(subItem => formData.append(item, subItem));\n      } else {\n        formData.append(item, value);\n      }\n    });\n  }\n  createFormDataUpload(file, opts) {\n    const formPost = new FormData();\n    this.addMetadata(formPost, file.meta, opts);\n    const dataWithUpdatedType = setTypeInBlob(file);\n    if (file.name) {\n      formPost.append(opts.fieldName, dataWithUpdatedType, file.meta.name);\n    } else {\n      formPost.append(opts.fieldName, dataWithUpdatedType);\n    }\n    return formPost;\n  }\n  createBundledUpload(files, opts) {\n    const formPost = new FormData();\n    const {\n      meta\n    } = this.uppy.getState();\n    this.addMetadata(formPost, meta, opts);\n    files.forEach(file => {\n      const options = this.getOptions(file);\n      const dataWithUpdatedType = setTypeInBlob(file);\n      if (file.name) {\n        formPost.append(options.fieldName, dataWithUpdatedType, file.name);\n      } else {\n        formPost.append(options.fieldName, dataWithUpdatedType);\n      }\n    });\n    return formPost;\n  }\n  install() {\n    if (this.opts.bundle) {\n      const {\n        capabilities\n      } = this.uppy.getState();\n      this.uppy.setState({\n        capabilities: {\n          ...capabilities,\n          individualCancellation: false\n        }\n      });\n    }\n    this.uppy.addUploader(_classPrivateFieldLooseBase(this, _handleUpload)[_handleUpload]);\n  }\n  uninstall() {\n    if (this.opts.bundle) {\n      const {\n        capabilities\n      } = this.uppy.getState();\n      this.uppy.setState({\n        capabilities: {\n          ...capabilities,\n          individualCancellation: true\n        }\n      });\n    }\n    this.uppy.removeUploader(_classPrivateFieldLooseBase(this, _handleUpload)[_handleUpload]);\n  }\n}\nasync function _uploadLocalFile2(file) {\n  const events = new EventManager(this.uppy);\n  const controller = new AbortController();\n  const uppyFetch = this.requests.wrapPromiseFunction(async () => {\n    const opts = this.getOptions(file);\n    const fetch = _classPrivateFieldLooseBase(this, _getFetcher)[_getFetcher]([file]);\n    const body = opts.formData ? this.createFormDataUpload(file, opts) : file.data;\n    return fetch(opts.endpoint, {\n      ...opts,\n      body,\n      signal: controller.signal\n    });\n  });\n  events.onFileRemove(file.id, () => controller.abort());\n  events.onCancelAll(file.id, () => {\n    controller.abort();\n  });\n  try {\n    await uppyFetch().abortOn(controller.signal);\n  } catch (error) {\n    // TODO: create formal error with name 'AbortError' (this comes from RateLimitedQueue)\n    if (error.message !== 'Cancelled') {\n      throw error;\n    }\n  } finally {\n    events.remove();\n  }\n}\nasync function _uploadBundle2(files) {\n  const controller = new AbortController();\n  const uppyFetch = this.requests.wrapPromiseFunction(async () => {\n    var _this$uppy$getState$x;\n    const optsFromState = (_this$uppy$getState$x = this.uppy.getState().xhrUpload) != null ? _this$uppy$getState$x : {};\n    const fetch = _classPrivateFieldLooseBase(this, _getFetcher)[_getFetcher](files);\n    const body = this.createBundledUpload(files, {\n      ...this.opts,\n      ...optsFromState\n    });\n    return fetch(this.opts.endpoint, {\n      // headers can't be a function with bundle: true\n      ...this.opts,\n      body,\n      signal: controller.signal\n    });\n  });\n  function abort() {\n    controller.abort();\n  }\n\n  // We only need to abort on cancel all because\n  // individual cancellations are not possible with bundle: true\n  this.uppy.once('cancel-all', abort);\n  try {\n    await uppyFetch().abortOn(controller.signal);\n  } catch (error) {\n    // TODO: create formal error with name 'AbortError' (this comes from RateLimitedQueue)\n    if (error.message !== 'Cancelled') {\n      throw error;\n    }\n  } finally {\n    this.uppy.off('cancel-all', abort);\n  }\n}\nfunction _getCompanionClientArgs2(file) {\n  var _file$remote;\n  const opts = this.getOptions(file);\n  const allowedMetaFields = getAllowedMetaFields(opts.allowedMetaFields, file.meta);\n  return {\n    ...((_file$remote = file.remote) == null ? void 0 : _file$remote.body),\n    protocol: 'multipart',\n    endpoint: opts.endpoint,\n    size: file.data.size,\n    fieldname: opts.fieldName,\n    metadata: Object.fromEntries(allowedMetaFields.map(name => [name, file.meta[name]])),\n    httpMethod: opts.method,\n    useFormData: opts.formData,\n    headers: opts.headers\n  };\n}\nasync function _uploadFiles2(files) {\n  await Promise.allSettled(files.map(file => {\n    if (file.isRemote) {\n      const getQueue = () => this.requests;\n      const controller = new AbortController();\n      const removedHandler = removedFile => {\n        if (removedFile.id === file.id) controller.abort();\n      };\n      this.uppy.on('file-removed', removedHandler);\n      const uploadPromise = this.uppy.getRequestClientForFile(file).uploadRemoteFile(file, _classPrivateFieldLooseBase(this, _getCompanionClientArgs)[_getCompanionClientArgs](file), {\n        signal: controller.signal,\n        getQueue\n      });\n      this.requests.wrapSyncFunction(() => {\n        this.uppy.off('file-removed', removedHandler);\n      }, {\n        priority: -1\n      })();\n      return uploadPromise;\n    }\n    return _classPrivateFieldLooseBase(this, _uploadLocalFile)[_uploadLocalFile](file);\n  }));\n}\n// eslint-disable-next-line global-require\nXHRUpload.VERSION = packageJson.version;", "import DOMPurify from 'dompurify';\n\nexport default class {\n  static fromTemplate(template) {\n    if (DOMPurify.isSupported) {\n      return DOMPurify.sanitize(template, { USE_PROFILES: { html: true, svg: true }, RETURN_DOM: true }).children[0]\n    }\n    else {\n      const html = new DOMParser().parseFromString(template, 'text/html').body.children[0]\n      return santizeHTML(html)\n    }\n  }\n}\n\n\n// https://vanillajstoolkit.com/helpers/cleanhtml/\n\n/*!\n * Sanitize an HTML node\n */\nfunction santizeHTML(html) {\n  // Sanitize it\n  removeScripts(html)\n  cleanAttributes(html)\n\n  return html\n}\n\n/**\n * Remove <script> elements\n * @param  {Node} html The HTML\n */\nfunction removeScripts(html) {\n  let scripts = html.querySelectorAll('script')\n  for (let script of scripts) {\n    script.remove()\n  }\n}\n\n/**\n * Check if the attribute is potentially dangerous\n * @param  {String}  name  The attribute name\n * @param  {String}  value The attribute value\n * @return {Boolean}       If true, the attribute is potentially dangerous\n */\nfunction isPossiblyDangerous(name, value) {\n  let val = value.replace(/\\s+/g, '').toLowerCase()\n  if (['src', 'href', 'xlink:href'].includes(name)) {\n    if (val.includes('javascript:') || val.includes('data:')) return true\n  }\n  if (name.startsWith('on')) return true\n}\n\n/**\n * Remove potentially dangerous attributes from an element\n * @param  {Node} elem The element\n */\nfunction removePossiblyDangerousAttributes(elem) {\n  // Loop through each attribute\n  // If it's dangerous, remove it\n  let atts = elem.attributes\n  for (let { name, value } of atts) {\n    if (!isPossiblyDangerous(name, value)) continue\n    elem.removeAttribute(name)\n  }\n}\n\n/**\n * Remove dangerous stuff from the HTML document's nodes\n * @param  {Node} html The HTML document\n */\nfunction cleanAttributes(html) {\n  let nodes = html.children\n  for (let node of nodes) {\n    removePossiblyDangerousAttributes(node)\n    cleanAttributes(node)\n  }\n}\n", "import { Controller } from \"@hotwired/stimulus\"\n\nimport Uppy from '@uppy/core'\nimport Dashboard from '@uppy/dashboard'\nimport ImageEditor from '@uppy/image-editor'\nimport XHRUpload from '@uppy/xhr-upload'\nimport DomElement from \"../support/dom_element\"\n\n// Connects to data-controller=\"attachment-input\"\nexport default class extends Controller {\n  static values = {\n    identifier: String,\n    endpoint: String,\n\n    maxFileSize: { type: Number, default: null },\n    minFileSize: { type: Number, default: null },\n    maxTotalSize: { type: Number, default: null },\n    maxFileNum: { type: Number, default: null },\n    minFileNum: { type: Number, default: null },\n    allowedFileTypes: { type: Array, default: null },\n    requiredMetaFields: { type: Array, default: [] },\n  }\n\n  static outlets = [\"attachment-preview\", \"attachment-preview-container\"]\n\n  //======= Lifecycle\n\n  connect() {\n    if (this.uppy) return;\n\n    // initialize\n    this.uploadedFiles = []\n\n    // hide the input\n    this.element.style[\"display\"] = \"none\"\n\n    // setup uppy\n    this.configureUppy()\n    // build trigger\n    this.#buildTriggers()\n    // init state\n    this.#onAttachmentsChanged()\n\n    // Just recreate Uppy after morphing - preserve existing attachments\n    this.element.addEventListener(\"turbo:morph-element\", (event) => {\n      if (event.target === this.element && !this.morphing) {\n        this.morphing = true;\n        requestAnimationFrame(() => {\n          this.#handleMorph();\n          this.morphing = false;\n        });\n      }\n    });\n  }\n\n  disconnect() {\n    this.#cleanupUppy();\n  }\n\n  #handleMorph() {\n    if (!this.element.isConnected) return;\n\n    // Clean up the old instance\n    this.#cleanupUppy();\n\n    // Recreate everything - Uppy, triggers, etc.\n    this.uploadedFiles = []\n    this.element.style[\"display\"] = \"none\"\n    this.configureUppy()\n    this.#buildTriggers()\n    this.#onAttachmentsChanged()\n  }\n\n  #cleanupUppy() {\n    if (this.uppy) {\n      this.uppy.destroy();\n      this.uppy = null;\n    }\n    \n    // Clean up triggers\n    if (this.triggerContainer && this.triggerContainer.parentNode) {\n      this.triggerContainer.parentNode.removeChild(this.triggerContainer);\n      this.triggerContainer = null;\n    }\n  }\n\n  attachmentPreviewOutletConnected(outlet, element) {\n    this.#onAttachmentsChanged()\n  }\n\n  attachmentPreviewOutletDisconnected(outlet, element) {\n    this.#onAttachmentsChanged()\n  }\n\n  //======= Config\n\n  configureUppy() {\n    this.uppy = new Uppy({\n      restrictions: {\n        maxFileSize: this.maxFileSizeValue,\n        minFileSize: this.minFileSizeValue,\n        maxTotalFileSize: this.maxTotalSizeValue,\n        maxNumberOfFiles: this.maxFileNumValue,\n        minNumberOfFiles: this.minFileNumValue,\n        allowedFileTypes: this.allowedFileTypesValue,\n        requiredMetaFields: this.requiredMetaFieldsValue,\n      }\n    })\n      .use(Dashboard, { inline: false, closeAfterFinish: true })\n      .use(ImageEditor, { target: Dashboard })\n\n    this.#configureUploader()\n    this.#configureEventHandlers()\n  }\n\n  #configureUploader() {\n    this.uppy\n      .use(XHRUpload, {\n        endpoint: this.endpointValue, // path to the upload endpoint\n      })\n  }\n\n  #configureEventHandlers() {\n    this.uppy.on('upload-success', this.#onUploadSuccess.bind(this))\n  }\n\n  //======= Events\n\n  #onModalTriggered() {\n    // ensure correct color mode is set\n    let theme = document.documentElement.getAttribute('data-bs-theme') || 'auto'\n    this.#dashboard.setOptions({ theme: theme })\n\n    // clear all successfully uploaded files\n    let file = null;\n    while (file = this.uploadedFiles.pop()) this.uppy.removeFile(file.id)\n\n    // open modal\n    this.#dashboard.openModal()\n  }\n\n  #onUploadSuccess(file, response) {\n    this.uploadedFiles.push(file)\n\n    // remove current preview\n    if (!this.multiple) this.attachmentPreviewOutlets.forEach(a => a.remove())\n\n    // retrieve uploaded file data\n    const uploadedFileData = response.body[\"data\"]\n    const uploadedFileUrl = response.body[\"url\"]\n\n    // set hidden field value to the uploaded file data so that it's submitted\n    // with the form as the attachment\n    this.attachmentPreviewContainerOutlet.element.appendChild(\n      this.#buildPreview(uploadedFileData, uploadedFileUrl)\n    )\n  }\n\n  #onAttachmentsChanged() {\n    if (!this.deleteAllTrigger) return\n\n    const len = this.attachmentPreviewOutlets.length\n    if (len > 1) {\n      this.deleteAllTrigger.style[\"display\"] = 'initial'\n      this.deleteAllTrigger.textContent = `Delete ${this.attachmentPreviewOutlets.length}`\n    } else {\n      this.deleteAllTrigger.style[\"display\"] = 'none'\n    }\n  }\n\n  //======= Builders\n\n  #buildTriggers() {\n    this.triggerContainer = document.createElement(\"div\")\n    this.triggerContainer.className = \"flex items-center gap-2\" // Add flex container with alignment\n    this.element.insertAdjacentElement('afterend', this.triggerContainer)\n\n    this.#buildUploadTrigger()\n    // currently experiencing a weird issue where outlet disconnections are not triggering\n    // this.#buildDeleteAllTrigger()\n\n    if (this.uploadTrigger) this.triggerContainer.append(this.uploadTrigger)\n    if (this.deleteAllTrigger) this.triggerContainer.append(this.deleteAllTrigger)\n  }\n\n  #buildUploadTrigger() {\n    const triggerPrompt = this.multiple ? \"Choose files\" : \"Choose file\"\n    this.uploadTrigger = DomElement.fromTemplate(\n      `<button type=\"button\" class=\"text-gray-900 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700 inline-flex items-center\">\n        <svg class=\"w-4 h-4 mr-2\" aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 20 16\">\n          <path stroke=\"currentColor\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2\"/>\n        </svg>\n        ${triggerPrompt}\n      </button>`,\n      false\n    )\n    this.uploadTrigger.addEventListener('click', this.#onModalTriggered.bind(this))\n  }\n\n  #buildDeleteAllTrigger() {\n    this.deleteAllTrigger = DomElement.fromTemplate(\n      `<button type=\"button\" class=\"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm         px-5 py-2.5 dark:bg-red-600 dark:hover:bg-red-700 focus:outline-none dark:focus:ring-red-800 inline-flex items-center\">\n        Delete ${this.attachmentPreviewOutlets.length}\n      </button>`,\n      false\n    )\n    this.deleteAllTrigger.addEventListener('click', () => {\n      if (confirm('Are you sure?')) this.attachmentPreviewContainerOutlet.clear()\n    })\n  }\n\n  #buildPreview(data, url) {\n    const filename = data.metadata.filename\n    const extension = filename.substring(filename.lastIndexOf('.') + 1, filename.length) || filename\n    const multiple = this.multiple ? 'multiple' : ''\n    const mimeType = data.metadata.mime_type\n\n    // List of commonly representable mime types\n    const representableMimeTypes = [\n      'image/jpeg',\n      'image/png',\n      'image/gif',\n      'image/webp',\n      'image/svg+xml',\n      'image/bmp',\n      'image/tiff'\n    ]\n\n    const isRepresentable = representableMimeTypes.includes(mimeType.toLowerCase())\n\n    // build preview element\n    const previewElem = DomElement.fromTemplate(\n      this.#buildPreviewTemplate(filename, extension, mimeType, url, isRepresentable)\n    )\n\n    // build input element\n    const inputElem = DomElement.fromTemplate(\n      `<input name=\"${this.element.name}\" ${multiple} type=\"hidden\" autocomplete=\"off\" hidden />`\n    )\n    inputElem.value = JSON.stringify(data)\n\n    // insert input element into preview\n    previewElem.appendChild(inputElem)\n\n    return previewElem\n  }\n\n  #buildPreviewTemplate(filename, extension, mimeType, url, isRepresentable) {\n    return `\n      <div class=\"${this.identifierValue} attachment-preview group relative bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm hover:shadow-md transition-all duration-300\"\n           data-controller=\"attachment-preview\"\n           data-attachment-preview-mime-type-value=\"${mimeType}\"\n           data-attachment-preview-thumbnail-url-value=\"${isRepresentable ? url : ''}\"\n           data-attachment-preview-target=\"thumbnail\"\n           title=\"${filename}\">\n        <a class=\"block aspect-square overflow-hidden rounded-t-lg\"\n           data-attachment-preview-target=\"thumbnailLink\">\n          ${isRepresentable\n        ? `<img src=\"${url}\" class=\"w-full h-full object-cover\" />`\n        : `<div class=\"w-full h-full flex items-center justify-center bg-gray-50 dark:bg-gray-900 text-gray-500 dark:text-gray-400 font-mono\">.${extension}</div>`\n      }\n        </a>\n        <div class=\"px-2 py-1.5 text-sm text-gray-700 dark:text-gray-300 border-t border-gray-200 dark:border-gray-700 truncate text-center bg-white dark:bg-gray-800\"\n             title=\"${filename}\">\n          ${filename}\n        </div>\n        <button type=\"button\"\n                class=\"w-full py-2 px-4 text-sm text-red-600 dark:text-red-400 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900/50 rounded-b-lg transition-colors duration-200 flex items-center justify-center gap-2 border-t border-gray-200 dark:border-gray-700\"\n                data-action=\"click->attachment-preview#remove\">\n          <span class=\"bi bi-trash\"></span>\n          Delete\n        </button>\n      </div>\n    `\n  }\n\n  //======= Getters\n\n  get #dashboard() { return this.uppy.getPlugin('Dashboard') }\n\n  get multiple() { return this.maxFileNumValue != 1 }\n}\n", "import DomElement from \"./dom_element\"\n\nfunction iconImage() {\n  return DomElement.fromTemplate(`\n    <svg aria-hidden=\"true\" focusable=\"false\" width=\"25\" height=\"25\" viewBox=\"0 0 25 25\">\n      <g fill=\"#686DE0\" fillRule=\"evenodd\">\n        <path d=\"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z\" fillRule=\"nonzero\" />\n        <path d=\"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z\" fillRule=\"nonzero\" />\n        <circle cx=\"7.5\" cy=\"9.5\" r=\"1.5\" />\n      </g>\n    </svg>\n  `)\n}\n\nfunction iconAudio() {\n  return DomElement.fromTemplate(`\n    <svg aria-hidden=\"true\" focusable=\"false\" className=\"uppy-c-icon\" width=\"25\" height=\"25\" viewBox=\"0 0 25 25\">\n      <path d=\"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z\" fill=\"#049BCF\" fillRule=\"nonzero\" />\n    </svg>\n  `)\n}\n\nfunction iconVideo() {\n  return DomElement.fromTemplate(`\n    <svg aria-hidden=\"true\" focusable=\"false\" className=\"uppy-c-icon\" width=\"25\" height=\"25\" viewBox=\"0 0 25 25\">\n      <path d=\"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z\" fill=\"#19AF67\" fillRule=\"nonzero\" />\n    </svg>\n  `)\n}\n\nfunction iconPDF() {\n  return DomElement.fromTemplate(`\n    <svg aria-hidden=\"true\" focusable=\"false\" className=\"uppy-c-icon\" width=\"25\" height=\"25\" viewBox=\"0 0 25 25\">\n      <path d=\"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z\" fill=\"#E2514A\" fillRule=\"nonzero\" />\n    </svg>\n  `)\n}\n\nfunction iconArchive() {\n  return DomElement.fromTemplate(`\n    <svg aria-hidden=\"true\" focusable=\"false\" width=\"25\" height=\"25\" viewBox=\"0 0 25 25\">\n      <path d=\"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z\" fill=\"#00C469\" fillRule=\"nonzero\" />\n    </svg>\n  `)\n}\n\nfunction iconFile() {\n  return DomElement.fromTemplate(`\n    <svg aria-hidden=\"true\" focusable=\"false\" className=\"uppy-c-icon\" width=\"25\" height=\"25\" viewBox=\"0 0 25 25\">\n      <g fill=\"#A7AFB7\" fillRule=\"nonzero\">\n        <path d=\"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z\" />\n        <path d=\"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z\" />\n      </g>\n    </svg>\n  `)\n}\n\nfunction iconText() {\n  return DomElement.fromTemplate(`\n    <svg aria-hidden=\"true\" focusable=\"false\" className=\"uppy-c-icon\" width=\"25\" height=\"25\" viewBox=\"0 0 25 25\">\n      <path d=\"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z\" fill=\"#5A5E69\" fillRule=\"nonzero\" />\n    </svg>\n  `)\n}\n\nexport default function getIconByMime(fileType) {\n  const defaultChoice = {\n    color: '#838999',\n    icon: iconFile(),\n  }\n\n  if (!fileType) return defaultChoice\n\n  const fileTypeGeneral = fileType.split('/')[0]\n  const fileTypeSpecific = fileType.split('/')[1]\n\n  // Text\n  if (fileTypeGeneral === 'text') {\n    return {\n      color: '#5a5e69',\n      icon: iconText(),\n    }\n  }\n\n  // Image\n  if (fileTypeGeneral === 'image') {\n    return {\n      color: '#686de0',\n      icon: iconImage(),\n    }\n  }\n\n  // Audio\n  if (fileTypeGeneral === 'audio') {\n    return {\n      color: '#068dbb',\n      icon: iconAudio(),\n    }\n  }\n\n  // Video\n  if (fileTypeGeneral === 'video') {\n    return {\n      color: '#19af67',\n      icon: iconVideo(),\n    }\n  }\n\n  // PDF\n  if (fileTypeGeneral === 'application' && fileTypeSpecific === 'pdf') {\n    return {\n      color: '#e25149',\n      icon: iconPDF(),\n    }\n  }\n\n  // Archive\n  const archiveTypes = ['zip', 'x-7z-compressed', 'x-rar-compressed', 'x-tar', 'x-gzip', 'x-apple-diskimage']\n  if (fileTypeGeneral === 'application' && archiveTypes.indexOf(fileTypeSpecific) !== -1) {\n    return {\n      color: '#00C469',\n      icon: iconArchive(),\n    }\n  }\n\n  return defaultChoice\n}\n", "import { Controller } from \"@hotwired/stimulus\"\nimport getIconByMime from \"../support/mime_icon\"\nimport DomElement from \"../support/dom_element\"\n\n// Connects to data-controller=\"attachment-preview\"\nexport default class extends Controller {\n  static targets = [\"thumbnail\", \"thumbnailLink\"]\n  static values = {\n    mimeType: String,\n    thumbnailUrl: String,\n  }\n\n  connect() {\n    if (!this.hasThumbnailTarget) return;\n\n    if (this.thumbnailUrlValue) {\n      this.useThumbnailPreview()\n    } else {\n      this.useMimeIconPreview()\n    }\n  }\n\n  remove() {\n    this.element.remove()\n  }\n\n  useThumbnailPreview() {\n    const thumbnail = DomElement.fromTemplate(`\n      <img src=\"${this.thumbnailUrlValue}\" class=\"w-full h-full object-cover\" />\n    `)\n\n    this.thumbnailLinkTarget.innerHTML = null\n    this.thumbnailLinkTarget.appendChild(thumbnail)\n  }\n\n  useMimeIconPreview() {\n    const mime = getIconByMime(this.mimeTypeValue)\n\n    // Configure the icon\n    mime.icon.classList.add(\n      'w-3/5',      // 60% width\n      'h-4/5',      // 80% height\n      'rounded-lg',\n      'shadow-lg',\n      'bg-white',\n      'p-2'         // Add some padding inside the icon container\n    )\n\n    // Center the icon in the container\n    this.thumbnailLinkTarget.classList.add(\n      'flex',\n      'items-center',\n      'justify-center'\n    )\n\n    // Set the background color\n    this.thumbnailLinkTarget.style.backgroundColor = mime.color\n\n    // Clear and append the icon\n    this.thumbnailLinkTarget.innerHTML = null\n    this.thumbnailLinkTarget.appendChild(mime.icon)\n  }\n}\n", "import { Controller } from \"@hotwired/stimulus\"\n\n// Connects to data-controller=\"attachment-preview-container\"\nexport default class extends Controller {\n  connect() {\n  }\n\n  append(element) {\n    this.element.appendChild(element)\n  }\n\n  clear() {\n    this.element.innerHTML = null\n  }\n}\n", "import { Controller } from \"@hotwired/stimulus\";\n\nexport default class extends Controller {}\n", "import { Controller } from \"@hotwired/stimulus\";\n\nexport default class extends Controller {\n  static targets = [\"password\", \"checkbox\"];\n\n  connect() {\n    this.checkboxTarget.checked = false // ensure password is hidden by default\n  }\n\n  toggle() {\n    if (this.passwordTarget.type == \"password\") {\n      this.passwordTargets.forEach((passwordTarget) => passwordTarget.type = \"text\")\n    } else {\n      this.passwordTargets.forEach((passwordTarget) => passwordTarget.type = \"password\")\n    }\n  }\n}\n", "import { Controller } from \"@hotwired/stimulus\";\n\n// Connects to data-controller=\"remote-modal\"\nexport default class extends Controller {\n  connect() {\n    // Store original scroll position and body overflow\n    this.originalScrollPosition = window.scrollY;\n    this.originalOverflow = document.body.style.overflow;\n    this.bodyStateRestored = false;\n\n    // Lock body scroll\n    document.body.style.overflow = \"hidden\";\n\n    // Show the modal\n    this.element.showModal();\n    // Add close event listener\n    this.element.addEventListener(\"close\", this.handleClose.bind(this));\n  }\n\n  close() {\n    // Close the modal\n    this.element.close();\n    this.restoreBodyState();\n  }\n\n  disconnect() {\n    // Clean up event listener when controller is disconnected\n    this.element.removeEventListener(\"close\", this.handleClose);\n    this.restoreBodyState();\n  }\n\n  handleClose() {\n    this.restoreBodyState();\n  }\n\n  restoreBodyState() {\n    if (this.bodyStateRestored) return;\n    this.bodyStateRestored = true;\n\n    // Restore body overflow\n    document.body.style.overflow = this.originalOverflow || \"\";\n    // Restore the original scroll position\n    window.scrollTo(0, this.originalScrollPosition);\n  }\n}\n", "import { Controller } from \"@hotwired/stimulus\"\n\n// Connects to data-controller=\"key-value-store\"\nexport default class extends Controller {\n  static targets = [\"container\", \"pair\", \"template\", \"addButton\", \"keyInput\", \"valueInput\"]\n  static values = { limit: Number }\n\n  connect() {\n    this.updateIndices()\n    this.updateAddButtonState()\n  }\n\n  addPair(event) {\n    event.preventDefault()\n\n    if (this.pairTargets.length >= this.limitValue) {\n      return\n    }\n\n    const template = this.templateTarget\n    const newPair = template.content.cloneNode(true)\n    const index = this.pairTargets.length\n\n    // Update the template placeholders with actual indices\n    this.updatePairIndices(newPair, index)\n\n    this.containerTarget.appendChild(newPair)\n    this.updateIndices()\n    this.updateAddButtonState()\n\n    // Focus on the key input of the new pair\n    const newKeyInput = this.containerTarget.lastElementChild.querySelector('[data-key-value-store-target=\"keyInput\"]')\n    if (newKeyInput) {\n      newKeyInput.focus()\n    }\n  }\n\n  removePair(event) {\n    event.preventDefault()\n\n    const pair = event.target.closest('[data-key-value-store-target=\"pair\"]')\n    if (pair) {\n      pair.remove()\n      this.updateIndices()\n      this.updateAddButtonState()\n    }\n  }\n\n  updateIndices() {\n    this.pairTargets.forEach((pair, index) => {\n      const keyInput = pair.querySelector('[data-key-value-store-target=\"keyInput\"]')\n      const valueInput = pair.querySelector('[data-key-value-store-target=\"valueInput\"]')\n\n      if (keyInput) {\n        keyInput.name = keyInput.name.replace(/\\[\\d+\\]/, `[${index}]`)\n        keyInput.id = keyInput.id.replace(/_\\d+_/, `_${index}_`)\n      }\n      if (valueInput) {\n        valueInput.name = valueInput.name.replace(/\\[\\d+\\]/, `[${index}]`)\n        valueInput.id = valueInput.id.replace(/_\\d+_/, `_${index}_`)\n      }\n    })\n  }\n\n  updatePairIndices(element, index) {\n    const inputs = element.querySelectorAll('input')\n    inputs.forEach(input => {\n      if (input.name) {\n        input.name = input.name.replace('__INDEX__', index)\n      }\n      if (input.id) {\n        input.id = input.id.replace('___INDEX___', `_${index}_`)\n      }\n    })\n  }\n\n  updateAddButtonState() {\n    const addButton = this.addButtonTarget\n    if (this.pairTargets.length >= this.limitValue) {\n      addButton.disabled = true\n      addButton.classList.add('opacity-50', 'cursor-not-allowed')\n    } else {\n      addButton.disabled = false\n      addButton.classList.remove('opacity-50', 'cursor-not-allowed')\n    }\n  }\n\n  // Serialize the current key-value pairs to JSON\n  toJSON() {\n    const pairs = {}\n    this.pairTargets.forEach(pair => {\n      const keyInput = pair.querySelector('[data-key-value-store-target=\"keyInput\"]')\n      const valueInput = pair.querySelector('[data-key-value-store-target=\"valueInput\"]')\n\n      if (keyInput && valueInput && keyInput.value.trim()) {\n        pairs[keyInput.value.trim()] = valueInput.value\n      }\n    })\n    return JSON.stringify(pairs)\n  }\n\n  // Get the current key-value pairs as an object\n  toObject() {\n    const pairs = {}\n    this.pairTargets.forEach(pair => {\n      const keyInput = pair.querySelector('[data-key-value-store-target=\"keyInput\"]')\n      const valueInput = pair.querySelector('[data-key-value-store-target=\"valueInput\"]')\n\n      if (keyInput && valueInput && keyInput.value.trim()) {\n        pairs[keyInput.value.trim()] = valueInput.value\n      }\n    })\n    return pairs\n  }\n}\n", "import { Controller } from \"@hotwired/stimulus\"\n\n// Connects to data-controller=\"bulk-actions\"\n// Manages bulk action selection in resource tables\nexport default class extends Controller {\n  static targets = [\"checkbox\", \"checkboxAll\", \"toolbar\", \"selectedCount\", \"actionButton\", \"selectionCell\"]\n  static values = {\n    hasActions: { type: Boolean, default: false }\n  }\n\n  connect() {\n    // Show selection column only if bulk actions exist\n    if (this.hasActionsValue) {\n      this.enableSelection()\n    }\n  }\n\n  enableSelection() {\n    // Show all selection cells (header + body cells)\n    this.selectionCellTargets.forEach(el => el.classList.remove(\"hidden\"))\n  }\n\n  toggle() {\n    this.updateUI()\n  }\n\n  toggleAll(event) {\n    const checked = event.target.checked\n    this.checkboxTargets.forEach(cb => cb.checked = checked)\n    this.updateUI()\n  }\n\n  updateUI() {\n    const checked = this.checked\n    const total = this.checkboxTargets.length\n\n    // Update \"select all\" checkbox state (checked, unchecked, or indeterminate)\n    if (this.hasCheckboxAllTarget) {\n      this.checkboxAllTarget.checked = checked.length === total && total > 0\n      this.checkboxAllTarget.indeterminate = checked.length > 0 && checked.length < total\n    }\n\n    // Show toolbar only when items are selected\n    if (this.hasToolbarTarget) {\n      this.toolbarTarget.classList.toggle(\"hidden\", checked.length === 0)\n    }\n\n    // Update selected count display\n    if (this.hasSelectedCountTarget) {\n      this.selectedCountTarget.textContent = checked.length\n    }\n\n    // Update action button URLs and visibility based on allowed actions\n    this.updateActionButtons()\n  }\n\n  updateActionButtons() {\n    const checked = this.checked\n    const ids = checked.map(cb => cb.value)\n    const idsParam = ids.map(id => `ids[]=${encodeURIComponent(id)}`).join(\"&\")\n\n    // Compute intersection of allowed actions across all selected records\n    const allowedActions = this.computeAllowedActions(checked)\n\n    this.actionButtonTargets.forEach(button => {\n      const baseUrl = button.dataset.bulkActionUrl\n      const actionName = button.dataset.bulkActionName\n\n      // Update URL with selected IDs\n      if (baseUrl) {\n        button.href = idsParam ? `${baseUrl}?${idsParam}` : baseUrl\n      }\n\n      // Show/hide button based on whether action is allowed for all selected records\n      button.style.display = allowedActions.has(actionName) ? '' : 'none'\n    })\n  }\n\n  // Compute the intersection of allowed actions across all selected checkboxes\n  computeAllowedActions(checked) {\n    if (checked.length === 0) {\n      return new Set()\n    }\n\n    // Start with actions allowed for the first selected record\n    let intersection = new Set(this.getAllowedActionsForCheckbox(checked[0]))\n\n    // Intersect with actions allowed for each subsequent record\n    for (let i = 1; i < checked.length; i++) {\n      const actions = this.getAllowedActionsForCheckbox(checked[i])\n      intersection = new Set([...intersection].filter(a => actions.includes(a)))\n    }\n\n    return intersection\n  }\n\n  getAllowedActionsForCheckbox(checkbox) {\n    const allowedActions = checkbox.dataset.allowedActions\n    return allowedActions ? allowedActions.split(\",\").filter(a => a) : []\n  }\n\n  get checked() {\n    return this.checkboxTargets.filter(cb => cb.checked)\n  }\n\n  get unchecked() {\n    return this.checkboxTargets.filter(cb => !cb.checked)\n  }\n}\n", "import { Controller } from \"@hotwired/stimulus\"\n\n// Connects to data-controller=\"filter-panel\"\nexport default class extends Controller {\n  clear() {\n    this.element.querySelectorAll('input, select, textarea').forEach(input => {\n      if (input.type === 'checkbox' || input.type === 'radio') {\n        input.checked = false\n      } else if (input.tagName === 'SELECT') {\n        input.selectedIndex = 0\n      } else if (input.type === 'hidden') {\n        // Clear hidden inputs that are filter values (e.g., flatpickr)\n        if (input.dataset.controller === 'flatpickr') {\n          input.value = ''\n        }\n      } else {\n        input.value = ''\n      }\n    })\n\n    // Clear flatpickr instances via Stimulus controller\n    this.element.querySelectorAll('[data-controller=\"flatpickr\"]').forEach(input => {\n      const controller = this.application.getControllerForElementAndIdentifier(input, 'flatpickr')\n      if (controller?.picker) {\n        controller.picker.clear()\n      }\n    })\n\n    // Submit the parent form\n    const form = this.element.closest('form')\n    if (form) {\n      form.requestSubmit()\n    }\n  }\n}\n", "import { Controller } from \"@hotwired/stimulus\"\n\nexport default class extends Controller {\n  static values = {\n    maxHeight: { type: Number, default: 0 } // 0 means use CSS max-height or 50vh\n  }\n\n  connect() {\n    this.resize()\n    this.element.addEventListener(\"input\", this.resize)\n    window.addEventListener(\"resize\", this.resize)\n  }\n\n  disconnect() {\n    this.element.removeEventListener(\"input\", this.resize)\n    window.removeEventListener(\"resize\", this.resize)\n  }\n\n  resize = () => {\n    const element = this.element\n    const maxHeight = this.#getMaxHeight()\n\n    // Reset to auto to get the natural scroll height\n    element.style.height = \"auto\"\n    element.style.overflow = \"hidden\"\n\n    const scrollHeight = element.scrollHeight\n\n    if (maxHeight > 0 && scrollHeight > maxHeight) {\n      element.style.height = `${maxHeight}px`\n      element.style.overflow = \"auto\"\n    } else {\n      element.style.height = `${scrollHeight}px`\n    }\n  }\n\n  #getMaxHeight() {\n    if (this.maxHeightValue > 0) {\n      return this.maxHeightValue\n    }\n\n    // Check for CSS max-height\n    const computedStyle = window.getComputedStyle(this.element)\n    const cssMaxHeight = computedStyle.maxHeight\n\n    if (cssMaxHeight && cssMaxHeight !== \"none\") {\n      const parsed = parseFloat(cssMaxHeight)\n      if (!isNaN(parsed) && parsed > 0) {\n        return parsed\n      }\n    }\n\n    // Default to 300px\n    return 300\n  }\n}\n", "import { Controller } from \"@hotwired/stimulus\"\n\nexport default class extends Controller {\n  static targets = [\"source\"]\n\n  copy(event) {\n    const text = this.sourceTarget.value || this.sourceTarget.textContent\n    const button = event.currentTarget\n    const originalText = button.textContent\n\n    navigator.clipboard.writeText(text).then(() => {\n      button.textContent = \"Copied!\"\n      setTimeout(() => {\n        button.textContent = originalText\n      }, 2000)\n    }).catch((err) => {\n      // Fallback for browsers that don't support clipboard API\n      console.warn(\"Clipboard API failed, using fallback:\", err)\n      this.fallbackCopy(text)\n      button.textContent = \"Copied!\"\n      setTimeout(() => {\n        button.textContent = originalText\n      }, 2000)\n    })\n  }\n\n  fallbackCopy(text) {\n    const textarea = document.createElement(\"textarea\")\n    textarea.value = text\n    textarea.style.position = \"fixed\"\n    textarea.style.opacity = \"0\"\n    document.body.appendChild(textarea)\n    textarea.select()\n    document.execCommand(\"copy\")\n    document.body.removeChild(textarea)\n  }\n}\n", "// Import controllers here\nimport ResourceHeaderController from \"./resource_header_controller.js\"\nimport NestedResourceFormFieldsController from \"./nested_resource_form_fields_controller.js\"\nimport FormController from \"./form_controller.js\"\nimport ResourceDropDownController from \"./resource_drop_down_controller.js\"\nimport ResourceCollapseController from \"./resource_collapse_controller.js\"\nimport ResourceDismissController from \"./resource_dismiss_controller.js\"\nimport FrameNavigatorController from \"./frame_navigator_controller.js\"\nimport ColorModeController from \"./color_mode_controller.js\"\nimport EasyMDEController from \"./easymde_controller.js\"\nimport SlimSelectController from \"./slim_select_controller.js\"\nimport FlatpickrController from \"./flatpickr_controller.js\"\nimport IntlTelInputController from \"./intl_tel_input_controller.js\"\nimport SelectNavigatorController from \"./select_navigator.js\"\nimport ResourceTabListController from \"./resource_tab_list_controller.js\"\nimport AttachmentInputController from \"./attachment_input_controller.js\"\nimport AttachmentPreviewController from \"./attachment_preview_controller.js\"\nimport AttachmentPreviewContainerController from \"./attachment_preview_container_controller.js\"\nimport SidebarController from \"./sidebar_controller.js\"\nimport PasswordVisibilityController from \"./password_visibility_controller.js\"\nimport RemoteModalController from \"./remote_modal_controller.js\"\nimport KeyValueStoreController from \"./key_value_store_controller.js\"\nimport BulkActionsController from \"./bulk_actions_controller.js\"\nimport FilterPanelController from \"./filter_panel_controller.js\"\nimport TextareaAutogrowController from \"./textarea_autogrow_controller.js\"\nimport ClipboardController from \"./clipboard_controller.js\"\n\nexport default function (application) {\n  // Register controllers here\n  application.register(\"password-visibility\", PasswordVisibilityController)\n  application.register(\"sidebar\", SidebarController)\n  application.register(\"resource-header\", ResourceHeaderController)\n  application.register(\"nested-resource-form-fields\", NestedResourceFormFieldsController)\n  application.register(\"form\", FormController)\n  application.register(\"resource-drop-down\", ResourceDropDownController)\n  application.register(\"resource-collapse\", ResourceCollapseController)\n  application.register(\"resource-dismiss\", ResourceDismissController)\n  application.register(\"frame-navigator\", FrameNavigatorController)\n  application.register(\"color-mode\", ColorModeController)\n  application.register(\"easymde\", EasyMDEController)\n  application.register(\"slim-select\", SlimSelectController)\n  application.register(\"flatpickr\", FlatpickrController)\n  application.register(\"intl-tel-input\", IntlTelInputController)\n  application.register(\"select-navigator\", SelectNavigatorController)\n  application.register(\"resource-tab-list\", ResourceTabListController)\n  application.register(\"attachment-input\", AttachmentInputController)\n  application.register(\"attachment-preview\", AttachmentPreviewController)\n  application.register(\"attachment-preview-container\", AttachmentPreviewContainerController)\n  application.register(\"remote-modal\", RemoteModalController)\n  application.register(\"key-value-store\", KeyValueStoreController)\n  application.register(\"bulk-actions\", BulkActionsController)\n  application.register(\"filter-panel\", FilterPanelController)\n  application.register(\"textarea-autogrow\", TextareaAutogrowController)\n  application.register(\"clipboard\", ClipboardController)\n}\n", "// Add a redirect stream action\nTurbo.StreamActions.redirect = function () {\n  // See: https://github.com/hotwired/turbo/issues/554\n  Turbo.cache.clear();\n\n  const url = this.getAttribute(\"url\")\n  Turbo.visit(url)\n}\n", "import \"@hotwired/turbo\"\n\nimport { Application } from \"@hotwired/stimulus\"\nconst application = Application.start()\n\nimport { registerControllers } from \"./core\"\nregisterControllers(application)\n"],
  "mappings": "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,KACA,SACA,SACA,UACA,SACA,OACA,OACA,MACA,WACA,UACA,OACA,WACA,KACA,YACA,MACA,UACA,MACA,SACA,MACA,MACA,KACA,KACA,UACA,KACA,WACA,aACA,SACA,OACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,MACA,QACA,MACA,MACA,QACA,SACA,KACA,OACA,MACA,OACA,UACA,OACA,WACA,QACA,MACA,OACA,KACA,WACA,SACA,SACA,IACA,UACA,MACA,WACA,IACA,KACA,KACA,OACA,IACA,OACA,SACA,UACA,SACA,SACA,OACA,QACA,SACA,SACA,OACA,SACA,SACA,QACA,MACA,UACA,MACA,QACA,QACA,KACA,WACA,WACA,QACA,KACA,QACA,OACA,KACA,QACA,KACA,IACA,KACA,MACA,QACA,KAAK,CACG,EAEG8E,GAAM9E,GAAO,CACxB,MACA,IACA,WACA,cACA,eACA,eACA,gBACA,mBACA,SACA,WACA,OACA,OACA,UACA,eACA,cACA,SACA,OACA,IACA,QACA,WACA,QACA,QACA,YACA,OACA,iBACA,SACA,OACA,WACA,QACA,OACA,OACA,UACA,UACA,WACA,iBACA,OACA,OACA,QACA,SACA,SACA,OACA,WACA,QACA,OACA,QACA,OACA,OAAO,CACC,EAEG+E,GAAa/E,GAAO,CAC/B,UACA,gBACA,sBACA,cACA,mBACA,oBACA,oBACA,iBACA,eACA,UACA,UACA,UACA,UACA,UACA,iBACA,UACA,UACA,cACA,eACA,WACA,eACA,qBACA,cACA,SACA,cAAc,CACN,EAMGgF,GAAgBhF,GAAO,CAClC,UACA,gBACA,SACA,UACA,YACA,mBACA,iBACA,gBACA,gBACA,gBACA,QACA,YACA,OACA,eACA,YACA,UACA,gBACA,SACA,MACA,aACA,UACA,KAAK,CACG,EAEGiF,GAASjF,GAAO,CAC3B,OACA,WACA,SACA,UACA,QACA,SACA,KACA,aACA,gBACA,KACA,KACA,QACA,UACA,WACA,QACA,OACA,KACA,SACA,QACA,SACA,OACA,OACA,UACA,SACA,MACA,QACA,MACA,SACA,aACA,aAAa,CACL,EAIGkF,GAAmBlF,GAAO,CACrC,UACA,cACA,aACA,WACA,YACA,UACA,UACA,SACA,SACA,QACA,YACA,aACA,iBACA,cACA,MAAM,CACE,EAEGmF,GAAOnF,GAAO,CAAC,OAAO,CAAU,EC1RhC6E,GAAO7E,GAAO,CACzB,SACA,SACA,QACA,MACA,iBACA,eACA,uBACA,WACA,aACA,UACA,SACA,UACA,cACA,cACA,UACA,OACA,QACA,QACA,QACA,OACA,UACA,WACA,eACA,SACA,cACA,WACA,WACA,UACA,MACA,WACA,0BACA,wBACA,WACA,YACA,UACA,eACA,cACA,OACA,MACA,UACA,SACA,SACA,OACA,OACA,WACA,KACA,QACA,YACA,YACA,QACA,OACA,QACA,OACA,OACA,UACA,OACA,MACA,MACA,YACA,QACA,SACA,MACA,YACA,WACA,QACA,OACA,QACA,UACA,aACA,SACA,OACA,UACA,OACA,UACA,cACA,cACA,UACA,gBACA,sBACA,SACA,UACA,UACA,aACA,WACA,MACA,WACA,MACA,WACA,OACA,OACA,UACA,aACA,QACA,WACA,QACA,OACA,QACA,OACA,OACA,UACA,QACA,MACA,SACA,OACA,QACA,UACA,WACA,QACA,YACA,OACA,SACA,SACA,QACA,QACA,OACA,QACA,MAAM,CACE,EAEG8E,GAAM9E,GAAO,CACxB,gBACA,aACA,WACA,qBACA,YACA,SACA,gBACA,gBACA,UACA,gBACA,iBACA,QACA,OACA,KACA,QACA,OACA,gBACA,YACA,YACA,QACA,sBACA,8BACA,gBACA,kBACA,KACA,KACA,IACA,KACA,KACA,kBACA,YACA,UACA,UACA,MACA,WACA,YACA,MACA,WACA,OACA,eACA,YACA,SACA,cACA,cACA,gBACA,cACA,YACA,mBACA,eACA,aACA,eACA,cACA,KACA,KACA,KACA,KACA,aACA,WACA,gBACA,oBACA,SACA,OACA,KACA,kBACA,KACA,MACA,YACA,IACA,KACA,KACA,KACA,KACA,UACA,YACA,aACA,WACA,OACA,eACA,iBACA,eACA,mBACA,iBACA,QACA,aACA,aACA,eACA,eACA,cACA,cACA,mBACA,YACA,MACA,OACA,YACA,QACA,SACA,OACA,MACA,OACA,aACA,SACA,WACA,UACA,QACA,SACA,cACA,SACA,WACA,cACA,OACA,aACA,sBACA,mBACA,eACA,SACA,gBACA,sBACA,iBACA,IACA,KACA,KACA,SACA,OACA,OACA,cACA,YACA,UACA,SACA,SACA,QACA,OACA,kBACA,QACA,mBACA,mBACA,eACA,cACA,eACA,cACA,aACA,eACA,mBACA,oBACA,iBACA,kBACA,oBACA,iBACA,SACA,eACA,QACA,eACA,iBACA,WACA,cACA,UACA,UACA,YACA,mBACA,cACA,kBACA,iBACA,aACA,OACA,KACA,KACA,UACA,SACA,UACA,aACA,UACA,aACA,gBACA,gBACA,QACA,eACA,OACA,eACA,mBACA,mBACA,IACA,KACA,KACA,QACA,IACA,KACA,KACA,IACA,YAAY,CACJ,EAEGiF,GAASjF,GAAO,CAC3B,SACA,cACA,QACA,WACA,QACA,eACA,cACA,aACA,aACA,QACA,MACA,UACA,eACA,WACA,QACA,QACA,SACA,OACA,KACA,UACA,SACA,gBACA,SACA,SACA,iBACA,YACA,WACA,cACA,UACA,UACA,gBACA,WACA,WACA,OACA,WACA,WACA,aACA,UACA,SACA,SACA,cACA,gBACA,uBACA,YACA,YACA,aACA,WACA,iBACA,iBACA,YACA,UACA,QACA,OAAO,CACR,EAEYoF,GAAMpF,GAAO,CACxB,aACA,SACA,cACA,YACA,aAAa,CACL,ECpXGqF,GAAgBpF,GAAK,2BAA2B,EAChDqF,GAAWrF,GAAK,uBAAuB,EACvCsF,GAActF,GAAK,eAAe,EAClCuF,GAAYvF,GAAK,8BAA8B,EAC/CwF,GAAYxF,GAAK,gBAAgB,EACjCyF,GAAiBzF,GAC5B,oGAEW0F,GAAoB1F,GAAK,uB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",
  "names": ["require_isObject", "__commonJSMin", "exports", "module", "isObject", "value", "type", "require_freeGlobal", "__commonJSMin", "exports", "module", "freeGlobal", "require_root", "__commonJSMin", "exports", "module", "freeGlobal", "freeSelf", "root", "require_now", "__commonJSMin", "exports", "module", "root", "now", "require_trimmedEndIndex", "__commonJSMin", "exports", "module", "reWhitespace", "trimmedEndIndex", "string", "index", "require_baseTrim", "__commonJSMin", "exports", "module", "trimmedEndIndex", "reTrimStart", "baseTrim", "string", "require_Symbol", "__commonJSMin", "exports", "module", "root", "Symbol", "require_getRawTag", "__commonJSMin", "exports", "module", "Symbol", "objectProto", "hasOwnProperty", "nativeObjectToString", "symToStringTag", "getRawTag", "value", "isOwn", "tag", "unmasked", "result", "require_objectToString", "__commonJSMin", "exports", "module", "objectProto", "nativeObjectToString", "objectToString", "value", "require_baseGetTag", "__commonJSMin", "exports", "module", "Symbol", "getRawTag", "objectToString", "nullTag", "undefinedTag", "symToStringTag", "baseGetTag", "value", "require_isObjectLike", "__commonJSMin", "exports", "module", "isObjectLike", "value", "require_isSymbol", "__commonJSMin", "exports", "module", "baseGetTag", "isObjectLike", "symbolTag", "isSymbol", "value", "require_toNumber", "__commonJSMin", "exports", "module", "baseTrim", "isObject", "isSymbol", "NAN", "reIsBadHex", "reIsBinary", "reIsOctal", "freeParseInt", "toNumber", "value", "other", "isBinary", "require_debounce", "__commonJSMin", "exports", "module", "isObject", "now", "toNumber", "FUNC_ERROR_TEXT", "nativeMax", "nativeMin", "debounce", "func", "wait", "options", "lastArgs", "lastThis", "maxWait", "result", "timerId", "lastCallTime", "lastInvokeTime", "leading", "maxing", "trailing", "invokeFunc", "time", "args", "thisArg", "leadingEdge", "timerExpired", "remainingWait", "timeSinceLastCall", "timeSinceLastInvoke", "timeWaiting", "shouldInvoke", "trailingEdge", "cancel", "flush", "debounced", "isInvoking", "require_throttle", "__commonJSMin", "exports", "module", "debounce", "isObject", "FUNC_ERROR_TEXT", "throttle", "func", "wait", "options", "leading", "trailing", "require_namespace_emitter", "__commonJSMin", "exports", "module", "emitter", "_fns", "event", "arg1", "arg2", "arg3", "arg4", "arg5", "arg6", "toEmit", "getListeners", "emitAll", "fn", "one", "keep", "fns", "i", "l", "e", "out", "idx", "args", "keys", "key", "module", "input", "neg", "num", "units", "exponent", "value", "unit", "require_wildcard", "__commonJSMin", "exports", "module", "WildcardMatcher", "text", "separator", "input", "matches", "parts", "ii", "partsCount", "testParts", "key", "test", "matcher", "require_mime_match", "__commonJSMin", "exports", "module", "wildcard", "reMimePartSplit", "target", "pattern", "test", "result", "require_classnames", "__commonJSMin", "exports", "module", "hasOwn", "classNames", "classes", "i", "arg", "appendClass", "parseValue", "key", "value", "newClass", "require_eventemitter3", "__commonJSMin", "exports", "module", "has", "prefix", "Events", "EE", "fn", "context", "once", "addListener", "emitter", "event", "listener", "evt", "clearEvent", "EventEmitter", "names", "events", "name", "handlers", "i", "l", "ee", "listeners", "a1", "a2", "a3", "a4", "a5", "len", "args", "length", "j", "require_cropper", "__commonJSMin", "exports", "module", "global", "factory", "ownKeys", "e", "r", "t", "o", "_objectSpread2", "_defineProperty", "_toPrimitive", "i", "_toPropertyKey", "_typeof", "_classCallCheck", "instance", "Constructor", "_defineProperties", "target", "props", "descriptor", "_createClass", "protoProps", "staticProps", "obj", "key", "value", "_toConsumableArray", "arr", "_arrayWithoutHoles", "_iterableToArray", "_unsupportedIterableToArray", "_nonIterableSpread", "_arrayLikeToArray", "iter", "minLen", "n", "len", "arr2", "IS_BROWSER", "WINDOW", "IS_TOUCH_DEVICE", "HAS_POINTER_EVENT", "NAMESPACE", "ACTION_ALL", "ACTION_CROP", "ACTION_MOVE", "ACTION_ZOOM", "ACTION_EAST", "ACTION_WEST", "ACTION_SOUTH", "ACTION_NORTH", "ACTION_NORTH_EAST", "ACTION_NORTH_WEST", "ACTION_SOUTH_EAST", "ACTION_SOUTH_WEST", "CLASS_CROP", "CLASS_DISABLED", "CLASS_HIDDEN", "CLASS_HIDE", "CLASS_INVISIBLE", "CLASS_MODAL", "CLASS_MOVE", "DATA_ACTION", "DATA_PREVIEW", "DRAG_MODE_CROP", "DRAG_MODE_MOVE", "DRAG_MODE_NONE", "EVENT_CROP", "EVENT_CROP_END", "EVENT_CROP_MOVE", "EVENT_CROP_START", "EVENT_DBLCLICK", "EVENT_TOUCH_START", "EVENT_TOUCH_MOVE", "EVENT_TOUCH_END", "EVENT_POINTER_DOWN", "EVENT_POINTER_MOVE", "EVENT_POINTER_UP", "EVENT_READY", "EVENT_RESIZE", "EVENT_WHEEL", "EVENT_ZOOM", "MIME_TYPE_JPEG", "REGEXP_ACTIONS", "REGEXP_DATA_URL", "REGEXP_DATA_URL_JPEG", "REGEXP_TAG_NAME", "MIN_CONTAINER_WIDTH", "MIN_CONTAINER_HEIGHT", "DEFAULTS", "TEMPLATE", "isNaN", "isNumber", "isPositiveNumber", "isUndefined", "isObject", "hasOwnProperty", "isPlainObject", "_constructor", "prototype", "isFunction", "slice", "toArray", "forEach", "data", "callback", "assign", "_len", "args", "_key", "arg", "REGEXP_DECIMALS", "normalizeDecimalNumber", "times", "REGEXP_SUFFIX", "setStyle", "element", "styles", "style", "property", "hasClass", "addClass", "elem", "className", "removeClass", "toggleClass", "added", "REGEXP_CAMEL_CASE", "toParamCase", "getData", "name", "setData", "removeData", "REGEXP_SPACES", "onceSupported", "supported", "once", "listener", "options", "removeListener", "type", "handler", "event", "listeners", "addListener", "_handler", "_element$listeners", "_len2", "_key2", "dispatchEvent", "getOffset", "box", "location", "REGEXP_ORIGINS", "isCrossOriginURL", "url", "parts", "addTimestamp", "timestamp", "getTransforms", "_ref", "rotate", "scaleX", "scaleY", "translateX", "translateY", "values", "transform", "getMaxZoomRatio", "pointers", "pointers2", "maxRatio", "pointer", "pointerId", "pointer2", "x1", "y1", "x2", "y2", "z1", "z2", "ratio", "getPointer", "_ref2", "endOnly", "pageX", "pageY", "end", "getPointersCenter", "count", "_ref3", "startX", "startY", "getAdjustedSizes", "_ref4", "aspectRatio", "height", "width", "isValidWidth", "isValidHeight", "adjustedWidth", "getRotatedSizes", "_ref5", "degree", "arc", "sinArc", "cosArc", "newWidth", "newHeight", "getSourceCanvas", "image", "_ref6", "_ref7", "_ref8", "imageAspectRatio", "imageNaturalWidth", "imageNaturalHeight", "_ref6$rotate", "_ref6$scaleX", "_ref6$scaleY", "naturalWidth", "naturalHeight", "_ref8$fillColor", "fillColor", "_ref8$imageSmoothingE", "imageSmoothingEnabled", "_ref8$imageSmoothingQ", "imageSmoothingQuality", "_ref8$maxWidth", "maxWidth", "_ref8$maxHeight", "maxHeight", "_ref8$minWidth", "minWidth", "_ref8$minHeight", "minHeight", "canvas", "context", "maxSizes", "minSizes", "destMaxSizes", "destMinSizes", "destWidth", "destHeight", "params", "param", "fromCharCode", "getStringFromCharCode", "dataView", "start", "length", "str", "REGEXP_DATA_URL_HEAD", "dataURLToArrayBuffer", "dataURL", "base64", "binary", "arrayBuffer", "uint8", "arrayBufferToDataURL", "mimeType", "chunks", "chunkSize", "resetAndGetOrientation", "orientation", "littleEndian", "app1Start", "ifdStart", "offset", "exifIDCode", "tiffOffset", "endianness", "firstIFDOffset", "_length", "_offset", "parseOrientation", "render", "container", "cropper", "containerData", "imageData", "viewMode", "rotated", "canvasWidth", "canvasHeight", "canvasData", "sizeLimited", "positionLimited", "cropBoxData", "cropped", "minCanvasWidth", "minCanvasHeight", "_getAdjustedSizes", "newCanvasLeft", "newCanvasTop", "changed", "transformed", "_getRotatedSizes", "autoCropArea", "limited", "minCropBoxWidth", "minCropBoxHeight", "maxCropBoxWidth", "maxCropBoxHeight", "preview", "crossOrigin", "alt", "previews", "el", "img", "cropBoxWidth", "cropBoxHeight", "left", "top", "originalWidth", "originalHeight", "events", "handlers", "ratioX", "ratioY", "_this", "delta", "buttons", "button", "action", "touch", "change", "right", "bottom", "minLeft", "minTop", "renderable", "range", "check", "side", "p", "methods", "hasSameSize", "offsetX", "offsetY", "_this$canvasData", "x", "y", "_originalEvent", "pivot", "center", "_scaleX", "_scaleY", "rounded", "widthChanged", "heightChanged", "source", "_this$getData", "initialX", "initialY", "initialWidth", "initialHeight", "_options$imageSmoothi", "sourceWidth", "sourceHeight", "srcX", "srcY", "srcWidth", "srcHeight", "dstX", "dstY", "dstWidth", "dstHeight", "scale", "mode", "dragBox", "face", "croppable", "movable", "AnotherCropper", "Cropper", "tagName", "xhr", "clone", "_parseOrientation", "crossOriginUrl", "_this2", "isIOSWebKit", "done", "sizingImage", "body", "template", "cropBox", "parentNode", "FrameLoadingStyle", "FrameElement", "_FrameElement", "name", "value", "frameLoadingStyleFromString", "style", "drive", "activateScriptElement", "element", "createdScriptElement", "cspNonce", "getCspNonce", "copyElementAttributes", "destinationElement", "sourceElement", "createDocumentFragment", "html", "template", "dispatch", "eventName", "target", "cancelable", "detail", "event", "cancelEvent", "nextRepaint", "nextEventLoopTick", "nextAnimationFrame", "resolve", "parseHTMLDocument", "unindent", "strings", "values", "lines", "interpolate", "match", "indent", "line", "result", "string", "i", "uuid", "_", "getAttribute", "attributeName", "elements", "hasAttribute", "markAsBusy", "clearBusyState", "waitForLoad", "timeoutInMilliseconds", "onComplete", "getHistoryMethodForAction", "action", "isAction", "getVisitAction", "getMetaElement", "getMetaContent", "nonce", "content", "setMetaContent", "findClosestRecursively", "selector", "elementIsFocusable", "queryAutofocusableElement", "elementOrDocumentFragment", "around", "callback", "reader", "before", "after", "doesNotTargetIFrame", "findLinkFromClickTarget", "link", "linkTarget", "debounce", "fn", "delay", "timeoutId", "args", "submitter", "Config", "#submitter", "config", "forms", "expandURL", "locatable", "getAnchor", "url", "anchorMatch", "getAction$1", "form", "getExtension", "getLastPathComponent", "isPrefixedBy", "baseURL", "prefix", "addTrailingSlash", "locationIsVisitable", "location", "rootLocation", "getLocationForLink", "getRequestURL", "anchor", "toCacheKey", "urlsAreEqual", "left", "right", "getPathComponents", "FetchResponse", "response", "LimitedSet", "maxSize", "oldestValue", "recentRequests", "fetchWithTurboHeaders", "options", "modifiedHeaders", "requestUID", "fetchMethodFromString", "method", "FetchMethod", "fetchEnctypeFromString", "encoding", "FetchEnctype", "FetchRequest", "#resolveRequestPromise", "_value", "delegate", "requestBody", "enctype", "body", "buildResourceAndBody", "fetchBody", "fetchMethod", "fetchOptions", "#allowRequestToBeIntercepted", "error", "#willDelegateErrorHandling", "fetchResponse", "isSafe", "mimeType", "requestInterception", "resource", "searchParams", "entriesExcludingFiles", "mergeIntoURLSearchParams", "entries", "AppearanceObserver", "StreamMessage", "message", "fragment", "importStreamElements", "streamElement", "inertScriptElement", "identity", "key", "LRUCache", "#toCacheKey", "size", "entry", "index", "PREFETCH_DELAY", "PrefetchCache", "#prefetchTimeout", "#maxAges", "prefetchDelay", "request", "ttl", "cacheTtl", "maxAge", "prefetchCache", "FormSubmissionState", "FormSubmission", "_FormSubmission", "formElement", "mustRedirect", "getMethod", "getAction", "getFormAction", "buildFormData", "getEnctype", "initialized", "requesting", "confirmationMessage", "stopping", "stopped", "token", "getCookieValue", "_request", "responseSucceededWithoutRedirect", "input", "formData", "cookieName", "cookie", "formElementAction", "formAction", "Snapshot", "queryPermanentElementsAll", "id", "getPermanentElementById", "snapshot", "permanentElementMap", "currentPermanentElement", "newPermanentElement", "node", "FormSubmitObserver", "eventTarget", "submissionDoesNotDismissDialog", "submissionDoesNotTargetIFrame", "View", "#resolveRenderPromise", "#resolveInterceptionPromise", "x", "y", "renderer", "isPreview", "shouldRender", "willRender", "shouldInvalidate", "renderInterception", "reason", "direction", "FrameView", "LinkInterceptor", "_event", "LinkClickObserver", "FormLinkClickObserver", "originalEvent", "type", "turboFrame", "turboAction", "turboConfirm", "Bardo", "bardo", "permanentElement", "placeholder", "createPlaceholderForPermanentElement", "clone", "Renderer", "#activeElement", "currentElement", "newElement", "currentSnapshot", "newSnapshot", "reject", "FrameRenderer", "destinationRange", "frameElement", "sourceRange", "renderElement", "block", "readScrollLogicalPosition", "behavior", "readScrollBehavior", "activatedScriptElement", "defaultValue", "Idiomorph", "noOp", "defaults", "elt", "morph", "oldNode", "newContent", "normalizeElement", "newNode", "normalizeParent", "ctx", "createMorphContext", "morphedNodes", "saveAndRestoreFocus", "withHeadBlocking", "morphChildren", "morphOuterHTML", "oldParent", "activeElement", "activeElementId", "selectionStart", "selectionEnd", "results", "newParent", "insertionPoint", "endPoint", "newChild", "bestMatch", "findBestMatch", "removeNodesBetween", "morphNode", "newChildId", "movedChild", "moveBeforeById", "insertedNode", "createNode", "tempNode", "removeNode", "newEmptyChild", "newClonedChild", "startPoint", "softMatch", "nextSibling", "siblingSoftMatchCount", "cursor", "isSoftMatch", "isIdSetMatch", "oldSet", "newSet", "oldElt", "newElt", "moveBefore", "startInclusive", "endExclusive", "parentNode", "removeElementFromAncestorsIdMaps", "idSet", "handleHeadElement", "morphAttributes", "ignoreValueOfActiveElement", "oldAttributes", "newAttributes", "newAttribute", "ignoreAttribute", "oldAttribute", "syncInputValue", "oldElement", "newValue", "oldValue", "syncBooleanAttribute", "newLiveValue", "oldLiveValue", "ignoreUpdate", "attr", "updateType", "possibleActiveElement", "oldHead", "newHead", "promises", "newCtx", "added", "removed", "preserved", "nodesToAppend", "srcToNewHeadNodes", "newHeadChild", "currentHeadElt", "inNewContent", "isReAppended", "isPreserved", "promise", "_resolve", "removedElement", "persistentIds", "idMap", "createIdMaps", "mergedConfig", "mergeDefaults", "morphStyle", "createPantry", "createActiveElementAndParents", "finalConfig", "pantry", "activeElementAndParents", "findIdElements", "root", "populateIdMapWithTree", "current", "oldContent", "oldIdElements", "newIdElements", "createPersistentIds", "newRoot", "duplicateIds", "oldIdTagNameMap", "tagName", "generatedByIdiomorph", "parseContent", "SlicedParentNode", "dummyParent", "nodes", "nodeList", "referenceNode", "parser", "contentWithSvgsRemoved", "htmlElement", "morphElements", "callbacks", "DefaultIdiomorphCallbacks", "shouldRefreshFrameWithMorphing", "currentFrame", "newFrame", "areFramesCompatibleForRefreshing", "closestFrameReloadableWithMorphing", "#beforeNodeMorphed", "beforeNodeMorphed", "mutationType", "MorphingFrameRenderer", "ProgressBar", "_ProgressBar", "HeadSnapshot", "elementIsNoscript", "elementWithoutNonce", "outerHTML", "details", "elementType", "elementIsTracked", "matchedType", "tracked", "elementIsMetaElementWithName", "elementIsScript", "elementIsStylesheet", "PageSnapshot", "_PageSnapshot", "documentElement", "head", "headSnapshot", "clonedElement", "selectElements", "clonedSelectElements", "source", "option", "clonedPasswordInput", "clonedNoscriptElement", "ViewTransitioner", "#viewTransitionStarted", "#lastOperation", "useViewTransition", "render", "defaultOptions", "TimingMetric", "VisitState", "SystemStatusCode", "Direction", "Visit", "restorationIdentifier", "historyChanged", "referrer", "snapshotHTML", "visitCachedSnapshot", "updateHistory", "shouldCacheSnapshot", "acceptsStreamResponse", "refresh", "actionForHistory", "statusCode", "isSuccessful", "responseHTML", "_response", "redirected", "_error", "scrollPosition", "metric", "BrowserAdapter", "session", "visit", "_visit", "_formSubmission", "CacheObserver", "FrameRedirector", "_location", "#shouldRedirect", "frame", "#findFrameElement", "#shouldSubmit", "meta", "History", "state", "additionalData", "restorationData", "turbo", "restorationIndex", "LinkPrefetchObserver", "#prefetchedLink", "#enable", "#tryToPrefetchRequest", "#cancelRequestIfObsolete", "#tryToUsePrefetchedRequest", "#isPrefetchable", "fetchRequest", "#cacheTtl", "#cancelPrefetchRequest", "cached", "turboFrameTarget", "unfetchableLink", "linkToTheSamePage", "linkOptsOut", "nonSafeLink", "eventPrevented", "turboPrefetchParent", "turboMethod", "isUJS", "Navigator", "formSubmission", "visitOptions", "#getActionForFormSubmission", "#getDefaultAction", "PageStage", "PageObserver", "readyState", "ScrollObserver", "position", "StreamMessageRenderer", "getPermanentElementMapForFragment", "withAutofocusFromFragment", "withPreservedFocus", "permanentElementsInDocument", "permanentElementInDocument", "elementInStream", "generatedID", "turboStreams", "elementWithAutofocus", "firstAutofocusableElementInStreams", "willAutofocusId", "elementToAutofocus", "activeElementBeforeRender", "activeElementAfterRender", "restoreFocusTo", "elementToFocus", "nodeListOfStreamElements", "StreamObserver", "#started", "fetchResponseFromEvent", "fetchResponseIsStream", "ErrorRenderer", "replaceableElement", "PageRenderer", "#setLanguage", "dir", "lang", "mergedHeadElements", "newStylesheetElements", "loadingElements", "newHeadElements", "elementList", "noscriptElement", "MorphingPageRenderer", "SnapshotCache", "PageView", "rendererClass", "cachedSnapshot", "Preloader", "snapshotCache", "#preloadAll", "Cache", "#setCacheControl", "Session", "#pageRefreshDebouncePeriod", "adapter", "requestId", "scroll", "isRecentRequest", "isCurrentUrl", "isUnsafe", "isStream", "frameTarget", "extendURLWithDeprecatedProperties", "defaultPrevented", "_snapshot", "_isPreview", "renderMethod", "ev", "newBody", "timing", "submitterIsNavigatable", "container", "withinFrame", "deprecatedLocationPropertyDescriptors", "cache", "navigator", "start", "registerAdapter", "connectStreamSource", "disconnectStreamSource", "renderStreamMessage", "setProgressBarDelay", "setConfirmMethod", "confirmMethod", "setFormMode", "mode", "morphBodyElements", "currentBody", "morphTurboFrameElements", "Turbo", "TurboFrameMissingError", "FrameController", "_fetchResponse", "#currentFetchRequest", "#resolveVisitPromise", "#connected", "#hasBeenLoaded", "#ignoredAttributes", "#shouldMorphFrame", "#loadSourceURL", "#isIgnoringChangesTo", "src", "#visit", "document", "#loadFrameResponse", "#handleUnvisitableFrameResponse", "#shouldInterceptNavigation", "#navigateFrame", "_renderMethod", "_newElement", "newFrameElement", "#willHandleFrameMissingFromResponse", "#handleFrameMissingFromResponse", "#withCurrentNavigationElement", "pageSnapshot", "#visitResponse", "#throwFrameMissingError", "wrapped", "#getFrameElementById", "activateElement", "#formActionIsVisitable", "sourceURL", "#ignoringChangesToAttribute", "currentURL", "StreamActions", "e", "targetElement", "StreamElement", "_StreamElement", "c", "existingChildren", "newChildrenIds", "actionFunction", "#raise", "StreamSourceElement", "scriptElement", "EventListener", "eventTarget", "eventName", "eventOptions", "binding", "event", "extendedEvent", "extendEvent", "left", "right", "leftIndex", "rightIndex", "stopImmediatePropagation", "Dispatcher", "application", "eventListener", "listeners", "map", "clearEventListeners", "error", "message", "detail", "eventListenerMap", "cacheKey", "parts", "key", "defaultActionDescriptorFilters", "value", "element", "descriptorPattern", "parseActionDescriptorString", "descriptorString", "matches", "keyFilter", "parseEventTarget", "parseEventOptions", "eventTargetName", "options", "token", "stringifyEventTarget", "camelize", "_", "char", "namespaceCamelize", "capitalize", "dasherize", "tokenize", "isSomething", "object", "hasProperty", "property", "allModifiers", "Action", "index", "descriptor", "schema", "getDefaultEventNameForElement", "eventFilter", "filters", "standardFilter", "params", "pattern", "name", "match", "typecast", "meta", "ctrl", "alt", "shift", "modifier", "defaultEventNames", "e", "tagName", "Binding", "context", "action", "actionEvent", "method", "actionDescriptorFilters", "controller", "passes", "filter", "target", "currentTarget", "identifier", "ElementObserver", "delegate", "mutations", "callback", "mutation", "attributeName", "nodes", "node", "tree", "processor", "AttributeObserver", "add", "fetch", "del", "prune", "values", "Multimap", "set", "size", "_key", "_values", "SelectorObserver", "element", "selector", "delegate", "details", "ElementObserver", "Multimap", "callback", "matches", "tree", "match", "selectors", "_attributeName", "matchedBefore", "StringMapObserver", "mutations", "attributeName", "mutation", "oldValue", "key", "value", "attribute", "TokenListObserver", "AttributeObserver", "unmatchedTokens", "matchedTokens", "tokens", "token", "previousTokens", "currentTokens", "firstDifferingIndex", "zip", "previousToken", "currentToken", "tokensAreEqual", "tokenString", "parseTokenString", "content", "index", "left", "right", "length", "_", "ValueListObserver", "parseResult", "valuesByToken", "error", "BindingObserver", "context", "action", "binding", "Binding", "Action", "ValueObserver", "receiver", "descriptor", "name", "defaultValue", "writer", "rawValue", "rawOldValue", "changedMethodName", "changedMethod", "valueDescriptorMap", "descriptors", "hasMethodName", "capitalize", "TargetObserver", "_a", "readInheritableStaticArrayValues", "constructor", "propertyName", "ancestors", "getAncestorsForConstructor", "values", "getOwnStaticArrayValues", "readInheritableStaticObjectPairs", "pairs", "getOwnStaticObjectPairs", "definition", "OutletObserver", "outletName", "observer", "_selector", "outlet", "hasOutlet", "hasOutletController", "_element", "selectorObserver", "attributeObserver", "dependencies", "module", "identifiers", "Context", "scope", "functionName", "detail", "identifier", "controller", "message", "namespaceCamelize", "methodName", "args", "bless", "shadow", "getBlessedProperties", "properties", "shadowConstructor", "extend", "shadowProperties", "getShadowProperties", "blessedProperties", "blessing", "prototype", "getOwnKeys", "getShadowedDescriptor", "shadowingDescriptor", "object", "extendWithReflect", "extended", "testReflectExtension", "b", "blessDefinition", "Module", "application", "ClassMap", "tokenize", "DataMap", "dasherize", "Guide", "logger", "warnedKeys", "attributeValueContainsToken", "TargetSet", "targetName", "targetNames", "target", "targets", "targetDescriptor", "revisedAttributeName", "OutletSet", "controllerElement", "outletNames", "outlets", "controllerAttribute", "Scope", "_Scope", "schema", "ScopeObserver", "scopesByIdentifier", "referenceCount", "Router", "contexts", "afterLoad", "defaultSchema", "objectFromEntries", "c", "n", "array", "memo", "k", "v", "Application", "Dispatcher", "defaultActionDescriptorFilters", "domReady", "controllerConstructor", "filter", "head", "rest", "resolve", "ClassPropertiesBlessing", "classDefinition", "propertiesForClassDefinition", "classes", "OutletPropertiesBlessing", "outletDefinition", "propertiesForOutletDefinition", "getOutletController", "getControllerAndEnsureConnectedScope", "outletController", "camelizedName", "outletElement", "TargetPropertiesBlessing", "targetDefinition", "propertiesForTargetDefinition", "ValuePropertiesBlessing", "valueDefinitionPairs", "propertyDescriptorMap", "result", "valueDefinitionPair", "valueDescriptor", "parseValueDefinitionPair", "propertiesForValueDefinitionPair", "read", "write", "typeDefinition", "valueDescriptorForTokenAndTypeDefinition", "parseValueTypeConstant", "constant", "parseValueTypeDefault", "parseValueTypeObject", "payload", "typeObject", "hasType", "isSomething", "hasDefault", "fullObject", "onlyType", "onlyDefault", "typeFromObject", "typeFromDefaultValue", "propertyPath", "parseValueTypeDefinition", "typeFromConstant", "type", "defaultValueForDefinition", "defaultValuesByType", "hasProperty", "constantFromType", "camelize", "readers", "writers", "writeString", "writeJSON", "Controller", "_identifier", "_application", "eventName", "prefix", "bubbles", "cancelable", "event", "resource_header_controller_default", "Controller", "#setupDrawer", "#removeBackdrop", "drawerElement", "#getPlacementClasses", "className", "#toggleEdgePlacementClasses", "#togglePlacementClasses", "#createBackdrop", "event", "backdrop", "placement", "placements", "show", "classes", "c", "nested_resource_form_fields_controller_default", "Controller", "e", "content", "event", "wrapper", "input", "form_controller_default", "Controller", "hiddenField", "top", "bottom", "right", "left", "auto", "basePlacements", "start", "end", "clippingParents", "viewport", "popper", "reference", "variationPlacements", "acc", "placement", "placements", "beforeRead", "read", "afterRead", "beforeMain", "main", "afterMain", "beforeWrite", "write", "afterWrite", "modifierPhases", "getNodeName", "element", "getWindow", "node", "ownerDocument", "isElement", "node", "OwnElement", "getWindow", "isHTMLElement", "isShadowRoot", "applyStyles", "_ref", "state", "name", "style", "attributes", "element", "isHTMLElement", "getNodeName", "value", "effect", "_ref2", "initialStyles", "styleProperties", "property", "attribute", "applyStyles_default", "getBasePlacement", "placement", "max", "min", "round", "getUAString", "uaData", "item", "isLayoutViewport", "getUAString", "getBoundingClientRect", "element", "includeScale", "isFixedStrategy", "clientRect", "scaleX", "scaleY", "isHTMLElement", "round", "_ref", "isElement", "getWindow", "visualViewport", "addVisualOffsets", "isLayoutViewport", "x", "y", "width", "height", "getLayoutRect", "element", "clientRect", "getBoundingClientRect", "width", "height", "contains", "parent", "child", "rootNode", "isShadowRoot", "next", "getComputedStyle", "element", "getWindow", "isTableElement", "element", "getNodeName", "getDocumentElement", "element", "isElement", "getParentNode", "element", "getNodeName", "isShadowRoot", "getDocumentElement", "getTrueOffsetParent", "element", "isHTMLElement", "getComputedStyle", "getContainingBlock", "isFirefox", "getUAString", "isIE", "elementCss", "currentNode", "getParentNode", "isShadowRoot", "getNodeName", "css", "getOffsetParent", "window", "getWindow", "offsetParent", "isTableElement", "getMainAxisFromPlacement", "placement", "within", "min", "value", "max", "withinMaxClamp", "v", "getFreshSideObject", "mergePaddingObject", "paddingObject", "getFreshSideObject", "expandToHashMap", "value", "keys", "hashMap", "key", "toPaddingObject", "padding", "state", "mergePaddingObject", "expandToHashMap", "basePlacements", "arrow", "_ref", "_state$modifiersData$", "name", "options", "arrowElement", "popperOffsets", "basePlacement", "getBasePlacement", "axis", "getMainAxisFromPlacement", "isVertical", "left", "right", "len", "paddingObject", "arrowRect", "getLayoutRect", "minProp", "top", "maxProp", "bottom", "endDiff", "startDiff", "arrowOffsetParent", "getOffsetParent", "clientSize", "centerToReference", "min", "max", "center", "offset", "within", "axisProp", "effect", "_ref2", "_options$element", "contains", "arrow_default", "getVariation", "placement", "unsetSides", "roundOffsetsByDPR", "_ref", "win", "x", "y", "dpr", "round", "mapToStyles", "_ref2", "_Object$assign2", "popper", "popperRect", "placement", "variation", "offsets", "position", "gpuAcceleration", "adaptive", "roundOffsets", "isFixed", "_offsets$x", "_offsets$y", "_ref3", "hasX", "hasY", "sideX", "left", "sideY", "top", "offsetParent", "getOffsetParent", "heightProp", "widthProp", "getWindow", "getDocumentElement", "getComputedStyle", "right", "end", "bottom", "offsetY", "offsetX", "commonStyles", "_ref4", "_Object$assign", "computeStyles", "_ref5", "state", "options", "_options$gpuAccelerat", "_options$adaptive", "_options$roundOffsets", "getBasePlacement", "getVariation", "computeStyles_default", "passive", "effect", "_ref", "state", "instance", "options", "_options$scroll", "scroll", "_options$resize", "resize", "window", "getWindow", "scrollParents", "scrollParent", "eventListeners_default", "hash", "getOppositePlacement", "placement", "matched", "hash", "getOppositeVariationPlacement", "placement", "matched", "getWindowScroll", "node", "win", "getWindow", "scrollLeft", "scrollTop", "getWindowScrollBarX", "element", "getBoundingClientRect", "getDocumentElement", "getWindowScroll", "getViewportRect", "element", "strategy", "win", "getWindow", "html", "getDocumentElement", "visualViewport", "width", "height", "x", "y", "layoutViewport", "isLayoutViewport", "getWindowScrollBarX", "getDocumentRect", "element", "_element$ownerDocumen", "html", "getDocumentElement", "winScroll", "getWindowScroll", "body", "width", "max", "height", "x", "getWindowScrollBarX", "y", "getComputedStyle", "isScrollParent", "element", "_getComputedStyle", "getComputedStyle", "overflow", "overflowX", "overflowY", "getScrollParent", "node", "getNodeName", "isHTMLElement", "isScrollParent", "getParentNode", "listScrollParents", "element", "list", "_element$ownerDocumen", "scrollParent", "getScrollParent", "isBody", "win", "getWindow", "target", "isScrollParent", "updatedList", "getParentNode", "rectToClientRect", "rect", "getInnerBoundingClientRect", "element", "strategy", "rect", "getBoundingClientRect", "getClientRectFromMixedType", "clippingParent", "viewport", "rectToClientRect", "getViewportRect", "isElement", "getDocumentRect", "getDocumentElement", "getClippingParents", "clippingParents", "listScrollParents", "getParentNode", "canEscapeClipping", "getComputedStyle", "clipperElement", "isHTMLElement", "getOffsetParent", "contains", "getNodeName", "getClippingRect", "boundary", "rootBoundary", "mainClippingParents", "firstClippingParent", "clippingRect", "accRect", "max", "min", "computeOffsets", "_ref", "reference", "element", "placement", "basePlacement", "getBasePlacement", "variation", "getVariation", "commonX", "commonY", "offsets", "top", "bottom", "right", "left", "mainAxis", "getMainAxisFromPlacement", "len", "start", "end", "detectOverflow", "state", "options", "_options", "_options$placement", "placement", "_options$strategy", "strategy", "_options$boundary", "boundary", "clippingParents", "_options$rootBoundary", "rootBoundary", "viewport", "_options$elementConte", "elementContext", "popper", "_options$altBoundary", "altBoundary", "_options$padding", "padding", "paddingObject", "mergePaddingObject", "expandToHashMap", "basePlacements", "altContext", "reference", "popperRect", "element", "clippingClientRect", "getClippingRect", "isElement", "getDocumentElement", "referenceClientRect", "getBoundingClientRect", "popperOffsets", "computeOffsets", "popperClientRect", "rectToClientRect", "elementClientRect", "overflowOffsets", "offsetData", "offset", "key", "multiply", "right", "bottom", "axis", "top", "computeAutoPlacement", "state", "options", "_options", "placement", "boundary", "rootBoundary", "padding", "flipVariations", "_options$allowedAutoP", "allowedAutoPlacements", "placements", "variation", "getVariation", "variationPlacements", "basePlacements", "allowedPlacements", "overflows", "acc", "detectOverflow", "getBasePlacement", "a", "b", "getExpandedFallbackPlacements", "placement", "getBasePlacement", "auto", "oppositePlacement", "getOppositePlacement", "getOppositeVariationPlacement", "flip", "_ref", "state", "options", "name", "_options$mainAxis", "checkMainAxis", "_options$altAxis", "checkAltAxis", "specifiedFallbackPlacements", "padding", "boundary", "rootBoundary", "altBoundary", "_options$flipVariatio", "flipVariations", "allowedAutoPlacements", "preferredPlacement", "basePlacement", "isBasePlacement", "fallbackPlacements", "placements", "acc", "computeAutoPlacement", "referenceRect", "popperRect", "checksMap", "makeFallbackChecks", "firstFittingPlacement", "i", "_basePlacement", "isStartVariation", "getVariation", "start", "isVertical", "top", "bottom", "len", "overflow", "detectOverflow", "mainVariationSide", "right", "left", "altVariationSide", "checks", "check", "numberOfChecks", "_loop", "_i", "fittingPlacement", "_ret", "flip_default", "getSideOffsets", "overflow", "rect", "preventedOffsets", "isAnySideFullyClipped", "top", "right", "bottom", "left", "side", "hide", "_ref", "state", "name", "referenceRect", "popperRect", "referenceOverflow", "detectOverflow", "popperAltOverflow", "referenceClippingOffsets", "popperEscapeOffsets", "isReferenceHidden", "hasPopperEscaped", "hide_default", "distanceAndSkiddingToXY", "placement", "rects", "offset", "basePlacement", "getBasePlacement", "invertDistance", "left", "top", "_ref", "skidding", "distance", "right", "_ref2", "state", "options", "name", "_options$offset", "data", "placements", "acc", "_data$state$placement", "x", "y", "offset_default", "popperOffsets", "_ref", "state", "name", "computeOffsets", "popperOffsets_default", "getAltAxis", "axis", "preventOverflow", "_ref", "state", "options", "name", "_options$mainAxis", "checkMainAxis", "_options$altAxis", "checkAltAxis", "boundary", "rootBoundary", "altBoundary", "padding", "_options$tether", "tether", "_options$tetherOffset", "tetherOffset", "overflow", "detectOverflow", "basePlacement", "getBasePlacement", "variation", "getVariation", "isBasePlacement", "mainAxis", "getMainAxisFromPlacement", "altAxis", "getAltAxis", "popperOffsets", "referenceRect", "popperRect", "tetherOffsetValue", "normalizedTetherOffsetValue", "offsetModifierState", "data", "_offsetModifierState$", "mainSide", "top", "left", "altSide", "bottom", "right", "len", "offset", "min", "max", "additive", "minLen", "start", "maxLen", "arrowElement", "arrowRect", "getLayoutRect", "arrowPaddingObject", "getFreshSideObject", "arrowPaddingMin", "arrowPaddingMax", "arrowLen", "within", "minOffset", "maxOffset", "arrowOffsetParent", "getOffsetParent", "clientOffset", "offsetModifierValue", "tetherMin", "tetherMax", "preventedOffset", "_offsetModifierState$2", "_mainSide", "_altSide", "_offset", "_len", "_min", "_max", "isOriginSide", "_offsetModifierValue", "_tetherMin", "_tetherMax", "_preventedOffset", "withinMaxClamp", "preventOverflow_default", "getHTMLElementScroll", "element", "getNodeScroll", "node", "getWindow", "isHTMLElement", "getWindowScroll", "getHTMLElementScroll", "isElementScaled", "element", "rect", "scaleX", "round", "scaleY", "getCompositeRect", "elementOrVirtualElement", "offsetParent", "isFixed", "isOffsetParentAnElement", "isHTMLElement", "offsetParentIsScaled", "documentElement", "getDocumentElement", "getBoundingClientRect", "scroll", "offsets", "getNodeName", "isScrollParent", "getNodeScroll", "getWindowScrollBarX", "order", "modifiers", "map", "visited", "result", "modifier", "sort", "requires", "dep", "depModifier", "orderModifiers", "orderedModifiers", "modifierPhases", "acc", "phase", "debounce", "fn", "pending", "resolve", "mergeByName", "modifiers", "merged", "current", "existing", "key", "DEFAULT_OPTIONS", "areValidElements", "_len", "args", "_key", "element", "popperGenerator", "generatorOptions", "_generatorOptions", "_generatorOptions$def", "defaultModifiers", "_generatorOptions$def2", "defaultOptions", "reference", "popper", "options", "state", "effectCleanupFns", "isDestroyed", "instance", "setOptionsAction", "cleanupModifierEffects", "isElement", "listScrollParents", "orderedModifiers", "orderModifiers", "mergeByName", "m", "runModifierEffects", "_state$elements", "getCompositeRect", "getOffsetParent", "getLayoutRect", "modifier", "index", "_state$orderedModifie", "fn", "_state$orderedModifie2", "_options", "name", "debounce", "resolve", "_ref", "_ref$options", "effect", "cleanupFn", "noopFn", "defaultModifiers", "eventListeners_default", "popperOffsets_default", "computeStyles_default", "applyStyles_default", "offset_default", "flip_default", "preventOverflow_default", "arrow_default", "hide_default", "createPopper", "popperGenerator", "resource_drop_down_controller_default", "Controller", "createPopper", "ev", "clickedEl", "ignoreClickOutsideClass", "isIgnored", "el", "isFloatingUI", "options", "resource_collapse_controller_default", "Controller", "#updateState", "isVisible", "resource_dismiss_controller_default", "Controller", "frame_navigator_controller_default", "Controller", "#loadingStarted", "event", "#loadingStopped", "src", "#notifySrcChanged", "#updateNavigationButtonsDisplay", "color_mode_controller_default", "Controller", "mode", "next", "sun", "moon", "entries", "setPrototypeOf", "isFrozen", "getPrototypeOf", "getOwnPropertyDescriptor", "Object", "freeze", "seal", "create", "apply", "construct", "Reflect", "x", "func", "thisArg", "_len", "arguments", "length", "args", "Array", "_key", "Func", "_len2", "_key2", "arrayForEach", "unapply", "prototype", "forEach", "arrayLastIndexOf", "lastIndexOf", "arrayPop", "pop", "arrayPush", "push", "arraySplice", "splice", "stringToLowerCase", "String", "toLowerCase", "stringToString", "toString", "stringMatch", "match", "stringReplace", "replace", "stringIndexOf", "indexOf", "stringTrim", "trim", "objectHasOwnProperty", "hasOwnProperty", "regExpTest", "RegExp", "test", "typeErrorCreate", "unconstruct", "TypeError", "lastIndex", "_len3", "_key3", "_len4", "_key4", "addToSet", "set", "array", "transformCaseFunc", "l", "element", "lcElement", "cleanArray", "index", "clone", "object", "newObject", "property", "value", "isArray", "constructor", "lookupGetter", "prop", "desc", "get", "fallbackValue", "html", "svg", "svgFilters", "svgDisallowed", "mathMl", "mathMlDisallowed", "text", "xml", "MUSTACHE_EXPR", "ERB_EXPR", "TMPLIT_EXPR", "DATA_ATTR", "ARIA_ATTR", "IS_ALLOWED_URI", "IS_SCRIPT_OR_DATA", "ATTR_WHITESPACE", "DOCTYPE_NAME", "CUSTOM_ELEMENT", "NODE_TYPE", "attribute", "cdataSection", "entityReference", "entityNode", "progressingInstruction", "comment", "document", "documentType", "documentFragment", "notation", "getGlobal", "window", "_createTrustedTypesPolicy", "trustedTypes", "purifyHostElement", "createPolicy", "suffix", "ATTR_NAME", "hasAttribute", "getAttribute", "policyName", "createHTML", "createScriptURL", "scriptUrl", "console", "warn", "_createHooksMap", "afterSanitizeAttributes", "afterSanitizeElements", "afterSanitizeShadowDOM", "beforeSanitizeAttributes", "beforeSanitizeElements", "beforeSanitizeShadowDOM", "uponSanitizeAttribute", "uponSanitizeElement", "uponSanitizeShadowNode", "createDOMPurify", "undefined", "DOMPurify", "root", "version", "VERSION", "removed", "nodeType", "Element", "isSupported", "originalDocument", "currentScript", "DocumentFragment", "HTMLTemplateElement", "Node", "NodeFilter", "NamedNodeMap", "MozNamedAttrMap", "HTMLFormElement", "DOMParser", "ElementPrototype", "cloneNode", "remove", "getNextSibling", "getChildNodes", "getParentNode", "template", "createElement", "content", "ownerDocument", "trustedTypesPolicy", "emptyHTML", "implementation", "createNodeIterator", "createDocumentFragment", "getElementsByTagName", "importNode", "hooks", "createHTMLDocument", "EXPRESSIONS", "ALLOWED_TAGS", "DEFAULT_ALLOWED_TAGS", "TAGS", "ALLOWED_ATTR", "DEFAULT_ALLOWED_ATTR", "ATTRS", "CUSTOM_ELEMENT_HANDLING", "tagNameCheck", "writable", "configurable", "enumerable", "attributeNameCheck", "allowCustomizedBuiltInElements", "FORBID_TAGS", "FORBID_ATTR", "EXTRA_ELEMENT_HANDLING", "tagCheck", "attributeCheck", "ALLOW_ARIA_ATTR", "ALLOW_DATA_ATTR", "ALLOW_UNKNOWN_PROTOCOLS", "ALLOW_SELF_CLOSE_IN_ATTR", "SAFE_FOR_TEMPLATES", "SAFE_FOR_XML", "WHOLE_DOCUMENT", "SET_CONFIG", "FORCE_BODY", "RETURN_DOM", "RETURN_DOM_FRAGMENT", "RETURN_TRUSTED_TYPE", "SANITIZE_DOM", "SANITIZE_NAMED_PROPS", "SANITIZE_NAMED_PROPS_PREFIX", "KEEP_CONTENT", "IN_PLACE", "USE_PROFILES", "FORBID_CONTENTS", "DEFAULT_FORBID_CONTENTS", "DATA_URI_TAGS", "DEFAULT_DATA_URI_TAGS", "URI_SAFE_ATTRIBUTES", "DEFAULT_URI_SAFE_ATTRIBUTES", "MATHML_NAMESPACE", "SVG_NAMESPACE", "HTML_NAMESPACE", "NAMESPACE", "IS_EMPTY_INPUT", "ALLOWED_NAMESPACES", "DEFAULT_ALLOWED_NAMESPACES", "MATHML_TEXT_INTEGRATION_POINTS", "HTML_INTEGRATION_POINTS", "COMMON_SVG_AND_HTML_ELEMENTS", "PARSER_MEDIA_TYPE", "SUPPORTED_PARSER_MEDIA_TYPES", "DEFAULT_PARSER_MEDIA_TYPE", "CONFIG", "formElement", "isRegexOrFunction", "testValue", "Function", "_parseConfig", "cfg", "ADD_URI_SAFE_ATTR", "ADD_DATA_URI_TAGS", "ALLOWED_URI_REGEXP", "ADD_TAGS", "ADD_ATTR", "ADD_FORBID_CONTENTS", "table", "tbody", "TRUSTED_TYPES_POLICY", "ALL_SVG_TAGS", "ALL_MATHML_TAGS", "_checkValidNamespace", "parent", "tagName", "namespaceURI", "parentTagName", "Boolean", "_forceRemove", "node", "removeChild", "_removeAttribute", "name", "getAttributeNode", "from", "removeAttribute", "setAttribute", "_initDocument", "dirty", "doc", "leadingWhitespace", "matches", "dirtyPayload", "parseFromString", "documentElement", "createDocument", "innerHTML", "body", "insertBefore", "createTextNode", "childNodes", "call", "_createNodeIterator", "SHOW_ELEMENT", "SHOW_COMMENT", "SHOW_TEXT", "SHOW_PROCESSING_INSTRUCTION", "SHOW_CDATA_SECTION", "_isClobbered", "nodeName", "textContent", "attributes", "hasChildNodes", "_isNode", "_executeHooks", "currentNode", "data", "hook", "_sanitizeElements", "allowedTags", "firstElementChild", "_isBasicCustomElement", "parentNode", "childCount", "i", "childClone", "__removalCount", "expr", "_isValidAttribute", "lcTag", "lcName", "_sanitizeAttributes", "hookEvent", "attrName", "attrValue", "keepAttr", "allowedAttributes", "forceKeepAttr", "attr", "initValue", "getAttributeType", "setAttributeNS", "_sanitizeShadowDOM", "fragment", "shadowNode", "shadowIterator", "nextNode", "sanitize", "importedNode", "returnNode", "appendChild", "firstChild", "nodeIterator", "shadowroot", "shadowrootmode", "serializedHTML", "outerHTML", "doctype", "setConfig", "clearConfig", "isValidAttribute", "tag", "addHook", "entryPoint", "hookFunction", "removeHook", "removeHooks", "removeAllHooks", "purify", "_getDefaults", "_defaults", "changeDefaults", "newDefaults", "noopTest", "edit", "regex", "opt", "source", "obj", "name", "val", "valSource", "other", "bull", "indent", "newline", "blockCode", "fences", "hr", "heading", "bullet", "lheadingCore", "lheading", "lheadingGfm", "_paragraph", "blockText", "_blockLabel", "def", "list", "_tag", "_comment", "html", "paragraph", "blockquote", "blockNormal", "gfmTable", "blockGfm", "blockPedantic", "escape", "inlineCode", "br", "inlineText", "_punctuation", "_punctuationOrSpace", "_notPunctuationOrSpace", "punctuation", "_punctuationGfmStrongEm", "_punctuationOrSpaceGfmStrongEm", "_notPunctuationOrSpaceGfmStrongEm", "blockSkip", "emStrongLDelimCore", "emStrongLDelim", "emStrongLDelimGfm", "emStrongRDelimAstCore", "emStrongRDelimAst", "emStrongRDelimAstGfm", "emStrongRDelimUnd", "anyPunctuation", "autolink", "_inlineComment", "tag", "_inlineLabel", "link", "reflink", "nolink", "reflinkSearch", "inlineNormal", "inlinePedantic", "inlineGfm", "inlineBreaks", "block", "inline", "escapeReplacements", "getEscapeReplacement", "ch", "encode", "cleanUrl", "href", "splitCells", "tableRow", "count", "row", "match", "offset", "str", "escaped", "curr", "cells", "i", "rtrim", "c", "invert", "l", "suffLen", "findClosingBracket", "b", "level", "outputLink", "cap", "raw", "lexer", "rules", "title", "text", "token", "indentCodeCompensation", "matchIndentToCode", "indentToCode", "node", "matchIndentInNode", "indentInNode", "_Tokenizer", "options", "src", "trimmed", "lines", "tokens", "inBlockquote", "currentLines", "currentRaw", "currentText", "top", "lastToken", "oldToken", "newText", "newToken", "isordered", "itemRegex", "endsWithBlankLine", "endEarly", "itemContents", "line", "t", "nextLine", "blankLine", "nextBulletRegex", "hrRegex", "fencesBeginRegex", "headingBeginRegex", "htmlBeginRegex", "rawLine", "nextLineWithoutTabs", "istask", "ischecked", "lastItem", "spacers", "hasMultipleLineBreaks", "headers", "aligns", "rows", "item", "align", "cell", "trimmedUrl", "rtrimSlash", "lastParenIndex", "linkLen", "links", "linkString", "maskedSrc", "prevChar", "lLength", "rDelim", "rLength", "delimTotal", "midDelimTotal", "endReg", "lastCharLength", "hasNonSpaceChars", "hasSpaceCharsOnBothEnds", "prevCapZero", "_Lexer", "__Lexer", "next", "lastParagraphClipped", "extTokenizer", "cutSrc", "startIndex", "tempSrc", "tempStart", "getStartIndex", "errMsg", "keepPrevChar", "_Renderer", "lang", "langString", "code", "depth", "ordered", "start", "body", "j", "type", "startAttr", "itemBody", "checkbox", "checked", "header", "k", "content", "cleanHref", "out", "_TextRenderer", "_Parser", "__Parser", "anyToken", "genericToken", "ret", "textToken", "renderer", "_Hooks", "markdown", "Marked", "args", "callback", "values", "tableToken", "listToken", "childTokens", "extensions", "pack", "opts", "ext", "prevRenderer", "extLevel", "prop", "rendererProp", "rendererFunc", "tokenizer", "tokenizerProp", "tokenizerFunc", "prevTokenizer", "hooks", "hooksProp", "hooksFunc", "prevHook", "arg", "walkTokens", "packWalktokens", "blockType", "origOpt", "throwError", "parser", "e", "silent", "async", "msg", "markedInstance", "marked", "setOptions", "use", "parseInline", "parser", "_Parser", "lexer", "_Lexer", "easymde_controller_default", "Controller", "#buildOptions", "event", "#handleMorph", "error", "options", "plainText", "cleanedText", "purify", "cleanedHTML", "marked", "slim_select_controller_default", "Controller", "#setupSlimSelect", "event", "#handleMorph", "settings", "selectWrapper", "repositionDropdown", "selectRect", "spaceBelow", "spaceAbove", "container", "mutations", "mutation", "target", "el", "#cleanupSlimSelect", "flatpickr_controller_default", "Controller", "#buildOptions", "event", "#handleMorph", "options", "intl_tel_input_controller_default", "Controller", "#buildOptions", "event", "#handleMorph", "select_navigator_default", "Controller", "_", "url", "anchor", "resource_tab_list_controller_default", "Controller", "#selectInternal", "event", "id", "selectedBtn", "element", "selectedTab", "tab", "btn", "insertReplacement", "source", "rx", "replacement", "newParts", "chunk", "raw", "i", "list", "interpolate", "phrase", "options", "dollarRegex", "dollarBillsYall", "interpolated", "arg", "defaultOnMissingKey", "key", "Translator", "locales", "onMissingKey", "n", "#apply", "#onMissingKey", "locale", "prevLocale", "string", "plural", "BasePlugin", "uppy", "opts", "plugins", "update", "newOpts", "translator", "Translator", "plugin", "state", "pad", "number", "getTimeStamp", "date", "hours", "minutes", "seconds", "justErrorsLogger", "args", "getTimeStamp", "debugLogger", "isDOMElement", "obj", "findDOMElement", "element", "context", "isDOMElement", "findDOMElement_default", "getTextDirection", "element", "getTextDirection_default", "slice", "options", "vnodeId", "isValidElement", "rerenderQueue", "prevDebounce", "defer", "depthSort", "CAPTURE_REGEX", "eventClock", "eventProxy", "eventProxyCapture", "i", "EMPTY_OBJ", "EMPTY_ARR", "IS_NON_DIMENSIONAL", "isArray", "Array", "assign", "obj", "props", "removeNode", "node", "parentNode", "removeChild", "createElement", "type", "children", "key", "ref", "normalizedProps", "arguments", "length", "call", "defaultProps", "createVNode", "original", "vnode", "__k", "__", "__b", "__e", "__c", "constructor", "__v", "__i", "__u", "createRef", "current", "Fragment", "BaseComponent", "context", "this", "getDomSibling", "childIndex", "sibling", "updateParentDomPointers", "child", "base", "enqueueRender", "c", "__d", "push", "process", "__r", "debounceRendering", "component", "newVNode", "oldVNode", "oldDom", "commitQueue", "refQueue", "l", "sort", "shift", "__P", "diff", "__n", "namespaceURI", "commitRoot", "diffChildren", "parentDom", "renderResult", "newParentVNode", "oldParentVNode", "globalContext", "namespace", "excessDomChildren", "isHydrating", "childVNode", "newDom", "firstChildDom", "result", "shouldPlace", "oldChildren", "newChildrenLength", "constructNewChildrenArray", "applyRef", "insert", "nextSibling", "skewedIndex", "matchingIndex", "oldChildrenLength", "remainingOldChildren", "skew", "String", "findMatchingIndex", "unmount", "parentVNode", "insertBefore", "nodeType", "toChildArray", "out", "some", "x", "y", "matched", "setStyle", "style", "value", "setProperty", "test", "dom", "name", "oldValue", "useCapture", "lowerCaseName", "o", "cssText", "replace", "toLowerCase", "_attached", "addEventListener", "removeEventListener", "e", "removeAttribute", "setAttribute", "createEventProxy", "eventHandler", "_dispatched", "event", "tmp", "isNew", "oldProps", "oldState", "snapshot", "clearProcessingException", "newProps", "isClassComponent", "provider", "componentContext", "renderHook", "count", "newType", "outer", "prototype", "render", "contextType", "__E", "doRender", "sub", "state", "__h", "_sb", "__s", "getDerivedStateFromProps", "componentWillMount", "componentDidMount", "componentWillReceiveProps", "shouldComponentUpdate", "componentWillUpdate", "componentDidUpdate", "getChildContext", "getSnapshotBeforeUpdate", "cloneNode", "then", "MODE_HYDRATE", "indexOf", "markAsForce", "diffElementNodes", "diffed", "forEach", "root", "cb", "map", "newHtml", "oldHtml", "newChildren", "inputValue", "checked", "localName", "document", "createTextNode", "createElementNS", "is", "__m", "data", "childNodes", "attributes", "__html", "innerHTML", "content", "undefined", "hasRefUnmount", "skipRemove", "r", "componentWillUnmount", "replaceNode", "documentElement", "firstChild", "cloneElement", "vnode", "props", "children", "key", "ref", "i", "defaultProps", "normalizedProps", "assign", "type", "undefined", "arguments", "length", "slice", "call", "createVNode", "slice", "EMPTY_ARR", "options", "__e", "error", "vnode", "oldVNode", "errorInfo", "component", "ctor", "handled", "__", "__c", "constructor", "getDerivedStateFromError", "setState", "__d", "componentDidCatch", "__E", "e", "vnodeId", "isValidElement", "BaseComponent", "prototype", "update", "callback", "s", "this", "__s", "state", "assign", "props", "__v", "_sb", "push", "enqueueRender", "forceUpdate", "__h", "render", "Fragment", "rerenderQueue", "defer", "Promise", "then", "bind", "resolve", "setTimeout", "depthSort", "a", "b", "__b", "process", "__r", "CAPTURE_REGEX", "eventClock", "eventProxy", "createEventProxy", "eventProxyCapture", "i", "currentIndex", "currentComponent", "previousComponent", "prevRaf", "currentHook", "afterPaintEffects", "options", "_options", "oldBeforeDiff", "__b", "oldBeforeRender", "__r", "oldAfterDiff", "diffed", "oldCommit", "__c", "oldBeforeUnmount", "unmount", "oldRoot", "__", "getHookState", "index", "type", "__h", "hooks", "__H", "length", "push", "useState", "initialState", "useReducer", "invokeOrReturn", "reducer", "init", "hookState", "_reducer", "action", "currentValue", "__N", "nextValue", "setState", "__f", "updateHookState", "p", "s", "c", "stateHooks", "filter", "x", "every", "prevScu", "call", "this", "shouldUpdate", "props", "forEach", "hookItem", "shouldComponentUpdate", "prevCWU", "componentWillUpdate", "__e", "tmp", "useEffect", "callback", "args", "state", "__s", "argsChanged", "_pendingArgs", "useRef", "initialValue", "currentHook", "useMemo", "current", "useMemo", "factory", "args", "state", "getHookState", "currentIndex", "argsChanged", "__H", "__", "__h", "useCallback", "callback", "currentHook", "flushAfterPaintEffects", "component", "afterPaintEffects", "shift", "__P", "__H", "__h", "forEach", "invokeCleanup", "invokeEffect", "e", "options", "__e", "__v", "__b", "vnode", "currentComponent", "oldBeforeDiff", "__", "parentDom", "__k", "__m", "oldRoot", "__r", "oldBeforeRender", "currentIndex", "hooks", "__c", "previousComponent", "hookItem", "__N", "_pendingArgs", "diffed", "oldAfterDiff", "c", "length", "push", "prevRaf", "requestAnimationFrame", "afterNextFrame", "commitQueue", "some", "filter", "cb", "oldCommit", "unmount", "oldBeforeUnmount", "hasErrored", "s", "HAS_RAF", "callback", "raf", "done", "clearTimeout", "timeout", "cancelAnimationFrame", "setTimeout", "hook", "comp", "cleanup", "argsChanged", "oldArgs", "newArgs", "arg", "index", "invokeOrReturn", "f", "assign", "obj", "props", "i", "shallowDiffers", "a", "b", "useLayoutEffect", "PureComponent", "p", "c", "this", "props", "context", "PureComponent", "prototype", "Component", "isPureReactComponent", "shouldComponentUpdate", "props", "state", "shallowDiffers", "this", "oldDiffHook", "options", "__b", "vnode", "type", "__f", "ref", "REACT_FORWARD_SYMBOL", "Symbol", "for", "oldCatchError", "options", "__e", "error", "newVNode", "oldVNode", "errorInfo", "then", "component", "vnode", "__", "__c", "__k", "oldUnmount", "unmount", "detachedClone", "detachedParent", "parentDom", "__H", "forEach", "effect", "assign", "__P", "map", "child", "removeOriginal", "originalParent", "__v", "appendChild", "Suspense", "this", "__u", "_suspenders", "__b", "suspended", "__a", "SuspenseList", "this", "_next", "_map", "options", "unmount", "vnode", "component", "__c", "__R", "__u", "type", "oldUnmount", "Suspense", "prototype", "Component", "promise", "suspendingVNode", "suspendingComponent", "c", "_suspenders", "push", "resolve", "suspended", "__v", "resolved", "onResolved", "onSuspensionComplete", "state", "__a", "suspendedVNode", "__k", "removeOriginal", "__P", "__O", "setState", "__b", "pop", "forceUpdate", "then", "componentWillUnmount", "render", "props", "detachedParent", "document", "createElement", "detachedComponent", "detachedClone", "fallback", "Fragment", "children", "list", "child", "node", "delete", "revealOrder", "size", "length", "SuspenseList", "prototype", "Component", "__a", "child", "list", "this", "delegated", "suspended", "__v", "node", "_map", "get", "unsuspend", "wrappedUnsuspend", "props", "revealOrder", "push", "resolve", "render", "_next", "Map", "children", "toChildArray", "reverse", "i", "length", "set", "componentDidUpdate", "componentDidMount", "_this", "forEach", "REACT_ELEMENT_TYPE", "Symbol", "for", "CAMEL_PROPS", "ON_ANI", "CAMEL_REPLACE", "IS_DOM", "document", "onChangeInputType", "type", "test", "vnode", "parent", "callback", "__k", "textContent", "preactRender", "__c", "Component", "prototype", "isReactComponent", "forEach", "key", "Object", "defineProperty", "configurable", "get", "this", "set", "v", "writable", "value", "oldEventHook", "options", "event", "empty", "isPropagationStopped", "cancelBubble", "isDefaultPrevented", "defaultPrevented", "e", "persist", "nativeEvent", "currentComponent", "classNameDescriptorNonEnumberable", "enumerable", "class", "oldVNodeHook", "vnode", "type", "props", "normalizedProps", "isNonDashedType", "indexOf", "i", "IS_DOM", "lowerCased", "toLowerCase", "onChangeInputType", "ON_ANI", "test", "CAMEL_PROPS", "replace", "CAMEL_REPLACE", "multiple", "Array", "isArray", "toChildArray", "children", "child", "selected", "defaultValue", "className", "$$typeof", "REACT_ELEMENT_TYPE", "oldBeforeRender", "__r", "__c", "oldDiffed", "diffed", "dom", "__e", "debounce", "fn", "calling", "latestArgs", "args", "UIPlugin", "_UIPlugin", "BasePlugin", "#updateUI", "target", "targetPlugin", "Target", "p", "plugin", "callerPluginName", "targetElement", "findDOMElement_default", "uppyRootElement", "state", "nn", "getTextDirection_default", "message", "container", "UIPlugin_default", "package_default", "DefaultStore", "package_default", "#callbacks", "patch", "prevState", "nextState", "#publish", "listener", "args", "lib_default", "getFileNameAndExtension", "fullFileName", "lastDot", "mimeTypes_default", "getFileType", "file", "fileExtension", "getFileNameAndExtension", "mimeTypes_default", "encodeCharacter", "character", "encodeFilename", "name", "suffix", "generateFileID", "file", "instanceId", "id", "hasFileStableId", "getSafeFileId", "fileType", "getFileType", "import_throttle", "import_namespace_emitter", "urlAlphabet", "nanoid", "size", "id", "i", "urlAlphabet", "package_default", "getFileName", "fileType", "fileDescriptor", "locale_default", "import_prettier_bytes", "import_mime_match", "defaultOptions", "RestrictionError", "message", "opts", "Restricter", "getOpts", "getI18n", "existingFiles", "addingFiles", "maxTotalFileSize", "maxNumberOfFiles", "f", "totalFilesSize", "total", "prettierBytes", "file", "maxFileSize", "minFileSize", "allowedFileTypes", "type", "match", "allowedFileTypesString", "addingFile", "files", "minNumberOfFiles", "error", "requiredMetaFields", "missingFields", "field", "supportsUploadProgress", "userAgent", "m", "version", "major", "minor", "defaultUploadState", "Uppy", "_Uppy", "package_default", "#plugins", "#restricter", "#storeUnsubscribe", "#emitter", "ee", "#preProcessors", "#uploaders", "#postProcessors", "opts", "locale_default", "defaultOptions", "file", "files", "lib_default", "justErrorsLogger", "merged", "debugLogger", "supportsUploadProgress", "Restricter", "prevState", "nextState", "patch", "#addListeners", "event", "args", "callback", "state", "plugin", "filesWithNewState", "existingFilesState", "fileID", "newFileState", "onMissingKey", "key", "translator", "Translator", "newOpts", "defaultProgress", "updatedFiles", "capabilities", "currentUploads", "fn", "data", "updatedMeta", "newMeta", "ids", "id", "filesObject", "totalProgress", "error", "inProgressFiles", "newFiles", "startedFiles", "uploadStartedFiles", "pausedFiles", "completeFiles", "erroredFiles", "inProgressNotPausedFiles", "processingFiles", "progress", "#informAndEmit", "errors", "userFacingErrors", "maxNumToShow", "firstErrors", "additionalErrors", "message", "details", "err", "existingFiles", "#checkRequiredMetaFieldsOnFile", "missingFields", "#checkRequiredMetaFields", "success", "#assertNewUploadAllowed", "allowNewUpload", "RestrictionError", "#transformFile", "fileDescriptorOrFile", "fileType", "getFileType", "fileName", "getFileName", "fileExtension", "getFileNameAndExtension", "getSafeFileId", "meta", "size", "#startIfAutoProceed", "#checkAndUpdateFileState", "filesToAdd", "nextFilesState", "validFilesToAdd", "fileToAdd", "newFile", "isGhost", "onBeforeFileAddedResult", "restrictionErrors", "firstValidFileToAdd", "fileDescriptors", "nonRestrictionErrors", "subError", "fileIDs", "updatedUploads", "removedFiles", "fileIsNotRemoved", "uploadFileID", "uploadID", "newFileIDs", "stateUpdate", "#updateTotalProgressThrottled", "removedFileIDs", "isPaused", "updatedFile", "#getFilesToRetry", "fileId", "#doRetryAll", "filesToRetry", "#createUpload", "#runUpload", "result", "#handleUploadProgress", "fileInState", "newProgress", "#updateTotalProgress", "#calculateTotalProgress", "totalProgressPercent", "throttle", "filesInProgress", "isSizedFile", "sizedFilesInProgress", "unsizedFilesInProgress", "totalFilesSize", "acc", "totalUploadedSize", "errorHandler", "response", "errorMsg", "newError", "uploadStalledWarningRecentlyEmitted", "onUploadStarted", "filesFiltered", "exists", "filesState", "uploadResp", "currentProgress", "#updateOnlineStatus", "Plugin", "msg", "pluginId", "existsPluginAlready", "plugins", "foundPlugin", "type", "method", "instance", "list", "index", "item", "updatedState", "info", "duration", "isComplexMessage", "logger", "#requestClientById", "client", "requestClient", "#removeUpload", "forceAllowNewUpload", "nanoid", "#getUpload", "currentUpload", "getCurrentUpload", "steps", "step", "successful", "failed", "retryResult", "onBeforeUploadResult", "currentlyUploadingFiles", "curr", "waitingFileIDs", "Uppy_default", "vnodeId", "isArray", "Array", "createVNode", "type", "props", "key", "isStaticChildren", "__source", "__self", "ref", "i", "normalizedProps", "vnode", "__k", "__", "__b", "__e", "__c", "constructor", "__v", "__i", "__u", "defaultProps", "options", "package_default", "TRANSITION_MS", "FadeIn", "x", "b", "callback", "children", "u", "assign", "obj", "props", "getKey", "vnode", "fallback", "linkRef", "component", "name", "cache", "c", "getChildMapping", "children", "out", "i", "key", "mergeChildMappings", "prev", "next", "getValueForKey", "nextKeysPending", "pendingKeys", "prevKey", "childMapping", "nextKey", "pendingNextKey", "identity", "TransitionGroup", "x", "context", "H", "initialChildMapping", "nextProps", "nextChildMapping", "prevChildMapping", "prevState", "hasPrev", "hasNext", "keysToEnter", "keysToLeave", "idx", "currentChildMapping", "childFactory", "transitionLeave", "transitionName", "transitionAppear", "transitionEnter", "transitionLeaveTimeout", "transitionEnterTimeout", "transitionAppearTimeout", "childrenToRender", "child", "ref", "K", "_", "TransitionGroup_default", "Informer", "UIPlugin_default", "package_default", "uppy", "opts", "state", "u", "TransitionGroup_default", "info", "FadeIn", "target", "GoogleIcon", "u", "DefaultForm", "pluginName", "i18n", "onAuth", "isGoogleDrive", "onSubmit", "q", "e", "defaultRenderForm", "AuthView", "loading", "pluginIcon", "handleAuth", "renderForm", "remoteFileObjToLocal", "file", "getFileNameAndExtension", "import_classnames", "package_default", "STYLE_INNER", "STYLE_CONTENT", "VirtualList", "x", "props", "height", "data", "rowHeight", "renderRow", "overscanCount", "offset", "start", "visibleRowCount", "end", "selection", "styleInner", "styleContent", "u", "VirtualList_default", "import_classnames", "FileIcon", "u", "FolderIcon", "VideoIcon", "ItemIcon", "itemIconString", "alt", "GridItem", "file", "toggleCheckbox", "className", "isDisabled", "restrictionError", "showTitles", "children", "i18n", "u", "ItemIcon", "GridItem_default", "ListItem", "file", "openFolder", "className", "isDisabled", "restrictionError", "toggleCheckbox", "showTitles", "i18n", "u", "ItemIcon", "Item", "props", "viewType", "toggleCheckbox", "showTitles", "i18n", "openFolder", "file", "utmSource", "restrictionError", "isDisabled", "ourProps", "classNames", "u", "GridItem_default", "ListItem", "Browser", "props", "displayedPartialTree", "viewType", "toggleCheckbox", "handleScroll", "showTitles", "i18n", "isLoading", "openFolder", "noResultsLabel", "virtualList", "utmSource", "isShiftKeyPressed", "setIsShiftKeyPressed", "d", "y", "handleKeyUp", "e", "handleKeyDown", "u", "renderItem", "item", "Item", "event", "VirtualList_default", "Browser_default", "import_classnames", "getNumberOfSelectedFiles", "partialTree", "item", "i", "getNumberOfSelectedFiles_default", "FooterActions", "cancelSelection", "donePicking", "i18n", "partialTree", "validateAggregateRestrictions", "aggregateRestrictionError", "T", "nOfSelectedFiles", "getNumberOfSelectedFiles_default", "u", "classNames", "SearchInput", "searchString", "setSearchString", "submitSearchString", "wrapperClassName", "inputClassName", "inputLabel", "clearSearchLabel", "showButton", "buttonLabel", "buttonCSSClassName", "onInput", "e", "submit", "q", "ev", "form", "d", "formEl", "nanoid", "y", "u", "SearchInput_default", "getTagFile", "file", "plugin", "provider", "getTagFile_default", "addFiles", "companionFiles", "plugin", "provider", "tagFiles", "f", "getTagFile_default", "filesToAdd", "filesAlreadyAdded", "tagFile", "getSafeFileId", "addFiles_default", "getClickedRange", "clickedId", "displayedPartialTree", "isShiftKeyPressed", "lastCheckbox", "lastCheckboxIndex", "item", "newCheckboxIndex", "getClickedRange_default", "handleError", "uppy", "error", "handleError_default", "getBreadcrumbs", "partialTree", "currentFolderId", "folder", "f", "breadcrumbs", "currentParentId", "getBreadcrumbs_default", "getPath", "partialTree", "id", "cache", "sId", "file", "f", "meAndParentPath", "getCheckedFilesWithPaths", "item", "absFolders", "firstCheckedFolderIndex", "i", "relFolders", "absDirPath", "relDirPath", "getCheckedFilesWithPaths_default", "import_index", "TimeoutError", "message", "AbortError", "getDOMException", "errorMessage", "getAbortedReason", "signal", "reason", "pTimeout", "promise", "options", "milliseconds", "fallback", "customTimers", "timer", "abortHandler", "cancelablePromise", "resolve", "reject", "timeoutError", "error", "lowerBound", "array", "value", "comparator", "first", "count", "step", "it", "PriorityQueue", "#queue", "run", "options", "element", "index", "lowerBound", "a", "b", "id", "priority", "item", "PQueue", "EventEmitter", "#carryoverConcurrencyCount", "#isIntervalIgnored", "#intervalCount", "#intervalCap", "#interval", "#intervalEnd", "#intervalId", "#timeoutId", "#queue", "#queueClass", "#pending", "#concurrency", "#isPaused", "#throwOnTimeout", "#idAssigner", "options", "PriorityQueue", "#doesIntervalAllowAnother", "#doesConcurrentAllowAnother", "#next", "#tryToStartAnother", "#onResumeInterval", "#onInterval", "#initializeIntervalIfNeeded", "#isIntervalPaused", "now", "delay", "canInitializeInterval", "job", "#processQueue", "newConcurrency", "#throwOnAbort", "signal", "_resolve", "reject", "id", "priority", "function_", "resolve", "operation", "pTimeout", "result", "error", "TimeoutError", "functions", "#onEvent", "limit", "event", "filter", "listener", "shallowClone", "partialTree", "item", "shallowClone_default", "recursivelyFetch", "queue", "poorTree", "poorFolder", "apiList", "validateSingleFile", "items", "currentPath", "response", "newFolders", "i", "newFiles", "folders", "folder", "files", "file", "restrictionError", "afterFill", "partialTree", "reportProgress", "PQueue", "shallowClone_default", "item", "nOfFilesChecked", "afterFill_default", "afterOpenFolder", "oldPartialTree", "discoveredItems", "clickedFolder", "currentPagePath", "validateSingleFile", "discoveredFolders", "i", "discoveredFiles", "isParentFolderChecked", "folders", "folder", "files", "file", "restrictionError", "updatedClickedFolder", "afterOpenFolder_default", "afterScrollFolder", "oldPartialTree", "currentFolderId", "items", "nextPagePath", "validateSingleFile", "currentFolder", "i", "newFolders", "newFiles", "scrolledFolder", "partialTreeWithUpdatedScrolledFolder", "folder", "isParentFolderChecked", "folders", "files", "file", "restrictionError", "afterScrollFolder_default", "percolateDown", "tree", "id", "shouldMarkAsChecked", "item", "percolateUp", "folder", "validChildren", "areAllChildrenChecked", "areAllChildrenUnchecked", "afterToggleCheckbox", "oldTree", "clickedRange", "shallowClone_default", "newlyCheckedItems", "clickedItem", "afterToggleCheckbox_default", "PartialTreeUtils_default", "afterOpenFolder_default", "afterScrollFolder_default", "afterToggleCheckbox_default", "afterFill_default", "shouldHandleScroll", "event", "scrollHeight", "scrollTop", "offsetHeight", "shouldHandleScroll_default", "import_classnames", "Breadcrumbs", "props", "openFolder", "title", "breadcrumbsIcon", "breadcrumbs", "i18n", "u", "folder", "index", "k", "User", "i18n", "logout", "username", "u", "k", "Header", "props", "u", "classNames", "Breadcrumbs", "User", "defaultPickerIcon", "u", "getDefaultState", "rootFolderId", "ProviderView", "package_default", "plugin", "opts", "defaultOptions", "loading", "partialTree", "newPartialTree", "item", "#abortController", "#withAbort", "op", "abortController", "cancelRequest", "folderId", "clickedFolder", "folder", "signal", "currentPagePath", "currentItems", "username", "nextPagePath", "items", "PartialTreeUtils_default", "handleError_default", "res", "message", "authFormData", "event", "currentFolderId", "currentFolder", "i", "shouldHandleScroll_default", "file", "companionFile", "remoteFileObjToLocal", "enrichedTree", "path", "n", "companionFiles", "getCheckedFilesWithPaths_default", "addFiles_default", "ourItem", "isShiftKeyPressed", "clickedRange", "getClickedRange_default", "searchString", "inThisFolder", "getBreadcrumbs_default", "getNumberOfSelectedFiles_default", "uppyFiles", "state", "viewOptions", "didFirstRender", "i18n", "authenticated", "pluginIcon", "AuthView", "breadcrumbs", "classNames", "Header", "SearchInput_default", "s", "Browser_default", "FooterActions", "import_classnames", "defaultState", "defaultOptions", "SearchProviderView", "package_default", "plugin", "opts", "loading", "partialTree", "newPartialTree", "item", "searchString", "response", "error", "handleError_default", "event", "root", "i", "shouldHandleScroll_default", "newRoot", "oldItems", "companionFiles", "getCheckedFilesWithPaths_default", "addFiles_default", "ourItem", "isShiftKeyPressed", "clickedRange", "getClickedRange_default", "PartialTreeUtils_default", "file", "companionFile", "remoteFileObjToLocal", "uppyFiles", "state", "viewOptions", "isInputMode", "i18n", "u", "SearchInput_default", "classNames", "Browser_default", "FooterActions", "emaFilter", "newValue", "previousSmoothedValue", "halfLife", "dt", "package_default", "locale_default", "StatusBarStates_default", "import_classnames", "import_prettier_bytes", "secondsToTime", "rawSeconds", "hours", "minutes", "seconds", "prettyETA", "seconds", "time", "secondsToTime", "hoursStr", "minutesStr", "secondsStr", "import_classnames", "DOT", "renderDot", "UploadBtn", "props", "newFiles", "isUploadStarted", "recoveredState", "i18n", "uploadState", "isSomeGhost", "startUpload", "uploadBtnClassNames", "classNames", "StatusBarStates_default", "uploadBtnText", "u", "RetryBtn", "uppy", "CancelBtn", "PauseResumeButton", "isAllPaused", "isAllComplete", "resumableUploads", "title", "togglePauseResume", "DoneBtn", "doneButtonHandler", "LoadingSpinner", "ProgressBarProcessing", "progress", "value", "mode", "message", "ProgressDetails", "numUploads", "complete", "totalUploadedSize", "totalSize", "totalETA", "ifShowFilesUploadedOfTotal", "totalUploadedSizeStr", "prettierBytes", "prettyETA", "FileUploadCount", "UploadNewlyAddedFiles", "ProgressBarUploading", "supportsUploadProgress", "totalProgress", "showProgressDetails", "showUploadNewlyAddedFiles", "renderProgressDetails", "ProgressBarComplete", "ProgressBarError", "error", "displayErrorAlert", "errorMessage", "calculateProcessingProgress", "files", "values", "mode", "message", "progress", "preprocess", "postprocess", "value", "total", "progressValue", "STATE_ERROR", "STATE_WAITING", "STATE_PREPROCESSING", "STATE_UPLOADING", "STATE_POSTPROCESSING", "STATE_COMPLETE", "StatusBarStates_default", "StatusBarUI", "newFiles", "allowNewUpload", "isUploadInProgress", "isAllPaused", "resumableUploads", "error", "hideUploadButton", "hidePauseResumeButton", "hideCancelButton", "hideRetryButton", "recoveredState", "uploadState", "totalProgress", "files", "supportsUploadProgress", "hideAfterFinish", "isSomeGhost", "doneButtonHandler", "isUploadStarted", "i18n", "startUpload", "uppy", "isAllComplete", "showProgressDetails", "numUploads", "complete", "totalSize", "totalETA", "totalUploadedSize", "getProgressValue", "progress", "calculateProcessingProgress", "getIsIndeterminate", "mode", "progressValue", "width", "showUploadBtn", "showCancelBtn", "showPauseResumeBtn", "showRetryBtn", "showDoneBtn", "progressClassNames", "classNames", "statusBarClassNames", "progressBarStateEl", "u", "ProgressBarProcessing", "ProgressBarComplete", "ProgressBarError", "ProgressBarUploading", "UploadBtn", "RetryBtn", "PauseResumeButton", "CancelBtn", "DoneBtn", "speedFilterHalfLife", "ETAFilterHalfLife", "getUploadingState", "error", "isAllComplete", "recoveredState", "files", "StatusBarStates_default", "state", "fileIDs", "i", "progress", "defaultOptions", "StatusBar", "UIPlugin_default", "package_default", "#lastUpdateTime", "#previousUploadedBytes", "#previousSpeed", "#previousETA", "uppy", "opts", "locale_default", "#computeSmoothETA", "totalBytes", "remaining", "dt", "uploadedBytesSinceLastTick", "currentSpeed", "filteredSpeed", "emaFilter", "instantETA", "updatedPreviousETA", "filteredETA", "capabilities", "allowNewUpload", "totalProgress", "newFiles", "startedFiles", "completeFiles", "isUploadStarted", "isAllPaused", "isUploadInProgress", "isSomeGhost", "newFilesOrRecovered", "resumableUploads", "supportsUploadProgress", "totalSize", "totalUploadedSize", "f", "file", "totalETA", "StatusBarUI", "element", "getTextDirection_default", "#onUploadStart", "pv", "target", "DATA_URL_PATTERN", "dataURItoBlob", "dataURI", "opts", "toFile", "dataURIData", "mimeType", "data", "binary", "bytes", "i", "dataURItoBlob_default", "isObjectURL", "url", "isPreviewSupported", "fileType", "e", "t", "s", "i", "n", "r", "a", "h", "f", "l", "o", "u", "d", "c", "_c", "p", "g", "m", "y", "b", "w", "k", "v", "O", "S", "A", "U", "x", "C", "B", "V", "I", "L", "T", "z", "P", "F", "j", "E", "M", "_", "D", "X", "N", "$", "R", "W", "K", "H", "Y", "G", "J", "q", "Q", "Z", "ee", "te", "se", "ie", "ne", "re", "ae", "he", "le", "ae", "de", "ae", "ce", "e", "t", "H", "s", "pe", "ge", "me", "ye", "be", "c", "we", "a", "r", "i", "ke", "Oe", "b", "A", "n", "package_default", "locale_default", "canvasToBlob", "canvas", "type", "quality", "err", "resolve", "blob", "dataURItoBlob_default", "rotateImage", "image", "translate", "w", "h", "context", "protect", "ratio", "maxSquare", "maxSize", "maxW", "maxH", "defaultOptions", "ThumbnailGenerator", "UIPlugin_default", "package_default", "uppy", "opts", "locale_default", "file", "targetWidth", "targetHeight", "originalUrl", "onload", "reject", "event", "orientationPromise", "ye", "orientation", "dimensions", "rotatedImage", "resizedImage", "img", "width", "height", "deg", "aspect", "steps", "sW", "sH", "x", "fileID", "preview", "current", "isPreviewSupported", "index", "isObjectURL", "fileIDs", "emitPreprocessCompleteForAll", "findAllDOMElements", "element", "elements", "isDOMElement", "findAllDOMElements_default", "toArray_default", "fallbackApi", "dataTransfer", "files", "toArray_default", "getFilesAndDirectoriesFromDirectory", "directoryReader", "oldEntries", "logDropError", "onSuccess", "entries", "newEntries", "error", "getAsFileSystemHandleFromEntry", "entry", "logDropError", "resolve", "reject", "directoryReader", "getFilesAndDirectoriesFromDirectory", "dirEntries", "file", "createPromiseToAddFileOrParseDirectory", "relativePath", "lastResortFile", "getNextRelativePath", "handle", "getFilesFromDataTransfer", "dataTransfer", "fileSystemHandles", "item", "fileSystemHandle", "err", "getDroppedFiles", "dataTransfer", "options", "logDropError", "accumulator", "file", "getFilesFromDataTransfer", "fallbackApi", "package_default", "isDragDropSupported", "div", "import_classnames", "AddFiles", "x", "event", "isFolder", "refCallback", "u", "type", "nativeCameraFacingMode", "accept", "text", "onClickFn", "numberOfAcquirers", "browseFiles", "browseFolders", "lowerFMSelectionType", "camelFMSelectionType", "acquirer", "acquirers", "acquirersWithoutLastTwo", "lastTwoAcquirers", "k", "disableLocalFiles", "showNativePhotoCameraButton", "showNativeVideoCameraButton", "list", "myDeviceKey", "listWithoutLastTwo", "lastTwo", "key", "elements", "i18nArray", "uppyBranding", "linkText", "ref", "AddFiles_default", "import_classnames", "AddFilesPanel", "props", "u", "classNames", "AddFiles_default", "AddFilesPanel_default", "import_classnames", "EditorPanel", "props", "file", "handleCancel", "u", "classNames", "target", "EditorPanel_default", "import_classnames", "iconImage", "u", "iconAudio", "iconVideo", "iconPDF", "iconArchive", "iconFile", "iconText", "getIconByMime", "fileType", "defaultChoice", "fileTypeGeneral", "fileTypeSpecific", "ignoreEvent", "ev", "tagName", "ignoreEvent_default", "FilePreview", "props", "file", "u", "color", "icon", "getIconByMime", "RenderMetaFields", "props", "computedMetaFields", "requiredMetaFields", "updateMeta", "form", "formState", "fieldCSSClasses", "field", "id", "required", "u", "newVal", "_", "ev", "FileCard", "props", "files", "fileCardFor", "toggleFileCard", "saveFileCard", "metaFields", "requiredMetaFields", "openFileEditor", "i18n", "i18nArray", "className", "canEditFile", "getMetaFields", "file", "computedMetaFields", "showEditButton", "storedMetaData", "field", "formState", "setFormState", "d", "handleSave", "q", "ev", "updateMeta", "newVal", "name", "handleCancel", "form", "formEl", "nanoid", "y", "u", "classNames", "ignoreEvent_default", "getIconByMime", "FilePreview", "event", "RenderMetaFields", "import_classnames", "shallowEqualObjects", "objA", "objB", "aKeys", "Object", "keys", "bKeys", "len", "length", "i", "key", "prototype", "hasOwnProperty", "call", "copyToClipboard", "textToCopy", "fallbackString", "resolve", "textArea", "magicCopyFailed", "EditButton", "file", "uploadInProgressOrComplete", "metaFields", "canEditFile", "i18n", "onClick", "u", "RemoveButton", "CopyLinkButton", "uppy", "copyLinkToClipboard", "event", "copyToClipboard", "Buttons", "props", "showLinkToFileUploadResult", "showRemoveButton", "toggleFileCard", "openFileEditor", "import_prettier_bytes", "separator", "truncateString", "string", "maxLength", "charsToShow", "frontChars", "backChars", "metaFieldIdToName", "metaFieldId", "metaFields", "f", "MetaErrorMessage", "props", "file", "toggleFileCard", "i18n", "missingRequiredMetaFields", "metaFieldsString", "missingMetaField", "u", "renderFileName", "props", "author", "name", "getMaxNameLength", "u", "truncateString", "renderAuthor", "providerName", "dot", "k", "renderFileSize", "prettierBytes", "ReSelectButton", "ErrorButton", "file", "onClick", "FileInfo", "i18n", "toggleFileCard", "metaFields", "toggleAddFilesPanel", "isSingleFile", "containerHeight", "containerWidth", "MetaErrorMessage", "FilePreviewAndLink", "props", "file", "i18n", "toggleFileCard", "metaFields", "showLinkToFileUploadResult", "previewBackgroundColor", "getIconByMime", "u", "FilePreview", "MetaErrorMessage", "onPauseResumeCancelRetry", "props", "progressIndicatorTitle", "ProgressIndicatorButton", "u", "ProgressCircleContainer", "children", "ProgressCircle", "progress", "circleLength", "FileProgress", "FileItem", "x", "file", "nextProps", "shallowEqualObjects", "isProcessing", "isUploaded", "uploadInProgressOrComplete", "uploadInProgress", "error", "isGhost", "showRemoveButton", "dashboardItemClass", "classNames", "u", "FilePreviewAndLink", "FileProgress", "FileInfo", "Buttons", "chunks", "list", "size", "chunked", "currentChunk", "item", "FileList", "id", "i18n", "uppy", "files", "resumableUploads", "hideRetryButton", "hidePauseResumeButton", "hideCancelButton", "showLinkToFileUploadResult", "showRemoveButtonAfterComplete", "metaFields", "isSingleFile", "toggleFileCard", "handleRequestThumbnail", "handleCancelThumbnail", "recoveredState", "individualCancellation", "itemsPerRow", "openFileEditor", "canEditFile", "toggleAddFilesPanel", "containerWidth", "containerHeight", "rowHeight", "rows", "T", "sortByGhostComesFirst", "file1", "file2", "fileIds", "renderRow", "row", "u", "fileID", "FileItem", "VirtualList_default", "import_classnames", "PickerPanelContent", "activePickerPanel", "className", "hideAllPanels", "i18n", "state", "uppy", "ref", "A", "u", "classNames", "ignoreEvent_default", "PickerPanelContent_default", "uploadStates", "getUploadingState", "isAllErrored", "isAllComplete", "isAllPaused", "files", "state", "fileIDs", "i", "progress", "UploadStatus", "i18n", "inProgressNotPausedFiles", "newFiles", "processingFiles", "PanelTopBar", "props", "hideCancelButton", "maxNumberOfFiles", "toggleAddFilesPanel", "uppy", "allowNewUpload", "u", "PickerPanelTopBar_default", "import_classnames", "transitionName", "duration", "Slide", "children", "cachedChildren", "setCachedChildren", "d", "className", "setClassName", "enterTimeoutRef", "A", "leaveTimeoutRef", "animationFrameRef", "handleEnterTransition", "handleLeaveTransition", "y", "child", "H", "K", "classNames", "Slide_default", "WIDTH_XL", "WIDTH_LG", "WIDTH_MD", "HEIGHT_MD", "Dashboard", "props", "isNoFiles", "isSingleFile", "isSizeMD", "isSizeHeightMD", "dashboardClassName", "classNames", "itemsPerRow", "showFileList", "numberOfFilesForRecovery", "numberOfGhosts", "fileID", "renderRestoredText", "u", "isDragDropSupported", "PickerPanelTopBar_default", "FileList", "AddFiles_default", "Slide_default", "AddFilesPanel_default", "FileCard", "PickerPanelContent_default", "EditorPanel_default", "target", "locale_default", "FOCUSABLE_ELEMENTS_default", "import_debounce", "getActiveOverlayEl", "dashboardEl", "activeOverlayType", "overlayEl", "createSuperFocus", "lastFocusWasOnSuperFocusableEl", "debounce", "dashboardEl", "activeOverlayType", "overlayEl", "getActiveOverlayEl", "isFocusInOverlay", "superFocusableEl", "FOCUSABLE_ELEMENTS_default", "focusOnFirstNode", "event", "nodes", "node", "focusOnLastNode", "isFocusInOverlay", "activeOverlayEl", "trapFocus", "activeOverlayType", "dashboardEl", "getActiveOverlayEl", "focusableNodes", "toArray_default", "FOCUSABLE_ELEMENTS_default", "focusedItemIndex", "forInline", "event", "activeOverlayType", "dashboardEl", "trapFocus", "TAB_KEY", "ESC_KEY", "createPromise", "o", "resolve", "reject", "defaultOptions", "defaultPickerIcon", "Dashboard", "UIPlugin_default", "package_default", "#disabledNodes", "nanoid", "createSuperFocus", "uppy", "opts", "autoOpen", "locale_default", "plugin", "newTargets", "target", "callerPluginId", "callerPluginName", "callerPluginType", "state", "update", "id", "targets", "activePickerPanel", "file", "#getEditors", "editors", "editor", "metaFields", "promise", "handler", "manualClose", "isHidden", "isClosing", "isDarkModeOn", "capabilities", "event", "isDarkModeOnNow", "show", "fileID", "files", "descriptors", "err", "entries", "uppyDashboardInnerEl", "width", "height", "pluginState", "isModalAndClosed", "disable", "NODES_TO_DISABLE", "nodesToDisable", "toArray_default", "node", "trapFocus", "canSomePluginHandleRootDrop", "somePluginCanHandleRootDrop", "doesEventHaveFiles", "types", "type", "hasFiles", "executedDropErrorOnce", "logDropError", "error", "getDroppedFiles", "forInline", "failed", "#generateLargeThumbnailIfSingleFile", "LARGE_THUMBNAIL", "thumbnailGenerator", "fileForThumbnail", "#openFileEditorWhenFilesAdded", "firstFile", "isMetaEditorEnabled", "isImageEditorEnabled", "showModalTrigger", "findAllDOMElements_default", "trigger", "#addSupportedPluginIfNoTarget", "isFocusInUppy", "isFocusNowhere", "isInformerHidden", "isModal", "meta", "#attachRenderFunctionToTarget", "#isTargetSupported", "#getAcquirers", "#getProgressIndicators", "allowNewUpload", "newFiles", "uploadStartedFiles", "completeFiles", "erroredFiles", "inProgressFiles", "inProgressNotPausedFiles", "processingFiles", "isUploadStarted", "isAllComplete", "isAllPaused", "acquirers", "progressindicators", "theme", "#addSpecifiedPluginsFromOptions", "plugins", "pluginID", "#autoDiscoverPlugins", "typesAllowed", "installedPlugin", "#getStatusBarOpts", "hideUploadButton", "hideRetryButton", "hidePauseResumeButton", "hideCancelButton", "showProgressDetails", "hideProgressAfterFinish", "l", "doneButtonHandler", "#getThumbnailGeneratorOpts", "thumbnailWidth", "thumbnailHeight", "thumbnailType", "waitForThumbnailsBeforeUpload", "#getInformerOpts", "#getStatusBarId", "#getThumbnailGeneratorId", "#getInformerId", "inline", "closeAfterFinish", "allowMultipleUploads", "allowMultipleUploadBatches", "StatusBar", "Informer", "ThumbnailGenerator", "isDarkModeOnFromTheStart", "informer", "statusBar", "thumbnail", "package_default", "import_cropperjs", "getCanvasDataThatFitsPerfectlyIntoContainer", "containerData", "canvasData", "widthRatio", "heightRatio", "scaleFactor", "newWidth", "newHeight", "newLeft", "newTop", "getCanvasDataThatFitsPerfectlyIntoContainer_default", "toRadians", "angle", "getScaleFactorThatRemovesDarkCorners", "w", "h", "granularAngle", "\u03B1", "getScaleFactorThatRemovesDarkCorners_default", "limitCropboxMovementOnMove", "canvas", "cropbox", "prevCropbox", "limitCropboxMovementOnMove_default", "limitCropboxMovementOnResize", "canvas", "cropboxData", "prevCropbox", "limitCropboxMovementOnResize_default", "Editor", "x", "props", "opts", "storeCropperInstance", "Cropper", "event", "canvasData", "cropboxData", "prevCropboxData", "newCropboxData", "limitCropboxMovementOnMove_default", "limitCropboxMovementOnResize_default", "angle90Deg", "newAngle", "containerData", "newCanvasData", "getCanvasDataThatFitsPerfectlyIntoContainer_default", "ev", "newGranularAngle", "image", "scaleFactor", "getScaleFactorThatRemovesDarkCorners_default", "scaleFactorX", "i18n", "angleGranular", "u", "currentImage", "actions", "imageURL", "ref", "locale_default", "defaultCropperOptions", "defaultActions", "defaultOptions", "ImageEditor", "UIPlugin_default", "package_default", "uppy", "opts", "locale_default", "file", "fileTypeSpecific", "saveBlobCallback", "blob", "currentImage", "updatedFile", "croppedCanvas", "cropper", "target", "u", "Editor", "EventManager", "#uppy", "#events", "uppy", "event", "fn", "fileID", "cb", "file", "isPaused", "eventHandler", "args", "createCancelError", "cause", "abortOn", "signal", "abortPromise", "removeAbortListener", "RateLimitedQueue", "#activeRequests", "#queuedHandlers", "#paused", "#pauseTimer", "#downLimit", "#upperLimit", "#rateLimitingTimer", "limit", "#call", "fn", "done", "cancelActive", "err", "#queueNext", "#next", "next", "handler", "#queue", "options", "#dequeue", "index", "other", "queueOptions", "args", "queuedRequest", "outerPromise", "resolve", "reject", "cancelError", "innerPromise", "result", "i", "#resume", "duration", "#increaseLimit", "internalRateLimitedQueue", "NetworkError", "error", "xhr", "NetworkError_default", "isNetworkError", "xhr", "isNetworkError_default", "ProgressTimeout", "#aliveTimer", "#isDone", "#onTimedOut", "#timeout", "timeout", "timeoutHandler", "ProgressTimeout_default", "noop", "fetcher", "url", "options", "body", "headers", "method", "onBeforeRequest", "onUploadProgress", "shouldRetry", "onAfterResponse", "onTimeout", "responseType", "retries", "signal", "timeout", "withCredentials", "delay", "attempt", "timer", "ProgressTimeout_default", "requestWithRetry", "retryCount", "resolve", "reject", "xhr", "onError", "error", "err", "NetworkError_default", "event", "key", "filterNonFailedFiles", "files", "hasError", "file", "filterFilesToEmitUploadStarted", "getAllowedMetaFields", "fields", "meta", "locale_default", "_classPrivateFieldLooseBase", "e", "t", "id", "_classPrivateFieldLooseKey", "packageJson", "buildResponseError", "xhr", "err", "error", "isNetworkError_default", "NetworkError_default", "setTypeInBlob", "file", "defaultOptions", "_getFetcher", "_uploadLocalFile", "_uploadBundle", "_getCompanionClientArgs", "_uploadFiles", "_handleUpload", "XHRUpload", "BasePlugin", "uppy", "_opts", "_uploadFiles2", "_getCompanionClientArgs2", "_uploadBundle2", "_uploadLocalFile2", "fileIDs", "internalRateLimitedQueue", "files", "filesFiltered", "filterNonFailedFiles", "filesToEmit", "filterFilesToEmitUploadStarted", "locale_default", "RateLimitedQueue", "url", "options", "_this$opts$getRespons", "_this$opts2", "_body3", "res", "fetcher", "retryCount", "_this$opts$onBeforeRe", "_this$opts", "timeout", "seconds", "event", "_file$progress$upload", "body", "_body", "_body2", "cause", "uploadURL", "request", "overrides", "headers", "opts", "formData", "meta", "getAllowedMetaFields", "item", "value", "subItem", "formPost", "dataWithUpdatedType", "capabilities", "events", "EventManager", "controller", "uppyFetch", "fetch", "_this$uppy$getState$x", "optsFromState", "abort", "_file$remote", "allowedMetaFields", "name", "getQueue", "removedHandler", "removedFile", "uploadPromise", "dom_element_default", "template", "purify", "html", "santizeHTML", "removeScripts", "cleanAttributes", "scripts", "script", "isPossiblyDangerous", "name", "value", "val", "removePossiblyDangerousAttributes", "elem", "atts", "nodes", "node", "attachment_input_controller_default", "Controller", "#buildTriggers", "#onAttachmentsChanged", "event", "#handleMorph", "#cleanupUppy", "outlet", "element", "Uppy_default", "Dashboard", "ImageEditor", "#configureUploader", "#configureEventHandlers", "XHRUpload", "#onUploadSuccess", "#onModalTriggered", "theme", "#dashboard", "file", "response", "a", "uploadedFileData", "uploadedFileUrl", "#buildPreview", "#buildUploadTrigger", "triggerPrompt", "dom_element_default", "#buildDeleteAllTrigger", "data", "url", "filename", "extension", "multiple", "mimeType", "isRepresentable", "previewElem", "#buildPreviewTemplate", "inputElem", "iconImage", "dom_element_default", "iconAudio", "iconVideo", "iconPDF", "iconArchive", "iconFile", "iconText", "getIconByMime", "fileType", "defaultChoice", "fileTypeGeneral", "fileTypeSpecific", "attachment_preview_controller_default", "Controller", "thumbnail", "dom_element_default", "mime", "getIconByMime", "attachment_preview_container_controller_default", "Controller", "element", "sidebar_controller_default", "Controller", "password_visibility_controller_default", "Controller", "passwordTarget", "remote_modal_controller_default", "Controller", "key_value_store_controller_default", "Controller", "event", "newPair", "index", "newKeyInput", "pair", "keyInput", "valueInput", "element", "input", "addButton", "pairs", "bulk_actions_controller_default", "Controller", "el", "event", "checked", "cb", "total", "idsParam", "id", "allowedActions", "button", "baseUrl", "actionName", "intersection", "i", "actions", "a", "checkbox", "filter_panel_controller_default", "Controller", "input", "controller", "form", "textarea_autogrow_controller_default", "Controller", "element", "maxHeight", "#getMaxHeight", "scrollHeight", "cssMaxHeight", "parsed", "clipboard_controller_default", "Controller", "event", "text", "button", "originalText", "err", "textarea", "register_controllers_default", "application", "password_visibility_controller_default", "sidebar_controller_default", "resource_header_controller_default", "nested_resource_form_fields_controller_default", "form_controller_default", "resource_drop_down_controller_default", "resource_collapse_controller_default", "resource_dismiss_controller_default", "frame_navigator_controller_default", "color_mode_controller_default", "easymde_controller_default", "slim_select_controller_default", "flatpickr_controller_default", "intl_tel_input_controller_default", "select_navigator_default", "resource_tab_list_controller_default", "attachment_input_controller_default", "attachment_preview_controller_default", "attachment_preview_container_controller_default", "remote_modal_controller_default", "key_value_store_controller_default", "bulk_actions_controller_default", "filter_panel_controller_default", "textarea_autogrow_controller_default", "clipboard_controller_default", "url", "application", "Application", "register_controllers_default"]
}
