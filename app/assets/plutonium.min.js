(()=>{var Dg=Object.create;var oh=Object.defineProperty;var Ng=Object.getOwnPropertyDescriptor;var Bg=Object.getOwnPropertyNames;var Ug=Object.getPrototypeOf,zg=Object.prototype.hasOwnProperty;var Te=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var Hg=(i,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Bg(e))!zg.call(i,s)&&s!==t&&oh(i,s,{get:()=>e[s],enumerable:!(r=Ng(e,s))||r.enumerable});return i};var ve=(i,e,t)=>(t=i!=null?Dg(Ug(i)):{},Hg(e||!i||!i.__esModule?oh(t,"default",{value:i,enumerable:!0}):t,i));var Io=Te((e_,Up)=>{function sw(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}Up.exports=sw});var Hp=Te((t_,zp)=>{var nw=typeof global=="object"&&global&&global.Object===Object&&global;zp.exports=nw});var Dc=Te((i_,jp)=>{var ow=Hp(),aw=typeof self=="object"&&self&&self.Object===Object&&self,lw=ow||aw||Function("return this")();jp.exports=lw});var Vp=Te((r_,qp)=>{var cw=Dc(),uw=function(){return cw.Date.now()};qp.exports=uw});var Wp=Te((s_,$p)=>{var hw=/\s/;function dw(i){for(var e=i.length;e--&&hw.test(i.charAt(e)););return e}$p.exports=dw});var Xp=Te((n_,Gp)=>{var pw=Wp(),fw=/^\s+/;function mw(i){return i&&i.slice(0,pw(i)+1).replace(fw,"")}Gp.exports=mw});var Nc=Te((o_,Kp)=>{var gw=Dc(),bw=gw.Symbol;Kp.exports=bw});var Jp=Te((a_,Qp)=>{var Yp=Nc(),Zp=Object.prototype,vw=Zp.hasOwnProperty,yw=Zp.toString,qs=Yp?Yp.toStringTag:void 0;function ww(i){var e=vw.call(i,qs),t=i[qs];try{i[qs]=void 0;var r=!0}catch{}var s=yw.call(i);return r&&(e?i[qs]=t:delete i[qs]),s}Qp.exports=ww});var tf=Te((l_,ef)=>{var Sw=Object.prototype,Ew=Sw.toString;function xw(i){return Ew.call(i)}ef.exports=xw});var of=Te((c_,nf)=>{var rf=Nc(),Tw=Jp(),kw=tf(),Aw="[object Null]",Cw="[object Undefined]",sf=rf?rf.toStringTag:void 0;function _w(i){return i==null?i===void 0?Cw:Aw:sf&&sf in Object(i)?Tw(i):kw(i)}nf.exports=_w});var lf=Te((u_,af)=>{function Fw(i){return i!=null&&typeof i=="object"}af.exports=Fw});var uf=Te((h_,cf)=>{var Pw=of(),Ow=lf(),Mw="[object Symbol]";function Rw(i){return typeof i=="symbol"||Ow(i)&&Pw(i)==Mw}cf.exports=Rw});var ff=Te((d_,pf)=>{var Lw=Xp(),hf=Io(),Iw=uf(),df=NaN,Dw=/^[-+]0x[0-9a-f]+$/i,Nw=/^0b[01]+$/i,Bw=/^0o[0-7]+$/i,Uw=parseInt;function zw(i){if(typeof i=="number")return i;if(Iw(i))return df;if(hf(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=hf(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=Lw(i);var t=Nw.test(i);return t||Bw.test(i)?Uw(i.slice(2),t?2:8):Dw.test(i)?df:+i}pf.exports=zw});var Uc=Te((p_,gf)=>{var Hw=Io(),Bc=Vp(),mf=ff(),jw="Expected a function",qw=Math.max,Vw=Math.min;function $w(i,e,t){var r,s,n,o,a,l,h=0,f=!1,m=!1,y=!0;if(typeof i!="function")throw new TypeError(jw);e=mf(e)||0,Hw(t)&&(f=!!t.leading,m="maxWait"in t,n=m?qw(mf(t.maxWait)||0,e):n,y="trailing"in t?!!t.trailing:y);function b(C){var O=r,N=s;return r=s=void 0,h=C,o=i.apply(N,O),o}function k(C){return h=C,a=setTimeout(M,e),f?b(C):o}function F(C){var O=C-l,N=C-h,z=e-O;return m?Vw(z,n-N):z}function P(C){var O=C-l,N=C-h;return l===void 0||O>=e||O<0||m&&N>=n}function M(){var C=Bc();if(P(C))return A(C);a=setTimeout(M,F(C))}function A(C){return a=void 0,y&&r?b(C):(r=s=void 0,o)}function _(){a!==void 0&&clearTimeout(a),h=0,r=l=s=a=void 0}function S(){return a===void 0?o:A(Bc())}function E(){var C=Bc(),O=P(C);if(r=arguments,s=this,l=C,O){if(a===void 0)return k(l);if(m)return clearTimeout(a),a=setTimeout(M,e),b(l)}return a===void 0&&(a=setTimeout(M,e)),o}return E.cancel=_,E.flush=S,E}gf.exports=$w});var vf=Te((f_,bf)=>{var Ww=Uc(),Gw=Io(),Xw="Expected a function";function Kw(i,e,t){var r=!0,s=!0;if(typeof i!="function")throw new TypeError(Xw);return Gw(t)&&(r="leading"in t?!!t.leading:r,s="trailing"in t?!!t.trailing:s),Ww(i,e,{leading:r,maxWait:e,trailing:s})}bf.exports=Kw});var wf=Te((m_,yf)=>{yf.exports=function(){var e={},t=e._fns={};e.emit=function(o,a,l,h,f,m,y){var b=r(o);b.length&&s(o,b,[a,l,h,f,m,y])},e.on=function(o,a){t[o]||(t[o]=[]),t[o].push(a)},e.once=function(o,a){function l(){a.apply(this,arguments),e.off(o,l)}this.on(o,l)},e.off=function(o,a){var l=[];if(o&&a){var h=this._fns[o],f=0,m=h?h.length:0;for(f;f<m;f++)h[f]!==a&&l.push(h[f])}l.length?this._fns[o]=l:delete this._fns[o]};function r(n){var o=t[n]?t[n]:[],a=n.indexOf(":"),l=a===-1?[n]:[n.substring(0,a),n.substring(a+1)],h=Object.keys(t),f=0,m=h.length;for(f;f<m;f++){var y=h[f];if(y==="*"&&(o=o.concat(t[y])),l.length===2&&l[0]===y){o=o.concat(t[y]);break}}return o}function s(n,o,a){var l=0,h=o.length;for(l;l<h&&o[l];l++)o[l].event=n,o[l].apply(o[l],a)}return e}});var Do=Te((w_,xf)=>{"use strict";xf.exports=function(e){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);let t=e<0,r=Math.abs(e);if(t&&(r=-r),r===0)return"0 B";let s=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],n=Math.min(Math.floor(Math.log(r)/Math.log(1024)),s.length-1),o=Number(r/1024**n),a=s[n];return`${o>=10||o%1===0?Math.round(o):o.toFixed(1)} ${a}`}});var Af=Te((S_,kf)=>{"use strict";function Tf(i,e){this.text=i=i||"",this.hasWild=~i.indexOf("*"),this.separator=e,this.parts=i.split(e)}Tf.prototype.match=function(i){var e=!0,t=this.parts,r,s=t.length,n;if(typeof i=="string"||i instanceof String)if(!this.hasWild&&this.text!=i)e=!1;else{for(n=(i||"").split(this.separator),r=0;e&&r<s;r++)t[r]!=="*"&&(r<n.length?e=t[r]===n[r]:e=!1);e=e&&n}else if(typeof i.splice=="function")for(e=[],r=i.length;r--;)this.match(i[r])&&(e[e.length]=i[r]);else if(typeof i=="object"){e={};for(var o in i)this.match(o)&&(e[o]=i[o])}return e};kf.exports=function(i,e,t){var r=new Tf(i,t||/[\/\.]/);return typeof e<"u"?r.match(e):r}});var _f=Te((E_,Cf)=>{var Qw=Af(),Jw=/[\/\+\.]/;Cf.exports=function(i,e){function t(r){var s=Qw(r,i,Jw);return s&&s.length>=2}return e?t(e.split(";")[0]):t}});var ht=Te((M5,jo)=>{(function(){"use strict";var i={}.hasOwnProperty;function e(){for(var s="",n=0;n<arguments.length;n++){var o=arguments[n];o&&(s=r(s,t(o)))}return s}function t(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return e.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var n="";for(var o in s)i.call(s,o)&&s[o]&&(n=r(n,o));return n}function r(s,n){return n?s?s+" "+n:s+n:s}typeof jo<"u"&&jo.exports?(e.default=e,jo.exports=e):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return e}):window.classNames=e})()});var jf=Te((v2,Gc)=>{"use strict";var A1=Object.prototype.hasOwnProperty,dt="~";function Ks(){}Object.create&&(Ks.prototype=Object.create(null),new Ks().__proto__||(dt=!1));function C1(i,e,t){this.fn=i,this.context=e,this.once=t||!1}function Hf(i,e,t,r,s){if(typeof t!="function")throw new TypeError("The listener must be a function");var n=new C1(t,r||i,s),o=dt?dt+e:e;return i._events[o]?i._events[o].fn?i._events[o]=[i._events[o],n]:i._events[o].push(n):(i._events[o]=n,i._eventsCount++),i}function Yo(i,e){--i._eventsCount===0?i._events=new Ks:delete i._events[e]}function et(){this._events=new Ks,this._eventsCount=0}et.prototype.eventNames=function(){var e=[],t,r;if(this._eventsCount===0)return e;for(r in t=this._events)A1.call(t,r)&&e.push(dt?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};et.prototype.listeners=function(e){var t=dt?dt+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,n=r.length,o=new Array(n);s<n;s++)o[s]=r[s].fn;return o};et.prototype.listenerCount=function(e){var t=dt?dt+e:e,r=this._events[t];return r?r.fn?1:r.length:0};et.prototype.emit=function(e,t,r,s,n,o){var a=dt?dt+e:e;if(!this._events[a])return!1;var l=this._events[a],h=arguments.length,f,m;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,s),!0;case 5:return l.fn.call(l.context,t,r,s,n),!0;case 6:return l.fn.call(l.context,t,r,s,n,o),!0}for(m=1,f=new Array(h-1);m<h;m++)f[m-1]=arguments[m];l.fn.apply(l.context,f)}else{var y=l.length,b;for(m=0;m<y;m++)switch(l[m].once&&this.removeListener(e,l[m].fn,void 0,!0),h){case 1:l[m].fn.call(l[m].context);break;case 2:l[m].fn.call(l[m].context,t);break;case 3:l[m].fn.call(l[m].context,t,r);break;case 4:l[m].fn.call(l[m].context,t,r,s);break;default:if(!f)for(b=1,f=new Array(h-1);b<h;b++)f[b-1]=arguments[b];l[m].fn.apply(l[m].context,f)}}return!0};et.prototype.on=function(e,t,r){return Hf(this,e,t,r,!1)};et.prototype.once=function(e,t,r){return Hf(this,e,t,r,!0)};et.prototype.removeListener=function(e,t,r,s){var n=dt?dt+e:e;if(!this._events[n])return this;if(!t)return Yo(this,n),this;var o=this._events[n];if(o.fn)o.fn===t&&(!s||o.once)&&(!r||o.context===r)&&Yo(this,n);else{for(var a=0,l=[],h=o.length;a<h;a++)(o[a].fn!==t||s&&!o[a].once||r&&o[a].context!==r)&&l.push(o[a]);l.length?this._events[n]=l.length===1?l[0]:l:Yo(this,n)}return this};et.prototype.removeAllListeners=function(e){var t;return e?(t=dt?dt+e:e,this._events[t]&&Yo(this,t)):(this._events=new Ks,this._eventsCount=0),this};et.prototype.off=et.prototype.removeListener;et.prototype.addListener=et.prototype.on;et.prefixed=dt;et.EventEmitter=et;typeof Gc<"u"&&(Gc.exports=et)});var lg=Te(($u,Wu)=>{(function(i,e){typeof $u=="object"&&typeof Wu<"u"?Wu.exports=e():typeof define=="function"&&define.amd?define(e):(i=typeof globalThis<"u"?globalThis:i||self,i.Cropper=e())})($u,function(){"use strict";function i(g,u){var p=Object.keys(g);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(g);u&&(d=d.filter(function(T){return Object.getOwnPropertyDescriptor(g,T).enumerable})),p.push.apply(p,d)}return p}function e(g){for(var u=1;u<arguments.length;u++){var p=arguments[u]!=null?arguments[u]:{};u%2?i(Object(p),!0).forEach(function(d){l(g,d,p[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(p)):i(Object(p)).forEach(function(d){Object.defineProperty(g,d,Object.getOwnPropertyDescriptor(p,d))})}return g}function t(g,u){if(typeof g!="object"||!g)return g;var p=g[Symbol.toPrimitive];if(p!==void 0){var d=p.call(g,u||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(g)}function r(g){var u=t(g,"string");return typeof u=="symbol"?u:u+""}function s(g){"@babel/helpers - typeof";return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},s(g)}function n(g,u){if(!(g instanceof u))throw new TypeError("Cannot call a class as a function")}function o(g,u){for(var p=0;p<u.length;p++){var d=u[p];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(g,r(d.key),d)}}function a(g,u,p){return u&&o(g.prototype,u),p&&o(g,p),Object.defineProperty(g,"prototype",{writable:!1}),g}function l(g,u,p){return u=r(u),u in g?Object.defineProperty(g,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):g[u]=p,g}function h(g){return f(g)||m(g)||y(g)||k()}function f(g){if(Array.isArray(g))return b(g)}function m(g){if(typeof Symbol<"u"&&g[Symbol.iterator]!=null||g["@@iterator"]!=null)return Array.from(g)}function y(g,u){if(g){if(typeof g=="string")return b(g,u);var p=Object.prototype.toString.call(g).slice(8,-1);if(p==="Object"&&g.constructor&&(p=g.constructor.name),p==="Map"||p==="Set")return Array.from(g);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return b(g,u)}}function b(g,u){(u==null||u>g.length)&&(u=g.length);for(var p=0,d=new Array(u);p<u;p++)d[p]=g[p];return d}function k(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var F=typeof window<"u"&&typeof window.document<"u",P=F?window:{},M=F&&P.document.documentElement?"ontouchstart"in P.document.documentElement:!1,A=F?"PointerEvent"in P:!1,_="cropper",S="all",E="crop",C="move",O="zoom",N="e",z="w",V="s",j="n",K="ne",te="nw",ie="se",je="sw",ge="".concat(_,"-crop"),De="".concat(_,"-disabled"),de="".concat(_,"-hidden"),tt="".concat(_,"-hide"),Ct="".concat(_,"-invisible"),re="".concat(_,"-modal"),ft="".concat(_,"-move"),se="".concat(_,"Action"),Xe="".concat(_,"Preview"),Q="crop",it="move",_t="none",be="crop",Zt="cropend",li="cropmove",Qt="cropstart",qi="dblclick",Bt=M?"touchstart":"mousedown",Ci=M?"touchmove":"mousemove",Ut=M?"touchend touchcancel":"mouseup",ci=A?"pointerdown":Bt,ui=A?"pointermove":Ci,zt=A?"pointerup pointercancel":Ut,hi="ready",rt="resize",Jt="wheel",di="zoom",Vi="image/jpeg",pi=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,ei=/^data:/,Ht=/^data:image\/jpeg;base64,/,st=/^img|canvas$/i,fi=200,Jr=100,es={viewMode:0,dragMode:Q,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:fi,minContainerHeight:Jr,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},ts='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',xn=Number.isNaN||P.isNaN;function Y(g){return typeof g=="number"&&!xn(g)}var $i=function(u){return u>0&&u<1/0};function Et(g){return typeof g>"u"}function mt(g){return s(g)==="object"&&g!==null}var is=Object.prototype.hasOwnProperty;function ti(g){if(!mt(g))return!1;try{var u=g.constructor,p=u.prototype;return u&&p&&is.call(p,"isPrototypeOf")}catch{return!1}}function Qe(g){return typeof g=="function"}var wr=Array.prototype.slice;function Wi(g){return Array.from?Array.from(g):wr.call(g)}function Se(g,u){return g&&Qe(u)&&(Array.isArray(g)||Y(g.length)?Wi(g).forEach(function(p,d){u.call(g,p,d,g)}):mt(g)&&Object.keys(g).forEach(function(p){u.call(g,g[p],p,g)})),g}var ne=Object.assign||function(u){for(var p=arguments.length,d=new Array(p>1?p-1:0),T=1;T<p;T++)d[T-1]=arguments[T];return mt(u)&&d.length>0&&d.forEach(function(v){mt(v)&&Object.keys(v).forEach(function(x){u[x]=v[x]})}),u},Oa=/\.\d*(?:0|9){12}\d*$/;function _i(g){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Oa.test(g)?Math.round(g*u)/u:g}var Ce=/^width|height|left|top|marginLeft|marginTop$/;function nt(g,u){var p=g.style;Se(u,function(d,T){Ce.test(T)&&Y(d)&&(d="".concat(d,"px")),p[T]=d})}function Ma(g,u){return g.classList?g.classList.contains(u):g.className.indexOf(u)>-1}function _e(g,u){if(u){if(Y(g.length)){Se(g,function(d){_e(d,u)});return}if(g.classList){g.classList.add(u);return}var p=g.className.trim();p?p.indexOf(u)<0&&(g.className="".concat(p," ").concat(u)):g.className=u}}function gt(g,u){if(u){if(Y(g.length)){Se(g,function(p){gt(p,u)});return}if(g.classList){g.classList.remove(u);return}g.className.indexOf(u)>=0&&(g.className=g.className.replace(u,""))}}function mi(g,u,p){if(u){if(Y(g.length)){Se(g,function(d){mi(d,u,p)});return}p?_e(g,u):gt(g,u)}}var Tn=/([a-z\d])([A-Z])/g;function rs(g){return g.replace(Tn,"$1-$2").toLowerCase()}function bt(g,u){return mt(g[u])?g[u]:g.dataset?g.dataset[u]:g.getAttribute("data-".concat(rs(u)))}function xt(g,u,p){mt(p)?g[u]=p:g.dataset?g.dataset[u]=p:g.setAttribute("data-".concat(rs(u)),p)}function kn(g,u){if(mt(g[u]))try{delete g[u]}catch{g[u]=void 0}else if(g.dataset)try{delete g.dataset[u]}catch{g.dataset[u]=void 0}else g.removeAttribute("data-".concat(rs(u)))}var ss=/\s\s*/,Sr=function(){var g=!1;if(F){var u=!1,p=function(){},d=Object.defineProperty({},"once",{get:function(){return g=!0,u},set:function(v){u=v}});P.addEventListener("test",p,d),P.removeEventListener("test",p,d)}return g}();function vt(g,u,p){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},T=p;u.trim().split(ss).forEach(function(v){if(!Sr){var x=g.listeners;x&&x[v]&&x[v][p]&&(T=x[v][p],delete x[v][p],Object.keys(x[v]).length===0&&delete x[v],Object.keys(x).length===0&&delete g.listeners)}g.removeEventListener(v,T,d)})}function Ee(g,u,p){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},T=p;u.trim().split(ss).forEach(function(v){if(d.once&&!Sr){var x=g.listeners,R=x===void 0?{}:x;T=function(){delete R[v][p],g.removeEventListener(v,T,d);for(var D=arguments.length,L=new Array(D),I=0;I<D;I++)L[I]=arguments[I];p.apply(g,L)},R[v]||(R[v]={}),R[v][p]&&g.removeEventListener(v,R[v][p],d),R[v][p]=T,g.listeners=R}g.addEventListener(v,T,d)})}function gi(g,u,p){var d;return Qe(Event)&&Qe(CustomEvent)?d=new CustomEvent(u,{detail:p,bubbles:!0,cancelable:!0}):(d=document.createEvent("CustomEvent"),d.initCustomEvent(u,!0,!0,p)),g.dispatchEvent(d)}function ns(g){var u=g.getBoundingClientRect();return{left:u.left+(window.pageXOffset-document.documentElement.clientLeft),top:u.top+(window.pageYOffset-document.documentElement.clientTop)}}var Er=P.location,An=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Cn(g){var u=g.match(An);return u!==null&&(u[1]!==Er.protocol||u[2]!==Er.hostname||u[3]!==Er.port)}function W(g){var u="timestamp=".concat(new Date().getTime());return g+(g.indexOf("?")===-1?"?":"&")+u}function w(g){var u=g.rotate,p=g.scaleX,d=g.scaleY,T=g.translateX,v=g.translateY,x=[];Y(T)&&T!==0&&x.push("translateX(".concat(T,"px)")),Y(v)&&v!==0&&x.push("translateY(".concat(v,"px)")),Y(u)&&u!==0&&x.push("rotate(".concat(u,"deg)")),Y(p)&&p!==1&&x.push("scaleX(".concat(p,")")),Y(d)&&d!==1&&x.push("scaleY(".concat(d,")"));var R=x.length?x.join(" "):"none";return{WebkitTransform:R,msTransform:R,transform:R}}function U(g){var u=e({},g),p=0;return Se(g,function(d,T){delete u[T],Se(u,function(v){var x=Math.abs(d.startX-v.startX),R=Math.abs(d.startY-v.startY),H=Math.abs(d.endX-v.endX),D=Math.abs(d.endY-v.endY),L=Math.sqrt(x*x+R*R),I=Math.sqrt(H*H+D*D),B=(I-L)/L;Math.abs(B)>Math.abs(p)&&(p=B)})}),p}function $(g,u){var p=g.pageX,d=g.pageY,T={endX:p,endY:d};return u?T:e({startX:p,startY:d},T)}function he(g){var u=0,p=0,d=0;return Se(g,function(T){var v=T.startX,x=T.startY;u+=v,p+=x,d+=1}),u/=d,p/=d,{pageX:u,pageY:p}}function pe(g){var u=g.aspectRatio,p=g.height,d=g.width,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",v=$i(d),x=$i(p);if(v&&x){var R=p*u;T==="contain"&&R>d||T==="cover"&&R<d?p=d/u:d=p*u}else v?p=d/u:x&&(d=p*u);return{width:d,height:p}}function xe(g){var u=g.width,p=g.height,d=g.degree;if(d=Math.abs(d)%180,d===90)return{width:p,height:u};var T=d%90*Math.PI/180,v=Math.sin(T),x=Math.cos(T),R=u*x+p*v,H=u*v+p*x;return d>90?{width:H,height:R}:{width:R,height:H}}function Je(g,u,p,d){var T=u.aspectRatio,v=u.naturalWidth,x=u.naturalHeight,R=u.rotate,H=R===void 0?0:R,D=u.scaleX,L=D===void 0?1:D,I=u.scaleY,B=I===void 0?1:I,ee=p.aspectRatio,J=p.naturalWidth,fe=p.naturalHeight,oe=d.fillColor,Be=oe===void 0?"transparent":oe,qe=d.imageSmoothingEnabled,Oe=qe===void 0?!0:qe,bi=d.imageSmoothingQuality,Tt=bi===void 0?"low":bi,q=d.maxWidth,ae=q===void 0?1/0:q,Ue=d.maxHeight,Pt=Ue===void 0?1/0:Ue,vi=d.minWidth,Gi=vi===void 0?0:vi,Xi=d.minHeight,Pi=Xi===void 0?0:Xi,ii=document.createElement("canvas"),yt=ii.getContext("2d"),Ki=pe({aspectRatio:ee,width:ae,height:Pt}),Pn=pe({aspectRatio:ee,width:Gi,height:Pi},"cover"),Ra=Math.min(Ki.width,Math.max(Pn.width,J)),La=Math.min(Ki.height,Math.max(Pn.height,fe)),ih=pe({aspectRatio:T,width:ae,height:Pt}),rh=pe({aspectRatio:T,width:Gi,height:Pi},"cover"),sh=Math.min(ih.width,Math.max(rh.width,v)),nh=Math.min(ih.height,Math.max(rh.height,x)),Lg=[-sh/2,-nh/2,sh,nh];return ii.width=_i(Ra),ii.height=_i(La),yt.fillStyle=Be,yt.fillRect(0,0,Ra,La),yt.save(),yt.translate(Ra/2,La/2),yt.rotate(H*Math.PI/180),yt.scale(L,B),yt.imageSmoothingEnabled=Oe,yt.imageSmoothingQuality=Tt,yt.drawImage.apply(yt,[g].concat(h(Lg.map(function(Ig){return Math.floor(_i(Ig))})))),yt.restore(),ii}var Ft=String.fromCharCode;function Fi(g,u,p){var d="";p+=u;for(var T=u;T<p;T+=1)d+=Ft(g.getUint8(T));return d}var os=/^data:.*,/;function Ne(g){var u=g.replace(os,""),p=atob(u),d=new ArrayBuffer(p.length),T=new Uint8Array(d);return Se(T,function(v,x){T[x]=p.charCodeAt(x)}),d}function _n(g,u){for(var p=[],d=8192,T=new Uint8Array(g);T.length>0;)p.push(Ft.apply(null,Wi(T.subarray(0,d)))),T=T.subarray(d);return"data:".concat(u,";base64,").concat(btoa(p.join("")))}function Fn(g){var u=new DataView(g),p;try{var d,T,v;if(u.getUint8(0)===255&&u.getUint8(1)===216)for(var x=u.byteLength,R=2;R+1<x;){if(u.getUint8(R)===255&&u.getUint8(R+1)===225){T=R;break}R+=1}if(T){var H=T+4,D=T+10;if(Fi(u,H,4)==="Exif"){var L=u.getUint16(D);if(d=L===18761,(d||L===19789)&&u.getUint16(D+2,d)===42){var I=u.getUint32(D+4,d);I>=8&&(v=D+I)}}}if(v){var B=u.getUint16(v,d),ee,J;for(J=0;J<B;J+=1)if(ee=v+J*12+2,u.getUint16(ee,d)===274){ee+=8,p=u.getUint16(ee,d),u.setUint16(ee,1,d);break}}}catch{p=1}return p}function Ag(g){var u=0,p=1,d=1;switch(g){case 2:p=-1;break;case 3:u=-180;break;case 4:d=-1;break;case 5:u=90,d=-1;break;case 6:u=90;break;case 7:u=90,p=-1;break;case 8:u=-90;break}return{rotate:u,scaleX:p,scaleY:d}}var Cg={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var u=this.element,p=this.options,d=this.container,T=this.cropper,v=Number(p.minContainerWidth),x=Number(p.minContainerHeight);_e(T,de),gt(u,de);var R={width:Math.max(d.offsetWidth,v>=0?v:fi),height:Math.max(d.offsetHeight,x>=0?x:Jr)};this.containerData=R,nt(T,{width:R.width,height:R.height}),_e(u,de),gt(T,de)},initCanvas:function(){var u=this.containerData,p=this.imageData,d=this.options.viewMode,T=Math.abs(p.rotate)%180===90,v=T?p.naturalHeight:p.naturalWidth,x=T?p.naturalWidth:p.naturalHeight,R=v/x,H=u.width,D=u.height;u.height*R>u.width?d===3?H=u.height*R:D=u.width/R:d===3?D=u.width/R:H=u.height*R;var L={aspectRatio:R,naturalWidth:v,naturalHeight:x,width:H,height:D};this.canvasData=L,this.limited=d===1||d===2,this.limitCanvas(!0,!0),L.width=Math.min(Math.max(L.width,L.minWidth),L.maxWidth),L.height=Math.min(Math.max(L.height,L.minHeight),L.maxHeight),L.left=(u.width-L.width)/2,L.top=(u.height-L.height)/2,L.oldLeft=L.left,L.oldTop=L.top,this.initialCanvasData=ne({},L)},limitCanvas:function(u,p){var d=this.options,T=this.containerData,v=this.canvasData,x=this.cropBoxData,R=d.viewMode,H=v.aspectRatio,D=this.cropped&&x;if(u){var L=Number(d.minCanvasWidth)||0,I=Number(d.minCanvasHeight)||0;R>1?(L=Math.max(L,T.width),I=Math.max(I,T.height),R===3&&(I*H>L?L=I*H:I=L/H)):R>0&&(L?L=Math.max(L,D?x.width:0):I?I=Math.max(I,D?x.height:0):D&&(L=x.width,I=x.height,I*H>L?L=I*H:I=L/H));var B=pe({aspectRatio:H,width:L,height:I});L=B.width,I=B.height,v.minWidth=L,v.minHeight=I,v.maxWidth=1/0,v.maxHeight=1/0}if(p)if(R>(D?0:1)){var ee=T.width-v.width,J=T.height-v.height;v.minLeft=Math.min(0,ee),v.minTop=Math.min(0,J),v.maxLeft=Math.max(0,ee),v.maxTop=Math.max(0,J),D&&this.limited&&(v.minLeft=Math.min(x.left,x.left+(x.width-v.width)),v.minTop=Math.min(x.top,x.top+(x.height-v.height)),v.maxLeft=x.left,v.maxTop=x.top,R===2&&(v.width>=T.width&&(v.minLeft=Math.min(0,ee),v.maxLeft=Math.max(0,ee)),v.height>=T.height&&(v.minTop=Math.min(0,J),v.maxTop=Math.max(0,J))))}else v.minLeft=-v.width,v.minTop=-v.height,v.maxLeft=T.width,v.maxTop=T.height},renderCanvas:function(u,p){var d=this.canvasData,T=this.imageData;if(p){var v=xe({width:T.naturalWidth*Math.abs(T.scaleX||1),height:T.naturalHeight*Math.abs(T.scaleY||1),degree:T.rotate||0}),x=v.width,R=v.height,H=d.width*(x/d.naturalWidth),D=d.height*(R/d.naturalHeight);d.left-=(H-d.width)/2,d.top-=(D-d.height)/2,d.width=H,d.height=D,d.aspectRatio=x/R,d.naturalWidth=x,d.naturalHeight=R,this.limitCanvas(!0,!1)}(d.width>d.maxWidth||d.width<d.minWidth)&&(d.left=d.oldLeft),(d.height>d.maxHeight||d.height<d.minHeight)&&(d.top=d.oldTop),d.width=Math.min(Math.max(d.width,d.minWidth),d.maxWidth),d.height=Math.min(Math.max(d.height,d.minHeight),d.maxHeight),this.limitCanvas(!1,!0),d.left=Math.min(Math.max(d.left,d.minLeft),d.maxLeft),d.top=Math.min(Math.max(d.top,d.minTop),d.maxTop),d.oldLeft=d.left,d.oldTop=d.top,nt(this.canvas,ne({width:d.width,height:d.height},w({translateX:d.left,translateY:d.top}))),this.renderImage(u),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(u){var p=this.canvasData,d=this.imageData,T=d.naturalWidth*(p.width/p.naturalWidth),v=d.naturalHeight*(p.height/p.naturalHeight);ne(d,{width:T,height:v,left:(p.width-T)/2,top:(p.height-v)/2}),nt(this.image,ne({width:d.width,height:d.height},w(ne({translateX:d.left,translateY:d.top},d)))),u&&this.output()},initCropBox:function(){var u=this.options,p=this.canvasData,d=u.aspectRatio||u.initialAspectRatio,T=Number(u.autoCropArea)||.8,v={width:p.width,height:p.height};d&&(p.height*d>p.width?v.height=v.width/d:v.width=v.height*d),this.cropBoxData=v,this.limitCropBox(!0,!0),v.width=Math.min(Math.max(v.width,v.minWidth),v.maxWidth),v.height=Math.min(Math.max(v.height,v.minHeight),v.maxHeight),v.width=Math.max(v.minWidth,v.width*T),v.height=Math.max(v.minHeight,v.height*T),v.left=p.left+(p.width-v.width)/2,v.top=p.top+(p.height-v.height)/2,v.oldLeft=v.left,v.oldTop=v.top,this.initialCropBoxData=ne({},v)},limitCropBox:function(u,p){var d=this.options,T=this.containerData,v=this.canvasData,x=this.cropBoxData,R=this.limited,H=d.aspectRatio;if(u){var D=Number(d.minCropBoxWidth)||0,L=Number(d.minCropBoxHeight)||0,I=R?Math.min(T.width,v.width,v.width+v.left,T.width-v.left):T.width,B=R?Math.min(T.height,v.height,v.height+v.top,T.height-v.top):T.height;D=Math.min(D,T.width),L=Math.min(L,T.height),H&&(D&&L?L*H>D?L=D/H:D=L*H:D?L=D/H:L&&(D=L*H),B*H>I?B=I/H:I=B*H),x.minWidth=Math.min(D,I),x.minHeight=Math.min(L,B),x.maxWidth=I,x.maxHeight=B}p&&(R?(x.minLeft=Math.max(0,v.left),x.minTop=Math.max(0,v.top),x.maxLeft=Math.min(T.width,v.left+v.width)-x.width,x.maxTop=Math.min(T.height,v.top+v.height)-x.height):(x.minLeft=0,x.minTop=0,x.maxLeft=T.width-x.width,x.maxTop=T.height-x.height))},renderCropBox:function(){var u=this.options,p=this.containerData,d=this.cropBoxData;(d.width>d.maxWidth||d.width<d.minWidth)&&(d.left=d.oldLeft),(d.height>d.maxHeight||d.height<d.minHeight)&&(d.top=d.oldTop),d.width=Math.min(Math.max(d.width,d.minWidth),d.maxWidth),d.height=Math.min(Math.max(d.height,d.minHeight),d.maxHeight),this.limitCropBox(!1,!0),d.left=Math.min(Math.max(d.left,d.minLeft),d.maxLeft),d.top=Math.min(Math.max(d.top,d.minTop),d.maxTop),d.oldLeft=d.left,d.oldTop=d.top,u.movable&&u.cropBoxMovable&&xt(this.face,se,d.width>=p.width&&d.height>=p.height?C:S),nt(this.cropBox,ne({width:d.width,height:d.height},w({translateX:d.left,translateY:d.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),gi(this.element,be,this.getData())}},_g={initPreview:function(){var u=this.element,p=this.crossOrigin,d=this.options.preview,T=p?this.crossOriginUrl:this.url,v=u.alt||"The image to preview",x=document.createElement("img");if(p&&(x.crossOrigin=p),x.src=T,x.alt=v,this.viewBox.appendChild(x),this.viewBoxImage=x,!!d){var R=d;typeof d=="string"?R=u.ownerDocument.querySelectorAll(d):d.querySelector&&(R=[d]),this.previews=R,Se(R,function(H){var D=document.createElement("img");xt(H,Xe,{width:H.offsetWidth,height:H.offsetHeight,html:H.innerHTML}),p&&(D.crossOrigin=p),D.src=T,D.alt=v,D.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',H.innerHTML="",H.appendChild(D)})}},resetPreview:function(){Se(this.previews,function(u){var p=bt(u,Xe);nt(u,{width:p.width,height:p.height}),u.innerHTML=p.html,kn(u,Xe)})},preview:function(){var u=this.imageData,p=this.canvasData,d=this.cropBoxData,T=d.width,v=d.height,x=u.width,R=u.height,H=d.left-p.left-u.left,D=d.top-p.top-u.top;!this.cropped||this.disabled||(nt(this.viewBoxImage,ne({width:x,height:R},w(ne({translateX:-H,translateY:-D},u)))),Se(this.previews,function(L){var I=bt(L,Xe),B=I.width,ee=I.height,J=B,fe=ee,oe=1;T&&(oe=B/T,fe=v*oe),v&&fe>ee&&(oe=ee/v,J=T*oe,fe=ee),nt(L,{width:J,height:fe}),nt(L.getElementsByTagName("img")[0],ne({width:x*oe,height:R*oe},w(ne({translateX:-H*oe,translateY:-D*oe},u))))}))}},Fg={bind:function(){var u=this.element,p=this.options,d=this.cropper;Qe(p.cropstart)&&Ee(u,Qt,p.cropstart),Qe(p.cropmove)&&Ee(u,li,p.cropmove),Qe(p.cropend)&&Ee(u,Zt,p.cropend),Qe(p.crop)&&Ee(u,be,p.crop),Qe(p.zoom)&&Ee(u,di,p.zoom),Ee(d,ci,this.onCropStart=this.cropStart.bind(this)),p.zoomable&&p.zoomOnWheel&&Ee(d,Jt,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),p.toggleDragModeOnDblclick&&Ee(d,qi,this.onDblclick=this.dblclick.bind(this)),Ee(u.ownerDocument,ui,this.onCropMove=this.cropMove.bind(this)),Ee(u.ownerDocument,zt,this.onCropEnd=this.cropEnd.bind(this)),p.responsive&&Ee(window,rt,this.onResize=this.resize.bind(this))},unbind:function(){var u=this.element,p=this.options,d=this.cropper;Qe(p.cropstart)&&vt(u,Qt,p.cropstart),Qe(p.cropmove)&&vt(u,li,p.cropmove),Qe(p.cropend)&&vt(u,Zt,p.cropend),Qe(p.crop)&&vt(u,be,p.crop),Qe(p.zoom)&&vt(u,di,p.zoom),vt(d,ci,this.onCropStart),p.zoomable&&p.zoomOnWheel&&vt(d,Jt,this.onWheel,{passive:!1,capture:!0}),p.toggleDragModeOnDblclick&&vt(d,qi,this.onDblclick),vt(u.ownerDocument,ui,this.onCropMove),vt(u.ownerDocument,zt,this.onCropEnd),p.responsive&&vt(window,rt,this.onResize)}},Pg={resize:function(){if(!this.disabled){var u=this.options,p=this.container,d=this.containerData,T=p.offsetWidth/d.width,v=p.offsetHeight/d.height,x=Math.abs(T-1)>Math.abs(v-1)?T:v;if(x!==1){var R,H;u.restore&&(R=this.getCanvasData(),H=this.getCropBoxData()),this.render(),u.restore&&(this.setCanvasData(Se(R,function(D,L){R[L]=D*x})),this.setCropBoxData(Se(H,function(D,L){H[L]=D*x})))}}},dblclick:function(){this.disabled||this.options.dragMode===_t||this.setDragMode(Ma(this.dragBox,ge)?it:Q)},wheel:function(u){var p=this,d=Number(this.options.wheelZoomRatio)||.1,T=1;this.disabled||(u.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){p.wheeling=!1},50),u.deltaY?T=u.deltaY>0?1:-1:u.wheelDelta?T=-u.wheelDelta/120:u.detail&&(T=u.detail>0?1:-1),this.zoom(-T*d,u)))},cropStart:function(u){var p=u.buttons,d=u.button;if(!(this.disabled||(u.type==="mousedown"||u.type==="pointerdown"&&u.pointerType==="mouse")&&(Y(p)&&p!==1||Y(d)&&d!==0||u.ctrlKey))){var T=this.options,v=this.pointers,x;u.changedTouches?Se(u.changedTouches,function(R){v[R.identifier]=$(R)}):v[u.pointerId||0]=$(u),Object.keys(v).length>1&&T.zoomable&&T.zoomOnTouch?x=O:x=bt(u.target,se),pi.test(x)&&gi(this.element,Qt,{originalEvent:u,action:x})!==!1&&(u.preventDefault(),this.action=x,this.cropping=!1,x===E&&(this.cropping=!0,_e(this.dragBox,re)))}},cropMove:function(u){var p=this.action;if(!(this.disabled||!p)){var d=this.pointers;u.preventDefault(),gi(this.element,li,{originalEvent:u,action:p})!==!1&&(u.changedTouches?Se(u.changedTouches,function(T){ne(d[T.identifier]||{},$(T,!0))}):ne(d[u.pointerId||0]||{},$(u,!0)),this.change(u))}},cropEnd:function(u){if(!this.disabled){var p=this.action,d=this.pointers;u.changedTouches?Se(u.changedTouches,function(T){delete d[T.identifier]}):delete d[u.pointerId||0],p&&(u.preventDefault(),Object.keys(d).length||(this.action=""),this.cropping&&(this.cropping=!1,mi(this.dragBox,re,this.cropped&&this.options.modal)),gi(this.element,Zt,{originalEvent:u,action:p}))}}},Og={change:function(u){var p=this.options,d=this.canvasData,T=this.containerData,v=this.cropBoxData,x=this.pointers,R=this.action,H=p.aspectRatio,D=v.left,L=v.top,I=v.width,B=v.height,ee=D+I,J=L+B,fe=0,oe=0,Be=T.width,qe=T.height,Oe=!0,bi;!H&&u.shiftKey&&(H=I&&B?I/B:1),this.limited&&(fe=v.minLeft,oe=v.minTop,Be=fe+Math.min(T.width,d.width,d.left+d.width),qe=oe+Math.min(T.height,d.height,d.top+d.height));var Tt=x[Object.keys(x)[0]],q={x:Tt.endX-Tt.startX,y:Tt.endY-Tt.startY},ae=function(Pt){switch(Pt){case N:ee+q.x>Be&&(q.x=Be-ee);break;case z:D+q.x<fe&&(q.x=fe-D);break;case j:L+q.y<oe&&(q.y=oe-L);break;case V:J+q.y>qe&&(q.y=qe-J);break}};switch(R){case S:D+=q.x,L+=q.y;break;case N:if(q.x>=0&&(ee>=Be||H&&(L<=oe||J>=qe))){Oe=!1;break}ae(N),I+=q.x,I<0&&(R=z,I=-I,D-=I),H&&(B=I/H,L+=(v.height-B)/2);break;case j:if(q.y<=0&&(L<=oe||H&&(D<=fe||ee>=Be))){Oe=!1;break}ae(j),B-=q.y,L+=q.y,B<0&&(R=V,B=-B,L-=B),H&&(I=B*H,D+=(v.width-I)/2);break;case z:if(q.x<=0&&(D<=fe||H&&(L<=oe||J>=qe))){Oe=!1;break}ae(z),I-=q.x,D+=q.x,I<0&&(R=N,I=-I,D-=I),H&&(B=I/H,L+=(v.height-B)/2);break;case V:if(q.y>=0&&(J>=qe||H&&(D<=fe||ee>=Be))){Oe=!1;break}ae(V),B+=q.y,B<0&&(R=j,B=-B,L-=B),H&&(I=B*H,D+=(v.width-I)/2);break;case K:if(H){if(q.y<=0&&(L<=oe||ee>=Be)){Oe=!1;break}ae(j),B-=q.y,L+=q.y,I=B*H}else ae(j),ae(N),q.x>=0?ee<Be?I+=q.x:q.y<=0&&L<=oe&&(Oe=!1):I+=q.x,q.y<=0?L>oe&&(B-=q.y,L+=q.y):(B-=q.y,L+=q.y);I<0&&B<0?(R=je,B=-B,I=-I,L-=B,D-=I):I<0?(R=te,I=-I,D-=I):B<0&&(R=ie,B=-B,L-=B);break;case te:if(H){if(q.y<=0&&(L<=oe||D<=fe)){Oe=!1;break}ae(j),B-=q.y,L+=q.y,I=B*H,D+=v.width-I}else ae(j),ae(z),q.x<=0?D>fe?(I-=q.x,D+=q.x):q.y<=0&&L<=oe&&(Oe=!1):(I-=q.x,D+=q.x),q.y<=0?L>oe&&(B-=q.y,L+=q.y):(B-=q.y,L+=q.y);I<0&&B<0?(R=ie,B=-B,I=-I,L-=B,D-=I):I<0?(R=K,I=-I,D-=I):B<0&&(R=je,B=-B,L-=B);break;case je:if(H){if(q.x<=0&&(D<=fe||J>=qe)){Oe=!1;break}ae(z),I-=q.x,D+=q.x,B=I/H}else ae(V),ae(z),q.x<=0?D>fe?(I-=q.x,D+=q.x):q.y>=0&&J>=qe&&(Oe=!1):(I-=q.x,D+=q.x),q.y>=0?J<qe&&(B+=q.y):B+=q.y;I<0&&B<0?(R=K,B=-B,I=-I,L-=B,D-=I):I<0?(R=ie,I=-I,D-=I):B<0&&(R=te,B=-B,L-=B);break;case ie:if(H){if(q.x>=0&&(ee>=Be||J>=qe)){Oe=!1;break}ae(N),I+=q.x,B=I/H}else ae(V),ae(N),q.x>=0?ee<Be?I+=q.x:q.y>=0&&J>=qe&&(Oe=!1):I+=q.x,q.y>=0?J<qe&&(B+=q.y):B+=q.y;I<0&&B<0?(R=te,B=-B,I=-I,L-=B,D-=I):I<0?(R=je,I=-I,D-=I):B<0&&(R=K,B=-B,L-=B);break;case C:this.move(q.x,q.y),Oe=!1;break;case O:this.zoom(U(x),u),Oe=!1;break;case E:if(!q.x||!q.y){Oe=!1;break}bi=ns(this.cropper),D=Tt.startX-bi.left,L=Tt.startY-bi.top,I=v.minWidth,B=v.minHeight,q.x>0?R=q.y>0?ie:K:q.x<0&&(D-=I,R=q.y>0?je:te),q.y<0&&(L-=B),this.cropped||(gt(this.cropBox,de),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}Oe&&(v.width=I,v.height=B,v.left=D,v.top=L,this.action=R,this.renderCropBox()),Se(x,function(Ue){Ue.startX=Ue.endX,Ue.startY=Ue.endY})}},Mg={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&_e(this.dragBox,re),gt(this.cropBox,de),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=ne({},this.initialImageData),this.canvasData=ne({},this.initialCanvasData),this.cropBoxData=ne({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(ne(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),gt(this.dragBox,re),_e(this.cropBox,de)),this},replace:function(u){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&u&&(this.isImg&&(this.element.src=u),p?(this.url=u,this.image.src=u,this.ready&&(this.viewBoxImage.src=u,Se(this.previews,function(d){d.getElementsByTagName("img")[0].src=u}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(u))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,gt(this.cropper,De)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,_e(this.cropper,De)),this},destroy:function(){var u=this.element;return u[_]?(u[_]=void 0,this.isImg&&this.replaced&&(u.src=this.originalUrl),this.uncreate(),this):this},move:function(u){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u,d=this.canvasData,T=d.left,v=d.top;return this.moveTo(Et(u)?u:T+Number(u),Et(p)?p:v+Number(p))},moveTo:function(u){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u,d=this.canvasData,T=!1;return u=Number(u),p=Number(p),this.ready&&!this.disabled&&this.options.movable&&(Y(u)&&(d.left=u,T=!0),Y(p)&&(d.top=p,T=!0),T&&this.renderCanvas(!0)),this},zoom:function(u,p){var d=this.canvasData;return u=Number(u),u<0?u=1/(1-u):u=1+u,this.zoomTo(d.width*u/d.naturalWidth,null,p)},zoomTo:function(u,p,d){var T=this.options,v=this.canvasData,x=v.width,R=v.height,H=v.naturalWidth,D=v.naturalHeight;if(u=Number(u),u>=0&&this.ready&&!this.disabled&&T.zoomable){var L=H*u,I=D*u;if(gi(this.element,di,{ratio:u,oldRatio:x/H,originalEvent:d})===!1)return this;if(d){var B=this.pointers,ee=ns(this.cropper),J=B&&Object.keys(B).length?he(B):{pageX:d.pageX,pageY:d.pageY};v.left-=(L-x)*((J.pageX-ee.left-v.left)/x),v.top-=(I-R)*((J.pageY-ee.top-v.top)/R)}else ti(p)&&Y(p.x)&&Y(p.y)?(v.left-=(L-x)*((p.x-v.left)/x),v.top-=(I-R)*((p.y-v.top)/R)):(v.left-=(L-x)/2,v.top-=(I-R)/2);v.width=L,v.height=I,this.renderCanvas(!0)}return this},rotate:function(u){return this.rotateTo((this.imageData.rotate||0)+Number(u))},rotateTo:function(u){return u=Number(u),Y(u)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=u%360,this.renderCanvas(!0,!0)),this},scaleX:function(u){var p=this.imageData.scaleY;return this.scale(u,Y(p)?p:1)},scaleY:function(u){var p=this.imageData.scaleX;return this.scale(Y(p)?p:1,u)},scale:function(u){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:u,d=this.imageData,T=!1;return u=Number(u),p=Number(p),this.ready&&!this.disabled&&this.options.scalable&&(Y(u)&&(d.scaleX=u,T=!0),Y(p)&&(d.scaleY=p,T=!0),T&&this.renderCanvas(!0,!0)),this},getData:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,p=this.options,d=this.imageData,T=this.canvasData,v=this.cropBoxData,x;if(this.ready&&this.cropped){x={x:v.left-T.left,y:v.top-T.top,width:v.width,height:v.height};var R=d.width/d.naturalWidth;if(Se(x,function(L,I){x[I]=L/R}),u){var H=Math.round(x.y+x.height),D=Math.round(x.x+x.width);x.x=Math.round(x.x),x.y=Math.round(x.y),x.width=D-x.x,x.height=H-x.y}}else x={x:0,y:0,width:0,height:0};return p.rotatable&&(x.rotate=d.rotate||0),p.scalable&&(x.scaleX=d.scaleX||1,x.scaleY=d.scaleY||1),x},setData:function(u){var p=this.options,d=this.imageData,T=this.canvasData,v={};if(this.ready&&!this.disabled&&ti(u)){var x=!1;p.rotatable&&Y(u.rotate)&&u.rotate!==d.rotate&&(d.rotate=u.rotate,x=!0),p.scalable&&(Y(u.scaleX)&&u.scaleX!==d.scaleX&&(d.scaleX=u.scaleX,x=!0),Y(u.scaleY)&&u.scaleY!==d.scaleY&&(d.scaleY=u.scaleY,x=!0)),x&&this.renderCanvas(!0,!0);var R=d.width/d.naturalWidth;Y(u.x)&&(v.left=u.x*R+T.left),Y(u.y)&&(v.top=u.y*R+T.top),Y(u.width)&&(v.width=u.width*R),Y(u.height)&&(v.height=u.height*R),this.setCropBoxData(v)}return this},getContainerData:function(){return this.ready?ne({},this.containerData):{}},getImageData:function(){return this.sized?ne({},this.imageData):{}},getCanvasData:function(){var u=this.canvasData,p={};return this.ready&&Se(["left","top","width","height","naturalWidth","naturalHeight"],function(d){p[d]=u[d]}),p},setCanvasData:function(u){var p=this.canvasData,d=p.aspectRatio;return this.ready&&!this.disabled&&ti(u)&&(Y(u.left)&&(p.left=u.left),Y(u.top)&&(p.top=u.top),Y(u.width)?(p.width=u.width,p.height=u.width/d):Y(u.height)&&(p.height=u.height,p.width=u.height*d),this.renderCanvas(!0)),this},getCropBoxData:function(){var u=this.cropBoxData,p;return this.ready&&this.cropped&&(p={left:u.left,top:u.top,width:u.width,height:u.height}),p||{}},setCropBoxData:function(u){var p=this.cropBoxData,d=this.options.aspectRatio,T,v;return this.ready&&this.cropped&&!this.disabled&&ti(u)&&(Y(u.left)&&(p.left=u.left),Y(u.top)&&(p.top=u.top),Y(u.width)&&u.width!==p.width&&(T=!0,p.width=u.width),Y(u.height)&&u.height!==p.height&&(v=!0,p.height=u.height),d&&(T?p.height=p.width/d:v&&(p.width=p.height*d)),this.renderCropBox()),this},getCroppedCanvas:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var p=this.canvasData,d=Je(this.image,this.imageData,p,u);if(!this.cropped)return d;var T=this.getData(u.rounded),v=T.x,x=T.y,R=T.width,H=T.height,D=d.width/Math.floor(p.naturalWidth);D!==1&&(v*=D,x*=D,R*=D,H*=D);var L=R/H,I=pe({aspectRatio:L,width:u.maxWidth||1/0,height:u.maxHeight||1/0}),B=pe({aspectRatio:L,width:u.minWidth||0,height:u.minHeight||0},"cover"),ee=pe({aspectRatio:L,width:u.width||(D!==1?d.width:R),height:u.height||(D!==1?d.height:H)}),J=ee.width,fe=ee.height;J=Math.min(I.width,Math.max(B.width,J)),fe=Math.min(I.height,Math.max(B.height,fe));var oe=document.createElement("canvas"),Be=oe.getContext("2d");oe.width=_i(J),oe.height=_i(fe),Be.fillStyle=u.fillColor||"transparent",Be.fillRect(0,0,J,fe);var qe=u.imageSmoothingEnabled,Oe=qe===void 0?!0:qe,bi=u.imageSmoothingQuality;Be.imageSmoothingEnabled=Oe,bi&&(Be.imageSmoothingQuality=bi);var Tt=d.width,q=d.height,ae=v,Ue=x,Pt,vi,Gi,Xi,Pi,ii;ae<=-R||ae>Tt?(ae=0,Pt=0,Gi=0,Pi=0):ae<=0?(Gi=-ae,ae=0,Pt=Math.min(Tt,R+ae),Pi=Pt):ae<=Tt&&(Gi=0,Pt=Math.min(R,Tt-ae),Pi=Pt),Pt<=0||Ue<=-H||Ue>q?(Ue=0,vi=0,Xi=0,ii=0):Ue<=0?(Xi=-Ue,Ue=0,vi=Math.min(q,H+Ue),ii=vi):Ue<=q&&(Xi=0,vi=Math.min(H,q-Ue),ii=vi);var yt=[ae,Ue,Pt,vi];if(Pi>0&&ii>0){var Ki=J/R;yt.push(Gi*Ki,Xi*Ki,Pi*Ki,ii*Ki)}return Be.drawImage.apply(Be,[d].concat(h(yt.map(function(Pn){return Math.floor(_i(Pn))})))),oe},setAspectRatio:function(u){var p=this.options;return!this.disabled&&!Et(u)&&(p.aspectRatio=Math.max(0,u)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(u){var p=this.options,d=this.dragBox,T=this.face;if(this.ready&&!this.disabled){var v=u===Q,x=p.movable&&u===it;u=v||x?u:_t,p.dragMode=u,xt(d,se,u),mi(d,ge,v),mi(d,ft,x),p.cropBoxMovable||(xt(T,se,u),mi(T,ge,v),mi(T,ft,x))}return this}},Rg=P.Cropper,th=function(){function g(u){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n(this,g),!u||!st.test(u.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=u,this.options=ne({},es,ti(p)&&p),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return a(g,[{key:"init",value:function(){var p=this.element,d=p.tagName.toLowerCase(),T;if(!p[_]){if(p[_]=this,d==="img"){if(this.isImg=!0,T=p.getAttribute("src")||"",this.originalUrl=T,!T)return;T=p.src}else d==="canvas"&&window.HTMLCanvasElement&&(T=p.toDataURL());this.load(T)}}},{key:"load",value:function(p){var d=this;if(p){this.url=p,this.imageData={};var T=this.element,v=this.options;if(!v.rotatable&&!v.scalable&&(v.checkOrientation=!1),!v.checkOrientation||!window.ArrayBuffer){this.clone();return}if(ei.test(p)){Ht.test(p)?this.read(Ne(p)):this.clone();return}var x=new XMLHttpRequest,R=this.clone.bind(this);this.reloading=!0,this.xhr=x,x.onabort=R,x.onerror=R,x.ontimeout=R,x.onprogress=function(){x.getResponseHeader("content-type")!==Vi&&x.abort()},x.onload=function(){d.read(x.response)},x.onloadend=function(){d.reloading=!1,d.xhr=null},v.checkCrossOrigin&&Cn(p)&&T.crossOrigin&&(p=W(p)),x.open("GET",p,!0),x.responseType="arraybuffer",x.withCredentials=T.crossOrigin==="use-credentials",x.send()}}},{key:"read",value:function(p){var d=this.options,T=this.imageData,v=Fn(p),x=0,R=1,H=1;if(v>1){this.url=_n(p,Vi);var D=Ag(v);x=D.rotate,R=D.scaleX,H=D.scaleY}d.rotatable&&(T.rotate=x),d.scalable&&(T.scaleX=R,T.scaleY=H),this.clone()}},{key:"clone",value:function(){var p=this.element,d=this.url,T=p.crossOrigin,v=d;this.options.checkCrossOrigin&&Cn(d)&&(T||(T="anonymous"),v=W(d)),this.crossOrigin=T,this.crossOriginUrl=v;var x=document.createElement("img");T&&(x.crossOrigin=T),x.src=v||d,x.alt=p.alt||"The image to crop",this.image=x,x.onload=this.start.bind(this),x.onerror=this.stop.bind(this),_e(x,tt),p.parentNode.insertBefore(x,p.nextSibling)}},{key:"start",value:function(){var p=this,d=this.image;d.onload=null,d.onerror=null,this.sizing=!0;var T=P.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(P.navigator.userAgent),v=function(D,L){ne(p.imageData,{naturalWidth:D,naturalHeight:L,aspectRatio:D/L}),p.initialImageData=ne({},p.imageData),p.sizing=!1,p.sized=!0,p.build()};if(d.naturalWidth&&!T){v(d.naturalWidth,d.naturalHeight);return}var x=document.createElement("img"),R=document.body||document.documentElement;this.sizingImage=x,x.onload=function(){v(x.width,x.height),T||R.removeChild(x)},x.src=d.src,T||(x.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",R.appendChild(x))}},{key:"stop",value:function(){var p=this.image;p.onload=null,p.onerror=null,p.parentNode.removeChild(p),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var p=this.element,d=this.options,T=this.image,v=p.parentNode,x=document.createElement("div");x.innerHTML=ts;var R=x.querySelector(".".concat(_,"-container")),H=R.querySelector(".".concat(_,"-canvas")),D=R.querySelector(".".concat(_,"-drag-box")),L=R.querySelector(".".concat(_,"-crop-box")),I=L.querySelector(".".concat(_,"-face"));this.container=v,this.cropper=R,this.canvas=H,this.dragBox=D,this.cropBox=L,this.viewBox=R.querySelector(".".concat(_,"-view-box")),this.face=I,H.appendChild(T),_e(p,de),v.insertBefore(R,p.nextSibling),gt(T,tt),this.initPreview(),this.bind(),d.initialAspectRatio=Math.max(0,d.initialAspectRatio)||NaN,d.aspectRatio=Math.max(0,d.aspectRatio)||NaN,d.viewMode=Math.max(0,Math.min(3,Math.round(d.viewMode)))||0,_e(L,de),d.guides||_e(L.getElementsByClassName("".concat(_,"-dashed")),de),d.center||_e(L.getElementsByClassName("".concat(_,"-center")),de),d.background&&_e(R,"".concat(_,"-bg")),d.highlight||_e(I,Ct),d.cropBoxMovable&&(_e(I,ft),xt(I,se,S)),d.cropBoxResizable||(_e(L.getElementsByClassName("".concat(_,"-line")),de),_e(L.getElementsByClassName("".concat(_,"-point")),de)),this.render(),this.ready=!0,this.setDragMode(d.dragMode),d.autoCrop&&this.crop(),this.setData(d.data),Qe(d.ready)&&Ee(p,hi,d.ready,{once:!0}),gi(p,hi)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var p=this.cropper.parentNode;p&&p.removeChild(this.cropper),gt(this.element,de)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Rg,g}},{key:"setDefaults",value:function(p){ne(es,ti(p)&&p)}}])}();return ne(th.prototype,Cg,_g,Fg,Pg,Og,Mg),th})});var Tr={eager:"eager",lazy:"lazy"},Mt=class i extends HTMLElement{static delegateConstructor=void 0;loaded=Promise.resolve();static get observedAttributes(){return["disabled","loading","src"]}constructor(){super(),this.delegate=new i.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(e){e=="loading"?this.delegate.loadingStyleChanged():e=="src"?this.delegate.sourceURLChanged():e=="disabled"&&this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(e){e?this.setAttribute("src",e):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(e){e?this.setAttribute("refresh",e):this.removeAttribute("refresh")}get shouldReloadWithMorph(){return this.src&&this.refresh==="morph"}get loading(){return jg(this.getAttribute("loading")||"")}set loading(e){e?this.setAttribute("loading",e):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(e){e?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){return this.ownerDocument?.documentElement?.hasAttribute("data-turbo-preview")}};function jg(i){switch(i.toLowerCase()){case"lazy":return Tr.lazy;default:return Tr.eager}}var qg={enabled:!0,progressBarDelay:500,unvisitableExtensions:new Set([".7z",".aac",".apk",".avi",".bmp",".bz2",".css",".csv",".deb",".dmg",".doc",".docx",".exe",".gif",".gz",".heic",".heif",".ico",".iso",".jpeg",".jpg",".js",".json",".m4a",".mkv",".mov",".mp3",".mp4",".mpeg",".mpg",".msi",".ogg",".ogv",".pdf",".pkg",".png",".ppt",".pptx",".rar",".rtf",".svg",".tar",".tif",".tiff",".txt",".wav",".webm",".webp",".wma",".wmv",".xls",".xlsx",".xml",".zip"])};function cs(i){if(i.getAttribute("data-turbo-eval")=="false")return i;{let e=document.createElement("script"),t=vh();return t&&(e.nonce=t),e.textContent=i.textContent,e.async=!1,Vg(e,i),e}}function Vg(i,e){for(let{name:t,value:r}of e.attributes)i.setAttribute(t,r)}function $g(i){let e=document.createElement("template");return e.innerHTML=i,e.content}function ye(i,{target:e,cancelable:t,detail:r}={}){let s=new CustomEvent(i,{cancelable:t,bubbles:!0,composed:!0,detail:r});return e&&e.isConnected?e.dispatchEvent(s):document.documentElement.dispatchEvent(s),s}function ah(i){i.preventDefault(),i.stopImmediatePropagation()}function as(){return document.visibilityState==="hidden"?fh():ph()}function ph(){return new Promise(i=>requestAnimationFrame(()=>i()))}function fh(){return new Promise(i=>setTimeout(()=>i(),0))}function mh(i=""){return new DOMParser().parseFromString(i,"text/html")}function gh(i,...e){let t=Wg(i,e).replace(/^\n/,"").split(`
`),r=t[0].match(/^\s+/),s=r?r[0].length:0;return t.map(n=>n.slice(s)).join(`
`)}function Wg(i,e){return i.reduce((t,r,s)=>{let n=e[s]==null?"":e[s];return t+r+n},"")}function Mi(){return Array.from({length:36}).map((i,e)=>e==8||e==13||e==18||e==23?"-":e==14?"4":e==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*16).toString(16)).join("")}function Rn(i,...e){for(let t of e.map(r=>r?.getAttribute(i)))if(typeof t=="string")return t;return null}function Gg(i,...e){return e.some(t=>t&&t.hasAttribute(i))}function Ln(...i){for(let e of i)e.localName=="turbo-frame"&&e.setAttribute("busy",""),e.setAttribute("aria-busy","true")}function In(...i){for(let e of i)e.localName=="turbo-frame"&&e.removeAttribute("busy"),e.removeAttribute("aria-busy")}function Xg(i,e=2e3){return new Promise(t=>{let r=()=>{i.removeEventListener("error",r),i.removeEventListener("load",r),t()};i.addEventListener("load",r,{once:!0}),i.addEventListener("error",r,{once:!0}),setTimeout(t,e)})}function bh(i){switch(i){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function Kg(i){return i=="advance"||i=="replace"||i=="restore"}function Qi(...i){let e=Rn("data-turbo-action",...i);return Kg(e)?e:null}function hl(i){return document.querySelector(`meta[name="${i}"]`)}function Dn(i){let e=hl(i);return e&&e.content}function vh(){let i=hl("csp-nonce");if(i){let{nonce:e,content:t}=i;return e==""?t:e}}function Yg(i,e){let t=hl(i);return t||(t=document.createElement("meta"),t.setAttribute("name",i),document.head.appendChild(t)),t.setAttribute("content",e),t}function Ar(i,e){if(i instanceof Element)return i.closest(e)||Ar(i.assignedSlot||i.getRootNode()?.host,e)}function dl(i){return!!i&&i.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof i.focus=="function"}function yh(i){return Array.from(i.querySelectorAll("[autofocus]")).find(dl)}async function Zg(i,e){let t=e();i(),await ph();let r=e();return[t,r]}function wh(i){if(i==="_blank")return!1;if(i){for(let e of document.getElementsByName(i))if(e instanceof HTMLIFrameElement)return!1;return!0}else return!0}function Sh(i){let e=Ar(i,"a[href], a[xlink\\:href]");if(!e||e.href.startsWith("#")||e.hasAttribute("download"))return null;let t=e.getAttribute("target");return t&&t!=="_self"?null:e}function Qg(i,e){let t=null;return(...r)=>{let s=()=>i.apply(this,r);clearTimeout(t),t=setTimeout(s,e)}}var Jg={"aria-disabled":{beforeSubmit:i=>{i.setAttribute("aria-disabled","true"),i.addEventListener("click",ah)},afterSubmit:i=>{i.removeAttribute("aria-disabled"),i.removeEventListener("click",ah)}},disabled:{beforeSubmit:i=>i.disabled=!0,afterSubmit:i=>i.disabled=!1}},Ia=class{#e=null;constructor(e){Object.assign(this,e)}get submitter(){return this.#e}set submitter(e){this.#e=Jg[e]||e}},eb=new Ia({mode:"on",submitter:"disabled"}),Ve={drive:qg,forms:eb};function Ke(i){return new URL(i.toString(),document.baseURI)}function ls(i){let e;if(i.hash)return i.hash.slice(1);if(e=i.href.match(/#(.*)$/))return e[1]}function pl(i,e){let t=e?.getAttribute("formaction")||i.getAttribute("action")||i.action;return Ke(t)}function tb(i){return(nb(i).match(/\.[^.]*$/)||[])[0]||""}function ib(i,e){let t=lh(e.origin+e.pathname);return lh(i.href)===t||i.href.startsWith(t)}function Oi(i,e){return ib(i,e)&&!Ve.drive.unvisitableExtensions.has(tb(i))}function Eh(i){return Ke(i.getAttribute("href")||"")}function rb(i){let e=ls(i);return e!=null?i.href.slice(0,-(e.length+1)):i.href}function Mn(i){return rb(i)}function xh(i,e){return Ke(i).href==Ke(e).href}function sb(i){return i.pathname.split("/").slice(1)}function nb(i){return sb(i).slice(-1)[0]}function lh(i){return i.endsWith("/")?i:i+"/"}var us=class{constructor(e){this.response=e}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return Ke(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(e){return this.response.headers.get(e)}},Da=class extends Set{constructor(e){super(),this.maxSize=e}add(e){if(this.size>=this.maxSize){let r=this.values().next().value;this.delete(r)}super.add(e)}},Th=new Da(20);function kh(i,e={}){let t=new Headers(e.headers||{}),r=Mi();return Th.add(r),t.append("X-Turbo-Request-Id",r),window.fetch(i,{...e,headers:t})}function fl(i){switch(i.toLowerCase()){case"get":return Ot.get;case"post":return Ot.post;case"put":return Ot.put;case"patch":return Ot.patch;case"delete":return Ot.delete}}var Ot={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function ob(i){switch(i.toLowerCase()){case Zi.multipart:return Zi.multipart;case Zi.plain:return Zi.plain;default:return Zi.urlEncoded}}var Zi={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"},Ji=class{abortController=new AbortController;#e=e=>{};constructor(e,t,r,s=new URLSearchParams,n=null,o=Zi.urlEncoded){let[a,l]=ch(Ke(r),t,s,o);this.delegate=e,this.url=a,this.target=n,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:t.toUpperCase(),headers:{...this.defaultHeaders},body:l,signal:this.abortSignal,referrer:this.delegate.referrer?.href},this.enctype=o}get method(){return this.fetchOptions.method}set method(e){let t=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,r=fl(e)||Ot.get;this.url.search="";let[s,n]=ch(this.url,r,t,this.enctype);this.url=s,this.fetchOptions.body=n,this.fetchOptions.method=r.toUpperCase()}get headers(){return this.fetchOptions.headers}set headers(e){this.fetchOptions.headers=e}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(e){this.fetchOptions.body=e}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){let{fetchOptions:e}=this;this.delegate.prepareRequest(this);let t=await this.#t(e);try{this.delegate.requestStarted(this),t.detail.fetchRequest?this.response=t.detail.fetchRequest.response:this.response=kh(this.url.href,e);let r=await this.response;return await this.receive(r)}catch(r){if(r.name!=="AbortError")throw this.#i(r)&&this.delegate.requestErrored(this,r),r}finally{this.delegate.requestFinished(this)}}async receive(e){let t=new us(e);return ye("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:t},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,t):t.succeeded?this.delegate.requestSucceededWithResponse(this,t):this.delegate.requestFailedWithResponse(this,t),t}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return ml(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(e){this.headers.Accept=[e,this.headers.Accept].join(", ")}async#t(e){let t=new Promise(s=>this.#e=s),r=ye("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:e,url:this.url,resume:this.#e},target:this.target});return this.url=r.detail.url,r.defaultPrevented&&await t,r}#i(e){return!ye("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:e}}).defaultPrevented}};function ml(i){return fl(i)==Ot.get}function ch(i,e,t,r){let s=Array.from(t).length>0?new URLSearchParams(Ah(t)):i.searchParams;return ml(e)?[ab(i,s),null]:r==Zi.urlEncoded?[i,s]:[i,t]}function Ah(i){let e=[];for(let[t,r]of i)r instanceof File||e.push([t,r]);return e}function ab(i,e){let t=new URLSearchParams(Ah(e));return i.search=t.toString(),i}var Na=class{started=!1;constructor(e,t){this.delegate=e,this.element=t,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}intersect=e=>{e.slice(-1)[0]?.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)}},Ri=class{static contentType="text/vnd.turbo-stream.html";static wrap(e){return typeof e=="string"?new this($g(e)):e}constructor(e){this.fragment=lb(e)}};function lb(i){for(let e of i.querySelectorAll("turbo-stream")){let t=document.importNode(e,!0);for(let r of t.templateElement.content.querySelectorAll("script"))r.replaceWith(cs(r));e.replaceWith(t)}return i}var cb=i=>i,Nn=class{keys=[];entries={};#e;constructor(e,t=cb){this.size=e,this.#e=t}has(e){return this.#e(e)in this.entries}get(e){if(this.has(e)){let t=this.read(e);return this.touch(e),t}}put(e,t){return this.write(e,t),this.touch(e),t}clear(){for(let e of Object.keys(this.entries))this.evict(e)}read(e){return this.entries[this.#e(e)]}write(e,t){this.entries[this.#e(e)]=t}touch(e){e=this.#e(e);let t=this.keys.indexOf(e);t>-1&&this.keys.splice(t,1),this.keys.unshift(e),this.trim()}trim(){for(let e of this.keys.splice(this.size))this.evict(e)}evict(e){delete this.entries[e]}},ub=100,Ba=class extends Nn{#e=null;#t={};constructor(e=1,t=ub){super(e,Mn),this.prefetchDelay=t}putLater(e,t,r){this.#e=setTimeout(()=>{t.perform(),this.put(e,t,r),this.#e=null},this.prefetchDelay)}put(e,t,r=Ch){super.put(e,t),this.#t[Mn(e)]=new Date(new Date().getTime()+r)}clear(){super.clear(),this.#e&&clearTimeout(this.#e)}evict(e){super.evict(e),delete this.#t[e]}has(e){if(super.has(e)){let t=this.#t[Mn(e)];return t&&t>Date.now()}else return!1}},Ch=10*1e3,kr=new Ba,xr={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"},Bn=class i{state=xr.initialized;static confirmMethod(e){return Promise.resolve(confirm(e))}constructor(e,t,r,s=!1){let n=gb(t,r),o=mb(fb(t,r),n),a=hb(t,r),l=bb(t,r);this.delegate=e,this.formElement=t,this.submitter=r,this.fetchRequest=new Ji(this,n,o,a,t,l),this.mustRedirect=s}get method(){return this.fetchRequest.method}set method(e){this.fetchRequest.method=e}get action(){return this.fetchRequest.url.toString()}set action(e){this.fetchRequest.url=Ke(e)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){let{initialized:e,requesting:t}=xr,r=Rn("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof r=="string"&&!await(typeof Ve.forms.confirm=="function"?Ve.forms.confirm:i.confirmMethod)(r,this.formElement,this.submitter))&&this.state==e)return this.state=t,this.fetchRequest.perform()}stop(){let{stopping:e,stopped:t}=xr;if(this.state!=e&&this.state!=t)return this.state=e,this.fetchRequest.cancel(),!0}prepareRequest(e){if(!e.isSafe){let t=db(Dn("csrf-param"))||Dn("csrf-token");t&&(e.headers["X-CSRF-Token"]=t)}this.requestAcceptsTurboStreamResponse(e)&&e.acceptResponseType(Ri.contentType)}requestStarted(e){this.state=xr.waiting,this.submitter&&Ve.forms.submitter.beforeSubmit(this.submitter),this.setSubmitsWith(),Ln(this.formElement),ye("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(e,t){kr.clear(),this.result={success:t.succeeded,fetchResponse:t}}requestSucceededWithResponse(e,t){if(t.clientError||t.serverError){this.delegate.formSubmissionFailedWithResponse(this,t);return}if(kr.clear(),this.requestMustRedirect(e)&&pb(t)){let r=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,r)}else this.state=xr.receiving,this.result={success:!0,fetchResponse:t},this.delegate.formSubmissionSucceededWithResponse(this,t)}requestFailedWithResponse(e,t){this.result={success:!1,fetchResponse:t},this.delegate.formSubmissionFailedWithResponse(this,t)}requestErrored(e,t){this.result={success:!1,error:t},this.delegate.formSubmissionErrored(this,t)}requestFinished(e){this.state=xr.stopped,this.submitter&&Ve.forms.submitter.afterSubmit(this.submitter),this.resetSubmitterText(),In(this.formElement),ye("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){let e=this.submitter;this.originalSubmitText=e.value,e.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){let e=this.submitter;e.value=this.originalSubmitText}}}requestMustRedirect(e){return!e.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(e){return!e.isSafe||Gg("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){return this.submitter?.getAttribute("data-turbo-submits-with")}};function hb(i,e){let t=new FormData(i),r=e?.getAttribute("name"),s=e?.getAttribute("value");return r&&t.append(r,s||""),t}function db(i){if(i!=null){let t=(document.cookie?document.cookie.split("; "):[]).find(r=>r.startsWith(i));if(t){let r=t.split("=").slice(1).join("=");return r?decodeURIComponent(r):void 0}}}function pb(i){return i.statusCode==200&&!i.redirected}function fb(i,e){let t=typeof i.action=="string"?i.action:null;return e?.hasAttribute("formaction")?e.getAttribute("formaction")||"":i.getAttribute("action")||t||""}function mb(i,e){let t=Ke(i);return ml(e)&&(t.search=""),t}function gb(i,e){let t=e?.getAttribute("formmethod")||i.getAttribute("method")||"";return fl(t.toLowerCase())||Ot.get}function bb(i,e){return ob(e?.getAttribute("formenctype")||i.enctype)}var _r=class{constructor(e){this.element=e}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(e){return this.getElementForAnchor(e)!=null}getElementForAnchor(e){return e?this.element.querySelector(`[id='${e}'], a[name='${e}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return yh(this.element)}get permanentElements(){return Fh(this.element)}getPermanentElementById(e){return _h(this.element,e)}getPermanentElementMapForSnapshot(e){let t={};for(let r of this.permanentElements){let{id:s}=r,n=e.getPermanentElementById(s);n&&(t[s]=[r,n])}return t}};function _h(i,e){return i.querySelector(`#${e}[data-turbo-permanent]`)}function Fh(i){return i.querySelectorAll("[id][data-turbo-permanent]")}var hs=class{started=!1;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)};submitBubbled=e=>{if(!e.defaultPrevented){let t=e.target instanceof HTMLFormElement?e.target:void 0,r=e.submitter||void 0;t&&vb(t,r)&&yb(t,r)&&this.delegate.willSubmitForm(t,r)&&(e.preventDefault(),e.stopImmediatePropagation(),this.delegate.formSubmitted(t,r))}}};function vb(i,e){return(e?.getAttribute("formmethod")||i.getAttribute("method"))!="dialog"}function yb(i,e){let t=e?.getAttribute("formtarget")||i.getAttribute("target");return wh(t)}var Un=class{#e=e=>{};#t=e=>{};constructor(e,t){this.delegate=e,this.element=t}scrollToAnchor(e){let t=this.snapshot.getElementForAnchor(e);t?(this.focusElement(t),this.scrollToElement(t)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(e){this.scrollToAnchor(ls(e))}scrollToElement(e){e.scrollIntoView()}focusElement(e){e instanceof HTMLElement&&(e.hasAttribute("tabindex")?e.focus():(e.setAttribute("tabindex","-1"),e.focus(),e.removeAttribute("tabindex")))}scrollToPosition({x:e,y:t}){this.scrollRoot.scrollTo(e,t)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(e){let{isPreview:t,shouldRender:r,willRender:s,newSnapshot:n}=e,o=s;if(r)try{this.renderPromise=new Promise(f=>this.#e=f),this.renderer=e,await this.prepareToRenderSnapshot(e);let a=new Promise(f=>this.#t=f),l={resume:this.#t,render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(n,l)||await a,await this.renderSnapshot(e),this.delegate.viewRenderedSnapshot(n,t,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(e)}finally{delete this.renderer,this.#e(void 0),delete this.renderPromise}else o&&this.invalidate(e.reloadReason)}invalidate(e){this.delegate.viewInvalidated(e)}async prepareToRenderSnapshot(e){this.markAsPreview(e.isPreview),await e.prepareToRender()}markAsPreview(e){e?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(e){this.element.setAttribute("data-turbo-visit-direction",e)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(e){await e.render()}finishRenderingSnapshot(e){e.finishRendering()}},Ua=class extends Un{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new _r(this.element)}},zn=class{constructor(e,t){this.delegate=e,this.element=t}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickBubbled=e=>{this.clickEventIsSignificant(e)?this.clickEvent=e:delete this.clickEvent};linkClicked=e=>{this.clickEvent&&this.clickEventIsSignificant(e)&&this.delegate.shouldInterceptLinkClick(e.target,e.detail.url,e.detail.originalEvent)&&(this.clickEvent.preventDefault(),e.preventDefault(),this.delegate.linkClickIntercepted(e.target,e.detail.url,e.detail.originalEvent)),delete this.clickEvent};willVisit=e=>{delete this.clickEvent};clickEventIsSignificant(e){let t=e.composed?e.target?.parentElement:e.target,r=Sh(t)||t;return r instanceof Element&&r.closest("turbo-frame, html")==this.element}},Hn=class{started=!1;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)};clickBubbled=e=>{if(e instanceof MouseEvent&&this.clickEventIsSignificant(e)){let t=e.composedPath&&e.composedPath()[0]||e.target,r=Sh(t);if(r&&wh(r.target)){let s=Eh(r);this.delegate.willFollowLinkToLocation(r,s,e)&&(e.preventDefault(),this.delegate.followedLinkToLocation(r,s))}}};clickEventIsSignificant(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}},jn=class{constructor(e,t){this.delegate=e,this.linkInterceptor=new Hn(this,t)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(e,t){return!1}prefetchAndCacheRequestToLocation(e,t){}willFollowLinkToLocation(e,t,r){return this.delegate.willSubmitFormLinkToLocation(e,t,r)&&(e.hasAttribute("data-turbo-method")||e.hasAttribute("data-turbo-stream"))}followedLinkToLocation(e,t){let r=document.createElement("form"),s="hidden";for(let[m,y]of t.searchParams)r.append(Object.assign(document.createElement("input"),{type:s,name:m,value:y}));let n=Object.assign(t,{search:""});r.setAttribute("data-turbo","true"),r.setAttribute("action",n.href),r.setAttribute("hidden","");let o=e.getAttribute("data-turbo-method");o&&r.setAttribute("method",o);let a=e.getAttribute("data-turbo-frame");a&&r.setAttribute("data-turbo-frame",a);let l=Qi(e);l&&r.setAttribute("data-turbo-action",l);let h=e.getAttribute("data-turbo-confirm");h&&r.setAttribute("data-turbo-confirm",h),e.hasAttribute("data-turbo-stream")&&r.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(e,t,r),document.body.appendChild(r),r.addEventListener("turbo:submit-end",()=>r.remove(),{once:!0}),requestAnimationFrame(()=>r.requestSubmit())}},qn=class{static async preservingPermanentElements(e,t,r){let s=new this(e,t);s.enter(),await r(),s.leave()}constructor(e,t){this.delegate=e,this.permanentElementMap=t}enter(){for(let e in this.permanentElementMap){let[t,r]=this.permanentElementMap[e];this.delegate.enteringBardo(t,r),this.replaceNewPermanentElementWithPlaceholder(r)}}leave(){for(let e in this.permanentElementMap){let[t]=this.permanentElementMap[e];this.replaceCurrentPermanentElementWithClone(t),this.replacePlaceholderWithPermanentElement(t),this.delegate.leavingBardo(t)}}replaceNewPermanentElementWithPlaceholder(e){let t=wb(e);e.replaceWith(t)}replaceCurrentPermanentElementWithClone(e){let t=e.cloneNode(!0);e.replaceWith(t)}replacePlaceholderWithPermanentElement(e){this.getPlaceholderById(e.id)?.replaceWith(e)}getPlaceholderById(e){return this.placeholders.find(t=>t.content==e)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}};function wb(i){let e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",i.id),e}var ds=class{#e=null;static renderElement(e,t){}constructor(e,t,r,s=!0){this.currentSnapshot=e,this.newSnapshot=t,this.isPreview=r,this.willRender=s,this.renderElement=this.constructor.renderElement,this.promise=new Promise((n,o)=>this.resolvingFunctions={resolve:n,reject:o})}get shouldRender(){return!0}get shouldAutofocus(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(e){await qn.preservingPermanentElements(this,this.permanentElementMap,e)}focusFirstAutofocusableElement(){if(this.shouldAutofocus){let e=this.connectedSnapshot.firstAutofocusableElement;e&&e.focus()}}enteringBardo(e){this.#e||e.contains(this.currentSnapshot.activeElement)&&(this.#e=this.currentSnapshot.activeElement)}leavingBardo(e){e.contains(this.#e)&&this.#e instanceof HTMLElement&&(this.#e.focus(),this.#e=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}},ps=class extends ds{static renderElement(e,t){let r=document.createRange();r.selectNodeContents(e),r.deleteContents();let s=t,n=s.ownerDocument?.createRange();n&&(n.selectNodeContents(s),e.appendChild(n.extractContents()))}constructor(e,t,r,s,n,o=!0){super(t,r,s,n,o),this.delegate=e}get shouldRender(){return!0}async render(){await as(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await as(),this.focusFirstAutofocusableElement(),await as(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let e=this.currentElement.firstElementChild,t=Sb(this.currentElement.getAttribute("data-autoscroll-block"),"end"),r=Eb(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(e)return e.scrollIntoView({block:t,behavior:r}),!0}return!1}activateScriptElements(){for(let e of this.newScriptElements){let t=cs(e);e.replaceWith(t)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}};function Sb(i,e){return i=="end"||i=="start"||i=="center"||i=="nearest"?i:e}function Eb(i,e){return i=="auto"||i=="smooth"?i:e}var xb=function(){let i=()=>{},e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:i,afterNodeAdded:i,beforeNodeMorphed:i,afterNodeMorphed:i,beforeNodeRemoved:i,afterNodeRemoved:i,beforeAttributeUpdated:i},head:{style:"merge",shouldPreserve:y=>y.getAttribute("im-preserve")==="true",shouldReAppend:y=>y.getAttribute("im-re-append")==="true",shouldRemove:i,afterHeadMorphed:i},restoreFocus:!0};function t(y,b,k={}){y=f(y);let F=m(b),P=h(y,F,k),M=s(P,()=>a(P,y,F,A=>A.morphStyle==="innerHTML"?(n(A,y,F),Array.from(y.childNodes)):r(A,y,F)));return P.pantry.remove(),M}function r(y,b,k){let F=m(b);return n(y,F,k,b,b.nextSibling),Array.from(F.childNodes)}function s(y,b){if(!y.config.restoreFocus)return b();let k=document.activeElement;if(!(k instanceof HTMLInputElement||k instanceof HTMLTextAreaElement))return b();let{id:F,selectionStart:P,selectionEnd:M}=k,A=b();return F&&F!==document.activeElement?.getAttribute("id")&&(k=y.target.querySelector(`[id="${F}"]`),k?.focus()),k&&!k.selectionEnd&&M&&k.setSelectionRange(P,M),A}let n=function(){function y(S,E,C,O=null,N=null){E instanceof HTMLTemplateElement&&C instanceof HTMLTemplateElement&&(E=E.content,C=C.content),O||=E.firstChild;for(let z of C.childNodes){if(O&&O!=N){let j=k(S,z,O,N);if(j){j!==O&&P(S,O,j),o(j,z,S),O=j.nextSibling;continue}}if(z instanceof Element){let j=z.getAttribute("id");if(S.persistentIds.has(j)){let K=M(E,j,O,S);o(K,z,S),O=K.nextSibling;continue}}let V=b(E,z,O,S);V&&(O=V.nextSibling)}for(;O&&O!=N;){let z=O;O=O.nextSibling,F(S,z)}}function b(S,E,C,O){if(O.callbacks.beforeNodeAdded(E)===!1)return null;if(O.idMap.has(E)){let N=document.createElement(E.tagName);return S.insertBefore(N,C),o(N,E,O),O.callbacks.afterNodeAdded(N),N}else{let N=document.importNode(E,!0);return S.insertBefore(N,C),O.callbacks.afterNodeAdded(N),N}}let k=function(){function S(O,N,z,V){let j=null,K=N.nextSibling,te=0,ie=z;for(;ie&&ie!=V;){if(C(ie,N)){if(E(O,ie,N))return ie;j===null&&(O.idMap.has(ie)||(j=ie))}if(j===null&&K&&C(ie,K)&&(te++,K=K.nextSibling,te>=2&&(j=void 0)),O.activeElementAndParents.includes(ie))break;ie=ie.nextSibling}return j||null}function E(O,N,z){let V=O.idMap.get(N),j=O.idMap.get(z);if(!j||!V)return!1;for(let K of V)if(j.has(K))return!0;return!1}function C(O,N){let z=O,V=N;return z.nodeType===V.nodeType&&z.tagName===V.tagName&&(!z.getAttribute?.("id")||z.getAttribute?.("id")===V.getAttribute?.("id"))}return S}();function F(S,E){if(S.idMap.has(E))_(S.pantry,E,null);else{if(S.callbacks.beforeNodeRemoved(E)===!1)return;E.parentNode?.removeChild(E),S.callbacks.afterNodeRemoved(E)}}function P(S,E,C){let O=E;for(;O&&O!==C;){let N=O;O=O.nextSibling,F(S,N)}return O}function M(S,E,C,O){let N=O.target.getAttribute?.("id")===E&&O.target||O.target.querySelector(`[id="${E}"]`)||O.pantry.querySelector(`[id="${E}"]`);return A(N,O),_(S,N,C),N}function A(S,E){let C=S.getAttribute("id");for(;S=S.parentNode;){let O=E.idMap.get(S);O&&(O.delete(C),O.size||E.idMap.delete(S))}}function _(S,E,C){if(S.moveBefore)try{S.moveBefore(E,C)}catch{S.insertBefore(E,C)}else S.insertBefore(E,C)}return y}(),o=function(){function y(A,_,S){return S.ignoreActive&&A===document.activeElement?null:(S.callbacks.beforeNodeMorphed(A,_)===!1||(A instanceof HTMLHeadElement&&S.head.ignore||(A instanceof HTMLHeadElement&&S.head.style!=="morph"?l(A,_,S):(b(A,_,S),M(A,S)||n(S,A,_))),S.callbacks.afterNodeMorphed(A,_)),A)}function b(A,_,S){let E=_.nodeType;if(E===1){let C=A,O=_,N=C.attributes,z=O.attributes;for(let V of z)P(V.name,C,"update",S)||C.getAttribute(V.name)!==V.value&&C.setAttribute(V.name,V.value);for(let V=N.length-1;0<=V;V--){let j=N[V];if(j&&!O.hasAttribute(j.name)){if(P(j.name,C,"remove",S))continue;C.removeAttribute(j.name)}}M(C,S)||k(C,O,S)}(E===8||E===3)&&A.nodeValue!==_.nodeValue&&(A.nodeValue=_.nodeValue)}function k(A,_,S){if(A instanceof HTMLInputElement&&_ instanceof HTMLInputElement&&_.type!=="file"){let E=_.value,C=A.value;F(A,_,"checked",S),F(A,_,"disabled",S),_.hasAttribute("value")?C!==E&&(P("value",A,"update",S)||(A.setAttribute("value",E),A.value=E)):P("value",A,"remove",S)||(A.value="",A.removeAttribute("value"))}else if(A instanceof HTMLOptionElement&&_ instanceof HTMLOptionElement)F(A,_,"selected",S);else if(A instanceof HTMLTextAreaElement&&_ instanceof HTMLTextAreaElement){let E=_.value,C=A.value;if(P("value",A,"update",S))return;E!==C&&(A.value=E),A.firstChild&&A.firstChild.nodeValue!==E&&(A.firstChild.nodeValue=E)}}function F(A,_,S,E){let C=_[S],O=A[S];if(C!==O){let N=P(S,A,"update",E);N||(A[S]=_[S]),C?N||A.setAttribute(S,""):P(S,A,"remove",E)||A.removeAttribute(S)}}function P(A,_,S,E){return A==="value"&&E.ignoreActiveValue&&_===document.activeElement?!0:E.callbacks.beforeAttributeUpdated(A,_,S)===!1}function M(A,_){return!!_.ignoreActiveValue&&A===document.activeElement&&A!==document.body}return y}();function a(y,b,k,F){if(y.head.block){let P=b.querySelector("head"),M=k.querySelector("head");if(P&&M){let A=l(P,M,y);return Promise.all(A).then(()=>{let _=Object.assign(y,{head:{block:!1,ignore:!0}});return F(_)})}}return F(y)}function l(y,b,k){let F=[],P=[],M=[],A=[],_=new Map;for(let E of b.children)_.set(E.outerHTML,E);for(let E of y.children){let C=_.has(E.outerHTML),O=k.head.shouldReAppend(E),N=k.head.shouldPreserve(E);C||N?O?P.push(E):(_.delete(E.outerHTML),M.push(E)):k.head.style==="append"?O&&(P.push(E),A.push(E)):k.head.shouldRemove(E)!==!1&&P.push(E)}A.push(..._.values());let S=[];for(let E of A){let C=document.createRange().createContextualFragment(E.outerHTML).firstChild;if(k.callbacks.beforeNodeAdded(C)!==!1){if("href"in C&&C.href||"src"in C&&C.src){let O,N=new Promise(function(z){O=z});C.addEventListener("load",function(){O()}),S.push(N)}y.appendChild(C),k.callbacks.afterNodeAdded(C),F.push(C)}}for(let E of P)k.callbacks.beforeNodeRemoved(E)!==!1&&(y.removeChild(E),k.callbacks.afterNodeRemoved(E));return k.head.afterHeadMorphed(y,{added:F,kept:M,removed:P}),S}let h=function(){function y(S,E,C){let{persistentIds:O,idMap:N}=A(S,E),z=b(C),V=z.morphStyle||"outerHTML";if(!["innerHTML","outerHTML"].includes(V))throw`Do not understand how to morph style ${V}`;return{target:S,newContent:E,config:z,morphStyle:V,ignoreActive:z.ignoreActive,ignoreActiveValue:z.ignoreActiveValue,restoreFocus:z.restoreFocus,idMap:N,persistentIds:O,pantry:k(),activeElementAndParents:F(S),callbacks:z.callbacks,head:z.head}}function b(S){let E=Object.assign({},e);return Object.assign(E,S),E.callbacks=Object.assign({},e.callbacks,S.callbacks),E.head=Object.assign({},e.head,S.head),E}function k(){let S=document.createElement("div");return S.hidden=!0,document.body.insertAdjacentElement("afterend",S),S}function F(S){let E=[],C=document.activeElement;if(C?.tagName!=="BODY"&&S.contains(C))for(;C&&(E.push(C),C!==S);)C=C.parentElement;return E}function P(S){let E=Array.from(S.querySelectorAll("[id]"));return S.getAttribute?.("id")&&E.push(S),E}function M(S,E,C,O){for(let N of O){let z=N.getAttribute("id");if(E.has(z)){let V=N;for(;V;){let j=S.get(V);if(j==null&&(j=new Set,S.set(V,j)),j.add(z),V===C)break;V=V.parentElement}}}}function A(S,E){let C=P(S),O=P(E),N=_(C,O),z=new Map;M(z,N,S,C);let V=E.__idiomorphRoot||E;return M(z,N,V,O),{persistentIds:N,idMap:z}}function _(S,E){let C=new Set,O=new Map;for(let{id:z,tagName:V}of S)O.has(z)?C.add(z):O.set(z,V);let N=new Set;for(let{id:z,tagName:V}of E)N.has(z)?C.add(z):O.get(z)===V&&N.add(z);for(let z of C)N.delete(z);return N}return y}(),{normalizeElement:f,normalizeParent:m}=function(){let y=new WeakSet;function b(M){return M instanceof Document?M.documentElement:M}function k(M){if(M==null)return document.createElement("div");if(typeof M=="string")return k(P(M));if(y.has(M))return M;if(M instanceof Node){if(M.parentNode)return new F(M);{let A=document.createElement("div");return A.append(M),A}}else{let A=document.createElement("div");for(let _ of[...M])A.append(_);return A}}class F{constructor(A){this.originalNode=A,this.realParentNode=A.parentNode,this.previousSibling=A.previousSibling,this.nextSibling=A.nextSibling}get childNodes(){let A=[],_=this.previousSibling?this.previousSibling.nextSibling:this.realParentNode.firstChild;for(;_&&_!=this.nextSibling;)A.push(_),_=_.nextSibling;return A}querySelectorAll(A){return this.childNodes.reduce((_,S)=>{if(S instanceof Element){S.matches(A)&&_.push(S);let E=S.querySelectorAll(A);for(let C=0;C<E.length;C++)_.push(E[C])}return _},[])}insertBefore(A,_){return this.realParentNode.insertBefore(A,_)}moveBefore(A,_){return this.realParentNode.moveBefore(A,_)}get __idiomorphRoot(){return this.originalNode}}function P(M){let A=new DOMParser,_=M.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(_.match(/<\/html>/)||_.match(/<\/head>/)||_.match(/<\/body>/)){let S=A.parseFromString(M,"text/html");if(_.match(/<\/html>/))return y.add(S),S;{let E=S.firstChild;return E&&y.add(E),E}}else{let E=A.parseFromString("<body><template>"+M+"</template></body>","text/html").body.querySelector("template").content;return y.add(E),E}}return{normalizeElement:b,normalizeParent:k}}();return{morph:t,defaults:e}}();function Wn(i,e,{callbacks:t,...r}={}){xb.morph(i,e,{...r,callbacks:new za(t)})}function gl(i,e,t={}){Wn(i,e.childNodes,{...t,morphStyle:"innerHTML"})}function Ph(i,e){return i instanceof Mt&&i.shouldReloadWithMorph&&(!e||Tb(i,e))&&!i.closest("[data-turbo-permanent]")}function Tb(i,e){return e instanceof Element&&e.nodeName==="TURBO-FRAME"&&i.id===e.id&&(!e.getAttribute("src")||xh(i.src,e.getAttribute("src")))}function Oh(i){return i.parentElement.closest("turbo-frame[src][refresh=morph]")}var za=class{#e;constructor({beforeNodeMorphed:e}={}){this.#e=e||(()=>!0)}beforeNodeAdded=e=>!(e.id&&e.hasAttribute("data-turbo-permanent")&&document.getElementById(e.id));beforeNodeMorphed=(e,t)=>{if(e instanceof Element)return!e.hasAttribute("data-turbo-permanent")&&this.#e(e,t)?!ye("turbo:before-morph-element",{cancelable:!0,target:e,detail:{currentElement:e,newElement:t}}).defaultPrevented:!1};beforeAttributeUpdated=(e,t,r)=>!ye("turbo:before-morph-attribute",{cancelable:!0,target:t,detail:{attributeName:e,mutationType:r}}).defaultPrevented;beforeNodeRemoved=e=>this.beforeNodeMorphed(e);afterNodeMorphed=(e,t)=>{e instanceof Element&&ye("turbo:morph-element",{target:e,detail:{currentElement:e,newElement:t}})}},Vn=class extends ps{static renderElement(e,t){ye("turbo:before-frame-morph",{target:e,detail:{currentElement:e,newElement:t}}),gl(e,t,{callbacks:{beforeNodeMorphed:(r,s)=>Ph(r,s)&&Oh(r)===e?(r.reload(),!1):!0}})}async preservingPermanentElements(e){return await e()}},Ha=class i{static animationDuration=300;static get defaultCSS(){return gh`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${i.animationDuration}ms ease-out,
          opacity ${i.animationDuration/2}ms ${i.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}hiding=!1;value=0;visible=!1;constructor(){this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(e){this.value=e,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(e){this.progressElement.style.opacity="0",setTimeout(e,i.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,i.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}trickle=()=>{this.setValue(this.value+Math.random()/100)};refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){let e=document.createElement("style");e.type="text/css",e.textContent=i.defaultCSS;let t=vh();return t&&(e.nonce=t),e}createProgressElement(){let e=document.createElement("div");return e.className="turbo-progress-bar",e}},ja=class extends _r{detailsByOuterHTML=this.children.filter(e=>!_b(e)).map(e=>Ob(e)).reduce((e,t)=>{let{outerHTML:r}=t,s=r in e?e[r]:{type:kb(t),tracked:Ab(t),elements:[]};return{...e,[r]:{...s,elements:[...s.elements,t]}}},{});get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(e=>this.detailsByOuterHTML[e].tracked).join("")}getScriptElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("script",e)}getStylesheetElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",e)}getElementsMatchingTypeNotInSnapshot(e,t){return Object.keys(this.detailsByOuterHTML).filter(r=>!(r in t.detailsByOuterHTML)).map(r=>this.detailsByOuterHTML[r]).filter(({type:r})=>r==e).map(({elements:[r]})=>r)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((e,t)=>{let{type:r,tracked:s,elements:n}=this.detailsByOuterHTML[t];return r==null&&!s?[...e,...n]:n.length>1?[...e,...n.slice(1)]:e},[])}getMetaValue(e){let t=this.findMetaElementByName(e);return t?t.getAttribute("content"):null}findMetaElementByName(e){return Object.keys(this.detailsByOuterHTML).reduce((t,r)=>{let{elements:[s]}=this.detailsByOuterHTML[r];return Pb(s,e)?s:t},void 0|void 0)}};function kb(i){if(Cb(i))return"script";if(Fb(i))return"stylesheet"}function Ab(i){return i.getAttribute("data-turbo-track")=="reload"}function Cb(i){return i.localName=="script"}function _b(i){return i.localName=="noscript"}function Fb(i){let e=i.localName;return e=="style"||e=="link"&&i.getAttribute("rel")=="stylesheet"}function Pb(i,e){return i.localName=="meta"&&i.getAttribute("name")==e}function Ob(i){return i.hasAttribute("nonce")&&i.setAttribute("nonce",""),i}var jt=class i extends _r{static fromHTMLString(e=""){return this.fromDocument(mh(e))}static fromElement(e){return this.fromDocument(e.ownerDocument)}static fromDocument({documentElement:e,body:t,head:r}){return new this(e,t,new ja(r))}constructor(e,t,r){super(t),this.documentElement=e,this.headSnapshot=r}clone(){let e=this.element.cloneNode(!0),t=this.element.querySelectorAll("select"),r=e.querySelectorAll("select");for(let[s,n]of t.entries()){let o=r[s];for(let a of o.selectedOptions)a.selected=!1;for(let a of n.selectedOptions)o.options[a.index].selected=!0}for(let s of e.querySelectorAll('input[type="password"]'))s.value="";for(let s of e.querySelectorAll("noscript"))s.remove();return new i(this.documentElement,e,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get dir(){return this.documentElement.getAttribute("dir")}get headElement(){return this.headSnapshot.element}get rootLocation(){let e=this.getSetting("root")??"/";return Ke(e)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return(this.getSetting("view-transition")==="true"||this.headSnapshot.getMetaValue("view-transition")==="same-origin")&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches}get refreshMethod(){return this.getSetting("refresh-method")}get refreshScroll(){return this.getSetting("refresh-scroll")}getSetting(e){return this.headSnapshot.getMetaValue(`turbo-${e}`)}},qa=class{#e=!1;#t=Promise.resolve();renderChange(e,t){return e&&this.viewTransitionsAvailable&&!this.#e?(this.#e=!0,this.#t=this.#t.then(async()=>{await document.startViewTransition(t).finished})):this.#t=this.#t.then(t),this.#t}get viewTransitionsAvailable(){return document.startViewTransition}},Mb={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1,refresh:{}},On={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},yi={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},Cr={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},Rb={advance:"forward",restore:"back",replace:"none"},Va=class{identifier=Mi();timingMetrics={};followedRedirect=!1;historyChanged=!1;scrolled=!1;shouldCacheSnapshot=!0;acceptsStreamResponse=!1;snapshotCached=!1;state=yi.initialized;viewTransitioner=new qa;constructor(e,t,r,s={}){this.delegate=e,this.location=t,this.restorationIdentifier=r||Mi();let{action:n,historyChanged:o,referrer:a,snapshot:l,snapshotHTML:h,response:f,visitCachedSnapshot:m,willRender:y,updateHistory:b,shouldCacheSnapshot:k,acceptsStreamResponse:F,direction:P,refresh:M}={...Mb,...s};this.action=n,this.historyChanged=o,this.referrer=a,this.snapshot=l,this.snapshotHTML=h,this.response=f,this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=m,this.willRender=y,this.updateHistory=b,this.scrolled=!y,this.shouldCacheSnapshot=k,this.acceptsStreamResponse=F,this.direction=P||Rb[n],this.refresh=M}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}start(){this.state==yi.initialized&&(this.recordTimingMetric(On.visitStart),this.state=yi.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==yi.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=yi.canceled)}complete(){this.state==yi.started&&(this.recordTimingMetric(On.visitEnd),this.adapter.visitCompleted(this),this.state=yi.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==yi.started&&(this.state=yi.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){if(!this.historyChanged&&this.updateHistory){let e=this.location.href===this.referrer?.href?"replace":this.action,t=bh(e);this.history.update(t,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new Ji(this,Ot.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(On.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(e=this.response){if(this.response=e,e){let{statusCode:t}=e;uh(t)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,t)}}finishRequest(){this.recordTimingMetric(On.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:e,responseHTML:t}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,uh(e)&&t!=null){let r=jt.fromHTMLString(t);await this.renderPageSnapshot(r,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(jt.fromHTMLString(t),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){let e=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(e&&(!ls(this.location)||e.hasAnchor(ls(this.location)))&&(this.action=="restore"||e.isPreviewable))return e}getPreloadedSnapshot(){if(this.snapshotHTML)return jt.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){let e=this.getCachedSnapshot();if(e){let t=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(e,t),this.adapter.visitRendered(this),t||this.complete())})}}followRedirect(){this.redirectedToLocation&&!this.followedRedirect&&this.response?.redirected&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}prepareRequest(e){this.acceptsStreamResponse&&e.acceptResponseType(Ri.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(e,t){}async requestSucceededWithResponse(e,t){let r=await t.responseHTML,{redirected:s,statusCode:n}=t;r==null?this.recordResponse({statusCode:Cr.contentTypeMismatch,redirected:s}):(this.redirectedToLocation=t.redirected?t.location:void 0,this.recordResponse({statusCode:n,responseHTML:r,redirected:s}))}async requestFailedWithResponse(e,t){let r=await t.responseHTML,{redirected:s,statusCode:n}=t;r==null?this.recordResponse({statusCode:Cr.contentTypeMismatch,redirected:s}):this.recordResponse({statusCode:n,responseHTML:r,redirected:s})}requestErrored(e,t){this.recordResponse({statusCode:Cr.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:e}=this.restorationData;if(e)return this.view.scrollToPosition(e),!0}scrollToAnchor(){let e=ls(this.location);if(e!=null)return this.view.scrollToAnchor(e),!0}recordTimingMetric(e){this.timingMetrics[e]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(e=>e&&this.visitCachedSnapshot(e)),this.snapshotCached=!0)}async render(e){this.cancelRender(),await new Promise(t=>{this.frame=document.visibilityState==="hidden"?setTimeout(()=>t(),0):requestAnimationFrame(()=>t())}),await e(),delete this.frame}async renderPageSnapshot(e,t){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(e),async()=>{await this.view.renderPage(e,t,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}};function uh(i){return i>=200&&i<300}var $a=class{progressBar=new Ha;constructor(e){this.session=e}visitProposedToLocation(e,t){Oi(e,this.navigator.rootLocation)?this.navigator.startVisit(e,t?.restorationIdentifier||Mi(),t):window.location.href=e.toString()}visitStarted(e){this.location=e.location,this.redirectedToLocation=null,e.loadCachedSnapshot(),e.issueRequest()}visitRequestStarted(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||e.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(e){e.loadResponse(),e.response.redirected&&(this.redirectedToLocation=e.redirectedToLocation)}visitRequestFailedWithStatusCode(e,t){switch(t){case Cr.networkFailure:case Cr.timeoutFailure:case Cr.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:t}});default:return e.loadResponse()}}visitRequestFinished(e){}visitCompleted(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(e){this.reload(e)}visitFailed(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(e){}linkPrefetchingIsEnabledForLocation(e){return!0}formSubmissionStarted(e){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(e){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}showProgressBar=()=>{this.progressBar.show()};reload(e){ye("turbo:reload",{detail:e}),window.location.href=(this.redirectedToLocation||this.location)?.toString()||window.location.href}get navigator(){return this.session.navigator}},Wa=class{selector="[data-turbo-temporary]";started=!1;start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}removeTemporaryElements=e=>{for(let t of this.temporaryElements)t.remove()};get temporaryElements(){return[...document.querySelectorAll(this.selector)]}},Ga=class{constructor(e,t){this.session=e,this.element=t,this.linkInterceptor=new zn(this,t),this.formSubmitObserver=new hs(this,t)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(e,t,r){return this.#t(e)}linkClickIntercepted(e,t,r){let s=this.#i(e);s&&s.delegate.linkClickIntercepted(e,t,r)}willSubmitForm(e,t){return e.closest("turbo-frame")==null&&this.#e(e,t)&&this.#t(e,t)}formSubmitted(e,t){let r=this.#i(e,t);r&&r.delegate.formSubmitted(e,t)}#e(e,t){let r=pl(e,t),s=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),n=Ke(s?.content??"/");return this.#t(e,t)&&Oi(r,n)}#t(e,t){if(e instanceof HTMLFormElement?this.session.submissionIsNavigatable(e,t):this.session.elementIsNavigatable(e)){let s=this.#i(e,t);return s?s!=e.closest("turbo-frame"):!1}else return!1}#i(e,t){let r=t?.getAttribute("data-turbo-frame")||e.getAttribute("data-turbo-frame");if(r&&r!="_top"){let s=this.element.querySelector(`#${r}:not([disabled])`);if(s instanceof Mt)return s}}},Xa=class{location;restorationIdentifier=Mi();restorationData={};started=!1;currentIndex=0;constructor(e){this.delegate=e}start(){this.started||(addEventListener("popstate",this.onPopState,!1),this.currentIndex=history.state?.turbo?.restorationIndex||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),this.started=!1)}push(e,t){this.update(history.pushState,e,t)}replace(e,t){this.update(history.replaceState,e,t)}update(e,t,r=Mi()){e===history.pushState&&++this.currentIndex;let s={turbo:{restorationIdentifier:r,restorationIndex:this.currentIndex}};e.call(history,s,"",t.href),this.location=t,this.restorationIdentifier=r}getRestorationDataForIdentifier(e){return this.restorationData[e]||{}}updateRestorationData(e){let{restorationIdentifier:t}=this,r=this.restorationData[t];this.restorationData[t]={...r,...e}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}onPopState=e=>{let{turbo:t}=e.state||{};if(this.location=new URL(window.location.href),t){let{restorationIdentifier:r,restorationIndex:s}=t;this.restorationIdentifier=r;let n=s>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,r,n),this.currentIndex=s}else this.currentIndex++,this.delegate.historyPoppedWithEmptyState(this.location)}},Ka=class{started=!1;#e=null;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",this.#t,{once:!0}):this.#t())}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",this.#i,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",this.#r,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",this.#o,!0),this.started=!1)}#t=()=>{this.eventTarget.addEventListener("mouseenter",this.#i,{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",this.#r,{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",this.#o,!0),this.started=!0};#i=e=>{if(Dn("turbo-prefetch")==="false")return;let t=e.target;if(t.matches&&t.matches("a[href]:not([target^=_]):not([download])")&&this.#l(t)){let s=t,n=Eh(s);if(this.delegate.canPrefetchRequestToLocation(s,n)){this.#e=s;let o=new Ji(this,Ot.get,n,new URLSearchParams,t);o.fetchOptions.priority="low",kr.putLater(n,o,this.#s)}}};#r=e=>{e.target===this.#e&&this.#n()};#n=()=>{kr.clear(),this.#e=null};#o=e=>{if(e.target.tagName!=="FORM"&&e.detail.fetchOptions.method==="GET"){let t=kr.get(e.detail.url);t&&(e.detail.fetchRequest=t),kr.clear()}};prepareRequest(e){let t=e.target;e.headers["X-Sec-Purpose"]="prefetch";let r=t.closest("turbo-frame"),s=t.getAttribute("data-turbo-frame")||r?.getAttribute("target")||r?.id;s&&s!=="_top"&&(e.headers["Turbo-Frame"]=s)}requestSucceededWithResponse(){}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}get#s(){return Number(Dn("turbo-prefetch-cache-time"))||Ch}#l(e){return!(!e.getAttribute("href")||Lb(e)||Ib(e)||Db(e)||Nb(e)||Ub(e))}},Lb=i=>i.origin!==document.location.origin||!["http:","https:"].includes(i.protocol)||i.hasAttribute("target"),Ib=i=>i.pathname+i.search===document.location.pathname+document.location.search||i.href.startsWith("#"),Db=i=>{if(i.getAttribute("data-turbo-prefetch")==="false"||i.getAttribute("data-turbo")==="false")return!0;let e=Ar(i,"[data-turbo-prefetch]");return!!(e&&e.getAttribute("data-turbo-prefetch")==="false")},Nb=i=>{let e=i.getAttribute("data-turbo-method");return!!(e&&e.toLowerCase()!=="get"||Bb(i)||i.hasAttribute("data-turbo-confirm")||i.hasAttribute("data-turbo-stream"))},Bb=i=>i.hasAttribute("data-remote")||i.hasAttribute("data-behavior")||i.hasAttribute("data-confirm")||i.hasAttribute("data-method"),Ub=i=>ye("turbo:before-prefetch",{target:i,cancelable:!0}).defaultPrevented,Ya=class{constructor(e){this.delegate=e}proposeVisit(e,t={}){this.delegate.allowsVisitingLocationWithAction(e,t.action)&&this.delegate.visitProposedToLocation(e,t)}startVisit(e,t,r={}){this.stop(),this.currentVisit=new Va(this,Ke(e),t,{referrer:this.location,...r}),this.currentVisit.start()}submitForm(e,t){this.stop(),this.formSubmission=new Bn(this,e,t,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(e){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(e)}async formSubmissionSucceededWithResponse(e,t){if(e==this.formSubmission){let r=await t.responseHTML;if(r){let s=e.isSafe;s||this.view.clearSnapshotCache();let{statusCode:n,redirected:o}=t,l={action:this.#e(e,t),shouldCacheSnapshot:s,response:{statusCode:n,responseHTML:r,redirected:o}};this.proposeVisit(t.location,l)}}}async formSubmissionFailedWithResponse(e,t){let r=await t.responseHTML;if(r){let s=jt.fromHTMLString(r);t.serverError?await this.view.renderError(s,this.currentVisit):await this.view.renderPage(s,!1,!0,this.currentVisit),s.refreshScroll!=="preserve"&&this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished(e){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(e)}linkPrefetchingIsEnabledForLocation(e){return typeof this.adapter.linkPrefetchingIsEnabledForLocation=="function"?this.adapter.linkPrefetchingIsEnabledForLocation(e):!0}visitStarted(e){this.delegate.visitStarted(e)}visitCompleted(e){this.delegate.visitCompleted(e),delete this.currentVisit}locationWithActionIsSamePage(e,t){return!1}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}#e(e,t){let{submitter:r,formElement:s}=e;return Qi(r,s)||this.#t(t)}#t(e){return e.redirected&&e.location.href===this.location?.href?"replace":"advance"}},Yi={initial:0,loading:1,interactive:2,complete:3},Za=class{stage=Yi.initial;started=!1;constructor(e){this.delegate=e}start(){this.started||(this.stage==Yi.initial&&(this.stage=Yi.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}interpretReadyState=()=>{let{readyState:e}=this;e=="interactive"?this.pageIsInteractive():e=="complete"&&this.pageIsComplete()};pageIsInteractive(){this.stage==Yi.loading&&(this.stage=Yi.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==Yi.interactive&&(this.stage=Yi.complete,this.delegate.pageLoaded())}pageWillUnload=()=>{this.delegate.pageWillUnload()};get readyState(){return document.readyState}},Qa=class{started=!1;constructor(e){this.delegate=e}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})};updatePosition(e){this.delegate.scrollPositionChanged(e)}},Ja=class{render({fragment:e}){qn.preservingPermanentElements(this,zb(e),()=>{Hb(e,()=>{jb(()=>{document.documentElement.appendChild(e)})})})}enteringBardo(e,t){t.replaceWith(e.cloneNode(!0))}leavingBardo(){}};function zb(i){let e=Fh(document.documentElement),t={};for(let r of e){let{id:s}=r;for(let n of i.querySelectorAll("turbo-stream")){let o=_h(n.templateElement.content,s);o&&(t[s]=[r,o])}}return t}async function Hb(i,e){let t=`turbo-stream-autofocus-${Mi()}`,r=i.querySelectorAll("turbo-stream"),s=qb(r),n=null;if(s&&(s.id?n=s.id:n=t,s.id=n),e(),await as(),(document.activeElement==null||document.activeElement==document.body)&&n){let a=document.getElementById(n);dl(a)&&a.focus(),a&&a.id==t&&a.removeAttribute("id")}}async function jb(i){let[e,t]=await Zg(i,()=>document.activeElement),r=e&&e.id;if(r){let s=document.getElementById(r);dl(s)&&s!=t&&s.focus()}}function qb(i){for(let e of i){let t=yh(e.templateElement.content);if(t)return t}return null}var el=class{sources=new Set;#e=!1;constructor(e){this.delegate=e}start(){this.#e||(this.#e=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.#e&&(this.#e=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(e){this.streamSourceIsConnected(e)||(this.sources.add(e),e.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(e){this.streamSourceIsConnected(e)&&(this.sources.delete(e),e.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(e){return this.sources.has(e)}inspectFetchResponse=e=>{let t=Vb(e);t&&$b(t)&&(e.preventDefault(),this.receiveMessageResponse(t))};receiveMessageEvent=e=>{this.#e&&typeof e.data=="string"&&this.receiveMessageHTML(e.data)};async receiveMessageResponse(e){let t=await e.responseHTML;t&&this.receiveMessageHTML(t)}receiveMessageHTML(e){this.delegate.receivedMessageFromStream(Ri.wrap(e))}};function Vb(i){let e=i.detail?.fetchResponse;if(e instanceof us)return e}function $b(i){return(i.contentType??"").startsWith(Ri.contentType)}var tl=class extends ds{static renderElement(e,t){let{documentElement:r,body:s}=document;r.replaceChild(t,s)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){let{documentElement:e,head:t}=document;e.replaceChild(this.newHead,t),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let e of this.scriptElements){let t=e.parentNode;if(t){let r=cs(e);t.replaceChild(r,e)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}},fs=class extends ds{static renderElement(e,t){document.body&&t instanceof HTMLBodyElement?document.body.replaceWith(t):document.documentElement.appendChild(t)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){this.#e(),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}#e(){let{documentElement:e}=this.currentSnapshot,{dir:t,lang:r}=this.newSnapshot;r?e.setAttribute("lang",r):e.removeAttribute("lang"),t?e.setAttribute("dir",t):e.removeAttribute("dir")}async mergeHead(){let e=this.mergeProvisionalElements(),t=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await e,await t,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){let e=[];for(let t of this.newHeadStylesheetElements)e.push(Xg(t)),document.head.appendChild(t);await Promise.all(e)}copyNewHeadScriptElements(){for(let e of this.newHeadScriptElements)document.head.appendChild(cs(e))}removeUnusedDynamicStylesheetElements(){for(let e of this.unusedDynamicStylesheetElements)document.head.removeChild(e)}async mergeProvisionalElements(){let e=[...this.newHeadProvisionalElements];for(let t of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(t,e)||document.head.removeChild(t);for(let t of e)document.head.appendChild(t)}isCurrentElementInElementList(e,t){for(let[r,s]of t.entries()){if(e.tagName=="TITLE"){if(s.tagName!="TITLE")continue;if(e.innerHTML==s.innerHTML)return t.splice(r,1),!0}if(s.isEqualNode(e))return t.splice(r,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(let e of this.currentHeadProvisionalElements)document.head.removeChild(e)}copyNewHeadProvisionalElements(){for(let e of this.newHeadProvisionalElements)document.head.appendChild(e)}activateNewBody(){document.adoptNode(this.newElement),this.removeNoscriptElements(),this.activateNewBodyScriptElements()}removeNoscriptElements(){for(let e of this.newElement.querySelectorAll("noscript"))e.remove()}activateNewBodyScriptElements(){for(let e of this.newBodyScriptElements){let t=cs(e);e.replaceWith(t)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(e=>e.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}},$n=class extends fs{static renderElement(e,t){Wn(e,t,{callbacks:{beforeNodeMorphed:(r,s)=>Ph(r,s)&&!Oh(r)?(r.reload(),!1):!0}}),ye("turbo:morph",{detail:{currentElement:e,newElement:t}})}async preservingPermanentElements(e){return await e()}get renderMethod(){return"morph"}get shouldAutofocus(){return!1}},il=class extends Nn{constructor(e){super(e,Mn)}get snapshots(){return this.entries}},rl=class extends Un{snapshotCache=new il(10);lastRenderedLocation=new URL(location.href);forceReloaded=!1;shouldTransitionTo(e){return this.snapshot.prefersViewTransitions&&e.prefersViewTransitions}renderPage(e,t=!1,r=!0,s){let o=this.isPageRefresh(s)&&(s?.refresh?.method||this.snapshot.refreshMethod)==="morph"?$n:fs,a=new o(this.snapshot,e,t,r);return a.shouldRender?s?.changeHistory():this.forceReloaded=!0,this.render(a)}renderError(e,t){t?.changeHistory();let r=new tl(this.snapshot,e,!1);return this.render(r)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(e=this.snapshot){if(e.isCacheable){this.delegate.viewWillCacheSnapshot();let{lastRenderedLocation:t}=this;await fh();let r=e.clone();return this.snapshotCache.put(t,r),r}}getCachedSnapshotForLocation(e){return this.snapshotCache.get(e)}isPageRefresh(e){return!e||this.lastRenderedLocation.pathname===e.location.pathname&&e.action==="replace"}shouldPreserveScrollPosition(e){return this.isPageRefresh(e)&&(e?.refresh?.scroll||this.snapshot.refreshScroll)==="preserve"}get snapshot(){return jt.fromElement(this.element)}},sl=class{selector="a[data-turbo-preload]";constructor(e,t){this.delegate=e,this.snapshotCache=t}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this.#e):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",this.#e)}preloadOnLoadLinksForView(e){for(let t of e.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(t)&&this.preloadURL(t)}async preloadURL(e){let t=new URL(e.href);if(this.snapshotCache.has(t))return;await new Ji(this,Ot.get,t,new URLSearchParams,e).perform()}prepareRequest(e){e.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(e,t){try{let r=await t.responseHTML,s=jt.fromHTMLString(r);this.snapshotCache.put(e.url,s)}catch{}}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}#e=()=>{this.preloadOnLoadLinksForView(document.body)}},nl=class{constructor(e){this.session=e}clear(){this.session.clearCache()}resetCacheControl(){this.#e("")}exemptPageFromCache(){this.#e("no-cache")}exemptPageFromPreview(){this.#e("no-preview")}#e(e){Yg("turbo-cache-control",e)}},ol=class{navigator=new Ya(this);history=new Xa(this);view=new rl(this,document.documentElement);adapter=new $a(this);pageObserver=new Za(this);cacheObserver=new Wa;linkPrefetchObserver=new Ka(this,document);linkClickObserver=new Hn(this,window);formSubmitObserver=new hs(this,document);scrollObserver=new Qa(this);streamObserver=new el(this);formLinkClickObserver=new jn(this,document.documentElement);frameRedirector=new Ga(this,document.documentElement);streamMessageRenderer=new Ja;cache=new nl(this);enabled=!0;started=!1;#e=150;constructor(e){this.recentRequests=e,this.preloader=new sl(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(e){this.adapter=e}visit(e,t={}){let r=t.frame?document.getElementById(t.frame):null;if(r instanceof Mt){let s=t.action||Qi(r);r.delegate.proposeVisitIfNavigatedWithAction(r,s),r.src=e.toString()}else this.navigator.proposeVisit(Ke(e),t)}refresh(e,t={}){t=typeof t=="string"?{requestId:t}:t;let{method:r,requestId:s,scroll:n}=t,o=s&&this.recentRequests.has(s),a=e===document.baseURI;!o&&!this.navigator.currentVisit&&a&&this.visit(e,{action:"replace",shouldCacheSnapshot:!1,refresh:{method:r,scroll:n}})}connectStreamSource(e){this.streamObserver.connectStreamSource(e)}disconnectStreamSource(e){this.streamObserver.disconnectStreamSource(e)}renderStreamMessage(e){this.streamMessageRenderer.render(Ri.wrap(e))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(e){console.warn("Please replace `session.setProgressBarDelay(delay)` with `session.progressBarDelay = delay`. The function is deprecated and will be removed in a future version of Turbo.`"),this.progressBarDelay=e}set progressBarDelay(e){Ve.drive.progressBarDelay=e}get progressBarDelay(){return Ve.drive.progressBarDelay}set drive(e){Ve.drive.enabled=e}get drive(){return Ve.drive.enabled}set formMode(e){Ve.forms.mode=e}get formMode(){return Ve.forms.mode}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return this.#e}set pageRefreshDebouncePeriod(e){this.refresh=Qg(this.debouncedRefresh.bind(this),e),this.#e=e}shouldPreloadLink(e){let t=e.hasAttribute("data-turbo-method"),r=e.hasAttribute("data-turbo-stream"),s=e.getAttribute("data-turbo-frame"),n=s=="_top"?null:document.getElementById(s)||Ar(e,"turbo-frame:not([disabled])");if(t||r||n instanceof Mt)return!1;{let o=new URL(e.href);return this.elementIsNavigatable(e)&&Oi(o,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(e,t,r){this.enabled?this.navigator.startVisit(e,t,{action:"restore",historyChanged:!0,direction:r}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}historyPoppedWithEmptyState(e){this.history.replace(e),this.view.lastRenderedLocation=e,this.view.cacheSnapshot()}scrollPositionChanged(e){this.history.updateRestorationData({scrollPosition:e})}willSubmitFormLinkToLocation(e,t){return this.elementIsNavigatable(e)&&Oi(t,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(e,t){return this.elementIsNavigatable(e)&&Oi(t,this.snapshot.rootLocation)&&this.navigator.linkPrefetchingIsEnabledForLocation(t)}willFollowLinkToLocation(e,t,r){return this.elementIsNavigatable(e)&&Oi(t,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(e,t,r)}followedLinkToLocation(e,t){let r=this.getActionForLink(e),s=e.hasAttribute("data-turbo-stream");this.visit(t.href,{action:r,acceptsStreamResponse:s})}allowsVisitingLocationWithAction(e,t){return this.applicationAllowsVisitingLocation(e)}visitProposedToLocation(e,t){hh(e),this.adapter.visitProposedToLocation(e,t)}visitStarted(e){e.acceptsStreamResponse||(Ln(document.documentElement),this.view.markVisitDirection(e.direction)),hh(e.location),this.notifyApplicationAfterVisitingLocation(e.location,e.action)}visitCompleted(e){this.view.unmarkVisitDirection(),In(document.documentElement),this.notifyApplicationAfterPageLoad(e.getTimingMetrics())}willSubmitForm(e,t){let r=pl(e,t);return this.submissionIsNavigatable(e,t)&&Oi(Ke(r),this.snapshot.rootLocation)}formSubmitted(e,t){this.navigator.submitForm(e,t)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(e){this.renderStreamMessage(e)}viewWillCacheSnapshot(){this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:e},t){let r=this.notifyApplicationBeforeRender(e,t),{defaultPrevented:s,detail:{render:n}}=r;return this.view.renderer&&n&&(this.view.renderer.renderElement=n),!s}viewRenderedSnapshot(e,t,r){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(r)}preloadOnLoadLinksForView(e){this.preloader.preloadOnLoadLinksForView(e)}viewInvalidated(e){this.adapter.pageInvalidated(e)}frameLoaded(e){this.notifyApplicationAfterFrameLoad(e)}frameRendered(e,t){this.notifyApplicationAfterFrameRender(e,t)}applicationAllowsFollowingLinkToLocation(e,t,r){return!this.notifyApplicationAfterClickingLinkToLocation(e,t,r).defaultPrevented}applicationAllowsVisitingLocation(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(e,t,r){return ye("turbo:click",{target:e,detail:{url:t.href,originalEvent:r},cancelable:!0})}notifyApplicationBeforeVisitingLocation(e){return ye("turbo:before-visit",{detail:{url:e.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(e,t){return ye("turbo:visit",{detail:{url:e.href,action:t}})}notifyApplicationBeforeCachingSnapshot(){return ye("turbo:before-cache")}notifyApplicationBeforeRender(e,t){return ye("turbo:before-render",{detail:{newBody:e,...t},cancelable:!0})}notifyApplicationAfterRender(e){return ye("turbo:render",{detail:{renderMethod:e}})}notifyApplicationAfterPageLoad(e={}){return ye("turbo:load",{detail:{url:this.location.href,timing:e}})}notifyApplicationAfterFrameLoad(e){return ye("turbo:frame-load",{target:e})}notifyApplicationAfterFrameRender(e,t){return ye("turbo:frame-render",{detail:{fetchResponse:e},target:t,cancelable:!0})}submissionIsNavigatable(e,t){if(Ve.forms.mode=="off")return!1;{let r=t?this.elementIsNavigatable(t):!0;return Ve.forms.mode=="optin"?r&&e.closest('[data-turbo="true"]')!=null:r&&this.elementIsNavigatable(e)}}elementIsNavigatable(e){let t=Ar(e,"[data-turbo]"),r=Ar(e,"turbo-frame");return Ve.drive.enabled||r?t?t.getAttribute("data-turbo")!="false":!0:t?t.getAttribute("data-turbo")=="true":!1}getActionForLink(e){return Qi(e)||"advance"}get snapshot(){return this.view.snapshot}};function hh(i){Object.defineProperties(i,Wb)}var Wb={absoluteURL:{get(){return this.toString()}}},Me=new ol(Th),{cache:Gb,navigator:Xb}=Me;function Mh(){Me.start()}function Kb(i){Me.registerAdapter(i)}function Yb(i,e){Me.visit(i,e)}function Rh(i){Me.connectStreamSource(i)}function Lh(i){Me.disconnectStreamSource(i)}function Zb(i){Me.renderStreamMessage(i)}function Qb(i){console.warn("Please replace `Turbo.setProgressBarDelay(delay)` with `Turbo.config.drive.progressBarDelay = delay`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Ve.drive.progressBarDelay=i}function Jb(i){console.warn("Please replace `Turbo.setConfirmMethod(confirmMethod)` with `Turbo.config.forms.confirm = confirmMethod`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Ve.forms.confirm=i}function ev(i){console.warn("Please replace `Turbo.setFormMode(mode)` with `Turbo.config.forms.mode = mode`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Ve.forms.mode=i}function tv(i,e){$n.renderElement(i,e)}function iv(i,e){Vn.renderElement(i,e)}var rv=Object.freeze({__proto__:null,navigator:Xb,session:Me,cache:Gb,PageRenderer:fs,PageSnapshot:jt,FrameRenderer:ps,fetch:kh,config:Ve,start:Mh,registerAdapter:Kb,visit:Yb,connectStreamSource:Rh,disconnectStreamSource:Lh,renderStreamMessage:Zb,setProgressBarDelay:Qb,setConfirmMethod:Jb,setFormMode:ev,morphBodyElements:tv,morphTurboFrameElements:iv,morphChildren:gl,morphElements:Wn}),al=class extends Error{},ll=class{fetchResponseLoaded=e=>Promise.resolve();#e=null;#t=()=>{};#i=!1;#r=!1;#n=new Set;#o=!1;action=null;constructor(e){this.element=e,this.view=new Ua(this,this.element),this.appearanceObserver=new Na(this,this.element),this.formLinkClickObserver=new jn(this,this.element),this.linkInterceptor=new zn(this,this.element),this.restorationIdentifier=Mi(),this.formSubmitObserver=new hs(this,this.element)}connect(){this.#i||(this.#i=!0,this.loadingStyle==Tr.lazy?this.appearanceObserver.start():this.#s(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.#i&&(this.#i=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop(),this.element.hasAttribute("recurse")||this.#e?.cancel())}disabledChanged(){this.disabled?this.#e?.cancel():this.loadingStyle==Tr.eager&&this.#s()}sourceURLChanged(){this.#v("src")||(this.sourceURL||this.#e?.cancel(),this.element.isConnected&&(this.complete=!1),(this.loadingStyle==Tr.eager||this.#r)&&this.#s())}sourceURLReloaded(){let{refresh:e,src:t}=this.element;return this.#o=t&&e==="morph",this.element.removeAttribute("complete"),this.element.src=null,this.element.src=t,this.element.loaded}loadingStyleChanged(){this.loadingStyle==Tr.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.#s())}async#s(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.#a(Ke(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.#r=!0)}async loadResponse(e){(e.redirected||e.succeeded&&e.isHTML)&&(this.sourceURL=e.response.url);try{let t=await e.responseHTML;if(t){let r=mh(t);jt.fromDocument(r).isVisitable?await this.#l(e,r):await this.#c(e)}}finally{this.#o=!1,this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(e){this.proposeVisitIfNavigatedWithAction(e,Qi(e)),this.#s()}willSubmitFormLinkToLocation(e){return this.#b(e)}submittedFormLinkToLocation(e,t,r){let s=this.#d(e);s&&r.setAttribute("data-turbo-frame",s.id)}shouldInterceptLinkClick(e,t,r){return this.#b(e)}linkClickIntercepted(e,t){this.#f(e,t)}willSubmitForm(e,t){return e.closest("turbo-frame")==this.element&&this.#b(e,t)}formSubmitted(e,t){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new Bn(this,e,t);let{fetchRequest:r}=this.formSubmission,s=this.#d(e,t);this.prepareRequest(r,s),this.formSubmission.start()}prepareRequest(e,t=this){e.headers["Turbo-Frame"]=t.id,this.currentNavigationElement?.hasAttribute("data-turbo-stream")&&e.acceptResponseType(Ri.contentType)}requestStarted(e){Ln(this.element)}requestPreventedHandlingResponse(e,t){this.#t()}async requestSucceededWithResponse(e,t){await this.loadResponse(t),this.#t()}async requestFailedWithResponse(e,t){await this.loadResponse(t),this.#t()}requestErrored(e,t){console.error(t),this.#t()}requestFinished(e){In(this.element)}formSubmissionStarted({formElement:e}){Ln(e,this.#d(e))}formSubmissionSucceededWithResponse(e,t){let r=this.#d(e.formElement,e.submitter);r.delegate.proposeVisitIfNavigatedWithAction(r,Qi(e.submitter,e.formElement,r)),r.delegate.loadResponse(t),e.isSafe||Me.clearCache()}formSubmissionFailedWithResponse(e,t){this.element.delegate.loadResponse(t),Me.clearCache()}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished({formElement:e}){In(e,this.#d(e))}allowsImmediateRender({element:e},t){let r=ye("turbo:before-frame-render",{target:this.element,detail:{newFrame:e,...t},cancelable:!0}),{defaultPrevented:s,detail:{render:n}}=r;return this.view.renderer&&n&&(this.view.renderer.renderElement=n),!s}viewRenderedSnapshot(e,t,r){}preloadOnLoadLinksForView(e){Me.preloadOnLoadLinksForView(e)}viewInvalidated(){}willRenderFrame(e,t){this.previousFrameElement=e.cloneNode(!0)}visitCachedSnapshot=({element:e})=>{let t=e.querySelector("#"+this.element.id);t&&this.previousFrameElement&&t.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement};async#l(e,t){let r=await this.extractForeignFrameElement(t.body),s=this.#o?Vn:ps;if(r){let n=new _r(r),o=new s(this,this.view.snapshot,n,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(o),this.complete=!0,Me.frameRendered(e,this.element),Me.frameLoaded(this.element),await this.fetchResponseLoaded(e)}else this.#h(e)&&this.#u(e)}async#a(e){let t=new Ji(this,Ot.get,e,new URLSearchParams,this.element);return this.#e?.cancel(),this.#e=t,new Promise(r=>{this.#t=()=>{this.#t=()=>{},this.#e=null,r()},t.perform()})}#f(e,t,r){let s=this.#d(e,r);s.delegate.proposeVisitIfNavigatedWithAction(s,Qi(r,e,s)),this.#S(e,()=>{s.src=t})}proposeVisitIfNavigatedWithAction(e,t=null){if(this.action=t,this.action){let r=jt.fromElement(e).clone(),{visitCachedSnapshot:s}=e.delegate;e.delegate.fetchResponseLoaded=async n=>{if(e.src){let{statusCode:o,redirected:a}=n,l=await n.responseHTML,f={response:{statusCode:o,redirected:a,responseHTML:l},visitCachedSnapshot:s,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:r};this.action&&(f.action=this.action),Me.visit(e.src,f)}}}}changeHistory(){if(this.action){let e=bh(this.action);Me.history.update(e,Ke(this.element.src||""),this.restorationIdentifier)}}async#c(e){console.warn(`The response (${e.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.#g(e.response)}#h(e){this.element.setAttribute("complete","");let t=e.response,r=async(n,o)=>{n instanceof Response?this.#g(n):Me.visit(n,o)};return!ye("turbo:frame-missing",{target:this.element,detail:{response:t,visit:r},cancelable:!0}).defaultPrevented}#u(e){this.view.missing(),this.#p(e)}#p(e){let t=`The response (${e.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new al(t)}async#g(e){let t=new us(e),r=await t.responseHTML,{location:s,redirected:n,statusCode:o}=t;return Me.visit(s,{response:{redirected:n,statusCode:o,responseHTML:r}})}#d(e,t){let r=Rn("data-turbo-frame",t,e)||this.element.getAttribute("target"),s=this.#m(r);return s instanceof Mt?s:this.element}async extractForeignFrameElement(e){let t,r=CSS.escape(this.id);try{if(t=dh(e.querySelector(`turbo-frame#${r}`),this.sourceURL),t)return t;if(t=dh(e.querySelector(`turbo-frame[src][recurse~=${r}]`),this.sourceURL),t)return await t.loaded,await this.extractForeignFrameElement(t)}catch(s){return console.error(s),new Mt}return null}#w(e,t){let r=pl(e,t);return Oi(Ke(r),this.rootLocation)}#b(e,t){let r=Rn("data-turbo-frame",t,e)||this.element.getAttribute("target");if(e instanceof HTMLFormElement&&!this.#w(e,t)||!this.enabled||r=="_top")return!1;if(r){let s=this.#m(r);if(s)return!s.disabled;if(r=="_parent")return!1}return!(!Me.elementIsNavigatable(e)||t&&!Me.elementIsNavigatable(t))}get id(){return this.element.id}get disabled(){return this.element.disabled}get enabled(){return!this.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(e){this.#x("src",()=>{this.element.src=e??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.#t()!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(e){e?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&this.#i}get rootLocation(){let t=this.element.ownerDocument.querySelector('meta[name="turbo-root"]')?.content??"/";return Ke(t)}#v(e){return this.#n.has(e)}#x(e,t){this.#n.add(e),t(),this.#n.delete(e)}#S(e,t){this.currentNavigationElement=e,t(),delete this.currentNavigationElement}#m(e){if(e!=null){let t=e==="_parent"?this.element.parentElement.closest("turbo-frame"):document.getElementById(e);if(t instanceof Mt)return t}}};function dh(i,e){if(i){let t=i.getAttribute("src");if(t!=null&&e!=null&&xh(t,e))throw new Error(`Matching <turbo-frame id="${i.id}"> element has a source URL which references itself`);if(i.ownerDocument!==document&&(i=document.importNode(i,!0)),i instanceof Mt)return i.connectedCallback(),i.disconnectedCallback(),i}}var Ih={after(){this.removeDuplicateTargetSiblings(),this.targetElements.forEach(i=>i.parentElement?.insertBefore(this.templateContent,i.nextSibling))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(i=>i.append(this.templateContent))},before(){this.removeDuplicateTargetSiblings(),this.targetElements.forEach(i=>i.parentElement?.insertBefore(this.templateContent,i))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(i=>i.prepend(this.templateContent))},remove(){this.targetElements.forEach(i=>i.remove())},replace(){let i=this.getAttribute("method");this.targetElements.forEach(e=>{i==="morph"?Wn(e,this.templateContent):e.replaceWith(this.templateContent)})},update(){let i=this.getAttribute("method");this.targetElements.forEach(e=>{i==="morph"?gl(e,this.templateContent):(e.innerHTML="",e.append(this.templateContent))})},refresh(){let i=this.getAttribute("method"),e=this.requestId,t=this.getAttribute("scroll");Me.refresh(this.baseURI,{method:i,requestId:e,scroll:t})}},cl=class i extends HTMLElement{static async renderElement(e){await e.performAction()}async connectedCallback(){try{await this.render()}catch(e){console.error(e)}finally{this.disconnect()}}async render(){return this.renderPromise??=(async()=>{let e=this.beforeRenderEvent;this.dispatchEvent(e)&&(await as(),await e.detail.render(this))})()}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(e=>e.remove())}get duplicateChildren(){let e=this.targetElements.flatMap(r=>[...r.children]).filter(r=>!!r.getAttribute("id")),t=[...this.templateContent?.children||[]].filter(r=>!!r.getAttribute("id")).map(r=>r.getAttribute("id"));return e.filter(r=>t.includes(r.getAttribute("id")))}removeDuplicateTargetSiblings(){this.duplicateSiblings.forEach(e=>e.remove())}get duplicateSiblings(){let e=this.targetElements.flatMap(r=>[...r.parentElement.children]).filter(r=>!!r.id),t=[...this.templateContent?.children||[]].filter(r=>!!r.id).map(r=>r.id);return e.filter(r=>t.includes(r.id))}get performAction(){if(this.action){let e=Ih[this.action];if(e)return e;this.#e("unknown action")}this.#e("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;this.#e("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){let e=this.ownerDocument.createElement("template");return this.appendChild(e),e}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.#e("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}#e(e){throw new Error(`${this.description}: ${e}`)}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:i.renderElement}})}get targetElementsById(){let e=this.ownerDocument?.getElementById(this.target);return e!==null?[e]:[]}get targetElementsByQuery(){let e=this.ownerDocument?.querySelectorAll(this.targets);return e.length!==0?Array.prototype.slice.call(e):[]}},ul=class extends HTMLElement{streamSource=null;connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),Rh(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),Lh(this.streamSource))}get src(){return this.getAttribute("src")||""}};Mt.delegateConstructor=ll;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",Mt);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",cl);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",ul);(()=>{let i=document.currentScript;if(!i||i.hasAttribute("data-turbo-suppress-warning"))return;let e=i.parentElement;for(;e;){if(e==document.body)return console.warn(gh`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,i.outerHTML);e=e.parentElement}})();window.Turbo={...rv,StreamActions:Ih};Mh();var bl=class{constructor(e,t,r){this.eventTarget=e,this.eventName=t,this.eventOptions=r,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){let t=sv(e);for(let r of this.bindings){if(t.immediatePropagationStopped)break;r.handleEvent(t)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((e,t)=>{let r=e.index,s=t.index;return r<s?-1:r>s?1:0})}};function sv(i){if("immediatePropagationStopped"in i)return i;{let{stopImmediatePropagation:e}=i;return Object.assign(i,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}var vl=class{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(e=>e.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(e=>e.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((e,t)=>e.concat(Array.from(t.values())),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,r={}){this.application.handleError(e,`Error ${t}`,r)}clearEventListenersForBinding(e){let t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){let{eventTarget:t,eventName:r,eventOptions:s}=e,n=this.fetchEventListenerMapForEventTarget(t),o=this.cacheKey(r,s);n.delete(o),n.size==0&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){let{eventTarget:t,eventName:r,eventOptions:s}=e;return this.fetchEventListener(t,r,s)}fetchEventListener(e,t,r){let s=this.fetchEventListenerMapForEventTarget(e),n=this.cacheKey(t,r),o=s.get(n);return o||(o=this.createEventListener(e,t,r),s.set(n,o)),o}createEventListener(e,t,r){let s=new bl(e,t,r);return this.started&&s.connect(),s}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){let r=[e];return Object.keys(t).sort().forEach(s=>{r.push(`${t[s]?"":"!"}${s}`)}),r.join(":")}},nv={stop({event:i,value:e}){return e&&i.stopPropagation(),!0},prevent({event:i,value:e}){return e&&i.preventDefault(),!0},self({event:i,value:e,element:t}){return e?t===i.target:!0}},ov=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function av(i){let t=i.trim().match(ov)||[],r=t[2],s=t[3];return s&&!["keydown","keyup","keypress"].includes(r)&&(r+=`.${s}`,s=""),{eventTarget:lv(t[4]),eventName:r,eventOptions:t[7]?cv(t[7]):{},identifier:t[5],methodName:t[6],keyFilter:t[1]||s}}function lv(i){if(i=="window")return window;if(i=="document")return document}function cv(i){return i.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}function uv(i){if(i==window)return"window";if(i==document)return"document"}function zl(i){return i.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())}function yl(i){return zl(i.replace(/--/g,"-").replace(/__/g,"_"))}function gs(i){return i.charAt(0).toUpperCase()+i.slice(1)}function $h(i){return i.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)}function hv(i){return i.match(/[^\s]+/g)||[]}function Dh(i){return i!=null}function wl(i,e){return Object.prototype.hasOwnProperty.call(i,e)}var Nh=["meta","ctrl","alt","shift"],Sl=class{constructor(e,t,r,s){this.element=e,this.index=t,this.eventTarget=r.eventTarget||e,this.eventName=r.eventName||dv(e)||Gn("missing event name"),this.eventOptions=r.eventOptions||{},this.identifier=r.identifier||Gn("missing identifier"),this.methodName=r.methodName||Gn("missing method name"),this.keyFilter=r.keyFilter||"",this.schema=s}static forToken(e,t){return new this(e.element,e.index,av(e.content),t)}toString(){let e=this.keyFilter?`.${this.keyFilter}`:"",t=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(e){if(!this.keyFilter)return!1;let t=this.keyFilter.split("+");if(this.keyFilterDissatisfied(e,t))return!0;let r=t.filter(s=>!Nh.includes(s))[0];return r?(wl(this.keyMappings,r)||Gn(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[r].toLowerCase()!==e.key.toLowerCase()):!1}shouldIgnoreMouseEvent(e){if(!this.keyFilter)return!1;let t=[this.keyFilter];return!!this.keyFilterDissatisfied(e,t)}get params(){let e={},t=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(let{name:r,value:s}of Array.from(this.element.attributes)){let n=r.match(t),o=n&&n[1];o&&(e[zl(o)]=pv(s))}return e}get eventTargetName(){return uv(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(e,t){let[r,s,n,o]=Nh.map(a=>t.includes(a));return e.metaKey!==r||e.ctrlKey!==s||e.altKey!==n||e.shiftKey!==o}},Bh={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:i=>i.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function dv(i){let e=i.tagName.toLowerCase();if(e in Bh)return Bh[e](i)}function Gn(i){throw new Error(i)}function pv(i){try{return JSON.parse(i)}catch{return i}}var El=class{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){let t=this.prepareActionEvent(e);this.willBeInvokedByEvent(e)&&this.applyEventModifiers(t)&&this.invokeWithEvent(t)}get eventName(){return this.action.eventName}get method(){let e=this.controller[this.methodName];if(typeof e=="function")return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){let{element:t}=this.action,{actionDescriptorFilters:r}=this.context.application,{controller:s}=this.context,n=!0;for(let[o,a]of Object.entries(this.eventOptions))if(o in r){let l=r[o];n=n&&l({name:o,value:a,event:e,element:t,controller:s})}else continue;return n}prepareActionEvent(e){return Object.assign(e,{params:this.action.params})}invokeWithEvent(e){let{target:t,currentTarget:r}=e;try{this.method.call(this.controller,e),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:r,action:this.methodName})}catch(s){let{identifier:n,controller:o,element:a,index:l}=this,h={identifier:n,controller:o,element:a,index:l,event:e};this.context.handleError(s,`invoking action "${this.action}"`,h)}}willBeInvokedByEvent(e){let t=e.target;return e instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(e)||e instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(e)?!1:this.element===t?!0:t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}},Xn=class{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(r=>this.processMutations(r))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){let e=new Set(this.matchElementsInTree());for(let t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(let t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){e.type=="attributes"?this.processAttributeChange(e.target,e.attributeName):e.type=="childList"&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){this.elements.has(e)?this.delegate.elementAttributeChanged&&this.matchElement(e)?this.delegate.elementAttributeChanged(e,t):this.removeElement(e):this.matchElement(e)&&this.addElement(e)}processRemovedNodes(e){for(let t of Array.from(e)){let r=this.elementFromNode(t);r&&this.processTree(r,this.removeElement)}}processAddedNodes(e){for(let t of Array.from(e)){let r=this.elementFromNode(t);r&&this.elementIsActive(r)&&this.processTree(r,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(let r of this.matchElementsInTree(e))t.call(this,r)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected!=this.element.isConnected?!1:this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}},Kn=class{constructor(e,t,r){this.attributeName=t,this.delegate=r,this.elementObserver=new Xn(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){let t=this.matchElement(e)?[e]:[],r=Array.from(e.querySelectorAll(this.selector));return t.concat(r)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}};function fv(i,e,t){Wh(i,e).add(t)}function mv(i,e,t){Wh(i,e).delete(t),gv(i,e)}function Wh(i,e){let t=i.get(e);return t||(t=new Set,i.set(e,t)),t}function gv(i,e){let t=i.get(e);t!=null&&t.size==0&&i.delete(e)}var wi=class{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((t,r)=>t.concat(Array.from(r)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((t,r)=>t+r.size,0)}add(e,t){fv(this.valuesByKey,e,t)}delete(e,t){mv(this.valuesByKey,e,t)}has(e,t){let r=this.valuesByKey.get(e);return r!=null&&r.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some(r=>r.has(e))}getValuesForKey(e){let t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter(([t,r])=>r.has(e)).map(([t,r])=>t)}};var xl=class{constructor(e,t,r,s){this._selector=t,this.details=s,this.elementObserver=new Xn(e,this),this.delegate=r,this.matchesByElement=new wi}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(e){this._selector=e,this.refresh()}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){let{selector:t}=this;if(t){let r=e.matches(t);return this.delegate.selectorMatchElement?r&&this.delegate.selectorMatchElement(e,this.details):r}else return!1}matchElementsInTree(e){let{selector:t}=this;if(t){let r=this.matchElement(e)?[e]:[],s=Array.from(e.querySelectorAll(t)).filter(n=>this.matchElement(n));return r.concat(s)}else return[]}elementMatched(e){let{selector:t}=this;t&&this.selectorMatched(e,t)}elementUnmatched(e){let t=this.matchesByElement.getKeysForValue(e);for(let r of t)this.selectorUnmatched(e,r)}elementAttributeChanged(e,t){let{selector:r}=this;if(r){let s=this.matchElement(e),n=this.matchesByElement.has(r,e);s&&!n?this.selectorMatched(e,r):!s&&n&&this.selectorUnmatched(e,r)}}selectorMatched(e,t){this.delegate.selectorMatched(e,t,this.details),this.matchesByElement.add(t,e)}selectorUnmatched(e,t){this.delegate.selectorUnmatched(e,t,this.details),this.matchesByElement.delete(t,e)}},Tl=class{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(r=>this.processMutations(r))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(let e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){let t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){let r=this.delegate.getStringMapKeyForAttribute(e);if(r!=null){this.stringMap.has(e)||this.stringMapKeyAdded(r,e);let s=this.element.getAttribute(e);if(this.stringMap.get(e)!=s&&this.stringMapValueChanged(s,r,t),s==null){let n=this.stringMap.get(e);this.stringMap.delete(e),n&&this.stringMapKeyRemoved(r,e,n)}else this.stringMap.set(e,s)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,r){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,r)}stringMapKeyRemoved(e,t,r){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,r)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(e=>e.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}},Yn=class{constructor(e,t,r){this.attributeObserver=new Kn(e,t,this),this.delegate=r,this.tokensByElement=new wi}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){let[t,r]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(r)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach(t=>this.tokenMatched(t))}tokensUnmatched(e){e.forEach(t=>this.tokenUnmatched(t))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){let t=this.tokensByElement.getValuesForKey(e),r=this.readTokensForElement(e),s=vv(t,r).findIndex(([n,o])=>!yv(n,o));return s==-1?[[],[]]:[t.slice(s),r.slice(s)]}readTokensForElement(e){let t=this.attributeName,r=e.getAttribute(t)||"";return bv(r,e,t)}};function bv(i,e,t){return i.trim().split(/\s+/).filter(r=>r.length).map((r,s)=>({element:e,attributeName:t,content:r,index:s}))}function vv(i,e){let t=Math.max(i.length,e.length);return Array.from({length:t},(r,s)=>[i[s],e[s]])}function yv(i,e){return i&&e&&i.index==e.index&&i.content==e.content}var Zn=class{constructor(e,t,r){this.tokenListObserver=new Yn(e,t,this),this.delegate=r,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){let{element:t}=e,{value:r}=this.fetchParseResultForToken(e);r&&(this.fetchValuesByTokenForElement(t).set(e,r),this.delegate.elementMatchedValue(t,r))}tokenUnmatched(e){let{element:t}=e,{value:r}=this.fetchParseResultForToken(e);r&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,r))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(t){return{error:t}}}},kl=class{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new Zn(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){let t=new El(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){let t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach(e=>this.delegate.bindingDisconnected(e,!0)),this.bindingsByAction.clear()}parseValueForToken(e){let t=Sl.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}},Al=class{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new Tl(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){let r=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,r.writer(this.receiver[e]),r.writer(r.defaultValue))}stringMapValueChanged(e,t,r){let s=this.valueDescriptorNameMap[t];e!==null&&(r===null&&(r=s.writer(s.defaultValue)),this.invokeChangedCallback(t,e,r))}stringMapKeyRemoved(e,t,r){let s=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,s.writer(this.receiver[e]),r):this.invokeChangedCallback(e,s.writer(s.defaultValue),r)}invokeChangedCallbacksForDefaultValues(){for(let{key:e,name:t,defaultValue:r,writer:s}of this.valueDescriptors)r!=null&&!this.controller.data.has(e)&&this.invokeChangedCallback(t,s(r),void 0)}invokeChangedCallback(e,t,r){let s=`${e}Changed`,n=this.receiver[s];if(typeof n=="function"){let o=this.valueDescriptorNameMap[e];try{let a=o.reader(t),l=r;r&&(l=o.reader(r)),n.call(this.receiver,a,l)}catch(a){throw a instanceof TypeError&&(a.message=`Stimulus Value "${this.context.identifier}.${o.name}" - ${a.message}`),a}}}get valueDescriptors(){let{valueDescriptorMap:e}=this;return Object.keys(e).map(t=>e[t])}get valueDescriptorNameMap(){let e={};return Object.keys(this.valueDescriptorMap).forEach(t=>{let r=this.valueDescriptorMap[t];e[r.name]=r}),e}hasValue(e){let t=this.valueDescriptorNameMap[e],r=`has${gs(t.name)}`;return this.receiver[r]}},Cl=class{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new wi}start(){this.tokenListObserver||(this.tokenListObserver=new Yn(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var r;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),(r=this.tokenListObserver)===null||r===void 0||r.pause(()=>this.delegate.targetConnected(e,t)))}disconnectTarget(e,t){var r;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),(r=this.tokenListObserver)===null||r===void 0||r.pause(()=>this.delegate.targetDisconnected(e,t)))}disconnectAllTargets(){for(let e of this.targetsByName.keys)for(let t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}};function bs(i,e){let t=Gh(i);return Array.from(t.reduce((r,s)=>(Sv(s,e).forEach(n=>r.add(n)),r),new Set))}function wv(i,e){return Gh(i).reduce((r,s)=>(r.push(...Ev(s,e)),r),[])}function Gh(i){let e=[];for(;i;)e.push(i),i=Object.getPrototypeOf(i);return e.reverse()}function Sv(i,e){let t=i[e];return Array.isArray(t)?t:[]}function Ev(i,e){let t=i[e];return t?Object.keys(t).map(r=>[r,t[r]]):[]}var _l=class{constructor(e,t){this.started=!1,this.context=e,this.delegate=t,this.outletsByName=new wi,this.outletElementsByName=new wi,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(e=>{this.setupSelectorObserverForOutlet(e),this.setupAttributeObserverForOutlet(e)}),this.started=!0,this.dependentContexts.forEach(e=>e.refresh()))}refresh(){this.selectorObserverMap.forEach(e=>e.refresh()),this.attributeObserverMap.forEach(e=>e.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(e=>e.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(e=>e.stop()),this.attributeObserverMap.clear())}selectorMatched(e,t,{outletName:r}){let s=this.getOutlet(e,r);s&&this.connectOutlet(s,e,r)}selectorUnmatched(e,t,{outletName:r}){let s=this.getOutletFromMap(e,r);s&&this.disconnectOutlet(s,e,r)}selectorMatchElement(e,{outletName:t}){let r=this.selector(t),s=this.hasOutlet(e,t),n=e.matches(`[${this.schema.controllerAttribute}~=${t}]`);return r?s&&n&&e.matches(r):!1}elementMatchedAttribute(e,t){let r=this.getOutletNameFromOutletAttributeName(t);r&&this.updateSelectorObserverForOutlet(r)}elementAttributeValueChanged(e,t){let r=this.getOutletNameFromOutletAttributeName(t);r&&this.updateSelectorObserverForOutlet(r)}elementUnmatchedAttribute(e,t){let r=this.getOutletNameFromOutletAttributeName(t);r&&this.updateSelectorObserverForOutlet(r)}connectOutlet(e,t,r){var s;this.outletElementsByName.has(r,t)||(this.outletsByName.add(r,e),this.outletElementsByName.add(r,t),(s=this.selectorObserverMap.get(r))===null||s===void 0||s.pause(()=>this.delegate.outletConnected(e,t,r)))}disconnectOutlet(e,t,r){var s;this.outletElementsByName.has(r,t)&&(this.outletsByName.delete(r,e),this.outletElementsByName.delete(r,t),(s=this.selectorObserverMap.get(r))===null||s===void 0||s.pause(()=>this.delegate.outletDisconnected(e,t,r)))}disconnectAllOutlets(){for(let e of this.outletElementsByName.keys)for(let t of this.outletElementsByName.getValuesForKey(e))for(let r of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(r,t,e)}updateSelectorObserverForOutlet(e){let t=this.selectorObserverMap.get(e);t&&(t.selector=this.selector(e))}setupSelectorObserverForOutlet(e){let t=this.selector(e),r=new xl(document.body,t,this,{outletName:e});this.selectorObserverMap.set(e,r),r.start()}setupAttributeObserverForOutlet(e){let t=this.attributeNameForOutletName(e),r=new Kn(this.scope.element,t,this);this.attributeObserverMap.set(e,r),r.start()}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}attributeNameForOutletName(e){return this.scope.schema.outletAttributeForScope(this.identifier,e)}getOutletNameFromOutletAttributeName(e){return this.outletDefinitions.find(t=>this.attributeNameForOutletName(t)===e)}get outletDependencies(){let e=new wi;return this.router.modules.forEach(t=>{let r=t.definition.controllerConstructor;bs(r,"outlets").forEach(n=>e.add(n,t.identifier))}),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){let e=this.dependentControllerIdentifiers;return this.router.contexts.filter(t=>e.includes(t.identifier))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find(r=>r.element===e)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}},Fl=class{constructor(e,t){this.logDebugActivity=(r,s={})=>{let{identifier:n,controller:o,element:a}=this;s=Object.assign({identifier:n,controller:o,element:a},s),this.application.logDebugActivity(this.identifier,r,s)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new kl(this,this.dispatcher),this.valueObserver=new Al(this,this.controller),this.targetObserver=new Cl(this,this),this.outletObserver=new _l(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(r){this.handleError(r,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,r={}){let{identifier:s,controller:n,element:o}=this;r=Object.assign({identifier:s,controller:n,element:o},r),this.application.handleError(e,`Error ${t}`,r)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,r){this.invokeControllerMethod(`${yl(r)}OutletConnected`,e,t)}outletDisconnected(e,t,r){this.invokeControllerMethod(`${yl(r)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){let r=this.controller;typeof r[e]=="function"&&r[e](...t)}};function xv(i){return Tv(i,kv(i))}function Tv(i,e){let t=Fv(i),r=Av(i.prototype,e);return Object.defineProperties(t.prototype,r),t}function kv(i){return bs(i,"blessings").reduce((t,r)=>{let s=r(i);for(let n in s){let o=t[n]||{};t[n]=Object.assign(o,s[n])}return t},{})}function Av(i,e){return _v(e).reduce((t,r)=>{let s=Cv(i,e,r);return s&&Object.assign(t,{[r]:s}),t},{})}function Cv(i,e,t){let r=Object.getOwnPropertyDescriptor(i,t);if(!(r&&"value"in r)){let n=Object.getOwnPropertyDescriptor(e,t).value;return r&&(n.get=r.get||n.get,n.set=r.set||n.set),n}}var _v=typeof Object.getOwnPropertySymbols=="function"?i=>[...Object.getOwnPropertyNames(i),...Object.getOwnPropertySymbols(i)]:Object.getOwnPropertyNames,Fv=(()=>{function i(t){function r(){return Reflect.construct(t,arguments,new.target)}return r.prototype=Object.create(t.prototype,{constructor:{value:r}}),Reflect.setPrototypeOf(r,t),r}function e(){let r=i(function(){this.a.call(this)});return r.prototype.a=function(){},new r}try{return e(),i}catch{return r=>class extends r{}}})();function Pv(i){return{identifier:i.identifier,controllerConstructor:xv(i.controllerConstructor)}}var Pl=class{constructor(e,t){this.application=e,this.definition=Pv(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){let t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){let t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new Fl(this,e),this.contextsByScope.set(e,t)),t}},Ol=class{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){let t=this.data.get(this.getDataKey(e))||"";return hv(t)}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}},Ml=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){let t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){let r=this.getAttributeNameForKey(e);return this.element.setAttribute(r,t),this.get(e)}has(e){let t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){let t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}else return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${$h(e)}`}},Rl=class{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,r){let s=this.warnedKeysByObject.get(e);s||(s=new Set,this.warnedKeysByObject.set(e,s)),s.has(t)||(s.add(t),this.logger.warn(r,e))}};function Ll(i,e){return`[${i}~="${e}"]`}var Il=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,r)=>t||this.findTarget(r)||this.findLegacyTarget(r),void 0)}findAll(...e){return e.reduce((t,r)=>[...t,...this.findAllTargets(r),...this.findAllLegacyTargets(r)],[])}findTarget(e){let t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){let t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){let t=this.schema.targetAttributeForScope(this.identifier);return Ll(t,e)}findLegacyTarget(e){let t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){let t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map(r=>this.deprecate(r,e))}getLegacySelectorForTargetName(e){let t=`${this.identifier}.${e}`;return Ll(this.schema.targetAttribute,t)}deprecate(e,t){if(e){let{identifier:r}=this,s=this.schema.targetAttribute,n=this.schema.targetAttributeForScope(r);this.guide.warn(e,`target:${t}`,`Please replace ${s}="${r}.${t}" with ${n}="${t}". The ${s} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}},Dl=class{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,r)=>t||this.findOutlet(r),void 0)}findAll(...e){return e.reduce((t,r)=>[...t,...this.findAllOutlets(r)],[])}getSelectorForOutletName(e){let t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){let t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){let t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter(s=>this.matchesElement(s,e,t))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter(s=>this.matchesElement(s,e,t))}matchesElement(e,t,r){let s=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(t)&&s.split(" ").includes(r)}},Nl=class i{constructor(e,t,r,s){this.targets=new Il(this),this.classes=new Ol(this),this.data=new Ml(this),this.containsElement=n=>n.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=r,this.guide=new Rl(s),this.outlets=new Dl(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return Ll(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new i(this.schema,document.documentElement,this.identifier,this.guide.logger)}},Bl=class{constructor(e,t,r){this.element=e,this.schema=t,this.delegate=r,this.valueListObserver=new Zn(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){let{element:t,content:r}=e;return this.parseValueForElementAndIdentifier(t,r)}parseValueForElementAndIdentifier(e,t){let r=this.fetchScopesByIdentifierForElement(e),s=r.get(t);return s||(s=this.delegate.createScopeForElementAndIdentifier(e,t),r.set(t,s)),s}elementMatchedValue(e,t){let r=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,r),r==1&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){let r=this.scopeReferenceCounts.get(t);r&&(this.scopeReferenceCounts.set(t,r-1),r==1&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}},Ul=class{constructor(e){this.application=e,this.scopeObserver=new Bl(this.element,this.schema,this),this.scopesByIdentifier=new wi,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((e,t)=>e.concat(t.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);let t=new Pl(this.application,e);this.connectModule(t);let r=e.controllerConstructor.afterLoad;r&&r.call(e.controllerConstructor,e.identifier,this.application)}unloadIdentifier(e){let t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){let r=this.modulesByIdentifier.get(t);if(r)return r.contexts.find(s=>s.element==e)}proposeToConnectScopeForElementAndIdentifier(e,t){let r=this.scopeObserver.parseValueForElementAndIdentifier(e,t);r?this.scopeObserver.elementMatchedValue(r.element,r):console.error(`Couldn't find or create scope for identifier: "${t}" and element:`,e)}handleError(e,t,r){this.application.handleError(e,t,r)}createScopeForElementAndIdentifier(e,t){return new Nl(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(r=>e.connectContextForScope(r))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(r=>e.disconnectContextForScope(r))}},Ov={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:i=>`data-${i}-target`,outletAttributeForScope:(i,e)=>`data-${i}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},Uh("abcdefghijklmnopqrstuvwxyz".split("").map(i=>[i,i]))),Uh("0123456789".split("").map(i=>[i,i])))};function Uh(i){return i.reduce((e,[t,r])=>Object.assign(Object.assign({},e),{[t]:r}),{})}var Qn=class{constructor(e=document.documentElement,t=Ov){this.logger=console,this.debug=!1,this.logDebugActivity=(r,s,n={})=>{this.debug&&this.logFormattedMessage(r,s,n)},this.element=e,this.schema=t,this.dispatcher=new vl(this),this.router=new Ul(this),this.actionDescriptorFilters=Object.assign({},nv)}static start(e,t){let r=new this(e,t);return r.start(),r}async start(){await Mv(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(s=>{s.controllerConstructor.shouldLoad&&this.router.loadDefinition(s)})}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(s=>this.router.unloadIdentifier(s))}get controllers(){return this.router.contexts.map(e=>e.controller)}getControllerForElementAndIdentifier(e,t){let r=this.router.getContextForElementAndIdentifier(e,t);return r?r.controller:null}handleError(e,t,r){var s;this.logger.error(`%s

%o

%o`,t,e,r),(s=window.onerror)===null||s===void 0||s.call(window,t,"",0,0,e)}logFormattedMessage(e,t,r={}){r=Object.assign({application:this},r),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},r)),this.logger.groupEnd()}};function Mv(){return new Promise(i=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>i()):i()})}function Rv(i){return bs(i,"classes").reduce((t,r)=>Object.assign(t,Lv(r)),{})}function Lv(i){return{[`${i}Class`]:{get(){let{classes:e}=this;if(e.has(i))return e.get(i);{let t=e.getAttributeName(i);throw new Error(`Missing attribute "${t}"`)}}},[`${i}Classes`]:{get(){return this.classes.getAll(i)}},[`has${gs(i)}Class`]:{get(){return this.classes.has(i)}}}}function Iv(i){return bs(i,"outlets").reduce((t,r)=>Object.assign(t,Dv(r)),{})}function zh(i,e,t){return i.application.getControllerForElementAndIdentifier(e,t)}function Hh(i,e,t){let r=zh(i,e,t);if(r||(i.application.router.proposeToConnectScopeForElementAndIdentifier(e,t),r=zh(i,e,t),r))return r}function Dv(i){let e=yl(i);return{[`${e}Outlet`]:{get(){let t=this.outlets.find(i),r=this.outlets.getSelectorForOutletName(i);if(t){let s=Hh(this,t,i);if(s)return s;throw new Error(`The provided outlet element is missing an outlet controller "${i}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${i}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${r}".`)}},[`${e}Outlets`]:{get(){let t=this.outlets.findAll(i);return t.length>0?t.map(r=>{let s=Hh(this,r,i);if(s)return s;console.warn(`The provided outlet element is missing an outlet controller "${i}" instance for host controller "${this.identifier}"`,r)}).filter(r=>r):[]}},[`${e}OutletElement`]:{get(){let t=this.outlets.find(i),r=this.outlets.getSelectorForOutletName(i);if(t)return t;throw new Error(`Missing outlet element "${i}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${r}".`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(i)}},[`has${gs(e)}Outlet`]:{get(){return this.outlets.has(i)}}}}function Nv(i){return bs(i,"targets").reduce((t,r)=>Object.assign(t,Bv(r)),{})}function Bv(i){return{[`${i}Target`]:{get(){let e=this.targets.find(i);if(e)return e;throw new Error(`Missing target element "${i}" for "${this.identifier}" controller`)}},[`${i}Targets`]:{get(){return this.targets.findAll(i)}},[`has${gs(i)}Target`]:{get(){return this.targets.has(i)}}}}function Uv(i){let e=wv(i,"values"),t={valueDescriptorMap:{get(){return e.reduce((r,s)=>{let n=Xh(s,this.identifier),o=this.data.getAttributeNameForKey(n.key);return Object.assign(r,{[o]:n})},{})}}};return e.reduce((r,s)=>Object.assign(r,zv(s)),t)}function zv(i,e){let t=Xh(i,e),{key:r,name:s,reader:n,writer:o}=t;return{[s]:{get(){let a=this.data.get(r);return a!==null?n(a):t.defaultValue},set(a){a===void 0?this.data.delete(r):this.data.set(r,o(a))}},[`has${gs(s)}`]:{get(){return this.data.has(r)||t.hasCustomDefaultValue}}}}function Xh([i,e],t){return Vv({controller:t,token:i,typeDefinition:e})}function Jn(i){switch(i){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function ms(i){switch(typeof i){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(i))return"array";if(Object.prototype.toString.call(i)==="[object Object]")return"object"}function Hv(i){let{controller:e,token:t,typeObject:r}=i,s=Dh(r.type),n=Dh(r.default),o=s&&n,a=s&&!n,l=!s&&n,h=Jn(r.type),f=ms(i.typeObject.default);if(a)return h;if(l)return f;if(h!==f){let m=e?`${e}.${t}`:t;throw new Error(`The specified default value for the Stimulus Value "${m}" must match the defined type "${h}". The provided default value of "${r.default}" is of type "${f}".`)}if(o)return h}function jv(i){let{controller:e,token:t,typeDefinition:r}=i,n=Hv({controller:e,token:t,typeObject:r}),o=ms(r),a=Jn(r),l=n||o||a;if(l)return l;let h=e?`${e}.${r}`:t;throw new Error(`Unknown value type "${h}" for "${t}" value`)}function qv(i){let e=Jn(i);if(e)return jh[e];let t=wl(i,"default"),r=wl(i,"type"),s=i;if(t)return s.default;if(r){let{type:n}=s,o=Jn(n);if(o)return jh[o]}return i}function Vv(i){let{token:e,typeDefinition:t}=i,r=`${$h(e)}-value`,s=jv(i);return{type:s,key:r,name:zl(r),get defaultValue(){return qv(t)},get hasCustomDefaultValue(){return ms(t)!==void 0},reader:$v[s],writer:qh[s]||qh.default}}var jh={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},$v={array(i){let e=JSON.parse(i);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${i}" of type "${ms(e)}"`);return e},boolean(i){return!(i=="0"||String(i).toLowerCase()=="false")},number(i){return Number(i.replace(/_/g,""))},object(i){let e=JSON.parse(i);if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${i}" of type "${ms(e)}"`);return e},string(i){return i}},qh={default:Wv,array:Vh,object:Vh};function Vh(i){return JSON.stringify(i)}function Wv(i){return`${i}`}var G=class{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:r={},prefix:s=this.identifier,bubbles:n=!0,cancelable:o=!0}={}){let a=s?`${s}:${e}`:e,l=new CustomEvent(a,{detail:r,bubbles:n,cancelable:o});return t.dispatchEvent(l),l}};G.blessings=[Rv,Nv,Uv,Iv];G.targets=[];G.outlets=[];G.values={};var eo=class extends G{static targets=["openIcon","closeIcon"];static outlets=["sidebar"];static values={placement:{type:String,default:"left"},bodyScrolling:{type:Boolean,default:!1},backdrop:{type:Boolean,default:!0},edge:{type:Boolean,default:!1},edgeOffset:{type:String,default:"bottom-[60px]"}};static classes={backdrop:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-30"};initialize(){this.visible=!1,this.handleEscapeKey=this.handleEscapeKey.bind(this)}connect(){document.addEventListener("keydown",this.handleEscapeKey)}sidebarOutletConnected(){this.#e(this.sidebarOutlet.element)}disconnect(){this.#i(),document.removeEventListener("keydown",this.handleEscapeKey),this.bodyScrollingValue||document.body.classList.remove("overflow-hidden")}#e(i){i.setAttribute("aria-hidden","true"),i.classList.add("transition-transform"),this.#r(this.placementValue).base.forEach(e=>{i.classList.add(e)})}toggleDrawer(){this.visible?this.hideDrawer():this.showDrawer()}showDrawer(){this.edgeValue?this.#o(`${this.placementValue}-edge`,!0):this.#n(this.placementValue,!0),this.openIconTarget.classList.add("hidden"),this.openIconTarget.setAttribute("aria-hidden","true"),this.closeIconTarget.classList.remove("hidden"),this.closeIconTarget.setAttribute("aria-hidden","false"),this.sidebarOutlet.element.setAttribute("aria-modal","true"),this.sidebarOutlet.element.setAttribute("role","dialog"),this.sidebarOutlet.element.removeAttribute("aria-hidden"),this.bodyScrollingValue||document.body.classList.add("overflow-hidden"),this.backdropValue&&this.#t(),this.visible=!0,this.dispatch("show")}hideDrawer(){this.edgeValue?this.#o(`${this.placementValue}-edge`,!1):this.#n(this.placementValue,!1),this.openIconTarget.classList.remove("hidden"),this.openIconTarget.setAttribute("aria-hidden","false"),this.closeIconTarget.classList.add("hidden"),this.closeIconTarget.setAttribute("aria-hidden","true"),this.sidebarOutlet.element.setAttribute("aria-hidden","true"),this.sidebarOutlet.element.removeAttribute("aria-modal"),this.sidebarOutlet.element.removeAttribute("role"),this.bodyScrollingValue||document.body.classList.remove("overflow-hidden"),this.backdropValue&&this.#i(),this.visible=!1,this.dispatch("hide")}handleEscapeKey(i){i.key==="Escape"&&this.visible&&this.hideDrawer()}#t(){if(!this.visible){let i=document.createElement("div");i.setAttribute("data-drawer-backdrop",""),i.classList.add(...this.constructor.classes.backdrop.split(" ")),i.addEventListener("click",()=>this.hideDrawer()),document.body.appendChild(i)}}#i(){let i=document.querySelector("[data-drawer-backdrop]");i&&i.remove()}#r(i){let e={top:{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]},right:{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]},bottom:{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]},left:{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]},"bottom-edge":{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this.edgeOffsetValue]}};return e[i]||e.left}#n(i,e){let t=this.#r(i);e?(t.active.forEach(r=>this.sidebarOutlet.element.classList.add(r)),t.inactive.forEach(r=>this.sidebarOutlet.element.classList.remove(r))):(t.active.forEach(r=>this.sidebarOutlet.element.classList.remove(r)),t.inactive.forEach(r=>this.sidebarOutlet.element.classList.add(r)))}#o(i,e){this.#n(i,e)}};var to=class extends G{static targets=["target","template","addButton"];static values={wrapperSelector:{type:String,default:".nested-resource-form-fields"},limit:Number};connect(){this.updateState()}add(i){i.preventDefault();let e=this.templateTarget.innerHTML.replace(/NEW_RECORD/g,new Date().getTime().toString());this.targetTarget.insertAdjacentHTML("beforebegin",e);let t=new CustomEvent("nested-resource-form-fields:add",{bubbles:!0});this.element.dispatchEvent(t),this.updateState()}remove(i){i.preventDefault();let e=i.target.closest(this.wrapperSelectorValue);if(e.dataset.newRecord!==void 0)e.remove();else{e.style.display="none",e.classList.remove(...e.classList);let r=e.querySelector("input[name*='_destroy']");r.value="1"}let t=new CustomEvent("nested-resource-form-fields:remove",{bubbles:!0});this.element.dispatchEvent(t),this.updateState()}updateState(){!this.hasAddButtonTarget||this.limitValue==0||(this.childCount>=this.limitValue?this.addButtonTarget.style.display="none":this.addButtonTarget.style.display="initial")}get childCount(){return this.element.querySelectorAll(this.wrapperSelectorValue).length}};var io=class extends G{connect(){}preSubmit(){let i=document.createElement("input");i.type="hidden",i.name="pre_submit",i.value="true",this.element.appendChild(i),this.element.setAttribute("novalidate",""),this.submit()}submit(){this.element.requestSubmit()}};var ke="top",ze="bottom",Re="right",Fe="left",ro="auto",Li=[ke,ze,Re,Fe],Si="start",er="end",Kh="clippingParents",so="viewport",Fr="popper",Yh="reference",Hl=Li.reduce(function(i,e){return i.concat([e+"-"+Si,e+"-"+er])},[]),no=[].concat(Li,[ro]).reduce(function(i,e){return i.concat([e,e+"-"+Si,e+"-"+er])},[]),Gv="beforeRead",Xv="read",Kv="afterRead",Yv="beforeMain",Zv="main",Qv="afterMain",Jv="beforeWrite",ey="write",ty="afterWrite",Zh=[Gv,Xv,Kv,Yv,Zv,Qv,Jv,ey,ty];function $e(i){return i?(i.nodeName||"").toLowerCase():null}function me(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var e=i.ownerDocument;return e&&e.defaultView||window}return i}function Rt(i){var e=me(i).Element;return i instanceof e||i instanceof Element}function He(i){var e=me(i).HTMLElement;return i instanceof e||i instanceof HTMLElement}function Pr(i){if(typeof ShadowRoot>"u")return!1;var e=me(i).ShadowRoot;return i instanceof e||i instanceof ShadowRoot}function iy(i){var e=i.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},s=e.attributes[t]||{},n=e.elements[t];!He(n)||!$e(n)||(Object.assign(n.style,r),Object.keys(s).forEach(function(o){var a=s[o];a===!1?n.removeAttribute(o):n.setAttribute(o,a===!0?"":a)}))})}function ry(i){var e=i.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],n=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),a=o.reduce(function(l,h){return l[h]="",l},{});!He(s)||!$e(s)||(Object.assign(s.style,a),Object.keys(n).forEach(function(l){s.removeAttribute(l)}))})}}var Qh={name:"applyStyles",enabled:!0,phase:"write",fn:iy,effect:ry,requires:["computeStyles"]};function We(i){return i.split("-")[0]}var qt=Math.max,tr=Math.min,Ei=Math.round;function Or(){var i=navigator.userAgentData;return i!=null&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function vs(){return!/^((?!chrome|android).)*safari/i.test(Or())}function Lt(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=i.getBoundingClientRect(),s=1,n=1;e&&He(i)&&(s=i.offsetWidth>0&&Ei(r.width)/i.offsetWidth||1,n=i.offsetHeight>0&&Ei(r.height)/i.offsetHeight||1);var o=Rt(i)?me(i):window,a=o.visualViewport,l=!vs()&&t,h=(r.left+(l&&a?a.offsetLeft:0))/s,f=(r.top+(l&&a?a.offsetTop:0))/n,m=r.width/s,y=r.height/n;return{width:m,height:y,top:f,right:h+m,bottom:f+y,left:h,x:h,y:f}}function ir(i){var e=Lt(i),t=i.offsetWidth,r=i.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:i.offsetLeft,y:i.offsetTop,width:t,height:r}}function ys(i,e){var t=e.getRootNode&&e.getRootNode();if(i.contains(e))return!0;if(t&&Pr(t)){var r=e;do{if(r&&i.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ot(i){return me(i).getComputedStyle(i)}function jl(i){return["table","td","th"].indexOf($e(i))>=0}function Ye(i){return((Rt(i)?i.ownerDocument:i.document)||window.document).documentElement}function xi(i){return $e(i)==="html"?i:i.assignedSlot||i.parentNode||(Pr(i)?i.host:null)||Ye(i)}function Jh(i){return!He(i)||ot(i).position==="fixed"?null:i.offsetParent}function sy(i){var e=/firefox/i.test(Or()),t=/Trident/i.test(Or());if(t&&He(i)){var r=ot(i);if(r.position==="fixed")return null}var s=xi(i);for(Pr(s)&&(s=s.host);He(s)&&["html","body"].indexOf($e(s))<0;){var n=ot(s);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||e&&n.willChange==="filter"||e&&n.filter&&n.filter!=="none")return s;s=s.parentNode}return null}function Vt(i){for(var e=me(i),t=Jh(i);t&&jl(t)&&ot(t).position==="static";)t=Jh(t);return t&&($e(t)==="html"||$e(t)==="body"&&ot(t).position==="static")?e:t||sy(i)||e}function rr(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function sr(i,e,t){return qt(i,tr(e,t))}function ed(i,e,t){var r=sr(i,e,t);return r>t?t:r}function ws(){return{top:0,right:0,bottom:0,left:0}}function Ss(i){return Object.assign({},ws(),i)}function Es(i,e){return e.reduce(function(t,r){return t[r]=i,t},{})}var ny=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Ss(typeof e!="number"?e:Es(e,Li))};function oy(i){var e,t=i.state,r=i.name,s=i.options,n=t.elements.arrow,o=t.modifiersData.popperOffsets,a=We(t.placement),l=rr(a),h=[Fe,Re].indexOf(a)>=0,f=h?"height":"width";if(!(!n||!o)){var m=ny(s.padding,t),y=ir(n),b=l==="y"?ke:Fe,k=l==="y"?ze:Re,F=t.rects.reference[f]+t.rects.reference[l]-o[l]-t.rects.popper[f],P=o[l]-t.rects.reference[l],M=Vt(n),A=M?l==="y"?M.clientHeight||0:M.clientWidth||0:0,_=F/2-P/2,S=m[b],E=A-y[f]-m[k],C=A/2-y[f]/2+_,O=sr(S,C,E),N=l;t.modifiersData[r]=(e={},e[N]=O,e.centerOffset=O-C,e)}}function ay(i){var e=i.state,t=i.options,r=t.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||ys(e.elements.popper,s)&&(e.elements.arrow=s))}var td={name:"arrow",enabled:!0,phase:"main",fn:oy,effect:ay,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function It(i){return i.split("-")[1]}var ly={top:"auto",right:"auto",bottom:"auto",left:"auto"};function cy(i,e){var t=i.x,r=i.y,s=e.devicePixelRatio||1;return{x:Ei(t*s)/s||0,y:Ei(r*s)/s||0}}function id(i){var e,t=i.popper,r=i.popperRect,s=i.placement,n=i.variation,o=i.offsets,a=i.position,l=i.gpuAcceleration,h=i.adaptive,f=i.roundOffsets,m=i.isFixed,y=o.x,b=y===void 0?0:y,k=o.y,F=k===void 0?0:k,P=typeof f=="function"?f({x:b,y:F}):{x:b,y:F};b=P.x,F=P.y;var M=o.hasOwnProperty("x"),A=o.hasOwnProperty("y"),_=Fe,S=ke,E=window;if(h){var C=Vt(t),O="clientHeight",N="clientWidth";if(C===me(t)&&(C=Ye(t),ot(C).position!=="static"&&a==="absolute"&&(O="scrollHeight",N="scrollWidth")),C=C,s===ke||(s===Fe||s===Re)&&n===er){S=ze;var z=m&&C===E&&E.visualViewport?E.visualViewport.height:C[O];F-=z-r.height,F*=l?1:-1}if(s===Fe||(s===ke||s===ze)&&n===er){_=Re;var V=m&&C===E&&E.visualViewport?E.visualViewport.width:C[N];b-=V-r.width,b*=l?1:-1}}var j=Object.assign({position:a},h&&ly),K=f===!0?cy({x:b,y:F},me(t)):{x:b,y:F};if(b=K.x,F=K.y,l){var te;return Object.assign({},j,(te={},te[S]=A?"0":"",te[_]=M?"0":"",te.transform=(E.devicePixelRatio||1)<=1?"translate("+b+"px, "+F+"px)":"translate3d("+b+"px, "+F+"px, 0)",te))}return Object.assign({},j,(e={},e[S]=A?F+"px":"",e[_]=M?b+"px":"",e.transform="",e))}function uy(i){var e=i.state,t=i.options,r=t.gpuAcceleration,s=r===void 0?!0:r,n=t.adaptive,o=n===void 0?!0:n,a=t.roundOffsets,l=a===void 0?!0:a,h={placement:We(e.placement),variation:It(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,id(Object.assign({},h,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,id(Object.assign({},h,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var rd={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:uy,data:{}};var oo={passive:!0};function hy(i){var e=i.state,t=i.instance,r=i.options,s=r.scroll,n=s===void 0?!0:s,o=r.resize,a=o===void 0?!0:o,l=me(e.elements.popper),h=[].concat(e.scrollParents.reference,e.scrollParents.popper);return n&&h.forEach(function(f){f.addEventListener("scroll",t.update,oo)}),a&&l.addEventListener("resize",t.update,oo),function(){n&&h.forEach(function(f){f.removeEventListener("scroll",t.update,oo)}),a&&l.removeEventListener("resize",t.update,oo)}}var sd={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:hy,data:{}};var dy={left:"right",right:"left",bottom:"top",top:"bottom"};function Mr(i){return i.replace(/left|right|bottom|top/g,function(e){return dy[e]})}var py={start:"end",end:"start"};function ao(i){return i.replace(/start|end/g,function(e){return py[e]})}function nr(i){var e=me(i),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function or(i){return Lt(Ye(i)).left+nr(i).scrollLeft}function ql(i,e){var t=me(i),r=Ye(i),s=t.visualViewport,n=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){n=s.width,o=s.height;var h=vs();(h||!h&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:n,height:o,x:a+or(i),y:l}}function Vl(i){var e,t=Ye(i),r=nr(i),s=(e=i.ownerDocument)==null?void 0:e.body,n=qt(t.scrollWidth,t.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=qt(t.scrollHeight,t.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-r.scrollLeft+or(i),l=-r.scrollTop;return ot(s||t).direction==="rtl"&&(a+=qt(t.clientWidth,s?s.clientWidth:0)-n),{width:n,height:o,x:a,y:l}}function ar(i){var e=ot(i),t=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+s+r)}function lo(i){return["html","body","#document"].indexOf($e(i))>=0?i.ownerDocument.body:He(i)&&ar(i)?i:lo(xi(i))}function Ii(i,e){var t;e===void 0&&(e=[]);var r=lo(i),s=r===((t=i.ownerDocument)==null?void 0:t.body),n=me(r),o=s?[n].concat(n.visualViewport||[],ar(r)?r:[]):r,a=e.concat(o);return s?a:a.concat(Ii(xi(o)))}function Rr(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function fy(i,e){var t=Lt(i,!1,e==="fixed");return t.top=t.top+i.clientTop,t.left=t.left+i.clientLeft,t.bottom=t.top+i.clientHeight,t.right=t.left+i.clientWidth,t.width=i.clientWidth,t.height=i.clientHeight,t.x=t.left,t.y=t.top,t}function nd(i,e,t){return e===so?Rr(ql(i,t)):Rt(e)?fy(e,t):Rr(Vl(Ye(i)))}function my(i){var e=Ii(xi(i)),t=["absolute","fixed"].indexOf(ot(i).position)>=0,r=t&&He(i)?Vt(i):i;return Rt(r)?e.filter(function(s){return Rt(s)&&ys(s,r)&&$e(s)!=="body"}):[]}function $l(i,e,t,r){var s=e==="clippingParents"?my(i):[].concat(e),n=[].concat(s,[t]),o=n[0],a=n.reduce(function(l,h){var f=nd(i,h,r);return l.top=qt(f.top,l.top),l.right=tr(f.right,l.right),l.bottom=tr(f.bottom,l.bottom),l.left=qt(f.left,l.left),l},nd(i,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function xs(i){var e=i.reference,t=i.element,r=i.placement,s=r?We(r):null,n=r?It(r):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(s){case ke:l={x:o,y:e.y-t.height};break;case ze:l={x:o,y:e.y+e.height};break;case Re:l={x:e.x+e.width,y:a};break;case Fe:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var h=s?rr(s):null;if(h!=null){var f=h==="y"?"height":"width";switch(n){case Si:l[h]=l[h]-(e[f]/2-t[f]/2);break;case er:l[h]=l[h]+(e[f]/2-t[f]/2);break;default:}}return l}function $t(i,e){e===void 0&&(e={});var t=e,r=t.placement,s=r===void 0?i.placement:r,n=t.strategy,o=n===void 0?i.strategy:n,a=t.boundary,l=a===void 0?Kh:a,h=t.rootBoundary,f=h===void 0?so:h,m=t.elementContext,y=m===void 0?Fr:m,b=t.altBoundary,k=b===void 0?!1:b,F=t.padding,P=F===void 0?0:F,M=Ss(typeof P!="number"?P:Es(P,Li)),A=y===Fr?Yh:Fr,_=i.rects.popper,S=i.elements[k?A:y],E=$l(Rt(S)?S:S.contextElement||Ye(i.elements.popper),l,f,o),C=Lt(i.elements.reference),O=xs({reference:C,element:_,strategy:"absolute",placement:s}),N=Rr(Object.assign({},_,O)),z=y===Fr?N:C,V={top:E.top-z.top+M.top,bottom:z.bottom-E.bottom+M.bottom,left:E.left-z.left+M.left,right:z.right-E.right+M.right},j=i.modifiersData.offset;if(y===Fr&&j){var K=j[s];Object.keys(V).forEach(function(te){var ie=[Re,ze].indexOf(te)>=0?1:-1,je=[ke,ze].indexOf(te)>=0?"y":"x";V[te]+=K[je]*ie})}return V}function Wl(i,e){e===void 0&&(e={});var t=e,r=t.placement,s=t.boundary,n=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,h=l===void 0?no:l,f=It(r),m=f?a?Hl:Hl.filter(function(k){return It(k)===f}):Li,y=m.filter(function(k){return h.indexOf(k)>=0});y.length===0&&(y=m);var b=y.reduce(function(k,F){return k[F]=$t(i,{placement:F,boundary:s,rootBoundary:n,padding:o})[We(F)],k},{});return Object.keys(b).sort(function(k,F){return b[k]-b[F]})}function gy(i){if(We(i)===ro)return[];var e=Mr(i);return[ao(i),e,ao(e)]}function by(i){var e=i.state,t=i.options,r=i.name;if(!e.modifiersData[r]._skip){for(var s=t.mainAxis,n=s===void 0?!0:s,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,h=t.padding,f=t.boundary,m=t.rootBoundary,y=t.altBoundary,b=t.flipVariations,k=b===void 0?!0:b,F=t.allowedAutoPlacements,P=e.options.placement,M=We(P),A=M===P,_=l||(A||!k?[Mr(P)]:gy(P)),S=[P].concat(_).reduce(function(Xe,Q){return Xe.concat(We(Q)===ro?Wl(e,{placement:Q,boundary:f,rootBoundary:m,padding:h,flipVariations:k,allowedAutoPlacements:F}):Q)},[]),E=e.rects.reference,C=e.rects.popper,O=new Map,N=!0,z=S[0],V=0;V<S.length;V++){var j=S[V],K=We(j),te=It(j)===Si,ie=[ke,ze].indexOf(K)>=0,je=ie?"width":"height",ge=$t(e,{placement:j,boundary:f,rootBoundary:m,altBoundary:y,padding:h}),De=ie?te?Re:Fe:te?ze:ke;E[je]>C[je]&&(De=Mr(De));var de=Mr(De),tt=[];if(n&&tt.push(ge[K]<=0),a&&tt.push(ge[De]<=0,ge[de]<=0),tt.every(function(Xe){return Xe})){z=j,N=!1;break}O.set(j,tt)}if(N)for(var Ct=k?3:1,re=function(Q){var it=S.find(function(_t){var be=O.get(_t);if(be)return be.slice(0,Q).every(function(Zt){return Zt})});if(it)return z=it,"break"},ft=Ct;ft>0;ft--){var se=re(ft);if(se==="break")break}e.placement!==z&&(e.modifiersData[r]._skip=!0,e.placement=z,e.reset=!0)}}var od={name:"flip",enabled:!0,phase:"main",fn:by,requiresIfExists:["offset"],data:{_skip:!1}};function ad(i,e,t){return t===void 0&&(t={x:0,y:0}),{top:i.top-e.height-t.y,right:i.right-e.width+t.x,bottom:i.bottom-e.height+t.y,left:i.left-e.width-t.x}}function ld(i){return[ke,Re,ze,Fe].some(function(e){return i[e]>=0})}function vy(i){var e=i.state,t=i.name,r=e.rects.reference,s=e.rects.popper,n=e.modifiersData.preventOverflow,o=$t(e,{elementContext:"reference"}),a=$t(e,{altBoundary:!0}),l=ad(o,r),h=ad(a,s,n),f=ld(l),m=ld(h);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:h,isReferenceHidden:f,hasPopperEscaped:m},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":m})}var cd={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:vy};function yy(i,e,t){var r=We(i),s=[Fe,ke].indexOf(r)>=0?-1:1,n=typeof t=="function"?t(Object.assign({},e,{placement:i})):t,o=n[0],a=n[1];return o=o||0,a=(a||0)*s,[Fe,Re].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function wy(i){var e=i.state,t=i.options,r=i.name,s=t.offset,n=s===void 0?[0,0]:s,o=no.reduce(function(f,m){return f[m]=yy(m,e.rects,n),f},{}),a=o[e.placement],l=a.x,h=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=h),e.modifiersData[r]=o}var ud={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:wy};function Sy(i){var e=i.state,t=i.name;e.modifiersData[t]=xs({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var hd={name:"popperOffsets",enabled:!0,phase:"read",fn:Sy,data:{}};function Gl(i){return i==="x"?"y":"x"}function Ey(i){var e=i.state,t=i.options,r=i.name,s=t.mainAxis,n=s===void 0?!0:s,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,h=t.rootBoundary,f=t.altBoundary,m=t.padding,y=t.tether,b=y===void 0?!0:y,k=t.tetherOffset,F=k===void 0?0:k,P=$t(e,{boundary:l,rootBoundary:h,padding:m,altBoundary:f}),M=We(e.placement),A=It(e.placement),_=!A,S=rr(M),E=Gl(S),C=e.modifiersData.popperOffsets,O=e.rects.reference,N=e.rects.popper,z=typeof F=="function"?F(Object.assign({},e.rects,{placement:e.placement})):F,V=typeof z=="number"?{mainAxis:z,altAxis:z}:Object.assign({mainAxis:0,altAxis:0},z),j=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,K={x:0,y:0};if(C){if(n){var te,ie=S==="y"?ke:Fe,je=S==="y"?ze:Re,ge=S==="y"?"height":"width",De=C[S],de=De+P[ie],tt=De-P[je],Ct=b?-N[ge]/2:0,re=A===Si?O[ge]:N[ge],ft=A===Si?-N[ge]:-O[ge],se=e.elements.arrow,Xe=b&&se?ir(se):{width:0,height:0},Q=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:ws(),it=Q[ie],_t=Q[je],be=sr(0,O[ge],Xe[ge]),Zt=_?O[ge]/2-Ct-be-it-V.mainAxis:re-be-it-V.mainAxis,li=_?-O[ge]/2+Ct+be+_t+V.mainAxis:ft+be+_t+V.mainAxis,Qt=e.elements.arrow&&Vt(e.elements.arrow),qi=Qt?S==="y"?Qt.clientTop||0:Qt.clientLeft||0:0,Bt=(te=j?.[S])!=null?te:0,Ci=De+Zt-Bt-qi,Ut=De+li-Bt,ci=sr(b?tr(de,Ci):de,De,b?qt(tt,Ut):tt);C[S]=ci,K[S]=ci-De}if(a){var ui,zt=S==="x"?ke:Fe,hi=S==="x"?ze:Re,rt=C[E],Jt=E==="y"?"height":"width",di=rt+P[zt],Vi=rt-P[hi],pi=[ke,Fe].indexOf(M)!==-1,ei=(ui=j?.[E])!=null?ui:0,Ht=pi?di:rt-O[Jt]-N[Jt]-ei+V.altAxis,st=pi?rt+O[Jt]+N[Jt]-ei-V.altAxis:Vi,fi=b&&pi?ed(Ht,rt,st):sr(b?Ht:di,rt,b?st:Vi);C[E]=fi,K[E]=fi-rt}e.modifiersData[r]=K}}var dd={name:"preventOverflow",enabled:!0,phase:"main",fn:Ey,requiresIfExists:["offset"]};function Xl(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function Kl(i){return i===me(i)||!He(i)?nr(i):Xl(i)}function xy(i){var e=i.getBoundingClientRect(),t=Ei(e.width)/i.offsetWidth||1,r=Ei(e.height)/i.offsetHeight||1;return t!==1||r!==1}function Yl(i,e,t){t===void 0&&(t=!1);var r=He(e),s=He(e)&&xy(e),n=Ye(e),o=Lt(i,s,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!t)&&(($e(e)!=="body"||ar(n))&&(a=Kl(e)),He(e)?(l=Lt(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):n&&(l.x=or(n))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function Ty(i){var e=new Map,t=new Set,r=[];i.forEach(function(n){e.set(n.name,n)});function s(n){t.add(n.name);var o=[].concat(n.requires||[],n.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&s(l)}}),r.push(n)}return i.forEach(function(n){t.has(n.name)||s(n)}),r}function Zl(i){var e=Ty(i);return Zh.reduce(function(t,r){return t.concat(e.filter(function(s){return s.phase===r}))},[])}function Ql(i){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(i())})})),e}}function Jl(i){var e=i.reduce(function(t,r){var s=t[r.name];return t[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var pd={placement:"bottom",modifiers:[],strategy:"absolute"};function fd(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function md(i){i===void 0&&(i={});var e=i,t=e.defaultModifiers,r=t===void 0?[]:t,s=e.defaultOptions,n=s===void 0?pd:s;return function(a,l,h){h===void 0&&(h=n);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},pd,n),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},m=[],y=!1,b={state:f,setOptions:function(M){var A=typeof M=="function"?M(f.options):M;F(),f.options=Object.assign({},n,f.options,A),f.scrollParents={reference:Rt(a)?Ii(a):a.contextElement?Ii(a.contextElement):[],popper:Ii(l)};var _=Zl(Jl([].concat(r,f.options.modifiers)));return f.orderedModifiers=_.filter(function(S){return S.enabled}),k(),b.update()},forceUpdate:function(){if(!y){var M=f.elements,A=M.reference,_=M.popper;if(fd(A,_)){f.rects={reference:Yl(A,Vt(_),f.options.strategy==="fixed"),popper:ir(_)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(V){return f.modifiersData[V.name]=Object.assign({},V.data)});for(var S=0;S<f.orderedModifiers.length;S++){if(f.reset===!0){f.reset=!1,S=-1;continue}var E=f.orderedModifiers[S],C=E.fn,O=E.options,N=O===void 0?{}:O,z=E.name;typeof C=="function"&&(f=C({state:f,options:N,name:z,instance:b})||f)}}}},update:Ql(function(){return new Promise(function(P){b.forceUpdate(),P(f)})}),destroy:function(){F(),y=!0}};if(!fd(a,l))return b;b.setOptions(h).then(function(P){!y&&h.onFirstUpdate&&h.onFirstUpdate(P)});function k(){f.orderedModifiers.forEach(function(P){var M=P.name,A=P.options,_=A===void 0?{}:A,S=P.effect;if(typeof S=="function"){var E=S({state:f,name:M,instance:b,options:_}),C=function(){};m.push(E||C)}})}function F(){m.forEach(function(P){return P()}),m=[]}return b}}var ky=[sd,hd,rd,Qh,ud,od,dd,td,cd],ec=md({defaultModifiers:ky});var co=class extends G{static targets=["trigger","menu"];static values={placement:{type:String,default:"bottom"}};connect(){this.visible=!1,this.initialized=!1,this.options={placement:this.placementValue,triggerType:"click",offsetSkidding:0,offsetDistance:10,delay:300,ignoreClickOutsideClass:!1},this.init()}init(){this.triggerTarget&&this.menuTarget&&!this.initialized&&(this.popperInstance=ec(this.triggerTarget,this.menuTarget,{strategy:"fixed",placement:this.options.placement,modifiers:[{name:"offset",options:{offset:[this.options.offsetSkidding,this.options.offsetDistance]}},{name:"flip",options:{fallbackPlacements:["bottom-end","bottom-start","top","top-end","top-start"],boundary:"viewport"}},{name:"preventOverflow",options:{boundary:"viewport",altAxis:!0,padding:8}}]}),this.setupEventListeners(),this.initialized=!0)}disconnect(){this.initialized&&(this.options.triggerType==="click"&&this.triggerTarget.removeEventListener("click",this.clickHandler),this.options.triggerType==="hover"&&(this.triggerTarget.removeEventListener("mouseenter",this.hoverShowTriggerHandler),this.menuTarget.removeEventListener("mouseenter",this.hoverShowMenuHandler),this.triggerTarget.removeEventListener("mouseleave",this.hoverHideHandler),this.menuTarget.removeEventListener("mouseleave",this.hoverHideHandler)),this.removeClickOutsideListener(),this.popperInstance.destroy(),this.initialized=!1)}setupEventListeners(){this.clickHandler=this.toggle.bind(this),this.hoverShowTriggerHandler=i=>{i.type==="click"?this.toggle():setTimeout(()=>{this.show()},this.options.delay)},this.hoverShowMenuHandler=()=>{this.show()},this.hoverHideHandler=()=>{setTimeout(()=>{this.menuTarget.matches(":hover")||this.hide()},this.options.delay)},this.options.triggerType==="click"?this.triggerTarget.addEventListener("click",this.clickHandler):this.options.triggerType==="hover"&&(this.triggerTarget.addEventListener("mouseenter",this.hoverShowTriggerHandler),this.menuTarget.addEventListener("mouseenter",this.hoverShowMenuHandler),this.triggerTarget.addEventListener("mouseleave",this.hoverHideHandler),this.menuTarget.addEventListener("mouseleave",this.hoverHideHandler))}setupClickOutsideListener(){this.clickOutsideHandler=i=>{let e=i.target,t=this.options.ignoreClickOutsideClass,r=!1;t&&document.querySelectorAll(`.${t}`).forEach(o=>{if(o.contains(e)){r=!0;return}});let s=e.closest(".flatpickr-calendar, .ss-main, .ss-content");e!==this.menuTarget&&!this.menuTarget.contains(e)&&!this.triggerTarget.contains(e)&&!r&&!s&&this.visible&&this.hide()},document.body.addEventListener("click",this.clickOutsideHandler,!0)}removeClickOutsideListener(){this.clickOutsideHandler&&document.body.removeEventListener("click",this.clickOutsideHandler,!0)}toggle(){this.visible?this.hide():this.show()}show(){this.menuTarget.classList.remove("hidden"),this.menuTarget.classList.add("block"),this.menuTarget.removeAttribute("aria-hidden"),this.popperInstance.setOptions(i=>({...i,modifiers:[...i.modifiers,{name:"eventListeners",enabled:!0}]})),this.setupClickOutsideListener(),this.popperInstance.update(),this.visible=!0}hide(){this.menuTarget.classList.remove("block"),this.menuTarget.classList.add("hidden"),this.menuTarget.setAttribute("aria-hidden","true"),this.popperInstance.setOptions(i=>({...i,modifiers:[...i.modifiers,{name:"eventListeners",enabled:!1}]})),this.removeClickOutsideListener(),this.visible=!1}};var uo=class extends G{static targets=["trigger","menu"];connect(){this.element.hasAttribute("data-visible")||this.element.setAttribute("data-visible","false"),this.#e()}toggle(){let i=this.element.getAttribute("data-visible")==="true";this.element.setAttribute("data-visible",(!i).toString()),this.#e()}#e(){this.element.getAttribute("data-visible")==="true"?(this.menuTarget.classList.remove("hidden"),this.triggerTarget.setAttribute("aria-expanded","true"),this.dispatch("expand")):(this.menuTarget.classList.add("hidden"),this.triggerTarget.setAttribute("aria-expanded","false"),this.dispatch("collapse"))}};var ho=class extends G{static values={after:Number};connect(){this.hasAfterValue&&this.afterValue>0&&(this.autoDismissTimeout=setTimeout(()=>{this.dismiss(),this.autoDismissTimeout=null},this.afterValue))}disconnect(){this.autoDismissTimeout&&clearTimeout(this.autoDismissTimeout),this.autoDismissTimeout=null}dismiss(){this.element.remove()}};var po=class extends G{static targets=["frame","refreshButton","backButton","homeButton","maximizeLink"];connect(){this.#t(),this.srcHistory=[],this.originalFrameSrc=this.frameTarget.src,this.hasRefreshButtonTarget&&(this.refreshButtonTarget.style.display="",this.refreshButtonClicked=this.refreshButtonClicked.bind(this),this.refreshButtonTarget.addEventListener("click",this.refreshButtonClicked)),this.hasBackButtonTarget&&(this.backButtonClicked=this.backButtonClicked.bind(this),this.backButtonTarget.addEventListener("click",this.backButtonClicked)),this.hasHomeButtonTarget&&(this.homeButtonClicked=this.homeButtonClicked.bind(this),this.homeButtonTarget.addEventListener("click",this.homeButtonClicked)),this.frameLoaded=this.frameLoaded.bind(this),this.frameTarget.addEventListener("turbo:frame-load",this.frameLoaded),this.frameLoading=this.frameLoading.bind(this),this.frameTarget.addEventListener("turbo:click",this.frameLoading),this.frameTarget.addEventListener("turbo:submit-start",this.frameLoading),this.frameFailed=this.frameFailed.bind(this),this.frameTarget.addEventListener("turbo:fetch-request-error",this.frameFailed)}disconnect(){this.hasRefreshButtonTarget&&this.refreshButtonTarget.removeEventListener("click",this.refreshButtonClicked),this.hasBackButtonTarget&&this.backButtonTarget.removeEventListener("click",this.backButtonClicked),this.hasHomeButtonTarget&&this.homeButtonTarget.removeEventListener("click",this.homeButtonClicked),this.frameTarget.removeEventListener("turbo:frame-load",this.frameLoaded),this.frameTarget.removeEventListener("turbo:click",this.frameLoading),this.frameTarget.removeEventListener("turbo:submit-start",this.frameLoading),this.frameTarget.removeEventListener("turbo:fetch-request-error",this.frameFailed)}frameLoading(i){this.#t()}frameFailed(i){this.#i()}frameLoaded(i){this.#i();let e=i.target.src;this.#e(e)}refreshButtonClicked(i){this.frameLoading(null),this.frameTarget.reload()}backButtonClicked(i){this.frameLoading(null),this.srcHistory.pop(),this.frameTarget.src=this.currentSrc}homeButtonClicked(i){this.frameLoading(null),this.frameTarget.src=this.originalFrameSrc}get currentSrc(){return this.srcHistory[this.srcHistory.length-1]}#e(i){i==this.currentSrc||(i==this.originalFrameSrc?this.srcHistory=[i]:this.srcHistory.push(i)),this.#r(),this.hasMaximizeLinkTarget&&(this.maximizeLinkTarget.href=i)}#t(){this.hasRefreshButtonTarget&&this.refreshButtonTarget.classList.add("motion-safe:animate-spin"),this.frameTarget.classList.add("motion-safe:animate-pulse")}#i(){this.hasRefreshButtonTarget&&this.refreshButtonTarget.classList.remove("motion-safe:animate-spin"),this.frameTarget.classList.remove("motion-safe:animate-pulse")}#r(){this.hasHomeButtonTarget&&(this.homeButtonTarget.style.display=this.srcHistory.length>2?"":"none"),this.hasBackButtonTarget&&(this.backButtonTarget.style.display=this.srcHistory.length>1?"":"none")}};var fo=class extends G{static values={current:String};connect(){let i=localStorage.getItem("theme")||"light";this.setMode(i),this.handleStorageChange=e=>{console.log("Storage event received in color-mode controller:",e.key,e.newValue,e.oldValue),e.key==="theme"&&e.newValue&&(console.log("Updating color-mode theme to:",e.newValue),this.setMode(e.newValue))},window.addEventListener("storage",this.handleStorageChange)}disconnect(){window.removeEventListener("storage",this.handleStorageChange)}toggleMode(){let e=(this.currentValue||"light")==="light"?"dark":"light";this.setMode(e)}setMode(i){i==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),this.currentValue=i,this.toggleIcons(i),localStorage.setItem("theme",i)}toggleIcons(i){let e=this.element.querySelector(".color-mode-icon-light"),t=this.element.querySelector(".color-mode-icon-dark");e&&t&&(i==="light"?(e.classList.remove("hidden"),t.classList.add("hidden")):(e.classList.add("hidden"),t.classList.remove("hidden")))}};var{entries:Td,setPrototypeOf:gd,isFrozen:Ay,getPrototypeOf:Cy,getOwnPropertyDescriptor:_y}=Object,{freeze:lt,seal:Dt,create:ac}=Object,{apply:lc,construct:cc}=typeof Reflect<"u"&&Reflect;lt||(lt=function(e){return e});Dt||(Dt=function(e){return e});lc||(lc=function(e,t){for(var r=arguments.length,s=new Array(r>2?r-2:0),n=2;n<r;n++)s[n-2]=arguments[n];return e.apply(t,s)});cc||(cc=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];return new e(...r)});var mo=ct(Array.prototype.forEach),Fy=ct(Array.prototype.lastIndexOf),bd=ct(Array.prototype.pop),Ts=ct(Array.prototype.push),Py=ct(Array.prototype.splice),bo=ct(String.prototype.toLowerCase),tc=ct(String.prototype.toString),ic=ct(String.prototype.match),ks=ct(String.prototype.replace),Oy=ct(String.prototype.indexOf),My=ct(String.prototype.trim),Wt=ct(Object.prototype.hasOwnProperty),at=ct(RegExp.prototype.test),As=Ry(TypeError);function ct(i){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];return lc(i,e,r)}}function Ry(i){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return cc(i,t)}}function Z(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:bo;gd&&gd(i,null);let r=e.length;for(;r--;){let s=e[r];if(typeof s=="string"){let n=t(s);n!==s&&(Ay(e)||(e[r]=n),s=n)}i[s]=!0}return i}function Ly(i){for(let e=0;e<i.length;e++)Wt(i,e)||(i[e]=null);return i}function ri(i){let e=ac(null);for(let[t,r]of Td(i))Wt(i,t)&&(Array.isArray(r)?e[t]=Ly(r):r&&typeof r=="object"&&r.constructor===Object?e[t]=ri(r):e[t]=r);return e}function Cs(i,e){for(;i!==null;){let r=_y(i,e);if(r){if(r.get)return ct(r.get);if(typeof r.value=="function")return ct(r.value)}i=Cy(i)}function t(){return null}return t}var vd=lt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),rc=lt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),sc=lt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Iy=lt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),nc=lt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Dy=lt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),yd=lt(["#text"]),wd=lt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),oc=lt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Sd=lt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),go=lt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ny=Dt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),By=Dt(/<%[\w\W]*|[\w\W]*%>/gm),Uy=Dt(/\$\{[\w\W]*/gm),zy=Dt(/^data-[\-\w.\u00B7-\uFFFF]+$/),Hy=Dt(/^aria-[\-\w]+$/),kd=Dt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),jy=Dt(/^(?:\w+script|data):/i),qy=Dt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ad=Dt(/^html$/i),Vy=Dt(/^[a-z][.\w]*(-[.\w]+)+$/i),Ed=Object.freeze({__proto__:null,ARIA_ATTR:Hy,ATTR_WHITESPACE:qy,CUSTOM_ELEMENT:Vy,DATA_ATTR:zy,DOCTYPE_NAME:Ad,ERB_EXPR:By,IS_ALLOWED_URI:kd,IS_SCRIPT_OR_DATA:jy,MUSTACHE_EXPR:Ny,TMPLIT_EXPR:Uy}),_s={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},$y=function(){return typeof window>"u"?null:window},Wy=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null,s="data-tt-policy-suffix";t&&t.hasAttribute(s)&&(r=t.getAttribute(s));let n="dompurify"+(r?"#"+r:"");try{return e.createPolicy(n,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+n+" could not be created."),null}},xd=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Cd(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$y(),e=W=>Cd(W);if(e.version="3.3.1",e.removed=[],!i||!i.document||i.document.nodeType!==_s.document||!i.Element)return e.isSupported=!1,e;let{document:t}=i,r=t,s=r.currentScript,{DocumentFragment:n,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:h,NamedNodeMap:f=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:m,DOMParser:y,trustedTypes:b}=i,k=l.prototype,F=Cs(k,"cloneNode"),P=Cs(k,"remove"),M=Cs(k,"nextSibling"),A=Cs(k,"childNodes"),_=Cs(k,"parentNode");if(typeof o=="function"){let W=t.createElement("template");W.content&&W.content.ownerDocument&&(t=W.content.ownerDocument)}let S,E="",{implementation:C,createNodeIterator:O,createDocumentFragment:N,getElementsByTagName:z}=t,{importNode:V}=r,j=xd();e.isSupported=typeof Td=="function"&&typeof _=="function"&&C&&C.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:K,ERB_EXPR:te,TMPLIT_EXPR:ie,DATA_ATTR:je,ARIA_ATTR:ge,IS_SCRIPT_OR_DATA:De,ATTR_WHITESPACE:de,CUSTOM_ELEMENT:tt}=Ed,{IS_ALLOWED_URI:Ct}=Ed,re=null,ft=Z({},[...vd,...rc,...sc,...nc,...yd]),se=null,Xe=Z({},[...wd,...oc,...Sd,...go]),Q=Object.seal(ac(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),it=null,_t=null,be=Object.seal(ac(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}})),Zt=!0,li=!0,Qt=!1,qi=!0,Bt=!1,Ci=!0,Ut=!1,ci=!1,ui=!1,zt=!1,hi=!1,rt=!1,Jt=!0,di=!1,Vi="user-content-",pi=!0,ei=!1,Ht={},st=null,fi=Z({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Jr=null,es=Z({},["audio","video","img","source","image","track"]),ts=null,xn=Z({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Y="http://www.w3.org/1998/Math/MathML",$i="http://www.w3.org/2000/svg",Et="http://www.w3.org/1999/xhtml",mt=Et,is=!1,ti=null,Qe=Z({},[Y,$i,Et],tc),wr=Z({},["mi","mo","mn","ms","mtext"]),Wi=Z({},["annotation-xml"]),Se=Z({},["title","style","font","a","script"]),ne=null,Oa=["application/xhtml+xml","text/html"],_i="text/html",Ce=null,nt=null,Ma=t.createElement("form"),_e=function(w){return w instanceof RegExp||w instanceof Function},gt=function(){let w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(nt&&nt===w)){if((!w||typeof w!="object")&&(w={}),w=ri(w),ne=Oa.indexOf(w.PARSER_MEDIA_TYPE)===-1?_i:w.PARSER_MEDIA_TYPE,Ce=ne==="application/xhtml+xml"?tc:bo,re=Wt(w,"ALLOWED_TAGS")?Z({},w.ALLOWED_TAGS,Ce):ft,se=Wt(w,"ALLOWED_ATTR")?Z({},w.ALLOWED_ATTR,Ce):Xe,ti=Wt(w,"ALLOWED_NAMESPACES")?Z({},w.ALLOWED_NAMESPACES,tc):Qe,ts=Wt(w,"ADD_URI_SAFE_ATTR")?Z(ri(xn),w.ADD_URI_SAFE_ATTR,Ce):xn,Jr=Wt(w,"ADD_DATA_URI_TAGS")?Z(ri(es),w.ADD_DATA_URI_TAGS,Ce):es,st=Wt(w,"FORBID_CONTENTS")?Z({},w.FORBID_CONTENTS,Ce):fi,it=Wt(w,"FORBID_TAGS")?Z({},w.FORBID_TAGS,Ce):ri({}),_t=Wt(w,"FORBID_ATTR")?Z({},w.FORBID_ATTR,Ce):ri({}),Ht=Wt(w,"USE_PROFILES")?w.USE_PROFILES:!1,Zt=w.ALLOW_ARIA_ATTR!==!1,li=w.ALLOW_DATA_ATTR!==!1,Qt=w.ALLOW_UNKNOWN_PROTOCOLS||!1,qi=w.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Bt=w.SAFE_FOR_TEMPLATES||!1,Ci=w.SAFE_FOR_XML!==!1,Ut=w.WHOLE_DOCUMENT||!1,zt=w.RETURN_DOM||!1,hi=w.RETURN_DOM_FRAGMENT||!1,rt=w.RETURN_TRUSTED_TYPE||!1,ui=w.FORCE_BODY||!1,Jt=w.SANITIZE_DOM!==!1,di=w.SANITIZE_NAMED_PROPS||!1,pi=w.KEEP_CONTENT!==!1,ei=w.IN_PLACE||!1,Ct=w.ALLOWED_URI_REGEXP||kd,mt=w.NAMESPACE||Et,wr=w.MATHML_TEXT_INTEGRATION_POINTS||wr,Wi=w.HTML_INTEGRATION_POINTS||Wi,Q=w.CUSTOM_ELEMENT_HANDLING||{},w.CUSTOM_ELEMENT_HANDLING&&_e(w.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Q.tagNameCheck=w.CUSTOM_ELEMENT_HANDLING.tagNameCheck),w.CUSTOM_ELEMENT_HANDLING&&_e(w.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Q.attributeNameCheck=w.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),w.CUSTOM_ELEMENT_HANDLING&&typeof w.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Q.allowCustomizedBuiltInElements=w.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Bt&&(li=!1),hi&&(zt=!0),Ht&&(re=Z({},yd),se=[],Ht.html===!0&&(Z(re,vd),Z(se,wd)),Ht.svg===!0&&(Z(re,rc),Z(se,oc),Z(se,go)),Ht.svgFilters===!0&&(Z(re,sc),Z(se,oc),Z(se,go)),Ht.mathMl===!0&&(Z(re,nc),Z(se,Sd),Z(se,go))),w.ADD_TAGS&&(typeof w.ADD_TAGS=="function"?be.tagCheck=w.ADD_TAGS:(re===ft&&(re=ri(re)),Z(re,w.ADD_TAGS,Ce))),w.ADD_ATTR&&(typeof w.ADD_ATTR=="function"?be.attributeCheck=w.ADD_ATTR:(se===Xe&&(se=ri(se)),Z(se,w.ADD_ATTR,Ce))),w.ADD_URI_SAFE_ATTR&&Z(ts,w.ADD_URI_SAFE_ATTR,Ce),w.FORBID_CONTENTS&&(st===fi&&(st=ri(st)),Z(st,w.FORBID_CONTENTS,Ce)),w.ADD_FORBID_CONTENTS&&(st===fi&&(st=ri(st)),Z(st,w.ADD_FORBID_CONTENTS,Ce)),pi&&(re["#text"]=!0),Ut&&Z(re,["html","head","body"]),re.table&&(Z(re,["tbody"]),delete it.tbody),w.TRUSTED_TYPES_POLICY){if(typeof w.TRUSTED_TYPES_POLICY.createHTML!="function")throw As('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof w.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw As('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');S=w.TRUSTED_TYPES_POLICY,E=S.createHTML("")}else S===void 0&&(S=Wy(b,s)),S!==null&&typeof E=="string"&&(E=S.createHTML(""));lt&&lt(w),nt=w}},mi=Z({},[...rc,...sc,...Iy]),Tn=Z({},[...nc,...Dy]),rs=function(w){let U=_(w);(!U||!U.tagName)&&(U={namespaceURI:mt,tagName:"template"});let $=bo(w.tagName),he=bo(U.tagName);return ti[w.namespaceURI]?w.namespaceURI===$i?U.namespaceURI===Et?$==="svg":U.namespaceURI===Y?$==="svg"&&(he==="annotation-xml"||wr[he]):!!mi[$]:w.namespaceURI===Y?U.namespaceURI===Et?$==="math":U.namespaceURI===$i?$==="math"&&Wi[he]:!!Tn[$]:w.namespaceURI===Et?U.namespaceURI===$i&&!Wi[he]||U.namespaceURI===Y&&!wr[he]?!1:!Tn[$]&&(Se[$]||!mi[$]):!!(ne==="application/xhtml+xml"&&ti[w.namespaceURI]):!1},bt=function(w){Ts(e.removed,{element:w});try{_(w).removeChild(w)}catch{P(w)}},xt=function(w,U){try{Ts(e.removed,{attribute:U.getAttributeNode(w),from:U})}catch{Ts(e.removed,{attribute:null,from:U})}if(U.removeAttribute(w),w==="is")if(zt||hi)try{bt(U)}catch{}else try{U.setAttribute(w,"")}catch{}},kn=function(w){let U=null,$=null;if(ui)w="<remove></remove>"+w;else{let xe=ic(w,/^[\r\n\t ]+/);$=xe&&xe[0]}ne==="application/xhtml+xml"&&mt===Et&&(w='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+w+"</body></html>");let he=S?S.createHTML(w):w;if(mt===Et)try{U=new y().parseFromString(he,ne)}catch{}if(!U||!U.documentElement){U=C.createDocument(mt,"template",null);try{U.documentElement.innerHTML=is?E:he}catch{}}let pe=U.body||U.documentElement;return w&&$&&pe.insertBefore(t.createTextNode($),pe.childNodes[0]||null),mt===Et?z.call(U,Ut?"html":"body")[0]:Ut?U.documentElement:pe},ss=function(w){return O.call(w.ownerDocument||w,w,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},Sr=function(w){return w instanceof m&&(typeof w.nodeName!="string"||typeof w.textContent!="string"||typeof w.removeChild!="function"||!(w.attributes instanceof f)||typeof w.removeAttribute!="function"||typeof w.setAttribute!="function"||typeof w.namespaceURI!="string"||typeof w.insertBefore!="function"||typeof w.hasChildNodes!="function")},vt=function(w){return typeof a=="function"&&w instanceof a};function Ee(W,w,U){mo(W,$=>{$.call(e,w,U,nt)})}let gi=function(w){let U=null;if(Ee(j.beforeSanitizeElements,w,null),Sr(w))return bt(w),!0;let $=Ce(w.nodeName);if(Ee(j.uponSanitizeElement,w,{tagName:$,allowedTags:re}),Ci&&w.hasChildNodes()&&!vt(w.firstElementChild)&&at(/<[/\w!]/g,w.innerHTML)&&at(/<[/\w!]/g,w.textContent)||w.nodeType===_s.progressingInstruction||Ci&&w.nodeType===_s.comment&&at(/<[/\w]/g,w.data))return bt(w),!0;if(!(be.tagCheck instanceof Function&&be.tagCheck($))&&(!re[$]||it[$])){if(!it[$]&&Er($)&&(Q.tagNameCheck instanceof RegExp&&at(Q.tagNameCheck,$)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck($)))return!1;if(pi&&!st[$]){let he=_(w)||w.parentNode,pe=A(w)||w.childNodes;if(pe&&he){let xe=pe.length;for(let Je=xe-1;Je>=0;--Je){let Ft=F(pe[Je],!0);Ft.__removalCount=(w.__removalCount||0)+1,he.insertBefore(Ft,M(w))}}}return bt(w),!0}return w instanceof l&&!rs(w)||($==="noscript"||$==="noembed"||$==="noframes")&&at(/<\/no(script|embed|frames)/i,w.innerHTML)?(bt(w),!0):(Bt&&w.nodeType===_s.text&&(U=w.textContent,mo([K,te,ie],he=>{U=ks(U,he," ")}),w.textContent!==U&&(Ts(e.removed,{element:w.cloneNode()}),w.textContent=U)),Ee(j.afterSanitizeElements,w,null),!1)},ns=function(w,U,$){if(Jt&&(U==="id"||U==="name")&&($ in t||$ in Ma))return!1;if(!(li&&!_t[U]&&at(je,U))){if(!(Zt&&at(ge,U))){if(!(be.attributeCheck instanceof Function&&be.attributeCheck(U,w))){if(!se[U]||_t[U]){if(!(Er(w)&&(Q.tagNameCheck instanceof RegExp&&at(Q.tagNameCheck,w)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(w))&&(Q.attributeNameCheck instanceof RegExp&&at(Q.attributeNameCheck,U)||Q.attributeNameCheck instanceof Function&&Q.attributeNameCheck(U,w))||U==="is"&&Q.allowCustomizedBuiltInElements&&(Q.tagNameCheck instanceof RegExp&&at(Q.tagNameCheck,$)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck($))))return!1}else if(!ts[U]){if(!at(Ct,ks($,de,""))){if(!((U==="src"||U==="xlink:href"||U==="href")&&w!=="script"&&Oy($,"data:")===0&&Jr[w])){if(!(Qt&&!at(De,ks($,de,"")))){if($)return!1}}}}}}}return!0},Er=function(w){return w!=="annotation-xml"&&ic(w,tt)},An=function(w){Ee(j.beforeSanitizeAttributes,w,null);let{attributes:U}=w;if(!U||Sr(w))return;let $={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:se,forceKeepAttr:void 0},he=U.length;for(;he--;){let pe=U[he],{name:xe,namespaceURI:Je,value:Ft}=pe,Fi=Ce(xe),os=Ft,Ne=xe==="value"?os:My(os);if($.attrName=Fi,$.attrValue=Ne,$.keepAttr=!0,$.forceKeepAttr=void 0,Ee(j.uponSanitizeAttribute,w,$),Ne=$.attrValue,di&&(Fi==="id"||Fi==="name")&&(xt(xe,w),Ne=Vi+Ne),Ci&&at(/((--!?|])>)|<\/(style|title|textarea)/i,Ne)){xt(xe,w);continue}if(Fi==="attributename"&&ic(Ne,"href")){xt(xe,w);continue}if($.forceKeepAttr)continue;if(!$.keepAttr){xt(xe,w);continue}if(!qi&&at(/\/>/i,Ne)){xt(xe,w);continue}Bt&&mo([K,te,ie],Fn=>{Ne=ks(Ne,Fn," ")});let _n=Ce(w.nodeName);if(!ns(_n,Fi,Ne)){xt(xe,w);continue}if(S&&typeof b=="object"&&typeof b.getAttributeType=="function"&&!Je)switch(b.getAttributeType(_n,Fi)){case"TrustedHTML":{Ne=S.createHTML(Ne);break}case"TrustedScriptURL":{Ne=S.createScriptURL(Ne);break}}if(Ne!==os)try{Je?w.setAttributeNS(Je,xe,Ne):w.setAttribute(xe,Ne),Sr(w)?bt(w):bd(e.removed)}catch{xt(xe,w)}}Ee(j.afterSanitizeAttributes,w,null)},Cn=function W(w){let U=null,$=ss(w);for(Ee(j.beforeSanitizeShadowDOM,w,null);U=$.nextNode();)Ee(j.uponSanitizeShadowNode,U,null),gi(U),An(U),U.content instanceof n&&W(U.content);Ee(j.afterSanitizeShadowDOM,w,null)};return e.sanitize=function(W){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=null,$=null,he=null,pe=null;if(is=!W,is&&(W="<!-->"),typeof W!="string"&&!vt(W))if(typeof W.toString=="function"){if(W=W.toString(),typeof W!="string")throw As("dirty is not a string, aborting")}else throw As("toString is not a function");if(!e.isSupported)return W;if(ci||gt(w),e.removed=[],typeof W=="string"&&(ei=!1),ei){if(W.nodeName){let Ft=Ce(W.nodeName);if(!re[Ft]||it[Ft])throw As("root node is forbidden and cannot be sanitized in-place")}}else if(W instanceof a)U=kn("<!---->"),$=U.ownerDocument.importNode(W,!0),$.nodeType===_s.element&&$.nodeName==="BODY"||$.nodeName==="HTML"?U=$:U.appendChild($);else{if(!zt&&!Bt&&!Ut&&W.indexOf("<")===-1)return S&&rt?S.createHTML(W):W;if(U=kn(W),!U)return zt?null:rt?E:""}U&&ui&&bt(U.firstChild);let xe=ss(ei?W:U);for(;he=xe.nextNode();)gi(he),An(he),he.content instanceof n&&Cn(he.content);if(ei)return W;if(zt){if(hi)for(pe=N.call(U.ownerDocument);U.firstChild;)pe.appendChild(U.firstChild);else pe=U;return(se.shadowroot||se.shadowrootmode)&&(pe=V.call(r,pe,!0)),pe}let Je=Ut?U.outerHTML:U.innerHTML;return Ut&&re["!doctype"]&&U.ownerDocument&&U.ownerDocument.doctype&&U.ownerDocument.doctype.name&&at(Ad,U.ownerDocument.doctype.name)&&(Je="<!DOCTYPE "+U.ownerDocument.doctype.name+`>
`+Je),Bt&&mo([K,te,ie],Ft=>{Je=ks(Je,Ft," ")}),S&&rt?S.createHTML(Je):Je},e.setConfig=function(){let W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};gt(W),ci=!0},e.clearConfig=function(){nt=null,ci=!1},e.isValidAttribute=function(W,w,U){nt||gt({});let $=Ce(W),he=Ce(w);return ns($,he,U)},e.addHook=function(W,w){typeof w=="function"&&Ts(j[W],w)},e.removeHook=function(W,w){if(w!==void 0){let U=Fy(j[W],w);return U===-1?void 0:Py(j[W],U,1)[0]}return bd(j[W])},e.removeHooks=function(W){j[W]=[]},e.removeAllHooks=function(){j=xd()},e}var Lr=Cd();function dc(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var cr=dc();function Rd(i){cr=i}var Os={exec:()=>null};function ce(i,e=""){let t=typeof i=="string"?i:i.source,r={replace:(s,n)=>{let o=typeof n=="string"?n:n.source;return o=o.replace(ut.caret,"$1"),t=t.replace(s,o),r},getRegex:()=>new RegExp(t,e)};return r}var ut={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:i=>new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}#`),htmlBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}<(?:[a-z].*>|!--)`,"i")},Gy=/^(?:[ \t]*(?:\n|$))+/,Xy=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Ky=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Rs=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Yy=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,pc=/(?:[*+-]|\d{1,9}[.)])/,Ld=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Id=ce(Ld).replace(/bull/g,pc).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Zy=ce(Ld).replace(/bull/g,pc).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),fc=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Qy=/^[^\n]+/,mc=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Jy=ce(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",mc).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),e0=ce(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,pc).getRegex(),wo="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",gc=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,t0=ce("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",gc).replace("tag",wo).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Dd=ce(fc).replace("hr",Rs).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",wo).getRegex(),i0=ce(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Dd).getRegex(),bc={blockquote:i0,code:Xy,def:Jy,fences:Ky,heading:Yy,hr:Rs,html:t0,lheading:Id,list:e0,newline:Gy,paragraph:Dd,table:Os,text:Qy},_d=ce("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Rs).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",wo).getRegex(),r0={...bc,lheading:Zy,table:_d,paragraph:ce(fc).replace("hr",Rs).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",_d).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",wo).getRegex()},s0={...bc,html:ce(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",gc).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Os,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ce(fc).replace("hr",Rs).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Id).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},n0=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,o0=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Nd=/^( {2,}|\\)\n(?!\s*$)/,a0=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,So=/[\p{P}\p{S}]/u,vc=/[\s\p{P}\p{S}]/u,Bd=/[^\s\p{P}\p{S}]/u,l0=ce(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,vc).getRegex(),Ud=/(?!~)[\p{P}\p{S}]/u,c0=/(?!~)[\s\p{P}\p{S}]/u,u0=/(?:[^\s\p{P}\p{S}]|~)/u,h0=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,zd=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,d0=ce(zd,"u").replace(/punct/g,So).getRegex(),p0=ce(zd,"u").replace(/punct/g,Ud).getRegex(),Hd="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",f0=ce(Hd,"gu").replace(/notPunctSpace/g,Bd).replace(/punctSpace/g,vc).replace(/punct/g,So).getRegex(),m0=ce(Hd,"gu").replace(/notPunctSpace/g,u0).replace(/punctSpace/g,c0).replace(/punct/g,Ud).getRegex(),g0=ce("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Bd).replace(/punctSpace/g,vc).replace(/punct/g,So).getRegex(),b0=ce(/\\(punct)/,"gu").replace(/punct/g,So).getRegex(),v0=ce(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),y0=ce(gc).replace("(?:-->|$)","-->").getRegex(),w0=ce("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",y0).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),yo=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,S0=ce(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",yo).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),jd=ce(/^!?\[(label)\]\[(ref)\]/).replace("label",yo).replace("ref",mc).getRegex(),qd=ce(/^!?\[(ref)\](?:\[\])?/).replace("ref",mc).getRegex(),E0=ce("reflink|nolink(?!\\()","g").replace("reflink",jd).replace("nolink",qd).getRegex(),yc={_backpedal:Os,anyPunctuation:b0,autolink:v0,blockSkip:h0,br:Nd,code:o0,del:Os,emStrongLDelim:d0,emStrongRDelimAst:f0,emStrongRDelimUnd:g0,escape:n0,link:S0,nolink:qd,punctuation:l0,reflink:jd,reflinkSearch:E0,tag:w0,text:a0,url:Os},x0={...yc,link:ce(/^!?\[(label)\]\((.*?)\)/).replace("label",yo).getRegex(),reflink:ce(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",yo).getRegex()},uc={...yc,emStrongRDelimAst:m0,emStrongLDelim:p0,url:ce(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},T0={...uc,br:ce(Nd).replace("{2,}","*").getRegex(),text:ce(uc.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},vo={normal:bc,gfm:r0,pedantic:s0},Fs={normal:yc,gfm:uc,breaks:T0,pedantic:x0},k0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Fd=i=>k0[i];function si(i,e){if(e){if(ut.escapeTest.test(i))return i.replace(ut.escapeReplace,Fd)}else if(ut.escapeTestNoEncode.test(i))return i.replace(ut.escapeReplaceNoEncode,Fd);return i}function Pd(i){try{i=encodeURI(i).replace(ut.percentDecode,"%")}catch{return null}return i}function Od(i,e){let t=i.replace(ut.findPipe,(n,o,a)=>{let l=!1,h=o;for(;--h>=0&&a[h]==="\\";)l=!l;return l?"|":" |"}),r=t.split(ut.splitPipe),s=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(ut.slashPipe,"|");return r}function Ps(i,e,t){let r=i.length;if(r===0)return"";let s=0;for(;s<r&&i.charAt(r-s-1)===e;)s++;return i.slice(0,r-s)}function A0(i,e){if(i.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<i.length;r++)if(i[r]==="\\")r++;else if(i[r]===e[0])t++;else if(i[r]===e[1]&&(t--,t<0))return r;return-1}function Md(i,e,t,r,s){let n=e.href,o=e.title||null,a=i[1].replace(s.other.outputLinkReplace,"$1");if(i[0].charAt(0)!=="!"){r.state.inLink=!0;let l={type:"link",raw:t,href:n,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}return{type:"image",raw:t,href:n,title:o,text:a}}function C0(i,e,t){let r=i.match(t.other.indentCodeCompensation);if(r===null)return e;let s=r[1];return e.split(`
`).map(n=>{let o=n.match(t.other.beginningSpace);if(o===null)return n;let[a]=o;return a.length>=s.length?n.slice(s.length):n}).join(`
`)}var Dr=class{options;rules;lexer;constructor(e){this.options=e||cr}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let r=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Ps(r,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let r=t[0],s=C0(r,t[3]||"",this.rules);return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:s}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(this.rules.other.endingHash.test(r)){let s=Ps(r,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(r=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Ps(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let r=Ps(t[0],`
`).split(`
`),s="",n="",o=[];for(;r.length>0;){let a=!1,l=[],h;for(h=0;h<r.length;h++)if(this.rules.other.blockquoteStart.test(r[h]))l.push(r[h]),a=!0;else if(!a)l.push(r[h]);else break;r=r.slice(h);let f=l.join(`
`),m=f.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${f}`:f,n=n?`${n}
${m}`:m;let y=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(m,o,!0),this.lexer.state.top=y,r.length===0)break;let b=o.at(-1);if(b?.type==="code")break;if(b?.type==="blockquote"){let k=b,F=k.raw+`
`+r.join(`
`),P=this.blockquote(F);o[o.length-1]=P,s=s.substring(0,s.length-k.raw.length)+P.raw,n=n.substring(0,n.length-k.text.length)+P.text;break}else if(b?.type==="list"){let k=b,F=k.raw+`
`+r.join(`
`),P=this.list(F);o[o.length-1]=P,s=s.substring(0,s.length-b.raw.length)+P.raw,n=n.substring(0,n.length-k.raw.length)+P.raw,r=F.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:o,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),s=r.length>1,n={type:"list",raw:"",ordered:s,start:s?+r.slice(0,-1):"",loose:!1,items:[]};r=s?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=s?r:"[*+-]");let o=this.rules.other.listItemRegex(r),a=!1;for(;e;){let h=!1,f="",m="";if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;f=t[0],e=e.substring(f.length);let y=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,A=>" ".repeat(3*A.length)),b=e.split(`
`,1)[0],k=!y.trim(),F=0;if(this.options.pedantic?(F=2,m=y.trimStart()):k?F=t[1].length+1:(F=t[2].search(this.rules.other.nonSpaceChar),F=F>4?1:F,m=y.slice(F),F+=t[1].length),k&&this.rules.other.blankLine.test(b)&&(f+=b+`
`,e=e.substring(b.length+1),h=!0),!h){let A=this.rules.other.nextBulletRegex(F),_=this.rules.other.hrRegex(F),S=this.rules.other.fencesBeginRegex(F),E=this.rules.other.headingBeginRegex(F),C=this.rules.other.htmlBeginRegex(F);for(;e;){let O=e.split(`
`,1)[0],N;if(b=O,this.options.pedantic?(b=b.replace(this.rules.other.listReplaceNesting,"  "),N=b):N=b.replace(this.rules.other.tabCharGlobal,"    "),S.test(b)||E.test(b)||C.test(b)||A.test(b)||_.test(b))break;if(N.search(this.rules.other.nonSpaceChar)>=F||!b.trim())m+=`
`+N.slice(F);else{if(k||y.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||S.test(y)||E.test(y)||_.test(y))break;m+=`
`+b}!k&&!b.trim()&&(k=!0),f+=O+`
`,e=e.substring(O.length+1),y=N.slice(F)}}n.loose||(a?n.loose=!0:this.rules.other.doubleBlankLine.test(f)&&(a=!0));let P=null,M;this.options.gfm&&(P=this.rules.other.listIsTask.exec(m),P&&(M=P[0]!=="[ ] ",m=m.replace(this.rules.other.listReplaceTask,""))),n.items.push({type:"list_item",raw:f,task:!!P,checked:M,loose:!1,text:m,tokens:[]}),n.raw+=f}let l=n.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;n.raw=n.raw.trimEnd();for(let h=0;h<n.items.length;h++)if(this.lexer.state.top=!1,n.items[h].tokens=this.lexer.blockTokens(n.items[h].text,[]),!n.loose){let f=n.items[h].tokens.filter(y=>y.type==="space"),m=f.length>0&&f.some(y=>this.rules.other.anyLine.test(y.raw));n.loose=m}if(n.loose)for(let h=0;h<n.items.length;h++)n.items[h].loose=!0;return n}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let r=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:s,title:n}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let r=Od(t[1]),s=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===s.length){for(let a of s)this.rules.other.tableAlignRight.test(a)?o.align.push("right"):this.rules.other.tableAlignCenter.test(a)?o.align.push("center"):this.rules.other.tableAlignLeft.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<r.length;a++)o.header.push({text:r[a],tokens:this.lexer.inline(r[a]),header:!0,align:o.align[a]});for(let a of n)o.rows.push(Od(a,o.header.length).map((l,h)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[h]})));return o}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let r=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let o=Ps(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{let o=A0(t[2],"()");if(o>-1){let l=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let s=t[2],n="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(s);o&&(s=o[1],n=o[3])}else n=t[3]?t[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?s=s.slice(1):s=s.slice(1,-1)),Md(t,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let s=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),n=t[s.toLowerCase()];if(!n){let o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return Md(r,n,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!s||s[3]&&r.match(this.rules.other.unicodeAlphaNumeric))return;if(!(s[1]||s[2]||"")||!r||this.rules.inline.punctuation.exec(r)){let o=[...s[0]].length-1,a,l,h=o,f=0,m=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(m.lastIndex=0,t=t.slice(-1*e.length+o);(s=m.exec(t))!=null;){if(a=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!a)continue;if(l=[...a].length,s[3]||s[4]){h+=l;continue}else if((s[5]||s[6])&&o%3&&!((o+l)%3)){f+=l;continue}if(h-=l,h>0)continue;l=Math.min(l,l+h+f);let y=[...s[0]][0].length,b=e.slice(0,o+s.index+y+l);if(Math.min(o,l)%2){let F=b.slice(1,-1);return{type:"em",raw:b,text:F,tokens:this.lexer.inlineTokens(F)}}let k=b.slice(2,-2);return{type:"strong",raw:b,text:k,tokens:this.lexer.inlineTokens(k)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(this.rules.other.newLineCharGlobal," "),s=this.rules.other.nonSpaceChar.test(r),n=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return s&&n&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:t[0],text:r}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let r,s;return t[2]==="@"?(r=t[1],s="mailto:"+r):(r=t[1],s=r),{type:"link",raw:t[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,s;if(t[2]==="@")r=t[0],s="mailto:"+r;else{let n;do n=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(n!==t[0]);r=t[0],t[1]==="www."?s="http://"+t[0]:s=t[0]}return{type:"link",raw:t[0],text:r,href:s,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let r=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:r}}}},Gt=class i{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||cr,this.options.tokenizer=this.options.tokenizer||new Dr,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:ut,block:vo.normal,inline:Fs.normal};this.options.pedantic?(t.block=vo.pedantic,t.inline=Fs.pedantic):this.options.gfm&&(t.block=vo.gfm,this.options.breaks?t.inline=Fs.breaks:t.inline=Fs.gfm),this.tokenizer.rules=t}static get rules(){return{block:vo,inline:Fs}}static lex(e,t){return new i(t).lex(e)}static lexInline(e,t){return new i(t).inlineTokens(e)}lex(e){e=e.replace(ut.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){for(this.options.pedantic&&(e=e.replace(ut.tabCharGlobal,"    ").replace(ut.spaceLine,""));e;){let s;if(this.options.extensions?.block?.some(o=>(s=o.call({lexer:this},e,t))?(e=e.substring(s.raw.length),t.push(s),!0):!1))continue;if(s=this.tokenizer.space(e)){e=e.substring(s.raw.length);let o=t.at(-1);s.raw.length===1&&o!==void 0?o.raw+=`
`:t.push(s);continue}if(s=this.tokenizer.code(e)){e=e.substring(s.raw.length);let o=t.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=`
`+s.raw,o.text+=`
`+s.text,this.inlineQueue.at(-1).src=o.text):t.push(s);continue}if(s=this.tokenizer.fences(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.heading(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.hr(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.blockquote(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.list(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.html(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.def(e)){e=e.substring(s.raw.length);let o=t.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=`
`+s.raw,o.text+=`
`+s.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.lheading(e)){e=e.substring(s.raw.length),t.push(s);continue}let n=e;if(this.options.extensions?.startBlock){let o=1/0,a=e.slice(1),l;this.options.extensions.startBlock.forEach(h=>{l=h.call({lexer:this},a),typeof l=="number"&&l>=0&&(o=Math.min(o,l))}),o<1/0&&o>=0&&(n=e.substring(0,o+1))}if(this.state.top&&(s=this.tokenizer.paragraph(n))){let o=t.at(-1);r&&o?.type==="paragraph"?(o.raw+=`
`+s.raw,o.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(s),r=n.length!==e.length,e=e.substring(s.raw.length);continue}if(s=this.tokenizer.text(e)){e=e.substring(s.raw.length);let o=t.at(-1);o?.type==="text"?(o.raw+=`
`+s.raw,o.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(s);continue}if(e){let o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r=e,s=null;if(this.tokens.links){let a=Object.keys(this.tokens.links);if(a.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)a.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,s.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let n=!1,o="";for(;e;){n||(o=""),n=!1;let a;if(this.options.extensions?.inline?.some(h=>(a=h.call({lexer:this},e,t))?(e=e.substring(a.raw.length),t.push(a),!0):!1))continue;if(a=this.tokenizer.escape(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.tag(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.link(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(a.raw.length);let h=t.at(-1);a.type==="text"&&h?.type==="text"?(h.raw+=a.raw,h.text+=a.text):t.push(a);continue}if(a=this.tokenizer.emStrong(e,r,o)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.codespan(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.br(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.del(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.autolink(e)){e=e.substring(a.raw.length),t.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(e))){e=e.substring(a.raw.length),t.push(a);continue}let l=e;if(this.options.extensions?.startInline){let h=1/0,f=e.slice(1),m;this.options.extensions.startInline.forEach(y=>{m=y.call({lexer:this},f),typeof m=="number"&&m>=0&&(h=Math.min(h,m))}),h<1/0&&h>=0&&(l=e.substring(0,h+1))}if(a=this.tokenizer.inlineText(l)){e=e.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(o=a.raw.slice(-1)),n=!0;let h=t.at(-1);h?.type==="text"?(h.raw+=a.raw,h.text+=a.text):t.push(a);continue}if(e){let h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return t}},Nr=class{options;parser;constructor(e){this.options=e||cr}space(e){return""}code({text:e,lang:t,escaped:r}){let s=(t||"").match(ut.notSpaceStart)?.[0],n=e.replace(ut.endingNewline,"")+`
`;return s?'<pre><code class="language-'+si(s)+'">'+(r?n:si(n,!0))+`</code></pre>
`:"<pre><code>"+(r?n:si(n,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,r=e.start,s="";for(let a=0;a<e.items.length;a++){let l=e.items[a];s+=this.listitem(l)}let n=t?"ol":"ul",o=t&&r!==1?' start="'+r+'"':"";return"<"+n+o+`>
`+s+"</"+n+`>
`}listitem(e){let t="";if(e.task){let r=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+si(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let n=0;n<e.header.length;n++)r+=this.tablecell(e.header[n]);t+=this.tablerow({text:r});let s="";for(let n=0;n<e.rows.length;n++){let o=e.rows[n];r="";for(let a=0;a<o.length;a++)r+=this.tablecell(o[a]);s+=this.tablerow({text:r})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+s+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${si(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){let s=this.parser.parseInline(r),n=Pd(e);if(n===null)return s;e=n;let o='<a href="'+e+'"';return t&&(o+=' title="'+si(t)+'"'),o+=">"+s+"</a>",o}image({href:e,title:t,text:r}){let s=Pd(e);if(s===null)return si(r);e=s;let n=`<img src="${e}" alt="${r}"`;return t&&(n+=` title="${si(t)}"`),n+=">",n}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:si(e.text)}},Ms=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Xt=class i{options;renderer;textRenderer;constructor(e){this.options=e||cr,this.options.renderer=this.options.renderer||new Nr,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Ms}static parse(e,t){return new i(t).parse(e)}static parseInline(e,t){return new i(t).parseInline(e)}parse(e,t=!0){let r="";for(let s=0;s<e.length;s++){let n=e[s];if(this.options.extensions?.renderers?.[n.type]){let a=n,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){r+=l||"";continue}}let o=n;switch(o.type){case"space":{r+=this.renderer.space(o);continue}case"hr":{r+=this.renderer.hr(o);continue}case"heading":{r+=this.renderer.heading(o);continue}case"code":{r+=this.renderer.code(o);continue}case"table":{r+=this.renderer.table(o);continue}case"blockquote":{r+=this.renderer.blockquote(o);continue}case"list":{r+=this.renderer.list(o);continue}case"html":{r+=this.renderer.html(o);continue}case"paragraph":{r+=this.renderer.paragraph(o);continue}case"text":{let a=o,l=this.renderer.text(a);for(;s+1<e.length&&e[s+1].type==="text";)a=e[++s],l+=`
`+this.renderer.text(a);t?r+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):r+=l;continue}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(e,t=this.renderer){let r="";for(let s=0;s<e.length;s++){let n=e[s];if(this.options.extensions?.renderers?.[n.type]){let a=this.options.extensions.renderers[n.type].call({parser:this},n);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)){r+=a||"";continue}}let o=n;switch(o.type){case"escape":{r+=t.text(o);break}case"html":{r+=t.html(o);break}case"link":{r+=t.link(o);break}case"image":{r+=t.image(o);break}case"strong":{r+=t.strong(o);break}case"em":{r+=t.em(o);break}case"codespan":{r+=t.codespan(o);break}case"br":{r+=t.br(o);break}case"del":{r+=t.del(o);break}case"text":{r+=t.text(o);break}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},Ir=class{options;block;constructor(e){this.options=e||cr}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?Gt.lex:Gt.lexInline}provideParser(){return this.block?Xt.parse:Xt.parseInline}},hc=class{defaults=dc();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Xt;Renderer=Nr;TextRenderer=Ms;Lexer=Gt;Tokenizer=Dr;Hooks=Ir;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(let s of e)switch(r=r.concat(t.call(this,s)),s.type){case"table":{let n=s;for(let o of n.header)r=r.concat(this.walkTokens(o.tokens,t));for(let o of n.rows)for(let a of o)r=r.concat(this.walkTokens(a.tokens,t));break}case"list":{let n=s;r=r.concat(this.walkTokens(n.items,t));break}default:{let n=s;this.defaults.extensions?.childTokens?.[n.type]?this.defaults.extensions.childTokens[n.type].forEach(o=>{let a=n[o].flat(1/0);r=r.concat(this.walkTokens(a,t))}):n.tokens&&(r=r.concat(this.walkTokens(n.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let s={...r};if(s.async=this.defaults.async||s.async||!1,r.extensions&&(r.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let o=t.renderers[n.name];o?t.renderers[n.name]=function(...a){let l=n.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:t.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=t[n.level];o?o.unshift(n.tokenizer):t[n.level]=[n.tokenizer],n.start&&(n.level==="block"?t.startBlock?t.startBlock.push(n.start):t.startBlock=[n.start]:n.level==="inline"&&(t.startInline?t.startInline.push(n.start):t.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(t.childTokens[n.name]=n.childTokens)}),s.extensions=t),r.renderer){let n=this.defaults.renderer||new Nr(this.defaults);for(let o in r.renderer){if(!(o in n))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let a=o,l=r.renderer[a],h=n[a];n[a]=(...f)=>{let m=l.apply(n,f);return m===!1&&(m=h.apply(n,f)),m||""}}s.renderer=n}if(r.tokenizer){let n=this.defaults.tokenizer||new Dr(this.defaults);for(let o in r.tokenizer){if(!(o in n))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,l=r.tokenizer[a],h=n[a];n[a]=(...f)=>{let m=l.apply(n,f);return m===!1&&(m=h.apply(n,f)),m}}s.tokenizer=n}if(r.hooks){let n=this.defaults.hooks||new Ir;for(let o in r.hooks){if(!(o in n))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let a=o,l=r.hooks[a],h=n[a];Ir.passThroughHooks.has(o)?n[a]=f=>{if(this.defaults.async)return Promise.resolve(l.call(n,f)).then(y=>h.call(n,y));let m=l.call(n,f);return h.call(n,m)}:n[a]=(...f)=>{let m=l.apply(n,f);return m===!1&&(m=h.apply(n,f)),m}}s.hooks=n}if(r.walkTokens){let n=this.defaults.walkTokens,o=r.walkTokens;s.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),n&&(l=l.concat(n.call(this,a))),l}}this.defaults={...this.defaults,...s}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Gt.lex(e,t??this.defaults)}parser(e,t){return Xt.parse(e,t??this.defaults)}parseMarkdown(e){return(r,s)=>{let n={...s},o={...this.defaults,...n},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&n.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=e);let l=o.hooks?o.hooks.provideLexer():e?Gt.lex:Gt.lexInline,h=o.hooks?o.hooks.provideParser():e?Xt.parse:Xt.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(f=>l(f,o)).then(f=>o.hooks?o.hooks.processAllTokens(f):f).then(f=>o.walkTokens?Promise.all(this.walkTokens(f,o.walkTokens)).then(()=>f):f).then(f=>h(f,o)).then(f=>o.hooks?o.hooks.postprocess(f):f).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let f=l(r,o);o.hooks&&(f=o.hooks.processAllTokens(f)),o.walkTokens&&this.walkTokens(f,o.walkTokens);let m=h(f,o);return o.hooks&&(m=o.hooks.postprocess(m)),m}catch(f){return a(f)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let s="<p>An error occurred:</p><pre>"+si(r.message+"",!0)+"</pre>";return t?Promise.resolve(s):s}if(t)return Promise.reject(r);throw r}}},lr=new hc;function le(i,e){return lr.parse(i,e)}le.options=le.setOptions=function(i){return lr.setOptions(i),le.defaults=lr.defaults,Rd(le.defaults),le};le.getDefaults=dc;le.defaults=cr;le.use=function(...i){return lr.use(...i),le.defaults=lr.defaults,Rd(le.defaults),le};le.walkTokens=function(i,e){return lr.walkTokens(i,e)};le.parseInline=lr.parseInline;le.Parser=Xt;le.parser=Xt.parse;le.Renderer=Nr;le.TextRenderer=Ms;le.Lexer=Gt;le.lexer=Gt.lex;le.Tokenizer=Dr;le.Hooks=Ir;le.parse=le;var zA=le.options,HA=le.setOptions,jA=le.use,qA=le.walkTokens,VA=le.parseInline;var $A=Xt.parse,WA=Gt.lex;var Eo=class extends G{static targets=["textarea"];connect(){this.easyMDE||(this.originalValue=this.element.value,this.easyMDE=new EasyMDE(this.#t()),this.element.addEventListener("turbo:before-morph-element",i=>{i.target===this.element&&this.easyMDE&&(this.storedValue=this.easyMDE.value())}),this.element.addEventListener("turbo:morph-element",i=>{i.target===this.element&&requestAnimationFrame(()=>this.#e())}))}disconnect(){if(this.easyMDE){try{this.element.isConnected&&this.element.parentNode&&this.easyMDE.toTextArea()}catch(i){console.warn("EasyMDE cleanup error:",i)}this.easyMDE=null}}#e(){this.element.isConnected&&(this.easyMDE&&(this.easyMDE=null),this.easyMDE=new EasyMDE(this.#t()),this.storedValue!==void 0&&(this.easyMDE.value(this.storedValue),this.storedValue=void 0))}#t(){let i={element:this.element,promptURLs:!0,spellChecker:!1,previewRender:e=>{let t=Lr.sanitize(e,{ALLOWED_TAGS:["strong","em","sub","sup","details","summary"],ALLOWED_ATTR:[]}),r=le(t);return Lr.sanitize(r,{USE_PROFILES:{html:!0}})}};return this.element.attributes.id.value&&(i.autosave={enabled:!0,uniqueId:this.element.attributes.id.value,delay:1e3}),i}};var xo=class extends G{connect(){this.slimSelect||(this.#e(),this.element.addEventListener("turbo:morph-element",i=>{i.target===this.element&&!this.morphing&&(this.morphing=!0,requestAnimationFrame(()=>{this.#t(),this.morphing=!1}))}))}#e(){let i={};if(document.querySelector('[data-controller="remote-modal"]')){this.dropdownContainer=document.createElement("div"),this.dropdownContainer.className="ss-dropdown-container";let t=this.element.parentNode;getComputedStyle(t).position==="static"&&(t.style.position="relative",this.modifiedSelectWrapper=t),this.element.parentNode.insertBefore(this.dropdownContainer,this.element.nextSibling),i.contentLocation=this.dropdownContainer,i.contentPosition="absolute",i.openPosition="auto"}this.slimSelect=new SlimSelect({select:this.element,settings:i}),this.handleDropdownPosition(),this.boundHandleDropdownOpen=this.handleDropdownOpen.bind(this),this.boundHandleDropdownClose=this.handleDropdownClose.bind(this),this.element.addEventListener("ss:open",this.boundHandleDropdownOpen),this.element.addEventListener("ss:close",this.boundHandleDropdownClose),this.setupAriaObserver()}handleDropdownPosition(){if(this.dropdownContainer){let i=()=>{let e=this.element.getBoundingClientRect(),t=window.innerHeight-e.bottom,r=e.top;t<200&&r>t?(this.dropdownContainer.style.top="auto",this.dropdownContainer.style.bottom="100%",this.dropdownContainer.style.borderRadius="0.375rem 0.375rem 0 0"):(this.dropdownContainer.style.bottom="auto",this.dropdownContainer.style.borderRadius="0 0 0.375rem 0.375rem")};setTimeout(i,0),window.addEventListener("resize",i),window.addEventListener("scroll",i),this.repositionDropdown=i}}handleDropdownOpen(){this.dropdownContainer&&(this.dropdownContainer.style.height="auto",this.dropdownContainer.style.overflow="visible",this.dropdownContainer.classList.add("ss-active"),document.querySelectorAll(".ss-dropdown-container").forEach(e=>{e!==this.dropdownContainer&&(e.style.zIndex="9999")}),this.dropdownContainer.style.zIndex="10000")}handleDropdownClose(){this.dropdownContainer&&this.dropdownContainer.classList.remove("ss-active")}setupAriaObserver(){if(this.element){this.ariaObserver=new MutationObserver(t=>{t.forEach(r=>{r.attributeName==="aria-expanded"&&(r.target.getAttribute("aria-expanded")==="true"?this.handleDropdownOpen():this.handleDropdownClose())})});let e=[this.element,this.element.parentNode.querySelector(".ss-main"),this.element.parentNode.querySelector("[aria-expanded]")].find(t=>t&&t.hasAttribute&&t.hasAttribute("aria-expanded"));e&&(this.ariaObserver.observe(e,{attributes:!0,attributeFilter:["aria-expanded"]}),e.getAttribute("aria-expanded")==="true"?this.handleDropdownOpen():this.handleDropdownClose())}}disconnect(){this.#i()}#t(){this.element.isConnected&&(this.#i(),this.#e())}#i(){this.element&&(this.boundHandleDropdownOpen&&this.element.removeEventListener("ss:open",this.boundHandleDropdownOpen),this.boundHandleDropdownClose&&this.element.removeEventListener("ss:close",this.boundHandleDropdownClose)),this.ariaObserver&&(this.ariaObserver.disconnect(),this.ariaObserver=null),this.slimSelect&&(this.slimSelect.destroy(),this.slimSelect=null),this.repositionDropdown&&(window.removeEventListener("resize",this.repositionDropdown),window.removeEventListener("scroll",this.repositionDropdown),this.repositionDropdown=null),this.dropdownContainer&&this.dropdownContainer.parentNode&&(this.dropdownContainer.parentNode.removeChild(this.dropdownContainer),this.dropdownContainer=null),this.modifiedSelectWrapper&&(this.modifiedSelectWrapper.style.position="",this.modifiedSelectWrapper=null)}};var To=class extends G{connect(){this.picker||(this.modal=document.querySelector("[data-controller=remote-modal]"),this.picker=new flatpickr(this.element,this.#t()),this.element.addEventListener("turbo:morph-element",i=>{i.target===this.element&&!this.morphing&&(this.morphing=!0,requestAnimationFrame(()=>{this.#e(),this.morphing=!1}))}))}disconnect(){this.picker&&(this.picker.destroy(),this.picker=null)}#e(){this.element.isConnected&&(this.picker&&(this.picker.destroy(),this.picker=null),this.modal=document.querySelector("[data-controller=remote-modal]"),this.picker=new flatpickr(this.element,this.#t()))}#t(){let i={altInput:!0};return this.element.attributes.type.value=="datetime-local"?i.enableTime=!0:this.element.attributes.type.value=="time"&&(i.enableTime=!0,i.noCalendar=!0),this.modal&&(i.appendTo=this.modal),i}};var ko=class extends G{static targets=["input"];connect(){}disconnect(){this.inputTargetDisconnected()}inputTargetConnected(){!this.hasInputTarget||this.iti||(this.iti=window.intlTelInput(this.inputTarget,this.#t()),this.element.addEventListener("turbo:morph-element",i=>{i.target===this.element&&!this.morphing&&(this.morphing=!0,requestAnimationFrame(()=>{this.#e(),this.morphing=!1}))}))}inputTargetDisconnected(){this.iti&&(this.iti.destroy(),this.iti=null)}#e(){!this.inputTarget||!this.inputTarget.isConnected||(this.iti&&(this.iti.destroy(),this.iti=null),this.iti=window.intlTelInput(this.inputTarget,this.#t()))}#t(){return{strictMode:!0,hiddenInput:()=>({phone:this.inputTarget.attributes.name.value}),loadUtilsOnInit:"https://cdn.jsdelivr.net/npm/intl-tel-input@24.8.1/build/js/utils.js"}}};var Ao=class extends G{static targets=["select"];navigate(i){let e=this.selectTarget.value,t=document.createElement("a");t.href=e,this.element.appendChild(t),t.click(),t.remove()}};var Co=class extends G{static targets=["btn","tab"];static values={defaultTab:String,activeClasses:String,inActiveClasses:String};connect(){this.activeClasses=this.hasActiveClassesValue?this.activeClassesValue.split(" "):[],this.inActiveClasses=this.hasInActiveClassesValue?this.inActiveClassesValue.split(" "):[],this.#e(this.defaultTabValue||this.btnTargets[0].id)}select(i){this.#e(i.currentTarget.id)}#e(i){let e=this.btnTargets.find(r=>r.id===i);if(!e){console.error(`Tab Button with id "${i}" not found`);return}let t=this.tabTargets.find(r=>r.id===e.dataset.target);if(!t){console.error(`Tab Panel with id "${e.dataset.target}" not found`);return}this.tabTargets.forEach(r=>{r.hidden=!0,r.setAttribute("aria-hidden","true")}),this.btnTargets.forEach(r=>{r.setAttribute("aria-selected","false"),r.setAttribute("tabindex","-1"),r.classList.remove(...this.activeClasses),r.classList.add(...this.inActiveClasses)}),e.setAttribute("aria-selected","true"),e.setAttribute("tabindex","0"),e.classList.remove(...this.inActiveClasses),e.classList.add(...this.activeClasses),t.hidden=!1,t.setAttribute("aria-hidden","false"),e!==document.activeElement&&e.focus()}};function _0(i,e,t){let r=[];return i.forEach(s=>typeof s!="string"?r.push(s):e[Symbol.split](s).forEach((n,o,a)=>{n!==""&&r.push(n),o<a.length-1&&r.push(t)})),r}function Vd(i,e){let t=/\$/g,r="$$$$",s=[i];if(e==null)return s;for(let n of Object.keys(e))if(n!=="_"){let o=e[n];typeof o=="string"&&(o=t[Symbol.replace](o,r)),s=_0(s,new RegExp(`%\\{${n}\\}`,"g"),o)}return s}var F0=i=>{throw new Error(`missing string: ${i}`)},ur=class{locale;constructor(e,{onMissingKey:t=F0}={}){this.locale={strings:{},pluralize(r){return r===1?0:1}},Array.isArray(e)?e.forEach(this.#t,this):this.#t(e),this.#e=t}#e;#t(e){if(!e?.strings)return;let t=this.locale;Object.assign(this.locale,{strings:{...t.strings,...e.strings},pluralize:e.pluralize||t.pluralize})}translate(e,t){return this.translateArray(e,t).join("")}translateArray(e,t){let r=this.locale.strings[e];if(r==null&&(this.#e(e),r=e),typeof r=="object"){if(t&&typeof t.smart_count<"u"){let n=this.locale.pluralize(t.smart_count);return Vd(r[n],t)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof r!="string")throw new Error("string was not a string");return Vd(r,t)}};var Di=class{uppy;opts;id;defaultLocale;i18n;i18nArray;type;VERSION;constructor(e,t){this.uppy=e,this.opts=t??{}}getPluginState(){let{plugins:e}=this.uppy.getState();return e?.[this.id]||{}}setPluginState(e){let{plugins:t}=this.uppy.getState();this.uppy.setState({plugins:{...t,[this.id]:{...t[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){let e=new ur([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}};function wc(i){return i<10?`0${i}`:i.toString()}function Br(){let i=new Date,e=wc(i.getHours()),t=wc(i.getMinutes()),r=wc(i.getSeconds());return`${e}:${t}:${r}`}var $d={debug:()=>{},warn:()=>{},error:(...i)=>console.error(`[Uppy] [${Br()}]`,...i)},Wd={debug:(...i)=>console.debug(`[Uppy] [${Br()}]`,...i),warn:(...i)=>console.warn(`[Uppy] [${Br()}]`,...i),error:(...i)=>console.error(`[Uppy] [${Br()}]`,...i)};function Ls(i){return typeof i!="object"||i===null||!("nodeType"in i)?!1:i.nodeType===Node.ELEMENT_NODE}function P0(i,e=document){return typeof i=="string"?e.querySelector(i):Ls(i)?i:null}var Gd=P0;function O0(i){for(;i&&!i.dir;)i=i.parentNode;return i?.dir}var _o=O0;var Ns,X,Qd,M0,hr,Xd,Jd,ep,tp,Tc,Sc,Ec,R0,Ds={},ip=[],L0=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Bs=Array.isArray;function ni(i,e){for(var t in e)i[t]=e[t];return i}function kc(i){i&&i.parentNode&&i.parentNode.removeChild(i)}function Ti(i,e,t){var r,s,n,o={};for(n in e)n=="key"?r=e[n]:n=="ref"?s=e[n]:o[n]=e[n];if(arguments.length>2&&(o.children=arguments.length>3?Ns.call(arguments,2):t),typeof i=="function"&&i.defaultProps!=null)for(n in i.defaultProps)o[n]===void 0&&(o[n]=i.defaultProps[n]);return Is(i,o,r,s,null)}function Is(i,e,t,r,s){var n={type:i,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++Qd,__i:-1,__u:0};return s==null&&X.vnode!=null&&X.vnode(n),n}function Oo(){return{current:null}}function Ae(i){return i.children}function we(i,e){this.props=i,this.context=e}function Ur(i,e){if(e==null)return i.__?Ur(i.__,i.__i+1):null;for(var t;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null)return t.__e;return typeof i.type=="function"?Ur(i):null}function rp(i){var e,t;if((i=i.__)!=null&&i.__c!=null){for(i.__e=i.__c.base=null,e=0;e<i.__k.length;e++)if((t=i.__k[e])!=null&&t.__e!=null){i.__e=i.__c.base=t.__e;break}return rp(i)}}function Kd(i){(!i.__d&&(i.__d=!0)&&hr.push(i)&&!Po.__r++||Xd!=X.debounceRendering)&&((Xd=X.debounceRendering)||Jd)(Po)}function Po(){for(var i,e,t,r,s,n,o,a=1;hr.length;)hr.length>a&&hr.sort(ep),i=hr.shift(),a=hr.length,i.__d&&(t=void 0,r=void 0,s=(r=(e=i).__v).__e,n=[],o=[],e.__P&&((t=ni({},r)).__v=r.__v+1,X.vnode&&X.vnode(t),Ac(e.__P,t,r,e.__n,e.__P.namespaceURI,32&r.__u?[s]:null,n,s??Ur(r),!!(32&r.__u),o),t.__v=r.__v,t.__.__k[t.__i]=t,op(n,t,o),r.__e=r.__=null,t.__e!=s&&rp(t)));Po.__r=0}function sp(i,e,t,r,s,n,o,a,l,h,f){var m,y,b,k,F,P,M,A=r&&r.__k||ip,_=e.length;for(l=I0(t,e,A,l,_),m=0;m<_;m++)(b=t.__k[m])!=null&&(y=b.__i==-1?Ds:A[b.__i]||Ds,b.__i=m,P=Ac(i,b,y,s,n,o,a,l,h,f),k=b.__e,b.ref&&y.ref!=b.ref&&(y.ref&&Cc(y.ref,null,b),f.push(b.ref,b.__c||k,b)),F==null&&k!=null&&(F=k),(M=!!(4&b.__u))||y.__k===b.__k?l=np(b,l,i,M):typeof b.type=="function"&&P!==void 0?l=P:k&&(l=k.nextSibling),b.__u&=-7);return t.__e=F,l}function I0(i,e,t,r,s){var n,o,a,l,h,f=t.length,m=f,y=0;for(i.__k=new Array(s),n=0;n<s;n++)(o=e[n])!=null&&typeof o!="boolean"&&typeof o!="function"?(typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?o=i.__k[n]=Is(null,o,null,null,null):Bs(o)?o=i.__k[n]=Is(Ae,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?o=i.__k[n]=Is(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):i.__k[n]=o,l=n+y,o.__=i,o.__b=i.__b+1,a=null,(h=o.__i=D0(o,t,l,m))!=-1&&(m--,(a=t[h])&&(a.__u|=2)),a==null||a.__v==null?(h==-1&&(s>f?y--:s<f&&y++),typeof o.type!="function"&&(o.__u|=4)):h!=l&&(h==l-1?y--:h==l+1?y++:(h>l?y--:y++,o.__u|=4))):i.__k[n]=null;if(m)for(n=0;n<f;n++)(a=t[n])!=null&&!(2&a.__u)&&(a.__e==r&&(r=Ur(a)),lp(a,a));return r}function np(i,e,t,r){var s,n;if(typeof i.type=="function"){for(s=i.__k,n=0;s&&n<s.length;n++)s[n]&&(s[n].__=i,e=np(s[n],e,t,r));return e}i.__e!=e&&(r&&(e&&i.type&&!e.parentNode&&(e=Ur(i)),t.insertBefore(i.__e,e||null)),e=i.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function wt(i,e){return e=e||[],i==null||typeof i=="boolean"||(Bs(i)?i.some(function(t){wt(t,e)}):e.push(i)),e}function D0(i,e,t,r){var s,n,o,a=i.key,l=i.type,h=e[t],f=h!=null&&(2&h.__u)==0;if(h===null&&a==null||f&&a==h.key&&l==h.type)return t;if(r>(f?1:0)){for(s=t-1,n=t+1;s>=0||n<e.length;)if((h=e[o=s>=0?s--:n++])!=null&&!(2&h.__u)&&a==h.key&&l==h.type)return o}return-1}function Yd(i,e,t){e[0]=="-"?i.setProperty(e,t??""):i[e]=t==null?"":typeof t!="number"||L0.test(e)?t:t+"px"}function Fo(i,e,t,r,s){var n,o;e:if(e=="style")if(typeof t=="string")i.style.cssText=t;else{if(typeof r=="string"&&(i.style.cssText=r=""),r)for(e in r)t&&e in t||Yd(i.style,e,"");if(t)for(e in t)r&&t[e]==r[e]||Yd(i.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")n=e!=(e=e.replace(tp,"$1")),o=e.toLowerCase(),e=o in i||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),i.l||(i.l={}),i.l[e+n]=t,t?r?t.u=r.u:(t.u=Tc,i.addEventListener(e,n?Ec:Sc,n)):i.removeEventListener(e,n?Ec:Sc,n);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in i)try{i[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?i.removeAttribute(e):i.setAttribute(e,e=="popover"&&t==1?"":t))}}function Zd(i){return function(e){if(this.l){var t=this.l[e.type+i];if(e.t==null)e.t=Tc++;else if(e.t<t.u)return;return t(X.event?X.event(e):e)}}}function Ac(i,e,t,r,s,n,o,a,l,h){var f,m,y,b,k,F,P,M,A,_,S,E,C,O,N,z,V,j=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(l=!!(32&t.__u),n=[a=e.__e=t.__e]),(f=X.__b)&&f(e);e:if(typeof j=="function")try{if(M=e.props,A="prototype"in j&&j.prototype.render,_=(f=j.contextType)&&r[f.__c],S=f?_?_.props.value:f.__:r,t.__c?P=(m=e.__c=t.__c).__=m.__E:(A?e.__c=m=new j(M,S):(e.__c=m=new we(M,S),m.constructor=j,m.render=B0),_&&_.sub(m),m.state||(m.state={}),m.__n=r,y=m.__d=!0,m.__h=[],m._sb=[]),A&&m.__s==null&&(m.__s=m.state),A&&j.getDerivedStateFromProps!=null&&(m.__s==m.state&&(m.__s=ni({},m.__s)),ni(m.__s,j.getDerivedStateFromProps(M,m.__s))),b=m.props,k=m.state,m.__v=e,y)A&&j.getDerivedStateFromProps==null&&m.componentWillMount!=null&&m.componentWillMount(),A&&m.componentDidMount!=null&&m.__h.push(m.componentDidMount);else{if(A&&j.getDerivedStateFromProps==null&&M!==b&&m.componentWillReceiveProps!=null&&m.componentWillReceiveProps(M,S),e.__v==t.__v||!m.__e&&m.shouldComponentUpdate!=null&&m.shouldComponentUpdate(M,m.__s,S)===!1){for(e.__v!=t.__v&&(m.props=M,m.state=m.__s,m.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(K){K&&(K.__=e)}),E=0;E<m._sb.length;E++)m.__h.push(m._sb[E]);m._sb=[],m.__h.length&&o.push(m);break e}m.componentWillUpdate!=null&&m.componentWillUpdate(M,m.__s,S),A&&m.componentDidUpdate!=null&&m.__h.push(function(){m.componentDidUpdate(b,k,F)})}if(m.context=S,m.props=M,m.__P=i,m.__e=!1,C=X.__r,O=0,A){for(m.state=m.__s,m.__d=!1,C&&C(e),f=m.render(m.props,m.state,m.context),N=0;N<m._sb.length;N++)m.__h.push(m._sb[N]);m._sb=[]}else do m.__d=!1,C&&C(e),f=m.render(m.props,m.state,m.context),m.state=m.__s;while(m.__d&&++O<25);m.state=m.__s,m.getChildContext!=null&&(r=ni(ni({},r),m.getChildContext())),A&&!y&&m.getSnapshotBeforeUpdate!=null&&(F=m.getSnapshotBeforeUpdate(b,k)),z=f,f!=null&&f.type===Ae&&f.key==null&&(z=ap(f.props.children)),a=sp(i,Bs(z)?z:[z],e,t,r,s,n,o,a,l,h),m.base=e.__e,e.__u&=-161,m.__h.length&&o.push(m),P&&(m.__E=m.__=null)}catch(K){if(e.__v=null,l||n!=null)if(K.then){for(e.__u|=l?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;n[n.indexOf(a)]=null,e.__e=a}else{for(V=n.length;V--;)kc(n[V]);xc(e)}else e.__e=t.__e,e.__k=t.__k,K.then||xc(e);X.__e(K,e,t)}else n==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):a=e.__e=N0(t.__e,e,t,r,s,n,o,l,h);return(f=X.diffed)&&f(e),128&e.__u?void 0:a}function xc(i){i&&i.__c&&(i.__c.__e=!0),i&&i.__k&&i.__k.forEach(xc)}function op(i,e,t){for(var r=0;r<t.length;r++)Cc(t[r],t[++r],t[++r]);X.__c&&X.__c(e,i),i.some(function(s){try{i=s.__h,s.__h=[],i.some(function(n){n.call(s)})}catch(n){X.__e(n,s.__v)}})}function ap(i){return typeof i!="object"||i==null||i.__b&&i.__b>0?i:Bs(i)?i.map(ap):ni({},i)}function N0(i,e,t,r,s,n,o,a,l){var h,f,m,y,b,k,F,P=t.props||Ds,M=e.props,A=e.type;if(A=="svg"?s="http://www.w3.org/2000/svg":A=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),n!=null){for(h=0;h<n.length;h++)if((b=n[h])&&"setAttribute"in b==!!A&&(A?b.localName==A:b.nodeType==3)){i=b,n[h]=null;break}}if(i==null){if(A==null)return document.createTextNode(M);i=document.createElementNS(s,A,M.is&&M),a&&(X.__m&&X.__m(e,n),a=!1),n=null}if(A==null)P===M||a&&i.data==M||(i.data=M);else{if(n=n&&Ns.call(i.childNodes),!a&&n!=null)for(P={},h=0;h<i.attributes.length;h++)P[(b=i.attributes[h]).name]=b.value;for(h in P)if(b=P[h],h!="children"){if(h=="dangerouslySetInnerHTML")m=b;else if(!(h in M)){if(h=="value"&&"defaultValue"in M||h=="checked"&&"defaultChecked"in M)continue;Fo(i,h,null,b,s)}}for(h in M)b=M[h],h=="children"?y=b:h=="dangerouslySetInnerHTML"?f=b:h=="value"?k=b:h=="checked"?F=b:a&&typeof b!="function"||P[h]===b||Fo(i,h,b,P[h],s);if(f)a||m&&(f.__html==m.__html||f.__html==i.innerHTML)||(i.innerHTML=f.__html),e.__k=[];else if(m&&(i.innerHTML=""),sp(e.type=="template"?i.content:i,Bs(y)?y:[y],e,t,r,A=="foreignObject"?"http://www.w3.org/1999/xhtml":s,n,o,n?n[0]:t.__k&&Ur(t,0),a,l),n!=null)for(h=n.length;h--;)kc(n[h]);a||(h="value",A=="progress"&&k==null?i.removeAttribute("value"):k!=null&&(k!==i[h]||A=="progress"&&!k||A=="option"&&k!=P[h])&&Fo(i,h,k,P[h],s),h="checked",F!=null&&F!=i[h]&&Fo(i,h,F,P[h],s))}return i}function Cc(i,e,t){try{if(typeof i=="function"){var r=typeof i.__u=="function";r&&i.__u(),r&&e==null||(i.__u=i(e))}else i.current=e}catch(s){X.__e(s,t)}}function lp(i,e,t){var r,s;if(X.unmount&&X.unmount(i),(r=i.ref)&&(r.current&&r.current!=i.__e||Cc(r,null,e)),(r=i.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(n){X.__e(n,e)}r.base=r.__P=null}if(r=i.__k)for(s=0;s<r.length;s++)r[s]&&lp(r[s],e,t||typeof i.type!="function");t||kc(i.__e),i.__c=i.__=i.__e=void 0}function B0(i,e,t){return this.constructor(i,t)}function cp(i,e,t){var r,s,n,o;e==document&&(e=document.documentElement),X.__&&X.__(i,e),s=(r=typeof t=="function")?null:t&&t.__k||e.__k,n=[],o=[],Ac(e,i=(!r&&t||e).__k=Ti(Ae,null,[i]),s||Ds,Ds,e.namespaceURI,!r&&t?[t]:s?null:e.firstChild?Ns.call(e.childNodes):null,n,!r&&t?t:s?s.__e:e.firstChild,r,o),op(n,i,o)}function Us(i,e,t){var r,s,n,o,a=ni({},i.props);for(n in i.type&&i.type.defaultProps&&(o=i.type.defaultProps),e)n=="key"?r=e[n]:n=="ref"?s=e[n]:a[n]=e[n]===void 0&&o!=null?o[n]:e[n];return arguments.length>2&&(a.children=arguments.length>3?Ns.call(arguments,2):t),Is(i.type,a,r||i.key,s||i.ref,null)}Ns=ip.slice,X={__e:function(i,e,t,r){for(var s,n,o;e=e.__;)if((s=e.__c)&&!s.__)try{if((n=s.constructor)&&n.getDerivedStateFromError!=null&&(s.setState(n.getDerivedStateFromError(i)),o=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(i,r||{}),o=s.__d),o)return s.__E=s}catch(a){i=a}throw i}},Qd=0,M0=function(i){return i!=null&&i.constructor===void 0},we.prototype.setState=function(i,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ni({},this.state),typeof i=="function"&&(i=i(ni({},t),this.props)),i&&ni(t,i),i!=null&&this.__v&&(e&&this._sb.push(e),Kd(this))},we.prototype.forceUpdate=function(i){this.__v&&(this.__e=!0,i&&this.__h.push(i),Kd(this))},we.prototype.render=Ae,hr=[],Jd=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ep=function(i,e){return i.__v.__b-e.__v.__b},Po.__r=0,tp=/(PointerCapture)$|Capture$/i,Tc=0,Sc=Zd(!1),Ec=Zd(!0),R0=0;var zs,Pe,_c,up,Hs=0,vp=[],Le=X,hp=Le.__b,dp=Le.__r,pp=Le.diffed,fp=Le.__c,mp=Le.unmount,gp=Le.__;function Pc(i,e){Le.__h&&Le.__h(Pe,i,Hs||e),Hs=0;var t=Pe.__H||(Pe.__H={__:[],__h:[]});return i>=t.__.length&&t.__.push({}),t.__[i]}function Nt(i){return Hs=1,yp(Sp,i)}function yp(i,e,t){var r=Pc(zs++,2);if(r.t=i,!r.__c&&(r.__=[t?t(e):Sp(void 0,e),function(a){var l=r.__N?r.__N[0]:r.__[0],h=r.t(l,a);l!==h&&(r.__N=[h,r.__[1]],r.__c.setState({}))}],r.__c=Pe,!Pe.__f)){var s=function(a,l,h){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(y){return!!y.__c});if(f.every(function(y){return!y.__N}))return!n||n.call(this,a,l,h);var m=r.__c.props!==a;return f.forEach(function(y){if(y.__N){var b=y.__[0];y.__=y.__N,y.__N=void 0,b!==y.__[0]&&(m=!0)}}),n&&n.call(this,a,l,h)||m};Pe.__f=!0;var n=Pe.shouldComponentUpdate,o=Pe.componentWillUpdate;Pe.componentWillUpdate=function(a,l,h){if(this.__e){var f=n;n=void 0,s(a,l,h),n=f}o&&o.call(this,a,l,h)},Pe.shouldComponentUpdate=s}return r.__N||r.__}function Kt(i,e){var t=Pc(zs++,3);!Le.__s&&wp(t.__H,e)&&(t.__=i,t.u=e,Pe.__H.__h.push(t))}function Ni(i){return Hs=5,Bi(function(){return{current:i}},[])}function Bi(i,e){var t=Pc(zs++,7);return wp(t.__H,e)&&(t.__=i(),t.__H=e,t.__h=i),t.__}function Ui(i,e){return Hs=8,Bi(function(){return i},e)}function U0(){for(var i;i=vp.shift();)if(i.__P&&i.__H)try{i.__H.__h.forEach(Mo),i.__H.__h.forEach(Fc),i.__H.__h=[]}catch(e){i.__H.__h=[],Le.__e(e,i.__v)}}Le.__b=function(i){Pe=null,hp&&hp(i)},Le.__=function(i,e){i&&e.__k&&e.__k.__m&&(i.__m=e.__k.__m),gp&&gp(i,e)},Le.__r=function(i){dp&&dp(i),zs=0;var e=(Pe=i.__c).__H;e&&(_c===Pe?(e.__h=[],Pe.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(Mo),e.__h.forEach(Fc),e.__h=[],zs=0)),_c=Pe},Le.diffed=function(i){pp&&pp(i);var e=i.__c;e&&e.__H&&(e.__H.__h.length&&(vp.push(e)!==1&&up===Le.requestAnimationFrame||((up=Le.requestAnimationFrame)||z0)(U0)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),_c=Pe=null},Le.__c=function(i,e){e.some(function(t){try{t.__h.forEach(Mo),t.__h=t.__h.filter(function(r){return!r.__||Fc(r)})}catch(r){e.some(function(s){s.__h&&(s.__h=[])}),e=[],Le.__e(r,t.__v)}}),fp&&fp(i,e)},Le.unmount=function(i){mp&&mp(i);var e,t=i.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{Mo(r)}catch(s){e=s}}),t.__H=void 0,e&&Le.__e(e,t.__v))};var bp=typeof requestAnimationFrame=="function";function z0(i){var e,t=function(){clearTimeout(r),bp&&cancelAnimationFrame(e),setTimeout(i)},r=setTimeout(t,35);bp&&(e=requestAnimationFrame(t))}function Mo(i){var e=Pe,t=i.__c;typeof t=="function"&&(i.__c=void 0,t()),Pe=e}function Fc(i){var e=Pe;i.__c=i.__(),Pe=e}function wp(i,e){return!i||i.length!==e.length||e.some(function(t,r){return t!==i[r]})}function Sp(i,e){return typeof e=="function"?e(i):e}function j0(i,e){for(var t in e)i[t]=e[t];return i}function Ep(i,e){for(var t in i)if(t!=="__source"&&!(t in e))return!0;for(var r in e)if(r!=="__source"&&i[r]!==e[r])return!0;return!1}function xp(i,e){this.props=i,this.context=e}(xp.prototype=new we).isPureReactComponent=!0,xp.prototype.shouldComponentUpdate=function(i,e){return Ep(this.props,i)||Ep(this.state,e)};var Tp=X.__b;X.__b=function(i){i.type&&i.type.__f&&i.ref&&(i.props.ref=i.ref,i.ref=null),Tp&&Tp(i)};var IC=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;var q0=X.__e;X.__e=function(i,e,t,r){if(i.then){for(var s,n=e;n=n.__;)if((s=n.__c)&&s.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),s.__c(i,e)}q0(i,e,t,r)};var kp=X.unmount;function Op(i,e,t){return i&&(i.__c&&i.__c.__H&&(i.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),i.__c.__H=null),(i=j0({},i)).__c!=null&&(i.__c.__P===t&&(i.__c.__P=e),i.__c.__e=!0,i.__c=null),i.__k=i.__k&&i.__k.map(function(r){return Op(r,e,t)})),i}function Mp(i,e,t){return i&&t&&(i.__v=null,i.__k=i.__k&&i.__k.map(function(r){return Mp(r,e,t)}),i.__c&&i.__c.__P===e&&(i.__e&&t.appendChild(i.__e),i.__c.__e=!0,i.__c.__P=t)),i}function Oc(){this.__u=0,this.o=null,this.__b=null}function Rp(i){var e=i.__.__c;return e&&e.__a&&e.__a(i)}function Ro(){this.i=null,this.l=null}X.unmount=function(i){var e=i.__c;e&&e.__R&&e.__R(),e&&32&i.__u&&(i.type=null),kp&&kp(i)},(Oc.prototype=new we).__c=function(i,e){var t=e.__c,r=this;r.o==null&&(r.o=[]),r.o.push(t);var s=Rp(r.__v),n=!1,o=function(){n||(n=!0,t.__R=null,s?s(a):a())};t.__R=o;var a=function(){if(!--r.__u){if(r.state.__a){var l=r.state.__a;r.__v.__k[0]=Mp(l,l.__c.__P,l.__c.__O)}var h;for(r.setState({__a:r.__b=null});h=r.o.pop();)h.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),i.then(o,o)},Oc.prototype.componentWillUnmount=function(){this.o=[]},Oc.prototype.render=function(i,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=Op(this.__b,t,r.__O=r.__P)}this.__b=null}var s=e.__a&&Ti(Ae,null,i.fallback);return s&&(s.__u&=-33),[Ti(Ae,null,e.__a?null:i.children),s]};var Ap=function(i,e,t){if(++t[1]===t[0]&&i.l.delete(e),i.props.revealOrder&&(i.props.revealOrder[0]!=="t"||!i.l.size))for(t=i.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;i.i=t=t[2]}};(Ro.prototype=new we).__a=function(i){var e=this,t=Rp(e.__v),r=e.l.get(i);return r[0]++,function(s){var n=function(){e.props.revealOrder?(r.push(s),Ap(e,i,r)):s()};t?t(n):n()}},Ro.prototype.render=function(i){this.i=null,this.l=new Map;var e=wt(i.children);i.revealOrder&&i.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return i.children},Ro.prototype.componentDidUpdate=Ro.prototype.componentDidMount=function(){var i=this;this.l.forEach(function(e,t){Ap(i,t,e)})};var V0=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,$0=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,W0=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,G0=/[A-Z0-9]/g,X0=typeof document<"u",K0=function(i){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(i)};function Mc(i,e,t){return e.__k==null&&(e.textContent=""),cp(i,e),typeof t=="function"&&t(),i?i.__c:null}we.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(i){Object.defineProperty(we.prototype,i,{configurable:!0,get:function(){return this["UNSAFE_"+i]},set:function(e){Object.defineProperty(this,i,{configurable:!0,writable:!0,value:e})}})});var Cp=X.event;function Y0(){}function Z0(){return this.cancelBubble}function Q0(){return this.defaultPrevented}X.event=function(i){return Cp&&(i=Cp(i)),i.persist=Y0,i.isPropagationStopped=Z0,i.isDefaultPrevented=Q0,i.nativeEvent=i};var Lp,J0={enumerable:!1,configurable:!0,get:function(){return this.class}},_p=X.vnode;X.vnode=function(i){typeof i.type=="string"&&function(e){var t=e.props,r=e.type,s={},n=r.indexOf("-")===-1;for(var o in t){var a=t[o];if(!(o==="value"&&"defaultValue"in t&&a==null||X0&&o==="children"&&r==="noscript"||o==="class"||o==="className")){var l=o.toLowerCase();o==="defaultValue"&&"value"in t&&t.value==null?o="value":o==="download"&&a===!0?a="":l==="translate"&&a==="no"?a=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?o="ondblclick":l!=="onchange"||r!=="input"&&r!=="textarea"||K0(t.type)?l==="onfocus"?o="onfocusin":l==="onblur"?o="onfocusout":W0.test(o)&&(o=l):l=o="oninput":n&&$0.test(o)?o=o.replace(G0,"-$&").toLowerCase():a===null&&(a=void 0),l==="oninput"&&s[o=l]&&(o="oninputCapture"),s[o]=a}}r=="select"&&s.multiple&&Array.isArray(s.value)&&(s.value=wt(t.children).forEach(function(h){h.props.selected=s.value.indexOf(h.props.value)!=-1})),r=="select"&&s.defaultValue!=null&&(s.value=wt(t.children).forEach(function(h){h.props.selected=s.multiple?s.defaultValue.indexOf(h.props.value)!=-1:s.defaultValue==h.props.value})),t.class&&!t.className?(s.class=t.class,Object.defineProperty(s,"className",J0)):(t.className&&!t.class||t.class&&t.className)&&(s.class=s.className=t.className),e.props=s}(i),i.$$typeof=V0,_p&&_p(i)};var Fp=X.__r;X.__r=function(i){Fp&&Fp(i),Lp=i.__c};var Pp=X.diffed;X.diffed=function(i){Pp&&Pp(i);var e=i.props,t=i.__e;t!=null&&i.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value),Lp=null};function ew(i){let e=null,t;return(...r)=>(t=r,e||(e=Promise.resolve().then(()=>(e=null,i(...t)))),e)}var Rc=class i extends Di{#e;isTargetDOMEl;el;parent;title;getTargetPlugin(e){let t;if(typeof e?.addTarget=="function")t=e,t instanceof i||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:t,UIPlugin:i}}));else if(typeof e=="function"){let r=e;this.uppy.iteratePlugins(s=>{s instanceof r&&(t=s)})}return t}mount(e,t){let r=t.id,s=Gd(e);if(s){this.isTargetDOMEl=!0;let a=document.createElement("div");return a.classList.add("uppy-Root"),this.#e=ew(l=>{this.uppy.getPlugin(this.id)&&(Mc(this.render(l,a),a),this.afterUpdate())}),this.uppy.log(`Installing ${r} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(s.innerHTML=""),Mc(this.render(this.uppy.getState(),a),a),this.el=a,s.appendChild(a),a.dir=this.opts.direction||_o(a)||"ltr",this.onMount(),this.el}let n=this.getTargetPlugin(e);if(n)return this.uppy.log(`Installing ${r} to ${n.id}`),this.parent=n,this.el=n.addTarget(t),this.onMount(),this.el;this.uppy.log(`Not installing ${r}`);let o=`Invalid target option given to ${r}.`;throw typeof e=="function"?o+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":o+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(o)}render(e,t){throw new Error("Extend the render method to add your plugin to a DOM element")}update(e){this.el!=null&&this.#e?.(e)}unmount(){this.isTargetDOMEl&&this.el?.remove(),this.onUnmount()}onMount(){}onUnmount(){}},Yt=Rc;var Ip={name:"@uppy/store-default",description:"The default simple object-based store for Uppy.",version:"4.3.2",license:"MIT",main:"lib/index.js",type:"module",scripts:{build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},keywords:["file uploader","uppy","uppy-store"],homepage:"https://uppy.io",bugs:{url:"https://github.com/transloadit/uppy/issues"},devDependencies:{jsdom:"^26.1.0",typescript:"^5.8.3",vitest:"^3.2.4"},repository:{type:"git",url:"git+https://github.com/transloadit/uppy.git"},files:["src","lib","dist","CHANGELOG.md"]};var Lc=class{static VERSION=Ip.version;state={};#e=new Set;getState(){return this.state}setState(e){let t={...this.state},r={...this.state,...e};this.state=r,this.#t(t,r,e)}subscribe(e){return this.#e.add(e),()=>{this.#e.delete(e)}}#t(...e){this.#e.forEach(t=>{t(...e)})}},Dp=Lc;function dr(i){let e=i.lastIndexOf(".");return e===-1||e===i.length-1?{name:i,extension:void 0}:{name:i.slice(0,e),extension:i.slice(e+1)}}var Ic={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function js(i){if(i.type)return i.type;let e=i.name?dr(i.name).extension?.toLowerCase():null;return e&&e in Ic?Ic[e]:"application/octet-stream"}function iw(i){return i.charCodeAt(0).toString(32)}function Np(i){let e="";return i.replace(/[^A-Z0-9]/gi,t=>(e+=`-${iw(t)}`,"/"))+e}function Bp(i,e){let t=e||"uppy";return typeof i.name=="string"&&(t+=`-${Np(i.name.toLowerCase())}`),i.type!==void 0&&(t+=`-${i.type}`),i.meta&&typeof i.meta.relativePath=="string"&&(t+=`-${Np(i.meta.relativePath.toLowerCase())}`),i.data.size!==void 0&&(t+=`-${i.data.size}`),i.data.lastModified!==void 0&&(t+=`-${i.data.lastModified}`),t}function rw(i){return!i.isRemote||!i.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(i.remote.provider)}function Lo(i,e){if(rw(i))return i.id;let t=js(i);return Bp({...i,type:t},e)}var Of=ve(vf(),1),Mf=ve(wf(),1);var Yw="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var zi=(i=21)=>{let e="",t=i|0;for(;t--;)e+=Yw[Math.random()*64|0];return e};var Sf={name:"@uppy/core",description:"Core module for the extensible JavaScript file upload widget with support for drag&drop, resumable uploads, previews, restrictions, file processing/encoding, remote providers like Instagram, Dropbox, Google Drive, S3 and more :dog:",version:"4.5.3",license:"MIT",main:"lib/index.js",style:"dist/style.min.css",type:"module",sideEffects:["*.css"],scripts:{build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},keywords:["file uploader","uppy","uppy-plugin"],homepage:"https://uppy.io",bugs:{url:"https://github.com/transloadit/uppy/issues"},repository:{type:"git",url:"git+https://github.com/transloadit/uppy.git"},files:["src","lib","dist","CHANGELOG.md"],dependencies:{"@transloadit/prettier-bytes":"^0.3.4","@uppy/store-default":"^4.3.2","@uppy/utils":"^6.2.2",lodash:"^4.17.21","mime-match":"^1.0.2","namespace-emitter":"^2.0.1",nanoid:"^5.0.9",preact:"^10.5.13"},devDependencies:{"@types/deep-freeze":"^0",cssnano:"^7.0.7","deep-freeze":"^0.0.1",jsdom:"^26.1.0",postcss:"^8.5.6","postcss-cli":"^11.0.1",sass:"^1.89.2",typescript:"^5.8.3",vitest:"^3.2.4"}};function zc(i,e){return e.name?e.name:i.split("/")[0]==="image"?`${i.split("/")[0]}.${i.split("/")[1]}`:"noname"}var Ef={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};var Vs=ve(Do(),1),Ff=ve(_f(),1),Pf={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]},St=class extends Error{isUserFacing;file;constructor(e,t){super(e),this.isUserFacing=t?.isUserFacing??!0,t?.file&&(this.file=t.file)}isRestriction=!0},No=class{getI18n;getOpts;constructor(e,t){this.getI18n=t,this.getOpts=()=>{let r=e();if(r.restrictions?.allowedFileTypes!=null&&!Array.isArray(r.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return r}}validateAggregateRestrictions(e,t){let{maxTotalFileSize:r,maxNumberOfFiles:s}=this.getOpts().restrictions;if(s&&e.filter(o=>!o.isGhost).length+t.length>s)throw new St(`${this.getI18n()("youCanOnlyUploadX",{smart_count:s})}`);if(r){let n=[...e,...t].reduce((o,a)=>o+(a.size??0),0);if(n>r)throw new St(this.getI18n()("aggregateExceedsSize",{sizeAllowed:(0,Vs.default)(r),size:(0,Vs.default)(n)}))}}validateSingleFile(e){let{maxFileSize:t,minFileSize:r,allowedFileTypes:s}=this.getOpts().restrictions;if(s&&!s.some(o=>o.includes("/")?e.type?(0,Ff.default)(e.type.replace(/;.*?$/,""),o):!1:o[0]==="."&&e.extension?e.extension.toLowerCase()===o.slice(1).toLowerCase():!1)){let o=s.join(", ");throw new St(this.getI18n()("youCanOnlyUploadFileTypes",{types:o}),{file:e})}if(t&&e.size!=null&&e.size>t)throw new St(this.getI18n()("exceedsSize",{size:(0,Vs.default)(t),file:e.name??this.getI18n()("unnamed")}),{file:e});if(r&&e.size!=null&&e.size<r)throw new St(this.getI18n()("inferiorSize",{size:(0,Vs.default)(r)}),{file:e})}validate(e,t){t.forEach(r=>{this.validateSingleFile(r)}),this.validateAggregateRestrictions(e,t)}validateMinNumberOfFiles(e){let{minNumberOfFiles:t}=this.getOpts().restrictions;if(t&&Object.keys(e).length<t)throw new St(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:t}))}getMissingRequiredMetaFields(e){let t=new St(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:e.name??this.getI18n()("unnamed")})),{requiredMetaFields:r}=this.getOpts().restrictions,s=[];for(let n of r)(!Object.hasOwn(e.meta,n)||e.meta[n]==="")&&s.push(n);return{missingFields:s,error:t}}};function Hc(i){if(i==null&&typeof navigator<"u"&&(i=navigator.userAgent),!i)return!0;let e=/Edge\/(\d+\.\d+)/.exec(i);if(!e)return!0;let r=e[1].split(".",2),s=parseInt(r[0],10),n=parseInt(r[1],10);return s<15||s===15&&n<15063||s>18||s===18&&n>=18218}var Bo={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null},jc=class i{static VERSION=Sf.version;#e=Object.create(null);#t;#i;#r=(0,Mf.default)();#n=new Set;#o=new Set;#s=new Set;defaultLocale;locale;opts;store;i18n;i18nArray;scheduledAutoProceed=null;wasOffline=!1;constructor(e){this.defaultLocale=Ef;let t={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:Pf,meta:{},onBeforeFileAdded:(s,n)=>!Object.hasOwn(n,s.id),onBeforeUpload:s=>s,store:new Dp,logger:$d,infoTimeout:5e3},r={...t,...e};this.opts={...r,restrictions:{...t.restrictions,...e?.restrictions}},e?.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e?.debug&&(this.opts.logger=Wd),this.log(`Using Core v${i.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...Bo,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:Hc(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),this.#t=new No(()=>this.opts,()=>this.i18n),this.#i=this.store.subscribe((s,n,o)=>{this.emit("state-update",s,n,o),this.updateAll(n)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),this.#S()}emit(e,...t){this.#r.emit(e,...t)}on(e,t){return this.#r.on(e,t),this}once(e,t){return this.#r.once(e,t),this}off(e,t){return this.#r.off(e,t),this}updateAll(e){this.iteratePlugins(t=>{t.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){let t=this.getState().files;this.setState({files:{...t,...Object.fromEntries(Object.entries(e).map(([r,s])=>[r,{...t[r],...s}]))}})}setFileState(e,t){if(!this.getState().files[e])throw new Error(`Can\u2019t set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:t})}i18nInit(){let e=r=>this.log(`Missing i18n string: ${r}`,"error"),t=new ur([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=t.translate.bind(t),this.i18nArray=t.translateArray.bind(t),this.locale=t.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e?.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(t=>{t.setOptions(e)}),this.setState(void 0)}resetProgress(){let e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},t={...this.getState().files},r=Object.create(null);Object.keys(t).forEach(s=>{r[s]={...t[s],progress:{...t[s].progress,...e},tus:void 0,transloadit:void 0}}),this.setState({files:r,...Bo})}clear(){let{capabilities:e,currentUploads:t}=this.getState();if(Object.keys(t).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...Bo,files:{}})}addPreProcessor(e){this.#n.add(e)}removePreProcessor(e){return this.#n.delete(e)}addPostProcessor(e){this.#s.add(e)}removePostProcessor(e){return this.#s.delete(e)}addUploader(e){this.#o.add(e)}removeUploader(e){return this.#o.delete(e)}setMeta(e){let t={...this.getState().meta,...e},r={...this.getState().files};Object.keys(r).forEach(s=>{r[s]={...r[s],meta:{...r[s].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:r})}setFileMeta(e,t){let r={...this.getState().files};if(!r[e]){this.log(`Was trying to set metadata for a file that has been removed: ${e}`);return}let s={...r[e].meta,...t};r[e]={...r[e],meta:s},this.setState({files:r})}getFile(e){return this.getState().files[e]}getFiles(){let{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(t=>this.getFile(t))}getObjectOfFilesPerState(){let{files:e,totalProgress:t,error:r}=this.getState(),s=Object.values(e),n=[],o=[],a=[],l=[],h=[],f=[],m=[],y=[],b=[];for(let k of s){let{progress:F}=k;!F.uploadComplete&&F.uploadStarted&&(n.push(k),k.isPaused||y.push(k)),F.uploadStarted||o.push(k),(F.uploadStarted||F.preprocess||F.postprocess)&&a.push(k),F.uploadStarted&&l.push(k),k.isPaused&&h.push(k),F.uploadComplete&&f.push(k),k.error&&m.push(k),(F.preprocess||F.postprocess)&&b.push(k)}return{newFiles:o,startedFiles:a,uploadStartedFiles:l,pausedFiles:h,completeFiles:f,erroredFiles:m,inProgressFiles:n,inProgressNotPausedFiles:y,processingFiles:b,isUploadStarted:l.length>0,isAllComplete:t===100&&f.length===s.length&&b.length===0,isAllErrored:!!r&&m.length===s.length,isAllPaused:n.length!==0&&h.length===n.length,isUploadInProgress:n.length>0,isSomeGhost:s.some(k=>k.isGhost)}}#l(e){for(let o of e)o.isRestriction?this.emit("restriction-failed",o.file,o):this.emit("error",o,o.file),this.log(o,"warning");let t=e.filter(o=>o.isUserFacing),r=4,s=t.slice(0,r),n=t.slice(r);s.forEach(({message:o,details:a=""})=>{this.info({message:o,details:a},"error",this.opts.infoTimeout)}),n.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:n.length})})}validateRestrictions(e,t=this.getFiles()){try{this.#t.validate(t,[e])}catch(r){return r}return null}validateSingleFile(e){try{this.#t.validateSingleFile(e)}catch(t){return t.message}return null}validateAggregateRestrictions(e){let t=this.getFiles();try{this.#t.validateAggregateRestrictions(t,e)}catch(r){return r.message}return null}#a(e){let{missingFields:t,error:r}=this.#t.getMissingRequiredMetaFields(e);return t.length>0?(this.setFileState(e.id,{missingRequiredMetaFields:t,error:r.message}),this.log(r.message),this.emit("restriction-failed",e,r),!1):(t.length===0&&e.missingRequiredMetaFields&&this.setFileState(e.id,{missingRequiredMetaFields:[]}),!0)}#f(e){let t=!0;for(let r of Object.values(e))this.#a(r)||(t=!1);return t}#c(e){let{allowNewUpload:t}=this.getState();if(t===!1){let r=new St(this.i18n("noMoreFilesAllowed"),{file:e});throw this.#l([r]),r}}checkIfFileAlreadyExists(e){let{files:t}=this.getState();return!!(t[e]&&!t[e].isGhost)}#h(e){let t=e instanceof File?{name:e.name,type:e.type,size:e.size,data:e}:e,r=js(t),s=zc(r,t),n=dr(s).extension,o=Lo(t,this.getID()),a=t.meta||{};a.name=s,a.type=r;let l=Number.isFinite(t.data.size)?t.data.size:null;return{source:t.source||"",id:o,name:s,extension:n||"",meta:{...this.getState().meta,...a},type:r,data:t.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:l,uploadComplete:!1,uploadStarted:null},size:l,isGhost:!1,isRemote:t.isRemote||!1,remote:t.remote,preview:t.preview}}#u(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(e=>{e.isRestriction||this.log(e.stack||e.message||e)})},4))}#p(e){let{files:t}=this.getState(),r={...t},s=[],n=[];for(let o of e)try{let a=this.#h(o),l=t[a.id]?.isGhost;l&&(a={...t[a.id],isGhost:!1,data:o.data},this.log(`Replaced the blob in the restored ghost file: ${a.name}, ${a.id}`));let h=this.opts.onBeforeFileAdded(a,r);if(t=this.getState().files,r={...t,...r},!h&&this.checkIfFileAlreadyExists(a.id))throw new St(this.i18n("noDuplicates",{fileName:a.name??this.i18n("unnamed")}),{file:o});if(h===!1&&!l)throw new St("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:o});typeof h=="object"&&h!==null&&(a=h),this.#t.validateSingleFile(a),r[a.id]=a,s.push(a)}catch(a){n.push(a)}try{this.#t.validateAggregateRestrictions(Object.values(t),s)}catch(o){return n.push(o),{nextFilesState:t,validFilesToAdd:[],errors:n}}return{nextFilesState:r,validFilesToAdd:s,errors:n}}addFile(e){this.#c(e);let{nextFilesState:t,validFilesToAdd:r,errors:s}=this.#p([e]),n=s.filter(a=>a.isRestriction);if(this.#l(n),s.length>0)throw s[0];this.setState({files:t});let[o]=r;return this.emit("file-added",o),this.emit("files-added",r),this.log(`Added file: ${o.name}, ${o.id}, mime type: ${o.type}`),this.#u(),o.id}addFiles(e){this.#c();let{nextFilesState:t,validFilesToAdd:r,errors:s}=this.#p(e),n=s.filter(a=>a.isRestriction);this.#l(n);let o=s.filter(a=>!a.isRestriction);if(o.length>0){let a=`Multiple errors occurred while adding files:
`;if(o.forEach(l=>{a+=`
 * ${l.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:o.length}),details:a},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(o,a);{let l=new Error(a);throw l.errors=o,l}}this.setState({files:t}),r.forEach(a=>{this.emit("file-added",a)}),this.emit("files-added",r),r.length>5?this.log(`Added batch of ${r.length} files`):Object.values(r).forEach(a=>{this.log(`Added file: ${a.name}
 id: ${a.id}
 type: ${a.type}`)}),r.length>0&&this.#u()}removeFiles(e){let{files:t,currentUploads:r}=this.getState(),s={...t},n={...r},o=Object.create(null);e.forEach(f=>{t[f]&&(o[f]=t[f],delete s[f])});function a(f){return o[f]===void 0}Object.keys(n).forEach(f=>{let m=r[f].fileIDs.filter(a);if(m.length===0){delete n[f];return}let{capabilities:y}=this.getState();if(m.length!==r[f].fileIDs.length&&!y.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");n[f]={...r[f],fileIDs:m}});let l={currentUploads:n,files:s};Object.keys(s).length===0&&(l.allowNewUpload=!0,l.error=null,l.recoveredState=null),this.setState(l),this.#v();let h=Object.keys(o);h.forEach(f=>{this.emit("file-removed",o[f])}),h.length>5?this.log(`Removed ${h.length} files`):this.log(`Removed files: ${h.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;let t=this.getFile(e),s=!(t.isPaused||!1);return this.setFileState(e,{isPaused:s}),this.emit("upload-pause",t,s),s}pauseAll(){let e={...this.getState().files};Object.keys(e).filter(r=>!e[r].progress.uploadComplete&&e[r].progress.uploadStarted).forEach(r=>{let s={...e[r],isPaused:!0};e[r]=s}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){let e={...this.getState().files};Object.keys(e).filter(r=>!e[r].progress.uploadComplete&&e[r].progress.uploadStarted).forEach(r=>{let s={...e[r],isPaused:!1,error:null};e[r]=s}),this.setState({files:e}),this.emit("resume-all")}#g(){let{files:e}=this.getState();return Object.keys(e).filter(t=>{let r=e[t];return r.error&&(!r.missingRequiredMetaFields||r.missingRequiredMetaFields.length===0)})}async#d(){let e=this.#g(),t={...this.getState().files};if(e.forEach(s=>{t[s]={...t[s],isPaused:!1,error:null}}),this.setState({files:t,error:null}),this.emit("retry-all",this.getFilesByIds(e)),e.length===0)return{successful:[],failed:[]};let r=this.#y(e,{forceAllowNewUpload:!0});return this.#k(r)}async retryAll(){let e=await this.#d();return this.emit("complete",e),e}cancelAll(){this.emit("cancel-all");let{files:e}=this.getState(),t=Object.keys(e);t.length&&this.removeFiles(t),this.setState(Bo)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));let t=this.#y([e],{forceAllowNewUpload:!0});return this.#k(t)}logout(){this.iteratePlugins(e=>{e.provider?.logout?.()})}#w=(e,t)=>{let r=e?this.getFile(e.id):void 0;if(e==null||!r){this.log(`Not setting progress for a file that has been removed: ${e?.id}`);return}if(r.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${e.id}`);return}let s={bytesTotal:t.bytesTotal,percentage:t.bytesTotal!=null&&Number.isFinite(t.bytesTotal)&&t.bytesTotal>0?Math.round(t.bytesUploaded/t.bytesTotal*100):void 0};r.progress.uploadStarted!=null?this.setFileState(e.id,{progress:{...r.progress,...s,bytesUploaded:t.bytesUploaded}}):this.setFileState(e.id,{progress:{...r.progress,...s}}),this.#v()};#b(){let e=this.#x(),t=null;e!=null&&(t=Math.round(e*100),t>100?t=100:t<0&&(t=0)),this.emit("progress",t??0),this.setState({totalProgress:t??0})}#v=(0,Of.default)(()=>this.#b(),500,{leading:!0,trailing:!0});[Symbol.for("uppy test: updateTotalProgress")](){return this.#b()}#x(){let t=this.getFiles().filter(l=>l.progress.uploadStarted||l.progress.preprocess||l.progress.postprocess);if(t.length===0)return 0;if(t.every(l=>l.progress.uploadComplete))return 1;let r=l=>l.progress.bytesTotal!=null&&l.progress.bytesTotal!==0,s=t.filter(r),n=t.filter(l=>!r(l));if(s.every(l=>l.progress.uploadComplete)&&n.length>0&&!n.every(l=>l.progress.uploadComplete))return null;let o=s.reduce((l,h)=>l+(h.progress.bytesTotal??0),0),a=s.reduce((l,h)=>l+(h.progress.bytesUploaded||0),0);return o===0?0:a/o}#S(){let e=(s,n,o)=>{let a=s.message||"Unknown error";s.details&&(a+=` ${s.details}`),this.setState({error:a}),n!=null&&n.id in this.getState().files&&this.setFileState(n.id,{error:a,response:o})};this.on("error",e),this.on("upload-error",(s,n,o)=>{if(e(n,s,o),typeof n=="object"&&n.message){this.log(n.message,"error");let a=new Error(this.i18n("failedToUpload",{file:s?.name??""}));a.isUserFacing=!0,a.details=n.message,n.details&&(a.details+=` ${n.details}`),this.#l([a])}else this.#l([n])});let t=null;this.on("upload-stalled",(s,n)=>{let{message:o}=s,a=n.map(l=>l.meta.name).join(", ");t||(this.info({message:o,details:a},"warning",this.opts.infoTimeout),t=setTimeout(()=>{t=null},this.opts.infoTimeout)),this.log(`${o} ${a}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});let r=s=>{let n=s.filter(a=>{let l=a!=null&&this.getFile(a.id);return l||this.log(`Not setting progress for a file that has been removed: ${a?.id}`),l}),o=Object.fromEntries(n.map(a=>[a.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:a.size}}]));this.patchFilesState(o)};this.on("upload-start",r),this.on("upload-progress",this.#w),this.on("upload-success",(s,n)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s?.id}`);return}let o=this.getFile(s.id).progress;this.setFileState(s.id,{progress:{...o,postprocess:this.#s.size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:o.bytesTotal},response:n,uploadURL:n.uploadURL,isPaused:!1}),s.size==null&&this.setFileState(s.id,{size:n.bytesUploaded||o.bytesTotal}),this.#v()}),this.on("preprocess-progress",(s,n)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s?.id}`);return}this.setFileState(s.id,{progress:{...this.getFile(s.id).progress,preprocess:n}})}),this.on("preprocess-complete",s=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s?.id}`);return}let n={...this.getState().files};n[s.id]={...n[s.id],progress:{...n[s.id].progress}},delete n[s.id].progress.preprocess,this.setState({files:n})}),this.on("postprocess-progress",(s,n)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s?.id}`);return}this.setFileState(s.id,{progress:{...this.getState().files[s.id].progress,postprocess:n}})}),this.on("postprocess-complete",s=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s?.id}`);return}let n={...this.getState().files};n[s.id]={...n[s.id],progress:{...n[s.id].progress}},delete n[s.id].progress.postprocess,this.setState({files:n})}),this.on("restored",()=>{this.#v()}),this.on("dashboard:file-edit-complete",s=>{s&&this.#a(s)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",this.#m),window.addEventListener("offline",this.#m),setTimeout(this.#m,3e3))}updateOnlineStatus(){window.navigator.onLine??!0?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}#m=this.updateOnlineStatus.bind(this);getID(){return this.opts.id}use(e,...t){if(typeof e!="function"){let o=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(o)}let r=new e(this,...t),s=r.id;if(!s)throw new Error("Your plugin must have an id");if(!r.type)throw new Error("Your plugin must have a type");let n=this.getPlugin(s);if(n){let o=`Already found a plugin named '${n.id}'. Tried to use: '${s}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(o)}return e.VERSION&&this.log(`Using ${s} v${e.VERSION}`),r.type in this.#e?this.#e[r.type].push(r):this.#e[r.type]=[r],r.install(),this.emit("plugin-added",r),this}getPlugin(e){for(let t of Object.values(this.#e)){let r=t.find(s=>s.id===e);if(r!=null)return r}}[Symbol.for("uppy test: getPlugins")](e){return this.#e[e]}iteratePlugins(e){Object.values(this.#e).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();let t=this.#e[e.type],r=t.findIndex(o=>o.id===e.id);r!==-1&&t.splice(r,1);let n={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(n)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),this.#i(),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",this.#m),window.removeEventListener("offline",this.#m))}hideInfo(){let{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,t="info",r=3e3){let s=typeof e=="object";this.setState({info:[...this.getState().info,{type:t,message:s?e.message:e,details:s?e.details:null}]}),setTimeout(()=>this.hideInfo(),r),this.emit("info-visible")}log(e,t){let{logger:r}=this.opts;switch(t){case"error":r.error(e);break;case"warning":r.warn(e);break;default:r.debug(e);break}}#T=new Map;registerRequestClient(e,t){this.#T.set(e,t)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);let t=this.#T.get(e.remote.requestClientId);if(t==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return t}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?this.#k(e):(this.#E(e),Promise.reject(new Error("Nonexistent upload")))}#y(e,t={}){let{forceAllowNewUpload:r=!1}=t,{allowNewUpload:s,currentUploads:n}=this.getState();if(!s&&!r)throw new Error("Cannot create a new upload: already uploading.");let o=zi();return this.emit("upload",o,this.getFilesByIds(e)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...n,[o]:{fileIDs:e,step:0,result:{}}}}),o}[Symbol.for("uppy test: createUpload")](...e){return this.#y(...e)}#A(e){let{currentUploads:t}=this.getState();return t[e]}addResultData(e,t){if(!this.#A(e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}let{currentUploads:r}=this.getState(),s={...r[e],result:{...r[e].result,...t}};this.setState({currentUploads:{...r,[e]:s}})}#E(e){let t={...this.getState().currentUploads};delete t[e],this.setState({currentUploads:t})}async#k(e){let t=()=>{let{currentUploads:o}=this.getState();return o[e]},r=t(),s=[...this.#n,...this.#o,...this.#s];try{for(let o=r.step||0;o<s.length&&r;o++){let a=s[o];this.setState({currentUploads:{...this.getState().currentUploads,[e]:{...r,step:o}}});let{fileIDs:l}=r;await a(l,e),r=t()}}catch(o){throw this.#E(e),o}if(r){r.fileIDs.forEach(h=>{let f=this.getFile(h);f?.progress.postprocess&&this.emit("postprocess-complete",f)});let o=r.fileIDs.map(h=>this.getFile(h)),a=o.filter(h=>!h.error),l=o.filter(h=>h.error);this.addResultData(e,{successful:a,failed:l,uploadID:e}),r=t()}let n;return r&&(n=r.result,this.#E(e)),n==null&&(this.log(`Not setting result for an upload that has been removed: ${e}`),n={successful:[],failed:[],uploadID:e}),n}async upload(){this.#e.uploader?.length||this.log("No uploader type plugins are used","warning");let{files:e}=this.getState();if(this.#g().length>0){let s=await this.#d();if(!(this.getFiles().filter(o=>o.progress.uploadStarted==null).length>0))return this.emit("complete",s),s;({files:e}=this.getState())}let r=this.opts.onBeforeUpload(e);return r===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(r&&typeof r=="object"&&(e=r,this.setState({files:e})),Promise.resolve().then(()=>this.#t.validateMinNumberOfFiles(e)).catch(s=>{throw this.#l([s]),s}).then(()=>{if(!this.#f(e))throw new St(this.i18n("missingRequiredMetaField"))}).catch(s=>{throw s}).then(async()=>{let{currentUploads:s}=this.getState(),n=Object.values(s).flatMap(h=>h.fileIDs),o=[];Object.keys(e).forEach(h=>{let f=this.getFile(h);!f.progress.uploadStarted&&n.indexOf(h)===-1&&o.push(f.id)});let a=this.#y(o),l=await this.#k(a);return this.emit("complete",l),l}).catch(s=>{throw this.emit("error",s),this.log(s,"error"),s}))}},Uo=jc;var e1=0,q_=Array.isArray;function c(i,e,t,r,s,n){e||(e={});var o,a,l=e;if("ref"in l)for(a in l={},e)a=="ref"?o=e[a]:l[a]=e[a];var h={type:i,props:l,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--e1,__i:-1,__u:0,__source:s,__self:n};if(typeof i=="function"&&(o=i.defaultProps))for(a in o)l[a]===void 0&&(l[a]=o[a]);return X.vnode&&X.vnode(h),h}var Rf={name:"@uppy/informer",description:"A notification and error pop-up bar for Uppy.",version:"4.3.2",license:"MIT",main:"lib/index.js",style:"dist/style.min.css",type:"module",scripts:{build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build"},keywords:["file uploader","uppy","uppy-plugin","notification","bar","ui"],homepage:"https://uppy.io",bugs:{url:"https://github.com/transloadit/uppy/issues"},repository:{type:"git",url:"git+https://github.com/transloadit/uppy.git"},files:["src","lib","dist","CHANGELOG.md"],dependencies:{"@uppy/utils":"^6.2.2",preact:"^10.5.13"},peerDependencies:{"@uppy/core":"^4.5.2"},devDependencies:{cssnano:"^7.0.7",postcss:"^8.5.6","postcss-cli":"^11.0.1",sass:"^1.89.2",typescript:"^5.8.3"}};var Lf=300,$s=class extends we{ref=Oo();componentWillEnter(e){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(e,Lf)}componentWillLeave(e){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(e,Lf)}render(){let{children:e}=this.props;return c("div",{className:"uppy-Informer-animated",ref:this.ref,children:e})}};function i1(i,e){return Object.assign(i,e)}function r1(i,e){return i?.key??e}function s1(i,e){let t=i._ptgLinkedRefs||(i._ptgLinkedRefs={});return t[e]||(t[e]=r=>{i.refs[e]=r})}function Ws(i){let e={};for(let t=0;t<i.length;t++)if(i[t]!=null){let r=r1(i[t],t.toString(36));e[r]=i[t]}return e}function n1(i,e){i=i||{},e=e||{};let t=o=>Object.hasOwn(e,o)?e[o]:i[o],r={},s=[];for(let o in i)Object.hasOwn(e,o)?s.length&&(r[o]=s,s=[]):s.push(o);let n={};for(let o in e){if(Object.hasOwn(r,o))for(let a=0;a<r[o].length;a++){let l=r[o][a];n[r[o][a]]=t(l)}n[o]=t(o)}for(let o=0;o<s.length;o++)n[s[o]]=t(s[o]);return n}var o1=i=>i,zo=class extends we{constructor(e,t){super(e,t),this.refs={},this.state={children:Ws(wt(wt(this.props.children))||[])},this.performAppear=this.performAppear.bind(this),this.performEnter=this.performEnter.bind(this),this.performLeave=this.performLeave.bind(this)}componentWillMount(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}componentDidMount(){let e=this.state.children;for(let t in e)e[t]&&this.performAppear(t)}componentWillReceiveProps(e){let t=Ws(wt(e.children)||[]),r=this.state.children;this.setState(n=>({children:n1(n.children,t)}));let s;for(s in t)if(Object.hasOwn(t,s)){let n=r&&Object.hasOwn(r,s);t[s]&&n&&this.currentlyTransitioningKeys[s]?(this.keysToEnter.push(s),this.keysToAbortLeave.push(s)):t[s]&&!n&&!this.currentlyTransitioningKeys[s]&&this.keysToEnter.push(s)}for(s in r)if(Object.hasOwn(r,s)){let n=t&&Object.hasOwn(t,s);r[s]&&!n&&!this.currentlyTransitioningKeys[s]&&this.keysToLeave.push(s)}}componentDidUpdate(){let{keysToEnter:e}=this;this.keysToEnter=[],e.forEach(this.performEnter);let{keysToLeave:t}=this;this.keysToLeave=[],t.forEach(this.performLeave)}_finishAbort(e){let t=this.keysToAbortLeave.indexOf(e);t!==-1&&this.keysToAbortLeave.splice(t,1)}performAppear(e){this.currentlyTransitioningKeys[e]=!0;let t=this.refs[e];t?.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)}_handleDoneAppearing(e){let t=this.refs[e];t?.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);let r=Ws(wt(this.props.children)||[]);(!r||!Object.hasOwn(r,e))&&this.performLeave(e)}performEnter(e){this.currentlyTransitioningKeys[e]=!0;let t=this.refs[e];t?.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)}_handleDoneEntering(e){let t=this.refs[e];t?.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);let r=Ws(wt(this.props.children)||[]);(!r||!Object.hasOwn(r,e))&&this.performLeave(e)}performLeave(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;this.currentlyTransitioningKeys[e]=!0;let r=this.refs[e];r?.componentWillLeave?r.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)}_handleDoneLeaving(e){if(this.keysToAbortLeave.indexOf(e)!==-1)return;let r=this.refs[e];r?.componentDidLeave&&r.componentDidLeave(),delete this.currentlyTransitioningKeys[e];let s=Ws(wt(this.props.children)||[]);if(s&&Object.hasOwn(s,e))this.performEnter(e);else{let n=i1({},this.state.children);delete n[e],this.setState({children:n})}}render({childFactory:e,transitionLeave:t,transitionName:r,transitionAppear:s,transitionEnter:n,transitionLeaveTimeout:o,transitionEnterTimeout:a,transitionAppearTimeout:l,component:h,...f},{children:m}){let y=Object.entries(m).map(([b,k])=>{if(!k)return;let F=s1(this,b);return Us(e(k),{ref:F,key:b})}).filter(Boolean);return Ti(h,f,y)}};zo.defaultProps={component:"span",childFactory:o1};var If=zo;var zr=class extends Yt{static VERSION=Rf.version;constructor(e,t){super(e,t),this.type="progressindicator",this.id=this.opts.id||"Informer",this.title="Informer"}render=e=>c("div",{className:"uppy uppy-Informer",children:c(If,{children:e.info.map(t=>c($s,{children:c("p",{role:"alert",children:[t.message," ",t.details&&c("span",{"aria-label":t.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:()=>alert(`${t.message} 

 ${t.details}`),children:"?"})]})},t.message))})});install(){let{target:e}=this.opts;e&&this.mount(e,this)}};function a1(){return c("svg",{width:"26",height:"26",viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg",children:c("g",{fill:"none","fill-rule":"evenodd",children:[c("circle",{fill:"#FFF",cx:"13",cy:"13",r:"13"}),c("path",{d:"M21.64 13.205c0-.639-.057-1.252-.164-1.841H13v3.481h4.844a4.14 4.14 0 01-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z",fill:"#4285F4","fill-rule":"nonzero"}),c("path",{d:"M13 22c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H4.957v2.332A8.997 8.997 0 0013 22z",fill:"#34A853","fill-rule":"nonzero"}),c("path",{d:"M7.964 14.71A5.41 5.41 0 017.682 13c0-.593.102-1.17.282-1.71V8.958H4.957A8.996 8.996 0 004 13c0 1.452.348 2.827.957 4.042l3.007-2.332z",fill:"#FBBC05","fill-rule":"nonzero"}),c("path",{d:"M13 7.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C17.463 4.891 15.426 4 13 4a8.997 8.997 0 00-8.043 4.958l3.007 2.332C8.672 9.163 10.656 7.58 13 7.58z",fill:"#EA4335","fill-rule":"nonzero"}),c("path",{d:"M4 4h18v18H4z"})]})})}function l1({pluginName:i,i18n:e,onAuth:t}){let r=i==="Google Drive",s=Ui(n=>{n.preventDefault(),t()},[t]);return c("form",{onSubmit:s,children:r?c("button",{type:"submit",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn uppy-Provider-btn-google","data-uppy-super-focusable":!0,children:[c(a1,{}),e("signInWithGoogle")]}):c("button",{type:"submit",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn","data-uppy-super-focusable":!0,children:e("authenticateWith",{pluginName:i})})})}var c1=({pluginName:i,i18n:e,onAuth:t})=>c(l1,{pluginName:i,i18n:e,onAuth:t});function Ho({loading:i,pluginName:e,pluginIcon:t,i18n:r,handleAuth:s,renderForm:n=c1}){return c("div",{className:"uppy-Provider-auth",children:[c("div",{className:"uppy-Provider-authIcon",children:t()}),c("div",{className:"uppy-Provider-authTitle",children:r("authenticateWithTitle",{pluginName:e})}),n({pluginName:e,i18n:r,loading:i,onAuth:s})]})}function Gs(i){return{...i,type:i.mimeType,extension:i.name?dr(i.name).extension:null}}var Qf=ve(ht(),1);var qo={name:"@uppy/provider-views",description:"View library for Uppy remote provider plugins.",version:"4.5.3",license:"MIT",main:"lib/index.js",style:"dist/style.min.css",type:"module",scripts:{build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},keywords:["file uploader","uppy"],homepage:"https://uppy.io",bugs:{url:"https://github.com/transloadit/uppy/issues"},repository:{type:"git",url:"git+https://github.com/transloadit/uppy.git"},files:["src","lib","dist","CHANGELOG.md"],dependencies:{"@uppy/utils":"^6.2.2",classnames:"^2.2.6",nanoid:"^5.0.9","p-queue":"^8.0.0",preact:"^10.5.13"},devDependencies:{"@types/gapi":"^0.0.47","@types/google.accounts":"^0.0.14","@types/google.picker":"^0.0.42",cssnano:"^7.0.7",jsdom:"^26.1.0",postcss:"^8.5.6","postcss-cli":"^11.0.1",sass:"^1.89.2",typescript:"^5.8.3",vitest:"^3.2.4"},peerDependencies:{"@uppy/core":"^4.5.3"}};var h1={position:"relative",width:"100%",minHeight:"100%"},d1={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"},qc=class extends we{constructor(e){super(e),this.focusElement=null,this.state={offset:0,height:0}}componentDidMount(){this.resize(),window.addEventListener("resize",this.handleResize)}componentWillUpdate(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}componentDidUpdate(){this.focusElement?.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}componentWillUnmount(){window.removeEventListener("resize",this.handleResize)}handleScroll=()=>{this.setState({offset:this.base.scrollTop})};handleResize=()=>{this.resize()};resize(){let{height:e}=this.state;e!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}render({data:e,rowHeight:t,renderRow:r,overscanCount:s=10,...n}){let{offset:o,height:a}=this.state,l=Math.floor(o/t),h=Math.floor(a/t);s&&(l=Math.max(0,l-l%s),h+=s);let f=l+h+4,m=e.slice(l,f),y={...h1,height:e.length*t},b={...d1,top:l*t};return c("div",{onScroll:this.handleScroll,...n,children:c("div",{role:"presentation",style:y,children:c("div",{role:"presentation",style:b,children:m.map(r)})})})}},Vo=qc;var Df=ve(ht(),1);function p1(){return c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:11,height:14.5,viewBox:"0 0 44 58",children:c("path",{d:"M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z"})})}function f1(){return c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",style:{minWidth:16,marginRight:3},viewBox:"0 0 276.157 276.157",children:c("path",{d:"M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z"})})}function m1(){return c("svg",{"aria-hidden":"true",focusable:"false",style:{width:16,marginRight:4},viewBox:"0 0 58 58",children:[c("path",{d:"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z"}),c("path",{d:"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z"})]})}function Hr({itemIconString:i,alt:e=void 0}){if(i===null)return null;switch(i){case"file":return c(p1,{});case"folder":return c(f1,{});case"video":return c(m1,{});default:return c("img",{src:i,alt:e,referrerPolicy:"no-referrer",loading:"lazy",width:16,height:16})}}function g1({file:i,toggleCheckbox:e,className:t,isDisabled:r,restrictionError:s,showTitles:n,children:o=null,i18n:a}){return c("li",{className:t,title:r&&s?s:void 0,children:[c("input",{type:"checkbox",className:"uppy-u-reset uppy-ProviderBrowserItem-checkbox uppy-ProviderBrowserItem-checkbox--grid",onChange:e,name:"listitem",id:i.id,checked:i.status==="checked",disabled:r,"data-uppy-super-focusable":!0}),c("label",{htmlFor:i.id,"aria-label":i.data.name??a("unnamed"),className:"uppy-u-reset uppy-ProviderBrowserItem-inner",children:[c(Hr,{itemIconString:i.data.thumbnail||i.data.icon}),n&&(i.data.name??a("unnamed")),o]})]})}var Vc=g1;function $c({file:i,openFolder:e,className:t,isDisabled:r,restrictionError:s,toggleCheckbox:n,showTitles:o,i18n:a}){return c("li",{className:t,title:i.status!=="checked"&&s?s:void 0,children:[c("input",{type:"checkbox",className:"uppy-u-reset uppy-ProviderBrowserItem-checkbox",onChange:n,name:"listitem",id:i.id,checked:i.status==="checked","aria-label":i.data.isFolder?a("allFilesFromFolderNamed",{name:i.data.name??a("unnamed")}):null,disabled:r,"data-uppy-super-focusable":!0}),i.data.isFolder?c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-ProviderBrowserItem-inner",onClick:()=>e(i.id),"aria-label":a("openFolderNamed",{name:i.data.name??a("unnamed")}),children:[c("div",{className:"uppy-ProviderBrowserItem-iconWrap",children:c(Hr,{itemIconString:i.data.icon})}),o&&i.data.name?c("span",{children:i.data.name}):a("unnamed")]}):c("label",{htmlFor:i.id,className:"uppy-u-reset uppy-ProviderBrowserItem-inner",children:[c("div",{className:"uppy-ProviderBrowserItem-iconWrap",children:c(Hr,{itemIconString:i.data.icon})}),o&&(i.data.name??a("unnamed"))]})]})}function Wc(i){let{viewType:e,toggleCheckbox:t,showTitles:r,i18n:s,openFolder:n,file:o,utmSource:a}=i,l=o.type==="folder"?null:o.restrictionError,h=!!l&&o.status!=="checked",f={file:o,openFolder:n,toggleCheckbox:t,utmSource:a,i18n:s,viewType:e,showTitles:r,className:(0,Df.default)("uppy-ProviderBrowserItem",{"uppy-ProviderBrowserItem--disabled":h},{"uppy-ProviderBrowserItem--noPreview":o.data.icon==="video"},{"uppy-ProviderBrowserItem--is-checked":o.status==="checked"},{"uppy-ProviderBrowserItem--is-partial":o.status==="partial"}),isDisabled:h,restrictionError:l};switch(e){case"grid":return c(Vc,{...f});case"list":return c($c,{...f});case"unsplash":return c(Vc,{...f,children:c("a",{href:`${o.data.author.url}?utm_source=${a}&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",className:"uppy-ProviderBrowserItem-author",tabIndex:-1,children:o.data.author.name})});default:throw new Error(`There is no such type ${e}`)}}function b1(i){let{displayedPartialTree:e,viewType:t,toggleCheckbox:r,handleScroll:s,showTitles:n,i18n:o,isLoading:a,openFolder:l,noResultsLabel:h,virtualList:f,utmSource:m}=i,[y,b]=Nt(!1);if(Kt(()=>{let F=M=>{M.key==="Shift"&&b(!1)},P=M=>{M.key==="Shift"&&b(!0)};return document.addEventListener("keyup",F),document.addEventListener("keydown",P),()=>{document.removeEventListener("keyup",F),document.removeEventListener("keydown",P)}},[]),a)return c("div",{className:"uppy-Provider-loading",children:typeof a=="string"?a:o("loading")});if(e.length===0)return c("div",{className:"uppy-Provider-empty",children:h});let k=F=>c(Wc,{viewType:t,toggleCheckbox:P=>{P.stopPropagation(),P.preventDefault(),document.getSelection()?.removeAllRanges(),r(F,y)},showTitles:n,i18n:o,openFolder:l,file:F,utmSource:m},F.id);return f?c("div",{className:"uppy-ProviderBrowser-body",children:c(Vo,{className:"uppy-ProviderBrowser-list",data:e,renderRow:k,rowHeight:35.5})}):c("div",{className:"uppy-ProviderBrowser-body",children:c("ul",{className:"uppy-ProviderBrowser-list",onScroll:s,tabIndex:-1,children:e.map(k)})})}var $o=b1;var Nf=ve(ht(),1);var v1=i=>i.filter(t=>t.type==="file"&&t.status==="checked"?!0:t.type==="folder"&&t.status==="checked"?!i.some(s=>s.type!=="root"&&s.parentId===t.id):!1).length,Wo=v1;function Xs({cancelSelection:i,donePicking:e,i18n:t,partialTree:r,validateAggregateRestrictions:s}){let n=Bi(()=>s(r),[r,s]),o=Bi(()=>Wo(r),[r]);return o===0?null:c("div",{className:"uppy-ProviderBrowser-footer",children:[c("div",{className:"uppy-ProviderBrowser-footer-buttons",children:[c("button",{className:(0,Nf.default)("uppy-u-reset uppy-c-btn uppy-c-btn-primary",{"uppy-c-btn--disabled":n}),disabled:!!n,onClick:e,type:"button",children:t("selectX",{smart_count:o})}),c("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link",onClick:i,type:"button",children:t("cancel")})]}),n&&c("div",{className:"uppy-ProviderBrowser-footer-error",children:n})]})}function y1({searchString:i,setSearchString:e,submitSearchString:t,wrapperClassName:r,inputClassName:s,inputLabel:n,clearSearchLabel:o="",showButton:a=!1,buttonLabel:l="",buttonCSSClassName:h=""}){let f=b=>{e(b.target.value)},m=Ui(b=>{b.preventDefault(),t()},[t]),[y]=Nt(()=>{let b=document.createElement("form");return b.setAttribute("tabindex","-1"),b.id=zi(),b});return Kt(()=>(document.body.appendChild(y),y.addEventListener("submit",m),()=>{y.removeEventListener("submit",m),document.body.removeChild(y)}),[y,m]),c("section",{className:r,children:[c("input",{className:`uppy-u-reset ${s}`,type:"search","aria-label":n,placeholder:n,value:i,onInput:f,form:y.id,"data-uppy-super-focusable":!0}),!a&&c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-ProviderBrowser-searchFilterIcon",width:"12",height:"12",viewBox:"0 0 12 12",children:c("path",{d:"M8.638 7.99l3.172 3.172a.492.492 0 1 1-.697.697L7.91 8.656a4.977 4.977 0 0 1-2.983.983C2.206 9.639 0 7.481 0 4.819 0 2.158 2.206 0 4.927 0c2.721 0 4.927 2.158 4.927 4.82a4.74 4.74 0 0 1-1.216 3.17zm-3.71.685c2.176 0 3.94-1.726 3.94-3.856 0-2.129-1.764-3.855-3.94-3.855C2.75.964.984 2.69.984 4.819c0 2.13 1.765 3.856 3.942 3.856z"})}),!a&&i&&c("button",{className:"uppy-u-reset uppy-ProviderBrowser-searchFilterReset",type:"button","aria-label":o,title:o,onClick:()=>e(""),children:c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",viewBox:"0 0 19 19",children:c("path",{d:"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"})})}),a&&c("button",{className:`uppy-u-reset uppy-c-btn uppy-c-btn-primary ${h}`,type:"submit",form:y.id,children:l})]})}var jr=y1;var w1=(i,e,t)=>({id:i.id,source:e.id,name:i.name||i.id,type:i.mimeType,isRemote:!0,data:i,preview:i.thumbnail||void 0,meta:{authorName:i.author?.name,authorUrl:i.author?.url,relativePath:i.relDirPath||null,absolutePath:i.absDirPath},body:{fileId:i.id},remote:{companionUrl:e.opts.companionUrl,url:`${t.fileUrl(i.requestPath)}`,body:{fileId:i.id},providerName:t.name,provider:t.provider,requestClientId:t.provider}}),Bf=w1;var S1=(i,e,t)=>{let r=i.map(o=>Bf(o,e,t)),s=[],n=[];r.forEach(o=>{e.uppy.checkIfFileAlreadyExists(Lo(o,e.uppy.getID()))?n.push(o):s.push(o)}),s.length>0&&e.uppy.info(e.uppy.i18n("addedNumFiles",{numFiles:s.length})),n.length>0&&e.uppy.info(`Not adding ${n.length} files because they already exist`),e.uppy.addFiles(s)},Go=S1;var E1=(i,e,t,r)=>{let s=e.findIndex(n=>n.id===r);if(s!==-1&&t){let n=e.findIndex(a=>a.id===i);return e.slice(Math.min(s,n),Math.max(s,n)+1).map(a=>a.id)}return[i]},Xo=E1;var x1=i=>e=>{if(!e.isAuthError){if(e.name==="AbortError"){i.log("Aborting request","warning");return}i.log(e,"error"),e.name==="UserFacingApiError"&&i.info({message:i.i18n("companionError"),details:i.i18n(e.message)},"warning",5e3)}},ki=x1;var T1=(i,e)=>{let t=i.find(s=>s.id===e),r=[];for(;r=[t,...r],t.type!=="root";){let s=t.parentId;t=i.find(n=>n.id===s)}return r},Uf=T1;var zf=(i,e,t)=>{let r=e===null?"null":e;if(t[r])return t[r];let s=i.find(o=>o.id===e);if(s.type==="root")return[];let n=[...zf(i,s.parentId,t),s];return t[r]=n,n},k1=i=>{let e=Object.create(null);return i.filter(s=>s.type==="file"&&s.status==="checked").map(s=>{let n=zf(i,s.id,e),o=n.findIndex(f=>f.type==="folder"&&f.status==="checked"),a=n.slice(o),l=`/${n.map(f=>f.data.name).join("/")}`,h=a.length===1?void 0:a.map(f=>f.data.name).join("/");return{...s.data,absDirPath:l,relDirPath:h}})},Ko=k1;var Xc=ve(jf(),1);var Ys=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},Kc=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},qf=i=>globalThis.DOMException===void 0?new Kc(i):new DOMException(i),Vf=i=>{let e=i.reason===void 0?qf("This operation was aborted."):i.reason;return e instanceof Error?e:qf(e)};function Yc(i,e){let{milliseconds:t,fallback:r,message:s,customTimers:n={setTimeout,clearTimeout}}=e,o,a,h=new Promise((f,m)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(e.signal){let{signal:b}=e;b.aborted&&m(Vf(b)),a=()=>{m(Vf(b))},b.addEventListener("abort",a,{once:!0})}if(t===Number.POSITIVE_INFINITY){i.then(f,m);return}let y=new Ys;o=n.setTimeout.call(void 0,()=>{if(r){try{f(r())}catch(b){m(b)}return}typeof i.cancel=="function"&&i.cancel(),s===!1?f():s instanceof Error?m(s):(y.message=s??`Promise timed out after ${t} milliseconds`,m(y))},t),(async()=>{try{f(await i)}catch(b){m(b)}})()}).finally(()=>{h.clear(),a&&e.signal&&e.signal.removeEventListener("abort",a)});return h.clear=()=>{n.clearTimeout.call(void 0,o),o=void 0},h}function Zc(i,e,t){let r=0,s=i.length;for(;s>0;){let n=Math.trunc(s/2),o=r+n;t(i[o],e)<=0?(r=++o,s-=n+1):s=n}return r}var Zs=class{#e=[];enqueue(e,t){t={priority:0,...t};let r={priority:t.priority,id:t.id,run:e};if(this.size===0||this.#e[this.size-1].priority>=t.priority){this.#e.push(r);return}let s=Zc(this.#e,r,(n,o)=>o.priority-n.priority);this.#e.splice(s,0,r)}setPriority(e,t){let r=this.#e.findIndex(n=>n.id===e);if(r===-1)throw new ReferenceError(`No promise function with the id "${e}" exists in the queue.`);let[s]=this.#e.splice(r,1);this.enqueue(s.run,{priority:t,id:e})}dequeue(){return this.#e.shift()?.run}filter(e){return this.#e.filter(t=>t.priority===e.priority).map(t=>t.run)}get size(){return this.#e.length}};var Qs=class extends Xc.default{#e;#t;#i=0;#r;#n;#o=0;#s;#l;#a;#f;#c=0;#h;#u;#p;#g=1n;timeout;constructor(e){if(super(),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Zs,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${e.intervalCap?.toString()??""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${e.interval?.toString()??""}\` (${typeof e.interval})`);this.#e=e.carryoverConcurrencyCount,this.#t=e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,this.#r=e.intervalCap,this.#n=e.interval,this.#a=new e.queueClass,this.#f=e.queueClass,this.concurrency=e.concurrency,this.timeout=e.timeout,this.#p=e.throwOnTimeout===!0,this.#u=e.autoStart===!1}get#d(){return this.#t||this.#i<this.#r}get#w(){return this.#c<this.#h}#b(){this.#c--,this.#S(),this.emit("next")}#v(){this.#T(),this.#m(),this.#l=void 0}get#x(){let e=Date.now();if(this.#s===void 0){let t=this.#o-e;if(t<0)this.#i=this.#e?this.#c:0;else return this.#l===void 0&&(this.#l=setTimeout(()=>{this.#v()},t)),!0}return!1}#S(){if(this.#a.size===0)return this.#s&&clearInterval(this.#s),this.#s=void 0,this.emit("empty"),this.#c===0&&this.emit("idle"),!1;if(!this.#u){let e=!this.#x;if(this.#d&&this.#w){let t=this.#a.dequeue();return t?(this.emit("active"),t(),e&&this.#m(),!0):!1}}return!1}#m(){this.#t||this.#s!==void 0||(this.#s=setInterval(()=>{this.#T()},this.#n),this.#o=Date.now()+this.#n)}#T(){this.#i===0&&this.#c===0&&this.#s&&(clearInterval(this.#s),this.#s=void 0),this.#i=this.#e?this.#c:0,this.#y()}#y(){for(;this.#S(););}get concurrency(){return this.#h}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this.#h=e,this.#y()}async#A(e){return new Promise((t,r)=>{e.addEventListener("abort",()=>{r(e.reason)},{once:!0})})}setPriority(e,t){this.#a.setPriority(e,t)}async add(e,t={}){return t.id??=(this.#g++).toString(),t={timeout:this.timeout,throwOnTimeout:this.#p,...t},new Promise((r,s)=>{this.#a.enqueue(async()=>{this.#c++,this.#i++;try{t.signal?.throwIfAborted();let n=e({signal:t.signal});t.timeout&&(n=Yc(Promise.resolve(n),{milliseconds:t.timeout})),t.signal&&(n=Promise.race([n,this.#A(t.signal)]));let o=await n;r(o),this.emit("completed",o)}catch(n){if(n instanceof Ys&&!t.throwOnTimeout){r();return}s(n),this.emit("error",n)}finally{this.#b()}},t),this.emit("add"),this.#S()})}async addAll(e,t){return Promise.all(e.map(async r=>this.add(r,t)))}start(){return this.#u?(this.#u=!1,this.#y(),this):this}pause(){this.#u=!0}clear(){this.#a=new this.#f}async onEmpty(){this.#a.size!==0&&await this.#E("empty")}async onSizeLessThan(e){this.#a.size<e||await this.#E("next",()=>this.#a.size<e)}async onIdle(){this.#c===0&&this.#a.size===0||await this.#E("idle")}async#E(e,t){return new Promise(r=>{let s=()=>{t&&!t()||(this.off(e,s),r())};this.on(e,s)})}get size(){return this.#a.size}sizeBy(e){return this.#a.filter(e).length}get pending(){return this.#c}get isPaused(){return this.#u}};var _1=i=>i.map(e=>({...e})),Zo=_1;var $f=async(i,e,t,r,s)=>{let n=[],o=t.cached?t.nextPagePath:t.id;for(;o;){let m=await r(o);n=n.concat(m.items),o=m.nextPagePath}let a=n.filter(m=>m.isFolder===!0),l=n.filter(m=>m.isFolder===!1),h=a.map(m=>({type:"folder",id:m.requestPath,cached:!1,nextPagePath:null,status:"checked",parentId:t.id,data:m})),f=l.map(m=>{let y=s(m);return{type:"file",id:m.requestPath,restrictionError:y,status:y?"unchecked":"checked",parentId:t.id,data:m}});t.cached=!0,t.nextPagePath=null,e.push(...f,...h),h.forEach(async m=>{i.add(()=>$f(i,e,m,r,s))})},F1=async(i,e,t,r)=>{let s=new Qs({concurrency:6}),n=Zo(i);return n.filter(a=>a.type==="folder"&&a.status==="checked"&&(a.cached===!1||a.nextPagePath)).forEach(a=>{s.add(()=>$f(s,n,a,e,t))}),s.on("completed",()=>{let a=n.filter(l=>l.type==="file"&&l.status==="checked").length;r(a)}),await s.onIdle(),n},Wf=F1;var P1=(i,e,t,r,s)=>{let n=e.filter(b=>b.isFolder===!0),o=e.filter(b=>b.isFolder===!1),a=t.type==="folder"&&t.status==="checked",l=n.map(b=>({type:"folder",id:b.requestPath,cached:!1,nextPagePath:null,status:a?"checked":"unchecked",parentId:t.id,data:b})),h=o.map(b=>{let k=s(b);return{type:"file",id:b.requestPath,restrictionError:k,status:a&&!k?"checked":"unchecked",parentId:t.id,data:b}}),f={...t,cached:!0,nextPagePath:r};return[...i.map(b=>b.id===f.id?f:b),...l,...h]},Gf=P1;var O1=(i,e,t,r,s)=>{let n=i.find(k=>k.id===e),o=t.filter(k=>k.isFolder===!0),a=t.filter(k=>k.isFolder===!1),l={...n,nextPagePath:r},h=i.map(k=>k.id===l.id?l:k),f=l.type==="folder"&&l.status==="checked",m=o.map(k=>({type:"folder",id:k.requestPath,cached:!1,nextPagePath:null,status:f?"checked":"unchecked",parentId:l.id,data:k})),y=a.map(k=>{let F=s(k);return{type:"file",id:k.requestPath,restrictionError:F,status:f&&!F?"checked":"unchecked",parentId:l.id,data:k}});return[...h,...m,...y]},Xf=O1;var Qc=(i,e,t)=>{i.filter(s=>s.type!=="root"&&s.parentId===e).forEach(s=>{s.status=t&&!(s.type==="file"&&s.restrictionError)?"checked":"unchecked",Qc(i,s.id,t)})},Jc=(i,e)=>{let t=i.find(o=>o.id===e);if(t.type==="root")return;let r=i.filter(o=>o.type!=="root"&&o.parentId===t.id&&!(o.type==="file"&&o.restrictionError)),s=r.every(o=>o.status==="checked"),n=r.every(o=>o.status==="unchecked");s?t.status="checked":n?t.status="unchecked":t.status="partial",Jc(i,t.parentId)},M1=(i,e)=>{let t=Zo(i);if(e.length>=2){let r=t.filter(s=>s.type!=="root"&&e.includes(s.id));r.forEach(s=>{s.type==="file"?s.status=s.restrictionError?"unchecked":"checked":s.status="checked"}),r.forEach(s=>{Qc(t,s.id,!0)}),Jc(t,r[0].parentId)}else{let r=t.find(s=>s.id===e[0]);r.status=r.status==="checked"?"unchecked":"checked",Qc(t,r.id,r.status==="checked"),Jc(t,r.parentId)}return t},Kf=M1;var pr={afterOpenFolder:Gf,afterScrollFolder:Xf,afterToggleCheckbox:Kf,afterFill:Wf};var R1=i=>{let{scrollHeight:e,scrollTop:t,offsetHeight:r}=i.target;return e-(t+r)<50},Qo=R1;var Yf=ve(ht(),1);function eu(i){let{openFolder:e,title:t,breadcrumbsIcon:r,breadcrumbs:s,i18n:n}=i;return c("div",{className:"uppy-Provider-breadcrumbs",children:[c("div",{className:"uppy-Provider-breadcrumbsIcon",children:r}),s.map((o,a)=>c(Ae,{children:[c("button",{type:"button",className:"uppy-u-reset uppy-c-btn",onClick:()=>e(o.id),children:o.type==="root"?t:o.data.name??n("unnamed")},o.id),s.length===a+1?"":" / "]}))]})}function tu({i18n:i,logout:e,username:t}){return c(Ae,{children:[t&&c("span",{className:"uppy-ProviderBrowser-user",children:t},"username"),c("button",{type:"button",onClick:e,className:"uppy-u-reset uppy-c-btn uppy-ProviderBrowser-userLogout",children:i("logOut")},"logout")]})}function iu(i){return c("div",{className:"uppy-ProviderBrowser-header",children:c("div",{className:(0,Yf.default)("uppy-ProviderBrowser-headerBar",!i.showBreadcrumbs&&"uppy-ProviderBrowser-headerBar--simple"),children:[i.showBreadcrumbs&&c(eu,{openFolder:i.openFolder,breadcrumbs:i.breadcrumbs,breadcrumbsIcon:i.pluginIcon?.(),title:i.title,i18n:i.i18n}),c(tu,{logout:i.logout,username:i.username,i18n:i.i18n})]})})}function en(){return c("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30",children:c("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"})})}var Zf=i=>({authenticated:void 0,partialTree:[{type:"root",id:i,cached:!1,nextPagePath:null}],currentFolderId:i,searchString:"",didFirstRender:!1,username:null,loading:!1}),Js=class{static VERSION=qo.version;plugin;provider;opts;isHandlingScroll=!1;lastCheckbox=null;constructor(e,t){this.plugin=e,this.provider=t.provider;let r={viewType:"list",showTitles:!0,showFilter:!0,showBreadcrumbs:!0,loadAllFiles:!1,virtualList:!1};this.opts={...r,...t},this.openFolder=this.openFolder.bind(this),this.logout=this.logout.bind(this),this.handleAuth=this.handleAuth.bind(this),this.handleScroll=this.handleScroll.bind(this),this.resetPluginState=this.resetPluginState.bind(this),this.donePicking=this.donePicking.bind(this),this.render=this.render.bind(this),this.cancelSelection=this.cancelSelection.bind(this),this.toggleCheckbox=this.toggleCheckbox.bind(this),this.resetPluginState(),this.plugin.uppy.on("dashboard:close-panel",this.resetPluginState),this.plugin.uppy.registerRequestClient(this.provider.provider,this.provider)}resetPluginState(){this.plugin.setPluginState(Zf(this.plugin.rootFolderId))}tearDown(){}setLoading(e){this.plugin.setPluginState({loading:e})}cancelSelection(){let{partialTree:e}=this.plugin.getPluginState(),t=e.map(r=>r.type==="root"?r:{...r,status:"unchecked"});this.plugin.setPluginState({partialTree:t})}#e;async#t(e){this.#e?.abort();let t=new AbortController;this.#e=t;let r=()=>{t.abort()};try{this.plugin.uppy.on("dashboard:close-panel",r),this.plugin.uppy.on("cancel-all",r),await e(t.signal)}finally{this.plugin.uppy.off("dashboard:close-panel",r),this.plugin.uppy.off("cancel-all",r),this.#e=void 0}}async openFolder(e){this.lastCheckbox=null;let{partialTree:t}=this.plugin.getPluginState(),r=t.find(s=>s.id===e);if(r.cached){this.plugin.setPluginState({currentFolderId:e,searchString:""});return}this.setLoading(!0),await this.#t(async s=>{let n=e,o=[];do{let{username:l,nextPagePath:h,items:f}=await this.provider.list(n,{signal:s});this.plugin.setPluginState({username:l}),n=h,o=o.concat(f),this.setLoading(this.plugin.uppy.i18n("loadedXFiles",{numFiles:o.length}))}while(this.opts.loadAllFiles&&n);let a=pr.afterOpenFolder(t,o,r,n,this.validateSingleFile);this.plugin.setPluginState({partialTree:a,currentFolderId:e,searchString:""})}).catch(ki(this.plugin.uppy)),this.setLoading(!1)}async logout(){await this.#t(async e=>{let t=await this.provider.logout({signal:e});if(t.ok){if(!t.revoked){let r=this.plugin.uppy.i18n("companionUnauthorizeHint",{provider:this.plugin.title,url:t.manual_revoke_url});this.plugin.uppy.info(r,"info",7e3)}this.plugin.setPluginState({...Zf(this.plugin.rootFolderId),authenticated:!1})}}).catch(ki(this.plugin.uppy))}async handleAuth(e){await this.#t(async t=>{this.setLoading(!0),await this.provider.login({authFormData:e,signal:t}),this.plugin.setPluginState({authenticated:!0}),await Promise.all([this.provider.fetchPreAuthToken(),this.openFolder(this.plugin.rootFolderId)])}).catch(ki(this.plugin.uppy)),this.setLoading(!1)}async handleScroll(e){let{partialTree:t,currentFolderId:r}=this.plugin.getPluginState(),s=t.find(n=>n.id===r);Qo(e)&&!this.isHandlingScroll&&s.nextPagePath&&(this.isHandlingScroll=!0,await this.#t(async n=>{let{nextPagePath:o,items:a}=await this.provider.list(s.nextPagePath,{signal:n}),l=pr.afterScrollFolder(t,r,a,o,this.validateSingleFile);this.plugin.setPluginState({partialTree:l})}).catch(ki(this.plugin.uppy)),this.isHandlingScroll=!1)}validateSingleFile=e=>{let t=Gs(e);return this.plugin.uppy.validateSingleFile(t)};async donePicking(){let{partialTree:e}=this.plugin.getPluginState();this.setLoading(!0),await this.#t(async t=>{let r=await pr.afterFill(e,o=>this.provider.list(o,{signal:t}),this.validateSingleFile,o=>{this.setLoading(this.plugin.uppy.i18n("addedNumFiles",{numFiles:o}))});if(this.validateAggregateRestrictions(r)){this.plugin.setPluginState({partialTree:r});return}let n=Ko(r);Go(n,this.plugin,this.provider),this.resetPluginState()}).catch(ki(this.plugin.uppy)),this.setLoading(!1)}toggleCheckbox(e,t){let{partialTree:r}=this.plugin.getPluginState(),s=Xo(e.id,this.getDisplayedPartialTree(),t,this.lastCheckbox),n=pr.afterToggleCheckbox(r,s);this.plugin.setPluginState({partialTree:n}),this.lastCheckbox=e.id}getDisplayedPartialTree=()=>{let{partialTree:e,currentFolderId:t,searchString:r}=this.plugin.getPluginState(),s=e.filter(o=>o.type!=="root"&&o.parentId===t);return r===""?s:s.filter(o=>(o.data.name??this.plugin.uppy.i18n("unnamed")).toLowerCase().indexOf(r.toLowerCase())!==-1)};getBreadcrumbs=()=>{let{partialTree:e,currentFolderId:t}=this.plugin.getPluginState();return Uf(e,t)};getSelectedAmount=()=>{let{partialTree:e}=this.plugin.getPluginState();return Wo(e)};validateAggregateRestrictions=e=>{let r=e.filter(s=>s.type==="file"&&s.status==="checked").map(s=>s.data);return this.plugin.uppy.validateAggregateRestrictions(r)};render(e,t={}){let{didFirstRender:r}=this.plugin.getPluginState(),{i18n:s}=this.plugin.uppy;r||(this.plugin.setPluginState({didFirstRender:!0}),this.provider.fetchPreAuthToken(),this.openFolder(this.plugin.rootFolderId));let n={...this.opts,...t},{authenticated:o,loading:a}=this.plugin.getPluginState(),l=this.plugin.icon||en;if(o===!1)return c(Ho,{pluginName:this.plugin.title,pluginIcon:l,handleAuth:this.handleAuth,i18n:this.plugin.uppy.i18n,renderForm:n.renderAuthForm,loading:a});let{partialTree:h,username:f,searchString:m}=this.plugin.getPluginState(),y=this.getBreadcrumbs();return c("div",{className:(0,Qf.default)("uppy-ProviderBrowser",`uppy-ProviderBrowser-viewType--${n.viewType}`),children:[c(iu,{showBreadcrumbs:n.showBreadcrumbs,openFolder:this.openFolder,breadcrumbs:y,pluginIcon:l,title:this.plugin.title,logout:this.logout,username:f,i18n:s}),n.showFilter&&c(jr,{searchString:m,setSearchString:b=>{this.plugin.setPluginState({searchString:b})},submitSearchString:()=>{},inputLabel:s("filter"),clearSearchLabel:s("resetFilter"),wrapperClassName:"uppy-ProviderBrowser-searchFilter",inputClassName:"uppy-ProviderBrowser-searchFilterInput"}),c($o,{toggleCheckbox:this.toggleCheckbox,displayedPartialTree:this.getDisplayedPartialTree(),openFolder:this.openFolder,virtualList:n.virtualList,noResultsLabel:s("noFilesFound"),handleScroll:this.handleScroll,viewType:n.viewType,showTitles:n.showTitles,i18n:this.plugin.uppy.i18n,isLoading:a,utmSource:"Companion"}),c(Xs,{partialTree:h,donePicking:this.donePicking,cancelSelection:this.cancelSelection,i18n:s,validateAggregateRestrictions:this.validateAggregateRestrictions})]})}};var Jf=ve(ht(),1);var L1={loading:!1,searchString:"",partialTree:[{type:"root",id:null,cached:!1,nextPagePath:null}],currentFolderId:null,isInputMode:!0},I1={viewType:"grid",showTitles:!0,showFilter:!0,utmSource:"Companion"},tn=class{static VERSION=qo.version;plugin;provider;opts;isHandlingScroll=!1;lastCheckbox=null;constructor(e,t){this.plugin=e,this.provider=t.provider,this.opts={...I1,...t},this.setSearchString=this.setSearchString.bind(this),this.search=this.search.bind(this),this.resetPluginState=this.resetPluginState.bind(this),this.handleScroll=this.handleScroll.bind(this),this.donePicking=this.donePicking.bind(this),this.cancelSelection=this.cancelSelection.bind(this),this.toggleCheckbox=this.toggleCheckbox.bind(this),this.render=this.render.bind(this),this.resetPluginState(),this.plugin.uppy.on("dashboard:close-panel",this.resetPluginState),this.plugin.uppy.registerRequestClient(this.provider.provider,this.provider)}tearDown(){}setLoading(e){this.plugin.setPluginState({loading:e})}resetPluginState(){this.plugin.setPluginState(L1)}cancelSelection(){let{partialTree:e}=this.plugin.getPluginState(),t=e.map(r=>r.type==="root"?r:{...r,status:"unchecked"});this.plugin.setPluginState({partialTree:t})}async search(){let{searchString:e}=this.plugin.getPluginState();if(e!==""){this.setLoading(!0);try{let t=await this.provider.search(e),r=[{type:"root",id:null,cached:!1,nextPagePath:t.nextPageQuery},...t.items.map(s=>({type:"file",id:s.requestPath,status:"unchecked",parentId:null,data:s}))];this.plugin.setPluginState({partialTree:r,isInputMode:!1})}catch(t){ki(this.plugin.uppy)(t)}this.setLoading(!1)}}async handleScroll(e){let{partialTree:t,searchString:r}=this.plugin.getPluginState(),s=t.find(n=>n.type==="root");if(Qo(e)&&!this.isHandlingScroll&&s.nextPagePath){this.isHandlingScroll=!0;try{let n=await this.provider.search(r,s.nextPagePath),o={...s,nextPagePath:n.nextPageQuery},a=t.filter(h=>h.type!=="root"),l=[o,...a,...n.items.map(h=>({type:"file",id:h.requestPath,status:"unchecked",parentId:null,data:h}))];this.plugin.setPluginState({partialTree:l})}catch(n){ki(this.plugin.uppy)(n)}this.isHandlingScroll=!1}}async donePicking(){let{partialTree:e}=this.plugin.getPluginState(),t=Ko(e);Go(t,this.plugin,this.provider),this.resetPluginState()}toggleCheckbox(e,t){let{partialTree:r}=this.plugin.getPluginState(),s=Xo(e.id,this.getDisplayedPartialTree(),t,this.lastCheckbox),n=pr.afterToggleCheckbox(r,s);this.plugin.setPluginState({partialTree:n}),this.lastCheckbox=e.id}validateSingleFile=e=>{let t=Gs(e);return this.plugin.uppy.validateSingleFile(t)};getDisplayedPartialTree=()=>{let{partialTree:e}=this.plugin.getPluginState();return e.filter(t=>t.type!=="root")};setSearchString=e=>{this.plugin.setPluginState({searchString:e}),e===""&&this.plugin.setPluginState({partialTree:[]})};validateAggregateRestrictions=e=>{let r=e.filter(s=>s.type==="file"&&s.status==="checked").map(s=>s.data);return this.plugin.uppy.validateAggregateRestrictions(r)};render(e,t={}){let{isInputMode:r,searchString:s,loading:n,partialTree:o}=this.plugin.getPluginState(),{i18n:a}=this.plugin.uppy,l={...this.opts,...t};return r?c(jr,{searchString:s,setSearchString:this.setSearchString,submitSearchString:this.search,inputLabel:a("enterTextToSearch"),buttonLabel:a("searchImages"),wrapperClassName:"uppy-SearchProvider",inputClassName:"uppy-c-textInput uppy-SearchProvider-input",showButton:!0,buttonCSSClassName:"uppy-SearchProvider-searchButton"}):c("div",{className:(0,Jf.default)("uppy-ProviderBrowser",`uppy-ProviderBrowser-viewType--${l.viewType}`),children:[l.showFilter&&c(jr,{searchString:s,setSearchString:this.setSearchString,submitSearchString:this.search,inputLabel:a("search"),clearSearchLabel:a("resetSearch"),wrapperClassName:"uppy-ProviderBrowser-searchFilter",inputClassName:"uppy-ProviderBrowser-searchFilterInput"}),c($o,{toggleCheckbox:this.toggleCheckbox,displayedPartialTree:this.getDisplayedPartialTree(),handleScroll:this.handleScroll,openFolder:async()=>{},noResultsLabel:a("noSearchResults"),viewType:l.viewType,showTitles:l.showTitles,isLoading:n,i18n:a,virtualList:!1,utmSource:this.opts.utmSource}),c(Xs,{partialTree:o,donePicking:this.donePicking,cancelSelection:this.cancelSelection,i18n:a,validateAggregateRestrictions:this.validateAggregateRestrictions})]})}};function Jo(i,e,t,r){return t===0||i===e?i:r===0?e:i+(e-i)*2**(-r/t)}var em={name:"@uppy/status-bar",description:"A progress bar for Uppy, with many bells and whistles.",version:"4.2.3",license:"MIT",main:"lib/index.js",style:"dist/style.min.css",type:"module",scripts:{build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build"},keywords:["file uploader","uppy","uppy-plugin","progress bar","status bar","progress","upload","eta","speed"],homepage:"https://uppy.io",bugs:{url:"https://github.com/transloadit/uppy/issues"},repository:{type:"git",url:"git+https://github.com/transloadit/uppy.git"},files:["src","lib","dist","CHANGELOG.md"],dependencies:{"@transloadit/prettier-bytes":"^0.3.4","@uppy/utils":"^6.2.2",classnames:"^2.2.6",preact:"^10.5.13"},peerDependencies:{"@uppy/core":"^4.5.2"},devDependencies:{cssnano:"^7.0.7",postcss:"^8.5.6","postcss-cli":"^11.0.1",sass:"^1.89.2",typescript:"^5.8.3"}};var tm={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};var kt={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};var cu=ve(ht(),1);var nu=ve(Do(),1);function ru(i){let e=Math.floor(i/3600)%24,t=Math.floor(i/60)%60,r=Math.floor(i%60);return{hours:e,minutes:t,seconds:r}}function su(i){let e=ru(i),t=e.hours===0?"":`${e.hours}h`,r=e.minutes===0?"":`${e.hours===0?e.minutes:` ${e.minutes.toString(10).padStart(2,"0")}`}m`,s=e.hours!==0?"":`${e.minutes===0?e.seconds:` ${e.seconds.toString(10).padStart(2,"0")}`}s`;return`${t}${r}${s}`}var ou=ve(ht(),1);var N1="\xB7",im=()=>` ${N1} `;function rm(i){let{newFiles:e,isUploadStarted:t,recoveredState:r,i18n:s,uploadState:n,isSomeGhost:o,startUpload:a}=i,l=(0,ou.default)("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":n===kt.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":o}),h=e&&t&&!r?s("uploadXNewFiles",{smart_count:e}):s("uploadXFiles",{smart_count:e});return c("button",{type:"button",className:l,"aria-label":s("uploadXFiles",{smart_count:e}),onClick:a,disabled:o,"data-uppy-super-focusable":!0,children:h})}function sm(i){let{i18n:e,uppy:t}=i;return c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e("retryUpload"),onClick:()=>t.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry",children:[c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10",children:c("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})}),e("retry")]})}function nm(i){let{i18n:e,uppy:t}=i;return c("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e("cancel"),"aria-label":e("cancel"),onClick:()=>t.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0,children:c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:c("g",{fill:"none",fillRule:"evenodd",children:[c("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),c("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"})]})})})}function om(i){let{isAllPaused:e,i18n:t,isAllComplete:r,resumableUploads:s,uppy:n}=i,o=t(e?"resume":"pause");function a(){if(!r){if(!s){n.cancelAll();return}if(e){n.resumeAll();return}n.pauseAll()}}return c("button",{title:o,"aria-label":o,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:a,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0,children:c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16",children:c("g",{fill:"none",fillRule:"evenodd",children:[c("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),c("path",{fill:"#FFF",d:e?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"})]})})})}function am(i){let{i18n:e,doneButtonHandler:t}=i;return c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:t,"data-uppy-super-focusable":!0,children:e("done")})}function lm(){return c("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14",children:c("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"})})}function cm(i){let{progress:e}=i,{value:t,mode:r,message:s}=e;return c("div",{className:"uppy-StatusBar-content",children:[c(lm,{}),r==="determinate"?`${Math.round(t*100)}% \xB7 `:"",s]})}function B1(i){let{numUploads:e,complete:t,totalUploadedSize:r,totalSize:s,totalETA:n,i18n:o}=i,a=e>1,l=(0,nu.default)(r);return c("div",{className:"uppy-StatusBar-statusSecondary",children:[a&&o("filesUploadedOfTotal",{complete:t,smart_count:e}),c("span",{className:"uppy-StatusBar-additionalInfo",children:[a&&im(),s!=null?o("dataUploadedOfTotal",{complete:l,total:(0,nu.default)(s)}):o("dataUploadedOfUnknown",{complete:l}),im(),n!=null&&o("xTimeLeft",{time:su(n)})]})]})}function um(i){let{i18n:e,complete:t,numUploads:r}=i;return c("div",{className:"uppy-StatusBar-statusSecondary",children:e("filesUploadedOfTotal",{complete:t,smart_count:r})})}function U1(i){let{i18n:e,newFiles:t,startUpload:r}=i,s=(0,ou.default)("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return c("div",{className:"uppy-StatusBar-statusSecondary",children:[c("div",{className:"uppy-StatusBar-statusSecondaryHint",children:e("xMoreFilesAdded",{smart_count:t})}),c("button",{type:"button",className:s,"aria-label":e("uploadXFiles",{smart_count:t}),onClick:r,children:e("upload")})]})}function hm(i){let{i18n:e,supportsUploadProgress:t,totalProgress:r,showProgressDetails:s,isUploadStarted:n,isAllComplete:o,isAllPaused:a,newFiles:l,numUploads:h,complete:f,totalUploadedSize:m,totalSize:y,totalETA:b,startUpload:k}=i,F=l&&n;if(!n||o)return null;let P=e(a?"paused":"uploading");function M(){return!a&&!F&&s?t?c(B1,{numUploads:h,complete:f,totalUploadedSize:m,totalSize:y,totalETA:b,i18n:e}):c(um,{i18n:e,complete:f,numUploads:h}):null}return c("div",{className:"uppy-StatusBar-content",title:P,children:[a?null:c(lm,{}),c("div",{className:"uppy-StatusBar-status",children:[c("div",{className:"uppy-StatusBar-statusPrimary",children:t&&r!==0?`${P}: ${r}%`:P}),M(),F?c(U1,{i18n:e,newFiles:l,startUpload:k}):null]})]})}function dm(i){let{i18n:e}=i;return c("div",{className:"uppy-StatusBar-content",role:"status",title:e("complete"),children:c("div",{className:"uppy-StatusBar-status",children:c("div",{className:"uppy-StatusBar-statusPrimary",children:[c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11",children:c("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})}),e("complete")]})})})}function pm(i){let{error:e,i18n:t,complete:r,numUploads:s}=i;function n(){let o=`${t("uploadFailed")} 

 ${e}`;alert(o)}return c("div",{className:"uppy-StatusBar-content",title:t("uploadFailed"),children:[c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11",children:c("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})}),c("div",{className:"uppy-StatusBar-status",children:[c("div",{className:"uppy-StatusBar-statusPrimary",children:[t("uploadFailed"),c("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":t("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:n,type:"button",children:"?"})]}),c(um,{i18n:t,complete:r,numUploads:s})]})]})}function rn(i){let e=[],t="indeterminate",r;for(let{progress:n}of Object.values(i)){let{preprocess:o,postprocess:a}=n;r==null&&(o||a)&&({mode:t,message:r}=o||a),o?.mode==="determinate"&&e.push(o.value),a?.mode==="determinate"&&e.push(a.value)}let s=e.reduce((n,o)=>n+o/e.length,0);return{mode:t,message:r,value:s}}var{STATE_ERROR:fm,STATE_WAITING:z1,STATE_PREPROCESSING:au,STATE_UPLOADING:ea,STATE_POSTPROCESSING:lu,STATE_COMPLETE:ta}=kt;function uu({newFiles:i,allowNewUpload:e,isUploadInProgress:t,isAllPaused:r,resumableUploads:s,error:n,hideUploadButton:o=void 0,hidePauseResumeButton:a=!1,hideCancelButton:l=!1,hideRetryButton:h=!1,recoveredState:f,uploadState:m,totalProgress:y,files:b,supportsUploadProgress:k,hideAfterFinish:F=!1,isSomeGhost:P,doneButtonHandler:M=void 0,isUploadStarted:A,i18n:_,startUpload:S,uppy:E,isAllComplete:C,showProgressDetails:O=void 0,numUploads:N,complete:z,totalSize:V,totalETA:j,totalUploadedSize:K}){function te(){switch(m){case lu:case au:{let be=rn(b);return be.mode==="determinate"?be.value*100:y}case fm:return null;case ea:return k?y:null;default:return y}}function ie(){switch(m){case lu:case au:{let{mode:be}=rn(b);return be==="indeterminate"}case ea:return!k;default:return!1}}let je=te(),ge=je??100,De=!n&&i&&(!t&&!r||f)&&e&&!o,de=!l&&m!==z1&&m!==ta,tt=s&&!a&&m===ea,Ct=n&&!C&&!h,re=M&&m===ta,ft=(0,cu.default)("uppy-StatusBar-progress",{"is-indeterminate":ie()}),se=(0,cu.default)("uppy-StatusBar",`is-${m}`,{"has-ghosts":P}),Xe=(()=>{switch(m){case au:case lu:return c(cm,{progress:rn(b)});case ta:return c(dm,{i18n:_});case fm:return c(pm,{error:n,i18n:_,numUploads:N,complete:z});case ea:return c(hm,{i18n:_,supportsUploadProgress:k,totalProgress:y,showProgressDetails:O,isUploadStarted:A,isAllComplete:C,isAllPaused:r,newFiles:i,numUploads:N,complete:z,totalUploadedSize:K,totalSize:V,totalETA:j,startUpload:S});default:return null}})();return!(De||Ct||tt||de||re)&&!Xe||m===ta&&F?null:c("div",{className:se,children:[c("div",{className:ft,style:{width:`${ge}%`},role:"progressbar","aria-label":`${ge}%`,"aria-valuetext":`${ge}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":je}),Xe,c("div",{className:"uppy-StatusBar-actions",children:[De?c(rm,{newFiles:i,isUploadStarted:A,recoveredState:f,i18n:_,isSomeGhost:P,startUpload:S,uploadState:m}):null,Ct?c(sm,{i18n:_,uppy:E}):null,tt?c(om,{isAllPaused:r,i18n:_,isAllComplete:C,resumableUploads:s,uppy:E}):null,de?c(nm,{i18n:_,uppy:E}):null,re?c(am,{i18n:_,doneButtonHandler:M}):null]})]})}var H1=2e3,j1=2e3;function q1(i,e,t,r){if(i)return kt.STATE_ERROR;if(e)return kt.STATE_COMPLETE;if(t)return kt.STATE_WAITING;let s=kt.STATE_WAITING,n=Object.keys(r);for(let o=0;o<n.length;o++){let{progress:a}=r[n[o]];if(a.uploadStarted&&!a.uploadComplete)return kt.STATE_UPLOADING;a.preprocess&&(s=kt.STATE_PREPROCESSING),a.postprocess&&s!==kt.STATE_PREPROCESSING&&(s=kt.STATE_POSTPROCESSING)}return s}var V1={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null},qr=class extends Yt{static VERSION=em.version;#e;#t;#i;#r;constructor(e,t){super(e,{...V1,...t}),this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=tm,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}#n(e){if(e.total==null||e.total===0)return null;let t=e.total-e.uploaded;if(t<=0)return null;this.#e??=performance.now();let r=performance.now()-this.#e;if(r===0)return Math.round((this.#r??0)/100)/10;let s=e.uploaded-this.#t;if(this.#t=e.uploaded,s<=0)return Math.round((this.#r??0)/100)/10;let n=s/r,o=this.#i==null?n:Jo(n,this.#i,H1,r);this.#i=o;let a=t/o,l=Math.max(this.#r-r,0),h=this.#r==null?a:Jo(a,l,j1,r);return this.#r=h,this.#e=performance.now(),Math.round(h/100)/10}startUpload=()=>this.uppy.upload().catch(()=>{});render(e){let{capabilities:t,files:r,allowNewUpload:s,totalProgress:n,error:o,recoveredState:a}=e,{newFiles:l,startedFiles:h,completeFiles:f,isUploadStarted:m,isAllComplete:y,isAllPaused:b,isUploadInProgress:k,isSomeGhost:F}=this.uppy.getObjectOfFilesPerState(),P=a?Object.values(r):l,M=!!t.resumableUploads,A=t.uploadProgress!==!1,_=null,S=0;h.every(C=>C.progress.bytesTotal!=null&&C.progress.bytesTotal!==0)?(_=0,h.forEach(C=>{_+=C.progress.bytesTotal||0,S+=C.progress.bytesUploaded||0})):h.forEach(C=>{S+=C.progress.bytesUploaded||0});let E=this.#n({uploaded:S,total:_});return uu({error:o,uploadState:q1(o,y,a,e.files||{}),allowNewUpload:s,totalProgress:n,totalSize:_,totalUploadedSize:S,isAllComplete:!1,isAllPaused:b,isUploadStarted:m,isUploadInProgress:k,isSomeGhost:F,recoveredState:a,complete:f.length,newFiles:P.length,numUploads:h.length,totalETA:E,files:r,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:M,supportsUploadProgress:A,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish})}onMount(){let e=this.el;_o(e)||(e.dir="ltr")}#o=()=>{let{recoveredState:e}=this.uppy.getState();if(this.#i=null,this.#r=null,e){this.#t=Object.values(e.files).reduce((t,{progress:r})=>t+r.bytesUploaded,0),this.uppy.emit("restore-confirmed");return}this.#e=performance.now(),this.#t=0};install(){let{target:e}=this.opts;e&&this.mount(e,this),this.uppy.on("upload",this.#o),this.#e=performance.now(),this.#t=this.uppy.getFiles().reduce((t,r)=>t+r.progress.bytesUploaded,0)}uninstall(){this.unmount(),this.uppy.off("upload",this.#o)}};var $1=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function W1(i,e,t){let r=$1.exec(i),s=e.mimeType??r?.[1]??"plain/text",n;if(r?.[2]!=null){let o=atob(decodeURIComponent(r[3])),a=new Uint8Array(o.length);for(let l=0;l<o.length;l++)a[l]=o.charCodeAt(l);n=[a]}else r?.[3]!=null&&(n=[decodeURIComponent(r[3])]);return t?new File(n,e.name||"",{type:s}):new Blob(n,{type:s})}var mm=W1;function ia(i){return i.startsWith("blob:")}function ra(i){return i?/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(i):!1}function ue(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}var Tm=typeof self<"u"?self:global,an=typeof navigator<"u",G1=an&&typeof HTMLImageElement>"u",gm=!(typeof global>"u"||typeof process>"u"||!process.versions||!process.versions.node),km=Tm.Buffer,Am=!!km,X1=i=>i!==void 0;function Cm(i){return i===void 0||(i instanceof Map?i.size===0:Object.values(i).filter(X1).length===0)}function Ge(i){let e=new Error(i);throw delete e.stack,e}function bm(i){let e=function(t){let r=0;return t.ifd0.enabled&&(r+=1024),t.exif.enabled&&(r+=2048),t.makerNote&&(r+=2048),t.userComment&&(r+=1024),t.gps.enabled&&(r+=512),t.interop.enabled&&(r+=100),t.ifd1.enabled&&(r+=1024),r+2048}(i);return i.jfif.enabled&&(e+=50),i.xmp.enabled&&(e+=2e4),i.iptc.enabled&&(e+=14e3),i.icc.enabled&&(e+=6e3),e}var hu=i=>String.fromCharCode.apply(null,i),vm=typeof TextDecoder<"u"?new TextDecoder("utf-8"):void 0,mr=class i{static from(e,t){return e instanceof this&&e.le===t?e:new i(e,void 0,void 0,t)}constructor(e,t=0,r,s){if(typeof s=="boolean"&&(this.le=s),Array.isArray(e)&&(e=new Uint8Array(e)),e===0)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){r===void 0&&(r=e.byteLength-t);let n=new DataView(e,t,r);this._swapDataView(n)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof i){r===void 0&&(r=e.byteLength-t),(t+=e.byteOffset)+r>e.byteOffset+e.byteLength&&Ge("Creating view outside of available memory in ArrayBuffer");let n=new DataView(e.buffer,t,r);this._swapDataView(n)}else if(typeof e=="number"){let n=new DataView(new ArrayBuffer(e));this._swapDataView(n)}else Ge("Invalid input argument for BufferView: "+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,r=i){return e instanceof DataView||e instanceof i?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||Ge("BufferView.set(): Invalid data argument."),this.toUint8().set(e,t),new r(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new i(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){return s=this.getUint8Array(e,t),vm?vm.decode(s):Am?Buffer.from(s).toString("utf8"):decodeURIComponent(escape(hu(s)));var s}getLatin1String(e=0,t=this.byteLength){let r=this.getUint8Array(e,t);return hu(r)}getUnicodeString(e=0,t=this.byteLength){let r=[];for(let s=0;s<t&&e+s<this.byteLength;s+=2)r.push(this.getUint16(e+s));return hu(r)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,r){switch(t){case 1:return this.getUint8(e,r);case 2:return this.getUint16(e,r);case 4:return this.getUint32(e,r);case 8:return this.getUint64&&this.getUint64(e,r)}}getUint(e,t,r){switch(t){case 8:return this.getUint8(e,r);case 16:return this.getUint16(e,r);case 32:return this.getUint32(e,r);case 64:return this.getUint64&&this.getUint64(e,r)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}};function pu(i,e){Ge(`${i} '${e}' was not loaded, try using full build of exifr.`)}var ln=class extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||pu(this.kind,e),t&&(e in t||function(r,s){Ge(`Unknown ${r} '${s}'.`)}(this.kind,e),t[e].enabled||pu(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}},la=new ln("file parser"),At=new ln("segment parser"),hn=new ln("file reader"),K1=Tm.fetch;function ym(i,e){return(t=i).startsWith("data:")||t.length>1e4?mu(i,e,"base64"):gm&&i.includes("://")?fu(i,e,"url",sa):gm?mu(i,e,"fs"):an?fu(i,e,"url",sa):void Ge("Invalid input argument");var t}async function fu(i,e,t,r){return hn.has(t)?mu(i,e,t):r?async function(s,n){let o=await n(s);return new mr(o)}(i,r):void Ge(`Parser ${t} is not loaded`)}async function mu(i,e,t){let r=new(hn.get(t))(i,e);return await r.read(),r}var sa=i=>K1(i).then(e=>e.arrayBuffer()),cn=i=>new Promise((e,t)=>{let r=new FileReader;r.onloadend=()=>e(r.result||new ArrayBuffer),r.onerror=t,r.readAsArrayBuffer(i)}),gu=class extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}};function _m(i,e,t){let r=new gu;for(let[s,n]of t)r.set(s,n);if(Array.isArray(e))for(let s of e)i.set(s,r);else i.set(e,r);return r}function Fm(i,e,t){let r,s=i.get(e);for(r of t)s.set(r[0],r[1])}var dn=new Map,Su=new Map,Eu=new Map,Vr=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],ca=["jfif","xmp","icc","iptc","ihdr"],un=["tiff",...ca],Ie=["ifd0","ifd1","exif","gps","interop"],$r=[...un,...Ie],Wr=["makerNote","userComment"],ua=["translateKeys","translateValues","reviveValues","multiSegment"],Gr=[...ua,"sanitize","mergeOutput","silentErrors"],na=class{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}},fr=class extends na{get needed(){return this.enabled||this.deps.size>0}constructor(e,t,r,s){if(super(),ue(this,"enabled",!1),ue(this,"skip",new Set),ue(this,"pick",new Set),ue(this,"deps",new Set),ue(this,"translateKeys",!1),ue(this,"translateValues",!1),ue(this,"reviveValues",!1),this.key=e,this.enabled=t,this.parse=this.enabled,this.applyInheritables(s),this.canBeFiltered=Ie.includes(e),this.canBeFiltered&&(this.dict=dn.get(e)),r!==void 0)if(Array.isArray(r))this.parse=this.enabled=!0,this.canBeFiltered&&r.length>0&&this.translateTagSet(r,this.pick);else if(typeof r=="object"){if(this.enabled=!0,this.parse=r.parse!==!1,this.canBeFiltered){let{pick:n,skip:o}=r;n&&n.length>0&&this.translateTagSet(n,this.pick),o&&o.length>0&&this.translateTagSet(o,this.skip)}this.applyInheritables(r)}else r===!0||r===!1?this.parse=this.enabled=r:Ge(`Invalid options argument: ${r}`)}applyInheritables(e){let t,r;for(t of ua)r=e[t],r!==void 0&&(this[t]=r)}translateTagSet(e,t){if(this.dict){let r,s,{tagKeys:n,tagValues:o}=this.dict;for(r of e)typeof r=="string"?(s=o.indexOf(r),s===-1&&(s=n.indexOf(Number(r))),s!==-1&&t.add(Number(n[s]))):t.add(r)}else for(let r of e)t.add(r)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,oa(this.pick,this.deps)):this.enabled&&this.pick.size>0&&oa(this.pick,this.deps)}},pt={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},wm=new Map,gr=class extends na{static useCached(e){let t=wm.get(e);return t!==void 0||(t=new this(e),wm.set(e,t)),t}constructor(e){super(),e===!0?this.setupFromTrue():e===void 0?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):typeof e=="object"?this.setupFromObject(e):Ge(`Invalid options argument ${e}`),this.firstChunkSize===void 0&&(this.firstChunkSize=an?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of Vr)this[e]=pt[e];for(e of Gr)this[e]=pt[e];for(e of Wr)this[e]=pt[e];for(e of $r)this[e]=new fr(e,pt[e],void 0,this)}setupFromTrue(){let e;for(e of Vr)this[e]=pt[e];for(e of Gr)this[e]=pt[e];for(e of Wr)this[e]=!0;for(e of $r)this[e]=new fr(e,!0,void 0,this)}setupFromArray(e){let t;for(t of Vr)this[t]=pt[t];for(t of Gr)this[t]=pt[t];for(t of Wr)this[t]=pt[t];for(t of $r)this[t]=new fr(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,Ie)}setupFromObject(e){let t;for(t of(Ie.ifd0=Ie.ifd0||Ie.image,Ie.ifd1=Ie.ifd1||Ie.thumbnail,Object.assign(this,e),Vr))this[t]=du(e[t],pt[t]);for(t of Gr)this[t]=du(e[t],pt[t]);for(t of Wr)this[t]=du(e[t],pt[t]);for(t of un)this[t]=new fr(t,pt[t],e[t],this);for(t of Ie)this[t]=new fr(t,pt[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,Ie,$r),e.tiff===!0?this.batchEnableWithBool(Ie,!0):e.tiff===!1?this.batchEnableWithUserValue(Ie,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,Ie):typeof e.tiff=="object"&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,Ie)}batchEnableWithBool(e,t){for(let r of e)this[r].enabled=t}batchEnableWithUserValue(e,t){for(let r of e){let s=t[r];this[r].enabled=s!==!1&&s!==void 0}}setupGlobalFilters(e,t,r,s=r){if(e&&e.length){for(let o of s)this[o].enabled=!1;let n=Sm(e,r);for(let[o,a]of n)oa(this[o].pick,a),this[o].enabled=!0}else if(t&&t.length){let n=Sm(t,r);for(let[o,a]of n)oa(this[o].skip,a)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:r,iptc:s,icc:n}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),r.enabled||e.skip.add(700),s.enabled||e.skip.add(33723),n.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:r,interop:s}=this;s.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),r.needed&&e.deps.add(34853),this.tiff.enabled=Ie.some(n=>this[n].enabled===!0)||this.makerNote||this.userComment;for(let n of Ie)this[n].finalizeFilters()}get onlyTiff(){return!ca.map(e=>this[e].enabled).some(e=>e===!0)&&this.tiff.enabled}checkLoadedPlugins(){for(let e of un)this[e].enabled&&!At.has(e)&&pu("segment parser",e)}};function Sm(i,e){let t,r,s,n,o=[];for(s of e){for(n of(t=dn.get(s),r=[],t))(i.includes(n[0])||i.includes(n[1]))&&r.push(n[0]);r.length&&o.push([s,r])}return o}function du(i,e){return i!==void 0?i:e!==void 0?e:void 0}function oa(i,e){for(let t of e)i.add(t)}ue(gr,"default",pt);var Xr=class{constructor(e){ue(this,"parsers",{}),ue(this,"output",{}),ue(this,"errors",[]),ue(this,"pushToErrors",t=>this.errors.push(t)),this.options=gr.useCached(e)}async read(e){this.file=await function(t,r){return typeof t=="string"?ym(t,r):an&&!G1&&t instanceof HTMLImageElement?ym(t.src,r):t instanceof Uint8Array||t instanceof ArrayBuffer||t instanceof DataView?new mr(t):an&&t instanceof Blob?fu(t,r,"blob",cn):void Ge("Invalid input argument")}(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[r,s]of la)if(s.canHandle(e,t))return this.fileParser=new s(this.options,this.file,this.parsers),e[r]=!0;this.file.close&&this.file.close(),Ge("Unknown file format")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),Cm(r=e)?void 0:r;var r}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map(async r=>{let s=await r.parse();r.assignToOutput(e,s)});this.options.silentErrors&&(t=t.map(r=>r.catch(this.pushToErrors))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,r=At.get("tiff",e);var s;if(t.tiff?s={start:0,type:"tiff"}:t.jpeg&&(s=await this.fileParser.getOrFindSegment("tiff")),s===void 0)return;let n=await this.fileParser.ensureSegmentChunk(s),o=this.parsers.tiff=new r(n,e,t),a=await o.extractThumbnail();return t.close&&t.close(),a}};async function Pm(i,e){let t=new Xr(e);return await t.read(i),t.parse()}var Y1=Object.freeze({__proto__:null,parse:Pm,Exifr:Xr,fileParsers:la,segmentParsers:At,fileReaders:hn,tagKeys:dn,tagValues:Su,tagRevivers:Eu,createDictionary:_m,extendDictionary:Fm,fetchUrlAsArrayBuffer:sa,readBlobAsArrayBuffer:cn,chunkedProps:Vr,otherSegments:ca,segments:un,tiffBlocks:Ie,segmentsAndBlocks:$r,tiffExtractables:Wr,inheritables:ua,allFormatters:Gr,Options:gr}),Hi=class{static findPosition(e,t){let r=e.getUint16(t+2)+2,s=typeof this.headerLength=="function"?this.headerLength(e,t,r):this.headerLength,n=t+s,o=r-s;return{offset:t,length:r,headerLength:s,start:n,size:o,end:n+o}}static parse(e,t={}){return new this(e,new gr({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof mr?e:new mr(e)}constructor(e,t={},r){ue(this,"errors",[]),ue(this,"raw",new Map),ue(this,"handleError",s=>{if(!this.options.silentErrors)throw s;this.errors.push(s.message)}),this.chunk=this.normalizeInput(e),this.file=r,this.type=this.constructor.type,this.globalOptions=this.options=t,this.localOptions=t[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let r=Eu.get(t),s=Su.get(t),n=dn.get(t),o=this.options[t],a=o.reviveValues&&!!r,l=o.translateValues&&!!s,h=o.translateKeys&&!!n,f={};for(let[m,y]of e)a&&r.has(m)?y=r.get(m)(y):l&&s.has(m)&&(y=this.translateValue(y,s.get(m))),h&&n.has(m)&&(m=n.get(m)||m),f[m]=y;return f}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,r){if(this.globalOptions.mergeOutput)return Object.assign(e,r);e[t]?Object.assign(e[t],r):e[t]=r}};ue(Hi,"headerLength",4),ue(Hi,"type",void 0),ue(Hi,"multiSegment",!1),ue(Hi,"canHandle",()=>!1);function Z1(i){return i===192||i===194||i===196||i===219||i===221||i===218||i===254}function Q1(i){return i>=224&&i<=239}function J1(i,e,t){for(let[r,s]of At)if(s.canHandle(i,e,t))return r}var aa=class extends class{constructor(e,t,r){ue(this,"errors",[]),ue(this,"ensureSegmentChunk",async s=>{let n=s.start,o=s.size||65536;if(this.file.chunked)if(this.file.available(n,o))s.chunk=this.file.subarray(n,o);else try{s.chunk=await this.file.readChunk(n,o)}catch(a){Ge(`Couldn't read segment: ${JSON.stringify(s)}. ${a.message}`)}else this.file.byteLength>n+o?s.chunk=this.file.subarray(n,o):s.size===void 0?s.chunk=this.file.subarray(n):Ge("Segment unreachable: "+JSON.stringify(s));return s.chunk}),this.extendOptions&&this.extendOptions(e),this.options=e,this.file=t,this.parsers=r}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let r=new(At.get(e))(t,this.options,this.file);return this.parsers[e]=r}createParsers(e){for(let t of e){let{type:r,chunk:s}=t,n=this.options[r];if(n&&n.enabled){let o=this.parsers[r];o&&o.append||o||this.createParser(r,s)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}{constructor(...e){super(...e),ue(this,"appSegments",[]),ue(this,"jpegSegments",[]),ue(this,"unknownSegments",[])}static canHandle(e,t){return t===65496}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){e===!0?(this.findAll=!0,this.wanted=new Set(At.keyList())):(e=e===void 0?At.keyList().filter(t=>this.options[t].enabled):e.filter(t=>this.options[t].enabled&&At.has(t)),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:r,findAll:s,wanted:n,remaining:o}=this;if(!s&&this.file.chunked&&(s=Array.from(n).some(a=>{let l=At.get(a),h=this.options[a];return l.multiSegment&&h.multiSegment}),s&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,r.byteLength),!this.options.onlyTiff&&r.chunked){let a=!1;for(;o.size>0&&!a&&(r.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:l}=r,h=this.appSegments.some(f=>!this.file.available(f.offset||f.start,f.length||f.size));if(a=e>l&&!h?!await r.readNextChunk(e):!await r.readNextChunk(l),(e=this.findAppSegmentsInRange(e,r.byteLength))===void 0)return}}}findAppSegmentsInRange(e,t){t-=2;let r,s,n,o,a,l,{file:h,findAll:f,wanted:m,remaining:y,options:b}=this;for(;e<t;e++)if(h.getUint8(e)===255){if(r=h.getUint8(e+1),Q1(r)){if(s=h.getUint16(e+2),n=J1(h,e,s),n&&m.has(n)&&(o=At.get(n),a=o.findPosition(h,e),l=b[n],a.type=n,this.appSegments.push(a),!f&&(o.multiSegment&&l.multiSegment?(this.unfinishedMultiSegment=a.chunkNumber<a.chunkCount,this.unfinishedMultiSegment||y.delete(n)):y.delete(n),y.size===0)))break;b.recordUnknownSegments&&(a=Hi.findPosition(h,e),a.marker=r,this.unknownSegments.push(a)),e+=s+1}else if(Z1(r)){if(s=h.getUint16(e+2),r===218&&b.stopAfterSos!==!1)return;b.recordJpegSegments&&this.jpegSegments.push({offset:e,length:s,marker:r}),e+=s+1}}return e}mergeMultiSegments(){if(!this.appSegments.some(t=>t.multiSegment))return;let e=function(t,r){let s,n,o,a=new Map;for(let l=0;l<t.length;l++)s=t[l],n=s[r],a.has(n)?o=a.get(n):a.set(n,o=[]),o.push(s);return Array.from(a)}(this.appSegments,"type");this.mergedAppSegments=e.map(([t,r])=>{let s=At.get(t,this.options);return s.handleMultiSegments?{type:t,chunk:s.handleMultiSegments(r)}:r[0]})}getSegment(e){return this.appSegments.find(t=>t.type===e)}async getOrFindSegment(e){let t=this.getSegment(e);return t===void 0&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}};ue(aa,"type","jpeg"),la.set("jpeg",aa);var eS=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4],bu=class extends Hi{parseHeader(){var e=this.chunk.getUint16();e===18761?this.le=!0:e===19789&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,r=new Map){let{pick:s,skip:n}=this.options[t];s=new Set(s);let o=s.size>0,a=n.size===0,l=this.chunk.getUint16(e);e+=2;for(let h=0;h<l;h++){let f=this.chunk.getUint16(e);if(o){if(s.has(f)&&(r.set(f,this.parseTag(e,f,t)),s.delete(f),s.size===0))break}else!a&&n.has(f)||r.set(f,this.parseTag(e,f,t));e+=12}return r}parseTag(e,t,r){let{chunk:s}=this,n=s.getUint16(e+2),o=s.getUint32(e+4),a=eS[n];if(a*o<=4?e+=8:e=s.getUint32(e+8),(n<1||n>13)&&Ge(`Invalid TIFF value type. block: ${r.toUpperCase()}, tag: ${t.toString(16)}, type: ${n}, offset ${e}`),e>s.byteLength&&Ge(`Invalid TIFF value offset. block: ${r.toUpperCase()}, tag: ${t.toString(16)}, type: ${n}, offset ${e} is outside of chunk size ${s.byteLength}`),n===1)return s.getUint8Array(e,o);if(n===2)return(l=function(h){for(;h.endsWith("\0");)h=h.slice(0,-1);return h}(l=s.getString(e,o)).trim())===""?void 0:l;var l;if(n===7)return s.getUint8Array(e,o);if(o===1)return this.parseTagValue(n,e);{let h=new(function(m){switch(m){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(n))(o),f=a;for(let m=0;m<o;m++)h[m]=this.parseTagValue(n,e),e+=f;return h}}parseTagValue(e,t){let{chunk:r}=this;switch(e){case 1:return r.getUint8(t);case 3:return r.getUint16(t);case 4:return r.getUint32(t);case 5:return r.getUint32(t)/r.getUint32(t+4);case 6:return r.getInt8(t);case 8:return r.getInt16(t);case 9:return r.getInt32(t);case 10:return r.getInt32(t)/r.getInt32(t+4);case 11:return r.getFloat(t);case 12:return r.getDouble(t);case 13:return r.getUint32(t);default:Ge(`Invalid tiff type ${e}`)}}},on=class extends bu{static canHandle(e,t){return e.getUint8(t+1)===225&&e.getUint32(t+4)===1165519206&&e.getUint16(t+8)===0}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse("parseExifBlock"),e.gps.enabled&&await this.safeParse("parseGpsBlock"),e.interop.enabled&&await this.safeParse("parseInteropBlock"),e.ifd1.enabled&&await this.safeParse("parseThumbnailBlock"),this.createOutput()}safeParse(e){let t=this[e]();return t.catch!==void 0&&(t=t.catch(this.handleError)),t}findIfd0Offset(){this.ifd0Offset===void 0&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(this.ifd1Offset===void 0){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let r=new Map;return this[t]=r,this.parseTags(e,t,r),r}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&Ge("Malformed EXIF data"),!e.chunked&&this.ifd0Offset>e.byteLength&&Ge(`IFD0 offset points to outside of file.
this.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,bm(this.options));let t=this.parseBlock(this.ifd0Offset,"ifd0");return t.size!==0?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif||(this.ifd0||await this.parseIfd0Block(),this.exifOffset===void 0))return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,bm(this.options));let e=this.parseBlock(this.exifOffset,"exif");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let r=e.get(t);r&&r.length===1&&e.set(t,r[0])}async parseGpsBlock(){if(this.gps||(this.ifd0||await this.parseIfd0Block(),this.gpsOffset===void 0))return;let e=this.parseBlock(this.gpsOffset,"gps");return e&&e.has(2)&&e.has(4)&&(e.set("latitude",Em(...e.get(2),e.get(1))),e.set("longitude",Em(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),this.interopOffset!==void 0||this.exif||await this.parseExifBlock(),this.interopOffset!==void 0))return this.parseBlock(this.interopOffset,"interop")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),this.ifd1===void 0)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,r,s={};for(t of Ie)if(e=this[t],!Cm(e))if(r=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(t==="ifd1")continue;Object.assign(s,r)}else s[t]=r;return this.makerNote&&(s.makerNote=this.makerNote),this.userComment&&(s.userComment=this.userComment),s}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[r,s]of Object.entries(t))this.assignObjectToOutput(e,r,s)}};function Em(i,e,t,r){var s=i+e/60+t/3600;return r!=="S"&&r!=="W"||(s*=-1),s}ue(on,"type","tiff"),ue(on,"headerLength",10),At.set("tiff",on);var wP=Object.freeze({__proto__:null,default:Y1,Exifr:Xr,fileParsers:la,segmentParsers:At,fileReaders:hn,tagKeys:dn,tagValues:Su,tagRevivers:Eu,createDictionary:_m,extendDictionary:Fm,fetchUrlAsArrayBuffer:sa,readBlobAsArrayBuffer:cn,chunkedProps:Vr,otherSegments:ca,segments:un,tiffBlocks:Ie,segmentsAndBlocks:$r,tiffExtractables:Wr,inheritables:ua,allFormatters:Gr,Options:gr,parse:Pm}),xu={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},SP=Object.assign({},xu,{firstChunkSize:4e4,gps:[1,2,3,4]});var EP=Object.assign({},xu,{tiff:!1,ifd1:!0,mergeOutput:!1});var tS=Object.assign({},xu,{firstChunkSize:4e4,ifd0:[274]});async function iS(i){let e=new Xr(tS);await e.read(i);let t=await e.parse();if(t&&t.ifd0)return t.ifd0[274]}var rS=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}}),sn=!0,nn=!0;if(typeof navigator=="object"){let i=navigator.userAgent;if(i.includes("iPad")||i.includes("iPhone")){let e=i.match(/OS (\d+)_(\d+)/);if(e){let[,t,r]=e;sn=Number(t)+.1*Number(r)<13.4,nn=!1}}else if(i.includes("OS X 10")){let[,e]=i.match(/OS X 10[_.](\d+)/);sn=nn=Number(e)<15}if(i.includes("Chrome/")){let[,e]=i.match(/Chrome\/(\d+)/);sn=nn=Number(e)<81}else if(i.includes("Firefox/")){let[,e]=i.match(/Firefox\/(\d+)/);sn=nn=Number(e)<77}}async function Om(i){let e=await iS(i);return Object.assign({canvas:sn,css:nn},rS[e])}var vu=class extends mr{constructor(...e){super(...e),ue(this,"ranges",new yu),this.byteLength!==0&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,r){if(e===0&&this.byteLength===0&&r){let s=new DataView(r.buffer||r,r.byteOffset,r.byteLength);this._swapDataView(s)}else{let s=e+t;if(s>this.byteLength){let{dataView:n}=this._extend(s);this._swapDataView(n)}}}_extend(e){let t;t=Am?km.allocUnsafe(e):new Uint8Array(e);let r=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:r}}subarray(e,t,r=!1){return t=t||this._lengthToEnd(e),r&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,r=!1){r&&this._tryExtend(t,e.byteLength,e);let s=super.set(e,t);return this.ranges.add(t,s.byteLength),s}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}},yu=class{constructor(){ue(this,"list",[])}get length(){return this.list.length}add(e,t,r=0){let s=e+t,n=this.list.filter(o=>xm(e,o.offset,s)||xm(e,o.end,s));if(n.length>0){e=Math.min(e,...n.map(a=>a.offset)),s=Math.max(s,...n.map(a=>a.end)),t=s-e;let o=n.shift();o.offset=e,o.length=t,o.end=s,this.list=this.list.filter(a=>!n.includes(a))}else this.list.push({offset:e,length:t,end:s})}available(e,t){let r=e+t;return this.list.some(s=>s.offset<=e&&r<=s.end)}};function xm(i,e,t){return i<=e&&e<=t}var wu=class extends vu{constructor(e,t){super(0),ue(this,"chunksRead",0),this.input=e,this.options=t}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,r=await this.readChunk(e,t);return!!r&&r.byteLength===t}async readChunk(e,t){if(this.chunksRead++,(t=this.safeWrapAddress(e,t))!==0)return this._readChunk(e,t)}safeWrapAddress(e,t){return this.size!==void 0&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(this.ranges.list.length!==0)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return this.size!==void 0&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}};hn.set("blob",class extends wu{async readWhole(){this.chunked=!1;let i=await cn(this.input);this._swapArrayBuffer(i)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(i,e){let t=e?i+e:void 0,r=this.input.slice(i,t),s=await cn(r);return this.set(s,i,!0)}});var Mm={name:"@uppy/thumbnail-generator",description:"Uppy plugin that generates small previews of images to show on your upload UI.",version:"4.2.3",license:"MIT",main:"lib/index.js",type:"module",scripts:{build:"tsc --build tsconfig.build.json",typecheck:"tsc --build",test:"vitest run --environment=jsdom --silent='passed-only'"},keywords:["file uploader","uppy","uppy-plugin","thumbnail","preview","resize"],homepage:"https://uppy.io",bugs:{url:"https://github.com/transloadit/uppy/issues"},repository:{type:"git",url:"git+https://github.com/transloadit/uppy.git"},files:["src","lib","dist","CHANGELOG.md"],dependencies:{"@uppy/utils":"^6.2.2",exifr:"^7.0.0"},devDependencies:{jsdom:"^26.1.0","namespace-emitter":"2.0.1",typescript:"^5.8.3",vitest:"^3.2.4"},peerDependencies:{"@uppy/core":"^4.5.3"}};var Rm={strings:{generatingThumbnails:"Generating thumbnails..."}};function nS(i,e,t){try{i.getContext("2d").getImageData(0,0,1,1)}catch(r){if(r.code===18)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return i.toBlob?new Promise(r=>{i.toBlob(r,e,t)}).then(r=>{if(r===null)throw new Error("cannot read image, probably an svg with external resources");return r}):Promise.resolve().then(()=>mm(i.toDataURL(e,t),{})).then(r=>{if(r===null)throw new Error("could not extract blob, probably an old browser");return r})}function oS(i,e){let t=i.width,r=i.height;(e.deg===90||e.deg===270)&&(t=i.height,r=i.width);let s=document.createElement("canvas");s.width=t,s.height=r;let n=s.getContext("2d");return n.translate(t/2,r/2),e.canvas&&(n.rotate(e.rad),n.scale(e.scaleX,e.scaleY)),n.drawImage(i,-i.width/2,-i.height/2,i.width,i.height),s}function aS(i){let e=i.width/i.height,t=5e6,r=4096,s=Math.floor(Math.sqrt(t*e)),n=Math.floor(t/Math.sqrt(t*e));if(s>r&&(s=r,n=Math.round(s/e)),n>r&&(n=r,s=Math.round(e*n)),i.width>s){let o=document.createElement("canvas");return o.width=s,o.height=n,o.getContext("2d").drawImage(i,0,0,s,n),o}return i}var lS={thumbnailWidth:null,thumbnailHeight:null,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,lazy:!1},pn=class extends Yt{static VERSION=Mm.version;queue;queueProcessing;defaultThumbnailDimension;thumbnailType;constructor(e,t){if(super(e,{...lS,...t}),this.type="modifier",this.id=this.opts.id||"ThumbnailGenerator",this.title="Thumbnail Generator",this.queue=[],this.queueProcessing=!1,this.defaultThumbnailDimension=200,this.thumbnailType=this.opts.thumbnailType,this.defaultLocale=Rm,this.i18nInit(),this.opts.lazy&&this.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.")}createThumbnail(e,t,r){let s=URL.createObjectURL(e.data),n=new Promise((a,l)=>{let h=new Image;h.src=s,h.addEventListener("load",()=>{URL.revokeObjectURL(s),a(h)}),h.addEventListener("error",f=>{URL.revokeObjectURL(s),l(f.error||new Error("Could not create thumbnail"))})}),o=Om(e.data).catch(()=>1);return Promise.all([n,o]).then(([a,l])=>{let h=this.getProportionalDimensions(a,t,r,l.deg),f=oS(a,l),m=this.resizeImage(f,h.width,h.height);return nS(m,this.thumbnailType,80)}).then(a=>URL.createObjectURL(a))}getProportionalDimensions(e,t,r,s){let n=e.width/e.height;if((s===90||s===270)&&(n=e.height/e.width),t!=null){let o=t;return e.width<t&&(o=e.width),{width:o,height:Math.round(o/n)}}if(r!=null){let o=r;return e.height<r&&(o=e.height),{width:Math.round(o*n),height:o}}return{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/n)}}resizeImage(e,t,r){let s=aS(e),n=Math.ceil(Math.log2(s.width/t));n<1&&(n=1);let o=t*2**(n-1),a=r*2**(n-1),l=2;for(;n--;){let h=document.createElement("canvas");h.width=o,h.height=a,h.getContext("2d").drawImage(s,0,0,o,a),s=h,o=Math.round(o/l),a=Math.round(a/l)}return s}setPreviewURL(e,t){this.uppy.setFileState(e,{preview:t})}addToQueue(e){this.queue.push(e),this.queueProcessing===!1&&this.processQueue()}processQueue(){if(this.queueProcessing=!0,this.queue.length>0){let e=this.uppy.getFile(this.queue.shift());return e?this.requestThumbnail(e).catch(()=>{}).then(()=>this.processQueue()):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}requestThumbnail(e){return ra(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then(t=>{this.setPreviewURL(e.id,t),this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${e.id}`),this.uppy.emit("thumbnail:generated",this.uppy.getFile(e.id),t)}).catch(t=>{this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${e.id}:`,"warning"),this.uppy.log(t,"warning"),this.uppy.emit("thumbnail:error",this.uppy.getFile(e.id),t)}):Promise.resolve()}onFileAdded=e=>{!e.preview&&e.data&&ra(e.type)&&!e.isRemote&&this.addToQueue(e.id)};onCancelRequest=e=>{let t=this.queue.indexOf(e.id);t!==-1&&this.queue.splice(t,1)};onFileRemoved=e=>{let t=this.queue.indexOf(e.id);t!==-1&&this.queue.splice(t,1),e.preview&&ia(e.preview)&&URL.revokeObjectURL(e.preview)};onRestored=()=>{this.uppy.getFiles().filter(t=>t.isRestored).forEach(t=>{(!t.preview||ia(t.preview))&&this.addToQueue(t.id)})};onAllFilesRemoved=()=>{this.queue=[]};waitUntilAllProcessed=e=>{e.forEach(r=>{let s=this.uppy.getFile(r);this.uppy.emit("preprocess-progress",s,{mode:"indeterminate",message:this.i18n("generatingThumbnails")})});let t=()=>{e.forEach(r=>{let s=this.uppy.getFile(r);this.uppy.emit("preprocess-complete",s)})};return new Promise(r=>{this.queueProcessing?this.uppy.once("thumbnail:all-generated",()=>{t(),r()}):(t(),r())})};install(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}uninstall(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}};function cS(i){if(typeof i=="string"){let e=document.querySelectorAll(i);return e.length===0?null:Array.from(e)}return typeof i=="object"&&Ls(i)?[i]:null}var Tu=cS;var ji=Array.from;function ku(i){let e=ji(i.files);return Promise.resolve(e)}function ha(i,e,t,{onSuccess:r}){i.readEntries(s=>{let n=[...e,...s];s.length?queueMicrotask(()=>{ha(i,n,t,{onSuccess:r})}):r(n)},s=>{t(s),r(e)})}function Lm(i,e){return i==null?i:{kind:i.isFile?"file":i.isDirectory?"directory":void 0,name:i.name,getFile(){return new Promise((t,r)=>i.file(t,r))},async*values(){let t=i.createReader();yield*await new Promise(s=>{ha(t,[],e,{onSuccess:n=>s(n.map(o=>Lm(o,e)))})})},isSameEntry:void 0}}async function*Im(i,e,t=void 0){let r=()=>`${e}/${i.name}`;if(i.kind==="file"){let s=await i.getFile();s!=null?(s.relativePath=e?r():null,yield s):t!=null&&(yield t)}else if(i.kind==="directory")for await(let s of i.values())yield*Im(s,e?r():i.name);else t!=null&&(yield t)}async function*Au(i,e){let t=await Promise.all(Array.from(i.items,async r=>{let s;return s??=Lm(typeof r.getAsEntry=="function"?r.getAsEntry():r.webkitGetAsEntry(),e),{fileSystemHandle:s,lastResortFile:r.getAsFile()}}));for(let{lastResortFile:r,fileSystemHandle:s}of t)if(s!=null)try{yield*Im(s,"",r)}catch(n){r!=null?yield r:e(n)}else r!=null&&(yield r)}async function Cu(i,e){let t=e?.logDropError??Function.prototype;try{let r=[];for await(let s of Au(i,t))r.push(s);return r}catch{return ku(i)}}var Dm={name:"@uppy/dashboard",description:"Universal UI plugin for Uppy.",version:"4.4.3",license:"MIT",main:"lib/index.js",style:"dist/style.min.css",type:"module",scripts:{build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build",test:"vitest run --silent='passed-only'","test:e2e":"vitest watch --project browser --browser.headless false"},keywords:["file uploader","uppy","uppy-plugin","dashboard","ui"],homepage:"https://uppy.io",bugs:{url:"https://github.com/transloadit/uppy/issues"},repository:{type:"git",url:"git+https://github.com/transloadit/uppy.git"},files:["src","lib","dist","CHANGELOG.md"],dependencies:{"@transloadit/prettier-bytes":"^0.3.4","@uppy/informer":"^4.3.2","@uppy/provider-views":"^4.5.2","@uppy/status-bar":"^4.2.3","@uppy/thumbnail-generator":"^4.2.2","@uppy/utils":"^6.2.2",classnames:"^2.2.6",lodash:"^4.17.21",nanoid:"^5.0.9",preact:"^10.5.13","shallow-equal":"^3.0.0"},devDependencies:{"@uppy/core":"^4.5.2","@uppy/google-drive":"^4.4.2","@uppy/status-bar":"^4.2.3","@uppy/url":"^4.3.2","@uppy/webcam":"^4.3.2","@vitest/browser":"^3.2.4",cssnano:"^7.0.7",jsdom:"^26.1.0",postcss:"^8.5.6","postcss-cli":"^11.0.1","resize-observer-polyfill":"^1.5.0",sass:"^1.89.2",typescript:"^5.8.3",vitest:"^3.2.4"},peerDependencies:{"@uppy/core":"^4.5.2"}};function _u(){let i=document.body;return!(!("draggable"in i)||!("ondragstart"in i&&"ondrop"in i)||!("FormData"in window)||!("FileReader"in window))}var eg=ve(ht(),1);var Fu=class extends we{fileInput=null;folderInput=null;mobilePhotoFileInput=null;mobileVideoFileInput=null;triggerFileInputClick=()=>{this.fileInput?.click()};triggerFolderInputClick=()=>{this.folderInput?.click()};triggerVideoCameraInputClick=()=>{this.mobileVideoFileInput?.click()};triggerPhotoCameraInputClick=()=>{this.mobilePhotoFileInput?.click()};onFileInputChange=e=>{this.props.handleInputChange(e),e.currentTarget.value=""};renderHiddenInput=(e,t)=>c("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:e,type:"file",name:"files[]",multiple:this.props.maxNumberOfFiles!==1,onChange:this.onFileInputChange,accept:this.props.allowedFileTypes?.join(", "),ref:t});renderHiddenCameraInput=(e,t,r)=>{let n={photo:"image/*",video:"video/*"}[e];return c("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:`camera-${e}`,onChange:this.onFileInputChange,capture:t===""?"environment":t,accept:n,ref:r})};renderMyDeviceAcquirer=()=>c("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice",children:c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerFileInputClick,children:[c("div",{className:"uppy-DashboardTab-inner",children:c("svg",{className:"uppy-DashboardTab-iconMyDevice","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:c("path",{d:"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z",fill:"currentcolor","fill-rule":"evenodd"})})}),c("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("myDevice")})]})});renderPhotoCamera=()=>c("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera",children:c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerPhotoCameraInputClick,children:[c("div",{className:"uppy-DashboardTab-inner",children:c("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32",children:c("path",{d:"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z",fill:"#02B383","fill-rule":"nonzero"})})}),c("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("takePictureBtn")})]})});renderVideoCamera=()=>c("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera",children:c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:this.triggerVideoCameraInputClick,children:[c("div",{className:"uppy-DashboardTab-inner",children:c("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32",children:c("path",{fill:"#FF675E",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "})})}),c("div",{className:"uppy-DashboardTab-name",children:this.props.i18n("recordVideoBtn")})]})});renderBrowseButton=(e,t)=>{let r=this.props.acquirers.length;return c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:t,"data-uppy-super-focusable":r===0,children:e})};renderDropPasteBrowseTagline=e=>{let t=this.renderBrowseButton(this.props.i18n("browseFiles"),this.triggerFileInputClick),r=this.renderBrowseButton(this.props.i18n("browseFolders"),this.triggerFolderInputClick),s=this.props.fileManagerSelectionType,n=s.charAt(0).toUpperCase()+s.slice(1);return c("div",{class:"uppy-Dashboard-AddFiles-title",children:this.props.disableLocalFiles?this.props.i18n("importFiles"):e>0?this.props.i18nArray(`dropPasteImport${n}`,{browseFiles:t,browseFolders:r,browse:t}):this.props.i18nArray(`dropPaste${n}`,{browseFiles:t,browseFolders:r,browse:t})})};[Symbol.for("uppy test: disable unused locale key warning")](){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}renderAcquirer=e=>c("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":e.id,children:c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":e.id,"aria-controls":`uppy-DashboardContent-panel--${e.id}`,"aria-selected":this.props.activePickerPanel?.id===e.id,"data-uppy-super-focusable":!0,onClick:()=>this.props.showPanel(e.id),children:[c("div",{className:"uppy-DashboardTab-inner",children:e.icon()}),c("div",{className:"uppy-DashboardTab-name",children:e.name})]})});renderAcquirers=e=>{let t=[...e],r=t.splice(e.length-2,e.length);return c(Ae,{children:[t.map(s=>this.renderAcquirer(s)),c("span",{role:"presentation",style:{"white-space":"nowrap"},children:r.map(s=>this.renderAcquirer(s))})]})};renderSourcesList=(e,t)=>{let{showNativePhotoCameraButton:r,showNativeVideoCameraButton:s}=this.props,n=[],o="myDevice";t||n.push({key:o,elements:this.renderMyDeviceAcquirer()}),r&&n.push({key:"nativePhotoCameraButton",elements:this.renderPhotoCamera()}),s&&n.push({key:"nativePhotoCameraButton",elements:this.renderVideoCamera()}),n.push(...e.map(f=>({key:f.id,elements:this.renderAcquirer(f)}))),n.length===1&&n[0].key===o&&(n=[]);let l=[...n],h=l.splice(n.length-2,n.length);return c(Ae,{children:[this.renderDropPasteBrowseTagline(n.length),c("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist",children:[l.map(({key:f,elements:m})=>c(Ae,{children:m},f)),c("span",{role:"presentation",style:{"white-space":"nowrap"},children:h.map(({key:f,elements:m})=>c(Ae,{children:m},f))})]})]})};renderPoweredByUppy(){let{i18nArray:e}=this.props,t=c("span",{children:[c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11",children:c("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})}),c("span",{className:"uppy-Dashboard-poweredByUppy",children:"Uppy"})]}),r=e("poweredBy",{uppy:t});return c("a",{tabIndex:-1,href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy",children:r})}render(){let{showNativePhotoCameraButton:e,showNativeVideoCameraButton:t,nativeCameraFacingMode:r}=this.props;return c("div",{className:"uppy-Dashboard-AddFiles",children:[this.renderHiddenInput(!1,s=>{this.fileInput=s}),this.renderHiddenInput(!0,s=>{this.folderInput=s}),e&&this.renderHiddenCameraInput("photo",r,s=>{this.mobilePhotoFileInput=s}),t&&this.renderHiddenCameraInput("video",r,s=>{this.mobileVideoFileInput=s}),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),c("div",{className:"uppy-Dashboard-AddFiles-info",children:[this.props.note&&c("div",{className:"uppy-Dashboard-note",children:this.props.note}),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy()]})]})}},da=Fu;var Nm=ve(ht(),1);var hS=i=>c("div",{className:(0,Nm.default)("uppy-Dashboard-AddFilesPanel",i.className),"data-uppy-panelType":"AddFiles","aria-hidden":!i.showAddFilesPanel,children:[c("div",{className:"uppy-DashboardContent-bar",children:[c("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:i.i18n("addingMoreFiles")}),c("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>i.toggleAddFilesPanel(!1),children:i.i18n("back")})]}),c(da,{...i})]}),Bm=hS;var Um=ve(ht(),1);function dS(i){let e=i.files[i.fileCardFor],t=()=>{i.uppy.emit("file-editor:cancel",e),i.closeFileEditor()};return c("div",{className:(0,Um.default)("uppy-DashboardContent-panel",i.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor",children:[c("div",{className:"uppy-DashboardContent-bar",children:[c("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:i.i18nArray("editing",{file:c("span",{className:"uppy-DashboardContent-titleFile",children:e.meta?e.meta.name:e.name})})}),c("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t,children:i.i18n("cancel")}),c("button",{className:"uppy-DashboardContent-save",type:"button",onClick:i.saveFileEditor,children:i.i18n("save")})]}),c("div",{className:"uppy-DashboardContent-panelBody",children:i.editors.map(r=>i.uppy.getPlugin(r.id).render(i.state))})]})}var zm=dS;var Hm=ve(ht(),1);function pS(){return c("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:c("g",{fill:"#686DE0",fillRule:"evenodd",children:[c("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),c("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),c("circle",{cx:"7.5",cy:"9.5",r:"1.5"})]})})}function fS(){return c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:c("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"})})}function mS(){return c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:c("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"})})}function gS(){return c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:c("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"})})}function bS(){return c("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25",children:c("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"})})}function vS(){return c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:c("g",{fill:"#A7AFB7",fillRule:"nonzero",children:[c("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),c("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})]})})}function yS(){return c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25",children:c("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"})})}function br(i){let e={color:"#838999",icon:vS()};if(!i)return e;let t=i.split("/")[0],r=i.split("/")[1];return t==="text"?{color:"#5a5e69",icon:yS()}:t==="image"?{color:"#686de0",icon:pS()}:t==="audio"?{color:"#068dbb",icon:fS()}:t==="video"?{color:"#19af67",icon:mS()}:t==="application"&&r==="pdf"?{color:"#e25149",icon:gS()}:t==="application"&&["zip","x-7z-compressed","x-zip-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(r)!==-1?{color:"#00C469",icon:bS()}:e}function wS(i){let{tagName:e}=i.target;if(e==="INPUT"||e==="TEXTAREA"){i.stopPropagation();return}i.preventDefault(),i.stopPropagation()}var oi=wS;function fn(i){let{file:e}=i;if(e.preview)return c("img",{draggable:!1,className:"uppy-Dashboard-Item-previewImg",alt:e.name,src:e.preview});let{color:t,icon:r}=br(e.type);return c("div",{className:"uppy-Dashboard-Item-previewIconWrap",children:[c("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:t},children:r}),c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76",children:c("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})})]})}function Pu(i){let{computedMetaFields:e,requiredMetaFields:t,updateMeta:r,form:s,formState:n}=i,o={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return e.map(a=>{let l=`uppy-Dashboard-FileCard-input-${a.id}`,h=t.includes(a.id);return c("fieldset",{className:"uppy-Dashboard-FileCard-fieldset",children:[c("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:l,children:a.name}),a.render!==void 0?a.render({value:n[a.id],onChange:f=>r(f,a.id),fieldCSSClasses:o,required:h,form:s.id},Ti):c("input",{className:o.text,id:l,form:s.id,type:a.type||"text",required:h,value:n[a.id],placeholder:a.placeholder,onInput:f=>r(f.target.value,a.id),"data-uppy-super-focusable":!0})]},a.id)})}function Ou(i){let{files:e,fileCardFor:t,toggleFileCard:r,saveFileCard:s,metaFields:n,requiredMetaFields:o,openFileEditor:a,i18n:l,i18nArray:h,className:f,canEditFile:m}=i,y=()=>typeof n=="function"?n(e[t]):n,b=e[t],k=y()??[],F=m(b),P={};k.forEach(O=>{P[O.id]=b.meta[O.id]??""});let[M,A]=Nt(P),_=Ui(O=>{O.preventDefault(),s(M,t)},[s,M,t]),S=(O,N)=>{A({...M,[N]:O})},E=()=>{r(!1)},[C]=Nt(()=>{let O=document.createElement("form");return O.setAttribute("tabindex","-1"),O.id=zi(),O});return Kt(()=>(document.body.appendChild(C),C.addEventListener("submit",_),()=>{C.removeEventListener("submit",_),document.body.removeChild(C)}),[C,_]),c("div",{className:(0,Hm.default)("uppy-Dashboard-FileCard",f),"data-uppy-panelType":"FileCard",onDragOver:oi,onDragLeave:oi,onDrop:oi,onPaste:oi,children:[c("div",{className:"uppy-DashboardContent-bar",children:[c("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:h("editing",{file:c("span",{className:"uppy-DashboardContent-titleFile",children:b.meta?b.meta.name:b.name})})}),c("button",{className:"uppy-DashboardContent-back",type:"button",form:C.id,title:l("finishEditingFile"),onClick:E,children:l("cancel")})]}),c("div",{className:"uppy-Dashboard-FileCard-inner",children:[c("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:br(b.type).color},children:[c(fn,{file:b}),F&&c("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:O=>{_(O),a(b)},children:l("editImage")})]}),c("div",{className:"uppy-Dashboard-FileCard-info",children:c(Pu,{computedMetaFields:k,requiredMetaFields:o,updateMeta:S,form:C,formState:M})}),c("div",{className:"uppy-Dashboard-FileCard-actions",children:[c("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"submit",form:C.id,children:l("saveChanges")}),c("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:E,form:C.id,children:l("cancel")})]})]})]})}var $m=ve(ht(),1);function jm(i,e){if(i===e)return!0;if(!i||!e)return!1;let t=Object.keys(i),r=Object.keys(e),s=t.length;if(r.length!==s)return!1;for(let n=0;n<s;n++){let o=t[n];if(i[o]!==e[o]||!Object.prototype.hasOwnProperty.call(e,o))return!1}return!0}function Mu(i,e="Copy the URL below"){return new Promise(t=>{let r=document.createElement("textarea");r.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),r.value=i,document.body.appendChild(r),r.select();let s=()=>{document.body.removeChild(r),window.prompt(e,i),t()};try{return document.execCommand("copy")?(document.body.removeChild(r),t()):s()}catch{return document.body.removeChild(r),s()}})}function SS({file:i,uploadInProgressOrComplete:e,metaFields:t,canEditFile:r,i18n:s,onClick:n}){return!e&&t&&t.length>0||!e&&r(i)?c("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":s("editFileWithFilename",{file:i.meta.name}),title:s("editFileWithFilename",{file:i.meta.name}),onClick:()=>n(),children:c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14",children:c("g",{fillRule:"evenodd",children:[c("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),c("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),c("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})]})})}):null}function ES({i18n:i,onClick:e,file:t}){return c("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":i("removeFile",{file:t.meta.name}),title:i("removeFile",{file:t.meta.name}),onClick:()=>e(),children:c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18",children:[c("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),c("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})]})})}function xS({file:i,uppy:e,i18n:t}){let r=s=>{Mu(i.uploadURL,t("copyLinkToClipboardFallback")).then(()=>{e.log("Link copied to clipboard."),e.info(t("copyLinkToClipboardSuccess"),"info",3e3)}).catch(e.log).then(()=>s.target.focus({preventScroll:!0}))};return c("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":t("copyLink"),title:t("copyLink"),onClick:s=>r(s),children:c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12",children:c("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})})})}function Ru(i){let{uppy:e,file:t,uploadInProgressOrComplete:r,canEditFile:s,metaFields:n,showLinkToFileUploadResult:o,showRemoveButton:a,i18n:l,toggleFileCard:h,openFileEditor:f}=i;return c("div",{className:"uppy-Dashboard-Item-actionWrapper",children:[c(SS,{i18n:l,file:t,uploadInProgressOrComplete:r,canEditFile:s,metaFields:n,onClick:()=>{n&&n.length>0?h(!0,t.id):f(t)}}),o&&t.uploadURL?c(xS,{file:t,uppy:e,i18n:l}):null,a?c(ES,{i18n:l,file:t,onClick:()=>e.removeFile(t.id)}):null]})}var qm=ve(Do(),1);var Lu="...";function pa(i,e){if(e===0)return"";if(i.length<=e)return i;if(e<=Lu.length+1)return`${i.slice(0,e-1)}\u2026`;let t=e-Lu.length,r=Math.ceil(t/2),s=Math.floor(t/2);return i.slice(0,r)+Lu+i.slice(-s)}var TS=(i,e)=>(typeof e=="function"?e():e).filter(s=>s.id===i)[0].name;function mn(i){let{file:e,toggleFileCard:t,i18n:r,metaFields:s}=i,{missingRequiredMetaFields:n}=e;if(!n?.length)return null;let o=n.map(a=>TS(a,s)).join(", ");return c("div",{className:"uppy-Dashboard-Item-errorMessage",children:[r("missingRequiredMetaFields",{smart_count:n.length,fields:o})," ",c("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:()=>t(!0,e.id),children:r("editFile")})]})}var kS=i=>{let{author:e,name:t}=i.file.meta;function r(){return i.isSingleFile&&i.containerHeight>=350?90:i.containerWidth<=352?35:i.containerWidth<=576?60:e?20:30}return c("div",{className:"uppy-Dashboard-Item-name",title:t,children:pa(t,r())})},AS=i=>{let{author:e}=i.file.meta,t=i.file.remote?.providerName,r="\xB7";return e?c("div",{className:"uppy-Dashboard-Item-author",children:[c("a",{href:`${e.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",children:pa(e.name,13)}),t?c(Ae,{children:[` ${r} `,t,` ${r} `]}):null]}):null},CS=i=>i.file.size&&c("div",{className:"uppy-Dashboard-Item-statusSize",children:(0,qm.default)(i.file.size)}),_S=i=>i.file.isGhost&&c("span",{children:[" \u2022 ",c("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:()=>i.toggleAddFilesPanel(!0),children:i.i18n("reSelect")})]}),FS=({file:i,onClick:e})=>i.error?c("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":i.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:e,type:"button",children:"?"}):null;function Iu(i){let{file:e,i18n:t,toggleFileCard:r,metaFields:s,toggleAddFilesPanel:n,isSingleFile:o,containerHeight:a,containerWidth:l}=i;return c("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":e.source,children:[c("div",{className:"uppy-Dashboard-Item-fileName",children:[kS({file:e,isSingleFile:o,containerHeight:a,containerWidth:l}),c(FS,{file:e,onClick:()=>alert(e.error)})]}),c("div",{className:"uppy-Dashboard-Item-status",children:[AS({file:e}),CS({file:e}),_S({file:e,toggleAddFilesPanel:n,i18n:t})]}),c(mn,{file:e,i18n:t,toggleFileCard:r,metaFields:s})]})}function Du(i){let{file:e,i18n:t,toggleFileCard:r,metaFields:s,showLinkToFileUploadResult:n}=i,a=e.preview?"rgba(255, 255, 255, 0.5)":br(e.type).color;return c("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:a},children:[n&&e.uploadURL&&c("a",{className:"uppy-Dashboard-Item-previewLink",href:e.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.meta.name,children:c("span",{hidden:!0,children:e.meta.name})}),c(fn,{file:e}),c(mn,{file:e,i18n:t,toggleFileCard:r,metaFields:s})]})}function PS(i){if(!i.isUploaded){if(i.error&&!i.hideRetryButton){i.uppy.retryUpload(i.file.id);return}i.resumableUploads&&!i.hidePauseResumeButton?i.uppy.pauseResume(i.file.id):i.individualCancellation&&!i.hideCancelButton&&i.uppy.removeFile(i.file.id)}}function Vm(i){return i.isUploaded?i.i18n("uploadComplete"):i.error?i.i18n("retryUpload"):i.resumableUploads?i.file.isPaused?i.i18n("resumeUpload"):i.i18n("pauseUpload"):i.individualCancellation?i.i18n("cancelUpload"):""}function Nu(i){return c("div",{className:"uppy-Dashboard-Item-progress",children:c("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":Vm(i),title:Vm(i),onClick:()=>PS(i),children:i.children})})}function fa({children:i}){return c("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle",children:i})}function Bu({progress:i}){let e=2*Math.PI*15;return c("g",{children:[c("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),c("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":e,"stroke-dashoffset":e-e/100*i})]})}function Uu(i){return!i.file.progress.uploadStarted||i.file.progress.percentage===void 0?null:i.isUploaded?c("div",{className:"uppy-Dashboard-Item-progress",children:c("div",{className:"uppy-Dashboard-Item-progressIndicator",children:c(fa,{children:[c("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),c("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})]})})}):i.recoveredState?null:i.error&&!i.hideRetryButton?c(Nu,{...i,children:c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19",children:[c("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),c("path",{d:"M7.9 3H10v2H7.9z"}),c("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),c("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"})]})}):i.resumableUploads&&!i.hidePauseResumeButton?c(Nu,{...i,children:c(fa,{children:[c(Bu,{progress:i.file.progress.percentage}),i.file.isPaused?c("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):c("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)",children:[c("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),c("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})]})]})}):!i.resumableUploads&&i.individualCancellation&&!i.hideCancelButton?c(Nu,{...i,children:c(fa,{children:[c(Bu,{progress:i.file.progress.percentage}),c("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"})]})}):c("div",{className:"uppy-Dashboard-Item-progress",children:c("div",{className:"uppy-Dashboard-Item-progressIndicator",children:c(fa,{children:c(Bu,{progress:i.file.progress.percentage})})})})}var gn=class extends we{componentDidMount(){let{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}shouldComponentUpdate(e){return!jm(this.props,e)}componentDidUpdate(){let{file:e}=this.props;e.preview||this.props.handleRequestThumbnail(e)}componentWillUnmount(){let{file:e}=this.props;e.preview||this.props.handleCancelThumbnail(e)}render(){let{file:e}=this.props,t=e.progress.preprocess||e.progress.postprocess,r=!!e.progress.uploadComplete&&!t&&!e.error,s=!!e.progress.uploadStarted||!!t,n=e.progress.uploadStarted&&!e.progress.uploadComplete||t,o=e.error||!1,{isGhost:a}=e,l=(this.props.individualCancellation||!n)&&!r;r&&this.props.showRemoveButtonAfterComplete&&(l=!0);let h=(0,$m.default)({"uppy-Dashboard-Item":!0,"is-inprogress":n&&!this.props.recoveredState,"is-processing":t,"is-complete":r,"is-error":!!o,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":a});return c("div",{className:h,id:`uppy_${e.id}`,role:this.props.role,children:[c("div",{className:"uppy-Dashboard-Item-preview",children:[c(Du,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),c(Uu,{uppy:this.props.uppy,file:e,error:o,isUploaded:r,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})]}),c("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons",children:[c(Iu,{file:e,containerWidth:this.props.containerWidth,containerHeight:this.props.containerHeight,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,isSingleFile:this.props.isSingleFile}),c(Ru,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:l,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:s,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})]})]})}};function OS(i,e){let t=[],r=[];return i.forEach(s=>{r.length<e?r.push(s):(t.push(r),r=[s])}),r.length&&t.push(r),t}function zu({id:i,i18n:e,uppy:t,files:r,resumableUploads:s,hideRetryButton:n,hidePauseResumeButton:o,hideCancelButton:a,showLinkToFileUploadResult:l,showRemoveButtonAfterComplete:h,metaFields:f,isSingleFile:m,toggleFileCard:y,handleRequestThumbnail:b,handleCancelThumbnail:k,recoveredState:F,individualCancellation:P,itemsPerRow:M,openFileEditor:A,canEditFile:_,toggleAddFilesPanel:S,containerWidth:E,containerHeight:C}){let O=M===1?71:200,N=Bi(()=>{let V=(K,te)=>Number(r[te].isGhost)-Number(r[K].isGhost),j=Object.keys(r);return F&&j.sort(V),OS(j,M)},[r,M,F]),z=V=>c("div",{class:"uppy-Dashboard-filesInner",role:"presentation",children:V.map(j=>c(gn,{uppy:t,id:i,i18n:e,resumableUploads:s,individualCancellation:P,hideRetryButton:n,hidePauseResumeButton:o,hideCancelButton:a,showLinkToFileUploadResult:l,showRemoveButtonAfterComplete:h,metaFields:f,recoveredState:F,isSingleFile:m,containerWidth:E,containerHeight:C,toggleFileCard:y,handleRequestThumbnail:b,handleCancelThumbnail:k,role:"listitem",openFileEditor:A,canEditFile:_,toggleAddFilesPanel:S,file:r[j]},j))},V[0]);return m?c("div",{class:"uppy-Dashboard-files",children:z(N[0])}):c(Vo,{class:"uppy-Dashboard-files",role:"list",data:N,renderRow:z,rowHeight:O})}var Wm=ve(ht(),1);function MS({activePickerPanel:i,className:e,hideAllPanels:t,i18n:r,state:s,uppy:n}){let o=Ni(null);return c("div",{className:(0,Wm.default)("uppy-DashboardContent-panel",e),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:`uppy-DashboardContent-panel--${i.id}`,onDragOver:oi,onDragLeave:oi,onDrop:oi,onPaste:oi,children:[c("div",{className:"uppy-DashboardContent-bar",children:[c("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":1,children:r("importFrom",{name:i.name})}),c("button",{className:"uppy-DashboardContent-back",type:"button",onClick:t,children:r("cancel")})]}),c("div",{ref:o,className:"uppy-DashboardContent-panelBody",children:n.getPlugin(i.id).render(s,o.current)})]})}var Gm=MS;var ai={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete",STATE_PAUSED:"paused"};function RS(i,e,t,r={}){if(i)return ai.STATE_ERROR;if(e)return ai.STATE_COMPLETE;if(t)return ai.STATE_PAUSED;let s=ai.STATE_WAITING,n=Object.keys(r);for(let o=0;o<n.length;o++){let{progress:a}=r[n[o]];if(a.uploadStarted&&!a.uploadComplete)return ai.STATE_UPLOADING;a.preprocess&&s!==ai.STATE_UPLOADING&&(s=ai.STATE_PREPROCESSING),a.postprocess&&s!==ai.STATE_UPLOADING&&s!==ai.STATE_PREPROCESSING&&(s=ai.STATE_POSTPROCESSING)}return s}function LS({files:i,i18n:e,isAllComplete:t,isAllErrored:r,isAllPaused:s,inProgressNotPausedFiles:n,newFiles:o,processingFiles:a}){switch(RS(r,t,s,i)){case"uploading":return e("uploadingXFiles",{smart_count:n.length});case"preprocessing":case"postprocessing":return e("processingXFiles",{smart_count:a.length});case"paused":return e("uploadPaused");case"waiting":return e("xFilesSelected",{smart_count:o.length});case"complete":return e("uploadComplete");case"error":return e("error");default:}}function IS(i){let{i18n:e,isAllComplete:t,hideCancelButton:r,maxNumberOfFiles:s,toggleAddFilesPanel:n,uppy:o}=i,{allowNewUpload:a}=i;return a&&s&&(a=i.totalFileCount<i.maxNumberOfFiles),c("div",{className:"uppy-DashboardContent-bar",children:[!t&&!r?c("button",{className:"uppy-DashboardContent-back",type:"button",onClick:()=>o.cancelAll(),children:e("cancel")}):c("div",{}),c("div",{className:"uppy-DashboardContent-title",children:c(LS,{...i})}),a?c("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":e("addMoreFiles"),title:e("addMoreFiles"),onClick:()=>n(!0),children:[c("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15",children:c("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})}),c("span",{className:"uppy-DashboardContent-addMoreCaption",children:e("addMore")})]}):c("div",{})]})}var Xm=IS;var Ym=ve(ht(),1);var Kr="uppy-transition-slideDownUp",Km=250;function DS({children:i}){let[e,t]=Nt(null),[r,s]=Nt(""),n=Ni(),o=Ni(),a=Ni(),l=()=>{s(`${Kr}-enter`),cancelAnimationFrame(a.current),clearTimeout(o.current),o.current=void 0,a.current=requestAnimationFrame(()=>{s(`${Kr}-enter ${Kr}-enter-active`),n.current=setTimeout(()=>{s("")},Km)})},h=()=>{s(`${Kr}-leave`),cancelAnimationFrame(a.current),clearTimeout(n.current),n.current=void 0,a.current=requestAnimationFrame(()=>{s(`${Kr}-leave ${Kr}-leave-active`),o.current=setTimeout(()=>{t(null),s("")},Km)})};return Kt(()=>{let f=wt(i)[0];e!==f&&(f&&!e?l():e&&!f&&!o.current&&h(),t(f))},[i,e]),Kt(()=>()=>{clearTimeout(n.current),clearTimeout(o.current),cancelAnimationFrame(a.current)},[]),e?Us(e,{className:(0,Ym.default)(r,e.props.className)}):null}var bn=DS;var Zm=900,Qm=700,Hu=576,Jm=330;function ju(i){let e=i.totalFileCount===0,t=i.totalFileCount===1,r=i.containerWidth>Hu,s=i.containerHeight>Jm,n=(0,eg.default)({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":i.disabled,"uppy-Dashboard--animateOpenClose":i.animateOpenClose,"uppy-Dashboard--isClosing":i.isClosing,"uppy-Dashboard--isDraggingOver":i.isDraggingOver,"uppy-Dashboard--modal":!i.inline,"uppy-size--md":i.containerWidth>Hu,"uppy-size--lg":i.containerWidth>Qm,"uppy-size--xl":i.containerWidth>Zm,"uppy-size--height-md":i.containerHeight>Jm,"uppy-Dashboard--isAddFilesPanelVisible":i.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":i.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":i.singleFileFullScreen&&t&&s}),o=1;i.containerWidth>Zm?o=5:i.containerWidth>Qm?o=4:i.containerWidth>Hu&&(o=3);let a=i.showSelectedFiles&&!e,l=i.recoveredState?Object.keys(i.recoveredState.files).length:null,h=i.files?Object.keys(i.files).filter(y=>i.files[y].isGhost).length:0,f=()=>h>0?i.i18n("recoveredXFiles",{smart_count:h}):i.i18n("recoveredAllFiles");return c("div",{className:n,"data-uppy-theme":i.theme,"data-uppy-num-acquirers":i.acquirers.length,"data-uppy-drag-drop-supported":!i.disableLocalFiles&&_u(),"aria-hidden":i.inline?"false":i.isHidden,"aria-disabled":i.disabled,"aria-label":i.inline?i.i18n("dashboardTitle"):i.i18n("dashboardWindowTitle"),onPaste:i.handlePaste,onDragOver:i.handleDragOver,onDragLeave:i.handleDragLeave,onDrop:i.handleDrop,children:[c("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:i.handleClickOutside}),c("div",{className:"uppy-Dashboard-inner",role:i.inline?void 0:"dialog",style:{width:i.inline&&i.width?i.width:"",height:i.inline&&i.height?i.height:""},children:[i.inline?null:c("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":i.i18n("closeModal"),title:i.i18n("closeModal"),onClick:i.closeModal,children:c("span",{"aria-hidden":"true",children:"\xD7"})}),c("div",{className:"uppy-Dashboard-innerWrap",children:[c("div",{className:"uppy-Dashboard-dropFilesHereHint",children:i.i18n("dropHint")}),a&&c(Xm,{...i}),l&&c("div",{className:"uppy-Dashboard-serviceMsg",children:[c("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19",children:c("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd",children:[c("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),c("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),c("circle",{fill:"#000",cx:"12",cy:"17",r:"1"})]})}),c("strong",{className:"uppy-Dashboard-serviceMsg-title",children:i.i18n("sessionRestored")}),c("div",{className:"uppy-Dashboard-serviceMsg-text",children:f()})]}),a?c(zu,{id:i.id,i18n:i.i18n,uppy:i.uppy,files:i.files,resumableUploads:i.resumableUploads,hideRetryButton:i.hideRetryButton,hidePauseResumeButton:i.hidePauseResumeButton,hideCancelButton:i.hideCancelButton,showLinkToFileUploadResult:i.showLinkToFileUploadResult,showRemoveButtonAfterComplete:i.showRemoveButtonAfterComplete,metaFields:i.metaFields,toggleFileCard:i.toggleFileCard,handleRequestThumbnail:i.handleRequestThumbnail,handleCancelThumbnail:i.handleCancelThumbnail,recoveredState:i.recoveredState,individualCancellation:i.individualCancellation,openFileEditor:i.openFileEditor,canEditFile:i.canEditFile,toggleAddFilesPanel:i.toggleAddFilesPanel,isSingleFile:t,itemsPerRow:o,containerWidth:i.containerWidth,containerHeight:i.containerHeight}):c(da,{i18n:i.i18n,i18nArray:i.i18nArray,acquirers:i.acquirers,handleInputChange:i.handleInputChange,maxNumberOfFiles:i.maxNumberOfFiles,allowedFileTypes:i.allowedFileTypes,showNativePhotoCameraButton:i.showNativePhotoCameraButton,showNativeVideoCameraButton:i.showNativeVideoCameraButton,nativeCameraFacingMode:i.nativeCameraFacingMode,showPanel:i.showPanel,activePickerPanel:i.activePickerPanel,disableLocalFiles:i.disableLocalFiles,fileManagerSelectionType:i.fileManagerSelectionType,note:i.note,proudlyDisplayPoweredByUppy:i.proudlyDisplayPoweredByUppy}),c(bn,{children:i.showAddFilesPanel?c(Bm,{...i,isSizeMD:r},"AddFiles"):null}),c(bn,{children:i.fileCardFor?c(Ou,{...i},"FileCard"):null}),c(bn,{children:i.activePickerPanel?c(Gm,{...i},"Picker"):null}),c(bn,{children:i.showFileEditor?c(zm,{...i},"Editor"):null}),c("div",{className:"uppy-Dashboard-progressindicators",children:i.progressindicators.map(y=>i.uppy.getPlugin(y.id).render(i.state))})]})]})]})}var tg={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editImage:"Edit image",editing:"Editing %{file}",error:"Error",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}};var ma=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];var ig=ve(Uc(),1);function vn(i,e){if(e){let t=i.querySelector(`[data-uppy-paneltype="${e}"]`);if(t)return t}return i}function qu(){let i=!1;return(0,ig.default)((t,r)=>{let s=vn(t,r),n=s.contains(document.activeElement);if(n&&i)return;let o=s.querySelector("[data-uppy-super-focusable]");n&&!o||(o?(o.focus({preventScroll:!0}),i=!0):(s.querySelector(ma)?.focus({preventScroll:!0}),i=!1))},260)}function rg(i,e){let t=e[0];t&&(t.focus(),i.preventDefault())}function NS(i,e){let t=e[e.length-1];t&&(t.focus(),i.preventDefault())}function BS(i){return i.contains(document.activeElement)}function Vu(i,e,t){let r=vn(t,e),s=ji(r.querySelectorAll(ma)),n=s.indexOf(document.activeElement);BS(r)?i.shiftKey&&n===0?NS(i,s):!i.shiftKey&&n===s.length-1&&rg(i,s):rg(i,s)}function sg(i,e,t){e===null||Vu(i,e,t)}var ng=9,zS=27;function og(){let i={};return i.promise=new Promise((e,t)=>{i.resolve=e,i.reject=t}),i}var HS={target:"body",metaFields:[],thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:en,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,singleFileFullScreen:!0,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpen:null,disabled:!1,disableLocalFiles:!1,nativeCameraFacingMode:"",onDragLeave:()=>{},onDragOver:()=>{},onDrop:()=>{},plugins:[],doneButtonHandler:void 0,onRequestCloseModal:null,inline:!1,animateOpenClose:!0,browserBackButtonClose:!1,closeAfterFinish:!1,closeModalOnClickOutside:!1,disablePageScrollWhenModalOpen:!0,trigger:null,width:750,height:550},vr=class extends Yt{static VERSION=Dm.version;#e;modalName=`uppy-Dashboard-${zi()}`;superFocus=qu();ifFocusedOnUppyRecently=!1;dashboardIsDisabled;savedScrollPosition;savedActiveElement;resizeObserver;darkModeMediaQuery;makeDashboardInsidesVisibleAnywayTimeout;constructor(e,t){let r=t?.autoOpen??null;super(e,{...HS,...t,autoOpen:r}),this.id=this.opts.id||"Dashboard",this.title="Dashboard",this.type="orchestrator",this.defaultLocale=tg,this.opts.doneButtonHandler===void 0&&(this.opts.doneButtonHandler=()=>{this.uppy.clear(),this.requestCloseModal()}),this.opts.onRequestCloseModal??=()=>this.closeModal(),this.i18nInit()}removeTarget=e=>{let r=this.getPluginState().targets.filter(s=>s.id!==e.id);this.setPluginState({targets:r})};addTarget=e=>{let t=e.id||e.constructor.name,r=e.title||t,s=e.type;if(s!=="acquirer"&&s!=="progressindicator"&&s!=="editor")return this.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error"),null;let n={id:t,name:r,type:s},a=this.getPluginState().targets.slice();return a.push(n),this.setPluginState({targets:a}),this.el};hideAllPanels=()=>{let e=this.getPluginState(),t={activePickerPanel:void 0,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};e.activePickerPanel===t.activePickerPanel&&e.showAddFilesPanel===t.showAddFilesPanel&&e.showFileEditor===t.showFileEditor&&e.activeOverlayType===t.activeOverlayType||(this.setPluginState(t),this.uppy.emit("dashboard:close-panel",e.activePickerPanel?.id))};showPanel=e=>{let{targets:t}=this.getPluginState(),r=t.find(s=>s.type==="acquirer"&&s.id===e);this.setPluginState({activePickerPanel:r,activeOverlayType:"PickerPanel"}),this.uppy.emit("dashboard:show-panel",e)};canEditFile=e=>{let{targets:t}=this.getPluginState();return this.#l(t).some(s=>this.uppy.getPlugin(s.id).canEditFile(e))};openFileEditor=e=>{let{targets:t}=this.getPluginState(),r=this.#l(t);this.setPluginState({showFileEditor:!0,fileCardFor:e.id||null,activeOverlayType:"FileEditor"}),r.forEach(s=>{this.uppy.getPlugin(s.id).selectFile(e)})};closeFileEditor=()=>{let{metaFields:e}=this.getPluginState();e&&e.length>0?this.setPluginState({showFileEditor:!1,activeOverlayType:"FileCard"}):this.setPluginState({showFileEditor:!1,fileCardFor:null,activeOverlayType:"AddFiles"})};saveFileEditor=()=>{let{targets:e}=this.getPluginState();this.#l(e).forEach(r=>{this.uppy.getPlugin(r.id).save()}),this.closeFileEditor()};openModal=()=>{let{promise:e,resolve:t}=og();if(this.savedScrollPosition=window.pageYOffset,this.savedActiveElement=document.activeElement,this.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),this.opts.animateOpenClose&&this.getPluginState().isClosing){let r=()=>{this.setPluginState({isHidden:!1}),this.el.removeEventListener("animationend",r,!1),t()};this.el.addEventListener("animationend",r,!1)}else this.setPluginState({isHidden:!1}),t();return this.opts.browserBackButtonClose&&this.updateBrowserHistory(),document.addEventListener("keydown",this.handleKeyDownInModal),this.uppy.emit("dashboard:modal-open"),e};closeModal=e=>{let t=e?.manualClose??!0,{isHidden:r,isClosing:s}=this.getPluginState();if(r||s)return;let{promise:n,resolve:o}=og();if(this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.opts.animateOpenClose){this.setPluginState({isClosing:!0});let a=()=>{this.setPluginState({isHidden:!0,isClosing:!1}),this.superFocus.cancel(),this.savedActiveElement.focus(),this.el.removeEventListener("animationend",a,!1),o()};this.el.addEventListener("animationend",a,!1)}else this.setPluginState({isHidden:!0}),this.superFocus.cancel(),this.savedActiveElement.focus(),o();return document.removeEventListener("keydown",this.handleKeyDownInModal),t&&this.opts.browserBackButtonClose&&history.state?.[this.modalName]&&history.back(),this.uppy.emit("dashboard:modal-closed"),n};isModalOpen=()=>!this.getPluginState().isHidden||!1;requestCloseModal=()=>this.opts.onRequestCloseModal?this.opts.onRequestCloseModal():this.closeModal();setDarkModeCapability=e=>{let{capabilities:t}=this.uppy.getState();this.uppy.setState({capabilities:{...t,darkMode:e}})};handleSystemDarkModeChange=e=>{let t=e.matches;this.uppy.log(`[Dashboard] Dark mode is ${t?"on":"off"}`),this.setDarkModeCapability(t)};toggleFileCard=(e,t)=>{let r=this.uppy.getFile(t);e?this.uppy.emit("dashboard:file-edit-start",r):this.uppy.emit("dashboard:file-edit-complete",r),this.setPluginState({fileCardFor:e?t:null,activeOverlayType:e?"FileCard":null})};toggleAddFilesPanel=e=>{this.setPluginState({showAddFilesPanel:e,activeOverlayType:e?"AddFiles":null})};addFiles=e=>{let t=e.map(r=>({source:this.id,name:r.name,type:r.type,data:r,meta:{relativePath:r.relativePath||r.webkitRelativePath||null}}));try{this.uppy.addFiles(t)}catch(r){this.uppy.log(r)}};startListeningToResize=()=>{this.resizeObserver=new ResizeObserver(e=>{let t=e[0],{width:r,height:s}=t.contentRect;this.setPluginState({containerWidth:r,containerHeight:s,areInsidesReadyToBeVisible:!0})}),this.resizeObserver.observe(this.el.querySelector(".uppy-Dashboard-inner")),this.makeDashboardInsidesVisibleAnywayTimeout=setTimeout(()=>{let e=this.getPluginState(),t=!this.opts.inline&&e.isHidden;!e.areInsidesReadyToBeVisible&&!t&&(this.uppy.log("[Dashboard] resize event didn\u2019t fire on time: defaulted to mobile layout","warning"),this.setPluginState({areInsidesReadyToBeVisible:!0}))},1e3)};stopListeningToResize=()=>{this.resizeObserver.disconnect(),clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout)};recordIfFocusedOnUppyRecently=e=>{this.el.contains(e.target)?this.ifFocusedOnUppyRecently=!0:(this.ifFocusedOnUppyRecently=!1,this.superFocus.cancel())};disableInteractiveElements=e=>{let t=["a[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])",'[role="button"]:not([disabled])'],r=this.#e??ji(this.el.querySelectorAll(t)).filter(s=>!s.classList.contains("uppy-Dashboard-close"));for(let s of r)s.tagName==="A"?s.setAttribute("aria-disabled",e):s.disabled=e;e?this.#e=r:this.#e=null,this.dashboardIsDisabled=e};updateBrowserHistory=()=>{history.state?.[this.modalName]||history.pushState({...history.state,[this.modalName]:!0},""),window.addEventListener("popstate",this.handlePopState,!1)};handlePopState=e=>{this.isModalOpen()&&(!e.state||!e.state[this.modalName])&&this.closeModal({manualClose:!1}),!this.isModalOpen()&&e.state?.[this.modalName]&&history.back()};handleKeyDownInModal=e=>{e.keyCode===zS&&this.requestCloseModal(),e.keyCode===ng&&Vu(e,this.getPluginState().activeOverlayType,this.el)};handleClickOutside=()=>{this.opts.closeModalOnClickOutside&&this.requestCloseModal()};handlePaste=e=>{this.uppy.iteratePlugins(r=>{r.type==="acquirer"&&r.handleRootPaste?.(e)});let t=ji(e.clipboardData.files);t.length>0&&(this.uppy.log("[Dashboard] Files pasted"),this.addFiles(t))};handleInputChange=e=>{e.preventDefault();let t=ji(e.currentTarget.files||[]);t.length>0&&(this.uppy.log("[Dashboard] Files selected through input"),this.addFiles(t))};handleDragOver=e=>{e.preventDefault(),e.stopPropagation();let t=()=>{let o=!0;return this.uppy.iteratePlugins(a=>{a.canHandleRootDrop?.(e)&&(o=!0)}),o},r=()=>{let{types:o}=e.dataTransfer;return o.some(a=>a==="Files")},s=t(),n=r();if(!s&&!n||this.opts.disabled||this.opts.disableLocalFiles&&(n||!s)||!this.uppy.getState().allowNewUpload){e.dataTransfer.dropEffect="none";return}e.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),this.opts.onDragOver(e)};handleDragLeave=e=>{e.preventDefault(),e.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.opts.onDragLeave(e)};handleDrop=async e=>{e.preventDefault(),e.stopPropagation(),this.setPluginState({isDraggingOver:!1}),this.uppy.iteratePlugins(n=>{n.type==="acquirer"&&n.handleRootDrop?.(e)});let t=!1,r=n=>{this.uppy.log(n,"error"),t||(this.uppy.info(n.message,"error"),t=!0)};this.uppy.log("[Dashboard] Processing dropped files");let s=await Cu(e.dataTransfer,{logDropError:r});s.length>0&&(this.uppy.log("[Dashboard] Files dropped"),this.addFiles(s)),this.opts.onDrop(e)};handleRequestThumbnail=e=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:request",e)};handleCancelThumbnail=e=>{this.opts.waitForThumbnailsBeforeUpload||this.uppy.emit("thumbnail:cancel",e)};handleKeyDownInInline=e=>{e.keyCode===ng&&sg(e,this.getPluginState().activeOverlayType,this.el)};handlePasteOnBody=e=>{this.el.contains(document.activeElement)&&this.handlePaste(e)};handleComplete=({failed:e})=>{this.opts.closeAfterFinish&&!e?.length&&this.requestCloseModal()};handleCancelRestore=()=>{this.uppy.emit("restore-canceled")};#t=()=>{if(this.opts.disableThumbnailGenerator)return;let e=600,t=this.uppy.getFiles();if(t.length===1){let r=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);r?.setOptions({thumbnailWidth:e});let s={...t[0],preview:void 0};r?.requestThumbnail(s).then(()=>{r?.setOptions({thumbnailWidth:this.opts.thumbnailWidth})})}};#i=e=>{let t=e[0],{metaFields:r}=this.getPluginState(),s=r&&r.length>0,n=this.canEditFile(t);s&&this.opts.autoOpen==="metaEditor"?this.toggleFileCard(!0,t.id):n&&this.opts.autoOpen==="imageEditor"&&this.openFileEditor(t)};initEvents=()=>{if(this.opts.trigger&&!this.opts.inline){let e=Tu(this.opts.trigger);e?e.forEach(t=>t.addEventListener("click",this.openModal)):this.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}this.startListeningToResize(),document.addEventListener("paste",this.handlePasteOnBody),this.uppy.on("plugin-added",this.#c),this.uppy.on("plugin-remove",this.removeTarget),this.uppy.on("file-added",this.hideAllPanels),this.uppy.on("dashboard:modal-closed",this.hideAllPanels),this.uppy.on("complete",this.handleComplete),this.uppy.on("files-added",this.#t),this.uppy.on("file-removed",this.#t),document.addEventListener("focus",this.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",this.recordIfFocusedOnUppyRecently,!0),this.opts.inline&&this.el.addEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.on("files-added",this.#i)};removeEvents=()=>{let e=Tu(this.opts.trigger);!this.opts.inline&&e&&e.forEach(t=>t.removeEventListener("click",this.openModal)),this.stopListeningToResize(),document.removeEventListener("paste",this.handlePasteOnBody),window.removeEventListener("popstate",this.handlePopState,!1),this.uppy.off("plugin-added",this.#c),this.uppy.off("plugin-remove",this.removeTarget),this.uppy.off("file-added",this.hideAllPanels),this.uppy.off("dashboard:modal-closed",this.hideAllPanels),this.uppy.off("complete",this.handleComplete),this.uppy.off("files-added",this.#t),this.uppy.off("file-removed",this.#t),document.removeEventListener("focus",this.recordIfFocusedOnUppyRecently),document.removeEventListener("click",this.recordIfFocusedOnUppyRecently),this.opts.inline&&this.el.removeEventListener("keydown",this.handleKeyDownInInline),this.opts.autoOpen&&this.uppy.off("files-added",this.#i)};superFocusOnEachUpdate=()=>{let e=this.el.contains(document.activeElement),t=document.activeElement===document.body||document.activeElement===null,r=this.uppy.getState().info.length===0,s=!this.opts.inline;r&&(s||e||t&&this.ifFocusedOnUppyRecently)?this.superFocus(this.el,this.getPluginState().activeOverlayType):this.superFocus.cancel()};afterUpdate=()=>{if(this.opts.disabled&&!this.dashboardIsDisabled){this.disableInteractiveElements(!0);return}!this.opts.disabled&&this.dashboardIsDisabled&&this.disableInteractiveElements(!1),this.superFocusOnEachUpdate()};saveFileCard=(e,t)=>{this.uppy.setFileMeta(t,e),this.toggleFileCard(!1,t)};#r=e=>{let t=this.uppy.getPlugin(e.id);return{...e,icon:t.icon||this.opts.defaultPickerIcon,render:t.render}};#n=e=>{let t=this.uppy.getPlugin(e.id);return typeof t.isSupported!="function"?!0:t.isSupported()};#o=e=>e.filter(t=>t.type==="acquirer"&&this.#n(t)).map(this.#r);#s=e=>e.filter(t=>t.type==="progressindicator").map(this.#r);#l=e=>e.filter(t=>t.type==="editor").map(this.#r);render=e=>{let t=this.getPluginState(),{files:r,capabilities:s,allowNewUpload:n}=e,{newFiles:o,uploadStartedFiles:a,completeFiles:l,erroredFiles:h,inProgressFiles:f,inProgressNotPausedFiles:m,processingFiles:y,isUploadStarted:b,isAllComplete:k,isAllPaused:F}=this.uppy.getObjectOfFilesPerState(),P=this.#o(t.targets),M=this.#s(t.targets),A=this.#l(t.targets),_;return this.opts.theme==="auto"?_=s.darkMode?"dark":"light":_=this.opts.theme,["files","folders","both"].indexOf(this.opts.fileManagerSelectionType)<0&&(this.opts.fileManagerSelectionType="files",console.warn(`Unsupported option for "fileManagerSelectionType". Using default of "${this.opts.fileManagerSelectionType}".`)),ju({state:e,isHidden:t.isHidden,files:r,newFiles:o,uploadStartedFiles:a,completeFiles:l,erroredFiles:h,inProgressFiles:f,inProgressNotPausedFiles:m,processingFiles:y,isUploadStarted:b,isAllComplete:k,isAllPaused:F,totalFileCount:Object.keys(r).length,totalProgress:e.totalProgress,allowNewUpload:n,acquirers:P,theme:_,disabled:this.opts.disabled,disableLocalFiles:this.opts.disableLocalFiles,direction:this.opts.direction,activePickerPanel:t.activePickerPanel,showFileEditor:t.showFileEditor,saveFileEditor:this.saveFileEditor,closeFileEditor:this.closeFileEditor,disableInteractiveElements:this.disableInteractiveElements,animateOpenClose:this.opts.animateOpenClose,isClosing:t.isClosing,progressindicators:M,editors:A,autoProceed:this.uppy.opts.autoProceed,id:this.id,closeModal:this.requestCloseModal,handleClickOutside:this.handleClickOutside,handleInputChange:this.handleInputChange,handlePaste:this.handlePaste,inline:this.opts.inline,showPanel:this.showPanel,hideAllPanels:this.hideAllPanels,i18n:this.i18n,i18nArray:this.i18nArray,uppy:this.uppy,note:this.opts.note,recoveredState:e.recoveredState,metaFields:t.metaFields,resumableUploads:s.resumableUploads||!1,individualCancellation:s.individualCancellation,isMobileDevice:s.isMobileDevice,fileCardFor:t.fileCardFor,toggleFileCard:this.toggleFileCard,toggleAddFilesPanel:this.toggleAddFilesPanel,showAddFilesPanel:t.showAddFilesPanel,saveFileCard:this.saveFileCard,openFileEditor:this.openFileEditor,canEditFile:this.canEditFile,width:this.opts.width,height:this.opts.height,showLinkToFileUploadResult:this.opts.showLinkToFileUploadResult,fileManagerSelectionType:this.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:this.opts.proudlyDisplayPoweredByUppy,hideCancelButton:this.opts.hideCancelButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:this.opts.showRemoveButtonAfterComplete,containerWidth:t.containerWidth,containerHeight:t.containerHeight,areInsidesReadyToBeVisible:t.areInsidesReadyToBeVisible,parentElement:this.el,allowedFileTypes:this.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:this.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:this.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:this.opts.showSelectedFiles,showNativePhotoCameraButton:this.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:this.opts.showNativeVideoCameraButton,nativeCameraFacingMode:this.opts.nativeCameraFacingMode,singleFileFullScreen:this.opts.singleFileFullScreen,handleCancelRestore:this.handleCancelRestore,handleRequestThumbnail:this.handleRequestThumbnail,handleCancelThumbnail:this.handleCancelThumbnail,isDraggingOver:t.isDraggingOver,handleDragOver:this.handleDragOver,handleDragLeave:this.handleDragLeave,handleDrop:this.handleDrop})};#a=()=>{let{plugins:e}=this.opts;e.forEach(t=>{let r=this.uppy.getPlugin(t);r?r.mount(this,r):this.uppy.log(`[Uppy] Dashboard could not find plugin '${t}', make sure to uppy.use() the plugins you are specifying`,"warning")})};#f=()=>{this.uppy.iteratePlugins(this.#c)};#c=e=>{let t=["acquirer","editor"];e&&!e.opts?.target&&t.includes(e.type)&&(this.getPluginState().targets.some(s=>e.id===s.id)||e.mount(this,e))};#h(){let{hideUploadButton:e,hideRetryButton:t,hidePauseResumeButton:r,hideCancelButton:s,showProgressDetails:n,hideProgressAfterFinish:o,locale:a,doneButtonHandler:l}=this.opts;return{hideUploadButton:e,hideRetryButton:t,hidePauseResumeButton:r,hideCancelButton:s,showProgressDetails:n,hideAfterFinish:o,locale:a,doneButtonHandler:l}}#u(){let{thumbnailWidth:e,thumbnailHeight:t,thumbnailType:r,waitForThumbnailsBeforeUpload:s}=this.opts;return{thumbnailWidth:e,thumbnailHeight:t,thumbnailType:r,waitForThumbnailsBeforeUpload:s,lazy:!s}}#p(){return{}}setOptions(e){super.setOptions(e),this.uppy.getPlugin(this.#g())?.setOptions(this.#h()),this.uppy.getPlugin(this.#d())?.setOptions(this.#u())}#g(){return`${this.id}:StatusBar`}#d(){return`${this.id}:ThumbnailGenerator`}#w(){return`${this.id}:Informer`}install=()=>{this.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:void 0,showFileEditor:!1,metaFields:this.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});let{inline:e,closeAfterFinish:t}=this.opts;if(e&&t)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");let{allowMultipleUploads:r,allowMultipleUploadBatches:s}=this.uppy.opts;(r||s)&&t&&this.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");let{target:n}=this.opts;n&&this.mount(n,this),this.opts.disableStatusBar||this.uppy.use(qr,{id:this.#g(),target:this,...this.#h()}),this.opts.disableInformer||this.uppy.use(zr,{id:this.#w(),target:this,...this.#p()}),this.opts.disableThumbnailGenerator||this.uppy.use(pn,{id:this.#d(),...this.#u()}),this.darkModeMediaQuery=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;let o=this.darkModeMediaQuery?this.darkModeMediaQuery.matches:!1;this.uppy.log(`[Dashboard] Dark mode is ${o?"on":"off"}`),this.setDarkModeCapability(o),this.opts.theme==="auto"&&this.darkModeMediaQuery?.addListener(this.handleSystemDarkModeChange),this.#a(),this.#f(),this.initEvents()};uninstall=()=>{if(!this.opts.disableInformer){let t=this.uppy.getPlugin(`${this.id}:Informer`);t&&this.uppy.removePlugin(t)}if(!this.opts.disableStatusBar){let t=this.uppy.getPlugin(`${this.id}:StatusBar`);t&&this.uppy.removePlugin(t)}if(!this.opts.disableThumbnailGenerator){let t=this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);t&&this.uppy.removePlugin(t)}let{plugins:e}=this.opts;e.forEach(t=>{let r=this.uppy.getPlugin(t);r&&r.unmount()}),this.opts.theme==="auto"&&this.darkModeMediaQuery?.removeListener(this.handleSystemDarkModeChange),this.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),this.unmount(),this.removeEvents()}};var ag={name:"@uppy/image-editor",description:"Image editor and cropping UI",version:"3.4.2",license:"MIT",main:"lib/index.js",style:"dist/style.min.css",type:"module",scripts:{build:"tsc --build tsconfig.build.json","build:css":"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css",typecheck:"tsc --build"},keywords:["file uploader","upload","uppy","uppy-plugin","image editor","cropper","crop","rotate","resize"],homepage:"https://uppy.io",bugs:{url:"https://github.com/transloadit/uppy/issues"},repository:{type:"git",url:"git+https://github.com/transloadit/uppy.git"},files:["src","lib","dist","CHANGELOG.md"],dependencies:{"@uppy/utils":"^6.2.2",cropperjs:"^1.6.2",preact:"^10.5.13"},peerDependencies:{"@uppy/core":"^4.5.2"},publishConfig:{access:"public"},devDependencies:{cssnano:"^7.0.7",postcss:"^8.5.6","postcss-cli":"^11.0.1",sass:"^1.89.2",typescript:"^5.8.3"}};var pg=ve(lg(),1);function qS(i,e){let t=i.width/e.width,r=i.height/e.height,s=Math.min(t,r),n=e.width*s,o=e.height*s,a=(i.width-n)/2,l=(i.height-o)/2;return{width:n,height:o,left:a,top:l}}var cg=qS;function VS(i){return i*(Math.PI/180)}function $S(i,e,t){let r=Math.abs(VS(t));return Math.max((Math.sin(r)*i+Math.cos(r)*e)/e,(Math.sin(r)*e+Math.cos(r)*i)/i)}var ug=$S;function WS(i,e,t){return e.left<i.left?{left:i.left,width:t.width}:e.top<i.top?{top:i.top,height:t.height}:e.left+e.width>i.left+i.width?{left:i.left+i.width-t.width,width:t.width}:e.top+e.height>i.top+i.height?{top:i.top+i.height-t.height,height:t.height}:null}var hg=WS;function GS(i,e,t){return e.left<i.left?{left:i.left,width:t.left+t.width-i.left}:e.top<i.top?{top:i.top,height:t.top+t.height-i.top}:e.left+e.width>i.left+i.width?{left:t.left,width:i.left+i.width-t.left}:e.top+e.height>i.top+i.height?{top:t.top,height:i.top+i.height-t.top}:null}var dg=GS;var yn=class extends we{imgElement;cropper;constructor(e){super(e),this.state={angle90Deg:0,angleGranular:0,prevCropboxData:null},this.storePrevCropboxData=this.storePrevCropboxData.bind(this),this.limitCropboxMovement=this.limitCropboxMovement.bind(this)}componentDidMount(){let{opts:e,storeCropperInstance:t}=this.props;this.cropper=new pg.default(this.imgElement,e.cropperOptions),this.imgElement.addEventListener("cropstart",this.storePrevCropboxData),this.imgElement.addEventListener("cropend",this.limitCropboxMovement),t(this.cropper)}componentWillUnmount(){this.cropper.destroy(),this.imgElement.removeEventListener("cropstart",this.storePrevCropboxData),this.imgElement.removeEventListener("cropend",this.limitCropboxMovement)}storePrevCropboxData(){this.setState({prevCropboxData:this.cropper.getCropBoxData()})}limitCropboxMovement(e){let t=this.cropper.getCanvasData(),r=this.cropper.getCropBoxData(),{prevCropboxData:s}=this.state;if(e.detail.action==="all"){let n=hg(t,r,s);n&&this.cropper.setCropBoxData(n)}else{let n=dg(t,r,s);n&&this.cropper.setCropBoxData(n)}}onRotate90Deg=()=>{let{angle90Deg:e}=this.state,t=e-90;this.setState({angle90Deg:t,angleGranular:0}),this.cropper.scale(1),this.cropper.rotateTo(t);let r=this.cropper.getCanvasData(),s=this.cropper.getContainerData(),n=cg(s,r);this.cropper.setCanvasData(n),this.cropper.setCropBoxData(n)};onRotateGranular=e=>{let t=Number(e.target.value);this.setState({angleGranular:t});let{angle90Deg:r}=this.state,s=r+t;this.cropper.rotateTo(s);let n=this.cropper.getImageData(),o=ug(n.naturalWidth,n.naturalHeight,t),a=this.cropper.getImageData().scaleX<0?-o:o;this.cropper.scale(a,o)};renderGranularRotate(){let{i18n:e}=this.props,{angleGranular:t}=this.state;return c("label",{role:"tooltip","aria-label":`${t}\xBA`,"data-microtip-position":"top",className:"uppy-ImageCropper-rangeWrapper",children:c("input",{className:"uppy-ImageCropper-range uppy-u-reset",type:"range",onInput:this.onRotateGranular,onChange:this.onRotateGranular,value:t,min:"-45",max:"45","aria-label":e("rotate")})})}renderRevert(){let{i18n:e,opts:t}=this.props;return c("button",{"data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("revert"),onClick:()=>{this.cropper.reset(),this.cropper.setAspectRatio(t.cropperOptions.initialAspectRatio),this.setState({angle90Deg:0,angleGranular:0})},children:c("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24",children:[c("path",{d:"M0 0h24v24H0z",fill:"none"}),c("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"})]})})}renderRotate(){let{i18n:e}=this.props;return c("button",{"data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("rotate"),onClick:this.onRotate90Deg,children:c("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24",children:[c("path",{d:"M0 0h24v24H0V0zm0 0h24v24H0V0z",fill:"none"}),c("path",{d:"M14 10a2 2 0 012 2v7a2 2 0 01-2 2H6a2 2 0 01-2-2v-7a2 2 0 012-2h8zm0 1.75H6a.25.25 0 00-.243.193L5.75 12v7a.25.25 0 00.193.243L6 19.25h8a.25.25 0 00.243-.193L14.25 19v-7a.25.25 0 00-.193-.243L14 11.75zM12 .76V4c2.3 0 4.61.88 6.36 2.64a8.95 8.95 0 012.634 6.025L21 13a1 1 0 01-1.993.117L19 13h-.003a6.979 6.979 0 00-2.047-4.95 6.97 6.97 0 00-4.652-2.044L12 6v3.24L7.76 5 12 .76z"})]})})}renderFlip(){let{i18n:e}=this.props;return c("button",{"data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("flipHorizontal"),onClick:()=>this.cropper.scaleX(-this.cropper.getData().scaleX||-1),children:c("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24",children:[c("path",{d:"M0 0h24v24H0z",fill:"none"}),c("path",{d:"M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z"})]})})}renderZoomIn(){let{i18n:e}=this.props;return c("button",{"data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("zoomIn"),onClick:()=>this.cropper.zoom(.1),children:c("svg",{"aria-hidden":"true",className:"uppy-c-icon",height:"24",viewBox:"0 0 24 24",width:"24",children:[c("path",{d:"M0 0h24v24H0V0z",fill:"none"}),c("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),c("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})]})})}renderZoomOut(){let{i18n:e}=this.props;return c("button",{"data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("zoomOut"),onClick:()=>this.cropper.zoom(-.1),children:c("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24",children:[c("path",{d:"M0 0h24v24H0V0z",fill:"none"}),c("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"})]})})}renderCropSquare(){let{i18n:e}=this.props;return c("button",{"data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("aspectRatioSquare"),onClick:()=>this.cropper.setAspectRatio(1),children:c("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24",children:[c("path",{d:"M0 0h24v24H0z",fill:"none"}),c("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})]})})}renderCropWidescreen(){let{i18n:e}=this.props;return c("button",{"data-microtip-position":"top",type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":e("aspectRatioLandscape"),onClick:()=>this.cropper.setAspectRatio(16/9),children:c("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24",children:[c("path",{d:"M 19,4.9999992 V 17.000001 H 4.9999998 V 6.9999992 H 19 m 0,-2 H 4.9999998 c -1.0999999,0 -1.9999999,0.9000001 -1.9999999,2 V 17.000001 c 0,1.1 0.9,2 1.9999999,2 H 19 c 1.1,0 2,-0.9 2,-2 V 6.9999992 c 0,-1.0999999 -0.9,-2 -2,-2 z"}),c("path",{fill:"none",d:"M0 0h24v24H0z"})]})})}renderCropWidescreenVertical(){let{i18n:e}=this.props;return c("button",{"data-microtip-position":"top",type:"button","aria-label":e("aspectRatioPortrait"),className:"uppy-u-reset uppy-c-btn",onClick:()=>this.cropper.setAspectRatio(9/16),children:c("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24",children:[c("path",{d:"M 19.000001,19 H 6.999999 V 5 h 10.000002 v 14 m 2,0 V 5 c 0,-1.0999999 -0.9,-1.9999999 -2,-1.9999999 H 6.999999 c -1.1,0 -2,0.9 -2,1.9999999 v 14 c 0,1.1 0.9,2 2,2 h 10.000002 c 1.1,0 2,-0.9 2,-2 z"}),c("path",{d:"M0 0h24v24H0z",fill:"none"})]})})}render(){let{currentImage:e,opts:t}=this.props,{actions:r}=t,s=URL.createObjectURL(e.data);return c("div",{className:"uppy-ImageCropper",children:[c("div",{className:"uppy-ImageCropper-container",children:c("img",{className:"uppy-ImageCropper-image",alt:e.name,src:s,ref:n=>{this.imgElement=n}})}),c("div",{className:"uppy-ImageCropper-controls",children:[r.revert&&this.renderRevert(),r.rotate&&this.renderRotate(),r.granularRotate&&this.renderGranularRotate(),r.flip&&this.renderFlip(),r.zoomIn&&this.renderZoomIn(),r.zoomOut&&this.renderZoomOut(),r.cropSquare&&this.renderCropSquare(),r.cropWidescreen&&this.renderCropWidescreen(),r.cropWidescreenVertical&&this.renderCropWidescreenVertical()]})]})}};var fg={strings:{revert:"Reset",rotate:"Rotate 90\xB0",zoomIn:"Zoom in",zoomOut:"Zoom out",flipHorizontal:"Flip horizontally",aspectRatioSquare:"Crop square",aspectRatioLandscape:"Crop landscape (16:9)",aspectRatioPortrait:"Crop portrait (9:16)"}};var mg={viewMode:0,background:!1,autoCropArea:1,responsive:!0,minCropBoxWidth:70,minCropBoxHeight:70,croppedCanvasOptions:{},initialAspectRatio:0},gg={revert:!0,rotate:!0,granularRotate:!0,flip:!0,zoomIn:!0,zoomOut:!0,cropSquare:!0,cropWidescreen:!0,cropWidescreenVertical:!0},XS={quality:.8,actions:gg,cropperOptions:mg},Yr=class extends Yt{static VERSION=ag.version;cropper;constructor(e,t){super(e,{...XS,...t,actions:{...gg,...t?.actions},cropperOptions:{...mg,...t?.cropperOptions}}),this.id=this.opts.id||"ImageEditor",this.title="Image Editor",this.type="editor",this.defaultLocale=fg,this.i18nInit()}canEditFile(e){if(!e.type||e.isRemote)return!1;let t=e.type.split("/")[1];return!!/^(jpe?g|gif|png|bmp|webp)$/.test(t)}save=()=>{let e=s=>{let{currentImage:n}=this.getPluginState();this.uppy.setFileState(n.id,{data:new File([s],n.name??this.i18n("unnamed"),{type:s.type}),size:s.size,preview:void 0});let o=this.uppy.getFile(n.id);this.uppy.emit("thumbnail:request",o),this.setPluginState({currentImage:o}),this.uppy.emit("file-editor:complete",o)},{currentImage:t}=this.getPluginState(),r=this.cropper.getCroppedCanvas({});r.width%2!==0&&this.cropper.setData({width:r.width-1}),r.height%2!==0&&this.cropper.setData({height:r.height-1}),this.cropper.getCroppedCanvas(this.opts.cropperOptions.croppedCanvasOptions).toBlob(e,t.type,this.opts.quality)};storeCropperInstance=e=>{this.cropper=e};selectFile=e=>{this.uppy.emit("file-editor:start",e),this.setPluginState({currentImage:e})};install(){this.setPluginState({currentImage:null});let{target:e}=this.opts;e&&this.mount(e,this)}uninstall(){let{currentImage:e}=this.getPluginState();if(e){let t=this.uppy.getFile(e.id);this.uppy.emit("file-editor:cancel",t)}this.unmount()}render(){let{currentImage:e}=this.getPluginState();return e===null||e.isRemote?null:c(yn,{currentImage:e,storeCropperInstance:this.storeCropperInstance,save:this.save,opts:this.opts,i18n:this.i18n})}};var wn=class{#e;#t=[];constructor(e){this.#e=e}on(e,t){return this.#t.push([e,t]),this.#e.on(e,t)}remove(){for(let[e,t]of this.#t.splice(0))this.#e.off(e,t)}onFilePause(e,t){this.on("upload-pause",(r,s)=>{e===r?.id&&t(s)})}onFileRemove(e,t){this.on("file-removed",r=>{e===r.id&&t(r.id)})}onPause(e,t){this.on("upload-pause",(r,s)=>{e===r?.id&&t(s)})}onRetry(e,t){this.on("upload-retry",r=>{e===r?.id&&t()})}onRetryAll(e,t){this.on("retry-all",()=>{this.#e.getFile(e)&&t()})}onPauseAll(e,t){this.on("pause-all",()=>{this.#e.getFile(e)&&t()})}onCancelAll(e,t){this.on("cancel-all",(...r)=>{this.#e.getFile(e)&&t(...r)})}onResumeAll(e,t){this.on("resume-all",()=>{this.#e.getFile(e)&&t()})}};function KS(i){return new Error("Cancelled",{cause:i})}function bg(i){if(i!=null){let e=()=>this.abort(i.reason);i.addEventListener("abort",e,{once:!0});let t=()=>{i.removeEventListener("abort",e)};this.then?.(t,t)}return this}var ga=class{#e=0;#t=[];#i=!1;#r;#n=1;#o;#s;limit;constructor(e){typeof e!="number"||e===0?this.limit=1/0:this.limit=e}#l(e){this.#e+=1;let t=!1,r;try{r=e()}catch(s){throw this.#e-=1,s}return{abort:s=>{t||(t=!0,this.#e-=1,r?.(s),this.#a())},done:()=>{t||(t=!0,this.#e-=1,this.#a())}}}#a(){queueMicrotask(()=>this.#f())}#f(){if(this.#i||this.#e>=this.limit||this.#t.length===0)return;let e=this.#t.shift();if(e==null)throw new Error("Invariant violation: next is null");let t=this.#l(e.fn);e.abort=t.abort,e.done=t.done}#c(e,t){let r={fn:e,priority:t?.priority||0,abort:()=>{this.#h(r)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},s=this.#t.findIndex(n=>r.priority>n.priority);return s===-1?this.#t.push(r):this.#t.splice(s,0,r),r}#h(e){let t=this.#t.indexOf(e);t!==-1&&this.#t.splice(t,1)}run(e,t){return!this.#i&&this.#e<this.limit?this.#l(e):this.#c(e,t)}wrapSyncFunction(e,t){return(...r)=>{let s=this.run(()=>(e(...r),queueMicrotask(()=>s.done()),()=>{}),t);return{abortOn:bg,abort(){s.abort()}}}}wrapPromiseFunction(e,t){return(...r)=>{let s,n=new Promise((o,a)=>{s=this.run(()=>{let l,h;try{h=Promise.resolve(e(...r))}catch(f){h=Promise.reject(f)}return h.then(f=>{l?a(l):(s.done(),o(f))},f=>{l?a(l):(s.done(),a(f))}),f=>{l=KS(f)}},t)});return n.abort=o=>{s.abort(o)},n.abortOn=bg,n}}resume(){this.#i=!1,clearTimeout(this.#r);for(let e=0;e<this.limit;e++)this.#a()}#u=()=>this.resume();pause(e=null){this.#i=!0,clearTimeout(this.#r),e!=null&&(this.#r=setTimeout(this.#u,e))}rateLimit(e){clearTimeout(this.#s),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(this.#o=this.limit-1,this.limit=this.#n,this.#s=setTimeout(this.#p,e))}#p=()=>{if(this.#i){this.#s=setTimeout(this.#p,0);return}this.#n=this.limit,this.limit=Math.ceil((this.#o+this.#n)/2);for(let e=this.#n;e<=this.limit;e++)this.#a();this.#o-this.#n>3?this.#s=setTimeout(this.#p,2e3):this.#n=Math.floor(this.#n/2)};get isPaused(){return this.#i}},ba=Symbol("__queue");var Gu=class extends Error{cause;isNetworkError;request;constructor(e,t=null){super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=e,this.isNetworkError=!0,this.request=t}},Sn=Gu;function YS(i){return i?i.readyState!==0&&i.readyState!==4||i.status===0:!1}var vg=YS;var Xu=class{#e;#t=!1;#i;#r;constructor(e,t){this.#r=e,this.#i=()=>t(e)}progress(){this.#t||this.#r>0&&(clearTimeout(this.#e),this.#e=setTimeout(this.#i,this.#r))}done(){this.#t||(clearTimeout(this.#e),this.#e=void 0,this.#t=!0)}},yg=Xu;var va=()=>{};function wg(i,e={}){let{body:t=null,headers:r={},method:s="GET",onBeforeRequest:n=va,onUploadProgress:o=va,shouldRetry:a=()=>!0,onAfterResponse:l=va,onTimeout:h=va,responseType:f,retries:m=3,signal:y=null,timeout:b=3e4,withCredentials:k=!1}=e,F=A=>.3*2**(A-1)*1e3,P=new yg(b,h);function M(A=0){return new Promise(async(_,S)=>{let E=new XMLHttpRequest,C=O=>{a(E)&&A<m?setTimeout(()=>{M(A+1).then(_,S)},F(A)):(P.done(),S(O))};E.open(s,i,!0),E.withCredentials=k,f&&(E.responseType=f),y?.addEventListener("abort",()=>{E.abort(),S(new DOMException("Aborted","AbortError"))}),E.onload=async()=>{try{await l(E,A)}catch(O){O.request=E,C(O);return}E.status>=200&&E.status<300?(P.done(),_(E)):a(E)&&A<m?setTimeout(()=>{M(A+1).then(_,S)},F(A)):(P.done(),S(new Sn(E.statusText,E)))},E.onerror=()=>C(new Sn(E.statusText,E)),E.upload.onprogress=O=>{P.progress(),o(O)},r&&Object.keys(r).forEach(O=>{E.setRequestHeader(O,r[O])}),await n(E,A),E.send(t)})}return M()}function Sg(i){let e=t=>"error"in t&&!!t.error;return i.filter(t=>!e(t))}function Eg(i){return i.filter(e=>!e.progress?.uploadStarted||!e.isRestored)}function ya(i,e){return i===!0?Object.keys(e):Array.isArray(i)?i:[]}var xg={strings:{uploadStalled:"Upload has not made any progress for %{seconds} seconds. You may want to retry it."}};function Ai(i,e){if(!{}.hasOwnProperty.call(i,e))throw new TypeError("attempted to use private field on non-instance");return i}var ZS=0;function Qr(i){return"__private_"+ZS+++"_"+i}var QS={version:"4.3.3"};function JS(i,e){let t=e;return t||(t=new Error("Upload error")),typeof t=="string"&&(t=new Error(t)),t instanceof Error||(t=Object.assign(new Error("Upload error"),{data:t})),vg(i)?(t=new Sn(t,i),t):(t.request=i,t)}function Tg(i){return i.data.slice(0,i.data.size,i.meta.type)}var eE={formData:!0,fieldName:"file",method:"post",allowedMetaFields:!0,bundle:!1,headers:{},timeout:30*1e3,limit:5,withCredentials:!1,responseType:""},yr=Qr("getFetcher"),Zu=Qr("uploadLocalFile"),Ku=Qr("uploadBundle"),Qu=Qr("getCompanionClientArgs"),Yu=Qr("uploadFiles"),En=Qr("handleUpload"),Zr=class extends Di{constructor(e,t){if(super(e,{...eE,fieldName:t.bundle?"files[]":"file",...t}),Object.defineProperty(this,Yu,{value:sE}),Object.defineProperty(this,Qu,{value:rE}),Object.defineProperty(this,Ku,{value:iE}),Object.defineProperty(this,Zu,{value:tE}),Object.defineProperty(this,yr,{writable:!0,value:void 0}),Object.defineProperty(this,En,{writable:!0,value:async r=>{if(r.length===0){this.uppy.log("[XHRUpload] No files to upload!");return}this.opts.limit===0&&!this.opts[ba]&&this.uppy.log("[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0","warning"),this.uppy.log("[XHRUpload] Uploading...");let s=this.uppy.getFilesByIds(r),n=Sg(s),o=Eg(n);if(this.uppy.emit("upload-start",o),this.opts.bundle){if(n.some(l=>l.isRemote))throw new Error("Can\u2019t upload remote files when the `bundle: true` option is set");if(typeof this.opts.headers=="function")throw new TypeError("`headers` may not be a function when the `bundle: true` option is set");await Ai(this,Ku)[Ku](n)}else await Ai(this,Yu)[Yu](n)}}),this.type="uploader",this.id=this.opts.id||"XHRUpload",this.defaultLocale=xg,this.i18nInit(),ba in this.opts?this.requests=this.opts[ba]:this.requests=new ga(this.opts.limit),this.opts.bundle&&!this.opts.formData)throw new Error("`opts.formData` must be true when `opts.bundle` is enabled.");if(this.opts.bundle&&typeof this.opts.headers=="function")throw new Error("`opts.headers` can not be a function when the `bundle: true` option is set.");if(t?.allowedMetaFields===void 0&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");this.uploaderEvents=Object.create(null),Ai(this,yr)[yr]=r=>async(s,n)=>{try{var o,a,l;let m=await wg(s,{...n,onBeforeRequest:(k,F)=>{var P,M;return(P=(M=this.opts).onBeforeRequest)==null?void 0:P.call(M,k,F,r)},shouldRetry:this.opts.shouldRetry,onAfterResponse:this.opts.onAfterResponse,onTimeout:k=>{let F=Math.ceil(k/1e3),P=new Error(this.i18n("uploadStalled",{seconds:F}));this.uppy.emit("upload-stalled",P,r)},onUploadProgress:k=>{if(k.lengthComputable)for(let{id:P}of r){var F;let M=this.uppy.getFile(P);this.uppy.emit("upload-progress",M,{uploadStarted:(F=M.progress.uploadStarted)!=null?F:0,bytesUploaded:k.loaded/k.total*M.size,bytesTotal:M.size})}}}),y=await((o=(a=this.opts).getResponseData)==null?void 0:o.call(a,m));if(m.responseType==="json"){var h;(h=y)!=null||(y=m.response)}else try{var f;(f=y)!=null||(y=JSON.parse(m.responseText))}catch(k){throw new Error("@uppy/xhr-upload expects a JSON response (with a `url` property). To parse non-JSON responses, use `getResponseData` to turn your response into JSON.",{cause:k})}let b=typeof((l=y)==null?void 0:l.url)=="string"?y.url:void 0;for(let{id:k}of r)this.uppy.emit("upload-success",this.uppy.getFile(k),{status:m.status,body:y,uploadURL:b});return m}catch(m){if(m.name==="AbortError")return;let y=m.request;for(let b of r)this.uppy.emit("upload-error",this.uppy.getFile(b.id),JS(y,m),y);throw m}}}getOptions(e){let t=this.uppy.getState().xhrUpload,{headers:r}=this.opts,s={...this.opts,...t||{},...e.xhrUpload||{},headers:{}};return typeof r=="function"?s.headers=r(e):Object.assign(s.headers,this.opts.headers),t&&Object.assign(s.headers,t.headers),e.xhrUpload&&Object.assign(s.headers,e.xhrUpload.headers),s}addMetadata(e,t,r){ya(r.allowedMetaFields,t).forEach(n=>{let o=t[n];Array.isArray(o)?o.forEach(a=>e.append(n,a)):e.append(n,o)})}createFormDataUpload(e,t){let r=new FormData;this.addMetadata(r,e.meta,t);let s=Tg(e);return e.name?r.append(t.fieldName,s,e.meta.name):r.append(t.fieldName,s),r}createBundledUpload(e,t){let r=new FormData,{meta:s}=this.uppy.getState();return this.addMetadata(r,s,t),e.forEach(n=>{let o=this.getOptions(n),a=Tg(n);n.name?r.append(o.fieldName,a,n.name):r.append(o.fieldName,a)}),r}install(){if(this.opts.bundle){let{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:{...e,individualCancellation:!1}})}this.uppy.addUploader(Ai(this,En)[En])}uninstall(){if(this.opts.bundle){let{capabilities:e}=this.uppy.getState();this.uppy.setState({capabilities:{...e,individualCancellation:!0}})}this.uppy.removeUploader(Ai(this,En)[En])}};async function tE(i){let e=new wn(this.uppy),t=new AbortController,r=this.requests.wrapPromiseFunction(async()=>{let s=this.getOptions(i),n=Ai(this,yr)[yr]([i]),o=s.formData?this.createFormDataUpload(i,s):i.data;return n(s.endpoint,{...s,body:o,signal:t.signal})});e.onFileRemove(i.id,()=>t.abort()),e.onCancelAll(i.id,()=>{t.abort()});try{await r().abortOn(t.signal)}catch(s){if(s.message!=="Cancelled")throw s}finally{e.remove()}}async function iE(i){let e=new AbortController,t=this.requests.wrapPromiseFunction(async()=>{var s;let n=(s=this.uppy.getState().xhrUpload)!=null?s:{},o=Ai(this,yr)[yr](i),a=this.createBundledUpload(i,{...this.opts,...n});return o(this.opts.endpoint,{...this.opts,body:a,signal:e.signal})});function r(){e.abort()}this.uppy.once("cancel-all",r);try{await t().abortOn(e.signal)}catch(s){if(s.message!=="Cancelled")throw s}finally{this.uppy.off("cancel-all",r)}}function rE(i){var e;let t=this.getOptions(i),r=ya(t.allowedMetaFields,i.meta);return{...(e=i.remote)==null?void 0:e.body,protocol:"multipart",endpoint:t.endpoint,size:i.data.size,fieldname:t.fieldName,metadata:Object.fromEntries(r.map(s=>[s,i.meta[s]])),httpMethod:t.method,useFormData:t.formData,headers:t.headers}}async function sE(i){await Promise.allSettled(i.map(e=>{if(e.isRemote){let t=()=>this.requests,r=new AbortController,s=o=>{o.id===e.id&&r.abort()};this.uppy.on("file-removed",s);let n=this.uppy.getRequestClientForFile(e).uploadRemoteFile(e,Ai(this,Qu)[Qu](e),{signal:r.signal,getQueue:t});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",s)},{priority:-1})(),n}return Ai(this,Zu)[Zu](e)}))}Zr.VERSION=QS.version;var Ze=class{static fromTemplate(i){if(Lr.isSupported)return Lr.sanitize(i,{USE_PROFILES:{html:!0,svg:!0},RETURN_DOM:!0}).children[0];{let e=new DOMParser().parseFromString(i,"text/html").body.children[0];return nE(e)}}};function nE(i){return oE(i),kg(i),i}function oE(i){let e=i.querySelectorAll("script");for(let t of e)t.remove()}function aE(i,e){let t=e.replace(/\s+/g,"").toLowerCase();if(["src","href","xlink:href"].includes(i)&&(t.includes("javascript:")||t.includes("data:"))||i.startsWith("on"))return!0}function lE(i){let e=i.attributes;for(let{name:t,value:r}of e)aE(t,r)&&i.removeAttribute(t)}function kg(i){let e=i.children;for(let t of e)lE(t),kg(t)}var wa=class extends G{static values={identifier:String,endpoint:String,maxFileSize:{type:Number,default:null},minFileSize:{type:Number,default:null},maxTotalSize:{type:Number,default:null},maxFileNum:{type:Number,default:null},minFileNum:{type:Number,default:null},allowedFileTypes:{type:Array,default:null},requiredMetaFields:{type:Array,default:[]}};static outlets=["attachment-preview","attachment-preview-container"];connect(){this.uppy||(this.uploadedFiles=[],this.element.style.display="none",this.configureUppy(),this.#l(),this.#s(),this.element.addEventListener("turbo:morph-element",i=>{i.target===this.element&&!this.morphing&&(this.morphing=!0,requestAnimationFrame(()=>{this.#e(),this.morphing=!1}))}))}disconnect(){this.#t()}#e(){this.element.isConnected&&(this.#t(),this.uploadedFiles=[],this.element.style.display="none",this.configureUppy(),this.#l(),this.#s())}#t(){this.uppy&&(this.uppy.destroy(),this.uppy=null),this.triggerContainer&&this.triggerContainer.parentNode&&(this.triggerContainer.parentNode.removeChild(this.triggerContainer),this.triggerContainer=null)}attachmentPreviewOutletConnected(i,e){this.#s()}attachmentPreviewOutletDisconnected(i,e){this.#s()}configureUppy(){this.uppy=new Uo({restrictions:{maxFileSize:this.maxFileSizeValue,minFileSize:this.minFileSizeValue,maxTotalFileSize:this.maxTotalSizeValue,maxNumberOfFiles:this.maxFileNumValue,minNumberOfFiles:this.minFileNumValue,allowedFileTypes:this.allowedFileTypesValue,requiredMetaFields:this.requiredMetaFieldsValue}}).use(vr,{inline:!1,closeAfterFinish:!0}).use(Yr,{target:vr}),this.#i(),this.#r()}#i(){this.uppy.use(Zr,{endpoint:this.endpointValue})}#r(){this.uppy.on("upload-success",this.#o.bind(this))}#n(){let i=document.documentElement.getAttribute("data-bs-theme")||"auto";this.#u.setOptions({theme:i});let e=null;for(;e=this.uploadedFiles.pop();)this.uppy.removeFile(e.id);this.#u.openModal()}#o(i,e){this.uploadedFiles.push(i),this.multiple||this.attachmentPreviewOutlets.forEach(s=>s.remove());let t=e.body.data,r=e.body.url;this.attachmentPreviewContainerOutlet.element.appendChild(this.#c(t,r))}#s(){if(!this.deleteAllTrigger)return;this.attachmentPreviewOutlets.length>1?(this.deleteAllTrigger.style.display="initial",this.deleteAllTrigger.textContent=`Delete ${this.attachmentPreviewOutlets.length}`):this.deleteAllTrigger.style.display="none"}#l(){this.triggerContainer=document.createElement("div"),this.triggerContainer.className="flex items-center gap-2",this.element.insertAdjacentElement("afterend",this.triggerContainer),this.#a(),this.uploadTrigger&&this.triggerContainer.append(this.uploadTrigger),this.deleteAllTrigger&&this.triggerContainer.append(this.deleteAllTrigger)}#a(){let i=this.multiple?"Choose files":"Choose file";this.uploadTrigger=Ze.fromTemplate(`<button type="button" class="text-gray-900 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-200 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700 inline-flex items-center">
        <svg class="w-4 h-4 mr-2" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"/>
        </svg>
        ${i}
      </button>`,!1),this.uploadTrigger.addEventListener("click",this.#n.bind(this))}#f(){this.deleteAllTrigger=Ze.fromTemplate(`<button type="button" class="text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm         px-5 py-2.5 dark:bg-red-600 dark:hover:bg-red-700 focus:outline-none dark:focus:ring-red-800 inline-flex items-center">
        Delete ${this.attachmentPreviewOutlets.length}
      </button>`,!1),this.deleteAllTrigger.addEventListener("click",()=>{confirm("Are you sure?")&&this.attachmentPreviewContainerOutlet.clear()})}#c(i,e){let t=i.metadata.filename,r=t.substring(t.lastIndexOf(".")+1,t.length)||t,s=this.multiple?"multiple":"",n=i.metadata.mime_type,a=["image/jpeg","image/png","image/gif","image/webp","image/svg+xml","image/bmp","image/tiff"].includes(n.toLowerCase()),l=Ze.fromTemplate(this.#h(t,r,n,e,a)),h=Ze.fromTemplate(`<input name="${this.element.name}" ${s} type="hidden" autocomplete="off" hidden />`);return h.value=JSON.stringify(i),l.appendChild(h),l}#h(i,e,t,r,s){return`
      <div class="${this.identifierValue} attachment-preview group relative bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-sm hover:shadow-md transition-all duration-300"
           data-controller="attachment-preview"
           data-attachment-preview-mime-type-value="${t}"
           data-attachment-preview-thumbnail-url-value="${s?r:""}"
           data-attachment-preview-target="thumbnail"
           title="${i}">
        <a class="block aspect-square overflow-hidden rounded-t-lg"
           data-attachment-preview-target="thumbnailLink">
          ${s?`<img src="${r}" class="w-full h-full object-cover" />`:`<div class="w-full h-full flex items-center justify-center bg-gray-50 dark:bg-gray-900 text-gray-500 dark:text-gray-400 font-mono">.${e}</div>`}
        </a>
        <div class="px-2 py-1.5 text-sm text-gray-700 dark:text-gray-300 border-t border-gray-200 dark:border-gray-700 truncate text-center bg-white dark:bg-gray-800"
             title="${i}">
          ${i}
        </div>
        <button type="button"
                class="w-full py-2 px-4 text-sm text-red-600 dark:text-red-400 bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900/50 rounded-b-lg transition-colors duration-200 flex items-center justify-center gap-2 border-t border-gray-200 dark:border-gray-700"
                data-action="click->attachment-preview#remove">
          <span class="bi bi-trash"></span>
          Delete
        </button>
      </div>
    `}get#u(){return this.uppy.getPlugin("Dashboard")}get multiple(){return this.maxFileNumValue!=1}};function cE(){return Ze.fromTemplate(`
    <svg aria-hidden="true" focusable="false" width="25" height="25" viewBox="0 0 25 25">
      <g fill="#686DE0" fillRule="evenodd">
        <path d="M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z" fillRule="nonzero" />
        <path d="M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z" fillRule="nonzero" />
        <circle cx="7.5" cy="9.5" r="1.5" />
      </g>
    </svg>
  `)}function uE(){return Ze.fromTemplate(`
    <svg aria-hidden="true" focusable="false" className="uppy-c-icon" width="25" height="25" viewBox="0 0 25 25">
      <path d="M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z" fill="#049BCF" fillRule="nonzero" />
    </svg>
  `)}function hE(){return Ze.fromTemplate(`
    <svg aria-hidden="true" focusable="false" className="uppy-c-icon" width="25" height="25" viewBox="0 0 25 25">
      <path d="M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z" fill="#19AF67" fillRule="nonzero" />
    </svg>
  `)}function dE(){return Ze.fromTemplate(`
    <svg aria-hidden="true" focusable="false" className="uppy-c-icon" width="25" height="25" viewBox="0 0 25 25">
      <path d="M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z" fill="#E2514A" fillRule="nonzero" />
    </svg>
  `)}function pE(){return Ze.fromTemplate(`
    <svg aria-hidden="true" focusable="false" width="25" height="25" viewBox="0 0 25 25">
      <path d="M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z" fill="#00C469" fillRule="nonzero" />
    </svg>
  `)}function fE(){return Ze.fromTemplate(`
    <svg aria-hidden="true" focusable="false" className="uppy-c-icon" width="25" height="25" viewBox="0 0 25 25">
      <g fill="#A7AFB7" fillRule="nonzero">
        <path d="M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z" />
        <path d="M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z" />
      </g>
    </svg>
  `)}function mE(){return Ze.fromTemplate(`
    <svg aria-hidden="true" focusable="false" className="uppy-c-icon" width="25" height="25" viewBox="0 0 25 25">
      <path d="M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z" fill="#5A5E69" fillRule="nonzero" />
    </svg>
  `)}function Ju(i){let e={color:"#838999",icon:fE()};if(!i)return e;let t=i.split("/")[0],r=i.split("/")[1];return t==="text"?{color:"#5a5e69",icon:mE()}:t==="image"?{color:"#686de0",icon:cE()}:t==="audio"?{color:"#068dbb",icon:uE()}:t==="video"?{color:"#19af67",icon:hE()}:t==="application"&&r==="pdf"?{color:"#e25149",icon:dE()}:t==="application"&&["zip","x-7z-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(r)!==-1?{color:"#00C469",icon:pE()}:e}var Sa=class extends G{static targets=["thumbnail","thumbnailLink"];static values={mimeType:String,thumbnailUrl:String};connect(){this.hasThumbnailTarget&&(this.thumbnailUrlValue?this.useThumbnailPreview():this.useMimeIconPreview())}remove(){this.element.remove()}useThumbnailPreview(){let i=Ze.fromTemplate(`
      <img src="${this.thumbnailUrlValue}" class="w-full h-full object-cover" />
    `);this.thumbnailLinkTarget.innerHTML=null,this.thumbnailLinkTarget.appendChild(i)}useMimeIconPreview(){let i=Ju(this.mimeTypeValue);i.icon.classList.add("w-3/5","h-4/5","rounded-lg","shadow-lg","bg-white","p-2"),this.thumbnailLinkTarget.classList.add("flex","items-center","justify-center"),this.thumbnailLinkTarget.style.backgroundColor=i.color,this.thumbnailLinkTarget.innerHTML=null,this.thumbnailLinkTarget.appendChild(i.icon)}};var Ea=class extends G{connect(){}append(i){this.element.appendChild(i)}clear(){this.element.innerHTML=null}};var xa=class extends G{};var Ta=class extends G{static targets=["password","checkbox"];connect(){this.checkboxTarget.checked=!1}toggle(){this.passwordTarget.type=="password"?this.passwordTargets.forEach(i=>i.type="text"):this.passwordTargets.forEach(i=>i.type="password")}};var ka=class extends G{connect(){this.originalScrollPosition=window.scrollY,this.originalOverflow=document.body.style.overflow,document.body.style.overflow="hidden",this.element.showModal(),this.element.addEventListener("close",this.handleClose.bind(this))}close(){this.element.close(),this.restoreBodyState()}disconnect(){this.element.removeEventListener("close",this.handleClose),this.restoreBodyState()}handleClose(){this.restoreBodyState()}restoreBodyState(){document.body.style.overflow=this.originalOverflow||"",window.scrollTo(0,this.originalScrollPosition)}};var Aa=class extends G{static targets=["container","pair","template","addButton","keyInput","valueInput"];static values={limit:Number};connect(){this.updateIndices(),this.updateAddButtonState()}addPair(i){if(i.preventDefault(),this.pairTargets.length>=this.limitValue)return;let t=this.templateTarget.content.cloneNode(!0),r=this.pairTargets.length;this.updatePairIndices(t,r),this.containerTarget.appendChild(t),this.updateIndices(),this.updateAddButtonState();let s=this.containerTarget.lastElementChild.querySelector('[data-key-value-store-target="keyInput"]');s&&s.focus()}removePair(i){i.preventDefault();let e=i.target.closest('[data-key-value-store-target="pair"]');e&&(e.remove(),this.updateIndices(),this.updateAddButtonState())}updateIndices(){this.pairTargets.forEach((i,e)=>{let t=i.querySelector('[data-key-value-store-target="keyInput"]'),r=i.querySelector('[data-key-value-store-target="valueInput"]');t&&(t.name=t.name.replace(/\[\d+\]/,`[${e}]`),t.id=t.id.replace(/_\d+_/,`_${e}_`)),r&&(r.name=r.name.replace(/\[\d+\]/,`[${e}]`),r.id=r.id.replace(/_\d+_/,`_${e}_`))})}updatePairIndices(i,e){i.querySelectorAll("input").forEach(r=>{r.name&&(r.name=r.name.replace("__INDEX__",e)),r.id&&(r.id=r.id.replace("___INDEX___",`_${e}_`))})}updateAddButtonState(){let i=this.addButtonTarget;this.pairTargets.length>=this.limitValue?(i.disabled=!0,i.classList.add("opacity-50","cursor-not-allowed")):(i.disabled=!1,i.classList.remove("opacity-50","cursor-not-allowed"))}toJSON(){let i={};return this.pairTargets.forEach(e=>{let t=e.querySelector('[data-key-value-store-target="keyInput"]'),r=e.querySelector('[data-key-value-store-target="valueInput"]');t&&r&&t.value.trim()&&(i[t.value.trim()]=r.value)}),JSON.stringify(i)}toObject(){let i={};return this.pairTargets.forEach(e=>{let t=e.querySelector('[data-key-value-store-target="keyInput"]'),r=e.querySelector('[data-key-value-store-target="valueInput"]');t&&r&&t.value.trim()&&(i[t.value.trim()]=r.value)}),i}};var Ca=class extends G{static targets=["checkbox","checkboxAll","toolbar","selectedCount","actionButton","selectionCell"];static values={hasActions:{type:Boolean,default:!1}};connect(){this.hasActionsValue&&this.enableSelection()}enableSelection(){this.selectionCellTargets.forEach(i=>i.classList.remove("hidden"))}toggle(){this.updateUI()}toggleAll(i){let e=i.target.checked;this.checkboxTargets.forEach(t=>t.checked=e),this.updateUI()}updateUI(){let i=this.checked,e=this.checkboxTargets.length;this.hasCheckboxAllTarget&&(this.checkboxAllTarget.checked=i.length===e&&e>0,this.checkboxAllTarget.indeterminate=i.length>0&&i.length<e),this.hasToolbarTarget&&this.toolbarTarget.classList.toggle("hidden",i.length===0),this.hasSelectedCountTarget&&(this.selectedCountTarget.textContent=i.length),this.updateActionButtons()}updateActionButtons(){let i=this.checked,t=i.map(s=>s.value).map(s=>`ids[]=${encodeURIComponent(s)}`).join("&"),r=this.computeAllowedActions(i);this.actionButtonTargets.forEach(s=>{let n=s.dataset.bulkActionUrl,o=s.dataset.bulkActionName;n&&(s.href=t?`${n}?${t}`:n),s.style.display=r.has(o)?"":"none"})}computeAllowedActions(i){if(i.length===0)return new Set;let e=new Set(this.getAllowedActionsForCheckbox(i[0]));for(let t=1;t<i.length;t++){let r=this.getAllowedActionsForCheckbox(i[t]);e=new Set([...e].filter(s=>r.includes(s)))}return e}getAllowedActionsForCheckbox(i){let e=i.dataset.allowedActions;return e?e.split(",").filter(t=>t):[]}get checked(){return this.checkboxTargets.filter(i=>i.checked)}get unchecked(){return this.checkboxTargets.filter(i=>!i.checked)}};var _a=class extends G{clear(){this.element.querySelectorAll("input, select, textarea").forEach(e=>{e.type==="checkbox"||e.type==="radio"?e.checked=!1:e.tagName==="SELECT"?e.selectedIndex=0:e.type==="hidden"?e.dataset.controller==="flatpickr"&&(e.value=""):e.value=""}),this.element.querySelectorAll('[data-controller="flatpickr"]').forEach(e=>{let t=this.application.getControllerForElementAndIdentifier(e,"flatpickr");t?.picker&&t.picker.clear()});let i=this.element.closest("form");i&&i.requestSubmit()}};var Fa=class extends G{static values={maxHeight:{type:Number,default:0}};connect(){this.resize(),this.element.addEventListener("input",this.resize),window.addEventListener("resize",this.resize)}disconnect(){this.element.removeEventListener("input",this.resize),window.removeEventListener("resize",this.resize)}resize=()=>{let i=this.element,e=this.#e();i.style.height="auto",i.style.overflow="hidden";let t=i.scrollHeight;e>0&&t>e?(i.style.height=`${e}px`,i.style.overflow="auto"):i.style.height=`${t}px`};#e(){if(this.maxHeightValue>0)return this.maxHeightValue;let e=window.getComputedStyle(this.element).maxHeight;if(e&&e!=="none"){let t=parseFloat(e);if(!isNaN(t)&&t>0)return t}return 300}};var Pa=class extends G{static targets=["source"];copy(i){let e=this.sourceTarget.value||this.sourceTarget.textContent,t=i.currentTarget,r=t.textContent;navigator.clipboard.writeText(e).then(()=>{t.textContent="Copied!",setTimeout(()=>{t.textContent=r},2e3)}).catch(s=>{console.warn("Clipboard API failed, using fallback:",s),this.fallbackCopy(e),t.textContent="Copied!",setTimeout(()=>{t.textContent=r},2e3)})}fallbackCopy(i){let e=document.createElement("textarea");e.value=i,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}};function eh(i){i.register("password-visibility",Ta),i.register("sidebar",xa),i.register("resource-header",eo),i.register("nested-resource-form-fields",to),i.register("form",io),i.register("resource-drop-down",co),i.register("resource-collapse",uo),i.register("resource-dismiss",ho),i.register("frame-navigator",po),i.register("color-mode",fo),i.register("easymde",Eo),i.register("slim-select",xo),i.register("flatpickr",To),i.register("intl-tel-input",ko),i.register("select-navigator",Ao),i.register("resource-tab-list",Co),i.register("attachment-input",wa),i.register("attachment-preview",Sa),i.register("attachment-preview-container",Ea),i.register("remote-modal",ka),i.register("key-value-store",Aa),i.register("bulk-actions",Ca),i.register("filter-panel",_a),i.register("textarea-autogrow",Fa),i.register("clipboard",Pa)}Turbo.StreamActions.redirect=function(){Turbo.cache.clear();let i=this.getAttribute("url");Turbo.visit(i)};var gE=Qn.start();eh(gE);})();
/*!
 * Sanitize an HTML node
 */
/*! Bundled license information:

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

cropperjs/dist/cropper.js:
  (*!
   * Cropper.js v1.6.2
   * https://fengyuanchen.github.io/cropperjs
   *
   * Copyright 2015-present Chen Fengyuan
   * Released under the MIT license
   *
   * Date: 2024-04-21T07:43:05.335Z
   *)

@hotwired/turbo/dist/turbo.es2017-esm.js:
  (*!
  Turbo 8.0.21
  Copyright  2026 37signals LLC
   *)

dompurify/dist/purify.es.mjs:
  (*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE *)

@uppy/utils/lib/Translator.js:
  (**
   * Takes a string with placeholder variables like `%{smart_count} file selected`
   * and replaces it with values from options `{smart_count: 5}`
   *
   * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
   * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
   *
   * @param phrase that needs interpolation, with placeholders
   * @param options with values that will be used to replace placeholders
   *)
*/
//# sourceMappingURL=plutonium.min.js.map
