(()=>{var fa=Object.create;var Tn=Object.defineProperty;var pa=Object.getOwnPropertyDescriptor;var ma=Object.getOwnPropertyNames;var ga=Object.getPrototypeOf,ba=Object.prototype.hasOwnProperty;var va=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var ya=(s,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ma(e))!ba.call(s,i)&&i!==t&&Tn(s,i,{get:()=>e[i],enumerable:!(r=pa(e,i))||r.enumerable});return s};var wa=(s,e,t)=>(t=s!=null?fa(ga(s)):{},ya(e||!s||!s.__esModule?Tn(t,"default",{value:s,enumerable:!0}):t,s));var $n=va((Ou,Hn)=>{var hl="Expected a function",Nn=NaN,ul="[object Symbol]",dl=/^\s+|\s+$/g,fl=/^[-+]0x[0-9a-f]+$/i,pl=/^0b[01]+$/i,ml=/^0o[0-7]+$/i,gl=parseInt,bl=typeof global=="object"&&global&&global.Object===Object&&global,vl=typeof self=="object"&&self&&self.Object===Object&&self,yl=bl||vl||Function("return this")(),wl=Object.prototype,El=wl.toString,Sl=Math.max,Tl=Math.min,Gs=function(){return yl.Date.now()};function Al(s,e,t){var r,i,n,o,a,l,d=0,f=!1,m=!1,E=!0;if(typeof s!="function")throw new TypeError(hl);e=_n(e)||0,Xs(t)&&(f=!!t.leading,m="maxWait"in t,n=m?Sl(_n(t.maxWait)||0,e):n,E="trailing"in t?!!t.trailing:E);function b(x){var P=r,N=i;return r=i=void 0,d=x,o=s.apply(N,P),o}function R(x){return d=x,a=setTimeout(I,e),f?b(x):o}function S(x){var P=x-l,N=x-d,W=e-P;return m?Tl(W,n-N):W}function k(x){var P=x-l,N=x-d;return l===void 0||P>=e||P<0||m&&N>=n}function I(){var x=Gs();if(k(x))return H(x);a=setTimeout(I,S(x))}function H(x){return a=void 0,E&&r?b(x):(r=i=void 0,o)}function B(){a!==void 0&&clearTimeout(a),d=0,r=l=i=a=void 0}function A(){return a===void 0?o:H(Gs())}function O(){var x=Gs(),P=k(x);if(r=arguments,i=this,l=x,P){if(a===void 0)return R(l);if(m)return a=setTimeout(I,e),b(l)}return a===void 0&&(a=setTimeout(I,e)),o}return O.cancel=B,O.flush=A,O}function Xs(s){var e=typeof s;return!!s&&(e=="object"||e=="function")}function kl(s){return!!s&&typeof s=="object"}function xl(s){return typeof s=="symbol"||kl(s)&&El.call(s)==ul}function _n(s){if(typeof s=="number")return s;if(xl(s))return Nn;if(Xs(s)){var e=typeof s.valueOf=="function"?s.valueOf():s;s=Xs(e)?e+"":e}if(typeof s!="string")return s===0?s:+s;s=s.replace(dl,"");var t=pl.test(s);return t||ml.test(s)?gl(s.slice(2),t?2:8):fl.test(s)?Nn:+s}Hn.exports=Al});var As=class{constructor(e,t,r){this.eventTarget=e,this.eventName=t,this.eventOptions=r,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){let t=Ea(e);for(let r of this.bindings){if(t.immediatePropagationStopped)break;r.handleEvent(t)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((e,t)=>{let r=e.index,i=t.index;return r<i?-1:r>i?1:0})}};function Ea(s){if("immediatePropagationStopped"in s)return s;{let{stopImmediatePropagation:e}=s;return Object.assign(s,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}var ks=class{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(e=>e.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(e=>e.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((e,t)=>e.concat(Array.from(t.values())),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,t=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),t&&this.clearEventListenersForBinding(e)}handleError(e,t,r={}){this.application.handleError(e,`Error ${t}`,r)}clearEventListenersForBinding(e){let t=this.fetchEventListenerForBinding(e);t.hasBindings()||(t.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){let{eventTarget:t,eventName:r,eventOptions:i}=e,n=this.fetchEventListenerMapForEventTarget(t),o=this.cacheKey(r,i);n.delete(o),n.size==0&&this.eventListenerMaps.delete(t)}fetchEventListenerForBinding(e){let{eventTarget:t,eventName:r,eventOptions:i}=e;return this.fetchEventListener(t,r,i)}fetchEventListener(e,t,r){let i=this.fetchEventListenerMapForEventTarget(e),n=this.cacheKey(t,r),o=i.get(n);return o||(o=this.createEventListener(e,t,r),i.set(n,o)),o}createEventListener(e,t,r){let i=new As(e,t,r);return this.started&&i.connect(),i}fetchEventListenerMapForEventTarget(e){let t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t}cacheKey(e,t){let r=[e];return Object.keys(t).sort().forEach(i=>{r.push(`${t[i]?"":"!"}${i}`)}),r.join(":")}},Sa={stop({event:s,value:e}){return e&&s.stopPropagation(),!0},prevent({event:s,value:e}){return e&&s.preventDefault(),!0},self({event:s,value:e,element:t}){return e?t===s.target:!0}},Ta=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function Aa(s){let t=s.trim().match(Ta)||[],r=t[2],i=t[3];return i&&!["keydown","keyup","keypress"].includes(r)&&(r+=`.${i}`,i=""),{eventTarget:ka(t[4]),eventName:r,eventOptions:t[7]?xa(t[7]):{},identifier:t[5],methodName:t[6],keyFilter:t[1]||i}}function ka(s){if(s=="window")return window;if(s=="document")return document}function xa(s){return s.split(":").reduce((e,t)=>Object.assign(e,{[t.replace(/^!/,"")]:!/^!/.test(t)}),{})}function La(s){if(s==window)return"window";if(s==document)return"document"}function Ks(s){return s.replace(/(?:[_-])([a-z0-9])/g,(e,t)=>t.toUpperCase())}function xs(s){return Ks(s.replace(/--/g,"-").replace(/__/g,"_"))}function Jt(s){return s.charAt(0).toUpperCase()+s.slice(1)}function In(s){return s.replace(/([A-Z])/g,(e,t)=>`-${t.toLowerCase()}`)}function Ra(s){return s.match(/[^\s]+/g)||[]}function An(s){return s!=null}function Ls(s,e){return Object.prototype.hasOwnProperty.call(s,e)}var kn=["meta","ctrl","alt","shift"],Rs=class{constructor(e,t,r,i){this.element=e,this.index=t,this.eventTarget=r.eventTarget||e,this.eventName=r.eventName||Ca(e)||Cr("missing event name"),this.eventOptions=r.eventOptions||{},this.identifier=r.identifier||Cr("missing identifier"),this.methodName=r.methodName||Cr("missing method name"),this.keyFilter=r.keyFilter||"",this.schema=i}static forToken(e,t){return new this(e.element,e.index,Aa(e.content),t)}toString(){let e=this.keyFilter?`.${this.keyFilter}`:"",t=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${t}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(e){if(!this.keyFilter)return!1;let t=this.keyFilter.split("+");if(this.keyFilterDissatisfied(e,t))return!0;let r=t.filter(i=>!kn.includes(i))[0];return r?(Ls(this.keyMappings,r)||Cr(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[r].toLowerCase()!==e.key.toLowerCase()):!1}shouldIgnoreMouseEvent(e){if(!this.keyFilter)return!1;let t=[this.keyFilter];return!!this.keyFilterDissatisfied(e,t)}get params(){let e={},t=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(let{name:r,value:i}of Array.from(this.element.attributes)){let n=r.match(t),o=n&&n[1];o&&(e[Ks(o)]=Oa(i))}return e}get eventTargetName(){return La(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(e,t){let[r,i,n,o]=kn.map(a=>t.includes(a));return e.metaKey!==r||e.ctrlKey!==i||e.altKey!==n||e.shiftKey!==o}},xn={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:s=>s.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function Ca(s){let e=s.tagName.toLowerCase();if(e in xn)return xn[e](s)}function Cr(s){throw new Error(s)}function Oa(s){try{return JSON.parse(s)}catch{return s}}var Cs=class{constructor(e,t){this.context=e,this.action=t}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){let t=this.prepareActionEvent(e);this.willBeInvokedByEvent(e)&&this.applyEventModifiers(t)&&this.invokeWithEvent(t)}get eventName(){return this.action.eventName}get method(){let e=this.controller[this.methodName];if(typeof e=="function")return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){let{element:t}=this.action,{actionDescriptorFilters:r}=this.context.application,{controller:i}=this.context,n=!0;for(let[o,a]of Object.entries(this.eventOptions))if(o in r){let l=r[o];n=n&&l({name:o,value:a,event:e,element:t,controller:i})}else continue;return n}prepareActionEvent(e){return Object.assign(e,{params:this.action.params})}invokeWithEvent(e){let{target:t,currentTarget:r}=e;try{this.method.call(this.controller,e),this.context.logDebugActivity(this.methodName,{event:e,target:t,currentTarget:r,action:this.methodName})}catch(i){let{identifier:n,controller:o,element:a,index:l}=this,d={identifier:n,controller:o,element:a,index:l,event:e};this.context.handleError(i,`invoking action "${this.action}"`,d)}}willBeInvokedByEvent(e){let t=e.target;return e instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(e)||e instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(e)?!1:this.element===t?!0:t instanceof Element&&this.element.contains(t)?this.scope.containsElement(t):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}},Or=class{constructor(e,t){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(r=>this.processMutations(r))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){let e=new Set(this.matchElementsInTree());for(let t of Array.from(this.elements))e.has(t)||this.removeElement(t);for(let t of Array.from(e))this.addElement(t)}}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){e.type=="attributes"?this.processAttributeChange(e.target,e.attributeName):e.type=="childList"&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,t){this.elements.has(e)?this.delegate.elementAttributeChanged&&this.matchElement(e)?this.delegate.elementAttributeChanged(e,t):this.removeElement(e):this.matchElement(e)&&this.addElement(e)}processRemovedNodes(e){for(let t of Array.from(e)){let r=this.elementFromNode(t);r&&this.processTree(r,this.removeElement)}}processAddedNodes(e){for(let t of Array.from(e)){let r=this.elementFromNode(t);r&&this.elementIsActive(r)&&this.processTree(r,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,t){for(let r of this.matchElementsInTree(e))t.call(this,r)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected!=this.element.isConnected?!1:this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}},Mr=class{constructor(e,t,r){this.attributeName=t,this.delegate=r,this.elementObserver=new Or(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){let t=this.matchElement(e)?[e]:[],r=Array.from(e.querySelectorAll(this.selector));return t.concat(r)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)}};function Ma(s,e,t){Fn(s,e).add(t)}function Pa(s,e,t){Fn(s,e).delete(t),Ia(s,e)}function Fn(s,e){let t=s.get(e);return t||(t=new Set,s.set(e,t)),t}function Ia(s,e){let t=s.get(e);t!=null&&t.size==0&&s.delete(e)}var Ke=class{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((t,r)=>t.concat(Array.from(r)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((t,r)=>t+r.size,0)}add(e,t){Ma(this.valuesByKey,e,t)}delete(e,t){Pa(this.valuesByKey,e,t)}has(e,t){let r=this.valuesByKey.get(e);return r!=null&&r.has(t)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some(r=>r.has(e))}getValuesForKey(e){let t=this.valuesByKey.get(e);return t?Array.from(t):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter(([t,r])=>r.has(e)).map(([t,r])=>t)}};var Os=class{constructor(e,t,r,i){this._selector=t,this.details=i,this.elementObserver=new Or(e,this),this.delegate=r,this.matchesByElement=new Ke}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(e){this._selector=e,this.refresh()}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){let{selector:t}=this;if(t){let r=e.matches(t);return this.delegate.selectorMatchElement?r&&this.delegate.selectorMatchElement(e,this.details):r}else return!1}matchElementsInTree(e){let{selector:t}=this;if(t){let r=this.matchElement(e)?[e]:[],i=Array.from(e.querySelectorAll(t)).filter(n=>this.matchElement(n));return r.concat(i)}else return[]}elementMatched(e){let{selector:t}=this;t&&this.selectorMatched(e,t)}elementUnmatched(e){let t=this.matchesByElement.getKeysForValue(e);for(let r of t)this.selectorUnmatched(e,r)}elementAttributeChanged(e,t){let{selector:r}=this;if(r){let i=this.matchElement(e),n=this.matchesByElement.has(r,e);i&&!n?this.selectorMatched(e,r):!i&&n&&this.selectorUnmatched(e,r)}}selectorMatched(e,t){this.delegate.selectorMatched(e,t,this.details),this.matchesByElement.add(t,e)}selectorUnmatched(e,t){this.delegate.selectorUnmatched(e,t,this.details),this.matchesByElement.delete(t,e)}},Ms=class{constructor(e,t){this.element=e,this.delegate=t,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(r=>this.processMutations(r))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(let e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(let t of e)this.processMutation(t)}processMutation(e){let t=e.attributeName;t&&this.refreshAttribute(t,e.oldValue)}refreshAttribute(e,t){let r=this.delegate.getStringMapKeyForAttribute(e);if(r!=null){this.stringMap.has(e)||this.stringMapKeyAdded(r,e);let i=this.element.getAttribute(e);if(this.stringMap.get(e)!=i&&this.stringMapValueChanged(i,r,t),i==null){let n=this.stringMap.get(e);this.stringMap.delete(e),n&&this.stringMapKeyRemoved(r,e,n)}else this.stringMap.set(e,i)}}stringMapKeyAdded(e,t){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,t)}stringMapValueChanged(e,t,r){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,t,r)}stringMapKeyRemoved(e,t,r){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,t,r)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(e=>e.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}},Pr=class{constructor(e,t,r){this.attributeObserver=new Mr(e,t,this),this.delegate=r,this.tokensByElement=new Ke}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){let[t,r]=this.refreshTokensForElement(e);this.tokensUnmatched(t),this.tokensMatched(r)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach(t=>this.tokenMatched(t))}tokensUnmatched(e){e.forEach(t=>this.tokenUnmatched(t))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){let t=this.tokensByElement.getValuesForKey(e),r=this.readTokensForElement(e),i=Da(t,r).findIndex(([n,o])=>!Ba(n,o));return i==-1?[[],[]]:[t.slice(i),r.slice(i)]}readTokensForElement(e){let t=this.attributeName,r=e.getAttribute(t)||"";return Fa(r,e,t)}};function Fa(s,e,t){return s.trim().split(/\s+/).filter(r=>r.length).map((r,i)=>({element:e,attributeName:t,content:r,index:i}))}function Da(s,e){let t=Math.max(s.length,e.length);return Array.from({length:t},(r,i)=>[s[i],e[i]])}function Ba(s,e){return s&&e&&s.index==e.index&&s.content==e.content}var Ir=class{constructor(e,t,r){this.tokenListObserver=new Pr(e,t,this),this.delegate=r,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){let{element:t}=e,{value:r}=this.fetchParseResultForToken(e);r&&(this.fetchValuesByTokenForElement(t).set(e,r),this.delegate.elementMatchedValue(t,r))}tokenUnmatched(e){let{element:t}=e,{value:r}=this.fetchParseResultForToken(e);r&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,r))}fetchParseResultForToken(e){let t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t}fetchValuesByTokenForElement(e){let t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(t){return{error:t}}}},Ps=class{constructor(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new Ir(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){let t=new Cs(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)}disconnectAction(e){let t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))}disconnectAllActions(){this.bindings.forEach(e=>this.delegate.bindingDisconnected(e,!0)),this.bindingsByAction.clear()}parseValueForToken(e){let t=Rs.forToken(e,this.schema);if(t.identifier==this.identifier)return t}elementMatchedValue(e,t){this.connectAction(t)}elementUnmatchedValue(e,t){this.disconnectAction(t)}},Is=class{constructor(e,t){this.context=e,this.receiver=t,this.stringMapObserver=new Ms(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,t){let r=this.valueDescriptorMap[t];this.hasValue(e)||this.invokeChangedCallback(e,r.writer(this.receiver[e]),r.writer(r.defaultValue))}stringMapValueChanged(e,t,r){let i=this.valueDescriptorNameMap[t];e!==null&&(r===null&&(r=i.writer(i.defaultValue)),this.invokeChangedCallback(t,e,r))}stringMapKeyRemoved(e,t,r){let i=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,i.writer(this.receiver[e]),r):this.invokeChangedCallback(e,i.writer(i.defaultValue),r)}invokeChangedCallbacksForDefaultValues(){for(let{key:e,name:t,defaultValue:r,writer:i}of this.valueDescriptors)r!=null&&!this.controller.data.has(e)&&this.invokeChangedCallback(t,i(r),void 0)}invokeChangedCallback(e,t,r){let i=`${e}Changed`,n=this.receiver[i];if(typeof n=="function"){let o=this.valueDescriptorNameMap[e];try{let a=o.reader(t),l=r;r&&(l=o.reader(r)),n.call(this.receiver,a,l)}catch(a){throw a instanceof TypeError&&(a.message=`Stimulus Value "${this.context.identifier}.${o.name}" - ${a.message}`),a}}}get valueDescriptors(){let{valueDescriptorMap:e}=this;return Object.keys(e).map(t=>e[t])}get valueDescriptorNameMap(){let e={};return Object.keys(this.valueDescriptorMap).forEach(t=>{let r=this.valueDescriptorMap[t];e[r.name]=r}),e}hasValue(e){let t=this.valueDescriptorNameMap[e],r=`has${Jt(t.name)}`;return this.receiver[r]}},Fs=class{constructor(e,t){this.context=e,this.delegate=t,this.targetsByName=new Ke}start(){this.tokenListObserver||(this.tokenListObserver=new Pr(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:t}){this.scope.containsElement(e)&&this.connectTarget(e,t)}tokenUnmatched({element:e,content:t}){this.disconnectTarget(e,t)}connectTarget(e,t){var r;this.targetsByName.has(t,e)||(this.targetsByName.add(t,e),(r=this.tokenListObserver)===null||r===void 0||r.pause(()=>this.delegate.targetConnected(e,t)))}disconnectTarget(e,t){var r;this.targetsByName.has(t,e)&&(this.targetsByName.delete(t,e),(r=this.tokenListObserver)===null||r===void 0||r.pause(()=>this.delegate.targetDisconnected(e,t)))}disconnectAllTargets(){for(let e of this.targetsByName.keys)for(let t of this.targetsByName.getValuesForKey(e))this.disconnectTarget(t,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}};function er(s,e){let t=Dn(s);return Array.from(t.reduce((r,i)=>(_a(i,e).forEach(n=>r.add(n)),r),new Set))}function Na(s,e){return Dn(s).reduce((r,i)=>(r.push(...Ha(i,e)),r),[])}function Dn(s){let e=[];for(;s;)e.push(s),s=Object.getPrototypeOf(s);return e.reverse()}function _a(s,e){let t=s[e];return Array.isArray(t)?t:[]}function Ha(s,e){let t=s[e];return t?Object.keys(t).map(r=>[r,t[r]]):[]}var Ds=class{constructor(e,t){this.started=!1,this.context=e,this.delegate=t,this.outletsByName=new Ke,this.outletElementsByName=new Ke,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(e=>{this.setupSelectorObserverForOutlet(e),this.setupAttributeObserverForOutlet(e)}),this.started=!0,this.dependentContexts.forEach(e=>e.refresh()))}refresh(){this.selectorObserverMap.forEach(e=>e.refresh()),this.attributeObserverMap.forEach(e=>e.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(e=>e.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(e=>e.stop()),this.attributeObserverMap.clear())}selectorMatched(e,t,{outletName:r}){let i=this.getOutlet(e,r);i&&this.connectOutlet(i,e,r)}selectorUnmatched(e,t,{outletName:r}){let i=this.getOutletFromMap(e,r);i&&this.disconnectOutlet(i,e,r)}selectorMatchElement(e,{outletName:t}){let r=this.selector(t),i=this.hasOutlet(e,t),n=e.matches(`[${this.schema.controllerAttribute}~=${t}]`);return r?i&&n&&e.matches(r):!1}elementMatchedAttribute(e,t){let r=this.getOutletNameFromOutletAttributeName(t);r&&this.updateSelectorObserverForOutlet(r)}elementAttributeValueChanged(e,t){let r=this.getOutletNameFromOutletAttributeName(t);r&&this.updateSelectorObserverForOutlet(r)}elementUnmatchedAttribute(e,t){let r=this.getOutletNameFromOutletAttributeName(t);r&&this.updateSelectorObserverForOutlet(r)}connectOutlet(e,t,r){var i;this.outletElementsByName.has(r,t)||(this.outletsByName.add(r,e),this.outletElementsByName.add(r,t),(i=this.selectorObserverMap.get(r))===null||i===void 0||i.pause(()=>this.delegate.outletConnected(e,t,r)))}disconnectOutlet(e,t,r){var i;this.outletElementsByName.has(r,t)&&(this.outletsByName.delete(r,e),this.outletElementsByName.delete(r,t),(i=this.selectorObserverMap.get(r))===null||i===void 0||i.pause(()=>this.delegate.outletDisconnected(e,t,r)))}disconnectAllOutlets(){for(let e of this.outletElementsByName.keys)for(let t of this.outletElementsByName.getValuesForKey(e))for(let r of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(r,t,e)}updateSelectorObserverForOutlet(e){let t=this.selectorObserverMap.get(e);t&&(t.selector=this.selector(e))}setupSelectorObserverForOutlet(e){let t=this.selector(e),r=new Os(document.body,t,this,{outletName:e});this.selectorObserverMap.set(e,r),r.start()}setupAttributeObserverForOutlet(e){let t=this.attributeNameForOutletName(e),r=new Mr(this.scope.element,t,this);this.attributeObserverMap.set(e,r),r.start()}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}attributeNameForOutletName(e){return this.scope.schema.outletAttributeForScope(this.identifier,e)}getOutletNameFromOutletAttributeName(e){return this.outletDefinitions.find(t=>this.attributeNameForOutletName(t)===e)}get outletDependencies(){let e=new Ke;return this.router.modules.forEach(t=>{let r=t.definition.controllerConstructor;er(r,"outlets").forEach(n=>e.add(n,t.identifier))}),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){let e=this.dependentControllerIdentifiers;return this.router.contexts.filter(t=>e.includes(t.identifier))}hasOutlet(e,t){return!!this.getOutlet(e,t)||!!this.getOutletFromMap(e,t)}getOutlet(e,t){return this.application.getControllerForElementAndIdentifier(e,t)}getOutletFromMap(e,t){return this.outletsByName.getValuesForKey(t).find(r=>r.element===e)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}},Bs=class{constructor(e,t){this.logDebugActivity=(r,i={})=>{let{identifier:n,controller:o,element:a}=this;i=Object.assign({identifier:n,controller:o,element:a},i),this.application.logDebugActivity(this.identifier,r,i)},this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new Ps(this,this.dispatcher),this.valueObserver=new Is(this,this.controller),this.targetObserver=new Fs(this,this),this.outletObserver=new Ds(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(r){this.handleError(r,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,t,r={}){let{identifier:i,controller:n,element:o}=this;r=Object.assign({identifier:i,controller:n,element:o},r),this.application.handleError(e,`Error ${t}`,r)}targetConnected(e,t){this.invokeControllerMethod(`${t}TargetConnected`,e)}targetDisconnected(e,t){this.invokeControllerMethod(`${t}TargetDisconnected`,e)}outletConnected(e,t,r){this.invokeControllerMethod(`${xs(r)}OutletConnected`,e,t)}outletDisconnected(e,t,r){this.invokeControllerMethod(`${xs(r)}OutletDisconnected`,e,t)}invokeControllerMethod(e,...t){let r=this.controller;typeof r[e]=="function"&&r[e](...t)}};function $a(s){return qa(s,Va(s))}function qa(s,e){let t=ja(s),r=za(s.prototype,e);return Object.defineProperties(t.prototype,r),t}function Va(s){return er(s,"blessings").reduce((t,r)=>{let i=r(s);for(let n in i){let o=t[n]||{};t[n]=Object.assign(o,i[n])}return t},{})}function za(s,e){return Ua(e).reduce((t,r)=>{let i=Wa(s,e,r);return i&&Object.assign(t,{[r]:i}),t},{})}function Wa(s,e,t){let r=Object.getOwnPropertyDescriptor(s,t);if(!(r&&"value"in r)){let n=Object.getOwnPropertyDescriptor(e,t).value;return r&&(n.get=r.get||n.get,n.set=r.set||n.set),n}}var Ua=typeof Object.getOwnPropertySymbols=="function"?s=>[...Object.getOwnPropertyNames(s),...Object.getOwnPropertySymbols(s)]:Object.getOwnPropertyNames,ja=(()=>{function s(t){function r(){return Reflect.construct(t,arguments,new.target)}return r.prototype=Object.create(t.prototype,{constructor:{value:r}}),Reflect.setPrototypeOf(r,t),r}function e(){let r=s(function(){this.a.call(this)});return r.prototype.a=function(){},new r}try{return e(),s}catch{return r=>class extends r{}}})();function Ka(s){return{identifier:s.identifier,controllerConstructor:$a(s.controllerConstructor)}}var Ns=class{constructor(e,t){this.application=e,this.definition=Ka(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){let t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()}disconnectContextForScope(e){let t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())}fetchContextForScope(e){let t=this.contextsByScope.get(e);return t||(t=new Bs(this,e),this.contextsByScope.set(e,t)),t}},_s=class{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){let t=this.data.get(this.getDataKey(e))||"";return Ra(t)}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}},Hs=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){let t=this.getAttributeNameForKey(e);return this.element.getAttribute(t)}set(e,t){let r=this.getAttributeNameForKey(e);return this.element.setAttribute(r,t),this.get(e)}has(e){let t=this.getAttributeNameForKey(e);return this.element.hasAttribute(t)}delete(e){if(this.has(e)){let t=this.getAttributeNameForKey(e);return this.element.removeAttribute(t),!0}else return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${In(e)}`}},$s=class{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,t,r){let i=this.warnedKeysByObject.get(e);i||(i=new Set,this.warnedKeysByObject.set(e,i)),i.has(t)||(i.add(t),this.logger.warn(r,e))}};function qs(s,e){return`[${s}~="${e}"]`}var Vs=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,r)=>t||this.findTarget(r)||this.findLegacyTarget(r),void 0)}findAll(...e){return e.reduce((t,r)=>[...t,...this.findAllTargets(r),...this.findAllLegacyTargets(r)],[])}findTarget(e){let t=this.getSelectorForTargetName(e);return this.scope.findElement(t)}findAllTargets(e){let t=this.getSelectorForTargetName(e);return this.scope.findAllElements(t)}getSelectorForTargetName(e){let t=this.schema.targetAttributeForScope(this.identifier);return qs(t,e)}findLegacyTarget(e){let t=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(t),e)}findAllLegacyTargets(e){let t=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(t).map(r=>this.deprecate(r,e))}getLegacySelectorForTargetName(e){let t=`${this.identifier}.${e}`;return qs(this.schema.targetAttribute,t)}deprecate(e,t){if(e){let{identifier:r}=this,i=this.schema.targetAttribute,n=this.schema.targetAttributeForScope(r);this.guide.warn(e,`target:${t}`,`Please replace ${i}="${r}.${t}" with ${n}="${t}". The ${i} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}},zs=class{constructor(e,t){this.scope=e,this.controllerElement=t}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((t,r)=>t||this.findOutlet(r),void 0)}findAll(...e){return e.reduce((t,r)=>[...t,...this.findAllOutlets(r)],[])}getSelectorForOutletName(e){let t=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(t)}findOutlet(e){let t=this.getSelectorForOutletName(e);if(t)return this.findElement(t,e)}findAllOutlets(e){let t=this.getSelectorForOutletName(e);return t?this.findAllElements(t,e):[]}findElement(e,t){return this.scope.queryElements(e).filter(i=>this.matchesElement(i,e,t))[0]}findAllElements(e,t){return this.scope.queryElements(e).filter(i=>this.matchesElement(i,e,t))}matchesElement(e,t,r){let i=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(t)&&i.split(" ").includes(r)}},Ws=class s{constructor(e,t,r,i){this.targets=new Vs(this),this.classes=new _s(this),this.data=new Hs(this),this.containsElement=n=>n.closest(this.controllerSelector)===this.element,this.schema=e,this.element=t,this.identifier=r,this.guide=new $s(i),this.outlets=new zs(this.documentScope,t)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return qs(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new s(this.schema,document.documentElement,this.identifier,this.guide.logger)}},Us=class{constructor(e,t,r){this.element=e,this.schema=t,this.delegate=r,this.valueListObserver=new Ir(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){let{element:t,content:r}=e;return this.parseValueForElementAndIdentifier(t,r)}parseValueForElementAndIdentifier(e,t){let r=this.fetchScopesByIdentifierForElement(e),i=r.get(t);return i||(i=this.delegate.createScopeForElementAndIdentifier(e,t),r.set(t,i)),i}elementMatchedValue(e,t){let r=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,r),r==1&&this.delegate.scopeConnected(t)}elementUnmatchedValue(e,t){let r=this.scopeReferenceCounts.get(t);r&&(this.scopeReferenceCounts.set(t,r-1),r==1&&this.delegate.scopeDisconnected(t))}fetchScopesByIdentifierForElement(e){let t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t}},js=class{constructor(e){this.application=e,this.scopeObserver=new Us(this.element,this.schema,this),this.scopesByIdentifier=new Ke,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((e,t)=>e.concat(t.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);let t=new Ns(this.application,e);this.connectModule(t);let r=e.controllerConstructor.afterLoad;r&&r.call(e.controllerConstructor,e.identifier,this.application)}unloadIdentifier(e){let t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)}getContextForElementAndIdentifier(e,t){let r=this.modulesByIdentifier.get(t);if(r)return r.contexts.find(i=>i.element==e)}proposeToConnectScopeForElementAndIdentifier(e,t){let r=this.scopeObserver.parseValueForElementAndIdentifier(e,t);r?this.scopeObserver.elementMatchedValue(r.element,r):console.error(`Couldn't find or create scope for identifier: "${t}" and element:`,e)}handleError(e,t,r){this.application.handleError(e,t,r)}createScopeForElementAndIdentifier(e,t){return new Ws(this.schema,e,t,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);let t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(r=>e.connectContextForScope(r))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(r=>e.disconnectContextForScope(r))}},Ga={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:s=>`data-${s}-target`,outletAttributeForScope:(s,e)=>`data-${s}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},Ln("abcdefghijklmnopqrstuvwxyz".split("").map(s=>[s,s]))),Ln("0123456789".split("").map(s=>[s,s])))};function Ln(s){return s.reduce((e,[t,r])=>Object.assign(Object.assign({},e),{[t]:r}),{})}var Fr=class{constructor(e=document.documentElement,t=Ga){this.logger=console,this.debug=!1,this.logDebugActivity=(r,i,n={})=>{this.debug&&this.logFormattedMessage(r,i,n)},this.element=e,this.schema=t,this.dispatcher=new ks(this),this.router=new js(this),this.actionDescriptorFilters=Object.assign({},Sa)}static start(e,t){let r=new this(e,t);return r.start(),r}async start(){await Xa(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,t){this.load({identifier:e,controllerConstructor:t})}registerActionOption(e,t){this.actionDescriptorFilters[e]=t}load(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(i=>{i.controllerConstructor.shouldLoad&&this.router.loadDefinition(i)})}unload(e,...t){(Array.isArray(e)?e:[e,...t]).forEach(i=>this.router.unloadIdentifier(i))}get controllers(){return this.router.contexts.map(e=>e.controller)}getControllerForElementAndIdentifier(e,t){let r=this.router.getContextForElementAndIdentifier(e,t);return r?r.controller:null}handleError(e,t,r){var i;this.logger.error(`%s

%o

%o`,t,e,r),(i=window.onerror)===null||i===void 0||i.call(window,t,"",0,0,e)}logFormattedMessage(e,t,r={}){r=Object.assign({application:this},r),this.logger.groupCollapsed(`${e} #${t}`),this.logger.log("details:",Object.assign({},r)),this.logger.groupEnd()}};function Xa(){return new Promise(s=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>s()):s()})}function Ya(s){return er(s,"classes").reduce((t,r)=>Object.assign(t,Za(r)),{})}function Za(s){return{[`${s}Class`]:{get(){let{classes:e}=this;if(e.has(s))return e.get(s);{let t=e.getAttributeName(s);throw new Error(`Missing attribute "${t}"`)}}},[`${s}Classes`]:{get(){return this.classes.getAll(s)}},[`has${Jt(s)}Class`]:{get(){return this.classes.has(s)}}}}function Qa(s){return er(s,"outlets").reduce((t,r)=>Object.assign(t,Ja(r)),{})}function Rn(s,e,t){return s.application.getControllerForElementAndIdentifier(e,t)}function Cn(s,e,t){let r=Rn(s,e,t);if(r||(s.application.router.proposeToConnectScopeForElementAndIdentifier(e,t),r=Rn(s,e,t),r))return r}function Ja(s){let e=xs(s);return{[`${e}Outlet`]:{get(){let t=this.outlets.find(s),r=this.outlets.getSelectorForOutletName(s);if(t){let i=Cn(this,t,s);if(i)return i;throw new Error(`The provided outlet element is missing an outlet controller "${s}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${s}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${r}".`)}},[`${e}Outlets`]:{get(){let t=this.outlets.findAll(s);return t.length>0?t.map(r=>{let i=Cn(this,r,s);if(i)return i;console.warn(`The provided outlet element is missing an outlet controller "${s}" instance for host controller "${this.identifier}"`,r)}).filter(r=>r):[]}},[`${e}OutletElement`]:{get(){let t=this.outlets.find(s),r=this.outlets.getSelectorForOutletName(s);if(t)return t;throw new Error(`Missing outlet element "${s}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${r}".`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(s)}},[`has${Jt(e)}Outlet`]:{get(){return this.outlets.has(s)}}}}function el(s){return er(s,"targets").reduce((t,r)=>Object.assign(t,tl(r)),{})}function tl(s){return{[`${s}Target`]:{get(){let e=this.targets.find(s);if(e)return e;throw new Error(`Missing target element "${s}" for "${this.identifier}" controller`)}},[`${s}Targets`]:{get(){return this.targets.findAll(s)}},[`has${Jt(s)}Target`]:{get(){return this.targets.has(s)}}}}function rl(s){let e=Na(s,"values"),t={valueDescriptorMap:{get(){return e.reduce((r,i)=>{let n=Bn(i,this.identifier),o=this.data.getAttributeNameForKey(n.key);return Object.assign(r,{[o]:n})},{})}}};return e.reduce((r,i)=>Object.assign(r,sl(i)),t)}function sl(s,e){let t=Bn(s,e),{key:r,name:i,reader:n,writer:o}=t;return{[i]:{get(){let a=this.data.get(r);return a!==null?n(a):t.defaultValue},set(a){a===void 0?this.data.delete(r):this.data.set(r,o(a))}},[`has${Jt(i)}`]:{get(){return this.data.has(r)||t.hasCustomDefaultValue}}}}function Bn([s,e],t){return al({controller:t,token:s,typeDefinition:e})}function Dr(s){switch(s){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function Qt(s){switch(typeof s){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(s))return"array";if(Object.prototype.toString.call(s)==="[object Object]")return"object"}function il(s){let{controller:e,token:t,typeObject:r}=s,i=An(r.type),n=An(r.default),o=i&&n,a=i&&!n,l=!i&&n,d=Dr(r.type),f=Qt(s.typeObject.default);if(a)return d;if(l)return f;if(d!==f){let m=e?`${e}.${t}`:t;throw new Error(`The specified default value for the Stimulus Value "${m}" must match the defined type "${d}". The provided default value of "${r.default}" is of type "${f}".`)}if(o)return d}function nl(s){let{controller:e,token:t,typeDefinition:r}=s,n=il({controller:e,token:t,typeObject:r}),o=Qt(r),a=Dr(r),l=n||o||a;if(l)return l;let d=e?`${e}.${r}`:t;throw new Error(`Unknown value type "${d}" for "${t}" value`)}function ol(s){let e=Dr(s);if(e)return On[e];let t=Ls(s,"default"),r=Ls(s,"type"),i=s;if(t)return i.default;if(r){let{type:n}=i,o=Dr(n);if(o)return On[o]}return s}function al(s){let{token:e,typeDefinition:t}=s,r=`${In(e)}-value`,i=nl(s);return{type:i,key:r,name:Ks(r),get defaultValue(){return ol(t)},get hasCustomDefaultValue(){return Qt(t)!==void 0},reader:ll[i],writer:Mn[i]||Mn.default}}var On={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},ll={array(s){let e=JSON.parse(s);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${s}" of type "${Qt(e)}"`);return e},boolean(s){return!(s=="0"||String(s).toLowerCase()=="false")},number(s){return Number(s.replace(/_/g,""))},object(s){let e=JSON.parse(s);if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${s}" of type "${Qt(e)}"`);return e},string(s){return s}},Mn={default:cl,array:Pn,object:Pn};function Pn(s){return JSON.stringify(s)}function cl(s){return`${s}`}var D=class{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,t){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:t=this.element,detail:r={},prefix:i=this.identifier,bubbles:n=!0,cancelable:o=!0}={}){let a=i?`${i}:${e}`:e,l=new CustomEvent(a,{detail:r,bubbles:n,cancelable:o});return t.dispatchEvent(l),l}};D.blessings=[Ya,el,rl,Qa];D.targets=[];D.outlets=[];D.values={};var Br=class extends D{static targets=["openIcon","closeIcon"];static outlets=["sidebar"];static values={placement:{type:String,default:"left"},bodyScrolling:{type:Boolean,default:!1},backdrop:{type:Boolean,default:!0},edge:{type:Boolean,default:!1},edgeOffset:{type:String,default:"bottom-[60px]"}};static classes={backdrop:"bg-gray-900/50 dark:bg-gray-900/80 fixed inset-0 z-30"};initialize(){this.visible=!1,this.handleEscapeKey=this.handleEscapeKey.bind(this)}connect(){document.addEventListener("keydown",this.handleEscapeKey)}sidebarOutletConnected(){this.#e(this.sidebarOutlet.element)}disconnect(){this.#r(),document.removeEventListener("keydown",this.handleEscapeKey),this.bodyScrollingValue||document.body.classList.remove("overflow-hidden")}#e(s){s.setAttribute("aria-hidden","true"),s.classList.add("transition-transform"),this.#i(this.placementValue).base.forEach(e=>{s.classList.add(e)})}toggleDrawer(){this.visible?this.hideDrawer():this.showDrawer()}showDrawer(){this.edgeValue?this.#s(`${this.placementValue}-edge`,!0):this.#n(this.placementValue,!0),this.openIconTarget.classList.add("hidden"),this.openIconTarget.setAttribute("aria-hidden","true"),this.closeIconTarget.classList.remove("hidden"),this.closeIconTarget.setAttribute("aria-hidden","false"),this.sidebarOutlet.element.setAttribute("aria-modal","true"),this.sidebarOutlet.element.setAttribute("role","dialog"),this.sidebarOutlet.element.removeAttribute("aria-hidden"),this.bodyScrollingValue||document.body.classList.add("overflow-hidden"),this.backdropValue&&this.#t(),this.visible=!0,this.dispatch("show")}hideDrawer(){this.edgeValue?this.#s(`${this.placementValue}-edge`,!1):this.#n(this.placementValue,!1),this.openIconTarget.classList.remove("hidden"),this.openIconTarget.setAttribute("aria-hidden","false"),this.closeIconTarget.classList.add("hidden"),this.closeIconTarget.setAttribute("aria-hidden","true"),this.sidebarOutlet.element.setAttribute("aria-hidden","true"),this.sidebarOutlet.element.removeAttribute("aria-modal"),this.sidebarOutlet.element.removeAttribute("role"),this.bodyScrollingValue||document.body.classList.remove("overflow-hidden"),this.backdropValue&&this.#r(),this.visible=!1,this.dispatch("hide")}handleEscapeKey(s){s.key==="Escape"&&this.visible&&this.hideDrawer()}#t(){if(!this.visible){let s=document.createElement("div");s.setAttribute("data-drawer-backdrop",""),s.classList.add(...this.constructor.classes.backdrop.split(" ")),s.addEventListener("click",()=>this.hideDrawer()),document.body.appendChild(s)}}#r(){let s=document.querySelector("[data-drawer-backdrop]");s&&s.remove()}#i(s){let e={top:{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]},right:{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]},bottom:{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]},left:{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]},"bottom-edge":{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this.edgeOffsetValue]}};return e[s]||e.left}#n(s,e){let t=this.#i(s);e?(t.active.forEach(r=>this.sidebarOutlet.element.classList.add(r)),t.inactive.forEach(r=>this.sidebarOutlet.element.classList.remove(r))):(t.active.forEach(r=>this.sidebarOutlet.element.classList.remove(r)),t.inactive.forEach(r=>this.sidebarOutlet.element.classList.add(r)))}#s(s,e){this.#n(s,e)}};var Nr=class extends D{static targets=["target","template","addButton"];static values={wrapperSelector:{type:String,default:".nested-resource-form-fields"},limit:Number};connect(){this.updateState()}add(s){s.preventDefault();let e=this.templateTarget.innerHTML.replace(/NEW_RECORD/g,new Date().getTime().toString());this.targetTarget.insertAdjacentHTML("beforebegin",e);let t=new CustomEvent("nested-resource-form-fields:add",{bubbles:!0});this.element.dispatchEvent(t),this.updateState()}remove(s){s.preventDefault();let e=s.target.closest(this.wrapperSelectorValue);if(e.dataset.newRecord!==void 0)e.remove();else{e.style.display="none",e.classList.remove(...e.classList);let r=e.querySelector("input[name*='_destroy']");r.value="1"}let t=new CustomEvent("nested-resource-form-fields:remove",{bubbles:!0});this.element.dispatchEvent(t),this.updateState()}updateState(){!this.hasAddButtonTarget||this.limitValue==0||(this.childCount>=this.limitValue?this.addButtonTarget.style.display="none":this.addButtonTarget.style.display="initial")}get childCount(){return this.element.querySelectorAll(this.wrapperSelectorValue).length}};var Pu=wa($n(),1),_r=class extends D{connect(){}submit(){this.element.requestSubmit()}};var Q="top",te="bottom",ee="right",J="left",Hr="auto",Je=[Q,te,ee,J],Ge="start",nt="end",qn="clippingParents",$r="viewport",Ot="popper",Vn="reference",Ys=Je.reduce(function(s,e){return s.concat([e+"-"+Ge,e+"-"+nt])},[]),qr=[].concat(Je,[Hr]).reduce(function(s,e){return s.concat([e,e+"-"+Ge,e+"-"+nt])},[]),Ll="beforeRead",Rl="read",Cl="afterRead",Ol="beforeMain",Ml="main",Pl="afterMain",Il="beforeWrite",Fl="write",Dl="afterWrite",zn=[Ll,Rl,Cl,Ol,Ml,Pl,Il,Fl,Dl];function ne(s){return s?(s.nodeName||"").toLowerCase():null}function K(s){if(s==null)return window;if(s.toString()!=="[object Window]"){var e=s.ownerDocument;return e&&e.defaultView||window}return s}function Ee(s){var e=K(s).Element;return s instanceof e||s instanceof Element}function re(s){var e=K(s).HTMLElement;return s instanceof e||s instanceof HTMLElement}function Mt(s){if(typeof ShadowRoot>"u")return!1;var e=K(s).ShadowRoot;return s instanceof e||s instanceof ShadowRoot}function Bl(s){var e=s.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},i=e.attributes[t]||{},n=e.elements[t];!re(n)||!ne(n)||(Object.assign(n.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?n.removeAttribute(o):n.setAttribute(o,a===!0?"":a)}))})}function Nl(s){var e=s.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],n=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),a=o.reduce(function(l,d){return l[d]="",l},{});!re(i)||!ne(i)||(Object.assign(i.style,a),Object.keys(n).forEach(function(l){i.removeAttribute(l)}))})}}var Wn={name:"applyStyles",enabled:!0,phase:"write",fn:Bl,effect:Nl,requires:["computeStyles"]};function oe(s){return s.split("-")[0]}var Re=Math.max,ot=Math.min,Xe=Math.round;function Pt(){var s=navigator.userAgentData;return s!=null&&s.brands&&Array.isArray(s.brands)?s.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function tr(){return!/^((?!chrome|android).)*safari/i.test(Pt())}function Se(s,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=s.getBoundingClientRect(),i=1,n=1;e&&re(s)&&(i=s.offsetWidth>0&&Xe(r.width)/s.offsetWidth||1,n=s.offsetHeight>0&&Xe(r.height)/s.offsetHeight||1);var o=Ee(s)?K(s):window,a=o.visualViewport,l=!tr()&&t,d=(r.left+(l&&a?a.offsetLeft:0))/i,f=(r.top+(l&&a?a.offsetTop:0))/n,m=r.width/i,E=r.height/n;return{width:m,height:E,top:f,right:d+m,bottom:f+E,left:d,x:d,y:f}}function at(s){var e=Se(s),t=s.offsetWidth,r=s.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:s.offsetLeft,y:s.offsetTop,width:t,height:r}}function rr(s,e){var t=e.getRootNode&&e.getRootNode();if(s.contains(e))return!0;if(t&&Mt(t)){var r=e;do{if(r&&s.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function pe(s){return K(s).getComputedStyle(s)}function Zs(s){return["table","td","th"].indexOf(ne(s))>=0}function he(s){return((Ee(s)?s.ownerDocument:s.document)||window.document).documentElement}function Ye(s){return ne(s)==="html"?s:s.assignedSlot||s.parentNode||(Mt(s)?s.host:null)||he(s)}function Un(s){return!re(s)||pe(s).position==="fixed"?null:s.offsetParent}function _l(s){var e=/firefox/i.test(Pt()),t=/Trident/i.test(Pt());if(t&&re(s)){var r=pe(s);if(r.position==="fixed")return null}var i=Ye(s);for(Mt(i)&&(i=i.host);re(i)&&["html","body"].indexOf(ne(i))<0;){var n=pe(i);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||e&&n.willChange==="filter"||e&&n.filter&&n.filter!=="none")return i;i=i.parentNode}return null}function Ce(s){for(var e=K(s),t=Un(s);t&&Zs(t)&&pe(t).position==="static";)t=Un(t);return t&&(ne(t)==="html"||ne(t)==="body"&&pe(t).position==="static")?e:t||_l(s)||e}function lt(s){return["top","bottom"].indexOf(s)>=0?"x":"y"}function ct(s,e,t){return Re(s,ot(e,t))}function jn(s,e,t){var r=ct(s,e,t);return r>t?t:r}function sr(){return{top:0,right:0,bottom:0,left:0}}function ir(s){return Object.assign({},sr(),s)}function nr(s,e){return e.reduce(function(t,r){return t[r]=s,t},{})}var Hl=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,ir(typeof e!="number"?e:nr(e,Je))};function $l(s){var e,t=s.state,r=s.name,i=s.options,n=t.elements.arrow,o=t.modifiersData.popperOffsets,a=oe(t.placement),l=lt(a),d=[J,ee].indexOf(a)>=0,f=d?"height":"width";if(!(!n||!o)){var m=Hl(i.padding,t),E=at(n),b=l==="y"?Q:J,R=l==="y"?te:ee,S=t.rects.reference[f]+t.rects.reference[l]-o[l]-t.rects.popper[f],k=o[l]-t.rects.reference[l],I=Ce(n),H=I?l==="y"?I.clientHeight||0:I.clientWidth||0:0,B=S/2-k/2,A=m[b],O=H-E[f]-m[R],x=H/2-E[f]/2+B,P=ct(A,x,O),N=l;t.modifiersData[r]=(e={},e[N]=P,e.centerOffset=P-x,e)}}function ql(s){var e=s.state,t=s.options,r=t.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||rr(e.elements.popper,i)&&(e.elements.arrow=i))}var Kn={name:"arrow",enabled:!0,phase:"main",fn:$l,effect:ql,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Te(s){return s.split("-")[1]}var Vl={top:"auto",right:"auto",bottom:"auto",left:"auto"};function zl(s,e){var t=s.x,r=s.y,i=e.devicePixelRatio||1;return{x:Xe(t*i)/i||0,y:Xe(r*i)/i||0}}function Gn(s){var e,t=s.popper,r=s.popperRect,i=s.placement,n=s.variation,o=s.offsets,a=s.position,l=s.gpuAcceleration,d=s.adaptive,f=s.roundOffsets,m=s.isFixed,E=o.x,b=E===void 0?0:E,R=o.y,S=R===void 0?0:R,k=typeof f=="function"?f({x:b,y:S}):{x:b,y:S};b=k.x,S=k.y;var I=o.hasOwnProperty("x"),H=o.hasOwnProperty("y"),B=J,A=Q,O=window;if(d){var x=Ce(t),P="clientHeight",N="clientWidth";if(x===K(t)&&(x=he(t),pe(x).position!=="static"&&a==="absolute"&&(P="scrollHeight",N="scrollWidth")),x=x,i===Q||(i===J||i===ee)&&n===nt){A=te;var W=m&&x===O&&O.visualViewport?O.visualViewport.height:x[P];S-=W-r.height,S*=l?1:-1}if(i===J||(i===Q||i===te)&&n===nt){B=ee;var G=m&&x===O&&O.visualViewport?O.visualViewport.width:x[N];b-=G-r.width,b*=l?1:-1}}var $=Object.assign({position:a},d&&Vl),X=f===!0?zl({x:b,y:S},K(t)):{x:b,y:S};if(b=X.x,S=X.y,l){var U;return Object.assign({},$,(U={},U[A]=H?"0":"",U[B]=I?"0":"",U.transform=(O.devicePixelRatio||1)<=1?"translate("+b+"px, "+S+"px)":"translate3d("+b+"px, "+S+"px, 0)",U))}return Object.assign({},$,(e={},e[A]=H?S+"px":"",e[B]=I?b+"px":"",e.transform="",e))}function Wl(s){var e=s.state,t=s.options,r=t.gpuAcceleration,i=r===void 0?!0:r,n=t.adaptive,o=n===void 0?!0:n,a=t.roundOffsets,l=a===void 0?!0:a,d={placement:oe(e.placement),variation:Te(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Gn(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Gn(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var Xn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Wl,data:{}};var Vr={passive:!0};function Ul(s){var e=s.state,t=s.instance,r=s.options,i=r.scroll,n=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=K(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return n&&d.forEach(function(f){f.addEventListener("scroll",t.update,Vr)}),a&&l.addEventListener("resize",t.update,Vr),function(){n&&d.forEach(function(f){f.removeEventListener("scroll",t.update,Vr)}),a&&l.removeEventListener("resize",t.update,Vr)}}var Yn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ul,data:{}};var jl={left:"right",right:"left",bottom:"top",top:"bottom"};function It(s){return s.replace(/left|right|bottom|top/g,function(e){return jl[e]})}var Kl={start:"end",end:"start"};function zr(s){return s.replace(/start|end/g,function(e){return Kl[e]})}function ht(s){var e=K(s),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function ut(s){return Se(he(s)).left+ht(s).scrollLeft}function Qs(s,e){var t=K(s),r=he(s),i=t.visualViewport,n=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){n=i.width,o=i.height;var d=tr();(d||!d&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:n,height:o,x:a+ut(s),y:l}}function Js(s){var e,t=he(s),r=ht(s),i=(e=s.ownerDocument)==null?void 0:e.body,n=Re(t.scrollWidth,t.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Re(t.scrollHeight,t.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+ut(s),l=-r.scrollTop;return pe(i||t).direction==="rtl"&&(a+=Re(t.clientWidth,i?i.clientWidth:0)-n),{width:n,height:o,x:a,y:l}}function dt(s){var e=pe(s),t=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+i+r)}function Wr(s){return["html","body","#document"].indexOf(ne(s))>=0?s.ownerDocument.body:re(s)&&dt(s)?s:Wr(Ye(s))}function et(s,e){var t;e===void 0&&(e=[]);var r=Wr(s),i=r===((t=s.ownerDocument)==null?void 0:t.body),n=K(r),o=i?[n].concat(n.visualViewport||[],dt(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(et(Ye(o)))}function Ft(s){return Object.assign({},s,{left:s.x,top:s.y,right:s.x+s.width,bottom:s.y+s.height})}function Gl(s,e){var t=Se(s,!1,e==="fixed");return t.top=t.top+s.clientTop,t.left=t.left+s.clientLeft,t.bottom=t.top+s.clientHeight,t.right=t.left+s.clientWidth,t.width=s.clientWidth,t.height=s.clientHeight,t.x=t.left,t.y=t.top,t}function Zn(s,e,t){return e===$r?Ft(Qs(s,t)):Ee(e)?Gl(e,t):Ft(Js(he(s)))}function Xl(s){var e=et(Ye(s)),t=["absolute","fixed"].indexOf(pe(s).position)>=0,r=t&&re(s)?Ce(s):s;return Ee(r)?e.filter(function(i){return Ee(i)&&rr(i,r)&&ne(i)!=="body"}):[]}function ei(s,e,t,r){var i=e==="clippingParents"?Xl(s):[].concat(e),n=[].concat(i,[t]),o=n[0],a=n.reduce(function(l,d){var f=Zn(s,d,r);return l.top=Re(f.top,l.top),l.right=ot(f.right,l.right),l.bottom=ot(f.bottom,l.bottom),l.left=Re(f.left,l.left),l},Zn(s,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function or(s){var e=s.reference,t=s.element,r=s.placement,i=r?oe(r):null,n=r?Te(r):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(i){case Q:l={x:o,y:e.y-t.height};break;case te:l={x:o,y:e.y+e.height};break;case ee:l={x:e.x+e.width,y:a};break;case J:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var d=i?lt(i):null;if(d!=null){var f=d==="y"?"height":"width";switch(n){case Ge:l[d]=l[d]-(e[f]/2-t[f]/2);break;case nt:l[d]=l[d]+(e[f]/2-t[f]/2);break;default:}}return l}function Oe(s,e){e===void 0&&(e={});var t=e,r=t.placement,i=r===void 0?s.placement:r,n=t.strategy,o=n===void 0?s.strategy:n,a=t.boundary,l=a===void 0?qn:a,d=t.rootBoundary,f=d===void 0?$r:d,m=t.elementContext,E=m===void 0?Ot:m,b=t.altBoundary,R=b===void 0?!1:b,S=t.padding,k=S===void 0?0:S,I=ir(typeof k!="number"?k:nr(k,Je)),H=E===Ot?Vn:Ot,B=s.rects.popper,A=s.elements[R?H:E],O=ei(Ee(A)?A:A.contextElement||he(s.elements.popper),l,f,o),x=Se(s.elements.reference),P=or({reference:x,element:B,strategy:"absolute",placement:i}),N=Ft(Object.assign({},B,P)),W=E===Ot?N:x,G={top:O.top-W.top+I.top,bottom:W.bottom-O.bottom+I.bottom,left:O.left-W.left+I.left,right:W.right-O.right+I.right},$=s.modifiersData.offset;if(E===Ot&&$){var X=$[i];Object.keys(G).forEach(function(U){var ve=[ee,te].indexOf(U)>=0?1:-1,xe=[Q,te].indexOf(U)>=0?"y":"x";G[U]+=X[xe]*ve})}return G}function ti(s,e){e===void 0&&(e={});var t=e,r=t.placement,i=t.boundary,n=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,d=l===void 0?qr:l,f=Te(r),m=f?a?Ys:Ys.filter(function(R){return Te(R)===f}):Je,E=m.filter(function(R){return d.indexOf(R)>=0});E.length===0&&(E=m);var b=E.reduce(function(R,S){return R[S]=Oe(s,{placement:S,boundary:i,rootBoundary:n,padding:o})[oe(S)],R},{});return Object.keys(b).sort(function(R,S){return b[R]-b[S]})}function Yl(s){if(oe(s)===Hr)return[];var e=It(s);return[zr(s),e,zr(e)]}function Zl(s){var e=s.state,t=s.options,r=s.name;if(!e.modifiersData[r]._skip){for(var i=t.mainAxis,n=i===void 0?!0:i,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,d=t.padding,f=t.boundary,m=t.rootBoundary,E=t.altBoundary,b=t.flipVariations,R=b===void 0?!0:b,S=t.allowedAutoPlacements,k=e.options.placement,I=oe(k),H=I===k,B=l||(H||!R?[It(k)]:Yl(k)),A=[k].concat(B).reduce(function(le,_){return le.concat(oe(_)===Hr?ti(e,{placement:_,boundary:f,rootBoundary:m,padding:d,flipVariations:R,allowedAutoPlacements:S}):_)},[]),O=e.rects.reference,x=e.rects.popper,P=new Map,N=!0,W=A[0],G=0;G<A.length;G++){var $=A[G],X=oe($),U=Te($)===Ge,ve=[Q,te].indexOf(X)>=0,xe=ve?"width":"height",h=Oe(e,{placement:$,boundary:f,rootBoundary:m,altBoundary:E,padding:d}),u=ve?U?ee:J:U?te:Q;O[xe]>x[xe]&&(u=It(u));var p=It(u),y=[];if(n&&y.push(h[X]<=0),a&&y.push(h[u]<=0,h[p]<=0),y.every(function(le){return le})){W=$,N=!1;break}P.set($,y)}if(N)for(var w=R?3:1,v=function(_){var q=A.find(function(se){var ue=P.get(se);if(ue)return ue.slice(0,_).every(function(Le){return Le})});if(q)return W=q,"break"},C=w;C>0;C--){var M=v(C);if(M==="break")break}e.placement!==W&&(e.modifiersData[r]._skip=!0,e.placement=W,e.reset=!0)}}var Qn={name:"flip",enabled:!0,phase:"main",fn:Zl,requiresIfExists:["offset"],data:{_skip:!1}};function Jn(s,e,t){return t===void 0&&(t={x:0,y:0}),{top:s.top-e.height-t.y,right:s.right-e.width+t.x,bottom:s.bottom-e.height+t.y,left:s.left-e.width-t.x}}function eo(s){return[Q,ee,te,J].some(function(e){return s[e]>=0})}function Ql(s){var e=s.state,t=s.name,r=e.rects.reference,i=e.rects.popper,n=e.modifiersData.preventOverflow,o=Oe(e,{elementContext:"reference"}),a=Oe(e,{altBoundary:!0}),l=Jn(o,r),d=Jn(a,i,n),f=eo(l),m=eo(d);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:f,hasPopperEscaped:m},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":m})}var to={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Ql};function Jl(s,e,t){var r=oe(s),i=[J,Q].indexOf(r)>=0?-1:1,n=typeof t=="function"?t(Object.assign({},e,{placement:s})):t,o=n[0],a=n[1];return o=o||0,a=(a||0)*i,[J,ee].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function ec(s){var e=s.state,t=s.options,r=s.name,i=t.offset,n=i===void 0?[0,0]:i,o=qr.reduce(function(f,m){return f[m]=Jl(m,e.rects,n),f},{}),a=o[e.placement],l=a.x,d=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=d),e.modifiersData[r]=o}var ro={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ec};function tc(s){var e=s.state,t=s.name;e.modifiersData[t]=or({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var so={name:"popperOffsets",enabled:!0,phase:"read",fn:tc,data:{}};function ri(s){return s==="x"?"y":"x"}function rc(s){var e=s.state,t=s.options,r=s.name,i=t.mainAxis,n=i===void 0?!0:i,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,d=t.rootBoundary,f=t.altBoundary,m=t.padding,E=t.tether,b=E===void 0?!0:E,R=t.tetherOffset,S=R===void 0?0:R,k=Oe(e,{boundary:l,rootBoundary:d,padding:m,altBoundary:f}),I=oe(e.placement),H=Te(e.placement),B=!H,A=lt(I),O=ri(A),x=e.modifiersData.popperOffsets,P=e.rects.reference,N=e.rects.popper,W=typeof S=="function"?S(Object.assign({},e.rects,{placement:e.placement})):S,G=typeof W=="number"?{mainAxis:W,altAxis:W}:Object.assign({mainAxis:0,altAxis:0},W),$=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,X={x:0,y:0};if(x){if(n){var U,ve=A==="y"?Q:J,xe=A==="y"?te:ee,h=A==="y"?"height":"width",u=x[A],p=u+k[ve],y=u-k[xe],w=b?-N[h]/2:0,v=H===Ge?P[h]:N[h],C=H===Ge?-N[h]:-P[h],M=e.elements.arrow,le=b&&M?at(M):{width:0,height:0},_=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:sr(),q=_[ve],se=_[xe],ue=ct(0,P[h],le[h]),Le=B?P[h]/2-w-ue-q-G.mainAxis:v-ue-q-G.mainAxis,Et=B?-P[h]/2+w+ue+se+G.mainAxis:C+ue+se+G.mainAxis,St=e.elements.arrow&&Ce(e.elements.arrow),Qe=St?A==="y"?St.clientTop||0:St.clientLeft||0:0,Tt=(U=$?.[A])!=null?U:0,$e=u+Le-Tt-Qe,Kt=u+Et-Tt,At=ct(b?ot(p,$e):p,u,b?Re(y,Kt):y);x[A]=At,X[A]=At-u}if(a){var qe,kt=A==="x"?Q:J,xt=A==="x"?te:ee,De=x[O],it=O==="y"?"height":"width",Tr=De+k[kt],Lt=De-k[xt],Ve=[Q,J].indexOf(I)!==-1,ze=(qe=$?.[O])!=null?qe:0,We=Ve?Tr:De-P[it]-N[it]-ze+G.altAxis,Gt=Ve?De+P[it]+N[it]-ze-G.altAxis:Lt,Xt=b&&Ve?jn(We,De,Gt):ct(b?We:Tr,De,b?Gt:Lt);x[O]=Xt,X[O]=Xt-De}e.modifiersData[r]=X}}var io={name:"preventOverflow",enabled:!0,phase:"main",fn:rc,requiresIfExists:["offset"]};function si(s){return{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}}function ii(s){return s===K(s)||!re(s)?ht(s):si(s)}function sc(s){var e=s.getBoundingClientRect(),t=Xe(e.width)/s.offsetWidth||1,r=Xe(e.height)/s.offsetHeight||1;return t!==1||r!==1}function ni(s,e,t){t===void 0&&(t=!1);var r=re(e),i=re(e)&&sc(e),n=he(e),o=Se(s,i,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!t)&&((ne(e)!=="body"||dt(n))&&(a=ii(e)),re(e)?(l=Se(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):n&&(l.x=ut(n))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function ic(s){var e=new Map,t=new Set,r=[];s.forEach(function(n){e.set(n.name,n)});function i(n){t.add(n.name);var o=[].concat(n.requires||[],n.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&i(l)}}),r.push(n)}return s.forEach(function(n){t.has(n.name)||i(n)}),r}function oi(s){var e=ic(s);return zn.reduce(function(t,r){return t.concat(e.filter(function(i){return i.phase===r}))},[])}function ai(s){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(s())})})),e}}function li(s){var e=s.reduce(function(t,r){var i=t[r.name];return t[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}var no={placement:"bottom",modifiers:[],strategy:"absolute"};function oo(){for(var s=arguments.length,e=new Array(s),t=0;t<s;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function ao(s){s===void 0&&(s={});var e=s,t=e.defaultModifiers,r=t===void 0?[]:t,i=e.defaultOptions,n=i===void 0?no:i;return function(a,l,d){d===void 0&&(d=n);var f={placement:"bottom",orderedModifiers:[],options:Object.assign({},no,n),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},m=[],E=!1,b={state:f,setOptions:function(I){var H=typeof I=="function"?I(f.options):I;S(),f.options=Object.assign({},n,f.options,H),f.scrollParents={reference:Ee(a)?et(a):a.contextElement?et(a.contextElement):[],popper:et(l)};var B=oi(li([].concat(r,f.options.modifiers)));return f.orderedModifiers=B.filter(function(A){return A.enabled}),R(),b.update()},forceUpdate:function(){if(!E){var I=f.elements,H=I.reference,B=I.popper;if(oo(H,B)){f.rects={reference:ni(H,Ce(B),f.options.strategy==="fixed"),popper:at(B)},f.reset=!1,f.placement=f.options.placement,f.orderedModifiers.forEach(function(G){return f.modifiersData[G.name]=Object.assign({},G.data)});for(var A=0;A<f.orderedModifiers.length;A++){if(f.reset===!0){f.reset=!1,A=-1;continue}var O=f.orderedModifiers[A],x=O.fn,P=O.options,N=P===void 0?{}:P,W=O.name;typeof x=="function"&&(f=x({state:f,options:N,name:W,instance:b})||f)}}}},update:ai(function(){return new Promise(function(k){b.forceUpdate(),k(f)})}),destroy:function(){S(),E=!0}};if(!oo(a,l))return b;b.setOptions(d).then(function(k){!E&&d.onFirstUpdate&&d.onFirstUpdate(k)});function R(){f.orderedModifiers.forEach(function(k){var I=k.name,H=k.options,B=H===void 0?{}:H,A=k.effect;if(typeof A=="function"){var O=A({state:f,name:I,instance:b,options:B}),x=function(){};m.push(O||x)}})}function S(){m.forEach(function(k){return k()}),m=[]}return b}}var nc=[Yn,so,Xn,Wn,ro,Qn,io,Kn,to],ci=ao({defaultModifiers:nc});var Ur=class extends D{static targets=["trigger","menu"];connect(){this.visible=!1,this.initialized=!1,this.options={placement:"bottom",triggerType:"click",offsetSkidding:0,offsetDistance:10,delay:300,ignoreClickOutsideClass:!1},this.init()}init(){this.triggerTarget&&this.menuTarget&&!this.initialized&&(this.popperInstance=ci(this.triggerTarget,this.menuTarget,{placement:this.options.placement,modifiers:[{name:"offset",options:{offset:[this.options.offsetSkidding,this.options.offsetDistance]}}]}),this.setupEventListeners(),this.initialized=!0)}disconnect(){this.initialized&&(this.options.triggerType==="click"&&this.triggerTarget.removeEventListener("click",this.clickHandler),this.options.triggerType==="hover"&&(this.triggerTarget.removeEventListener("mouseenter",this.hoverShowTriggerHandler),this.menuTarget.removeEventListener("mouseenter",this.hoverShowMenuHandler),this.triggerTarget.removeEventListener("mouseleave",this.hoverHideHandler),this.menuTarget.removeEventListener("mouseleave",this.hoverHideHandler)),this.removeClickOutsideListener(),this.popperInstance.destroy(),this.initialized=!1)}setupEventListeners(){this.clickHandler=this.toggle.bind(this),this.hoverShowTriggerHandler=s=>{s.type==="click"?this.toggle():setTimeout(()=>{this.show()},this.options.delay)},this.hoverShowMenuHandler=()=>{this.show()},this.hoverHideHandler=()=>{setTimeout(()=>{this.menuTarget.matches(":hover")||this.hide()},this.options.delay)},this.options.triggerType==="click"?this.triggerTarget.addEventListener("click",this.clickHandler):this.options.triggerType==="hover"&&(this.triggerTarget.addEventListener("mouseenter",this.hoverShowTriggerHandler),this.menuTarget.addEventListener("mouseenter",this.hoverShowMenuHandler),this.triggerTarget.addEventListener("mouseleave",this.hoverHideHandler),this.menuTarget.addEventListener("mouseleave",this.hoverHideHandler))}setupClickOutsideListener(){this.clickOutsideHandler=s=>{let e=s.target,t=this.options.ignoreClickOutsideClass,r=!1;t&&document.querySelectorAll(`.${t}`).forEach(n=>{if(n.contains(e)){r=!0;return}}),e!==this.menuTarget&&!this.menuTarget.contains(e)&&!this.triggerTarget.contains(e)&&!r&&this.visible&&this.hide()},document.body.addEventListener("click",this.clickOutsideHandler,!0)}removeClickOutsideListener(){this.clickOutsideHandler&&document.body.removeEventListener("click",this.clickOutsideHandler,!0)}toggle(){this.visible?this.hide():this.show()}show(){this.menuTarget.classList.remove("hidden"),this.menuTarget.classList.add("block"),this.menuTarget.removeAttribute("aria-hidden"),this.popperInstance.setOptions(s=>({...s,modifiers:[...s.modifiers,{name:"eventListeners",enabled:!0}]})),this.setupClickOutsideListener(),this.popperInstance.update(),this.visible=!0}hide(){this.menuTarget.classList.remove("block"),this.menuTarget.classList.add("hidden"),this.menuTarget.setAttribute("aria-hidden","true"),this.popperInstance.setOptions(s=>({...s,modifiers:[...s.modifiers,{name:"eventListeners",enabled:!1}]})),this.removeClickOutsideListener(),this.visible=!1}};var jr=class extends D{static targets=["trigger","menu"];connect(){this.element.hasAttribute("data-visible")||this.element.setAttribute("data-visible","false"),this.#e()}toggle(){let s=this.element.getAttribute("data-visible")==="true";this.element.setAttribute("data-visible",(!s).toString()),this.#e()}#e(){this.element.getAttribute("data-visible")==="true"?(this.menuTarget.classList.remove("hidden"),this.triggerTarget.setAttribute("aria-expanded","true"),this.dispatch("expand")):(this.menuTarget.classList.add("hidden"),this.triggerTarget.setAttribute("aria-expanded","false"),this.dispatch("collapse"))}};var Kr=class extends D{static values={after:Number};connect(){this.hasAfterValue&&this.afterValue>0&&(this.autoDismissTimeout=setTimeout(()=>{this.dismiss(),this.autoDismissTimeout=null},this.afterValue))}disconnect(){this.autoDismissTimeout&&clearTimeout(this.autoDismissTimeout),this.autoDismissTimeout=null}dismiss(){this.element.remove()}};var Gr=class extends D{static targets=["frame","refreshButton","backButton","homeButton"];connect(){this.#e(),this.srcHistory=[],this.originalFrameSrc=this.frameTarget.src,this.hasRefreshButtonTarget&&(this.refreshButtonTarget.style.display="",this.refreshButtonClicked=this.refreshButtonClicked.bind(this),this.refreshButtonTarget.addEventListener("click",this.refreshButtonClicked)),this.hasBackButtonTarget&&(this.backButtonClicked=this.backButtonClicked.bind(this),this.backButtonTarget.addEventListener("click",this.backButtonClicked)),this.hasHomeButtonTarget&&(this.homeButtonClicked=this.homeButtonClicked.bind(this),this.homeButtonTarget.addEventListener("click",this.homeButtonClicked)),this.frameLoaded=this.frameLoaded.bind(this),this.frameTarget.addEventListener("turbo:frame-load",this.frameLoaded),this.frameLoading=this.frameLoading.bind(this),this.frameTarget.addEventListener("turbo:click",this.frameLoading),this.frameTarget.addEventListener("turbo:submit-start",this.frameLoading),this.frameFailed=this.frameFailed.bind(this),this.frameTarget.addEventListener("turbo:fetch-request-error",this.frameFailed)}disconnect(){this.hasRefreshButtonTarget&&this.refreshButtonTarget.removeEventListener("click",this.refreshButtonClicked),this.hasBackButtonTarget&&this.backButtonTarget.removeEventListener("click",this.backButtonClicked),this.hasHomeButtonTarget&&this.homeButtonTarget.removeEventListener("click",this.homeButtonClicked),this.frameTarget.removeEventListener("turbo:frame-load",this.frameLoaded),this.frameTarget.removeEventListener("turbo:click",this.frameLoading),this.frameTarget.removeEventListener("turbo:submit-start",this.frameLoading),this.frameTarget.removeEventListener("turbo:fetch-request-error",this.frameFailed)}frameLoading(s){this.#e()}frameFailed(s){this.#t()}frameLoaded(s){this.#t();let e=s.target.src;e==this.currentSrc||(e==this.originalFrameSrc?this.srcHistory=[e]:this.srcHistory.push(e)),this.#r()}refreshButtonClicked(s){this.frameLoading(null),this.frameTarget.reload()}backButtonClicked(s){this.frameLoading(null),this.srcHistory.pop(),this.frameTarget.src=this.currentSrc}homeButtonClicked(s){this.frameLoading(null),this.frameTarget.src=this.originalFrameSrc}get currentSrc(){return this.srcHistory[this.srcHistory.length-1]}#e(){this.hasRefreshButtonTarget&&this.refreshButtonTarget.classList.add("motion-safe:animate-spin"),this.frameTarget.classList.add("motion-safe:animate-pulse")}#t(){this.hasRefreshButtonTarget&&this.refreshButtonTarget.classList.remove("motion-safe:animate-spin"),this.frameTarget.classList.remove("motion-safe:animate-pulse")}#r(){this.hasHomeButtonTarget&&(this.homeButtonTarget.style.display=this.srcHistory.length>2?"":"none"),this.hasBackButtonTarget&&(this.backButtonTarget.style.display=this.srcHistory.length>1?"":"none")}};var Xr=class extends D{connect(){this.updateColorMode()}disconnect(){}updateColorMode(){localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}setLightColorMode(){localStorage.theme="light",this.updateColorMode()}setDarkColorMode(){localStorage.theme="dark",this.updateColorMode()}setSystemColorMode(){localStorage.removeItem("theme"),this.updateColorMode()}};var{entries:vo,setPrototypeOf:lo,isFrozen:oc,getPrototypeOf:ac,getOwnPropertyDescriptor:lc}=Object,{freeze:ge,seal:Ae,create:yo}=Object,{apply:mi,construct:gi}=typeof Reflect<"u"&&Reflect;ge||(ge=function(e){return e});Ae||(Ae=function(e){return e});mi||(mi=function(e,t,r){return e.apply(t,r)});gi||(gi=function(e,t){return new e(...t)});var Yr=we(Array.prototype.forEach),co=we(Array.prototype.pop),ar=we(Array.prototype.push),Qr=we(String.prototype.toLowerCase),hi=we(String.prototype.toString),ho=we(String.prototype.match),lr=we(String.prototype.replace),cc=we(String.prototype.indexOf),hc=we(String.prototype.trim),Me=we(Object.prototype.hasOwnProperty),me=we(RegExp.prototype.test),cr=uc(TypeError);function we(s){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return mi(s,e,r)}}function uc(s){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return gi(s,t)}}function F(s,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Qr;lo&&lo(s,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){let n=t(i);n!==i&&(oc(e)||(e[r]=n),i=n)}s[i]=!0}return s}function dc(s){for(let e=0;e<s.length;e++)Me(s,e)||(s[e]=null);return s}function ft(s){let e=yo(null);for(let[t,r]of vo(s))Me(s,t)&&(Array.isArray(r)?e[t]=dc(r):r&&typeof r=="object"&&r.constructor===Object?e[t]=ft(r):e[t]=r);return e}function hr(s,e){for(;s!==null;){let r=lc(s,e);if(r){if(r.get)return we(r.get);if(typeof r.value=="function")return we(r.value)}s=ac(s)}function t(){return null}return t}var uo=ge(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ui=ge(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),di=ge(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),fc=ge(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),fi=ge(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),pc=ge(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),fo=ge(["#text"]),po=ge(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),pi=ge(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mo=ge(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Zr=ge(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),mc=Ae(/\{\{[\w\W]*|[\w\W]*\}\}/gm),gc=Ae(/<%[\w\W]*|[\w\W]*%>/gm),bc=Ae(/\${[\w\W]*}/gm),vc=Ae(/^data-[\-\w.\u00B7-\uFFFF]/),yc=Ae(/^aria-[\-\w]+$/),wo=Ae(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),wc=Ae(/^(?:\w+script|data):/i),Ec=Ae(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Eo=Ae(/^html$/i),Sc=Ae(/^[a-z][.\w]*(-[.\w]+)+$/i),go=Object.freeze({__proto__:null,ARIA_ATTR:yc,ATTR_WHITESPACE:Ec,CUSTOM_ELEMENT:Sc,DATA_ATTR:vc,DOCTYPE_NAME:Eo,ERB_EXPR:gc,IS_ALLOWED_URI:wo,IS_SCRIPT_OR_DATA:wc,MUSTACHE_EXPR:mc,TMPLIT_EXPR:bc}),ur={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Tc=function(){return typeof window>"u"?null:window},Ac=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null,i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(r=t.getAttribute(i));let n="dompurify"+(r?"#"+r:"");try{return e.createPolicy(n,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+n+" could not be created."),null}},bo=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function So(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Tc(),e=L=>So(L);if(e.version="3.2.2",e.removed=[],!s||!s.document||s.document.nodeType!==ur.document)return e.isSupported=!1,e;let{document:t}=s,r=t,i=r.currentScript,{DocumentFragment:n,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:d,NamedNodeMap:f=s.NamedNodeMap||s.MozNamedAttrMap,HTMLFormElement:m,DOMParser:E,trustedTypes:b}=s,R=l.prototype,S=hr(R,"cloneNode"),k=hr(R,"remove"),I=hr(R,"nextSibling"),H=hr(R,"childNodes"),B=hr(R,"parentNode");if(typeof o=="function"){let L=t.createElement("template");L.content&&L.content.ownerDocument&&(t=L.content.ownerDocument)}let A,O="",{implementation:x,createNodeIterator:P,createDocumentFragment:N,getElementsByTagName:W}=t,{importNode:G}=r,$=bo();e.isSupported=typeof vo=="function"&&typeof B=="function"&&x&&x.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:X,ERB_EXPR:U,TMPLIT_EXPR:ve,DATA_ATTR:xe,ARIA_ATTR:h,IS_SCRIPT_OR_DATA:u,ATTR_WHITESPACE:p,CUSTOM_ELEMENT:y}=go,{IS_ALLOWED_URI:w}=go,v=null,C=F({},[...uo,...ui,...di,...fi,...fo]),M=null,le=F({},[...po,...pi,...mo,...Zr]),_=Object.seal(yo(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),q=null,se=null,ue=!0,Le=!0,Et=!1,St=!0,Qe=!1,Tt=!0,$e=!1,Kt=!1,At=!1,qe=!1,kt=!1,xt=!1,De=!0,it=!1,Tr="user-content-",Lt=!0,Ve=!1,ze={},We=null,Gt=F({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Xt=null,ln=F({},["audio","video","img","source","image","track"]),ws=null,cn=F({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ar="http://www.w3.org/1998/Math/MathML",kr="http://www.w3.org/2000/svg",Ue="http://www.w3.org/1999/xhtml",Rt=Ue,Es=!1,Ss=null,oa=F({},[Ar,kr,Ue],hi),xr=F({},["mi","mo","mn","ms","mtext"]),Lr=F({},["annotation-xml"]),aa=F({},["title","style","font","a","script"]),Yt=null,la=["application/xhtml+xml","text/html"],ca="text/html",ie=null,Ct=null,ha=t.createElement("form"),hn=function(c){return c instanceof RegExp||c instanceof Function},Ts=function(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ct&&Ct===c)){if((!c||typeof c!="object")&&(c={}),c=ft(c),Yt=la.indexOf(c.PARSER_MEDIA_TYPE)===-1?ca:c.PARSER_MEDIA_TYPE,ie=Yt==="application/xhtml+xml"?hi:Qr,v=Me(c,"ALLOWED_TAGS")?F({},c.ALLOWED_TAGS,ie):C,M=Me(c,"ALLOWED_ATTR")?F({},c.ALLOWED_ATTR,ie):le,Ss=Me(c,"ALLOWED_NAMESPACES")?F({},c.ALLOWED_NAMESPACES,hi):oa,ws=Me(c,"ADD_URI_SAFE_ATTR")?F(ft(cn),c.ADD_URI_SAFE_ATTR,ie):cn,Xt=Me(c,"ADD_DATA_URI_TAGS")?F(ft(ln),c.ADD_DATA_URI_TAGS,ie):ln,We=Me(c,"FORBID_CONTENTS")?F({},c.FORBID_CONTENTS,ie):Gt,q=Me(c,"FORBID_TAGS")?F({},c.FORBID_TAGS,ie):{},se=Me(c,"FORBID_ATTR")?F({},c.FORBID_ATTR,ie):{},ze=Me(c,"USE_PROFILES")?c.USE_PROFILES:!1,ue=c.ALLOW_ARIA_ATTR!==!1,Le=c.ALLOW_DATA_ATTR!==!1,Et=c.ALLOW_UNKNOWN_PROTOCOLS||!1,St=c.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Qe=c.SAFE_FOR_TEMPLATES||!1,Tt=c.SAFE_FOR_XML!==!1,$e=c.WHOLE_DOCUMENT||!1,qe=c.RETURN_DOM||!1,kt=c.RETURN_DOM_FRAGMENT||!1,xt=c.RETURN_TRUSTED_TYPE||!1,At=c.FORCE_BODY||!1,De=c.SANITIZE_DOM!==!1,it=c.SANITIZE_NAMED_PROPS||!1,Lt=c.KEEP_CONTENT!==!1,Ve=c.IN_PLACE||!1,w=c.ALLOWED_URI_REGEXP||wo,Rt=c.NAMESPACE||Ue,xr=c.MATHML_TEXT_INTEGRATION_POINTS||xr,Lr=c.HTML_INTEGRATION_POINTS||Lr,_=c.CUSTOM_ELEMENT_HANDLING||{},c.CUSTOM_ELEMENT_HANDLING&&hn(c.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(_.tagNameCheck=c.CUSTOM_ELEMENT_HANDLING.tagNameCheck),c.CUSTOM_ELEMENT_HANDLING&&hn(c.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(_.attributeNameCheck=c.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),c.CUSTOM_ELEMENT_HANDLING&&typeof c.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(_.allowCustomizedBuiltInElements=c.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Qe&&(Le=!1),kt&&(qe=!0),ze&&(v=F({},fo),M=[],ze.html===!0&&(F(v,uo),F(M,po)),ze.svg===!0&&(F(v,ui),F(M,pi),F(M,Zr)),ze.svgFilters===!0&&(F(v,di),F(M,pi),F(M,Zr)),ze.mathMl===!0&&(F(v,fi),F(M,mo),F(M,Zr))),c.ADD_TAGS&&(v===C&&(v=ft(v)),F(v,c.ADD_TAGS,ie)),c.ADD_ATTR&&(M===le&&(M=ft(M)),F(M,c.ADD_ATTR,ie)),c.ADD_URI_SAFE_ATTR&&F(ws,c.ADD_URI_SAFE_ATTR,ie),c.FORBID_CONTENTS&&(We===Gt&&(We=ft(We)),F(We,c.FORBID_CONTENTS,ie)),Lt&&(v["#text"]=!0),$e&&F(v,["html","head","body"]),v.table&&(F(v,["tbody"]),delete q.tbody),c.TRUSTED_TYPES_POLICY){if(typeof c.TRUSTED_TYPES_POLICY.createHTML!="function")throw cr('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof c.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw cr('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');A=c.TRUSTED_TYPES_POLICY,O=A.createHTML("")}else A===void 0&&(A=Ac(b,i)),A!==null&&typeof O=="string"&&(O=A.createHTML(""));ge&&ge(c),Ct=c}},un=F({},[...ui,...di,...fc]),dn=F({},[...fi,...pc]),ua=function(c){let g=B(c);(!g||!g.tagName)&&(g={namespaceURI:Rt,tagName:"template"});let T=Qr(c.tagName),j=Qr(g.tagName);return Ss[c.namespaceURI]?c.namespaceURI===kr?g.namespaceURI===Ue?T==="svg":g.namespaceURI===Ar?T==="svg"&&(j==="annotation-xml"||xr[j]):!!un[T]:c.namespaceURI===Ar?g.namespaceURI===Ue?T==="math":g.namespaceURI===kr?T==="math"&&Lr[j]:!!dn[T]:c.namespaceURI===Ue?g.namespaceURI===kr&&!Lr[j]||g.namespaceURI===Ar&&!xr[j]?!1:!dn[T]&&(aa[T]||!un[T]):!!(Yt==="application/xhtml+xml"&&Ss[c.namespaceURI]):!1},Be=function(c){ar(e.removed,{element:c});try{B(c).removeChild(c)}catch{k(c)}},Rr=function(c,g){try{ar(e.removed,{attribute:g.getAttributeNode(c),from:g})}catch{ar(e.removed,{attribute:null,from:g})}if(g.removeAttribute(c),c==="is")if(qe||kt)try{Be(g)}catch{}else try{g.setAttribute(c,"")}catch{}},fn=function(c){let g=null,T=null;if(At)c="<remove></remove>"+c;else{let ce=ho(c,/^[\r\n\t ]+/);T=ce&&ce[0]}Yt==="application/xhtml+xml"&&Rt===Ue&&(c='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+c+"</body></html>");let j=A?A.createHTML(c):c;if(Rt===Ue)try{g=new E().parseFromString(j,Yt)}catch{}if(!g||!g.documentElement){g=x.createDocument(Rt,"template",null);try{g.documentElement.innerHTML=Es?O:j}catch{}}let de=g.body||g.documentElement;return c&&T&&de.insertBefore(t.createTextNode(T),de.childNodes[0]||null),Rt===Ue?W.call(g,$e?"html":"body")[0]:$e?g.documentElement:de},pn=function(c){return P.call(c.ownerDocument||c,c,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},mn=function(c){return c instanceof m&&(typeof c.nodeName!="string"||typeof c.textContent!="string"||typeof c.removeChild!="function"||!(c.attributes instanceof f)||typeof c.removeAttribute!="function"||typeof c.setAttribute!="function"||typeof c.namespaceURI!="string"||typeof c.insertBefore!="function"||typeof c.hasChildNodes!="function")},gn=function(c){return typeof a=="function"&&c instanceof a};function je(L,c,g){Yr(L,T=>{T.call(e,c,g,Ct)})}let bn=function(c){let g=null;if(je($.beforeSanitizeElements,c,null),mn(c))return Be(c),!0;let T=ie(c.nodeName);if(je($.uponSanitizeElement,c,{tagName:T,allowedTags:v}),c.hasChildNodes()&&!gn(c.firstElementChild)&&me(/<[/\w]/g,c.innerHTML)&&me(/<[/\w]/g,c.textContent)||c.nodeType===ur.progressingInstruction||Tt&&c.nodeType===ur.comment&&me(/<[/\w]/g,c.data))return Be(c),!0;if(!v[T]||q[T]){if(!q[T]&&yn(T)&&(_.tagNameCheck instanceof RegExp&&me(_.tagNameCheck,T)||_.tagNameCheck instanceof Function&&_.tagNameCheck(T)))return!1;if(Lt&&!We[T]){let j=B(c)||c.parentNode,de=H(c)||c.childNodes;if(de&&j){let ce=de.length;for(let ye=ce-1;ye>=0;--ye){let Ne=S(de[ye],!0);Ne.__removalCount=(c.__removalCount||0)+1,j.insertBefore(Ne,I(c))}}}return Be(c),!0}return c instanceof l&&!ua(c)||(T==="noscript"||T==="noembed"||T==="noframes")&&me(/<\/no(script|embed|frames)/i,c.innerHTML)?(Be(c),!0):(Qe&&c.nodeType===ur.text&&(g=c.textContent,Yr([X,U,ve],j=>{g=lr(g,j," ")}),c.textContent!==g&&(ar(e.removed,{element:c.cloneNode()}),c.textContent=g)),je($.afterSanitizeElements,c,null),!1)},vn=function(c,g,T){if(De&&(g==="id"||g==="name")&&(T in t||T in ha))return!1;if(!(Le&&!se[g]&&me(xe,g))){if(!(ue&&me(h,g))){if(!M[g]||se[g]){if(!(yn(c)&&(_.tagNameCheck instanceof RegExp&&me(_.tagNameCheck,c)||_.tagNameCheck instanceof Function&&_.tagNameCheck(c))&&(_.attributeNameCheck instanceof RegExp&&me(_.attributeNameCheck,g)||_.attributeNameCheck instanceof Function&&_.attributeNameCheck(g))||g==="is"&&_.allowCustomizedBuiltInElements&&(_.tagNameCheck instanceof RegExp&&me(_.tagNameCheck,T)||_.tagNameCheck instanceof Function&&_.tagNameCheck(T))))return!1}else if(!ws[g]){if(!me(w,lr(T,p,""))){if(!((g==="src"||g==="xlink:href"||g==="href")&&c!=="script"&&cc(T,"data:")===0&&Xt[c])){if(!(Et&&!me(u,lr(T,p,"")))){if(T)return!1}}}}}}return!0},yn=function(c){return c!=="annotation-xml"&&ho(c,y)},wn=function(c){je($.beforeSanitizeAttributes,c,null);let{attributes:g}=c;if(!g)return;let T={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:M,forceKeepAttr:void 0},j=g.length;for(;j--;){let de=g[j],{name:ce,namespaceURI:ye,value:Ne}=de,Zt=ie(ce),fe=ce==="value"?Ne:hc(Ne);if(T.attrName=Zt,T.attrValue=fe,T.keepAttr=!0,T.forceKeepAttr=void 0,je($.uponSanitizeAttribute,c,T),fe=T.attrValue,it&&(Zt==="id"||Zt==="name")&&(Rr(ce,c),fe=Tr+fe),Tt&&me(/((--!?|])>)|<\/(style|title)/i,fe)){Rr(ce,c);continue}if(T.forceKeepAttr||(Rr(ce,c),!T.keepAttr))continue;if(!St&&me(/\/>/i,fe)){Rr(ce,c);continue}Qe&&Yr([X,U,ve],Sn=>{fe=lr(fe,Sn," ")});let En=ie(c.nodeName);if(vn(En,Zt,fe)){if(A&&typeof b=="object"&&typeof b.getAttributeType=="function"&&!ye)switch(b.getAttributeType(En,Zt)){case"TrustedHTML":{fe=A.createHTML(fe);break}case"TrustedScriptURL":{fe=A.createScriptURL(fe);break}}try{ye?c.setAttributeNS(ye,ce,fe):c.setAttribute(ce,fe),mn(c)?Be(c):co(e.removed)}catch{}}}je($.afterSanitizeAttributes,c,null)},da=function L(c){let g=null,T=pn(c);for(je($.beforeSanitizeShadowDOM,c,null);g=T.nextNode();)je($.uponSanitizeShadowNode,g,null),!bn(g)&&(g.content instanceof n&&L(g.content),wn(g));je($.afterSanitizeShadowDOM,c,null)};return e.sanitize=function(L){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=null,T=null,j=null,de=null;if(Es=!L,Es&&(L="<!-->"),typeof L!="string"&&!gn(L))if(typeof L.toString=="function"){if(L=L.toString(),typeof L!="string")throw cr("dirty is not a string, aborting")}else throw cr("toString is not a function");if(!e.isSupported)return L;if(Kt||Ts(c),e.removed=[],typeof L=="string"&&(Ve=!1),Ve){if(L.nodeName){let Ne=ie(L.nodeName);if(!v[Ne]||q[Ne])throw cr("root node is forbidden and cannot be sanitized in-place")}}else if(L instanceof a)g=fn("<!---->"),T=g.ownerDocument.importNode(L,!0),T.nodeType===ur.element&&T.nodeName==="BODY"||T.nodeName==="HTML"?g=T:g.appendChild(T);else{if(!qe&&!Qe&&!$e&&L.indexOf("<")===-1)return A&&xt?A.createHTML(L):L;if(g=fn(L),!g)return qe?null:xt?O:""}g&&At&&Be(g.firstChild);let ce=pn(Ve?L:g);for(;j=ce.nextNode();)bn(j)||(j.content instanceof n&&da(j.content),wn(j));if(Ve)return L;if(qe){if(kt)for(de=N.call(g.ownerDocument);g.firstChild;)de.appendChild(g.firstChild);else de=g;return(M.shadowroot||M.shadowrootmode)&&(de=G.call(r,de,!0)),de}let ye=$e?g.outerHTML:g.innerHTML;return $e&&v["!doctype"]&&g.ownerDocument&&g.ownerDocument.doctype&&g.ownerDocument.doctype.name&&me(Eo,g.ownerDocument.doctype.name)&&(ye="<!DOCTYPE "+g.ownerDocument.doctype.name+`>
`+ye),Qe&&Yr([X,U,ve],Ne=>{ye=lr(ye,Ne," ")}),A&&xt?A.createHTML(ye):ye},e.setConfig=function(){let L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ts(L),Kt=!0},e.clearConfig=function(){Ct=null,Kt=!1},e.isValidAttribute=function(L,c,g){Ct||Ts({});let T=ie(L),j=ie(c);return vn(T,j,g)},e.addHook=function(L,c){typeof c=="function"&&ar($[L],c)},e.removeHook=function(L){return co($[L])},e.removeHooks=function(L){$[L]=[]},e.removeAllHooks=function(){$=bo()},e}var bi=So();function wi(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var mt=wi();function Ro(s){mt=s}var pr={exec:()=>null};function z(s,e=""){let t=typeof s=="string"?s:s.source,r={replace:(i,n)=>{let o=typeof n=="string"?n:n.source;return o=o.replace(be.caret,"$1"),t=t.replace(i,o),r},getRegex:()=>new RegExp(t,e)};return r}var be={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:s=>new RegExp(`^( {0,3}${s})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}#`),htmlBeginRegex:s=>new RegExp(`^ {0,${Math.min(3,s-1)}}<(?:[a-z].*>|!--)`,"i")},kc=/^(?:[ \t]*(?:\n|$))+/,xc=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Lc=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,gr=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Rc=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Co=/(?:[*+-]|\d{1,9}[.)])/,Oo=z(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Co).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Ei=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Cc=/^[^\n]+/,Si=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Oc=z(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Si).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Mc=z(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Co).getRegex(),ts="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ti=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Pc=z("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Ti).replace("tag",ts).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Mo=z(Ei).replace("hr",gr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ts).getRegex(),Ic=z(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Mo).getRegex(),Ai={blockquote:Ic,code:xc,def:Oc,fences:Lc,heading:Rc,hr:gr,html:Pc,lheading:Oo,list:Mc,newline:kc,paragraph:Mo,table:pr,text:Cc},To=z("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",gr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ts).getRegex(),Fc={...Ai,table:To,paragraph:z(Ei).replace("hr",gr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",To).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ts).getRegex()},Dc={...Ai,html:z(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ti).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:pr,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:z(Ei).replace("hr",gr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Oo).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Po=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Bc=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Io=/^( {2,}|\\)\n(?!\s*$)/,Nc=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,rs=/[\p{P}\p{S}]/u,ki=/[\s\p{P}\p{S}]/u,Fo=/[^\s\p{P}\p{S}]/u,_c=z(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,ki).getRegex(),Hc=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,$c=z(/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,"u").replace(/punct/g,rs).getRegex(),qc=z("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)","gu").replace(/notPunctSpace/g,Fo).replace(/punctSpace/g,ki).replace(/punct/g,rs).getRegex(),Vc=z("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Fo).replace(/punctSpace/g,ki).replace(/punct/g,rs).getRegex(),zc=z(/\\(punct)/,"gu").replace(/punct/g,rs).getRegex(),Wc=z(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Uc=z(Ti).replace("(?:-->|$)","-->").getRegex(),jc=z("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Uc).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),es=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Kc=z(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",es).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Do=z(/^!?\[(label)\]\[(ref)\]/).replace("label",es).replace("ref",Si).getRegex(),Bo=z(/^!?\[(ref)\](?:\[\])?/).replace("ref",Si).getRegex(),Gc=z("reflink|nolink(?!\\()","g").replace("reflink",Do).replace("nolink",Bo).getRegex(),xi={_backpedal:pr,anyPunctuation:zc,autolink:Wc,blockSkip:Hc,br:Io,code:Bc,del:pr,emStrongLDelim:$c,emStrongRDelimAst:qc,emStrongRDelimUnd:Vc,escape:Po,link:Kc,nolink:Bo,punctuation:_c,reflink:Do,reflinkSearch:Gc,tag:jc,text:Nc,url:pr},Xc={...xi,link:z(/^!?\[(label)\]\((.*?)\)/).replace("label",es).getRegex(),reflink:z(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",es).getRegex()},vi={...xi,escape:z(Po).replace("])","~|])").getRegex(),url:z(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Yc={...vi,br:z(Io).replace("{2,}","*").getRegex(),text:z(vi.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Jr={normal:Ai,gfm:Fc,pedantic:Dc},dr={normal:xi,gfm:vi,breaks:Yc,pedantic:Xc},Zc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ao=s=>Zc[s];function _e(s,e){if(e){if(be.escapeTest.test(s))return s.replace(be.escapeReplace,Ao)}else if(be.escapeTestNoEncode.test(s))return s.replace(be.escapeReplaceNoEncode,Ao);return s}function ko(s){try{s=encodeURI(s).replace(be.percentDecode,"%")}catch{return null}return s}function xo(s,e){let t=s.replace(be.findPipe,(n,o,a)=>{let l=!1,d=o;for(;--d>=0&&a[d]==="\\";)l=!l;return l?"|":" |"}),r=t.split(be.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(be.slashPipe,"|");return r}function fr(s,e,t){let r=s.length;if(r===0)return"";let i=0;for(;i<r;){let n=s.charAt(r-i-1);if(n===e&&!t)i++;else if(n!==e&&t)i++;else break}return s.slice(0,r-i)}function Qc(s,e){if(s.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<s.length;r++)if(s[r]==="\\")r++;else if(s[r]===e[0])t++;else if(s[r]===e[1]&&(t--,t<0))return r;return-1}function Lo(s,e,t,r,i){let n=e.href,o=e.title||null,a=s[1].replace(i.other.outputLinkReplace,"$1");if(s[0].charAt(0)!=="!"){r.state.inLink=!0;let l={type:"link",raw:t,href:n,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}return{type:"image",raw:t,href:n,title:o,text:a}}function Jc(s,e,t){let r=s.match(t.other.indentCodeCompensation);if(r===null)return e;let i=r[1];return e.split(`
`).map(n=>{let o=n.match(t.other.beginningSpace);if(o===null)return n;let[a]=o;return a.length>=i.length?n.slice(i.length):n}).join(`
`)}var Bt=class{options;rules;lexer;constructor(e){this.options=e||mt}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let r=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:fr(r,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let r=t[0],i=Jc(r,t[3]||"",this.rules);return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(this.rules.other.endingHash.test(r)){let i=fr(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:fr(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let r=fr(t[0],`
`).split(`
`),i="",n="",o=[];for(;r.length>0;){let a=!1,l=[],d;for(d=0;d<r.length;d++)if(this.rules.other.blockquoteStart.test(r[d]))l.push(r[d]),a=!0;else if(!a)l.push(r[d]);else break;r=r.slice(d);let f=l.join(`
`),m=f.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${f}`:f,n=n?`${n}
${m}`:m;let E=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(m,o,!0),this.lexer.state.top=E,r.length===0)break;let b=o.at(-1);if(b?.type==="code")break;if(b?.type==="blockquote"){let R=b,S=R.raw+`
`+r.join(`
`),k=this.blockquote(S);o[o.length-1]=k,i=i.substring(0,i.length-R.raw.length)+k.raw,n=n.substring(0,n.length-R.text.length)+k.text;break}else if(b?.type==="list"){let R=b,S=R.raw+`
`+r.join(`
`),k=this.list(S);o[o.length-1]=k,i=i.substring(0,i.length-b.raw.length)+k.raw,n=n.substring(0,n.length-R.raw.length)+k.raw,r=S.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:o,text:n}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),i=r.length>1,n={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let o=this.rules.other.listItemRegex(r),a=!1;for(;e;){let d=!1,f="",m="";if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;f=t[0],e=e.substring(f.length);let E=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,H=>" ".repeat(3*H.length)),b=e.split(`
`,1)[0],R=!E.trim(),S=0;if(this.options.pedantic?(S=2,m=E.trimStart()):R?S=t[1].length+1:(S=t[2].search(this.rules.other.nonSpaceChar),S=S>4?1:S,m=E.slice(S),S+=t[1].length),R&&this.rules.other.blankLine.test(b)&&(f+=b+`
`,e=e.substring(b.length+1),d=!0),!d){let H=this.rules.other.nextBulletRegex(S),B=this.rules.other.hrRegex(S),A=this.rules.other.fencesBeginRegex(S),O=this.rules.other.headingBeginRegex(S),x=this.rules.other.htmlBeginRegex(S);for(;e;){let P=e.split(`
`,1)[0],N;if(b=P,this.options.pedantic?(b=b.replace(this.rules.other.listReplaceNesting,"  "),N=b):N=b.replace(this.rules.other.tabCharGlobal,"    "),A.test(b)||O.test(b)||x.test(b)||H.test(b)||B.test(b))break;if(N.search(this.rules.other.nonSpaceChar)>=S||!b.trim())m+=`
`+N.slice(S);else{if(R||E.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||A.test(E)||O.test(E)||B.test(E))break;m+=`
`+b}!R&&!b.trim()&&(R=!0),f+=P+`
`,e=e.substring(P.length+1),E=N.slice(S)}}n.loose||(a?n.loose=!0:this.rules.other.doubleBlankLine.test(f)&&(a=!0));let k=null,I;this.options.gfm&&(k=this.rules.other.listIsTask.exec(m),k&&(I=k[0]!=="[ ] ",m=m.replace(this.rules.other.listReplaceTask,""))),n.items.push({type:"list_item",raw:f,task:!!k,checked:I,loose:!1,text:m,tokens:[]}),n.raw+=f}let l=n.items.at(-1);l&&(l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd()),n.raw=n.raw.trimEnd();for(let d=0;d<n.items.length;d++)if(this.lexer.state.top=!1,n.items[d].tokens=this.lexer.blockTokens(n.items[d].text,[]),!n.loose){let f=n.items[d].tokens.filter(E=>E.type==="space"),m=f.length>0&&f.some(E=>this.rules.other.anyLine.test(E.raw));n.loose=m}if(n.loose)for(let d=0;d<n.items.length;d++)n.items[d].loose=!0;return n}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let r=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",n=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:n}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let r=xo(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),n=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let a of i)this.rules.other.tableAlignRight.test(a)?o.align.push("right"):this.rules.other.tableAlignCenter.test(a)?o.align.push("center"):this.rules.other.tableAlignLeft.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<r.length;a++)o.header.push({text:r[a],tokens:this.lexer.inline(r[a]),header:!0,align:o.align[a]});for(let a of n)o.rows.push(xo(a,o.header.length).map((l,d)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[d]})));return o}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let r=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let o=fr(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{let o=Qc(t[2],"()");if(o>-1){let l=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let i=t[2],n="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(i);o&&(i=o[1],n=o[3])}else n=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),Lo(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:n&&n.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),n=t[i.toLowerCase()];if(!n){let o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return Lo(r,n,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){let o=[...i[0]].length-1,a,l,d=o,f=0,m=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(m.lastIndex=0,t=t.slice(-1*e.length+o);(i=m.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=[...a].length,i[3]||i[4]){d+=l;continue}else if((i[5]||i[6])&&o%3&&!((o+l)%3)){f+=l;continue}if(d-=l,d>0)continue;l=Math.min(l,l+d+f);let E=[...i[0]][0].length,b=e.slice(0,o+i.index+E+l);if(Math.min(o,l)%2){let S=b.slice(1,-1);return{type:"em",raw:b,text:S,tokens:this.lexer.inlineTokens(S)}}let R=b.slice(2,-2);return{type:"strong",raw:b,text:R,tokens:this.lexer.inlineTokens(R)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(r),n=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&n&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:t[0],text:r}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=t[1],i="mailto:"+r):(r=t[1],i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=t[0],i="mailto:"+r;else{let n;do n=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(n!==t[0]);r=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let r=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:r}}}},Pe=class s{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||mt,this.options.tokenizer=this.options.tokenizer||new Bt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:be,block:Jr.normal,inline:dr.normal};this.options.pedantic?(t.block=Jr.pedantic,t.inline=dr.pedantic):this.options.gfm&&(t.block=Jr.gfm,this.options.breaks?t.inline=dr.breaks:t.inline=dr.gfm),this.tokenizer.rules=t}static get rules(){return{block:Jr,inline:dr}}static lex(e,t){return new s(t).lex(e)}static lexInline(e,t){return new s(t).inlineTokens(e)}lex(e){e=e.replace(be.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){for(this.options.pedantic&&(e=e.replace(be.tabCharGlobal,"    ").replace(be.spaceLine,""));e;){let i;if(this.options.extensions?.block?.some(o=>(i=o.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))continue;if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length);let o=t.at(-1);i.raw.length===1&&o!==void 0?o.raw+=`
`:t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length);let o=t.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=`
`+i.raw,o.text+=`
`+i.text,this.inlineQueue.at(-1).src=o.text):t.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length);let o=t.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=`
`+i.raw,o.text+=`
`+i.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}let n=e;if(this.options.extensions?.startBlock){let o=1/0,a=e.slice(1),l;this.options.extensions.startBlock.forEach(d=>{l=d.call({lexer:this},a),typeof l=="number"&&l>=0&&(o=Math.min(o,l))}),o<1/0&&o>=0&&(n=e.substring(0,o+1))}if(this.state.top&&(i=this.tokenizer.paragraph(n))){let o=t.at(-1);r&&o?.type==="paragraph"?(o.raw+=`
`+i.raw,o.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(i),r=n.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length);let o=t.at(-1);o?.type==="text"?(o.raw+=`
`+i.raw,o.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(i);continue}if(e){let o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r=e,i=null;if(this.tokens.links){let a=Object.keys(this.tokens.links);if(a.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)a.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let n=!1,o="";for(;e;){n||(o=""),n=!1;let a;if(this.options.extensions?.inline?.some(d=>(a=d.call({lexer:this},e,t))?(e=e.substring(a.raw.length),t.push(a),!0):!1))continue;if(a=this.tokenizer.escape(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.tag(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.link(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(a.raw.length);let d=t.at(-1);a.type==="text"&&d?.type==="text"?(d.raw+=a.raw,d.text+=a.text):t.push(a);continue}if(a=this.tokenizer.emStrong(e,r,o)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.codespan(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.br(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.del(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.autolink(e)){e=e.substring(a.raw.length),t.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(e))){e=e.substring(a.raw.length),t.push(a);continue}let l=e;if(this.options.extensions?.startInline){let d=1/0,f=e.slice(1),m;this.options.extensions.startInline.forEach(E=>{m=E.call({lexer:this},f),typeof m=="number"&&m>=0&&(d=Math.min(d,m))}),d<1/0&&d>=0&&(l=e.substring(0,d+1))}if(a=this.tokenizer.inlineText(l)){e=e.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(o=a.raw.slice(-1)),n=!0;let d=t.at(-1);d?.type==="text"?(d.raw+=a.raw,d.text+=a.text):t.push(a);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return t}},Nt=class{options;parser;constructor(e){this.options=e||mt}space(e){return""}code({text:e,lang:t,escaped:r}){let i=(t||"").match(be.notSpaceStart)?.[0],n=e.replace(be.endingNewline,"")+`
`;return i?'<pre><code class="language-'+_e(i)+'">'+(r?n:_e(n,!0))+`</code></pre>
`:"<pre><code>"+(r?n:_e(n,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,r=e.start,i="";for(let a=0;a<e.items.length;a++){let l=e.items[a];i+=this.listitem(l)}let n=t?"ol":"ul",o=t&&r!==1?' start="'+r+'"':"";return"<"+n+o+`>
`+i+"</"+n+`>
`}listitem(e){let t="";if(e.task){let r=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+_e(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let n=0;n<e.header.length;n++)r+=this.tablecell(e.header[n]);t+=this.tablerow({text:r});let i="";for(let n=0;n<e.rows.length;n++){let o=e.rows[n];r="";for(let a=0;a<o.length;a++)r+=this.tablecell(o[a]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${_e(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){let i=this.parser.parseInline(r),n=ko(e);if(n===null)return i;e=n;let o='<a href="'+e+'"';return t&&(o+=' title="'+_e(t)+'"'),o+=">"+i+"</a>",o}image({href:e,title:t,text:r}){let i=ko(e);if(i===null)return _e(r);e=i;let n=`<img src="${e}" alt="${r}"`;return t&&(n+=` title="${_e(t)}"`),n+=">",n}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:_e(e.text)}},mr=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Ie=class s{options;renderer;textRenderer;constructor(e){this.options=e||mt,this.options.renderer=this.options.renderer||new Nt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new mr}static parse(e,t){return new s(t).parse(e)}static parseInline(e,t){return new s(t).parseInline(e)}parse(e,t=!0){let r="";for(let i=0;i<e.length;i++){let n=e[i];if(this.options.extensions?.renderers?.[n.type]){let a=n,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){r+=l||"";continue}}let o=n;switch(o.type){case"space":{r+=this.renderer.space(o);continue}case"hr":{r+=this.renderer.hr(o);continue}case"heading":{r+=this.renderer.heading(o);continue}case"code":{r+=this.renderer.code(o);continue}case"table":{r+=this.renderer.table(o);continue}case"blockquote":{r+=this.renderer.blockquote(o);continue}case"list":{r+=this.renderer.list(o);continue}case"html":{r+=this.renderer.html(o);continue}case"paragraph":{r+=this.renderer.paragraph(o);continue}case"text":{let a=o,l=this.renderer.text(a);for(;i+1<e.length&&e[i+1].type==="text";)a=e[++i],l+=`
`+this.renderer.text(a);t?r+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):r+=l;continue}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(e,t=this.renderer){let r="";for(let i=0;i<e.length;i++){let n=e[i];if(this.options.extensions?.renderers?.[n.type]){let a=this.options.extensions.renderers[n.type].call({parser:this},n);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)){r+=a||"";continue}}let o=n;switch(o.type){case"escape":{r+=t.text(o);break}case"html":{r+=t.html(o);break}case"link":{r+=t.link(o);break}case"image":{r+=t.image(o);break}case"strong":{r+=t.strong(o);break}case"em":{r+=t.em(o);break}case"codespan":{r+=t.codespan(o);break}case"br":{r+=t.br(o);break}case"del":{r+=t.del(o);break}case"text":{r+=t.text(o);break}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},Dt=class{options;block;constructor(e){this.options=e||mt}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?Pe.lex:Pe.lexInline}provideParser(){return this.block?Ie.parse:Ie.parseInline}},yi=class{defaults=wi();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Ie;Renderer=Nt;TextRenderer=mr;Lexer=Pe;Tokenizer=Bt;Hooks=Dt;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(let i of e)switch(r=r.concat(t.call(this,i)),i.type){case"table":{let n=i;for(let o of n.header)r=r.concat(this.walkTokens(o.tokens,t));for(let o of n.rows)for(let a of o)r=r.concat(this.walkTokens(a.tokens,t));break}case"list":{let n=i;r=r.concat(this.walkTokens(n.items,t));break}default:{let n=i;this.defaults.extensions?.childTokens?.[n.type]?this.defaults.extensions.childTokens[n.type].forEach(o=>{let a=n[o].flat(1/0);r=r.concat(this.walkTokens(a,t))}):n.tokens&&(r=r.concat(this.walkTokens(n.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if("renderer"in n){let o=t.renderers[n.name];o?t.renderers[n.name]=function(...a){let l=n.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:t.renderers[n.name]=n.renderer}if("tokenizer"in n){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=t[n.level];o?o.unshift(n.tokenizer):t[n.level]=[n.tokenizer],n.start&&(n.level==="block"?t.startBlock?t.startBlock.push(n.start):t.startBlock=[n.start]:n.level==="inline"&&(t.startInline?t.startInline.push(n.start):t.startInline=[n.start]))}"childTokens"in n&&n.childTokens&&(t.childTokens[n.name]=n.childTokens)}),i.extensions=t),r.renderer){let n=this.defaults.renderer||new Nt(this.defaults);for(let o in r.renderer){if(!(o in n))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let a=o,l=r.renderer[a],d=n[a];n[a]=(...f)=>{let m=l.apply(n,f);return m===!1&&(m=d.apply(n,f)),m||""}}i.renderer=n}if(r.tokenizer){let n=this.defaults.tokenizer||new Bt(this.defaults);for(let o in r.tokenizer){if(!(o in n))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,l=r.tokenizer[a],d=n[a];n[a]=(...f)=>{let m=l.apply(n,f);return m===!1&&(m=d.apply(n,f)),m}}i.tokenizer=n}if(r.hooks){let n=this.defaults.hooks||new Dt;for(let o in r.hooks){if(!(o in n))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let a=o,l=r.hooks[a],d=n[a];Dt.passThroughHooks.has(o)?n[a]=f=>{if(this.defaults.async)return Promise.resolve(l.call(n,f)).then(E=>d.call(n,E));let m=l.call(n,f);return d.call(n,m)}:n[a]=(...f)=>{let m=l.apply(n,f);return m===!1&&(m=d.apply(n,f)),m}}i.hooks=n}if(r.walkTokens){let n=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),n&&(l=l.concat(n.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Pe.lex(e,t??this.defaults)}parser(e,t){return Ie.parse(e,t??this.defaults)}parseMarkdown(e){return(r,i)=>{let n={...i},o={...this.defaults,...n},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&n.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=e);let l=o.hooks?o.hooks.provideLexer():e?Pe.lex:Pe.lexInline,d=o.hooks?o.hooks.provideParser():e?Ie.parse:Ie.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(f=>l(f,o)).then(f=>o.hooks?o.hooks.processAllTokens(f):f).then(f=>o.walkTokens?Promise.all(this.walkTokens(f,o.walkTokens)).then(()=>f):f).then(f=>d(f,o)).then(f=>o.hooks?o.hooks.postprocess(f):f).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let f=l(r,o);o.hooks&&(f=o.hooks.processAllTokens(f)),o.walkTokens&&this.walkTokens(f,o.walkTokens);let m=d(f,o);return o.hooks&&(m=o.hooks.postprocess(m)),m}catch(f){return a(f)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+_e(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}}},pt=new yi;function V(s,e){return pt.parse(s,e)}V.options=V.setOptions=function(s){return pt.setOptions(s),V.defaults=pt.defaults,Ro(V.defaults),V};V.getDefaults=wi;V.defaults=mt;V.use=function(...s){return pt.use(...s),V.defaults=pt.defaults,Ro(V.defaults),V};V.walkTokens=function(s,e){return pt.walkTokens(s,e)};V.parseInline=pt.parseInline;V.Parser=Ie;V.parser=Ie.parse;V.Renderer=Nt;V.TextRenderer=mr;V.Lexer=Pe;V.lexer=Pe.lex;V.Tokenizer=Bt;V.Hooks=Dt;V.parse=V;var Km=V.options,Gm=V.setOptions,Xm=V.use,Ym=V.walkTokens,Zm=V.parseInline;var Qm=Ie.parse,Jm=Pe.lex;var ss=class extends D{connect(){this.easyMDE=new EasyMDE(this.#e()),this.element.setAttribute("data-action","turbo:morph-element->easymde#reconnect")}disconnect(){this.easyMDE.toTextArea(),this.easyMDE=null}reconnect(){this.disconnect(),this.connect()}#e(){let s={element:this.element,promptURLs:!0,spellChecker:!1,previewRender:e=>{let t=bi.sanitize(e,{ALLOWED_TAGS:["strong","em","sub","sup","details","summary"],ALLOWED_ATTR:[]}),r=V(t);return bi.sanitize(r,{USE_PROFILES:{html:!0}})}};return this.element.attributes.id.value&&(s.autosave={enabled:!0,uniqueId:this.element.attributes.id.value,delay:1e3}),s}};var is=class extends D{connect(){this.slimSelect=new SlimSelect({select:this.element}),this.element.setAttribute("data-action","turbo:morph-element->slim-select#reconnect")}disconnect(){this.slimSelect.destroy(),this.slimSelect=null}reconnect(){this.disconnect(),this.connect()}};var ns=class extends D{connect(){this.picker=new flatpickr(this.element,this.#e()),this.element.setAttribute("data-action","turbo:morph-element->flatpickr#reconnect")}disconnect(){this.picker.destroy(),this.picker=null}reconnect(){this.disconnect(),this.connect()}#e(){let s={altInput:!0};return this.element.attributes.type.value=="datetime-local"?s.enableTime=!0:this.element.attributes.type.value=="time"&&(s.enableTime=!0,s.noCalendar=!0),s}};var os=class extends D{static targets=["input"];connect(){}disconnect(){this.inputTargetDisconnected()}inputTargetConnected(){this.hasInputTarget&&(this.iti=window.intlTelInput(this.inputTarget,this.#e()),this.inputTarget.setAttribute("data-action","turbo:morph-element->intl-tel-input#reconnect"))}inputTargetDisconnected(){this.iti&&this.iti.destroy(),this.iti=null}reconnect(){this.inputTargetDisconnected(),this.inputTargetConnected()}#e(){return{strictMode:!0,hiddenInput:()=>({phone:this.inputTarget.attributes.name.value}),loadUtilsOnInit:"https://cdn.jsdelivr.net/npm/intl-tel-input@24.8.1/build/js/utils.js"}}};var as=class extends D{static targets=["select"];navigate(s){let e=this.selectTarget.value,t=document.createElement("a");t.href=e,this.element.appendChild(t),t.click(),t.remove()}};var ls=class extends D{static targets=["btn","tab"];static values={defaultTab:String,activeClasses:String,inActiveClasses:String};connect(){this.activeClasses=this.hasActiveClassesValue?this.activeClassesValue.split(" "):[],this.inActiveClasses=this.hasInActiveClassesValue?this.inActiveClassesValue.split(" "):[],this.#e(this.defaultTabValue||this.btnTargets[0].id)}select(s){this.#e(s.currentTarget.id)}#e(s){let e=this.btnTargets.find(r=>r.id===s);if(!e){console.error(`Tab Button with id "${s}" not found`);return}let t=this.tabTargets.find(r=>r.id===e.dataset.target);if(!t){console.error(`Tab Panel with id "${e.dataset.target}" not found`);return}this.tabTargets.forEach(r=>{r.hidden=!0,r.setAttribute("aria-hidden","true")}),this.btnTargets.forEach(r=>{r.setAttribute("aria-selected","false"),r.setAttribute("tabindex","-1"),r.classList.remove(...this.activeClasses),r.classList.add(...this.inActiveClasses)}),e.setAttribute("aria-selected","true"),e.setAttribute("tabindex","0"),e.classList.remove(...this.inActiveClasses),e.classList.add(...this.activeClasses),t.hidden=!1,t.setAttribute("aria-hidden","false"),e!==document.activeElement&&e.focus()}};function Li(s){s.register("header",Br),s.register("nested-resource-form-fields",Nr),s.register("form",_r),s.register("resource-drop-down",Ur),s.register("resource-collapse",jr),s.register("resource-dismiss",Kr),s.register("frame-navigator",Gr),s.register("color-mode",Xr),s.register("easymde",ss),s.register("slim-select",is),s.register("flatpickr",ns),s.register("intl-tel-input",os),s.register("select-navigator",as),s.register("resource-tab-list",ls)}(function(s){if(typeof s.requestSubmit=="function")return;s.requestSubmit=function(r){r?(e(r,this),r.click()):(r=document.createElement("input"),r.type="submit",r.hidden=!0,this.appendChild(r),r.click(),this.removeChild(r))};function e(r,i){r instanceof HTMLElement||t(TypeError,"parameter 1 is not of type 'HTMLElement'"),r.type=="submit"||t(TypeError,"The specified element is not a submit button"),r.form==i||t(DOMException,"The specified element is not owned by this form element","NotFoundError")}function t(r,i,n){throw new r("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+i+".",n)}})(HTMLFormElement.prototype);var Vo=new WeakMap;function eh(s){let e=s instanceof Element?s:s instanceof Node?s.parentElement:null,t=e?e.closest("input, button"):null;return t?.type=="submit"?t:null}function th(s){let e=eh(s.target);e&&e.form&&Vo.set(e.form,e)}(function(){if("submitter"in Event.prototype)return;let s=window.Event.prototype;if("SubmitEvent"in window){let e=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in e))s=e;else return}addEventListener("click",th,!0),Object.defineProperty(s,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return Vo.get(this.target)}})})();var Ht={eager:"eager",lazy:"lazy"},He=class s extends HTMLElement{static delegateConstructor=void 0;loaded=Promise.resolve();static get observedAttributes(){return["disabled","loading","src"]}constructor(){super(),this.delegate=new s.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(e){e=="loading"?this.delegate.loadingStyleChanged():e=="src"?this.delegate.sourceURLChanged():e=="disabled"&&this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(e){e?this.setAttribute("src",e):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(e){e?this.setAttribute("refresh",e):this.removeAttribute("refresh")}get loading(){return rh(this.getAttribute("loading")||"")}set loading(e){e?this.setAttribute("loading",e):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(e){e?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){return this.ownerDocument?.documentElement?.hasAttribute("data-turbo-preview")}};function rh(s){switch(s.toLowerCase()){case"lazy":return Ht.lazy;default:return Ht.eager}}function ae(s){return new URL(s.toString(),document.baseURI)}function vt(s){let e;if(s.hash)return s.hash.slice(1);if(e=s.href.match(/#(.*)$/))return e[1]}function sn(s,e){let t=e?.getAttribute("formaction")||s.getAttribute("action")||s.action;return ae(t)}function sh(s){return(lh(s).match(/\.[^.]*$/)||[])[0]||""}function ih(s){return!!sh(s).match(/^(?:|\.(?:htm|html|xhtml|php))$/)}function nh(s,e){let t=ch(e);return s.href===ae(t).href||s.href.startsWith(t)}function tt(s,e){return nh(s,e)&&ih(s)}function Ri(s){let e=vt(s);return e!=null?s.href.slice(0,-(e.length+1)):s.href}function cs(s){return Ri(s)}function oh(s,e){return ae(s).href==ae(e).href}function ah(s){return s.pathname.split("/").slice(1)}function lh(s){return ah(s).slice(-1)[0]}function ch(s){return hh(s.origin+s.pathname)}function hh(s){return s.endsWith("/")?s:s+"/"}var br=class{constructor(e){this.response=e}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return ae(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(e){return this.response.headers.get(e)}};function vr(s){if(s.getAttribute("data-turbo-eval")=="false")return s;{let e=document.createElement("script"),t=Wt("csp-nonce");return t&&(e.nonce=t),e.textContent=s.textContent,e.async=!1,uh(e,s),e}}function uh(s,e){for(let{name:t,value:r}of e.attributes)s.setAttribute(t,r)}function dh(s){let e=document.createElement("template");return e.innerHTML=s,e.content}function Z(s,{target:e,cancelable:t,detail:r}={}){let i=new CustomEvent(s,{cancelable:t,bubbles:!0,composed:!0,detail:r});return e&&e.isConnected?e.dispatchEvent(i):document.documentElement.dispatchEvent(i),i}function qt(){return document.visibilityState==="hidden"?Wo():zo()}function zo(){return new Promise(s=>requestAnimationFrame(()=>s()))}function Wo(){return new Promise(s=>setTimeout(()=>s(),0))}function fh(){return Promise.resolve()}function Uo(s=""){return new DOMParser().parseFromString(s,"text/html")}function jo(s,...e){let t=ph(s,e).replace(/^\n/,"").split(`
`),r=t[0].match(/^\s+/),i=r?r[0].length:0;return t.map(n=>n.slice(i)).join(`
`)}function ph(s,e){return s.reduce((t,r,i)=>{let n=e[i]==null?"":e[i];return t+r+n},"")}function rt(){return Array.from({length:36}).map((s,e)=>e==8||e==13||e==18||e==23?"-":e==14?"4":e==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function us(s,...e){for(let t of e.map(r=>r?.getAttribute(s)))if(typeof t=="string")return t;return null}function mh(s,...e){return e.some(t=>t&&t.hasAttribute(s))}function ds(...s){for(let e of s)e.localName=="turbo-frame"&&e.setAttribute("busy",""),e.setAttribute("aria-busy","true")}function fs(...s){for(let e of s)e.localName=="turbo-frame"&&e.removeAttribute("busy"),e.removeAttribute("aria-busy")}function gh(s,e=2e3){return new Promise(t=>{let r=()=>{s.removeEventListener("error",r),s.removeEventListener("load",r),t()};s.addEventListener("load",r,{once:!0}),s.addEventListener("error",r,{once:!0}),setTimeout(t,e)})}function Ko(s){switch(s){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function bh(s){return s=="advance"||s=="replace"||s=="restore"}function yt(...s){let e=us("data-turbo-action",...s);return bh(e)?e:null}function Go(s){return document.querySelector(`meta[name="${s}"]`)}function Wt(s){let e=Go(s);return e&&e.content}function vh(s,e){let t=Go(s);return t||(t=document.createElement("meta"),t.setAttribute("name",s),document.head.appendChild(t)),t.setAttribute("content",e),t}function Vt(s,e){if(s instanceof Element)return s.closest(e)||Vt(s.assignedSlot||s.getRootNode()?.host,e)}function nn(s){return!!s&&s.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof s.focus=="function"}function Xo(s){return Array.from(s.querySelectorAll("[autofocus]")).find(nn)}async function yh(s,e){let t=e();s(),await zo();let r=e();return[t,r]}function wh(s){if(s.hasAttribute("target")){for(let e of document.getElementsByName(s.target))if(e instanceof HTMLIFrameElement)return!1}return!0}function Eh(s){return Vt(s,"a[href]:not([target^=_]):not([download])")}function Yo(s){return ae(s.getAttribute("href")||"")}function Sh(s,e){let t=null;return(...r)=>{let i=()=>s.apply(this,r);clearTimeout(t),t=setTimeout(i,e)}}var Ci=class extends Set{constructor(e){super(),this.maxSize=e}add(e){if(this.size>=this.maxSize){let r=this.values().next().value;this.delete(r)}super.add(e)}},Zo=new Ci(20),Th=window.fetch;function Qo(s,e={}){let t=new Headers(e.headers||{}),r=rt();return Zo.add(r),t.append("X-Turbo-Request-Id",r),Th(s,{...e,headers:t})}function on(s){switch(s.toLowerCase()){case"get":return ke.get;case"post":return ke.post;case"put":return ke.put;case"patch":return ke.patch;case"delete":return ke.delete}}var ke={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function Ah(s){switch(s.toLowerCase()){case bt.multipart:return bt.multipart;case bt.plain:return bt.plain;default:return bt.urlEncoded}}var bt={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"},wt=class{abortController=new AbortController;#e=e=>{};constructor(e,t,r,i=new URLSearchParams,n=null,o=bt.urlEncoded){let[a,l]=No(ae(r),t,i,o);this.delegate=e,this.url=a,this.target=n,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:t,headers:{...this.defaultHeaders},body:l,signal:this.abortSignal,referrer:this.delegate.referrer?.href},this.enctype=o}get method(){return this.fetchOptions.method}set method(e){let t=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,r=on(e)||ke.get;this.url.search="";let[i,n]=No(this.url,r,t,this.enctype);this.url=i,this.fetchOptions.body=n,this.fetchOptions.method=r}get headers(){return this.fetchOptions.headers}set headers(e){this.fetchOptions.headers=e}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(e){this.fetchOptions.body=e}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){let{fetchOptions:e}=this;this.delegate.prepareRequest(this);let t=await this.#t(e);try{this.delegate.requestStarted(this),t.detail.fetchRequest?this.response=t.detail.fetchRequest.response:this.response=Qo(this.url.href,e);let r=await this.response;return await this.receive(r)}catch(r){if(r.name!=="AbortError")throw this.#r(r)&&this.delegate.requestErrored(this,r),r}finally{this.delegate.requestFinished(this)}}async receive(e){let t=new br(e);return Z("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:t},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,t):t.succeeded?this.delegate.requestSucceededWithResponse(this,t):this.delegate.requestFailedWithResponse(this,t),t}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return an(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(e){this.headers.Accept=[e,this.headers.Accept].join(", ")}async#t(e){let t=new Promise(i=>this.#e=i),r=Z("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:e,url:this.url,resume:this.#e},target:this.target});return this.url=r.detail.url,r.defaultPrevented&&await t,r}#r(e){return!Z("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:e}}).defaultPrevented}};function an(s){return on(s)==ke.get}function No(s,e,t,r){let i=Array.from(t).length>0?new URLSearchParams(Jo(t)):s.searchParams;return an(e)?[kh(s,i),null]:r==bt.urlEncoded?[s,i]:[s,t]}function Jo(s){let e=[];for(let[t,r]of s)r instanceof File||e.push([t,r]);return e}function kh(s,e){let t=new URLSearchParams(Jo(e));return s.search=t.toString(),s}var Oi=class{started=!1;constructor(e,t){this.delegate=e,this.element=t,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}intersect=e=>{e.slice(-1)[0]?.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)}},st=class{static contentType="text/vnd.turbo-stream.html";static wrap(e){return typeof e=="string"?new this(dh(e)):e}constructor(e){this.fragment=xh(e)}};function xh(s){for(let e of s.querySelectorAll("turbo-stream")){let t=document.importNode(e,!0);for(let r of t.templateElement.content.querySelectorAll("script"))r.replaceWith(vr(r));e.replaceWith(t)}return s}var Lh=100,Mi=class{#e=null;#t=null;get(e){if(this.#t&&this.#t.url===e&&this.#t.expire>Date.now())return this.#t.request}setLater(e,t,r){this.clear(),this.#e=setTimeout(()=>{t.perform(),this.set(e,t,r),this.#e=null},Lh)}set(e,t,r){this.#t={url:e,request:t,expire:new Date(new Date().getTime()+r)}}clear(){this.#e&&clearTimeout(this.#e),this.#t=null}},Rh=10*1e3,$t=new Mi,_t={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"},yr=class s{state=_t.initialized;static confirmMethod(e,t,r){return Promise.resolve(confirm(e))}constructor(e,t,r,i=!1){let n=Fh(t,r),o=Ih(Ph(t,r),n),a=Ch(t,r),l=Dh(t,r);this.delegate=e,this.formElement=t,this.submitter=r,this.fetchRequest=new wt(this,n,o,a,t,l),this.mustRedirect=i}get method(){return this.fetchRequest.method}set method(e){this.fetchRequest.method=e}get action(){return this.fetchRequest.url.toString()}set action(e){this.fetchRequest.url=ae(e)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){let{initialized:e,requesting:t}=_t,r=us("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof r=="string"&&!await s.confirmMethod(r,this.formElement,this.submitter))&&this.state==e)return this.state=t,this.fetchRequest.perform()}stop(){let{stopping:e,stopped:t}=_t;if(this.state!=e&&this.state!=t)return this.state=e,this.fetchRequest.cancel(),!0}prepareRequest(e){if(!e.isSafe){let t=Oh(Wt("csrf-param"))||Wt("csrf-token");t&&(e.headers["X-CSRF-Token"]=t)}this.requestAcceptsTurboStreamResponse(e)&&e.acceptResponseType(st.contentType)}requestStarted(e){this.state=_t.waiting,this.submitter?.setAttribute("disabled",""),this.setSubmitsWith(),ds(this.formElement),Z("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(e,t){$t.clear(),this.result={success:t.succeeded,fetchResponse:t}}requestSucceededWithResponse(e,t){if(t.clientError||t.serverError){this.delegate.formSubmissionFailedWithResponse(this,t);return}if($t.clear(),this.requestMustRedirect(e)&&Mh(t)){let r=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,r)}else this.state=_t.receiving,this.result={success:!0,fetchResponse:t},this.delegate.formSubmissionSucceededWithResponse(this,t)}requestFailedWithResponse(e,t){this.result={success:!1,fetchResponse:t},this.delegate.formSubmissionFailedWithResponse(this,t)}requestErrored(e,t){this.result={success:!1,error:t},this.delegate.formSubmissionErrored(this,t)}requestFinished(e){this.state=_t.stopped,this.submitter?.removeAttribute("disabled"),this.resetSubmitterText(),fs(this.formElement),Z("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){let e=this.submitter;this.originalSubmitText=e.value,e.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){let e=this.submitter;e.value=this.originalSubmitText}}}requestMustRedirect(e){return!e.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(e){return!e.isSafe||mh("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){return this.submitter?.getAttribute("data-turbo-submits-with")}};function Ch(s,e){let t=new FormData(s),r=e?.getAttribute("name"),i=e?.getAttribute("value");return r&&t.append(r,i||""),t}function Oh(s){if(s!=null){let t=(document.cookie?document.cookie.split("; "):[]).find(r=>r.startsWith(s));if(t){let r=t.split("=").slice(1).join("=");return r?decodeURIComponent(r):void 0}}}function Mh(s){return s.statusCode==200&&!s.redirected}function Ph(s,e){let t=typeof s.action=="string"?s.action:null;return e?.hasAttribute("formaction")?e.getAttribute("formaction")||"":s.getAttribute("action")||t||""}function Ih(s,e){let t=ae(s);return an(e)&&(t.search=""),t}function Fh(s,e){let t=e?.getAttribute("formmethod")||s.getAttribute("method")||"";return on(t.toLowerCase())||ke.get}function Dh(s,e){return Ah(e?.getAttribute("formenctype")||s.enctype)}var Ut=class{constructor(e){this.element=e}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(e){return this.getElementForAnchor(e)!=null}getElementForAnchor(e){return e?this.element.querySelector(`[id='${e}'], a[name='${e}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return Xo(this.element)}get permanentElements(){return ta(this.element)}getPermanentElementById(e){return ea(this.element,e)}getPermanentElementMapForSnapshot(e){let t={};for(let r of this.permanentElements){let{id:i}=r,n=e.getPermanentElementById(i);n&&(t[i]=[r,n])}return t}};function ea(s,e){return s.querySelector(`#${e}[data-turbo-permanent]`)}function ta(s){return s.querySelectorAll("[id][data-turbo-permanent]")}var wr=class{started=!1;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)};submitBubbled=e=>{if(!e.defaultPrevented){let t=e.target instanceof HTMLFormElement?e.target:void 0,r=e.submitter||void 0;t&&Bh(t,r)&&Nh(t,r)&&this.delegate.willSubmitForm(t,r)&&(e.preventDefault(),e.stopImmediatePropagation(),this.delegate.formSubmitted(t,r))}}};function Bh(s,e){return(e?.getAttribute("formmethod")||s.getAttribute("method"))!="dialog"}function Nh(s,e){if(e?.hasAttribute("formtarget")||s.hasAttribute("target")){let t=e?.getAttribute("formtarget")||s.target;for(let r of document.getElementsByName(t))if(r instanceof HTMLIFrameElement)return!1;return!0}else return!0}var ps=class{#e=e=>{};#t=e=>{};constructor(e,t){this.delegate=e,this.element=t}scrollToAnchor(e){let t=this.snapshot.getElementForAnchor(e);t?(this.scrollToElement(t),this.focusElement(t)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(e){this.scrollToAnchor(vt(e))}scrollToElement(e){e.scrollIntoView()}focusElement(e){e instanceof HTMLElement&&(e.hasAttribute("tabindex")?e.focus():(e.setAttribute("tabindex","-1"),e.focus(),e.removeAttribute("tabindex")))}scrollToPosition({x:e,y:t}){this.scrollRoot.scrollTo(e,t)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(e){let{isPreview:t,shouldRender:r,willRender:i,newSnapshot:n}=e,o=i;if(r)try{this.renderPromise=new Promise(f=>this.#e=f),this.renderer=e,await this.prepareToRenderSnapshot(e);let a=new Promise(f=>this.#t=f),l={resume:this.#t,render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(n,l)||await a,await this.renderSnapshot(e),this.delegate.viewRenderedSnapshot(n,t,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(e)}finally{delete this.renderer,this.#e(void 0),delete this.renderPromise}else o&&this.invalidate(e.reloadReason)}invalidate(e){this.delegate.viewInvalidated(e)}async prepareToRenderSnapshot(e){this.markAsPreview(e.isPreview),await e.prepareToRender()}markAsPreview(e){e?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(e){this.element.setAttribute("data-turbo-visit-direction",e)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(e){await e.render()}finishRenderingSnapshot(e){e.finishRendering()}},Pi=class extends ps{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new Ut(this.element)}},ms=class{constructor(e,t){this.delegate=e,this.element=t}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickBubbled=e=>{this.respondsToEventTarget(e.target)?this.clickEvent=e:delete this.clickEvent};linkClicked=e=>{this.clickEvent&&this.respondsToEventTarget(e.target)&&e.target instanceof Element&&this.delegate.shouldInterceptLinkClick(e.target,e.detail.url,e.detail.originalEvent)&&(this.clickEvent.preventDefault(),e.preventDefault(),this.delegate.linkClickIntercepted(e.target,e.detail.url,e.detail.originalEvent)),delete this.clickEvent};willVisit=e=>{delete this.clickEvent};respondsToEventTarget(e){let t=e instanceof Element?e:e instanceof Node?e.parentElement:null;return t&&t.closest("turbo-frame, html")==this.element}},gs=class{started=!1;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)};clickBubbled=e=>{if(e instanceof MouseEvent&&this.clickEventIsSignificant(e)){let t=e.composedPath&&e.composedPath()[0]||e.target,r=Eh(t);if(r&&wh(r)){let i=Yo(r);this.delegate.willFollowLinkToLocation(r,i,e)&&(e.preventDefault(),this.delegate.followedLinkToLocation(r,i))}}};clickEventIsSignificant(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}},bs=class{constructor(e,t){this.delegate=e,this.linkInterceptor=new gs(this,t)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(e,t){return!1}prefetchAndCacheRequestToLocation(e,t){}willFollowLinkToLocation(e,t,r){return this.delegate.willSubmitFormLinkToLocation(e,t,r)&&(e.hasAttribute("data-turbo-method")||e.hasAttribute("data-turbo-stream"))}followedLinkToLocation(e,t){let r=document.createElement("form"),i="hidden";for(let[m,E]of t.searchParams)r.append(Object.assign(document.createElement("input"),{type:i,name:m,value:E}));let n=Object.assign(t,{search:""});r.setAttribute("data-turbo","true"),r.setAttribute("action",n.href),r.setAttribute("hidden","");let o=e.getAttribute("data-turbo-method");o&&r.setAttribute("method",o);let a=e.getAttribute("data-turbo-frame");a&&r.setAttribute("data-turbo-frame",a);let l=yt(e);l&&r.setAttribute("data-turbo-action",l);let d=e.getAttribute("data-turbo-confirm");d&&r.setAttribute("data-turbo-confirm",d),e.hasAttribute("data-turbo-stream")&&r.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(e,t,r),document.body.appendChild(r),r.addEventListener("turbo:submit-end",()=>r.remove(),{once:!0}),requestAnimationFrame(()=>r.requestSubmit())}},vs=class{static async preservingPermanentElements(e,t,r){let i=new this(e,t);i.enter(),await r(),i.leave()}constructor(e,t){this.delegate=e,this.permanentElementMap=t}enter(){for(let e in this.permanentElementMap){let[t,r]=this.permanentElementMap[e];this.delegate.enteringBardo(t,r),this.replaceNewPermanentElementWithPlaceholder(r)}}leave(){for(let e in this.permanentElementMap){let[t]=this.permanentElementMap[e];this.replaceCurrentPermanentElementWithClone(t),this.replacePlaceholderWithPermanentElement(t),this.delegate.leavingBardo(t)}}replaceNewPermanentElementWithPlaceholder(e){let t=_h(e);e.replaceWith(t)}replaceCurrentPermanentElementWithClone(e){let t=e.cloneNode(!0);e.replaceWith(t)}replacePlaceholderWithPermanentElement(e){this.getPlaceholderById(e.id)?.replaceWith(e)}getPlaceholderById(e){return this.placeholders.find(t=>t.content==e)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}};function _h(s){let e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",s.id),e}var Er=class{#e=null;constructor(e,t,r,i,n=!0){this.currentSnapshot=e,this.newSnapshot=t,this.isPreview=i,this.willRender=n,this.renderElement=r,this.promise=new Promise((o,a)=>this.resolvingFunctions={resolve:o,reject:a})}get shouldRender(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(e){await vs.preservingPermanentElements(this,this.permanentElementMap,e)}focusFirstAutofocusableElement(){let e=this.connectedSnapshot.firstAutofocusableElement;e&&e.focus()}enteringBardo(e){this.#e||e.contains(this.currentSnapshot.activeElement)&&(this.#e=this.currentSnapshot.activeElement)}leavingBardo(e){e.contains(this.#e)&&this.#e instanceof HTMLElement&&(this.#e.focus(),this.#e=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}},Sr=class extends Er{static renderElement(e,t){let r=document.createRange();r.selectNodeContents(e),r.deleteContents();let i=t,n=i.ownerDocument?.createRange();n&&(n.selectNodeContents(i),e.appendChild(n.extractContents()))}constructor(e,t,r,i,n,o=!0){super(t,r,i,n,o),this.delegate=e}get shouldRender(){return!0}async render(){await qt(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await qt(),this.focusFirstAutofocusableElement(),await qt(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let e=this.currentElement.firstElementChild,t=Hh(this.currentElement.getAttribute("data-autoscroll-block"),"end"),r=$h(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(e)return e.scrollIntoView({block:t,behavior:r}),!0}return!1}activateScriptElements(){for(let e of this.newScriptElements){let t=vr(e);e.replaceWith(t)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}};function Hh(s,e){return s=="end"||s=="start"||s=="center"||s=="nearest"?s:e}function $h(s,e){return s=="auto"||s=="smooth"?s:e}var Ii=class s{static animationDuration=300;static get defaultCSS(){return jo`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${s.animationDuration}ms ease-out,
          opacity ${s.animationDuration/2}ms ${s.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}hiding=!1;value=0;visible=!1;constructor(){this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(e){this.value=e,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(e){this.progressElement.style.opacity="0",setTimeout(e,s.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,s.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}trickle=()=>{this.setValue(this.value+Math.random()/100)};refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){let e=document.createElement("style");return e.type="text/css",e.textContent=s.defaultCSS,this.cspNonce&&(e.nonce=this.cspNonce),e}createProgressElement(){let e=document.createElement("div");return e.className="turbo-progress-bar",e}get cspNonce(){return Wt("csp-nonce")}},Fi=class extends Ut{detailsByOuterHTML=this.children.filter(e=>!Wh(e)).map(e=>Kh(e)).reduce((e,t)=>{let{outerHTML:r}=t,i=r in e?e[r]:{type:qh(t),tracked:Vh(t),elements:[]};return{...e,[r]:{...i,elements:[...i.elements,t]}}},{});get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(e=>this.detailsByOuterHTML[e].tracked).join("")}getScriptElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("script",e)}getStylesheetElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",e)}getElementsMatchingTypeNotInSnapshot(e,t){return Object.keys(this.detailsByOuterHTML).filter(r=>!(r in t.detailsByOuterHTML)).map(r=>this.detailsByOuterHTML[r]).filter(({type:r})=>r==e).map(({elements:[r]})=>r)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((e,t)=>{let{type:r,tracked:i,elements:n}=this.detailsByOuterHTML[t];return r==null&&!i?[...e,...n]:n.length>1?[...e,...n.slice(1)]:e},[])}getMetaValue(e){let t=this.findMetaElementByName(e);return t?t.getAttribute("content"):null}findMetaElementByName(e){return Object.keys(this.detailsByOuterHTML).reduce((t,r)=>{let{elements:[i]}=this.detailsByOuterHTML[r];return jh(i,e)?i:t},void 0|void 0)}};function qh(s){if(zh(s))return"script";if(Uh(s))return"stylesheet"}function Vh(s){return s.getAttribute("data-turbo-track")=="reload"}function zh(s){return s.localName=="script"}function Wh(s){return s.localName=="noscript"}function Uh(s){let e=s.localName;return e=="style"||e=="link"&&s.getAttribute("rel")=="stylesheet"}function jh(s,e){return s.localName=="meta"&&s.getAttribute("name")==e}function Kh(s){return s.hasAttribute("nonce")&&s.setAttribute("nonce",""),s}var Fe=class s extends Ut{static fromHTMLString(e=""){return this.fromDocument(Uo(e))}static fromElement(e){return this.fromDocument(e.ownerDocument)}static fromDocument({documentElement:e,body:t,head:r}){return new this(e,t,new Fi(r))}constructor(e,t,r){super(t),this.documentElement=e,this.headSnapshot=r}clone(){let e=this.element.cloneNode(!0),t=this.element.querySelectorAll("select"),r=e.querySelectorAll("select");for(let[i,n]of t.entries()){let o=r[i];for(let a of o.selectedOptions)a.selected=!1;for(let a of n.selectedOptions)o.options[a.index].selected=!0}for(let i of e.querySelectorAll('input[type="password"]'))i.value="";return new s(this.documentElement,e,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){let e=this.getSetting("root")??"/";return ae(e)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return this.headSnapshot.getMetaValue("view-transition")==="same-origin"}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(e){return this.headSnapshot.getMetaValue(`turbo-${e}`)}},Di=class{#e=!1;#t=Promise.resolve();renderChange(e,t){return e&&this.viewTransitionsAvailable&&!this.#e?(this.#e=!0,this.#t=this.#t.then(async()=>{await document.startViewTransition(t).finished})):this.#t=this.#t.then(t),this.#t}get viewTransitionsAvailable(){return document.startViewTransition}},Gh={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},hs={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},Ze={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},zt={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},Xh={advance:"forward",restore:"back",replace:"none"},Bi=class{identifier=rt();timingMetrics={};followedRedirect=!1;historyChanged=!1;scrolled=!1;shouldCacheSnapshot=!0;acceptsStreamResponse=!1;snapshotCached=!1;state=Ze.initialized;viewTransitioner=new Di;constructor(e,t,r,i={}){this.delegate=e,this.location=t,this.restorationIdentifier=r||rt();let{action:n,historyChanged:o,referrer:a,snapshot:l,snapshotHTML:d,response:f,visitCachedSnapshot:m,willRender:E,updateHistory:b,shouldCacheSnapshot:R,acceptsStreamResponse:S,direction:k}={...Gh,...i};this.action=n,this.historyChanged=o,this.referrer=a,this.snapshot=l,this.snapshotHTML=d,this.response=f,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=m,this.willRender=E,this.updateHistory=b,this.scrolled=!E,this.shouldCacheSnapshot=R,this.acceptsStreamResponse=S,this.direction=k||Xh[n]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==Ze.initialized&&(this.recordTimingMetric(hs.visitStart),this.state=Ze.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==Ze.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=Ze.canceled)}complete(){this.state==Ze.started&&(this.recordTimingMetric(hs.visitEnd),this.adapter.visitCompleted(this),this.state=Ze.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==Ze.started&&(this.state=Ze.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){if(!this.historyChanged&&this.updateHistory){let e=this.location.href===this.referrer?.href?"replace":this.action,t=Ko(e);this.history.update(t,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new wt(this,ke.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(hs.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(e=this.response){if(this.response=e,e){let{statusCode:t}=e;_o(t)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,t)}}finishRequest(){this.recordTimingMetric(hs.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:e,responseHTML:t}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,_o(e)&&t!=null){let r=Fe.fromHTMLString(t);await this.renderPageSnapshot(r,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(Fe.fromHTMLString(t),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){let e=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(e&&(!vt(this.location)||e.hasAnchor(vt(this.location)))&&(this.action=="restore"||e.isPreviewable))return e}getPreloadedSnapshot(){if(this.snapshotHTML)return Fe.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){let e=this.getCachedSnapshot();if(e){let t=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage||this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(e,t),this.adapter.visitRendered(this),t||this.complete())})}}followRedirect(){this.redirectedToLocation&&!this.followedRedirect&&this.response?.redirected&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(e){this.acceptsStreamResponse&&e.acceptResponseType(st.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(e,t){}async requestSucceededWithResponse(e,t){let r=await t.responseHTML,{redirected:i,statusCode:n}=t;r==null?this.recordResponse({statusCode:zt.contentTypeMismatch,redirected:i}):(this.redirectedToLocation=t.redirected?t.location:void 0,this.recordResponse({statusCode:n,responseHTML:r,redirected:i}))}async requestFailedWithResponse(e,t){let r=await t.responseHTML,{redirected:i,statusCode:n}=t;r==null?this.recordResponse({statusCode:zt.contentTypeMismatch,redirected:i}):this.recordResponse({statusCode:n,responseHTML:r,redirected:i})}requestErrored(e,t){this.recordResponse({statusCode:zt.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:e}=this.restorationData;if(e)return this.view.scrollToPosition(e),!0}scrollToAnchor(){let e=vt(this.location);if(e!=null)return this.view.scrollToAnchor(e),!0}recordTimingMetric(e){this.timingMetrics[e]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}getHistoryMethodForAction(e){switch(e){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(e=>e&&this.visitCachedSnapshot(e)),this.snapshotCached=!0)}async render(e){this.cancelRender(),this.frame=await qt(),await e(),delete this.frame}async renderPageSnapshot(e,t){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(e),async()=>{await this.view.renderPage(e,t,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}};function _o(s){return s>=200&&s<300}var Ni=class{progressBar=new Ii;constructor(e){this.session=e}visitProposedToLocation(e,t){tt(e,this.navigator.rootLocation)?this.navigator.startVisit(e,t?.restorationIdentifier||rt(),t):window.location.href=e.toString()}visitStarted(e){this.location=e.location,e.loadCachedSnapshot(),e.issueRequest(),e.goToSamePageAnchor()}visitRequestStarted(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||e.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(e){e.loadResponse()}visitRequestFailedWithStatusCode(e,t){switch(t){case zt.networkFailure:case zt.timeoutFailure:case zt.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:t}});default:return e.loadResponse()}}visitRequestFinished(e){}visitCompleted(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(e){this.reload(e)}visitFailed(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(e){}formSubmissionStarted(e){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(e){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}showProgressBar=()=>{this.progressBar.show()};reload(e){Z("turbo:reload",{detail:e}),window.location.href=this.location?.toString()||window.location.href}get navigator(){return this.session.navigator}},_i=class{selector="[data-turbo-temporary]";deprecatedSelector="[data-turbo-cache=false]";started=!1;start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}removeTemporaryElements=e=>{for(let t of this.temporaryElements)t.remove()};get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){let e=document.querySelectorAll(this.deprecatedSelector);return e.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...e]}},Hi=class{constructor(e,t){this.session=e,this.element=t,this.linkInterceptor=new ms(this,t),this.formSubmitObserver=new wr(this,t)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(e,t,r){return this.#t(e)}linkClickIntercepted(e,t,r){let i=this.#r(e);i&&i.delegate.linkClickIntercepted(e,t,r)}willSubmitForm(e,t){return e.closest("turbo-frame")==null&&this.#e(e,t)&&this.#t(e,t)}formSubmitted(e,t){let r=this.#r(e,t);r&&r.delegate.formSubmitted(e,t)}#e(e,t){let r=sn(e,t),i=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),n=ae(i?.content??"/");return this.#t(e,t)&&tt(r,n)}#t(e,t){if(e instanceof HTMLFormElement?this.session.submissionIsNavigatable(e,t):this.session.elementIsNavigatable(e)){let i=this.#r(e,t);return i?i!=e.closest("turbo-frame"):!1}else return!1}#r(e,t){let r=t?.getAttribute("data-turbo-frame")||e.getAttribute("data-turbo-frame");if(r&&r!="_top"){let i=this.element.querySelector(`#${r}:not([disabled])`);if(i instanceof He)return i}}},$i=class{location;restorationIdentifier=rt();restorationData={};started=!1;pageLoaded=!1;currentIndex=0;constructor(e){this.delegate=e}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=history.state?.turbo?.restorationIndex||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(e,t){this.update(history.pushState,e,t)}replace(e,t){this.update(history.replaceState,e,t)}update(e,t,r=rt()){e===history.pushState&&++this.currentIndex;let i={turbo:{restorationIdentifier:r,restorationIndex:this.currentIndex}};e.call(history,i,"",t.href),this.location=t,this.restorationIdentifier=r}getRestorationDataForIdentifier(e){return this.restorationData[e]||{}}updateRestorationData(e){let{restorationIdentifier:t}=this,r=this.restorationData[t];this.restorationData[t]={...r,...e}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}onPopState=e=>{if(this.shouldHandlePopState()){let{turbo:t}=e.state||{};if(t){this.location=new URL(window.location.href);let{restorationIdentifier:r,restorationIndex:i}=t;this.restorationIdentifier=r;let n=i>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,r,n),this.currentIndex=i}}};onPageLoad=async e=>{await fh(),this.pageLoaded=!0};shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}},qi=class{started=!1;#e=null;constructor(e,t){this.delegate=e,this.eventTarget=t}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",this.#t,{once:!0}):this.#t())}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",this.#r,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",this.#i,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",this.#s,!0),this.started=!1)}#t=()=>{this.eventTarget.addEventListener("mouseenter",this.#r,{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",this.#i,{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",this.#s,!0),this.started=!0};#r=e=>{if(Wt("turbo-prefetch")==="false")return;let t=e.target;if(t.matches&&t.matches("a[href]:not([target^=_]):not([download])")&&this.#a(t)){let i=t,n=Yo(i);if(this.delegate.canPrefetchRequestToLocation(i,n)){this.#e=i;let o=new wt(this,ke.get,n,new URLSearchParams,t);$t.setLater(n.toString(),o,this.#o)}}};#i=e=>{e.target===this.#e&&this.#n()};#n=()=>{$t.clear(),this.#e=null};#s=e=>{if(e.target.tagName!=="FORM"&&e.detail.fetchOptions.method==="get"){let t=$t.get(e.detail.url.toString());t&&(e.detail.fetchRequest=t),$t.clear()}};prepareRequest(e){let t=e.target;e.headers["X-Sec-Purpose"]="prefetch";let r=t.closest("turbo-frame"),i=t.getAttribute("data-turbo-frame")||r?.getAttribute("target")||r?.id;i&&i!=="_top"&&(e.headers["Turbo-Frame"]=i)}requestSucceededWithResponse(){}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}get#o(){return Number(Wt("turbo-prefetch-cache-time"))||Rh}#a(e){return!(!e.getAttribute("href")||Yh(e)||Zh(e)||Qh(e)||Jh(e)||tu(e))}},Yh=s=>s.origin!==document.location.origin||!["http:","https:"].includes(s.protocol)||s.hasAttribute("target"),Zh=s=>s.pathname+s.search===document.location.pathname+document.location.search||s.href.startsWith("#"),Qh=s=>{if(s.getAttribute("data-turbo-prefetch")==="false"||s.getAttribute("data-turbo")==="false")return!0;let e=Vt(s,"[data-turbo-prefetch]");return!!(e&&e.getAttribute("data-turbo-prefetch")==="false")},Jh=s=>{let e=s.getAttribute("data-turbo-method");return!!(e&&e.toLowerCase()!=="get"||eu(s)||s.hasAttribute("data-turbo-confirm")||s.hasAttribute("data-turbo-stream"))},eu=s=>s.hasAttribute("data-remote")||s.hasAttribute("data-behavior")||s.hasAttribute("data-confirm")||s.hasAttribute("data-method"),tu=s=>Z("turbo:before-prefetch",{target:s,cancelable:!0}).defaultPrevented,Vi=class{constructor(e){this.delegate=e}proposeVisit(e,t={}){this.delegate.allowsVisitingLocationWithAction(e,t.action)&&this.delegate.visitProposedToLocation(e,t)}startVisit(e,t,r={}){this.stop(),this.currentVisit=new Bi(this,ae(e),t,{referrer:this.location,...r}),this.currentVisit.start()}submitForm(e,t){this.stop(),this.formSubmission=new yr(this,e,t,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(e){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(e)}async formSubmissionSucceededWithResponse(e,t){if(e==this.formSubmission){let r=await t.responseHTML;if(r){let i=e.isSafe;i||this.view.clearSnapshotCache();let{statusCode:n,redirected:o}=t,l={action:this.#e(e,t),shouldCacheSnapshot:i,response:{statusCode:n,responseHTML:r,redirected:o}};this.proposeVisit(t.location,l)}}}async formSubmissionFailedWithResponse(e,t){let r=await t.responseHTML;if(r){let i=Fe.fromHTMLString(r);t.serverError?await this.view.renderError(i,this.currentVisit):await this.view.renderPage(i,!1,!0,this.currentVisit),i.shouldPreserveScrollPosition||this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished(e){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(e)}visitStarted(e){this.delegate.visitStarted(e)}visitCompleted(e){this.delegate.visitCompleted(e)}locationWithActionIsSamePage(e,t){let r=vt(e),i=vt(this.view.lastRenderedLocation),n=t==="restore"&&typeof r>"u";return t!=="replace"&&Ri(e)===Ri(this.view.lastRenderedLocation)&&(n||r!=null&&r!==i)}visitScrolledToSamePageLocation(e,t){this.delegate.visitScrolledToSamePageLocation(e,t)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}#e(e,t){let{submitter:r,formElement:i}=e;return yt(r,i)||this.#t(t)}#t(e){return e.redirected&&e.location.href===this.location?.href?"replace":"advance"}},gt={initial:0,loading:1,interactive:2,complete:3},zi=class{stage=gt.initial;started=!1;constructor(e){this.delegate=e}start(){this.started||(this.stage==gt.initial&&(this.stage=gt.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}interpretReadyState=()=>{let{readyState:e}=this;e=="interactive"?this.pageIsInteractive():e=="complete"&&this.pageIsComplete()};pageIsInteractive(){this.stage==gt.loading&&(this.stage=gt.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==gt.interactive&&(this.stage=gt.complete,this.delegate.pageLoaded())}pageWillUnload=()=>{this.delegate.pageWillUnload()};get readyState(){return document.readyState}},Wi=class{started=!1;constructor(e){this.delegate=e}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})};updatePosition(e){this.delegate.scrollPositionChanged(e)}},Ui=class{render({fragment:e}){vs.preservingPermanentElements(this,ru(e),()=>{su(e,()=>{iu(()=>{document.documentElement.appendChild(e)})})})}enteringBardo(e,t){t.replaceWith(e.cloneNode(!0))}leavingBardo(){}};function ru(s){let e=ta(document.documentElement),t={};for(let r of e){let{id:i}=r;for(let n of s.querySelectorAll("turbo-stream")){let o=ea(n.templateElement.content,i);o&&(t[i]=[r,o])}}return t}async function su(s,e){let t=`turbo-stream-autofocus-${rt()}`,r=s.querySelectorAll("turbo-stream"),i=nu(r),n=null;if(i&&(i.id?n=i.id:n=t,i.id=n),e(),await qt(),(document.activeElement==null||document.activeElement==document.body)&&n){let a=document.getElementById(n);nn(a)&&a.focus(),a&&a.id==t&&a.removeAttribute("id")}}async function iu(s){let[e,t]=await yh(s,()=>document.activeElement),r=e&&e.id;if(r){let i=document.getElementById(r);nn(i)&&i!=t&&i.focus()}}function nu(s){for(let e of s){let t=Xo(e.templateElement.content);if(t)return t}return null}var ji=class{sources=new Set;#e=!1;constructor(e){this.delegate=e}start(){this.#e||(this.#e=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.#e&&(this.#e=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(e){this.streamSourceIsConnected(e)||(this.sources.add(e),e.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(e){this.streamSourceIsConnected(e)&&(this.sources.delete(e),e.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(e){return this.sources.has(e)}inspectFetchResponse=e=>{let t=ou(e);t&&au(t)&&(e.preventDefault(),this.receiveMessageResponse(t))};receiveMessageEvent=e=>{this.#e&&typeof e.data=="string"&&this.receiveMessageHTML(e.data)};async receiveMessageResponse(e){let t=await e.responseHTML;t&&this.receiveMessageHTML(t)}receiveMessageHTML(e){this.delegate.receivedMessageFromStream(st.wrap(e))}};function ou(s){let e=s.detail?.fetchResponse;if(e instanceof br)return e}function au(s){return(s.contentType??"").startsWith(st.contentType)}var ys=class extends Er{static renderElement(e,t){let{documentElement:r,body:i}=document;r.replaceChild(t,i)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){let{documentElement:e,head:t}=document;e.replaceChild(this.newHead,t),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let e of this.scriptElements){let t=e.parentNode;if(t){let r=vr(e);t.replaceChild(r,e)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}},lu=function(){let s=new Set,e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:E,afterNodeAdded:E,beforeNodeMorphed:E,afterNodeMorphed:E,beforeNodeRemoved:E,afterNodeRemoved:E,beforeAttributeUpdated:E},head:{style:"merge",shouldPreserve:function(h){return h.getAttribute("im-preserve")==="true"},shouldReAppend:function(h){return h.getAttribute("im-re-append")==="true"},shouldRemove:E,afterHeadMorphed:E}};function t(h,u,p={}){h instanceof Document&&(h=h.documentElement),typeof u=="string"&&(u=A(u));let y=O(u),w=R(h,y,p);return r(h,y,w)}function r(h,u,p){if(p.head.block){let y=h.querySelector("head"),w=u.querySelector("head");if(y&&w){let v=m(w,y,p);Promise.all(v).then(function(){r(h,u,Object.assign(p,{head:{block:!1,ignore:!0}}))});return}}if(p.morphStyle==="innerHTML")return o(u,h,p),h.children;if(p.morphStyle==="outerHTML"||p.morphStyle==null){let y=P(u,h,p),w=y?.previousSibling,v=y?.nextSibling,C=n(h,y,p);return y?x(w,C,v):[]}else throw"Do not understand how to morph style "+p.morphStyle}function i(h,u){return u.ignoreActiveValue&&h===document.activeElement&&h!==document.body}function n(h,u,p){if(!(p.ignoreActive&&h===document.activeElement))return u==null?p.callbacks.beforeNodeRemoved(h)===!1?h:(h.remove(),p.callbacks.afterNodeRemoved(h),null):k(h,u)?(p.callbacks.beforeNodeMorphed(h,u)===!1||(h instanceof HTMLHeadElement&&p.head.ignore||(h instanceof HTMLHeadElement&&p.head.style!=="morph"?m(u,h,p):(l(u,h,p),i(h,p)||o(u,h,p))),p.callbacks.afterNodeMorphed(h,u)),h):p.callbacks.beforeNodeRemoved(h)===!1||p.callbacks.beforeNodeAdded(u)===!1?h:(h.parentElement.replaceChild(u,h),p.callbacks.afterNodeAdded(u),p.callbacks.afterNodeRemoved(h),u)}function o(h,u,p){let y=h.firstChild,w=u.firstChild,v;for(;y;){if(v=y,y=v.nextSibling,w==null){if(p.callbacks.beforeNodeAdded(v)===!1)return;u.appendChild(v),p.callbacks.afterNodeAdded(v),X(p,v);continue}if(S(v,w,p)){n(w,v,p),w=w.nextSibling,X(p,v);continue}let C=H(h,u,v,w,p);if(C){w=I(w,C,p),n(C,v,p),X(p,v);continue}let M=B(h,u,v,w,p);if(M){w=I(w,M,p),n(M,v,p),X(p,v);continue}if(p.callbacks.beforeNodeAdded(v)===!1)return;u.insertBefore(v,w),p.callbacks.afterNodeAdded(v),X(p,v)}for(;w!==null;){let C=w;w=w.nextSibling,W(C,p)}}function a(h,u,p,y){return h==="value"&&y.ignoreActiveValue&&u===document.activeElement?!0:y.callbacks.beforeAttributeUpdated(h,u,p)===!1}function l(h,u,p){let y=h.nodeType;if(y===1){let w=h.attributes,v=u.attributes;for(let C of w)a(C.name,u,"update",p)||u.getAttribute(C.name)!==C.value&&u.setAttribute(C.name,C.value);for(let C=v.length-1;0<=C;C--){let M=v[C];a(M.name,u,"remove",p)||h.hasAttribute(M.name)||u.removeAttribute(M.name)}}(y===8||y===3)&&u.nodeValue!==h.nodeValue&&(u.nodeValue=h.nodeValue),i(u,p)||f(h,u,p)}function d(h,u,p,y){if(h[p]!==u[p]){let w=a(p,u,"update",y);w||(u[p]=h[p]),h[p]?w||u.setAttribute(p,h[p]):a(p,u,"remove",y)||u.removeAttribute(p)}}function f(h,u,p){if(h instanceof HTMLInputElement&&u instanceof HTMLInputElement&&h.type!=="file"){let y=h.value,w=u.value;d(h,u,"checked",p),d(h,u,"disabled",p),h.hasAttribute("value")?y!==w&&(a("value",u,"update",p)||(u.setAttribute("value",y),u.value=y)):a("value",u,"remove",p)||(u.value="",u.removeAttribute("value"))}else if(h instanceof HTMLOptionElement)d(h,u,"selected",p);else if(h instanceof HTMLTextAreaElement&&u instanceof HTMLTextAreaElement){let y=h.value,w=u.value;if(a("value",u,"update",p))return;y!==w&&(u.value=y),u.firstChild&&u.firstChild.nodeValue!==y&&(u.firstChild.nodeValue=y)}}function m(h,u,p){let y=[],w=[],v=[],C=[],M=p.head.style,le=new Map;for(let q of h.children)le.set(q.outerHTML,q);for(let q of u.children){let se=le.has(q.outerHTML),ue=p.head.shouldReAppend(q),Le=p.head.shouldPreserve(q);se||Le?ue?w.push(q):(le.delete(q.outerHTML),v.push(q)):M==="append"?ue&&(w.push(q),C.push(q)):p.head.shouldRemove(q)!==!1&&w.push(q)}C.push(...le.values());let _=[];for(let q of C){let se=document.createRange().createContextualFragment(q.outerHTML).firstChild;if(p.callbacks.beforeNodeAdded(se)!==!1){if(se.href||se.src){let ue=null,Le=new Promise(function(Et){ue=Et});se.addEventListener("load",function(){ue()}),_.push(Le)}u.appendChild(se),p.callbacks.afterNodeAdded(se),y.push(se)}}for(let q of w)p.callbacks.beforeNodeRemoved(q)!==!1&&(u.removeChild(q),p.callbacks.afterNodeRemoved(q));return p.head.afterHeadMorphed(u,{added:y,kept:v,removed:w}),_}function E(){}function b(h){let u={};return Object.assign(u,e),Object.assign(u,h),u.callbacks={},Object.assign(u.callbacks,e.callbacks),Object.assign(u.callbacks,h.callbacks),u.head={},Object.assign(u.head,e.head),Object.assign(u.head,h.head),u}function R(h,u,p){return p=b(p),{target:h,newContent:u,config:p,morphStyle:p.morphStyle,ignoreActive:p.ignoreActive,ignoreActiveValue:p.ignoreActiveValue,idMap:xe(h,u),deadIds:new Set,callbacks:p.callbacks,head:p.head}}function S(h,u,p){return h==null||u==null?!1:h.nodeType===u.nodeType&&h.tagName===u.tagName?h.id!==""&&h.id===u.id?!0:U(p,h,u)>0:!1}function k(h,u){return h==null||u==null?!1:h.nodeType===u.nodeType&&h.tagName===u.tagName}function I(h,u,p){for(;h!==u;){let y=h;h=h.nextSibling,W(y,p)}return X(p,u),u.nextSibling}function H(h,u,p,y,w){let v=U(w,p,u),C=null;if(v>0){let M=y,le=0;for(;M!=null;){if(S(p,M,w))return M;if(le+=U(w,M,h),le>v)return null;M=M.nextSibling}}return C}function B(h,u,p,y,w){let v=y,C=p.nextSibling,M=0;for(;v!=null;){if(U(w,v,h)>0)return null;if(k(p,v))return v;if(k(C,v)&&(M++,C=C.nextSibling,M>=2))return null;v=v.nextSibling}return v}function A(h){let u=new DOMParser,p=h.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(p.match(/<\/html>/)||p.match(/<\/head>/)||p.match(/<\/body>/)){let y=u.parseFromString(h,"text/html");if(p.match(/<\/html>/))return y.generatedByIdiomorph=!0,y;{let w=y.firstChild;return w?(w.generatedByIdiomorph=!0,w):null}}else{let w=u.parseFromString("<body><template>"+h+"</template></body>","text/html").body.querySelector("template").content;return w.generatedByIdiomorph=!0,w}}function O(h){if(h==null)return document.createElement("div");if(h.generatedByIdiomorph)return h;if(h instanceof Node){let u=document.createElement("div");return u.append(h),u}else{let u=document.createElement("div");for(let p of[...h])u.append(p);return u}}function x(h,u,p){let y=[],w=[];for(;h!=null;)y.push(h),h=h.previousSibling;for(;y.length>0;){let v=y.pop();w.push(v),u.parentElement.insertBefore(v,u)}for(w.push(u);p!=null;)y.push(p),w.push(p),p=p.nextSibling;for(;y.length>0;)u.parentElement.insertBefore(y.pop(),u.nextSibling);return w}function P(h,u,p){let y;y=h.firstChild;let w=y,v=0;for(;y;){let C=N(y,u,p);C>v&&(w=y,v=C),y=y.nextSibling}return w}function N(h,u,p){return k(h,u)?.5+U(p,h,u):0}function W(h,u){X(u,h),u.callbacks.beforeNodeRemoved(h)!==!1&&(h.remove(),u.callbacks.afterNodeRemoved(h))}function G(h,u){return!h.deadIds.has(u)}function $(h,u,p){return(h.idMap.get(p)||s).has(u)}function X(h,u){let p=h.idMap.get(u)||s;for(let y of p)h.deadIds.add(y)}function U(h,u,p){let y=h.idMap.get(u)||s,w=0;for(let v of y)G(h,v)&&$(h,v,p)&&++w;return w}function ve(h,u){let p=h.parentElement,y=h.querySelectorAll("[id]");for(let w of y){let v=w;for(;v!==p&&v!=null;){let C=u.get(v);C==null&&(C=new Set,u.set(v,C)),C.add(w.id),v=v.parentElement}}}function xe(h,u){let p=new Map;return ve(h,p),ve(u,p),p}return{morph:t,defaults:e}}(),jt=class extends Er{static renderElement(e,t){document.body&&t instanceof HTMLBodyElement?document.body.replaceWith(t):document.documentElement.appendChild(t)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){this.#e(),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}#e(){let{documentElement:e}=this.currentSnapshot,{lang:t}=this.newSnapshot;t?e.setAttribute("lang",t):e.removeAttribute("lang")}async mergeHead(){let e=this.mergeProvisionalElements(),t=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await e,await t,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){let e=[];for(let t of this.newHeadStylesheetElements)e.push(gh(t)),document.head.appendChild(t);await Promise.all(e)}copyNewHeadScriptElements(){for(let e of this.newHeadScriptElements)document.head.appendChild(vr(e))}removeUnusedDynamicStylesheetElements(){for(let e of this.unusedDynamicStylesheetElements)document.head.removeChild(e)}async mergeProvisionalElements(){let e=[...this.newHeadProvisionalElements];for(let t of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(t,e)||document.head.removeChild(t);for(let t of e)document.head.appendChild(t)}isCurrentElementInElementList(e,t){for(let[r,i]of t.entries()){if(e.tagName=="TITLE"){if(i.tagName!="TITLE")continue;if(e.innerHTML==i.innerHTML)return t.splice(r,1),!0}if(i.isEqualNode(e))return t.splice(r,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(let e of this.currentHeadProvisionalElements)document.head.removeChild(e)}copyNewHeadProvisionalElements(){for(let e of this.newHeadProvisionalElements)document.head.appendChild(e)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let e of this.newBodyScriptElements){let t=vr(e);e.replaceWith(t)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(e=>e.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}},Ki=class extends jt{async render(){this.willRender&&await this.#e()}get renderMethod(){return"morph"}async#e(){this.#t(this.currentElement,this.newElement),this.#a(),Z("turbo:morph",{detail:{currentElement:this.currentElement,newElement:this.newElement}})}#t(e,t,r="outerHTML"){this.isMorphingTurboFrame=this.#l(e),lu.morph(e,t,{morphStyle:r,callbacks:{beforeNodeAdded:this.#r,beforeNodeMorphed:this.#i,beforeAttributeUpdated:this.#n,beforeNodeRemoved:this.#o,afterNodeMorphed:this.#s}})}#r=e=>!(e.id&&e.hasAttribute("data-turbo-permanent")&&document.getElementById(e.id));#i=(e,t)=>{if(e instanceof HTMLElement)return!e.hasAttribute("data-turbo-permanent")&&(this.isMorphingTurboFrame||!this.#l(e))?!Z("turbo:before-morph-element",{cancelable:!0,target:e,detail:{newElement:t}}).defaultPrevented:!1};#n=(e,t,r)=>!Z("turbo:before-morph-attribute",{cancelable:!0,target:t,detail:{attributeName:e,mutationType:r}}).defaultPrevented;#s=(e,t)=>{t instanceof HTMLElement&&Z("turbo:morph-element",{target:e,detail:{newElement:t}})};#o=e=>this.#i(e);#a(){this.#d().forEach(e=>{this.#l(e)&&(this.#h(e),e.reload())})}#h(e){e.addEventListener("turbo:before-frame-render",t=>{t.detail.render=this.#u},{once:!0})}#u=(e,t)=>{Z("turbo:before-frame-morph",{target:e,detail:{currentElement:e,newElement:t}}),this.#t(e,t.children,"innerHTML")};#l(e){return e.src&&e.refresh==="morph"}#d(){return Array.from(document.querySelectorAll("turbo-frame[src]")).filter(e=>!e.closest("[data-turbo-permanent]"))}},Gi=class{keys=[];snapshots={};constructor(e){this.size=e}has(e){return cs(e)in this.snapshots}get(e){if(this.has(e)){let t=this.read(e);return this.touch(e),t}}put(e,t){return this.write(e,t),this.touch(e),t}clear(){this.snapshots={}}read(e){return this.snapshots[cs(e)]}write(e,t){this.snapshots[cs(e)]=t}touch(e){let t=cs(e),r=this.keys.indexOf(t);r>-1&&this.keys.splice(r,1),this.keys.unshift(t),this.trim()}trim(){for(let e of this.keys.splice(this.size))delete this.snapshots[e]}},Xi=class extends ps{snapshotCache=new Gi(10);lastRenderedLocation=new URL(location.href);forceReloaded=!1;shouldTransitionTo(e){return this.snapshot.prefersViewTransitions&&e.prefersViewTransitions}renderPage(e,t=!1,r=!0,i){let o=this.isPageRefresh(i)&&this.snapshot.shouldMorphPage?Ki:jt,a=new o(this.snapshot,e,jt.renderElement,t,r);return a.shouldRender?i?.changeHistory():this.forceReloaded=!0,this.render(a)}renderError(e,t){t?.changeHistory();let r=new ys(this.snapshot,e,ys.renderElement,!1);return this.render(r)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(e=this.snapshot){if(e.isCacheable){this.delegate.viewWillCacheSnapshot();let{lastRenderedLocation:t}=this;await Wo();let r=e.clone();return this.snapshotCache.put(t,r),r}}getCachedSnapshotForLocation(e){return this.snapshotCache.get(e)}isPageRefresh(e){return!e||this.lastRenderedLocation.pathname===e.location.pathname&&e.action==="replace"}shouldPreserveScrollPosition(e){return this.isPageRefresh(e)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return Fe.fromElement(this.element)}},Yi=class{selector="a[data-turbo-preload]";constructor(e,t){this.delegate=e,this.snapshotCache=t}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this.#e):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",this.#e)}preloadOnLoadLinksForView(e){for(let t of e.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(t)&&this.preloadURL(t)}async preloadURL(e){let t=new URL(e.href);if(this.snapshotCache.has(t))return;await new wt(this,ke.get,t,new URLSearchParams,e).perform()}prepareRequest(e){e.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(e,t){try{let r=await t.responseHTML,i=Fe.fromHTMLString(r);this.snapshotCache.put(e.url,i)}catch{}}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,t){}requestFailedWithResponse(e,t){}#e=()=>{this.preloadOnLoadLinksForView(document.body)}},Zi=class{constructor(e){this.session=e}clear(){this.session.clearCache()}resetCacheControl(){this.#e("")}exemptPageFromCache(){this.#e("no-cache")}exemptPageFromPreview(){this.#e("no-preview")}#e(e){vh("turbo-cache-control",e)}},Qi=class{navigator=new Vi(this);history=new $i(this);view=new Xi(this,document.documentElement);adapter=new Ni(this);pageObserver=new zi(this);cacheObserver=new _i;linkPrefetchObserver=new qi(this,document);linkClickObserver=new gs(this,window);formSubmitObserver=new wr(this,document);scrollObserver=new Wi(this);streamObserver=new ji(this);formLinkClickObserver=new bs(this,document.documentElement);frameRedirector=new Hi(this,document.documentElement);streamMessageRenderer=new Ui;cache=new Zi(this);drive=!0;enabled=!0;progressBarDelay=500;started=!1;formMode="on";#e=150;constructor(e){this.recentRequests=e,this.preloader=new Yi(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(e){this.adapter=e}visit(e,t={}){let r=t.frame?document.getElementById(t.frame):null;if(r instanceof He){let i=t.action||yt(r);r.delegate.proposeVisitIfNavigatedWithAction(r,i),r.src=e.toString()}else this.navigator.proposeVisit(ae(e),t)}refresh(e,t){t&&this.recentRequests.has(t)||this.visit(e,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(e){this.streamObserver.connectStreamSource(e)}disconnectStreamSource(e){this.streamObserver.disconnectStreamSource(e)}renderStreamMessage(e){this.streamMessageRenderer.render(st.wrap(e))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(e){this.progressBarDelay=e}setFormMode(e){this.formMode=e}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return this.#e}set pageRefreshDebouncePeriod(e){this.refresh=Sh(this.debouncedRefresh.bind(this),e),this.#e=e}shouldPreloadLink(e){let t=e.hasAttribute("data-turbo-method"),r=e.hasAttribute("data-turbo-stream"),i=e.getAttribute("data-turbo-frame"),n=i=="_top"?null:document.getElementById(i)||Vt(e,"turbo-frame:not([disabled])");if(t||r||n instanceof He)return!1;{let o=new URL(e.href);return this.elementIsNavigatable(e)&&tt(o,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(e,t,r){this.enabled?this.navigator.startVisit(e,t,{action:"restore",historyChanged:!0,direction:r}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(e){this.history.updateRestorationData({scrollPosition:e})}willSubmitFormLinkToLocation(e,t){return this.elementIsNavigatable(e)&&tt(t,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(e,t){return this.elementIsNavigatable(e)&&tt(t,this.snapshot.rootLocation)}willFollowLinkToLocation(e,t,r){return this.elementIsNavigatable(e)&&tt(t,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(e,t,r)}followedLinkToLocation(e,t){let r=this.getActionForLink(e),i=e.hasAttribute("data-turbo-stream");this.visit(t.href,{action:r,acceptsStreamResponse:i})}allowsVisitingLocationWithAction(e,t){return this.locationWithActionIsSamePage(e,t)||this.applicationAllowsVisitingLocation(e)}visitProposedToLocation(e,t){Ho(e),this.adapter.visitProposedToLocation(e,t)}visitStarted(e){e.acceptsStreamResponse||(ds(document.documentElement),this.view.markVisitDirection(e.direction)),Ho(e.location),e.silent||this.notifyApplicationAfterVisitingLocation(e.location,e.action)}visitCompleted(e){this.view.unmarkVisitDirection(),fs(document.documentElement),this.notifyApplicationAfterPageLoad(e.getTimingMetrics())}locationWithActionIsSamePage(e,t){return this.navigator.locationWithActionIsSamePage(e,t)}visitScrolledToSamePageLocation(e,t){this.notifyApplicationAfterVisitingSamePageLocation(e,t)}willSubmitForm(e,t){let r=sn(e,t);return this.submissionIsNavigatable(e,t)&&tt(ae(r),this.snapshot.rootLocation)}formSubmitted(e,t){this.navigator.submitForm(e,t)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(e){this.renderStreamMessage(e)}viewWillCacheSnapshot(){this.navigator.currentVisit?.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:e},t){let r=this.notifyApplicationBeforeRender(e,t),{defaultPrevented:i,detail:{render:n}}=r;return this.view.renderer&&n&&(this.view.renderer.renderElement=n),!i}viewRenderedSnapshot(e,t,r){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(r)}preloadOnLoadLinksForView(e){this.preloader.preloadOnLoadLinksForView(e)}viewInvalidated(e){this.adapter.pageInvalidated(e)}frameLoaded(e){this.notifyApplicationAfterFrameLoad(e)}frameRendered(e,t){this.notifyApplicationAfterFrameRender(e,t)}applicationAllowsFollowingLinkToLocation(e,t,r){return!this.notifyApplicationAfterClickingLinkToLocation(e,t,r).defaultPrevented}applicationAllowsVisitingLocation(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(e,t,r){return Z("turbo:click",{target:e,detail:{url:t.href,originalEvent:r},cancelable:!0})}notifyApplicationBeforeVisitingLocation(e){return Z("turbo:before-visit",{detail:{url:e.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(e,t){return Z("turbo:visit",{detail:{url:e.href,action:t}})}notifyApplicationBeforeCachingSnapshot(){return Z("turbo:before-cache")}notifyApplicationBeforeRender(e,t){return Z("turbo:before-render",{detail:{newBody:e,...t},cancelable:!0})}notifyApplicationAfterRender(e){return Z("turbo:render",{detail:{renderMethod:e}})}notifyApplicationAfterPageLoad(e={}){return Z("turbo:load",{detail:{url:this.location.href,timing:e}})}notifyApplicationAfterVisitingSamePageLocation(e,t){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:e.toString(),newURL:t.toString()}))}notifyApplicationAfterFrameLoad(e){return Z("turbo:frame-load",{target:e})}notifyApplicationAfterFrameRender(e,t){return Z("turbo:frame-render",{detail:{fetchResponse:e},target:t,cancelable:!0})}submissionIsNavigatable(e,t){if(this.formMode=="off")return!1;{let r=t?this.elementIsNavigatable(t):!0;return this.formMode=="optin"?r&&e.closest('[data-turbo="true"]')!=null:r&&this.elementIsNavigatable(e)}}elementIsNavigatable(e){let t=Vt(e,"[data-turbo]"),r=Vt(e,"turbo-frame");return this.drive||r?t?t.getAttribute("data-turbo")!="false":!0:t?t.getAttribute("data-turbo")=="true":!1}getActionForLink(e){return yt(e)||"advance"}get snapshot(){return this.view.snapshot}};function Ho(s){Object.defineProperties(s,cu)}var cu={absoluteURL:{get(){return this.toString()}}},Y=new Qi(Zo),{cache:hu,navigator:uu}=Y;function ra(){Y.start()}function du(s){Y.registerAdapter(s)}function fu(s,e){Y.visit(s,e)}function sa(s){Y.connectStreamSource(s)}function ia(s){Y.disconnectStreamSource(s)}function pu(s){Y.renderStreamMessage(s)}function mu(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Y.clearCache()}function gu(s){Y.setProgressBarDelay(s)}function bu(s){yr.confirmMethod=s}function vu(s){Y.setFormMode(s)}var yu=Object.freeze({__proto__:null,navigator:uu,session:Y,cache:hu,PageRenderer:jt,PageSnapshot:Fe,FrameRenderer:Sr,fetch:Qo,start:ra,registerAdapter:du,visit:fu,connectStreamSource:sa,disconnectStreamSource:ia,renderStreamMessage:pu,clearCache:mu,setProgressBarDelay:gu,setConfirmMethod:bu,setFormMode:vu}),Ji=class extends Error{},en=class{fetchResponseLoaded=e=>Promise.resolve();#e=null;#t=()=>{};#r=!1;#i=!1;#n=new Set;action=null;constructor(e){this.element=e,this.view=new Pi(this,this.element),this.appearanceObserver=new Oi(this,this.element),this.formLinkClickObserver=new bs(this,this.element),this.linkInterceptor=new ms(this,this.element),this.restorationIdentifier=rt(),this.formSubmitObserver=new wr(this,this.element)}connect(){this.#r||(this.#r=!0,this.loadingStyle==Ht.lazy?this.appearanceObserver.start():this.#s(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.#r&&(this.#r=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==Ht.eager&&this.#s()}sourceURLChanged(){this.#b("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==Ht.eager||this.#i)&&this.#s())}sourceURLReloaded(){let{src:e}=this.element;return this.element.removeAttribute("complete"),this.element.src=null,this.element.src=e,this.element.loaded}loadingStyleChanged(){this.loadingStyle==Ht.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.#s())}async#s(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.#a(ae(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.#i=!0)}async loadResponse(e){(e.redirected||e.succeeded&&e.isHTML)&&(this.sourceURL=e.response.url);try{let t=await e.responseHTML;if(t){let r=Uo(t);Fe.fromDocument(r).isVisitable?await this.#o(e,r):await this.#u(e)}}finally{this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(e){this.proposeVisitIfNavigatedWithAction(e,yt(e)),this.#s()}willSubmitFormLinkToLocation(e){return this.#f(e)}submittedFormLinkToLocation(e,t,r){let i=this.#c(e);i&&r.setAttribute("data-turbo-frame",i.id)}shouldInterceptLinkClick(e,t,r){return this.#f(e)}linkClickIntercepted(e,t){this.#h(e,t)}willSubmitForm(e,t){return e.closest("turbo-frame")==this.element&&this.#f(e,t)}formSubmitted(e,t){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new yr(this,e,t);let{fetchRequest:r}=this.formSubmission;this.prepareRequest(r),this.formSubmission.start()}prepareRequest(e){e.headers["Turbo-Frame"]=this.id,this.currentNavigationElement?.hasAttribute("data-turbo-stream")&&e.acceptResponseType(st.contentType)}requestStarted(e){ds(this.element)}requestPreventedHandlingResponse(e,t){this.#t()}async requestSucceededWithResponse(e,t){await this.loadResponse(t),this.#t()}async requestFailedWithResponse(e,t){await this.loadResponse(t),this.#t()}requestErrored(e,t){console.error(t),this.#t()}requestFinished(e){fs(this.element)}formSubmissionStarted({formElement:e}){ds(e,this.#c(e))}formSubmissionSucceededWithResponse(e,t){let r=this.#c(e.formElement,e.submitter);r.delegate.proposeVisitIfNavigatedWithAction(r,yt(e.submitter,e.formElement,r)),r.delegate.loadResponse(t),e.isSafe||Y.clearCache()}formSubmissionFailedWithResponse(e,t){this.element.delegate.loadResponse(t),Y.clearCache()}formSubmissionErrored(e,t){console.error(t)}formSubmissionFinished({formElement:e}){fs(e,this.#c(e))}allowsImmediateRender({element:e},t){let r=Z("turbo:before-frame-render",{target:this.element,detail:{newFrame:e,...t},cancelable:!0}),{defaultPrevented:i,detail:{render:n}}=r;return this.view.renderer&&n&&(this.view.renderer.renderElement=n),!i}viewRenderedSnapshot(e,t,r){}preloadOnLoadLinksForView(e){Y.preloadOnLoadLinksForView(e)}viewInvalidated(){}willRenderFrame(e,t){this.previousFrameElement=e.cloneNode(!0)}visitCachedSnapshot=({element:e})=>{let t=e.querySelector("#"+this.element.id);t&&this.previousFrameElement&&t.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement};async#o(e,t){let r=await this.extractForeignFrameElement(t.body);if(r){let i=new Ut(r),n=new Sr(this,this.view.snapshot,i,Sr.renderElement,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(n),this.complete=!0,Y.frameRendered(e,this.element),Y.frameLoaded(this.element),await this.fetchResponseLoaded(e)}else this.#l(e)&&this.#d(e)}async#a(e){let t=new wt(this,ke.get,e,new URLSearchParams,this.element);return this.#e?.cancel(),this.#e=t,new Promise(r=>{this.#t=()=>{this.#t=()=>{},this.#e=null,r()},t.perform()})}#h(e,t,r){let i=this.#c(e,r);i.delegate.proposeVisitIfNavigatedWithAction(i,yt(r,e,i)),this.#y(e,()=>{i.src=t})}proposeVisitIfNavigatedWithAction(e,t=null){if(this.action=t,this.action){let r=Fe.fromElement(e).clone(),{visitCachedSnapshot:i}=e.delegate;e.delegate.fetchResponseLoaded=async n=>{if(e.src){let{statusCode:o,redirected:a}=n,l=await n.responseHTML,f={response:{statusCode:o,redirected:a,responseHTML:l},visitCachedSnapshot:i,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:r};this.action&&(f.action=this.action),Y.visit(e.src,f)}}}}changeHistory(){if(this.action){let e=Ko(this.action);Y.history.update(e,ae(this.element.src||""),this.restorationIdentifier)}}async#u(e){console.warn(`The response (${e.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.#p(e.response)}#l(e){this.element.setAttribute("complete","");let t=e.response,r=async(n,o)=>{n instanceof Response?this.#p(n):Y.visit(n,o)};return!Z("turbo:frame-missing",{target:this.element,detail:{response:t,visit:r},cancelable:!0}).defaultPrevented}#d(e){this.view.missing(),this.#m(e)}#m(e){let t=`The response (${e.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new Ji(t)}async#p(e){let t=new br(e),r=await t.responseHTML,{location:i,redirected:n,statusCode:o}=t;return Y.visit(i,{response:{redirected:n,statusCode:o,responseHTML:r}})}#c(e,t){let r=us("data-turbo-frame",t,e)||this.element.getAttribute("target");return $o(r)??this.element}async extractForeignFrameElement(e){let t,r=CSS.escape(this.id);try{if(t=qo(e.querySelector(`turbo-frame#${r}`),this.sourceURL),t)return t;if(t=qo(e.querySelector(`turbo-frame[src][recurse~=${r}]`),this.sourceURL),t)return await t.loaded,await this.extractForeignFrameElement(t)}catch(i){return console.error(i),new He}return null}#g(e,t){let r=sn(e,t);return tt(ae(r),this.rootLocation)}#f(e,t){let r=us("data-turbo-frame",t,e)||this.element.getAttribute("target");if(e instanceof HTMLFormElement&&!this.#g(e,t)||!this.enabled||r=="_top")return!1;if(r){let i=$o(r);if(i)return!i.disabled}return!(!Y.elementIsNavigatable(e)||t&&!Y.elementIsNavigatable(t))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(e){this.#v("src",()=>{this.element.src=e??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.#t()!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(e){e?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&this.#r}get rootLocation(){let t=this.element.ownerDocument.querySelector('meta[name="turbo-root"]')?.content??"/";return ae(t)}#b(e){return this.#n.has(e)}#v(e,t){this.#n.add(e),t(),this.#n.delete(e)}#y(e,t){this.currentNavigationElement=e,t(),delete this.currentNavigationElement}};function $o(s){if(s!=null){let e=document.getElementById(s);if(e instanceof He)return e}}function qo(s,e){if(s){let t=s.getAttribute("src");if(t!=null&&e!=null&&oh(t,e))throw new Error(`Matching <turbo-frame id="${s.id}"> element has a source URL which references itself`);if(s.ownerDocument!==document&&(s=document.importNode(s,!0)),s instanceof He)return s.connectedCallback(),s.disconnectedCallback(),s}}var na={after(){this.targetElements.forEach(s=>s.parentElement?.insertBefore(this.templateContent,s.nextSibling))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(s=>s.append(this.templateContent))},before(){this.targetElements.forEach(s=>s.parentElement?.insertBefore(this.templateContent,s))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(s=>s.prepend(this.templateContent))},remove(){this.targetElements.forEach(s=>s.remove())},replace(){this.targetElements.forEach(s=>s.replaceWith(this.templateContent))},update(){this.targetElements.forEach(s=>{s.innerHTML="",s.append(this.templateContent)})},refresh(){Y.refresh(this.baseURI,this.requestId)}},tn=class s extends HTMLElement{static async renderElement(e){await e.performAction()}async connectedCallback(){try{await this.render()}catch(e){console.error(e)}finally{this.disconnect()}}async render(){return this.renderPromise??=(async()=>{let e=this.beforeRenderEvent;this.dispatchEvent(e)&&(await qt(),await e.detail.render(this))})()}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(e=>e.remove())}get duplicateChildren(){let e=this.targetElements.flatMap(r=>[...r.children]).filter(r=>!!r.id),t=[...this.templateContent?.children||[]].filter(r=>!!r.id).map(r=>r.id);return e.filter(r=>t.includes(r.id))}get performAction(){if(this.action){let e=na[this.action];if(e)return e;this.#e("unknown action")}this.#e("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;this.#e("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){let e=this.ownerDocument.createElement("template");return this.appendChild(e),e}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.#e("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}#e(e){throw new Error(`${this.description}: ${e}`)}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:s.renderElement}})}get targetElementsById(){let e=this.ownerDocument?.getElementById(this.target);return e!==null?[e]:[]}get targetElementsByQuery(){let e=this.ownerDocument?.querySelectorAll(this.targets);return e.length!==0?Array.prototype.slice.call(e):[]}},rn=class extends HTMLElement{streamSource=null;connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),sa(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),ia(this.streamSource))}get src(){return this.getAttribute("src")||""}};He.delegateConstructor=en;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",He);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",tn);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",rn);(()=>{let s=document.currentScript;if(s&&!s.hasAttribute("data-turbo-suppress-warning"))for(s=s.parentElement;s;){if(s==document.body)return console.warn(jo`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,s.outerHTML);s=s.parentElement}})();window.Turbo={...yu,StreamActions:na};ra();["turbo:click","turbo:before-visit","turbo:visit","turbo:submit-start","turbo:before-fetch-request","turbo:before-fetch-response","turbo:submit-end","turbo:before-cache","turbo:before-render","turbo:before-stream-render","turbo:render","turbo:load","turbo:before-frame-render","turbo:frame-render","turbo:frame-load","turbo:frame-missing","turbo:fetch-request-error","turbo:reload","turbo:morph","turbo:before-morph-element","turbo:morph-attribute","turbo:morph"].forEach(s=>{document.addEventListener(s,e=>{console.log(e.type,e)})});var wu=Fr.start();Li(wu);})();
/*! Bundled license information:

dompurify/dist/purify.es.mjs:
  (*! @license DOMPurify 3.2.2 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.2/LICENSE *)

@hotwired/turbo/dist/turbo.es2017-esm.js:
  (*!
  Turbo 8.0.4
  Copyright  2024 37signals LLC
   *)
*/
//# sourceMappingURL=plutonium.min.js.map
