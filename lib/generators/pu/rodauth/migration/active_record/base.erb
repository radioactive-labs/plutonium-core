create_table :<%= table_prefix.pluralize %><%= primary_key_type %> do |t|
  t.integer :status, null: false, default: 1
<% case activerecord_adapter -%>
<% when "postgresql" -%>
  t.citext :<%= login_column %>, null: false
<% else -%>
  t.string :<%= login_column %>, null: false
<% end -%>
<% case activerecord_adapter -%>
<% when "postgresql", "sqlite3" -%>
  t.index :<%= login_column %>, unique: true, where: "status IN (1, 2)"
<% else -%>
  t.index :<%= login_column %>, unique: true
<% end -%>
<% unless separate_passwords? -%>
  t.string :password_hash
<% end -%>
end
